var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));
var __objRest = (source, exclude) => {
  var target = {};
  for (var prop in source)
    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)
      target[prop] = source[prop];
  if (source != null && __getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(source)) {
      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))
        target[prop] = source[prop];
    }
  return target;
};
var __publicField = (obj, key, value) => {
  __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};
const p = function polyfill() {
  const relList = document.createElement("link").relList;
  if (relList && relList.supports && relList.supports("modulepreload")) {
    return;
  }
  for (const link of document.querySelectorAll('link[rel="modulepreload"]')) {
    processPreload(link);
  }
  new MutationObserver((mutations) => {
    for (const mutation of mutations) {
      if (mutation.type !== "childList") {
        continue;
      }
      for (const node of mutation.addedNodes) {
        if (node.tagName === "LINK" && node.rel === "modulepreload")
          processPreload(node);
      }
    }
  }).observe(document, { childList: true, subtree: true });
  function getFetchOpts(script) {
    const fetchOpts = {};
    if (script.integrity)
      fetchOpts.integrity = script.integrity;
    if (script.referrerpolicy)
      fetchOpts.referrerPolicy = script.referrerpolicy;
    if (script.crossorigin === "use-credentials")
      fetchOpts.credentials = "include";
    else if (script.crossorigin === "anonymous")
      fetchOpts.credentials = "omit";
    else
      fetchOpts.credentials = "same-origin";
    return fetchOpts;
  }
  function processPreload(link) {
    if (link.ep)
      return;
    link.ep = true;
    const fetchOpts = getFetchOpts(link);
    fetch(link.href, fetchOpts);
  }
};
p();
(function(f) {
  if (typeof exports === "object" && typeof module !== "undefined") {
    module.exports = f();
  } else if (typeof define === "function" && define.amd) {
    define([], f);
  } else {
    var g;
    if (typeof window !== "undefined") {
      g = window;
    } else if (typeof globalThis !== "undefined") {
      g = globalThis;
    } else if (typeof self !== "undefined") {
      g = self;
    } else {
      g = this;
    }
    g.bitcoinjs = f();
  }
})(function() {
  return function() {
    function r(e, n, t) {
      function o(i3, f) {
        if (!n[i3]) {
          if (!e[i3]) {
            var c = typeof require == "function" && require;
            if (!f && c)
              return c(i3, true);
            if (u)
              return u(i3, true);
            var a = new Error("Cannot find module '" + i3 + "'");
            throw a.code = "MODULE_NOT_FOUND", a;
          }
          var p2 = n[i3] = { exports: {} };
          e[i3][0].call(p2.exports, function(r2) {
            var n2 = e[i3][1][r2];
            return o(n2 || r2);
          }, p2, p2.exports, r, e, n, t);
        }
        return n[i3].exports;
      }
      for (var u = typeof require == "function" && require, i2 = 0; i2 < t.length; i2++)
        o(t[i2]);
      return o;
    }
    return r;
  }()({ 1: [function(require2, module2, exports2) {
    var _Buffer = require2("safe-buffer").Buffer;
    function base(ALPHABET) {
      if (ALPHABET.length >= 255) {
        throw new TypeError("Alphabet too long");
      }
      var BASE_MAP = new Uint8Array(256);
      for (var j = 0; j < BASE_MAP.length; j++) {
        BASE_MAP[j] = 255;
      }
      for (var i2 = 0; i2 < ALPHABET.length; i2++) {
        var x = ALPHABET.charAt(i2);
        var xc = x.charCodeAt(0);
        if (BASE_MAP[xc] !== 255) {
          throw new TypeError(x + " is ambiguous");
        }
        BASE_MAP[xc] = i2;
      }
      var BASE = ALPHABET.length;
      var LEADER = ALPHABET.charAt(0);
      var FACTOR = Math.log(BASE) / Math.log(256);
      var iFACTOR = Math.log(256) / Math.log(BASE);
      function encode(source) {
        if (Array.isArray(source) || source instanceof Uint8Array) {
          source = _Buffer.from(source);
        }
        if (!_Buffer.isBuffer(source)) {
          throw new TypeError("Expected Buffer");
        }
        if (source.length === 0) {
          return "";
        }
        var zeroes = 0;
        var length = 0;
        var pbegin = 0;
        var pend = source.length;
        while (pbegin !== pend && source[pbegin] === 0) {
          pbegin++;
          zeroes++;
        }
        var size = (pend - pbegin) * iFACTOR + 1 >>> 0;
        var b58 = new Uint8Array(size);
        while (pbegin !== pend) {
          var carry = source[pbegin];
          var i3 = 0;
          for (var it1 = size - 1; (carry !== 0 || i3 < length) && it1 !== -1; it1--, i3++) {
            carry += 256 * b58[it1] >>> 0;
            b58[it1] = carry % BASE >>> 0;
            carry = carry / BASE >>> 0;
          }
          if (carry !== 0) {
            throw new Error("Non-zero carry");
          }
          length = i3;
          pbegin++;
        }
        var it2 = size - length;
        while (it2 !== size && b58[it2] === 0) {
          it2++;
        }
        var str = LEADER.repeat(zeroes);
        for (; it2 < size; ++it2) {
          str += ALPHABET.charAt(b58[it2]);
        }
        return str;
      }
      function decodeUnsafe(source) {
        if (typeof source !== "string") {
          throw new TypeError("Expected String");
        }
        if (source.length === 0) {
          return _Buffer.alloc(0);
        }
        var psz = 0;
        if (source[psz] === " ") {
          return;
        }
        var zeroes = 0;
        var length = 0;
        while (source[psz] === LEADER) {
          zeroes++;
          psz++;
        }
        var size = (source.length - psz) * FACTOR + 1 >>> 0;
        var b256 = new Uint8Array(size);
        while (source[psz]) {
          var carry = BASE_MAP[source.charCodeAt(psz)];
          if (carry === 255) {
            return;
          }
          var i3 = 0;
          for (var it3 = size - 1; (carry !== 0 || i3 < length) && it3 !== -1; it3--, i3++) {
            carry += BASE * b256[it3] >>> 0;
            b256[it3] = carry % 256 >>> 0;
            carry = carry / 256 >>> 0;
          }
          if (carry !== 0) {
            throw new Error("Non-zero carry");
          }
          length = i3;
          psz++;
        }
        if (source[psz] === " ") {
          return;
        }
        var it4 = size - length;
        while (it4 !== size && b256[it4] === 0) {
          it4++;
        }
        var vch = _Buffer.allocUnsafe(zeroes + (size - it4));
        vch.fill(0, 0, zeroes);
        var j2 = zeroes;
        while (it4 !== size) {
          vch[j2++] = b256[it4++];
        }
        return vch;
      }
      function decode(string) {
        var buffer2 = decodeUnsafe(string);
        if (buffer2) {
          return buffer2;
        }
        throw new Error("Non-base" + BASE + " character");
      }
      return {
        encode,
        decodeUnsafe,
        decode
      };
    }
    module2.exports = base;
  }, { "safe-buffer": 147 }], 2: [function(require2, module2, exports2) {
    exports2.byteLength = byteLength2;
    exports2.toByteArray = toByteArray2;
    exports2.fromByteArray = fromByteArray2;
    var lookup2 = [];
    var revLookup2 = [];
    var Arr2 = typeof Uint8Array !== "undefined" ? Uint8Array : Array;
    var code2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    for (var i2 = 0, len2 = code2.length; i2 < len2; ++i2) {
      lookup2[i2] = code2[i2];
      revLookup2[code2.charCodeAt(i2)] = i2;
    }
    revLookup2["-".charCodeAt(0)] = 62;
    revLookup2["_".charCodeAt(0)] = 63;
    function getLens2(b64) {
      var len3 = b64.length;
      if (len3 % 4 > 0) {
        throw new Error("Invalid string. Length must be a multiple of 4");
      }
      var validLen = b64.indexOf("=");
      if (validLen === -1)
        validLen = len3;
      var placeHoldersLen = validLen === len3 ? 0 : 4 - validLen % 4;
      return [validLen, placeHoldersLen];
    }
    function byteLength2(b64) {
      var lens = getLens2(b64);
      var validLen = lens[0];
      var placeHoldersLen = lens[1];
      return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
    }
    function _byteLength2(b64, validLen, placeHoldersLen) {
      return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
    }
    function toByteArray2(b64) {
      var tmp;
      var lens = getLens2(b64);
      var validLen = lens[0];
      var placeHoldersLen = lens[1];
      var arr = new Arr2(_byteLength2(b64, validLen, placeHoldersLen));
      var curByte = 0;
      var len3 = placeHoldersLen > 0 ? validLen - 4 : validLen;
      var i3;
      for (i3 = 0; i3 < len3; i3 += 4) {
        tmp = revLookup2[b64.charCodeAt(i3)] << 18 | revLookup2[b64.charCodeAt(i3 + 1)] << 12 | revLookup2[b64.charCodeAt(i3 + 2)] << 6 | revLookup2[b64.charCodeAt(i3 + 3)];
        arr[curByte++] = tmp >> 16 & 255;
        arr[curByte++] = tmp >> 8 & 255;
        arr[curByte++] = tmp & 255;
      }
      if (placeHoldersLen === 2) {
        tmp = revLookup2[b64.charCodeAt(i3)] << 2 | revLookup2[b64.charCodeAt(i3 + 1)] >> 4;
        arr[curByte++] = tmp & 255;
      }
      if (placeHoldersLen === 1) {
        tmp = revLookup2[b64.charCodeAt(i3)] << 10 | revLookup2[b64.charCodeAt(i3 + 1)] << 4 | revLookup2[b64.charCodeAt(i3 + 2)] >> 2;
        arr[curByte++] = tmp >> 8 & 255;
        arr[curByte++] = tmp & 255;
      }
      return arr;
    }
    function tripletToBase642(num) {
      return lookup2[num >> 18 & 63] + lookup2[num >> 12 & 63] + lookup2[num >> 6 & 63] + lookup2[num & 63];
    }
    function encodeChunk2(uint8, start2, end) {
      var tmp;
      var output = [];
      for (var i3 = start2; i3 < end; i3 += 3) {
        tmp = (uint8[i3] << 16 & 16711680) + (uint8[i3 + 1] << 8 & 65280) + (uint8[i3 + 2] & 255);
        output.push(tripletToBase642(tmp));
      }
      return output.join("");
    }
    function fromByteArray2(uint8) {
      var tmp;
      var len3 = uint8.length;
      var extraBytes = len3 % 3;
      var parts = [];
      var maxChunkLength = 16383;
      for (var i3 = 0, len22 = len3 - extraBytes; i3 < len22; i3 += maxChunkLength) {
        parts.push(encodeChunk2(uint8, i3, i3 + maxChunkLength > len22 ? len22 : i3 + maxChunkLength));
      }
      if (extraBytes === 1) {
        tmp = uint8[len3 - 1];
        parts.push(lookup2[tmp >> 2] + lookup2[tmp << 4 & 63] + "==");
      } else if (extraBytes === 2) {
        tmp = (uint8[len3 - 2] << 8) + uint8[len3 - 1];
        parts.push(lookup2[tmp >> 10] + lookup2[tmp >> 4 & 63] + lookup2[tmp << 2 & 63] + "=");
      }
      return parts.join("");
    }
  }, {}], 3: [function(require2, module2, exports2) {
    var ALPHABET = "qpzry9x8gf2tvdw0s3jn54khce6mua7l";
    var ALPHABET_MAP = {};
    for (var z = 0; z < ALPHABET.length; z++) {
      var x = ALPHABET.charAt(z);
      if (ALPHABET_MAP[x] !== void 0)
        throw new TypeError(x + " is ambiguous");
      ALPHABET_MAP[x] = z;
    }
    function polymodStep(pre) {
      var b = pre >> 25;
      return (pre & 33554431) << 5 ^ -(b >> 0 & 1) & 996825010 ^ -(b >> 1 & 1) & 642813549 ^ -(b >> 2 & 1) & 513874426 ^ -(b >> 3 & 1) & 1027748829 ^ -(b >> 4 & 1) & 705979059;
    }
    function prefixChk(prefix) {
      var chk = 1;
      for (var i2 = 0; i2 < prefix.length; ++i2) {
        var c = prefix.charCodeAt(i2);
        if (c < 33 || c > 126)
          return "Invalid prefix (" + prefix + ")";
        chk = polymodStep(chk) ^ c >> 5;
      }
      chk = polymodStep(chk);
      for (i2 = 0; i2 < prefix.length; ++i2) {
        var v2 = prefix.charCodeAt(i2);
        chk = polymodStep(chk) ^ v2 & 31;
      }
      return chk;
    }
    function encode(prefix, words, LIMIT) {
      LIMIT = LIMIT || 90;
      if (prefix.length + 7 + words.length > LIMIT)
        throw new TypeError("Exceeds length limit");
      prefix = prefix.toLowerCase();
      var chk = prefixChk(prefix);
      if (typeof chk === "string")
        throw new Error(chk);
      var result = prefix + "1";
      for (var i2 = 0; i2 < words.length; ++i2) {
        var x2 = words[i2];
        if (x2 >> 5 !== 0)
          throw new Error("Non 5-bit word");
        chk = polymodStep(chk) ^ x2;
        result += ALPHABET.charAt(x2);
      }
      for (i2 = 0; i2 < 6; ++i2) {
        chk = polymodStep(chk);
      }
      chk ^= 1;
      for (i2 = 0; i2 < 6; ++i2) {
        var v2 = chk >> (5 - i2) * 5 & 31;
        result += ALPHABET.charAt(v2);
      }
      return result;
    }
    function __decode(str, LIMIT) {
      LIMIT = LIMIT || 90;
      if (str.length < 8)
        return str + " too short";
      if (str.length > LIMIT)
        return "Exceeds length limit";
      var lowered = str.toLowerCase();
      var uppered = str.toUpperCase();
      if (str !== lowered && str !== uppered)
        return "Mixed-case string " + str;
      str = lowered;
      var split = str.lastIndexOf("1");
      if (split === -1)
        return "No separator character for " + str;
      if (split === 0)
        return "Missing prefix for " + str;
      var prefix = str.slice(0, split);
      var wordChars = str.slice(split + 1);
      if (wordChars.length < 6)
        return "Data too short";
      var chk = prefixChk(prefix);
      if (typeof chk === "string")
        return chk;
      var words = [];
      for (var i2 = 0; i2 < wordChars.length; ++i2) {
        var c = wordChars.charAt(i2);
        var v2 = ALPHABET_MAP[c];
        if (v2 === void 0)
          return "Unknown character " + c;
        chk = polymodStep(chk) ^ v2;
        if (i2 + 6 >= wordChars.length)
          continue;
        words.push(v2);
      }
      if (chk !== 1)
        return "Invalid checksum for " + str;
      return { prefix, words };
    }
    function decodeUnsafe() {
      var res = __decode.apply(null, arguments);
      if (typeof res === "object")
        return res;
    }
    function decode(str) {
      var res = __decode.apply(null, arguments);
      if (typeof res === "object")
        return res;
      throw new Error(res);
    }
    function convert(data, inBits, outBits, pad) {
      var value = 0;
      var bits = 0;
      var maxV = (1 << outBits) - 1;
      var result = [];
      for (var i2 = 0; i2 < data.length; ++i2) {
        value = value << inBits | data[i2];
        bits += inBits;
        while (bits >= outBits) {
          bits -= outBits;
          result.push(value >> bits & maxV);
        }
      }
      if (pad) {
        if (bits > 0) {
          result.push(value << outBits - bits & maxV);
        }
      } else {
        if (bits >= inBits)
          return "Excess padding";
        if (value << outBits - bits & maxV)
          return "Non-zero padding";
      }
      return result;
    }
    function toWordsUnsafe(bytes) {
      var res = convert(bytes, 8, 5, true);
      if (Array.isArray(res))
        return res;
    }
    function toWords(bytes) {
      var res = convert(bytes, 8, 5, true);
      if (Array.isArray(res))
        return res;
      throw new Error(res);
    }
    function fromWordsUnsafe(words) {
      var res = convert(words, 5, 8, false);
      if (Array.isArray(res))
        return res;
    }
    function fromWords(words) {
      var res = convert(words, 5, 8, false);
      if (Array.isArray(res))
        return res;
      throw new Error(res);
    }
    module2.exports = {
      decodeUnsafe,
      decode,
      encode,
      toWordsUnsafe,
      toWords,
      fromWordsUnsafe,
      fromWords
    };
  }, {}], 4: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const parser_1 = require2("../parser");
    function combine(psbts) {
      const self2 = psbts[0];
      const selfKeyVals = parser_1.psbtToKeyVals(self2);
      const others = psbts.slice(1);
      if (others.length === 0)
        throw new Error("Combine: Nothing to combine");
      const selfTx = getTx(self2);
      if (selfTx === void 0) {
        throw new Error("Combine: Self missing transaction");
      }
      const selfGlobalSet = getKeySet(selfKeyVals.globalKeyVals);
      const selfInputSets = selfKeyVals.inputKeyVals.map(getKeySet);
      const selfOutputSets = selfKeyVals.outputKeyVals.map(getKeySet);
      for (const other of others) {
        const otherTx = getTx(other);
        if (otherTx === void 0 || !otherTx.toBuffer().equals(selfTx.toBuffer())) {
          throw new Error("Combine: One of the Psbts does not have the same transaction.");
        }
        const otherKeyVals = parser_1.psbtToKeyVals(other);
        const otherGlobalSet = getKeySet(otherKeyVals.globalKeyVals);
        otherGlobalSet.forEach(keyPusher(selfGlobalSet, selfKeyVals.globalKeyVals, otherKeyVals.globalKeyVals));
        const otherInputSets = otherKeyVals.inputKeyVals.map(getKeySet);
        otherInputSets.forEach((inputSet, idx) => inputSet.forEach(keyPusher(selfInputSets[idx], selfKeyVals.inputKeyVals[idx], otherKeyVals.inputKeyVals[idx])));
        const otherOutputSets = otherKeyVals.outputKeyVals.map(getKeySet);
        otherOutputSets.forEach((outputSet, idx) => outputSet.forEach(keyPusher(selfOutputSets[idx], selfKeyVals.outputKeyVals[idx], otherKeyVals.outputKeyVals[idx])));
      }
      return parser_1.psbtFromKeyVals(selfTx, {
        globalMapKeyVals: selfKeyVals.globalKeyVals,
        inputKeyVals: selfKeyVals.inputKeyVals,
        outputKeyVals: selfKeyVals.outputKeyVals
      });
    }
    exports2.combine = combine;
    function keyPusher(selfSet, selfKeyVals, otherKeyVals) {
      return (key) => {
        if (selfSet.has(key))
          return;
        const newKv = otherKeyVals.filter((kv) => kv.key.toString("hex") === key)[0];
        selfKeyVals.push(newKv);
        selfSet.add(key);
      };
    }
    function getTx(psbt) {
      return psbt.globalMap.unsignedTx;
    }
    function getKeySet(keyVals) {
      const set5 = new Set();
      keyVals.forEach((keyVal) => {
        const hex = keyVal.key.toString("hex");
        if (set5.has(hex))
          throw new Error("Combine: KeyValue Map keys should be unique");
        set5.add(hex);
      });
      return set5;
    }
  }, { "../parser": 22 }], 5: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const typeFields_1 = require2("../../typeFields");
        const range = (n) => [...Array(n).keys()];
        function decode(keyVal) {
          if (keyVal.key[0] !== typeFields_1.GlobalTypes.GLOBAL_XPUB) {
            throw new Error("Decode Error: could not decode globalXpub with key 0x" + keyVal.key.toString("hex"));
          }
          if (keyVal.key.length !== 79 || ![2, 3].includes(keyVal.key[46])) {
            throw new Error("Decode Error: globalXpub has invalid extended pubkey in key 0x" + keyVal.key.toString("hex"));
          }
          if (keyVal.value.length / 4 % 1 !== 0) {
            throw new Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");
          }
          const extendedPubkey = keyVal.key.slice(1);
          const data = {
            masterFingerprint: keyVal.value.slice(0, 4),
            extendedPubkey,
            path: "m"
          };
          for (const i2 of range(keyVal.value.length / 4 - 1)) {
            const val = keyVal.value.readUInt32LE(i2 * 4 + 4);
            const isHard = !!(val & 2147483648);
            const idx = val & 2147483647;
            data.path += "/" + idx.toString(10) + (isHard ? "'" : "");
          }
          return data;
        }
        exports2.decode = decode;
        function encode(data) {
          const head = Buffer2.from([typeFields_1.GlobalTypes.GLOBAL_XPUB]);
          const key = Buffer2.concat([head, data.extendedPubkey]);
          const splitPath = data.path.split("/");
          const value = Buffer2.allocUnsafe(splitPath.length * 4);
          data.masterFingerprint.copy(value, 0);
          let offset = 4;
          splitPath.slice(1).forEach((level) => {
            const isHard = level.slice(-1) === "'";
            let num = 2147483647 & parseInt(isHard ? level.slice(0, -1) : level, 10);
            if (isHard)
              num += 2147483648;
            value.writeUInt32LE(num, offset);
            offset += 4;
          });
          return {
            key,
            value
          };
        }
        exports2.encode = encode;
        exports2.expected = "{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }";
        function check(data) {
          const epk = data.extendedPubkey;
          const mfp = data.masterFingerprint;
          const p2 = data.path;
          return Buffer2.isBuffer(epk) && epk.length === 78 && [2, 3].indexOf(epk[45]) > -1 && Buffer2.isBuffer(mfp) && mfp.length === 4 && typeof p2 === "string" && !!p2.match(/^m(\/\d+'?)+$/);
        }
        exports2.check = check;
        function canAddToArray(array, item, dupeSet) {
          const dupeString = item.extendedPubkey.toString("hex");
          if (dupeSet.has(dupeString))
            return false;
          dupeSet.add(dupeString);
          return array.filter((v2) => v2.extendedPubkey.equals(item.extendedPubkey)).length === 0;
        }
        exports2.canAddToArray = canAddToArray;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../../typeFields": 25, "buffer": 83 }], 6: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const typeFields_1 = require2("../../typeFields");
        function encode(data) {
          return {
            key: Buffer2.from([typeFields_1.GlobalTypes.UNSIGNED_TX]),
            value: data.toBuffer()
          };
        }
        exports2.encode = encode;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../../typeFields": 25, "buffer": 83 }], 7: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const typeFields_1 = require2("../typeFields");
    const globalXpub = require2("./globalThis/globalXpub");
    const unsignedTx = require2("./globalThis/unsignedTx");
    const finalScriptSig = require2("./input/finalScriptSig");
    const finalScriptWitness = require2("./input/finalScriptWitness");
    const nonWitnessUtxo = require2("./input/nonWitnessUtxo");
    const partialSig = require2("./input/partialSig");
    const porCommitment = require2("./input/porCommitment");
    const sighashType = require2("./input/sighashType");
    const witnessUtxo = require2("./input/witnessUtxo");
    const bip32Derivation = require2("./shared/bip32Derivation");
    const checkPubkey = require2("./shared/checkPubkey");
    const redeemScript = require2("./shared/redeemScript");
    const witnessScript = require2("./shared/witnessScript");
    const globals2 = {
      unsignedTx,
      globalXpub,
      checkPubkey: checkPubkey.makeChecker([])
    };
    exports2.globals = globals2;
    const inputs = {
      nonWitnessUtxo,
      partialSig,
      sighashType,
      finalScriptSig,
      finalScriptWitness,
      porCommitment,
      witnessUtxo,
      bip32Derivation: bip32Derivation.makeConverter(typeFields_1.InputTypes.BIP32_DERIVATION),
      redeemScript: redeemScript.makeConverter(typeFields_1.InputTypes.REDEEM_SCRIPT),
      witnessScript: witnessScript.makeConverter(typeFields_1.InputTypes.WITNESS_SCRIPT),
      checkPubkey: checkPubkey.makeChecker([
        typeFields_1.InputTypes.PARTIAL_SIG,
        typeFields_1.InputTypes.BIP32_DERIVATION
      ])
    };
    exports2.inputs = inputs;
    const outputs = {
      bip32Derivation: bip32Derivation.makeConverter(typeFields_1.OutputTypes.BIP32_DERIVATION),
      redeemScript: redeemScript.makeConverter(typeFields_1.OutputTypes.REDEEM_SCRIPT),
      witnessScript: witnessScript.makeConverter(typeFields_1.OutputTypes.WITNESS_SCRIPT),
      checkPubkey: checkPubkey.makeChecker([
        typeFields_1.OutputTypes.BIP32_DERIVATION
      ])
    };
    exports2.outputs = outputs;
  }, { "../typeFields": 25, "./globalThis/globalXpub": 5, "./globalThis/unsignedTx": 6, "./input/finalScriptSig": 8, "./input/finalScriptWitness": 9, "./input/nonWitnessUtxo": 10, "./input/partialSig": 11, "./input/porCommitment": 12, "./input/sighashType": 13, "./input/witnessUtxo": 14, "./shared/bip32Derivation": 15, "./shared/checkPubkey": 16, "./shared/redeemScript": 17, "./shared/witnessScript": 18 }], 8: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const typeFields_1 = require2("../../typeFields");
        function decode(keyVal) {
          if (keyVal.key[0] !== typeFields_1.InputTypes.FINAL_SCRIPTSIG) {
            throw new Error("Decode Error: could not decode finalScriptSig with key 0x" + keyVal.key.toString("hex"));
          }
          return keyVal.value;
        }
        exports2.decode = decode;
        function encode(data) {
          const key = Buffer2.from([typeFields_1.InputTypes.FINAL_SCRIPTSIG]);
          return {
            key,
            value: data
          };
        }
        exports2.encode = encode;
        exports2.expected = "Buffer";
        function check(data) {
          return Buffer2.isBuffer(data);
        }
        exports2.check = check;
        function canAdd(currentData, newData) {
          return !!currentData && !!newData && currentData.finalScriptSig === void 0;
        }
        exports2.canAdd = canAdd;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../../typeFields": 25, "buffer": 83 }], 9: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const typeFields_1 = require2("../../typeFields");
        function decode(keyVal) {
          if (keyVal.key[0] !== typeFields_1.InputTypes.FINAL_SCRIPTWITNESS) {
            throw new Error("Decode Error: could not decode finalScriptWitness with key 0x" + keyVal.key.toString("hex"));
          }
          return keyVal.value;
        }
        exports2.decode = decode;
        function encode(data) {
          const key = Buffer2.from([typeFields_1.InputTypes.FINAL_SCRIPTWITNESS]);
          return {
            key,
            value: data
          };
        }
        exports2.encode = encode;
        exports2.expected = "Buffer";
        function check(data) {
          return Buffer2.isBuffer(data);
        }
        exports2.check = check;
        function canAdd(currentData, newData) {
          return !!currentData && !!newData && currentData.finalScriptWitness === void 0;
        }
        exports2.canAdd = canAdd;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../../typeFields": 25, "buffer": 83 }], 10: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const typeFields_1 = require2("../../typeFields");
        function decode(keyVal) {
          if (keyVal.key[0] !== typeFields_1.InputTypes.NON_WITNESS_UTXO) {
            throw new Error("Decode Error: could not decode nonWitnessUtxo with key 0x" + keyVal.key.toString("hex"));
          }
          return keyVal.value;
        }
        exports2.decode = decode;
        function encode(data) {
          return {
            key: Buffer2.from([typeFields_1.InputTypes.NON_WITNESS_UTXO]),
            value: data
          };
        }
        exports2.encode = encode;
        exports2.expected = "Buffer";
        function check(data) {
          return Buffer2.isBuffer(data);
        }
        exports2.check = check;
        function canAdd(currentData, newData) {
          return !!currentData && !!newData && currentData.nonWitnessUtxo === void 0;
        }
        exports2.canAdd = canAdd;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../../typeFields": 25, "buffer": 83 }], 11: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const typeFields_1 = require2("../../typeFields");
        function decode(keyVal) {
          if (keyVal.key[0] !== typeFields_1.InputTypes.PARTIAL_SIG) {
            throw new Error("Decode Error: could not decode partialSig with key 0x" + keyVal.key.toString("hex"));
          }
          if (!(keyVal.key.length === 34 || keyVal.key.length === 66) || ![2, 3, 4].includes(keyVal.key[1])) {
            throw new Error("Decode Error: partialSig has invalid pubkey in key 0x" + keyVal.key.toString("hex"));
          }
          const pubkey = keyVal.key.slice(1);
          return {
            pubkey,
            signature: keyVal.value
          };
        }
        exports2.decode = decode;
        function encode(pSig) {
          const head = Buffer2.from([typeFields_1.InputTypes.PARTIAL_SIG]);
          return {
            key: Buffer2.concat([head, pSig.pubkey]),
            value: pSig.signature
          };
        }
        exports2.encode = encode;
        exports2.expected = "{ pubkey: Buffer; signature: Buffer; }";
        function check(data) {
          return Buffer2.isBuffer(data.pubkey) && Buffer2.isBuffer(data.signature) && [33, 65].includes(data.pubkey.length) && [2, 3, 4].includes(data.pubkey[0]) && isDerSigWithSighash(data.signature);
        }
        exports2.check = check;
        function isDerSigWithSighash(buf) {
          if (!Buffer2.isBuffer(buf) || buf.length < 9)
            return false;
          if (buf[0] !== 48)
            return false;
          if (buf.length !== buf[1] + 3)
            return false;
          if (buf[2] !== 2)
            return false;
          const rLen = buf[3];
          if (rLen > 33 || rLen < 1)
            return false;
          if (buf[3 + rLen + 1] !== 2)
            return false;
          const sLen = buf[3 + rLen + 2];
          if (sLen > 33 || sLen < 1)
            return false;
          if (buf.length !== 3 + rLen + 2 + sLen + 2)
            return false;
          return true;
        }
        function canAddToArray(array, item, dupeSet) {
          const dupeString = item.pubkey.toString("hex");
          if (dupeSet.has(dupeString))
            return false;
          dupeSet.add(dupeString);
          return array.filter((v2) => v2.pubkey.equals(item.pubkey)).length === 0;
        }
        exports2.canAddToArray = canAddToArray;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../../typeFields": 25, "buffer": 83 }], 12: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const typeFields_1 = require2("../../typeFields");
        function decode(keyVal) {
          if (keyVal.key[0] !== typeFields_1.InputTypes.POR_COMMITMENT) {
            throw new Error("Decode Error: could not decode porCommitment with key 0x" + keyVal.key.toString("hex"));
          }
          return keyVal.value.toString("utf8");
        }
        exports2.decode = decode;
        function encode(data) {
          const key = Buffer2.from([typeFields_1.InputTypes.POR_COMMITMENT]);
          return {
            key,
            value: Buffer2.from(data, "utf8")
          };
        }
        exports2.encode = encode;
        exports2.expected = "string";
        function check(data) {
          return typeof data === "string";
        }
        exports2.check = check;
        function canAdd(currentData, newData) {
          return !!currentData && !!newData && currentData.porCommitment === void 0;
        }
        exports2.canAdd = canAdd;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../../typeFields": 25, "buffer": 83 }], 13: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const typeFields_1 = require2("../../typeFields");
        function decode(keyVal) {
          if (keyVal.key[0] !== typeFields_1.InputTypes.SIGHASH_TYPE) {
            throw new Error("Decode Error: could not decode sighashType with key 0x" + keyVal.key.toString("hex"));
          }
          return keyVal.value.readUInt32LE(0);
        }
        exports2.decode = decode;
        function encode(data) {
          const key = Buffer2.from([typeFields_1.InputTypes.SIGHASH_TYPE]);
          const value = Buffer2.allocUnsafe(4);
          value.writeUInt32LE(data, 0);
          return {
            key,
            value
          };
        }
        exports2.encode = encode;
        exports2.expected = "number";
        function check(data) {
          return typeof data === "number";
        }
        exports2.check = check;
        function canAdd(currentData, newData) {
          return !!currentData && !!newData && currentData.sighashType === void 0;
        }
        exports2.canAdd = canAdd;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../../typeFields": 25, "buffer": 83 }], 14: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const typeFields_1 = require2("../../typeFields");
        const tools_1 = require2("../tools");
        const varuint = require2("../varint");
        function decode(keyVal) {
          if (keyVal.key[0] !== typeFields_1.InputTypes.WITNESS_UTXO) {
            throw new Error("Decode Error: could not decode witnessUtxo with key 0x" + keyVal.key.toString("hex"));
          }
          const value = tools_1.readUInt64LE(keyVal.value, 0);
          let _offset = 8;
          const scriptLen = varuint.decode(keyVal.value, _offset);
          _offset += varuint.encodingLength(scriptLen);
          const script = keyVal.value.slice(_offset);
          if (script.length !== scriptLen) {
            throw new Error("Decode Error: WITNESS_UTXO script is not proper length");
          }
          return {
            script,
            value
          };
        }
        exports2.decode = decode;
        function encode(data) {
          const { script, value } = data;
          const varintLen = varuint.encodingLength(script.length);
          const result = Buffer2.allocUnsafe(8 + varintLen + script.length);
          tools_1.writeUInt64LE(result, value, 0);
          varuint.encode(script.length, result, 8);
          script.copy(result, 8 + varintLen);
          return {
            key: Buffer2.from([typeFields_1.InputTypes.WITNESS_UTXO]),
            value: result
          };
        }
        exports2.encode = encode;
        exports2.expected = "{ script: Buffer; value: number; }";
        function check(data) {
          return Buffer2.isBuffer(data.script) && typeof data.value === "number";
        }
        exports2.check = check;
        function canAdd(currentData, newData) {
          return !!currentData && !!newData && currentData.witnessUtxo === void 0;
        }
        exports2.canAdd = canAdd;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../../typeFields": 25, "../tools": 19, "../varint": 20, "buffer": 83 }], 15: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const range = (n) => [...Array(n).keys()];
        function makeConverter(TYPE_BYTE) {
          function decode(keyVal) {
            if (keyVal.key[0] !== TYPE_BYTE) {
              throw new Error("Decode Error: could not decode bip32Derivation with key 0x" + keyVal.key.toString("hex"));
            }
            if (!(keyVal.key.length === 34 || keyVal.key.length === 66) || ![2, 3, 4].includes(keyVal.key[1])) {
              throw new Error("Decode Error: bip32Derivation has invalid pubkey in key 0x" + keyVal.key.toString("hex"));
            }
            if (keyVal.value.length / 4 % 1 !== 0) {
              throw new Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");
            }
            const pubkey = keyVal.key.slice(1);
            const data = {
              masterFingerprint: keyVal.value.slice(0, 4),
              pubkey,
              path: "m"
            };
            for (const i2 of range(keyVal.value.length / 4 - 1)) {
              const val = keyVal.value.readUInt32LE(i2 * 4 + 4);
              const isHard = !!(val & 2147483648);
              const idx = val & 2147483647;
              data.path += "/" + idx.toString(10) + (isHard ? "'" : "");
            }
            return data;
          }
          function encode(data) {
            const head = Buffer2.from([TYPE_BYTE]);
            const key = Buffer2.concat([head, data.pubkey]);
            const splitPath = data.path.split("/");
            const value = Buffer2.allocUnsafe(splitPath.length * 4);
            data.masterFingerprint.copy(value, 0);
            let offset = 4;
            splitPath.slice(1).forEach((level) => {
              const isHard = level.slice(-1) === "'";
              let num = 2147483647 & parseInt(isHard ? level.slice(0, -1) : level, 10);
              if (isHard)
                num += 2147483648;
              value.writeUInt32LE(num, offset);
              offset += 4;
            });
            return {
              key,
              value
            };
          }
          const expected = "{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }";
          function check(data) {
            return Buffer2.isBuffer(data.pubkey) && Buffer2.isBuffer(data.masterFingerprint) && typeof data.path === "string" && [33, 65].includes(data.pubkey.length) && [2, 3, 4].includes(data.pubkey[0]) && data.masterFingerprint.length === 4;
          }
          function canAddToArray(array, item, dupeSet) {
            const dupeString = item.pubkey.toString("hex");
            if (dupeSet.has(dupeString))
              return false;
            dupeSet.add(dupeString);
            return array.filter((v2) => v2.pubkey.equals(item.pubkey)).length === 0;
          }
          return {
            decode,
            encode,
            check,
            expected,
            canAddToArray
          };
        }
        exports2.makeConverter = makeConverter;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "buffer": 83 }], 16: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    function makeChecker(pubkeyTypes) {
      return checkPubkey;
      function checkPubkey(keyVal) {
        let pubkey;
        if (pubkeyTypes.includes(keyVal.key[0])) {
          pubkey = keyVal.key.slice(1);
          if (!(pubkey.length === 33 || pubkey.length === 65) || ![2, 3, 4].includes(pubkey[0])) {
            throw new Error("Format Error: invalid pubkey in key 0x" + keyVal.key.toString("hex"));
          }
        }
        return pubkey;
      }
    }
    exports2.makeChecker = makeChecker;
  }, {}], 17: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        function makeConverter(TYPE_BYTE) {
          function decode(keyVal) {
            if (keyVal.key[0] !== TYPE_BYTE) {
              throw new Error("Decode Error: could not decode redeemScript with key 0x" + keyVal.key.toString("hex"));
            }
            return keyVal.value;
          }
          function encode(data) {
            const key = Buffer2.from([TYPE_BYTE]);
            return {
              key,
              value: data
            };
          }
          const expected = "Buffer";
          function check(data) {
            return Buffer2.isBuffer(data);
          }
          function canAdd(currentData, newData) {
            return !!currentData && !!newData && currentData.redeemScript === void 0;
          }
          return {
            decode,
            encode,
            check,
            expected,
            canAdd
          };
        }
        exports2.makeConverter = makeConverter;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "buffer": 83 }], 18: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        function makeConverter(TYPE_BYTE) {
          function decode(keyVal) {
            if (keyVal.key[0] !== TYPE_BYTE) {
              throw new Error("Decode Error: could not decode witnessScript with key 0x" + keyVal.key.toString("hex"));
            }
            return keyVal.value;
          }
          function encode(data) {
            const key = Buffer2.from([TYPE_BYTE]);
            return {
              key,
              value: data
            };
          }
          const expected = "Buffer";
          function check(data) {
            return Buffer2.isBuffer(data);
          }
          function canAdd(currentData, newData) {
            return !!currentData && !!newData && currentData.witnessScript === void 0;
          }
          return {
            decode,
            encode,
            check,
            expected,
            canAdd
          };
        }
        exports2.makeConverter = makeConverter;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "buffer": 83 }], 19: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const varuint = require2("./varint");
        exports2.range = (n) => [...Array(n).keys()];
        function reverseBuffer(buffer2) {
          if (buffer2.length < 1)
            return buffer2;
          let j = buffer2.length - 1;
          let tmp = 0;
          for (let i2 = 0; i2 < buffer2.length / 2; i2++) {
            tmp = buffer2[i2];
            buffer2[i2] = buffer2[j];
            buffer2[j] = tmp;
            j--;
          }
          return buffer2;
        }
        exports2.reverseBuffer = reverseBuffer;
        function keyValsToBuffer(keyVals) {
          const buffers = keyVals.map(keyValToBuffer);
          buffers.push(Buffer2.from([0]));
          return Buffer2.concat(buffers);
        }
        exports2.keyValsToBuffer = keyValsToBuffer;
        function keyValToBuffer(keyVal) {
          const keyLen = keyVal.key.length;
          const valLen = keyVal.value.length;
          const keyVarIntLen = varuint.encodingLength(keyLen);
          const valVarIntLen = varuint.encodingLength(valLen);
          const buffer2 = Buffer2.allocUnsafe(keyVarIntLen + keyLen + valVarIntLen + valLen);
          varuint.encode(keyLen, buffer2, 0);
          keyVal.key.copy(buffer2, keyVarIntLen);
          varuint.encode(valLen, buffer2, keyVarIntLen + keyLen);
          keyVal.value.copy(buffer2, keyVarIntLen + keyLen + valVarIntLen);
          return buffer2;
        }
        exports2.keyValToBuffer = keyValToBuffer;
        function verifuint(value, max) {
          if (typeof value !== "number")
            throw new Error("cannot write a non-number as a number");
          if (value < 0)
            throw new Error("specified a negative value for writing an unsigned value");
          if (value > max)
            throw new Error("RangeError: value out of range");
          if (Math.floor(value) !== value)
            throw new Error("value has a fractional component");
        }
        function readUInt64LE(buffer2, offset) {
          const a = buffer2.readUInt32LE(offset);
          let b = buffer2.readUInt32LE(offset + 4);
          b *= 4294967296;
          verifuint(b + a, 9007199254740991);
          return b + a;
        }
        exports2.readUInt64LE = readUInt64LE;
        function writeUInt64LE(buffer2, value, offset) {
          verifuint(value, 9007199254740991);
          buffer2.writeInt32LE(value & -1, offset);
          buffer2.writeUInt32LE(Math.floor(value / 4294967296), offset + 4);
          return offset + 8;
        }
        exports2.writeUInt64LE = writeUInt64LE;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "./varint": 20, "buffer": 83 }], 20: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const MAX_SAFE_INTEGER = 9007199254740991;
        function checkUInt53(n) {
          if (n < 0 || n > MAX_SAFE_INTEGER || n % 1 !== 0)
            throw new RangeError("value out of range");
        }
        function encode(_number, buffer2, offset) {
          checkUInt53(_number);
          if (!buffer2)
            buffer2 = Buffer2.allocUnsafe(encodingLength(_number));
          if (!Buffer2.isBuffer(buffer2))
            throw new TypeError("buffer must be a Buffer instance");
          if (!offset)
            offset = 0;
          if (_number < 253) {
            buffer2.writeUInt8(_number, offset);
            Object.assign(encode, { bytes: 1 });
          } else if (_number <= 65535) {
            buffer2.writeUInt8(253, offset);
            buffer2.writeUInt16LE(_number, offset + 1);
            Object.assign(encode, { bytes: 3 });
          } else if (_number <= 4294967295) {
            buffer2.writeUInt8(254, offset);
            buffer2.writeUInt32LE(_number, offset + 1);
            Object.assign(encode, { bytes: 5 });
          } else {
            buffer2.writeUInt8(255, offset);
            buffer2.writeUInt32LE(_number >>> 0, offset + 1);
            buffer2.writeUInt32LE(_number / 4294967296 | 0, offset + 5);
            Object.assign(encode, { bytes: 9 });
          }
          return buffer2;
        }
        exports2.encode = encode;
        function decode(buffer2, offset) {
          if (!Buffer2.isBuffer(buffer2))
            throw new TypeError("buffer must be a Buffer instance");
          if (!offset)
            offset = 0;
          const first = buffer2.readUInt8(offset);
          if (first < 253) {
            Object.assign(decode, { bytes: 1 });
            return first;
          } else if (first === 253) {
            Object.assign(decode, { bytes: 3 });
            return buffer2.readUInt16LE(offset + 1);
          } else if (first === 254) {
            Object.assign(decode, { bytes: 5 });
            return buffer2.readUInt32LE(offset + 1);
          } else {
            Object.assign(decode, { bytes: 9 });
            const lo = buffer2.readUInt32LE(offset + 1);
            const hi = buffer2.readUInt32LE(offset + 5);
            const _number = hi * 4294967296 + lo;
            checkUInt53(_number);
            return _number;
          }
        }
        exports2.decode = decode;
        function encodingLength(_number) {
          checkUInt53(_number);
          return _number < 253 ? 1 : _number <= 65535 ? 3 : _number <= 4294967295 ? 5 : 9;
        }
        exports2.encodingLength = encodingLength;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "buffer": 83 }], 21: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const convert = require2("../converter");
        const tools_1 = require2("../converter/tools");
        const varuint = require2("../converter/varint");
        const typeFields_1 = require2("../typeFields");
        function psbtFromBuffer(buffer2, txGetter) {
          let offset = 0;
          function varSlice() {
            const keyLen = varuint.decode(buffer2, offset);
            offset += varuint.encodingLength(keyLen);
            const key = buffer2.slice(offset, offset + keyLen);
            offset += keyLen;
            return key;
          }
          function readUInt32BE() {
            const num = buffer2.readUInt32BE(offset);
            offset += 4;
            return num;
          }
          function readUInt8() {
            const num = buffer2.readUInt8(offset);
            offset += 1;
            return num;
          }
          function getKeyValue() {
            const key = varSlice();
            const value = varSlice();
            return {
              key,
              value
            };
          }
          function checkEndOfKeyValPairs() {
            if (offset >= buffer2.length) {
              throw new Error("Format Error: Unexpected End of PSBT");
            }
            const isEnd = buffer2.readUInt8(offset) === 0;
            if (isEnd) {
              offset++;
            }
            return isEnd;
          }
          if (readUInt32BE() !== 1886610036) {
            throw new Error("Format Error: Invalid Magic Number");
          }
          if (readUInt8() !== 255) {
            throw new Error("Format Error: Magic Number must be followed by 0xff separator");
          }
          const globalMapKeyVals = [];
          const globalKeyIndex = {};
          while (!checkEndOfKeyValPairs()) {
            const keyVal = getKeyValue();
            const hexKey = keyVal.key.toString("hex");
            if (globalKeyIndex[hexKey]) {
              throw new Error("Format Error: Keys must be unique for globalThis keymap: key " + hexKey);
            }
            globalKeyIndex[hexKey] = 1;
            globalMapKeyVals.push(keyVal);
          }
          const unsignedTxMaps = globalMapKeyVals.filter((keyVal) => keyVal.key[0] === typeFields_1.GlobalTypes.UNSIGNED_TX);
          if (unsignedTxMaps.length !== 1) {
            throw new Error("Format Error: Only one UNSIGNED_TX allowed");
          }
          const unsignedTx = txGetter(unsignedTxMaps[0].value);
          const { inputCount, outputCount } = unsignedTx.getInputOutputCounts();
          const inputKeyVals = [];
          const outputKeyVals = [];
          for (const index of tools_1.range(inputCount)) {
            const inputKeyIndex = {};
            const input = [];
            while (!checkEndOfKeyValPairs()) {
              const keyVal = getKeyValue();
              const hexKey = keyVal.key.toString("hex");
              if (inputKeyIndex[hexKey]) {
                throw new Error("Format Error: Keys must be unique for each input: input index " + index + " key " + hexKey);
              }
              inputKeyIndex[hexKey] = 1;
              input.push(keyVal);
            }
            inputKeyVals.push(input);
          }
          for (const index of tools_1.range(outputCount)) {
            const outputKeyIndex = {};
            const output = [];
            while (!checkEndOfKeyValPairs()) {
              const keyVal = getKeyValue();
              const hexKey = keyVal.key.toString("hex");
              if (outputKeyIndex[hexKey]) {
                throw new Error("Format Error: Keys must be unique for each output: output index " + index + " key " + hexKey);
              }
              outputKeyIndex[hexKey] = 1;
              output.push(keyVal);
            }
            outputKeyVals.push(output);
          }
          return psbtFromKeyVals(unsignedTx, {
            globalMapKeyVals,
            inputKeyVals,
            outputKeyVals
          });
        }
        exports2.psbtFromBuffer = psbtFromBuffer;
        function checkKeyBuffer(type, keyBuf, keyNum) {
          if (!keyBuf.equals(Buffer2.from([keyNum]))) {
            throw new Error(`Format Error: Invalid ${type} key: ${keyBuf.toString("hex")}`);
          }
        }
        exports2.checkKeyBuffer = checkKeyBuffer;
        function psbtFromKeyVals(unsignedTx, { globalMapKeyVals, inputKeyVals, outputKeyVals }) {
          const globalMap = {
            unsignedTx
          };
          let txCount = 0;
          for (const keyVal of globalMapKeyVals) {
            switch (keyVal.key[0]) {
              case typeFields_1.GlobalTypes.UNSIGNED_TX:
                checkKeyBuffer("globalThis", keyVal.key, typeFields_1.GlobalTypes.UNSIGNED_TX);
                if (txCount > 0) {
                  throw new Error("Format Error: GlobalMap has multiple UNSIGNED_TX");
                }
                txCount++;
                break;
              case typeFields_1.GlobalTypes.GLOBAL_XPUB:
                if (globalMap.globalXpub === void 0) {
                  globalMap.globalXpub = [];
                }
                globalMap.globalXpub.push(convert.globals.globalXpub.decode(keyVal));
                break;
              default:
                if (!globalMap.unknownKeyVals)
                  globalMap.unknownKeyVals = [];
                globalMap.unknownKeyVals.push(keyVal);
            }
          }
          const inputCount = inputKeyVals.length;
          const outputCount = outputKeyVals.length;
          const inputs = [];
          const outputs = [];
          for (const index of tools_1.range(inputCount)) {
            const input = {};
            for (const keyVal of inputKeyVals[index]) {
              convert.inputs.checkPubkey(keyVal);
              switch (keyVal.key[0]) {
                case typeFields_1.InputTypes.NON_WITNESS_UTXO:
                  checkKeyBuffer("input", keyVal.key, typeFields_1.InputTypes.NON_WITNESS_UTXO);
                  if (input.nonWitnessUtxo !== void 0) {
                    throw new Error("Format Error: Input has multiple NON_WITNESS_UTXO");
                  }
                  input.nonWitnessUtxo = convert.inputs.nonWitnessUtxo.decode(keyVal);
                  break;
                case typeFields_1.InputTypes.WITNESS_UTXO:
                  checkKeyBuffer("input", keyVal.key, typeFields_1.InputTypes.WITNESS_UTXO);
                  if (input.witnessUtxo !== void 0) {
                    throw new Error("Format Error: Input has multiple WITNESS_UTXO");
                  }
                  input.witnessUtxo = convert.inputs.witnessUtxo.decode(keyVal);
                  break;
                case typeFields_1.InputTypes.PARTIAL_SIG:
                  if (input.partialSig === void 0) {
                    input.partialSig = [];
                  }
                  input.partialSig.push(convert.inputs.partialSig.decode(keyVal));
                  break;
                case typeFields_1.InputTypes.SIGHASH_TYPE:
                  checkKeyBuffer("input", keyVal.key, typeFields_1.InputTypes.SIGHASH_TYPE);
                  if (input.sighashType !== void 0) {
                    throw new Error("Format Error: Input has multiple SIGHASH_TYPE");
                  }
                  input.sighashType = convert.inputs.sighashType.decode(keyVal);
                  break;
                case typeFields_1.InputTypes.REDEEM_SCRIPT:
                  checkKeyBuffer("input", keyVal.key, typeFields_1.InputTypes.REDEEM_SCRIPT);
                  if (input.redeemScript !== void 0) {
                    throw new Error("Format Error: Input has multiple REDEEM_SCRIPT");
                  }
                  input.redeemScript = convert.inputs.redeemScript.decode(keyVal);
                  break;
                case typeFields_1.InputTypes.WITNESS_SCRIPT:
                  checkKeyBuffer("input", keyVal.key, typeFields_1.InputTypes.WITNESS_SCRIPT);
                  if (input.witnessScript !== void 0) {
                    throw new Error("Format Error: Input has multiple WITNESS_SCRIPT");
                  }
                  input.witnessScript = convert.inputs.witnessScript.decode(keyVal);
                  break;
                case typeFields_1.InputTypes.BIP32_DERIVATION:
                  if (input.bip32Derivation === void 0) {
                    input.bip32Derivation = [];
                  }
                  input.bip32Derivation.push(convert.inputs.bip32Derivation.decode(keyVal));
                  break;
                case typeFields_1.InputTypes.FINAL_SCRIPTSIG:
                  checkKeyBuffer("input", keyVal.key, typeFields_1.InputTypes.FINAL_SCRIPTSIG);
                  input.finalScriptSig = convert.inputs.finalScriptSig.decode(keyVal);
                  break;
                case typeFields_1.InputTypes.FINAL_SCRIPTWITNESS:
                  checkKeyBuffer("input", keyVal.key, typeFields_1.InputTypes.FINAL_SCRIPTWITNESS);
                  input.finalScriptWitness = convert.inputs.finalScriptWitness.decode(keyVal);
                  break;
                case typeFields_1.InputTypes.POR_COMMITMENT:
                  checkKeyBuffer("input", keyVal.key, typeFields_1.InputTypes.POR_COMMITMENT);
                  input.porCommitment = convert.inputs.porCommitment.decode(keyVal);
                  break;
                default:
                  if (!input.unknownKeyVals)
                    input.unknownKeyVals = [];
                  input.unknownKeyVals.push(keyVal);
              }
            }
            inputs.push(input);
          }
          for (const index of tools_1.range(outputCount)) {
            const output = {};
            for (const keyVal of outputKeyVals[index]) {
              convert.outputs.checkPubkey(keyVal);
              switch (keyVal.key[0]) {
                case typeFields_1.OutputTypes.REDEEM_SCRIPT:
                  checkKeyBuffer("output", keyVal.key, typeFields_1.OutputTypes.REDEEM_SCRIPT);
                  if (output.redeemScript !== void 0) {
                    throw new Error("Format Error: Output has multiple REDEEM_SCRIPT");
                  }
                  output.redeemScript = convert.outputs.redeemScript.decode(keyVal);
                  break;
                case typeFields_1.OutputTypes.WITNESS_SCRIPT:
                  checkKeyBuffer("output", keyVal.key, typeFields_1.OutputTypes.WITNESS_SCRIPT);
                  if (output.witnessScript !== void 0) {
                    throw new Error("Format Error: Output has multiple WITNESS_SCRIPT");
                  }
                  output.witnessScript = convert.outputs.witnessScript.decode(keyVal);
                  break;
                case typeFields_1.OutputTypes.BIP32_DERIVATION:
                  if (output.bip32Derivation === void 0) {
                    output.bip32Derivation = [];
                  }
                  output.bip32Derivation.push(convert.outputs.bip32Derivation.decode(keyVal));
                  break;
                default:
                  if (!output.unknownKeyVals)
                    output.unknownKeyVals = [];
                  output.unknownKeyVals.push(keyVal);
              }
            }
            outputs.push(output);
          }
          return { globalMap, inputs, outputs };
        }
        exports2.psbtFromKeyVals = psbtFromKeyVals;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../converter": 7, "../converter/tools": 19, "../converter/varint": 20, "../typeFields": 25, "buffer": 83 }], 22: [function(require2, module2, exports2) {
    function __export(m) {
      for (var p2 in m)
        if (!exports2.hasOwnProperty(p2))
          exports2[p2] = m[p2];
    }
    Object.defineProperty(exports2, "__esModule", { value: true });
    __export(require2("./fromBuffer"));
    __export(require2("./toBuffer"));
  }, { "./fromBuffer": 21, "./toBuffer": 23 }], 23: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const convert = require2("../converter");
        const tools_1 = require2("../converter/tools");
        function psbtToBuffer({ globalMap, inputs, outputs }) {
          const { globalKeyVals, inputKeyVals, outputKeyVals } = psbtToKeyVals({
            globalMap,
            inputs,
            outputs
          });
          const globalBuffer = tools_1.keyValsToBuffer(globalKeyVals);
          const keyValsOrEmptyToBuffer = (keyVals) => keyVals.length === 0 ? [Buffer2.from([0])] : keyVals.map(tools_1.keyValsToBuffer);
          const inputBuffers = keyValsOrEmptyToBuffer(inputKeyVals);
          const outputBuffers = keyValsOrEmptyToBuffer(outputKeyVals);
          const header = Buffer2.allocUnsafe(5);
          header.writeUIntBE(482972169471, 0, 5);
          return Buffer2.concat([header, globalBuffer].concat(inputBuffers, outputBuffers));
        }
        exports2.psbtToBuffer = psbtToBuffer;
        const sortKeyVals = (a, b) => {
          return a.key.compare(b.key);
        };
        function keyValsFromMap(keyValMap, converterFactory) {
          const keyHexSet = new Set();
          const keyVals = Object.entries(keyValMap).reduce((result, [key, value]) => {
            if (key === "unknownKeyVals")
              return result;
            const converter = converterFactory[key];
            if (converter === void 0)
              return result;
            const encodedKeyVals = (Array.isArray(value) ? value : [value]).map(converter.encode);
            const keyHexes = encodedKeyVals.map((kv) => kv.key.toString("hex"));
            keyHexes.forEach((hex) => {
              if (keyHexSet.has(hex))
                throw new Error("Serialize Error: Duplicate key: " + hex);
              keyHexSet.add(hex);
            });
            return result.concat(encodedKeyVals);
          }, []);
          const otherKeyVals = keyValMap.unknownKeyVals ? keyValMap.unknownKeyVals.filter((keyVal) => {
            return !keyHexSet.has(keyVal.key.toString("hex"));
          }) : [];
          return keyVals.concat(otherKeyVals).sort(sortKeyVals);
        }
        function psbtToKeyVals({ globalMap, inputs, outputs }) {
          return {
            globalKeyVals: keyValsFromMap(globalMap, convert.globals),
            inputKeyVals: inputs.map((i2) => keyValsFromMap(i2, convert.inputs)),
            outputKeyVals: outputs.map((o) => keyValsFromMap(o, convert.outputs))
          };
        }
        exports2.psbtToKeyVals = psbtToKeyVals;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../converter": 7, "../converter/tools": 19, "buffer": 83 }], 24: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const combiner_1 = require2("./combiner");
        const parser_1 = require2("./parser");
        const typeFields_1 = require2("./typeFields");
        const utils_1 = require2("./utils");
        class Psbt {
          constructor(tx) {
            this.inputs = [];
            this.outputs = [];
            this.globalMap = {
              unsignedTx: tx
            };
          }
          static fromBase64(data, txFromBuffer) {
            const buffer2 = Buffer2.from(data, "base64");
            return this.fromBuffer(buffer2, txFromBuffer);
          }
          static fromHex(data, txFromBuffer) {
            const buffer2 = Buffer2.from(data, "hex");
            return this.fromBuffer(buffer2, txFromBuffer);
          }
          static fromBuffer(buffer2, txFromBuffer) {
            const results = parser_1.psbtFromBuffer(buffer2, txFromBuffer);
            const psbt = new this(results.globalMap.unsignedTx);
            Object.assign(psbt, results);
            return psbt;
          }
          toBase64() {
            const buffer2 = this.toBuffer();
            return buffer2.toString("base64");
          }
          toHex() {
            const buffer2 = this.toBuffer();
            return buffer2.toString("hex");
          }
          toBuffer() {
            return parser_1.psbtToBuffer(this);
          }
          updateGlobal(updateData) {
            utils_1.updateGlobal(updateData, this.globalMap);
            return this;
          }
          updateInput(inputIndex, updateData) {
            const input = utils_1.checkForInput(this.inputs, inputIndex);
            utils_1.updateInput(updateData, input);
            return this;
          }
          updateOutput(outputIndex, updateData) {
            const output = utils_1.checkForOutput(this.outputs, outputIndex);
            utils_1.updateOutput(updateData, output);
            return this;
          }
          addUnknownKeyValToGlobal(keyVal) {
            utils_1.checkHasKey(keyVal, this.globalMap.unknownKeyVals, utils_1.getEnumLength(typeFields_1.GlobalTypes));
            if (!this.globalMap.unknownKeyVals)
              this.globalMap.unknownKeyVals = [];
            this.globalMap.unknownKeyVals.push(keyVal);
            return this;
          }
          addUnknownKeyValToInput(inputIndex, keyVal) {
            const input = utils_1.checkForInput(this.inputs, inputIndex);
            utils_1.checkHasKey(keyVal, input.unknownKeyVals, utils_1.getEnumLength(typeFields_1.InputTypes));
            if (!input.unknownKeyVals)
              input.unknownKeyVals = [];
            input.unknownKeyVals.push(keyVal);
            return this;
          }
          addUnknownKeyValToOutput(outputIndex, keyVal) {
            const output = utils_1.checkForOutput(this.outputs, outputIndex);
            utils_1.checkHasKey(keyVal, output.unknownKeyVals, utils_1.getEnumLength(typeFields_1.OutputTypes));
            if (!output.unknownKeyVals)
              output.unknownKeyVals = [];
            output.unknownKeyVals.push(keyVal);
            return this;
          }
          addInput(inputData) {
            this.globalMap.unsignedTx.addInput(inputData);
            this.inputs.push({
              unknownKeyVals: []
            });
            const addKeyVals = inputData.unknownKeyVals || [];
            const inputIndex = this.inputs.length - 1;
            if (!Array.isArray(addKeyVals)) {
              throw new Error("unknownKeyVals must be an Array");
            }
            addKeyVals.forEach((keyVal) => this.addUnknownKeyValToInput(inputIndex, keyVal));
            utils_1.addInputAttributes(this.inputs, inputData);
            return this;
          }
          addOutput(outputData) {
            this.globalMap.unsignedTx.addOutput(outputData);
            this.outputs.push({
              unknownKeyVals: []
            });
            const addKeyVals = outputData.unknownKeyVals || [];
            const outputIndex = this.outputs.length - 1;
            if (!Array.isArray(addKeyVals)) {
              throw new Error("unknownKeyVals must be an Array");
            }
            addKeyVals.forEach((keyVal) => this.addUnknownKeyValToInput(outputIndex, keyVal));
            utils_1.addOutputAttributes(this.outputs, outputData);
            return this;
          }
          clearFinalizedInput(inputIndex) {
            const input = utils_1.checkForInput(this.inputs, inputIndex);
            utils_1.inputCheckUncleanFinalized(inputIndex, input);
            for (const key of Object.keys(input)) {
              if (![
                "witnessUtxo",
                "nonWitnessUtxo",
                "finalScriptSig",
                "finalScriptWitness",
                "unknownKeyVals"
              ].includes(key)) {
                delete input[key];
              }
            }
            return this;
          }
          combine(...those) {
            const result = combiner_1.combine([this].concat(those));
            Object.assign(this, result);
            return this;
          }
          getTransaction() {
            return this.globalMap.unsignedTx.toBuffer();
          }
        }
        exports2.Psbt = Psbt;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "./combiner": 4, "./parser": 22, "./typeFields": 25, "./utils": 26, "buffer": 83 }], 25: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    (function(GlobalTypes) {
      GlobalTypes[GlobalTypes["UNSIGNED_TX"] = 0] = "UNSIGNED_TX";
      GlobalTypes[GlobalTypes["GLOBAL_XPUB"] = 1] = "GLOBAL_XPUB";
    })(exports2.GlobalTypes || (exports2.GlobalTypes = {}));
    exports2.GLOBAL_TYPE_NAMES = ["unsignedTx", "globalXpub"];
    (function(InputTypes) {
      InputTypes[InputTypes["NON_WITNESS_UTXO"] = 0] = "NON_WITNESS_UTXO";
      InputTypes[InputTypes["WITNESS_UTXO"] = 1] = "WITNESS_UTXO";
      InputTypes[InputTypes["PARTIAL_SIG"] = 2] = "PARTIAL_SIG";
      InputTypes[InputTypes["SIGHASH_TYPE"] = 3] = "SIGHASH_TYPE";
      InputTypes[InputTypes["REDEEM_SCRIPT"] = 4] = "REDEEM_SCRIPT";
      InputTypes[InputTypes["WITNESS_SCRIPT"] = 5] = "WITNESS_SCRIPT";
      InputTypes[InputTypes["BIP32_DERIVATION"] = 6] = "BIP32_DERIVATION";
      InputTypes[InputTypes["FINAL_SCRIPTSIG"] = 7] = "FINAL_SCRIPTSIG";
      InputTypes[InputTypes["FINAL_SCRIPTWITNESS"] = 8] = "FINAL_SCRIPTWITNESS";
      InputTypes[InputTypes["POR_COMMITMENT"] = 9] = "POR_COMMITMENT";
    })(exports2.InputTypes || (exports2.InputTypes = {}));
    exports2.INPUT_TYPE_NAMES = [
      "nonWitnessUtxo",
      "witnessUtxo",
      "partialSig",
      "sighashType",
      "redeemScript",
      "witnessScript",
      "bip32Derivation",
      "finalScriptSig",
      "finalScriptWitness",
      "porCommitment"
    ];
    (function(OutputTypes) {
      OutputTypes[OutputTypes["REDEEM_SCRIPT"] = 0] = "REDEEM_SCRIPT";
      OutputTypes[OutputTypes["WITNESS_SCRIPT"] = 1] = "WITNESS_SCRIPT";
      OutputTypes[OutputTypes["BIP32_DERIVATION"] = 2] = "BIP32_DERIVATION";
    })(exports2.OutputTypes || (exports2.OutputTypes = {}));
    exports2.OUTPUT_TYPE_NAMES = [
      "redeemScript",
      "witnessScript",
      "bip32Derivation"
    ];
  }, {}], 26: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const converter = require2("./converter");
        function checkForInput(inputs, inputIndex) {
          const input = inputs[inputIndex];
          if (input === void 0)
            throw new Error(`No input #${inputIndex}`);
          return input;
        }
        exports2.checkForInput = checkForInput;
        function checkForOutput(outputs, outputIndex) {
          const output = outputs[outputIndex];
          if (output === void 0)
            throw new Error(`No output #${outputIndex}`);
          return output;
        }
        exports2.checkForOutput = checkForOutput;
        function checkHasKey(checkKeyVal, keyVals, enumLength) {
          if (checkKeyVal.key[0] < enumLength) {
            throw new Error(`Use the method for your specific key instead of addUnknownKeyVal*`);
          }
          if (keyVals && keyVals.filter((kv) => kv.key.equals(checkKeyVal.key)).length !== 0) {
            throw new Error(`Duplicate Key: ${checkKeyVal.key.toString("hex")}`);
          }
        }
        exports2.checkHasKey = checkHasKey;
        function getEnumLength(myenum) {
          let count = 0;
          Object.keys(myenum).forEach((val) => {
            if (Number(isNaN(Number(val)))) {
              count++;
            }
          });
          return count;
        }
        exports2.getEnumLength = getEnumLength;
        function inputCheckUncleanFinalized(inputIndex, input) {
          let result = false;
          if (input.nonWitnessUtxo || input.witnessUtxo) {
            const needScriptSig = !!input.redeemScript;
            const needWitnessScript = !!input.witnessScript;
            const scriptSigOK = !needScriptSig || !!input.finalScriptSig;
            const witnessScriptOK = !needWitnessScript || !!input.finalScriptWitness;
            const hasOneFinal = !!input.finalScriptSig || !!input.finalScriptWitness;
            result = scriptSigOK && witnessScriptOK && hasOneFinal;
          }
          if (result === false) {
            throw new Error(`Input #${inputIndex} has too much or too little data to clean`);
          }
        }
        exports2.inputCheckUncleanFinalized = inputCheckUncleanFinalized;
        function throwForUpdateMaker(typeName, name, expected, data) {
          throw new Error(`Data for ${typeName} key ${name} is incorrect: Expected ${expected} and got ${JSON.stringify(data)}`);
        }
        function updateMaker(typeName) {
          return (updateData, mainData) => {
            for (const name of Object.keys(updateData)) {
              const data = updateData[name];
              const { canAdd, canAddToArray, check, expected } = converter[typeName + "s"][name] || {};
              const isArray = !!canAddToArray;
              if (check) {
                if (isArray) {
                  if (!Array.isArray(data) || mainData[name] && !Array.isArray(mainData[name])) {
                    throw new Error(`Key type ${name} must be an array`);
                  }
                  if (!data.every(check)) {
                    throwForUpdateMaker(typeName, name, expected, data);
                  }
                  const arr = mainData[name] || [];
                  const dupeCheckSet = new Set();
                  if (!data.every((v2) => canAddToArray(arr, v2, dupeCheckSet))) {
                    throw new Error("Can not add duplicate data to array");
                  }
                  mainData[name] = arr.concat(data);
                } else {
                  if (!check(data)) {
                    throwForUpdateMaker(typeName, name, expected, data);
                  }
                  if (!canAdd(mainData, data)) {
                    throw new Error(`Can not add duplicate data to ${typeName}`);
                  }
                  mainData[name] = data;
                }
              }
            }
          };
        }
        exports2.updateGlobal = updateMaker("globalThis");
        exports2.updateInput = updateMaker("input");
        exports2.updateOutput = updateMaker("output");
        function addInputAttributes(inputs, data) {
          const index = inputs.length - 1;
          const input = checkForInput(inputs, index);
          exports2.updateInput(data, input);
        }
        exports2.addInputAttributes = addInputAttributes;
        function addOutputAttributes(outputs, data) {
          const index = outputs.length - 1;
          const output = checkForInput(outputs, index);
          exports2.updateOutput(data, output);
        }
        exports2.addOutputAttributes = addOutputAttributes;
        function defaultVersionSetter(version, txBuf) {
          if (!Buffer2.isBuffer(txBuf) || txBuf.length < 4) {
            throw new Error("Set Version: Invalid Transaction");
          }
          txBuf.writeUInt32LE(version, 0);
          return txBuf;
        }
        exports2.defaultVersionSetter = defaultVersionSetter;
        function defaultLocktimeSetter(locktime, txBuf) {
          if (!Buffer2.isBuffer(txBuf) || txBuf.length < 4) {
            throw new Error("Set Locktime: Invalid Transaction");
          }
          txBuf.writeUInt32LE(locktime, txBuf.length - 4);
          return txBuf;
        }
        exports2.defaultLocktimeSetter = defaultLocktimeSetter;
      }).call(this);
    }).call(this, { "isBuffer": require2("../../../is-buffer/index.js") });
  }, { "../../../is-buffer/index.js": 138, "./converter": 7 }], 27: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const crypto = require2("./crypto");
        const bs58check = require2("bs58check");
        const ecc = require2("tiny-secp256k1");
        const typeforce = require2("typeforce");
        const wif = require2("wif");
        const UINT256_TYPE = typeforce.BufferN(32);
        const NETWORK_TYPE = typeforce.compile({
          wif: typeforce.UInt8,
          bip32: {
            public: typeforce.UInt32,
            private: typeforce.UInt32
          }
        });
        const BITCOIN = {
          messagePrefix: "Bitcoin Signed Message:\n",
          bech32: "bc",
          bip32: {
            public: 76067358,
            private: 76066276
          },
          pubKeyHash: 0,
          scriptHash: 5,
          wif: 128
        };
        const HIGHEST_BIT = 2147483648;
        const UINT31_MAX = Math.pow(2, 31) - 1;
        function BIP32Path(value) {
          return typeforce.String(value) && value.match(/^(m\/)?(\d+'?\/)*\d+'?$/) !== null;
        }
        function UInt31(value) {
          return typeforce.UInt32(value) && value <= UINT31_MAX;
        }
        class BIP32 {
          constructor(__D, __Q, chainCode, network, __DEPTH = 0, __INDEX = 0, __PARENT_FINGERPRINT = 0) {
            this.__D = __D;
            this.__Q = __Q;
            this.chainCode = chainCode;
            this.network = network;
            this.__DEPTH = __DEPTH;
            this.__INDEX = __INDEX;
            this.__PARENT_FINGERPRINT = __PARENT_FINGERPRINT;
            typeforce(NETWORK_TYPE, network);
            this.lowR = false;
          }
          get depth() {
            return this.__DEPTH;
          }
          get index() {
            return this.__INDEX;
          }
          get parentFingerprint() {
            return this.__PARENT_FINGERPRINT;
          }
          get publicKey() {
            if (this.__Q === void 0)
              this.__Q = ecc.pointFromScalar(this.__D, true);
            return this.__Q;
          }
          get privateKey() {
            return this.__D;
          }
          get identifier() {
            return crypto.hash160(this.publicKey);
          }
          get fingerprint() {
            return this.identifier.slice(0, 4);
          }
          get compressed() {
            return true;
          }
          isNeutered() {
            return this.__D === void 0;
          }
          neutered() {
            return fromPublicKeyLocal(this.publicKey, this.chainCode, this.network, this.depth, this.index, this.parentFingerprint);
          }
          toBase58() {
            const network = this.network;
            const version = !this.isNeutered() ? network.bip32.private : network.bip32.public;
            const buffer2 = Buffer2.allocUnsafe(78);
            buffer2.writeUInt32BE(version, 0);
            buffer2.writeUInt8(this.depth, 4);
            buffer2.writeUInt32BE(this.parentFingerprint, 5);
            buffer2.writeUInt32BE(this.index, 9);
            this.chainCode.copy(buffer2, 13);
            if (!this.isNeutered()) {
              buffer2.writeUInt8(0, 45);
              this.privateKey.copy(buffer2, 46);
            } else {
              this.publicKey.copy(buffer2, 45);
            }
            return bs58check.encode(buffer2);
          }
          toWIF() {
            if (!this.privateKey)
              throw new TypeError("Missing private key");
            return wif.encode(this.network.wif, this.privateKey, true);
          }
          derive(index) {
            typeforce(typeforce.UInt32, index);
            const isHardened = index >= HIGHEST_BIT;
            const data = Buffer2.allocUnsafe(37);
            if (isHardened) {
              if (this.isNeutered())
                throw new TypeError("Missing private key for hardened child key");
              data[0] = 0;
              this.privateKey.copy(data, 1);
              data.writeUInt32BE(index, 33);
            } else {
              this.publicKey.copy(data, 0);
              data.writeUInt32BE(index, 33);
            }
            const I = crypto.hmacSHA512(this.chainCode, data);
            const IL = I.slice(0, 32);
            const IR = I.slice(32);
            if (!ecc.isPrivate(IL))
              return this.derive(index + 1);
            let hd;
            if (!this.isNeutered()) {
              const ki = ecc.privateAdd(this.privateKey, IL);
              if (ki == null)
                return this.derive(index + 1);
              hd = fromPrivateKeyLocal(ki, IR, this.network, this.depth + 1, index, this.fingerprint.readUInt32BE(0));
            } else {
              const Ki = ecc.pointAddScalar(this.publicKey, IL, true);
              if (Ki === null)
                return this.derive(index + 1);
              hd = fromPublicKeyLocal(Ki, IR, this.network, this.depth + 1, index, this.fingerprint.readUInt32BE(0));
            }
            return hd;
          }
          deriveHardened(index) {
            typeforce(UInt31, index);
            return this.derive(index + HIGHEST_BIT);
          }
          derivePath(path) {
            typeforce(BIP32Path, path);
            let splitPath = path.split("/");
            if (splitPath[0] === "m") {
              if (this.parentFingerprint)
                throw new TypeError("Expected master, got child");
              splitPath = splitPath.slice(1);
            }
            return splitPath.reduce((prevHd, indexStr) => {
              let index;
              if (indexStr.slice(-1) === `'`) {
                index = parseInt(indexStr.slice(0, -1), 10);
                return prevHd.deriveHardened(index);
              } else {
                index = parseInt(indexStr, 10);
                return prevHd.derive(index);
              }
            }, this);
          }
          sign(hash2, lowR) {
            if (!this.privateKey)
              throw new Error("Missing private key");
            if (lowR === void 0)
              lowR = this.lowR;
            if (lowR === false) {
              return ecc.sign(hash2, this.privateKey);
            } else {
              let sig = ecc.sign(hash2, this.privateKey);
              const extraData = Buffer2.alloc(32, 0);
              let counter = 0;
              while (sig[0] > 127) {
                counter++;
                extraData.writeUIntLE(counter, 0, 6);
                sig = ecc.signWithEntropy(hash2, this.privateKey, extraData);
              }
              return sig;
            }
          }
          verify(hash2, signature) {
            return ecc.verify(hash2, this.publicKey, signature);
          }
        }
        function fromBase58(inString, network) {
          const buffer2 = bs58check.decode(inString);
          if (buffer2.length !== 78)
            throw new TypeError("Invalid buffer length");
          network = network || BITCOIN;
          const version = buffer2.readUInt32BE(0);
          if (version !== network.bip32.private && version !== network.bip32.public)
            throw new TypeError("Invalid network version");
          const depth = buffer2[4];
          const parentFingerprint = buffer2.readUInt32BE(5);
          if (depth === 0) {
            if (parentFingerprint !== 0)
              throw new TypeError("Invalid parent fingerprint");
          }
          const index = buffer2.readUInt32BE(9);
          if (depth === 0 && index !== 0)
            throw new TypeError("Invalid index");
          const chainCode = buffer2.slice(13, 45);
          let hd;
          if (version === network.bip32.private) {
            if (buffer2.readUInt8(45) !== 0)
              throw new TypeError("Invalid private key");
            const k = buffer2.slice(46, 78);
            hd = fromPrivateKeyLocal(k, chainCode, network, depth, index, parentFingerprint);
          } else {
            const X = buffer2.slice(45, 78);
            hd = fromPublicKeyLocal(X, chainCode, network, depth, index, parentFingerprint);
          }
          return hd;
        }
        exports2.fromBase58 = fromBase58;
        function fromPrivateKey(privateKey, chainCode, network) {
          return fromPrivateKeyLocal(privateKey, chainCode, network);
        }
        exports2.fromPrivateKey = fromPrivateKey;
        function fromPrivateKeyLocal(privateKey, chainCode, network, depth, index, parentFingerprint) {
          typeforce({
            privateKey: UINT256_TYPE,
            chainCode: UINT256_TYPE
          }, { privateKey, chainCode });
          network = network || BITCOIN;
          if (!ecc.isPrivate(privateKey))
            throw new TypeError("Private key not in range [1, n)");
          return new BIP32(privateKey, void 0, chainCode, network, depth, index, parentFingerprint);
        }
        function fromPublicKey(publicKey, chainCode, network) {
          return fromPublicKeyLocal(publicKey, chainCode, network);
        }
        exports2.fromPublicKey = fromPublicKey;
        function fromPublicKeyLocal(publicKey, chainCode, network, depth, index, parentFingerprint) {
          typeforce({
            publicKey: typeforce.BufferN(33),
            chainCode: UINT256_TYPE
          }, { publicKey, chainCode });
          network = network || BITCOIN;
          if (!ecc.isPoint(publicKey))
            throw new TypeError("Point is not on the curve");
          return new BIP32(void 0, publicKey, chainCode, network, depth, index, parentFingerprint);
        }
        function fromSeed(seed, network) {
          typeforce(typeforce.Buffer, seed);
          if (seed.length < 16)
            throw new TypeError("Seed should be at least 128 bits");
          if (seed.length > 64)
            throw new TypeError("Seed should be at most 512 bits");
          network = network || BITCOIN;
          const I = crypto.hmacSHA512(Buffer2.from("Bitcoin seed", "utf8"), seed);
          const IL = I.slice(0, 32);
          const IR = I.slice(32);
          return fromPrivateKey(IL, IR, network);
        }
        exports2.fromSeed = fromSeed;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "./crypto": 28, "bs58check": 82, "buffer": 83, "tiny-secp256k1": 172, "typeforce": 177, "wif": 181 }], 28: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const createHash = require2("create-hash");
    const createHmac = require2("create-hmac");
    function hash160(buffer2) {
      const sha256Hash = createHash("sha256").update(buffer2).digest();
      try {
        return createHash("rmd160").update(sha256Hash).digest();
      } catch (err) {
        return createHash("ripemd160").update(sha256Hash).digest();
      }
    }
    exports2.hash160 = hash160;
    function hmacSHA512(key, data) {
      return createHmac("sha512", key).update(data).digest();
    }
    exports2.hmacSHA512 = hmacSHA512;
  }, { "create-hash": 85, "create-hmac": 87 }], 29: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    var bip32_1 = require2("./bip32");
    exports2.fromSeed = bip32_1.fromSeed;
    exports2.fromBase58 = bip32_1.fromBase58;
    exports2.fromPublicKey = bip32_1.fromPublicKey;
    exports2.fromPrivateKey = bip32_1.fromPrivateKey;
  }, { "./bip32": 27 }], 30: [function(require2, module2, exports2) {
    var Buffer2 = require2("safe-buffer").Buffer;
    function check(buffer2) {
      if (buffer2.length < 8)
        return false;
      if (buffer2.length > 72)
        return false;
      if (buffer2[0] !== 48)
        return false;
      if (buffer2[1] !== buffer2.length - 2)
        return false;
      if (buffer2[2] !== 2)
        return false;
      var lenR = buffer2[3];
      if (lenR === 0)
        return false;
      if (5 + lenR >= buffer2.length)
        return false;
      if (buffer2[4 + lenR] !== 2)
        return false;
      var lenS = buffer2[5 + lenR];
      if (lenS === 0)
        return false;
      if (6 + lenR + lenS !== buffer2.length)
        return false;
      if (buffer2[4] & 128)
        return false;
      if (lenR > 1 && buffer2[4] === 0 && !(buffer2[5] & 128))
        return false;
      if (buffer2[lenR + 6] & 128)
        return false;
      if (lenS > 1 && buffer2[lenR + 6] === 0 && !(buffer2[lenR + 7] & 128))
        return false;
      return true;
    }
    function decode(buffer2) {
      if (buffer2.length < 8)
        throw new Error("DER sequence length is too short");
      if (buffer2.length > 72)
        throw new Error("DER sequence length is too long");
      if (buffer2[0] !== 48)
        throw new Error("Expected DER sequence");
      if (buffer2[1] !== buffer2.length - 2)
        throw new Error("DER sequence length is invalid");
      if (buffer2[2] !== 2)
        throw new Error("Expected DER integer");
      var lenR = buffer2[3];
      if (lenR === 0)
        throw new Error("R length is zero");
      if (5 + lenR >= buffer2.length)
        throw new Error("R length is too long");
      if (buffer2[4 + lenR] !== 2)
        throw new Error("Expected DER integer (2)");
      var lenS = buffer2[5 + lenR];
      if (lenS === 0)
        throw new Error("S length is zero");
      if (6 + lenR + lenS !== buffer2.length)
        throw new Error("S length is invalid");
      if (buffer2[4] & 128)
        throw new Error("R value is negative");
      if (lenR > 1 && buffer2[4] === 0 && !(buffer2[5] & 128))
        throw new Error("R value excessively padded");
      if (buffer2[lenR + 6] & 128)
        throw new Error("S value is negative");
      if (lenS > 1 && buffer2[lenR + 6] === 0 && !(buffer2[lenR + 7] & 128))
        throw new Error("S value excessively padded");
      return {
        r: buffer2.slice(4, 4 + lenR),
        s: buffer2.slice(6 + lenR)
      };
    }
    function encode(r, s) {
      var lenR = r.length;
      var lenS = s.length;
      if (lenR === 0)
        throw new Error("R length is zero");
      if (lenS === 0)
        throw new Error("S length is zero");
      if (lenR > 33)
        throw new Error("R length is too long");
      if (lenS > 33)
        throw new Error("S length is too long");
      if (r[0] & 128)
        throw new Error("R value is negative");
      if (s[0] & 128)
        throw new Error("S value is negative");
      if (lenR > 1 && r[0] === 0 && !(r[1] & 128))
        throw new Error("R value excessively padded");
      if (lenS > 1 && s[0] === 0 && !(s[1] & 128))
        throw new Error("S value excessively padded");
      var signature = Buffer2.allocUnsafe(6 + lenR + lenS);
      signature[0] = 48;
      signature[1] = signature.length - 2;
      signature[2] = 2;
      signature[3] = r.length;
      r.copy(signature, 4);
      signature[4 + lenR] = 2;
      signature[5 + lenR] = s.length;
      s.copy(signature, 6 + lenR);
      return signature;
    }
    module2.exports = {
      check,
      decode,
      encode
    };
  }, { "safe-buffer": 147 }], 31: [function(require2, module2, exports2) {
    module2.exports = {
      "OP_FALSE": 0,
      "OP_0": 0,
      "OP_PUSHDATA1": 76,
      "OP_PUSHDATA2": 77,
      "OP_PUSHDATA4": 78,
      "OP_1NEGATE": 79,
      "OP_RESERVED": 80,
      "OP_TRUE": 81,
      "OP_1": 81,
      "OP_2": 82,
      "OP_3": 83,
      "OP_4": 84,
      "OP_5": 85,
      "OP_6": 86,
      "OP_7": 87,
      "OP_8": 88,
      "OP_9": 89,
      "OP_10": 90,
      "OP_11": 91,
      "OP_12": 92,
      "OP_13": 93,
      "OP_14": 94,
      "OP_15": 95,
      "OP_16": 96,
      "OP_NOP": 97,
      "OP_VER": 98,
      "OP_IF": 99,
      "OP_NOTIF": 100,
      "OP_VERIF": 101,
      "OP_VERNOTIF": 102,
      "OP_ELSE": 103,
      "OP_ENDIF": 104,
      "OP_VERIFY": 105,
      "OP_RETURN": 106,
      "OP_TOALTSTACK": 107,
      "OP_FROMALTSTACK": 108,
      "OP_2DROP": 109,
      "OP_2DUP": 110,
      "OP_3DUP": 111,
      "OP_2OVER": 112,
      "OP_2ROT": 113,
      "OP_2SWAP": 114,
      "OP_IFDUP": 115,
      "OP_DEPTH": 116,
      "OP_DROP": 117,
      "OP_DUP": 118,
      "OP_NIP": 119,
      "OP_OVER": 120,
      "OP_PICK": 121,
      "OP_ROLL": 122,
      "OP_ROT": 123,
      "OP_SWAP": 124,
      "OP_TUCK": 125,
      "OP_CAT": 126,
      "OP_SUBSTR": 127,
      "OP_LEFT": 128,
      "OP_RIGHT": 129,
      "OP_SIZE": 130,
      "OP_INVERT": 131,
      "OP_AND": 132,
      "OP_OR": 133,
      "OP_XOR": 134,
      "OP_EQUAL": 135,
      "OP_EQUALVERIFY": 136,
      "OP_RESERVED1": 137,
      "OP_RESERVED2": 138,
      "OP_1ADD": 139,
      "OP_1SUB": 140,
      "OP_2MUL": 141,
      "OP_2DIV": 142,
      "OP_NEGATE": 143,
      "OP_ABS": 144,
      "OP_NOT": 145,
      "OP_0NOTEQUAL": 146,
      "OP_ADD": 147,
      "OP_SUB": 148,
      "OP_MUL": 149,
      "OP_DIV": 150,
      "OP_MOD": 151,
      "OP_LSHIFT": 152,
      "OP_RSHIFT": 153,
      "OP_BOOLAND": 154,
      "OP_BOOLOR": 155,
      "OP_NUMEQUAL": 156,
      "OP_NUMEQUALVERIFY": 157,
      "OP_NUMNOTEQUAL": 158,
      "OP_LESSTHAN": 159,
      "OP_GREATERTHAN": 160,
      "OP_LESSTHANOREQUAL": 161,
      "OP_GREATERTHANOREQUAL": 162,
      "OP_MIN": 163,
      "OP_MAX": 164,
      "OP_WITHIN": 165,
      "OP_RIPEMD160": 166,
      "OP_SHA1": 167,
      "OP_SHA256": 168,
      "OP_HASH160": 169,
      "OP_HASH256": 170,
      "OP_CODESEPARATOR": 171,
      "OP_CHECKSIG": 172,
      "OP_CHECKSIGVERIFY": 173,
      "OP_CHECKMULTISIG": 174,
      "OP_CHECKMULTISIGVERIFY": 175,
      "OP_NOP1": 176,
      "OP_NOP2": 177,
      "OP_CHECKLOCKTIMEVERIFY": 177,
      "OP_NOP3": 178,
      "OP_CHECKSEQUENCEVERIFY": 178,
      "OP_NOP4": 179,
      "OP_NOP5": 180,
      "OP_NOP6": 181,
      "OP_NOP7": 182,
      "OP_NOP8": 183,
      "OP_NOP9": 184,
      "OP_NOP10": 185,
      "OP_PUBKEYHASH": 253,
      "OP_PUBKEY": 254,
      "OP_INVALIDOPCODE": 255
    };
  }, {}], 32: [function(require2, module2, exports2) {
    var OPS = require2("./index.json");
    var map = {};
    for (var op in OPS) {
      var code2 = OPS[op];
      map[code2] = op;
    }
    module2.exports = map;
  }, { "./index.json": 31 }], 33: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const networks = require2("./networks");
        const payments = require2("./payments");
        const bscript = require2("./script");
        const types = require2("./types");
        const bech32 = require2("bech32");
        const bs58check = require2("bs58check");
        const typeforce = require2("typeforce");
        function fromBase58Check(address) {
          const payload = bs58check.decode(address);
          if (payload.length < 21)
            throw new TypeError(address + " is too short");
          if (payload.length > 21)
            throw new TypeError(address + " is too long");
          const version = payload.readUInt8(0);
          const hash2 = payload.slice(1);
          return { version, hash: hash2 };
        }
        exports2.fromBase58Check = fromBase58Check;
        function fromBech32(address) {
          const result = bech32.decode(address);
          const data = bech32.fromWords(result.words.slice(1));
          return {
            version: result.words[0],
            prefix: result.prefix,
            data: Buffer2.from(data)
          };
        }
        exports2.fromBech32 = fromBech32;
        function toBase58Check(hash2, version) {
          typeforce(types.tuple(types.Hash160bit, types.UInt8), arguments);
          const payload = Buffer2.allocUnsafe(21);
          payload.writeUInt8(version, 0);
          hash2.copy(payload, 1);
          return bs58check.encode(payload);
        }
        exports2.toBase58Check = toBase58Check;
        function toBech32(data, version, prefix) {
          const words = bech32.toWords(data);
          words.unshift(version);
          return bech32.encode(prefix, words);
        }
        exports2.toBech32 = toBech32;
        function fromOutputScript(output, network) {
          network = network || networks.bitcoin;
          try {
            return payments.p2pkh({ output, network }).address;
          } catch (e) {
          }
          try {
            return payments.p2sh({ output, network }).address;
          } catch (e) {
          }
          try {
            return payments.p2wpkh({ output, network }).address;
          } catch (e) {
          }
          try {
            return payments.p2wsh({ output, network }).address;
          } catch (e) {
          }
          throw new Error(bscript.toASM(output) + " has no matching Address");
        }
        exports2.fromOutputScript = fromOutputScript;
        function toOutputScript(address, network) {
          network = network || networks.bitcoin;
          let decodeBase58;
          let decodeBech32;
          try {
            decodeBase58 = fromBase58Check(address);
          } catch (e) {
          }
          if (decodeBase58) {
            if (decodeBase58.version === network.pubKeyHash)
              return payments.p2pkh({ hash: decodeBase58.hash }).output;
            if (decodeBase58.version === network.scriptHash)
              return payments.p2sh({ hash: decodeBase58.hash }).output;
          } else {
            try {
              decodeBech32 = fromBech32(address);
            } catch (e) {
            }
            if (decodeBech32) {
              if (decodeBech32.prefix !== network.bech32)
                throw new Error(address + " has an invalid prefix");
              if (decodeBech32.version === 0) {
                if (decodeBech32.data.length === 20)
                  return payments.p2wpkh({ hash: decodeBech32.data }).output;
                if (decodeBech32.data.length === 32)
                  return payments.p2wsh({ hash: decodeBech32.data }).output;
              }
            }
          }
          throw new Error(address + " has no matching Script");
        }
        exports2.toOutputScript = toOutputScript;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "./networks": 40, "./payments": 42, "./script": 51, "./types": 77, "bech32": 3, "bs58check": 82, "buffer": 83, "typeforce": 177 }], 34: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const bufferutils_1 = require2("./bufferutils");
        const bcrypto = require2("./crypto");
        const transaction_1 = require2("./transaction");
        const types = require2("./types");
        const fastMerkleRoot = require2("merkle-lib/fastRoot");
        const typeforce = require2("typeforce");
        const varuint = require2("varuint-bitcoin");
        const errorMerkleNoTxes = new TypeError("Cannot compute merkle root for zero transactions");
        const errorWitnessNotSegwit = new TypeError("Cannot compute witness commit for non-segwit block");
        class Block {
          constructor() {
            this.version = 1;
            this.prevHash = void 0;
            this.merkleRoot = void 0;
            this.timestamp = 0;
            this.witnessCommit = void 0;
            this.bits = 0;
            this.nonce = 0;
            this.transactions = void 0;
          }
          static fromBuffer(buffer2) {
            if (buffer2.length < 80)
              throw new Error("Buffer too small (< 80 bytes)");
            const bufferReader = new bufferutils_1.BufferReader(buffer2);
            const block = new Block();
            block.version = bufferReader.readInt32();
            block.prevHash = bufferReader.readSlice(32);
            block.merkleRoot = bufferReader.readSlice(32);
            block.timestamp = bufferReader.readUInt32();
            block.bits = bufferReader.readUInt32();
            block.nonce = bufferReader.readUInt32();
            if (buffer2.length === 80)
              return block;
            const readTransaction = () => {
              const tx = transaction_1.Transaction.fromBuffer(bufferReader.buffer.slice(bufferReader.offset), true);
              bufferReader.offset += tx.byteLength();
              return tx;
            };
            const nTransactions = bufferReader.readVarInt();
            block.transactions = [];
            for (let i2 = 0; i2 < nTransactions; ++i2) {
              const tx = readTransaction();
              block.transactions.push(tx);
            }
            const witnessCommit = block.getWitnessCommit();
            if (witnessCommit)
              block.witnessCommit = witnessCommit;
            return block;
          }
          static fromHex(hex) {
            return Block.fromBuffer(Buffer2.from(hex, "hex"));
          }
          static calculateTarget(bits) {
            const exponent = ((bits & 4278190080) >> 24) - 3;
            const mantissa = bits & 8388607;
            const target = Buffer2.alloc(32, 0);
            target.writeUIntBE(mantissa, 29 - exponent, 3);
            return target;
          }
          static calculateMerkleRoot(transactions, forWitness) {
            typeforce([{ getHash: types.Function }], transactions);
            if (transactions.length === 0)
              throw errorMerkleNoTxes;
            if (forWitness && !txesHaveWitnessCommit(transactions))
              throw errorWitnessNotSegwit;
            const hashes = transactions.map((transaction) => transaction.getHash(forWitness));
            const rootHash = fastMerkleRoot(hashes, bcrypto.hash256);
            return forWitness ? bcrypto.hash256(Buffer2.concat([rootHash, transactions[0].ins[0].witness[0]])) : rootHash;
          }
          getWitnessCommit() {
            if (!txesHaveWitnessCommit(this.transactions))
              return null;
            const witnessCommits = this.transactions[0].outs.filter((out) => out.script.slice(0, 6).equals(Buffer2.from("6a24aa21a9ed", "hex"))).map((out) => out.script.slice(6, 38));
            if (witnessCommits.length === 0)
              return null;
            const result = witnessCommits[witnessCommits.length - 1];
            if (!(result instanceof Buffer2 && result.length === 32))
              return null;
            return result;
          }
          hasWitnessCommit() {
            if (this.witnessCommit instanceof Buffer2 && this.witnessCommit.length === 32)
              return true;
            if (this.getWitnessCommit() !== null)
              return true;
            return false;
          }
          hasWitness() {
            return anyTxHasWitness(this.transactions);
          }
          weight() {
            const base = this.byteLength(false, false);
            const total = this.byteLength(false, true);
            return base * 3 + total;
          }
          byteLength(headersOnly, allowWitness = true) {
            if (headersOnly || !this.transactions)
              return 80;
            return 80 + varuint.encodingLength(this.transactions.length) + this.transactions.reduce((a, x) => a + x.byteLength(allowWitness), 0);
          }
          getHash() {
            return bcrypto.hash256(this.toBuffer(true));
          }
          getId() {
            return bufferutils_1.reverseBuffer(this.getHash()).toString("hex");
          }
          getUTCDate() {
            const date = new Date(0);
            date.setUTCSeconds(this.timestamp);
            return date;
          }
          toBuffer(headersOnly) {
            const buffer2 = Buffer2.allocUnsafe(this.byteLength(headersOnly));
            const bufferWriter = new bufferutils_1.BufferWriter(buffer2);
            bufferWriter.writeInt32(this.version);
            bufferWriter.writeSlice(this.prevHash);
            bufferWriter.writeSlice(this.merkleRoot);
            bufferWriter.writeUInt32(this.timestamp);
            bufferWriter.writeUInt32(this.bits);
            bufferWriter.writeUInt32(this.nonce);
            if (headersOnly || !this.transactions)
              return buffer2;
            varuint.encode(this.transactions.length, buffer2, bufferWriter.offset);
            bufferWriter.offset += varuint.encode.bytes;
            this.transactions.forEach((tx) => {
              const txSize = tx.byteLength();
              tx.toBuffer(buffer2, bufferWriter.offset);
              bufferWriter.offset += txSize;
            });
            return buffer2;
          }
          toHex(headersOnly) {
            return this.toBuffer(headersOnly).toString("hex");
          }
          checkTxRoots() {
            const hasWitnessCommit = this.hasWitnessCommit();
            if (!hasWitnessCommit && this.hasWitness())
              return false;
            return this.__checkMerkleRoot() && (hasWitnessCommit ? this.__checkWitnessCommit() : true);
          }
          checkProofOfWork() {
            const hash2 = bufferutils_1.reverseBuffer(this.getHash());
            const target = Block.calculateTarget(this.bits);
            return hash2.compare(target) <= 0;
          }
          __checkMerkleRoot() {
            if (!this.transactions)
              throw errorMerkleNoTxes;
            const actualMerkleRoot = Block.calculateMerkleRoot(this.transactions);
            return this.merkleRoot.compare(actualMerkleRoot) === 0;
          }
          __checkWitnessCommit() {
            if (!this.transactions)
              throw errorMerkleNoTxes;
            if (!this.hasWitnessCommit())
              throw errorWitnessNotSegwit;
            const actualWitnessCommit = Block.calculateMerkleRoot(this.transactions, true);
            return this.witnessCommit.compare(actualWitnessCommit) === 0;
          }
        }
        exports2.Block = Block;
        function txesHaveWitnessCommit(transactions) {
          return transactions instanceof Array && transactions[0] && transactions[0].ins && transactions[0].ins instanceof Array && transactions[0].ins[0] && transactions[0].ins[0].witness && transactions[0].ins[0].witness instanceof Array && transactions[0].ins[0].witness.length > 0;
        }
        function anyTxHasWitness(transactions) {
          return transactions instanceof Array && transactions.some((tx) => typeof tx === "object" && tx.ins instanceof Array && tx.ins.some((input) => typeof input === "object" && input.witness instanceof Array && input.witness.length > 0));
        }
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "./bufferutils": 35, "./crypto": 37, "./transaction": 75, "./types": 77, "buffer": 83, "merkle-lib/fastRoot": 140, "typeforce": 177, "varuint-bitcoin": 180 }], 35: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const types = require2("./types");
        const typeforce = require2("typeforce");
        const varuint = require2("varuint-bitcoin");
        function verifuint(value, max) {
          if (typeof value !== "number")
            throw new Error("cannot write a non-number as a number");
          if (value < 0)
            throw new Error("specified a negative value for writing an unsigned value");
          if (value > max)
            throw new Error("RangeError: value out of range");
          if (Math.floor(value) !== value)
            throw new Error("value has a fractional component");
        }
        function readUInt64LE(buffer2, offset) {
          const a = buffer2.readUInt32LE(offset);
          let b = buffer2.readUInt32LE(offset + 4);
          b *= 4294967296;
          verifuint(b + a, 9007199254740991);
          return b + a;
        }
        exports2.readUInt64LE = readUInt64LE;
        function writeUInt64LE(buffer2, value, offset) {
          verifuint(value, 9007199254740991);
          buffer2.writeInt32LE(value & -1, offset);
          buffer2.writeUInt32LE(Math.floor(value / 4294967296), offset + 4);
          return offset + 8;
        }
        exports2.writeUInt64LE = writeUInt64LE;
        function reverseBuffer(buffer2) {
          if (buffer2.length < 1)
            return buffer2;
          let j = buffer2.length - 1;
          let tmp = 0;
          for (let i2 = 0; i2 < buffer2.length / 2; i2++) {
            tmp = buffer2[i2];
            buffer2[i2] = buffer2[j];
            buffer2[j] = tmp;
            j--;
          }
          return buffer2;
        }
        exports2.reverseBuffer = reverseBuffer;
        function cloneBuffer(buffer2) {
          const clone = Buffer2.allocUnsafe(buffer2.length);
          buffer2.copy(clone);
          return clone;
        }
        exports2.cloneBuffer = cloneBuffer;
        class BufferWriter {
          constructor(buffer2, offset = 0) {
            this.buffer = buffer2;
            this.offset = offset;
            typeforce(types.tuple(types.Buffer, types.UInt32), [buffer2, offset]);
          }
          writeUInt8(i2) {
            this.offset = this.buffer.writeUInt8(i2, this.offset);
          }
          writeInt32(i2) {
            this.offset = this.buffer.writeInt32LE(i2, this.offset);
          }
          writeUInt32(i2) {
            this.offset = this.buffer.writeUInt32LE(i2, this.offset);
          }
          writeUInt64(i2) {
            this.offset = writeUInt64LE(this.buffer, i2, this.offset);
          }
          writeVarInt(i2) {
            varuint.encode(i2, this.buffer, this.offset);
            this.offset += varuint.encode.bytes;
          }
          writeSlice(slice) {
            if (this.buffer.length < this.offset + slice.length) {
              throw new Error("Cannot write slice out of bounds");
            }
            this.offset += slice.copy(this.buffer, this.offset);
          }
          writeVarSlice(slice) {
            this.writeVarInt(slice.length);
            this.writeSlice(slice);
          }
          writeVector(vector) {
            this.writeVarInt(vector.length);
            vector.forEach((buf) => this.writeVarSlice(buf));
          }
        }
        exports2.BufferWriter = BufferWriter;
        class BufferReader {
          constructor(buffer2, offset = 0) {
            this.buffer = buffer2;
            this.offset = offset;
            typeforce(types.tuple(types.Buffer, types.UInt32), [buffer2, offset]);
          }
          readUInt8() {
            const result = this.buffer.readUInt8(this.offset);
            this.offset++;
            return result;
          }
          readInt32() {
            const result = this.buffer.readInt32LE(this.offset);
            this.offset += 4;
            return result;
          }
          readUInt32() {
            const result = this.buffer.readUInt32LE(this.offset);
            this.offset += 4;
            return result;
          }
          readUInt64() {
            const result = readUInt64LE(this.buffer, this.offset);
            this.offset += 8;
            return result;
          }
          readVarInt() {
            const vi = varuint.decode(this.buffer, this.offset);
            this.offset += varuint.decode.bytes;
            return vi;
          }
          readSlice(n) {
            if (this.buffer.length < this.offset + n) {
              throw new Error("Cannot read slice out of bounds");
            }
            const result = this.buffer.slice(this.offset, this.offset + n);
            this.offset += n;
            return result;
          }
          readVarSlice() {
            return this.readSlice(this.readVarInt());
          }
          readVector() {
            const count = this.readVarInt();
            const vector = [];
            for (let i2 = 0; i2 < count; i2++)
              vector.push(this.readVarSlice());
            return vector;
          }
        }
        exports2.BufferReader = BufferReader;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "./types": 77, "buffer": 83, "typeforce": 177, "varuint-bitcoin": 180 }], 36: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const script_1 = require2("./script");
    const multisig = require2("./templates/multisig");
    const nullData = require2("./templates/nulldata");
    const pubKey = require2("./templates/pubkey");
    const pubKeyHash = require2("./templates/pubkeyhash");
    const scriptHash = require2("./templates/scripthash");
    const witnessCommitment = require2("./templates/witnesscommitment");
    const witnessPubKeyHash = require2("./templates/witnesspubkeyhash");
    const witnessScriptHash = require2("./templates/witnessscripthash");
    const types = {
      P2MS: "multisig",
      NONSTANDARD: "nonstandard",
      NULLDATA: "nulldata",
      P2PK: "pubkey",
      P2PKH: "pubkeyhash",
      P2SH: "scripthash",
      P2WPKH: "witnesspubkeyhash",
      P2WSH: "witnessscripthash",
      WITNESS_COMMITMENT: "witnesscommitment"
    };
    exports2.types = types;
    function classifyOutput(script) {
      if (witnessPubKeyHash.output.check(script))
        return types.P2WPKH;
      if (witnessScriptHash.output.check(script))
        return types.P2WSH;
      if (pubKeyHash.output.check(script))
        return types.P2PKH;
      if (scriptHash.output.check(script))
        return types.P2SH;
      const chunks = script_1.decompile(script);
      if (!chunks)
        throw new TypeError("Invalid script");
      if (multisig.output.check(chunks))
        return types.P2MS;
      if (pubKey.output.check(chunks))
        return types.P2PK;
      if (witnessCommitment.output.check(chunks))
        return types.WITNESS_COMMITMENT;
      if (nullData.output.check(chunks))
        return types.NULLDATA;
      return types.NONSTANDARD;
    }
    exports2.output = classifyOutput;
    function classifyInput(script, allowIncomplete) {
      const chunks = script_1.decompile(script);
      if (!chunks)
        throw new TypeError("Invalid script");
      if (pubKeyHash.input.check(chunks))
        return types.P2PKH;
      if (scriptHash.input.check(chunks, allowIncomplete))
        return types.P2SH;
      if (multisig.input.check(chunks, allowIncomplete))
        return types.P2MS;
      if (pubKey.input.check(chunks))
        return types.P2PK;
      return types.NONSTANDARD;
    }
    exports2.input = classifyInput;
    function classifyWitness(script, allowIncomplete) {
      const chunks = script_1.decompile(script);
      if (!chunks)
        throw new TypeError("Invalid script");
      if (witnessPubKeyHash.input.check(chunks))
        return types.P2WPKH;
      if (witnessScriptHash.input.check(chunks, allowIncomplete))
        return types.P2WSH;
      return types.NONSTANDARD;
    }
    exports2.witness = classifyWitness;
  }, { "./script": 51, "./templates/multisig": 54, "./templates/nulldata": 57, "./templates/pubkey": 58, "./templates/pubkeyhash": 61, "./templates/scripthash": 64, "./templates/witnesscommitment": 67, "./templates/witnesspubkeyhash": 69, "./templates/witnessscripthash": 72 }], 37: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const createHash = require2("create-hash");
    function ripemd160(buffer2) {
      try {
        return createHash("rmd160").update(buffer2).digest();
      } catch (err) {
        return createHash("ripemd160").update(buffer2).digest();
      }
    }
    exports2.ripemd160 = ripemd160;
    function sha1(buffer2) {
      return createHash("sha1").update(buffer2).digest();
    }
    exports2.sha1 = sha1;
    function sha256(buffer2) {
      return createHash("sha256").update(buffer2).digest();
    }
    exports2.sha256 = sha256;
    function hash160(buffer2) {
      return ripemd160(sha256(buffer2));
    }
    exports2.hash160 = hash160;
    function hash256(buffer2) {
      return sha256(sha256(buffer2));
    }
    exports2.hash256 = hash256;
  }, { "create-hash": 85 }], 38: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const NETWORKS = require2("./networks");
        const types = require2("./types");
        const ecc = require2("tiny-secp256k1");
        const randomBytes = require2("randombytes");
        const typeforce = require2("typeforce");
        const wif = require2("wif");
        const isOptions = typeforce.maybe(typeforce.compile({
          compressed: types.maybe(types.Boolean),
          network: types.maybe(types.Network)
        }));
        class ECPair {
          constructor(__D, __Q, options) {
            this.__D = __D;
            this.__Q = __Q;
            this.lowR = false;
            if (options === void 0)
              options = {};
            this.compressed = options.compressed === void 0 ? true : options.compressed;
            this.network = options.network || NETWORKS.bitcoin;
            if (__Q !== void 0)
              this.__Q = ecc.pointCompress(__Q, this.compressed);
          }
          get privateKey() {
            return this.__D;
          }
          get publicKey() {
            if (!this.__Q)
              this.__Q = ecc.pointFromScalar(this.__D, this.compressed);
            return this.__Q;
          }
          toWIF() {
            if (!this.__D)
              throw new Error("Missing private key");
            return wif.encode(this.network.wif, this.__D, this.compressed);
          }
          sign(hash2, lowR) {
            if (!this.__D)
              throw new Error("Missing private key");
            if (lowR === void 0)
              lowR = this.lowR;
            if (lowR === false) {
              return ecc.sign(hash2, this.__D);
            } else {
              let sig = ecc.sign(hash2, this.__D);
              const extraData = Buffer2.alloc(32, 0);
              let counter = 0;
              while (sig[0] > 127) {
                counter++;
                extraData.writeUIntLE(counter, 0, 6);
                sig = ecc.signWithEntropy(hash2, this.__D, extraData);
              }
              return sig;
            }
          }
          verify(hash2, signature) {
            return ecc.verify(hash2, this.publicKey, signature);
          }
        }
        function fromPrivateKey(buffer2, options) {
          typeforce(types.Buffer256bit, buffer2);
          if (!ecc.isPrivate(buffer2))
            throw new TypeError("Private key not in range [1, n)");
          typeforce(isOptions, options);
          return new ECPair(buffer2, void 0, options);
        }
        exports2.fromPrivateKey = fromPrivateKey;
        function fromPublicKey(buffer2, options) {
          typeforce(ecc.isPoint, buffer2);
          typeforce(isOptions, options);
          return new ECPair(void 0, buffer2, options);
        }
        exports2.fromPublicKey = fromPublicKey;
        function fromWIF(wifString, network) {
          const decoded = wif.decode(wifString);
          const version = decoded.version;
          if (types.Array(network)) {
            network = network.filter((x) => {
              return version === x.wif;
            }).pop();
            if (!network)
              throw new Error("Unknown network version");
          } else {
            network = network || NETWORKS.bitcoin;
            if (version !== network.wif)
              throw new Error("Invalid network version");
          }
          return fromPrivateKey(decoded.privateKey, {
            compressed: decoded.compressed,
            network
          });
        }
        exports2.fromWIF = fromWIF;
        function makeRandom(options) {
          typeforce(isOptions, options);
          if (options === void 0)
            options = {};
          const rng = options.rng || randomBytes;
          let d;
          do {
            d = rng(32);
            typeforce(types.Buffer256bit, d);
          } while (!ecc.isPrivate(d));
          return fromPrivateKey(d, options);
        }
        exports2.makeRandom = makeRandom;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "./networks": 40, "./types": 77, "buffer": 83, "randombytes": 145, "tiny-secp256k1": 172, "typeforce": 177, "wif": 181 }], 39: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const bip32 = require2("bip32");
    exports2.bip32 = bip32;
    const address = require2("./address");
    exports2.address = address;
    const crypto = require2("./crypto");
    exports2.crypto = crypto;
    const ECPair = require2("./ecpair");
    exports2.ECPair = ECPair;
    const networks = require2("./networks");
    exports2.networks = networks;
    const payments = require2("./payments");
    exports2.payments = payments;
    const script = require2("./script");
    exports2.script = script;
    var block_1 = require2("./block");
    exports2.Block = block_1.Block;
    var psbt_1 = require2("./psbt");
    exports2.Psbt = psbt_1.Psbt;
    var script_1 = require2("./script");
    exports2.opcodes = script_1.OPS;
    var transaction_1 = require2("./transaction");
    exports2.Transaction = transaction_1.Transaction;
    var transaction_builder_1 = require2("./transaction_builder");
    exports2.TransactionBuilder = transaction_builder_1.TransactionBuilder;
  }, { "./address": 33, "./block": 34, "./crypto": 37, "./ecpair": 38, "./networks": 40, "./payments": 42, "./psbt": 50, "./script": 51, "./transaction": 75, "./transaction_builder": 76, "bip32": 29 }], 40: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    exports2.bitcoin = {
      messagePrefix: "Bitcoin Signed Message:\n",
      bech32: "bc",
      bip32: {
        public: 76067358,
        private: 76066276
      },
      pubKeyHash: 0,
      scriptHash: 5,
      wif: 128
    };
    exports2.regtest = {
      messagePrefix: "Bitcoin Signed Message:\n",
      bech32: "bcrt",
      bip32: {
        public: 70617039,
        private: 70615956
      },
      pubKeyHash: 111,
      scriptHash: 196,
      wif: 239
    };
    exports2.testnet = {
      messagePrefix: "Bitcoin Signed Message:\n",
      bech32: "tb",
      bip32: {
        public: 70617039,
        private: 70615956
      },
      pubKeyHash: 111,
      scriptHash: 196,
      wif: 239
    };
  }, {}], 41: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const networks_1 = require2("../networks");
    const bscript = require2("../script");
    const lazy = require2("./lazy");
    const typef = require2("typeforce");
    const OPS = bscript.OPS;
    function stacksEqual(a, b) {
      if (a.length !== b.length)
        return false;
      return a.every((x, i2) => {
        return x.equals(b[i2]);
      });
    }
    function p2data(a, opts) {
      if (!a.data && !a.output)
        throw new TypeError("Not enough data");
      opts = Object.assign({ validate: true }, opts || {});
      typef({
        network: typef.maybe(typef.Object),
        output: typef.maybe(typef.Buffer),
        data: typef.maybe(typef.arrayOf(typef.Buffer))
      }, a);
      const network = a.network || networks_1.bitcoin;
      const o = { name: "embed", network };
      lazy.prop(o, "output", () => {
        if (!a.data)
          return;
        return bscript.compile([OPS.OP_RETURN].concat(a.data));
      });
      lazy.prop(o, "data", () => {
        if (!a.output)
          return;
        return bscript.decompile(a.output).slice(1);
      });
      if (opts.validate) {
        if (a.output) {
          const chunks = bscript.decompile(a.output);
          if (chunks[0] !== OPS.OP_RETURN)
            throw new TypeError("Output is invalid");
          if (!chunks.slice(1).every(typef.Buffer))
            throw new TypeError("Output is invalid");
          if (a.data && !stacksEqual(a.data, o.data))
            throw new TypeError("Data mismatch");
        }
      }
      return Object.assign(o, a);
    }
    exports2.p2data = p2data;
  }, { "../networks": 40, "../script": 51, "./lazy": 43, "typeforce": 177 }], 42: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const embed_1 = require2("./embed");
    exports2.embed = embed_1.p2data;
    const p2ms_1 = require2("./p2ms");
    exports2.p2ms = p2ms_1.p2ms;
    const p2pk_1 = require2("./p2pk");
    exports2.p2pk = p2pk_1.p2pk;
    const p2pkh_1 = require2("./p2pkh");
    exports2.p2pkh = p2pkh_1.p2pkh;
    const p2sh_1 = require2("./p2sh");
    exports2.p2sh = p2sh_1.p2sh;
    const p2wpkh_1 = require2("./p2wpkh");
    exports2.p2wpkh = p2wpkh_1.p2wpkh;
    const p2wsh_1 = require2("./p2wsh");
    exports2.p2wsh = p2wsh_1.p2wsh;
  }, { "./embed": 41, "./p2ms": 44, "./p2pk": 45, "./p2pkh": 46, "./p2sh": 47, "./p2wpkh": 48, "./p2wsh": 49 }], 43: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    function prop(object, name, f) {
      Object.defineProperty(object, name, {
        configurable: true,
        enumerable: true,
        get() {
          const _value = f.call(this);
          this[name] = _value;
          return _value;
        },
        set(_value) {
          Object.defineProperty(this, name, {
            configurable: true,
            enumerable: true,
            value: _value,
            writable: true
          });
        }
      });
    }
    exports2.prop = prop;
    function value(f) {
      let _value;
      return () => {
        if (_value !== void 0)
          return _value;
        _value = f();
        return _value;
      };
    }
    exports2.value = value;
  }, {}], 44: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const networks_1 = require2("../networks");
    const bscript = require2("../script");
    const lazy = require2("./lazy");
    const OPS = bscript.OPS;
    const typef = require2("typeforce");
    const ecc = require2("tiny-secp256k1");
    const OP_INT_BASE = OPS.OP_RESERVED;
    function stacksEqual(a, b) {
      if (a.length !== b.length)
        return false;
      return a.every((x, i2) => {
        return x.equals(b[i2]);
      });
    }
    function p2ms(a, opts) {
      if (!a.input && !a.output && !(a.pubkeys && a.m !== void 0) && !a.signatures)
        throw new TypeError("Not enough data");
      opts = Object.assign({ validate: true }, opts || {});
      function isAcceptableSignature(x) {
        return bscript.isCanonicalScriptSignature(x) || (opts.allowIncomplete && x === OPS.OP_0) !== void 0;
      }
      typef({
        network: typef.maybe(typef.Object),
        m: typef.maybe(typef.Number),
        n: typef.maybe(typef.Number),
        output: typef.maybe(typef.Buffer),
        pubkeys: typef.maybe(typef.arrayOf(ecc.isPoint)),
        signatures: typef.maybe(typef.arrayOf(isAcceptableSignature)),
        input: typef.maybe(typef.Buffer)
      }, a);
      const network = a.network || networks_1.bitcoin;
      const o = { network };
      let chunks = [];
      let decoded = false;
      function decode(output) {
        if (decoded)
          return;
        decoded = true;
        chunks = bscript.decompile(output);
        o.m = chunks[0] - OP_INT_BASE;
        o.n = chunks[chunks.length - 2] - OP_INT_BASE;
        o.pubkeys = chunks.slice(1, -2);
      }
      lazy.prop(o, "output", () => {
        if (!a.m)
          return;
        if (!o.n)
          return;
        if (!a.pubkeys)
          return;
        return bscript.compile([].concat(OP_INT_BASE + a.m, a.pubkeys, OP_INT_BASE + o.n, OPS.OP_CHECKMULTISIG));
      });
      lazy.prop(o, "m", () => {
        if (!o.output)
          return;
        decode(o.output);
        return o.m;
      });
      lazy.prop(o, "n", () => {
        if (!o.pubkeys)
          return;
        return o.pubkeys.length;
      });
      lazy.prop(o, "pubkeys", () => {
        if (!a.output)
          return;
        decode(a.output);
        return o.pubkeys;
      });
      lazy.prop(o, "signatures", () => {
        if (!a.input)
          return;
        return bscript.decompile(a.input).slice(1);
      });
      lazy.prop(o, "input", () => {
        if (!a.signatures)
          return;
        return bscript.compile([OPS.OP_0].concat(a.signatures));
      });
      lazy.prop(o, "witness", () => {
        if (!o.input)
          return;
        return [];
      });
      lazy.prop(o, "name", () => {
        if (!o.m || !o.n)
          return;
        return `p2ms(${o.m} of ${o.n})`;
      });
      if (opts.validate) {
        if (a.output) {
          decode(a.output);
          if (!typef.Number(chunks[0]))
            throw new TypeError("Output is invalid");
          if (!typef.Number(chunks[chunks.length - 2]))
            throw new TypeError("Output is invalid");
          if (chunks[chunks.length - 1] !== OPS.OP_CHECKMULTISIG)
            throw new TypeError("Output is invalid");
          if (o.m <= 0 || o.n > 16 || o.m > o.n || o.n !== chunks.length - 3)
            throw new TypeError("Output is invalid");
          if (!o.pubkeys.every((x) => ecc.isPoint(x)))
            throw new TypeError("Output is invalid");
          if (a.m !== void 0 && a.m !== o.m)
            throw new TypeError("m mismatch");
          if (a.n !== void 0 && a.n !== o.n)
            throw new TypeError("n mismatch");
          if (a.pubkeys && !stacksEqual(a.pubkeys, o.pubkeys))
            throw new TypeError("Pubkeys mismatch");
        }
        if (a.pubkeys) {
          if (a.n !== void 0 && a.n !== a.pubkeys.length)
            throw new TypeError("Pubkey count mismatch");
          o.n = a.pubkeys.length;
          if (o.n < o.m)
            throw new TypeError("Pubkey count cannot be less than m");
        }
        if (a.signatures) {
          if (a.signatures.length < o.m)
            throw new TypeError("Not enough signatures provided");
          if (a.signatures.length > o.m)
            throw new TypeError("Too many signatures provided");
        }
        if (a.input) {
          if (a.input[0] !== OPS.OP_0)
            throw new TypeError("Input is invalid");
          if (o.signatures.length === 0 || !o.signatures.every(isAcceptableSignature))
            throw new TypeError("Input has invalid signature(s)");
          if (a.signatures && !stacksEqual(a.signatures, o.signatures))
            throw new TypeError("Signature mismatch");
          if (a.m !== void 0 && a.m !== a.signatures.length)
            throw new TypeError("Signature count mismatch");
        }
      }
      return Object.assign(o, a);
    }
    exports2.p2ms = p2ms;
  }, { "../networks": 40, "../script": 51, "./lazy": 43, "tiny-secp256k1": 172, "typeforce": 177 }], 45: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const networks_1 = require2("../networks");
    const bscript = require2("../script");
    const lazy = require2("./lazy");
    const typef = require2("typeforce");
    const OPS = bscript.OPS;
    const ecc = require2("tiny-secp256k1");
    function p2pk(a, opts) {
      if (!a.input && !a.output && !a.pubkey && !a.input && !a.signature)
        throw new TypeError("Not enough data");
      opts = Object.assign({ validate: true }, opts || {});
      typef({
        network: typef.maybe(typef.Object),
        output: typef.maybe(typef.Buffer),
        pubkey: typef.maybe(ecc.isPoint),
        signature: typef.maybe(bscript.isCanonicalScriptSignature),
        input: typef.maybe(typef.Buffer)
      }, a);
      const _chunks = lazy.value(() => {
        return bscript.decompile(a.input);
      });
      const network = a.network || networks_1.bitcoin;
      const o = { name: "p2pk", network };
      lazy.prop(o, "output", () => {
        if (!a.pubkey)
          return;
        return bscript.compile([a.pubkey, OPS.OP_CHECKSIG]);
      });
      lazy.prop(o, "pubkey", () => {
        if (!a.output)
          return;
        return a.output.slice(1, -1);
      });
      lazy.prop(o, "signature", () => {
        if (!a.input)
          return;
        return _chunks()[0];
      });
      lazy.prop(o, "input", () => {
        if (!a.signature)
          return;
        return bscript.compile([a.signature]);
      });
      lazy.prop(o, "witness", () => {
        if (!o.input)
          return;
        return [];
      });
      if (opts.validate) {
        if (a.output) {
          if (a.output[a.output.length - 1] !== OPS.OP_CHECKSIG)
            throw new TypeError("Output is invalid");
          if (!ecc.isPoint(o.pubkey))
            throw new TypeError("Output pubkey is invalid");
          if (a.pubkey && !a.pubkey.equals(o.pubkey))
            throw new TypeError("Pubkey mismatch");
        }
        if (a.signature) {
          if (a.input && !a.input.equals(o.input))
            throw new TypeError("Signature mismatch");
        }
        if (a.input) {
          if (_chunks().length !== 1)
            throw new TypeError("Input is invalid");
          if (!bscript.isCanonicalScriptSignature(o.signature))
            throw new TypeError("Input has invalid signature");
        }
      }
      return Object.assign(o, a);
    }
    exports2.p2pk = p2pk;
  }, { "../networks": 40, "../script": 51, "./lazy": 43, "tiny-secp256k1": 172, "typeforce": 177 }], 46: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const bcrypto = require2("../crypto");
        const networks_1 = require2("../networks");
        const bscript = require2("../script");
        const lazy = require2("./lazy");
        const typef = require2("typeforce");
        const OPS = bscript.OPS;
        const ecc = require2("tiny-secp256k1");
        const bs58check = require2("bs58check");
        function p2pkh(a, opts) {
          if (!a.address && !a.hash && !a.output && !a.pubkey && !a.input)
            throw new TypeError("Not enough data");
          opts = Object.assign({ validate: true }, opts || {});
          typef({
            network: typef.maybe(typef.Object),
            address: typef.maybe(typef.String),
            hash: typef.maybe(typef.BufferN(20)),
            output: typef.maybe(typef.BufferN(25)),
            pubkey: typef.maybe(ecc.isPoint),
            signature: typef.maybe(bscript.isCanonicalScriptSignature),
            input: typef.maybe(typef.Buffer)
          }, a);
          const _address = lazy.value(() => {
            const payload = bs58check.decode(a.address);
            const version = payload.readUInt8(0);
            const hash2 = payload.slice(1);
            return { version, hash: hash2 };
          });
          const _chunks = lazy.value(() => {
            return bscript.decompile(a.input);
          });
          const network = a.network || networks_1.bitcoin;
          const o = { name: "p2pkh", network };
          lazy.prop(o, "address", () => {
            if (!o.hash)
              return;
            const payload = Buffer2.allocUnsafe(21);
            payload.writeUInt8(network.pubKeyHash, 0);
            o.hash.copy(payload, 1);
            return bs58check.encode(payload);
          });
          lazy.prop(o, "hash", () => {
            if (a.output)
              return a.output.slice(3, 23);
            if (a.address)
              return _address().hash;
            if (a.pubkey || o.pubkey)
              return bcrypto.hash160(a.pubkey || o.pubkey);
          });
          lazy.prop(o, "output", () => {
            if (!o.hash)
              return;
            return bscript.compile([
              OPS.OP_DUP,
              OPS.OP_HASH160,
              o.hash,
              OPS.OP_EQUALVERIFY,
              OPS.OP_CHECKSIG
            ]);
          });
          lazy.prop(o, "pubkey", () => {
            if (!a.input)
              return;
            return _chunks()[1];
          });
          lazy.prop(o, "signature", () => {
            if (!a.input)
              return;
            return _chunks()[0];
          });
          lazy.prop(o, "input", () => {
            if (!a.pubkey)
              return;
            if (!a.signature)
              return;
            return bscript.compile([a.signature, a.pubkey]);
          });
          lazy.prop(o, "witness", () => {
            if (!o.input)
              return;
            return [];
          });
          if (opts.validate) {
            let hash2 = Buffer2.from([]);
            if (a.address) {
              if (_address().version !== network.pubKeyHash)
                throw new TypeError("Invalid version or Network mismatch");
              if (_address().hash.length !== 20)
                throw new TypeError("Invalid address");
              hash2 = _address().hash;
            }
            if (a.hash) {
              if (hash2.length > 0 && !hash2.equals(a.hash))
                throw new TypeError("Hash mismatch");
              else
                hash2 = a.hash;
            }
            if (a.output) {
              if (a.output.length !== 25 || a.output[0] !== OPS.OP_DUP || a.output[1] !== OPS.OP_HASH160 || a.output[2] !== 20 || a.output[23] !== OPS.OP_EQUALVERIFY || a.output[24] !== OPS.OP_CHECKSIG)
                throw new TypeError("Output is invalid");
              const hash22 = a.output.slice(3, 23);
              if (hash2.length > 0 && !hash2.equals(hash22))
                throw new TypeError("Hash mismatch");
              else
                hash2 = hash22;
            }
            if (a.pubkey) {
              const pkh = bcrypto.hash160(a.pubkey);
              if (hash2.length > 0 && !hash2.equals(pkh))
                throw new TypeError("Hash mismatch");
              else
                hash2 = pkh;
            }
            if (a.input) {
              const chunks = _chunks();
              if (chunks.length !== 2)
                throw new TypeError("Input is invalid");
              if (!bscript.isCanonicalScriptSignature(chunks[0]))
                throw new TypeError("Input has invalid signature");
              if (!ecc.isPoint(chunks[1]))
                throw new TypeError("Input has invalid pubkey");
              if (a.signature && !a.signature.equals(chunks[0]))
                throw new TypeError("Signature mismatch");
              if (a.pubkey && !a.pubkey.equals(chunks[1]))
                throw new TypeError("Pubkey mismatch");
              const pkh = bcrypto.hash160(chunks[1]);
              if (hash2.length > 0 && !hash2.equals(pkh))
                throw new TypeError("Hash mismatch");
            }
          }
          return Object.assign(o, a);
        }
        exports2.p2pkh = p2pkh;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../crypto": 37, "../networks": 40, "../script": 51, "./lazy": 43, "bs58check": 82, "buffer": 83, "tiny-secp256k1": 172, "typeforce": 177 }], 47: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const bcrypto = require2("../crypto");
        const networks_1 = require2("../networks");
        const bscript = require2("../script");
        const lazy = require2("./lazy");
        const typef = require2("typeforce");
        const OPS = bscript.OPS;
        const bs58check = require2("bs58check");
        function stacksEqual(a, b) {
          if (a.length !== b.length)
            return false;
          return a.every((x, i2) => {
            return x.equals(b[i2]);
          });
        }
        function p2sh(a, opts) {
          if (!a.address && !a.hash && !a.output && !a.redeem && !a.input)
            throw new TypeError("Not enough data");
          opts = Object.assign({ validate: true }, opts || {});
          typef({
            network: typef.maybe(typef.Object),
            address: typef.maybe(typef.String),
            hash: typef.maybe(typef.BufferN(20)),
            output: typef.maybe(typef.BufferN(23)),
            redeem: typef.maybe({
              network: typef.maybe(typef.Object),
              output: typef.maybe(typef.Buffer),
              input: typef.maybe(typef.Buffer),
              witness: typef.maybe(typef.arrayOf(typef.Buffer))
            }),
            input: typef.maybe(typef.Buffer),
            witness: typef.maybe(typef.arrayOf(typef.Buffer))
          }, a);
          let network = a.network;
          if (!network) {
            network = a.redeem && a.redeem.network || networks_1.bitcoin;
          }
          const o = { network };
          const _address = lazy.value(() => {
            const payload = bs58check.decode(a.address);
            const version = payload.readUInt8(0);
            const hash2 = payload.slice(1);
            return { version, hash: hash2 };
          });
          const _chunks = lazy.value(() => {
            return bscript.decompile(a.input);
          });
          const _redeem = lazy.value(() => {
            const chunks = _chunks();
            return {
              network,
              output: chunks[chunks.length - 1],
              input: bscript.compile(chunks.slice(0, -1)),
              witness: a.witness || []
            };
          });
          lazy.prop(o, "address", () => {
            if (!o.hash)
              return;
            const payload = Buffer2.allocUnsafe(21);
            payload.writeUInt8(o.network.scriptHash, 0);
            o.hash.copy(payload, 1);
            return bs58check.encode(payload);
          });
          lazy.prop(o, "hash", () => {
            if (a.output)
              return a.output.slice(2, 22);
            if (a.address)
              return _address().hash;
            if (o.redeem && o.redeem.output)
              return bcrypto.hash160(o.redeem.output);
          });
          lazy.prop(o, "output", () => {
            if (!o.hash)
              return;
            return bscript.compile([OPS.OP_HASH160, o.hash, OPS.OP_EQUAL]);
          });
          lazy.prop(o, "redeem", () => {
            if (!a.input)
              return;
            return _redeem();
          });
          lazy.prop(o, "input", () => {
            if (!a.redeem || !a.redeem.input || !a.redeem.output)
              return;
            return bscript.compile([].concat(bscript.decompile(a.redeem.input), a.redeem.output));
          });
          lazy.prop(o, "witness", () => {
            if (o.redeem && o.redeem.witness)
              return o.redeem.witness;
            if (o.input)
              return [];
          });
          lazy.prop(o, "name", () => {
            const nameParts = ["p2sh"];
            if (o.redeem !== void 0)
              nameParts.push(o.redeem.name);
            return nameParts.join("-");
          });
          if (opts.validate) {
            let hash2 = Buffer2.from([]);
            if (a.address) {
              if (_address().version !== network.scriptHash)
                throw new TypeError("Invalid version or Network mismatch");
              if (_address().hash.length !== 20)
                throw new TypeError("Invalid address");
              hash2 = _address().hash;
            }
            if (a.hash) {
              if (hash2.length > 0 && !hash2.equals(a.hash))
                throw new TypeError("Hash mismatch");
              else
                hash2 = a.hash;
            }
            if (a.output) {
              if (a.output.length !== 23 || a.output[0] !== OPS.OP_HASH160 || a.output[1] !== 20 || a.output[22] !== OPS.OP_EQUAL)
                throw new TypeError("Output is invalid");
              const hash22 = a.output.slice(2, 22);
              if (hash2.length > 0 && !hash2.equals(hash22))
                throw new TypeError("Hash mismatch");
              else
                hash2 = hash22;
            }
            const checkRedeem = (redeem) => {
              if (redeem.output) {
                const decompile = bscript.decompile(redeem.output);
                if (!decompile || decompile.length < 1)
                  throw new TypeError("Redeem.output too short");
                const hash22 = bcrypto.hash160(redeem.output);
                if (hash2.length > 0 && !hash2.equals(hash22))
                  throw new TypeError("Hash mismatch");
                else
                  hash2 = hash22;
              }
              if (redeem.input) {
                const hasInput = redeem.input.length > 0;
                const hasWitness = redeem.witness && redeem.witness.length > 0;
                if (!hasInput && !hasWitness)
                  throw new TypeError("Empty input");
                if (hasInput && hasWitness)
                  throw new TypeError("Input and witness provided");
                if (hasInput) {
                  const richunks = bscript.decompile(redeem.input);
                  if (!bscript.isPushOnly(richunks))
                    throw new TypeError("Non push-only scriptSig");
                }
              }
            };
            if (a.input) {
              const chunks = _chunks();
              if (!chunks || chunks.length < 1)
                throw new TypeError("Input too short");
              if (!Buffer2.isBuffer(_redeem().output))
                throw new TypeError("Input is invalid");
              checkRedeem(_redeem());
            }
            if (a.redeem) {
              if (a.redeem.network && a.redeem.network !== network)
                throw new TypeError("Network mismatch");
              if (a.input) {
                const redeem = _redeem();
                if (a.redeem.output && !a.redeem.output.equals(redeem.output))
                  throw new TypeError("Redeem.output mismatch");
                if (a.redeem.input && !a.redeem.input.equals(redeem.input))
                  throw new TypeError("Redeem.input mismatch");
              }
              checkRedeem(a.redeem);
            }
            if (a.witness) {
              if (a.redeem && a.redeem.witness && !stacksEqual(a.redeem.witness, a.witness))
                throw new TypeError("Witness and redeem.witness mismatch");
            }
          }
          return Object.assign(o, a);
        }
        exports2.p2sh = p2sh;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../crypto": 37, "../networks": 40, "../script": 51, "./lazy": 43, "bs58check": 82, "buffer": 83, "typeforce": 177 }], 48: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const bcrypto = require2("../crypto");
        const networks_1 = require2("../networks");
        const bscript = require2("../script");
        const lazy = require2("./lazy");
        const typef = require2("typeforce");
        const OPS = bscript.OPS;
        const ecc = require2("tiny-secp256k1");
        const bech32 = require2("bech32");
        const EMPTY_BUFFER = Buffer2.alloc(0);
        function p2wpkh(a, opts) {
          if (!a.address && !a.hash && !a.output && !a.pubkey && !a.witness)
            throw new TypeError("Not enough data");
          opts = Object.assign({ validate: true }, opts || {});
          typef({
            address: typef.maybe(typef.String),
            hash: typef.maybe(typef.BufferN(20)),
            input: typef.maybe(typef.BufferN(0)),
            network: typef.maybe(typef.Object),
            output: typef.maybe(typef.BufferN(22)),
            pubkey: typef.maybe(ecc.isPoint),
            signature: typef.maybe(bscript.isCanonicalScriptSignature),
            witness: typef.maybe(typef.arrayOf(typef.Buffer))
          }, a);
          const _address = lazy.value(() => {
            const result = bech32.decode(a.address);
            const version = result.words.shift();
            const data = bech32.fromWords(result.words);
            return {
              version,
              prefix: result.prefix,
              data: Buffer2.from(data)
            };
          });
          const network = a.network || networks_1.bitcoin;
          const o = { name: "p2wpkh", network };
          lazy.prop(o, "address", () => {
            if (!o.hash)
              return;
            const words = bech32.toWords(o.hash);
            words.unshift(0);
            return bech32.encode(network.bech32, words);
          });
          lazy.prop(o, "hash", () => {
            if (a.output)
              return a.output.slice(2, 22);
            if (a.address)
              return _address().data;
            if (a.pubkey || o.pubkey)
              return bcrypto.hash160(a.pubkey || o.pubkey);
          });
          lazy.prop(o, "output", () => {
            if (!o.hash)
              return;
            return bscript.compile([OPS.OP_0, o.hash]);
          });
          lazy.prop(o, "pubkey", () => {
            if (a.pubkey)
              return a.pubkey;
            if (!a.witness)
              return;
            return a.witness[1];
          });
          lazy.prop(o, "signature", () => {
            if (!a.witness)
              return;
            return a.witness[0];
          });
          lazy.prop(o, "input", () => {
            if (!o.witness)
              return;
            return EMPTY_BUFFER;
          });
          lazy.prop(o, "witness", () => {
            if (!a.pubkey)
              return;
            if (!a.signature)
              return;
            return [a.signature, a.pubkey];
          });
          if (opts.validate) {
            let hash2 = Buffer2.from([]);
            if (a.address) {
              if (network && network.bech32 !== _address().prefix)
                throw new TypeError("Invalid prefix or Network mismatch");
              if (_address().version !== 0)
                throw new TypeError("Invalid address version");
              if (_address().data.length !== 20)
                throw new TypeError("Invalid address data");
              hash2 = _address().data;
            }
            if (a.hash) {
              if (hash2.length > 0 && !hash2.equals(a.hash))
                throw new TypeError("Hash mismatch");
              else
                hash2 = a.hash;
            }
            if (a.output) {
              if (a.output.length !== 22 || a.output[0] !== OPS.OP_0 || a.output[1] !== 20)
                throw new TypeError("Output is invalid");
              if (hash2.length > 0 && !hash2.equals(a.output.slice(2)))
                throw new TypeError("Hash mismatch");
              else
                hash2 = a.output.slice(2);
            }
            if (a.pubkey) {
              const pkh = bcrypto.hash160(a.pubkey);
              if (hash2.length > 0 && !hash2.equals(pkh))
                throw new TypeError("Hash mismatch");
              else
                hash2 = pkh;
              if (!ecc.isPoint(a.pubkey) || a.pubkey.length !== 33)
                throw new TypeError("Invalid pubkey for p2wpkh");
            }
            if (a.witness) {
              if (a.witness.length !== 2)
                throw new TypeError("Witness is invalid");
              if (!bscript.isCanonicalScriptSignature(a.witness[0]))
                throw new TypeError("Witness has invalid signature");
              if (!ecc.isPoint(a.witness[1]) || a.witness[1].length !== 33)
                throw new TypeError("Witness has invalid pubkey");
              if (a.signature && !a.signature.equals(a.witness[0]))
                throw new TypeError("Signature mismatch");
              if (a.pubkey && !a.pubkey.equals(a.witness[1]))
                throw new TypeError("Pubkey mismatch");
              const pkh = bcrypto.hash160(a.witness[1]);
              if (hash2.length > 0 && !hash2.equals(pkh))
                throw new TypeError("Hash mismatch");
            }
          }
          return Object.assign(o, a);
        }
        exports2.p2wpkh = p2wpkh;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../crypto": 37, "../networks": 40, "../script": 51, "./lazy": 43, "bech32": 3, "buffer": 83, "tiny-secp256k1": 172, "typeforce": 177 }], 49: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const bcrypto = require2("../crypto");
        const networks_1 = require2("../networks");
        const bscript = require2("../script");
        const lazy = require2("./lazy");
        const typef = require2("typeforce");
        const OPS = bscript.OPS;
        const ecc = require2("tiny-secp256k1");
        const bech32 = require2("bech32");
        const EMPTY_BUFFER = Buffer2.alloc(0);
        function stacksEqual(a, b) {
          if (a.length !== b.length)
            return false;
          return a.every((x, i2) => {
            return x.equals(b[i2]);
          });
        }
        function chunkHasUncompressedPubkey(chunk) {
          if (Buffer2.isBuffer(chunk) && chunk.length === 65 && chunk[0] === 4 && ecc.isPoint(chunk)) {
            return true;
          } else {
            return false;
          }
        }
        function p2wsh(a, opts) {
          if (!a.address && !a.hash && !a.output && !a.redeem && !a.witness)
            throw new TypeError("Not enough data");
          opts = Object.assign({ validate: true }, opts || {});
          typef({
            network: typef.maybe(typef.Object),
            address: typef.maybe(typef.String),
            hash: typef.maybe(typef.BufferN(32)),
            output: typef.maybe(typef.BufferN(34)),
            redeem: typef.maybe({
              input: typef.maybe(typef.Buffer),
              network: typef.maybe(typef.Object),
              output: typef.maybe(typef.Buffer),
              witness: typef.maybe(typef.arrayOf(typef.Buffer))
            }),
            input: typef.maybe(typef.BufferN(0)),
            witness: typef.maybe(typef.arrayOf(typef.Buffer))
          }, a);
          const _address = lazy.value(() => {
            const result = bech32.decode(a.address);
            const version = result.words.shift();
            const data = bech32.fromWords(result.words);
            return {
              version,
              prefix: result.prefix,
              data: Buffer2.from(data)
            };
          });
          const _rchunks = lazy.value(() => {
            return bscript.decompile(a.redeem.input);
          });
          let network = a.network;
          if (!network) {
            network = a.redeem && a.redeem.network || networks_1.bitcoin;
          }
          const o = { network };
          lazy.prop(o, "address", () => {
            if (!o.hash)
              return;
            const words = bech32.toWords(o.hash);
            words.unshift(0);
            return bech32.encode(network.bech32, words);
          });
          lazy.prop(o, "hash", () => {
            if (a.output)
              return a.output.slice(2);
            if (a.address)
              return _address().data;
            if (o.redeem && o.redeem.output)
              return bcrypto.sha256(o.redeem.output);
          });
          lazy.prop(o, "output", () => {
            if (!o.hash)
              return;
            return bscript.compile([OPS.OP_0, o.hash]);
          });
          lazy.prop(o, "redeem", () => {
            if (!a.witness)
              return;
            return {
              output: a.witness[a.witness.length - 1],
              input: EMPTY_BUFFER,
              witness: a.witness.slice(0, -1)
            };
          });
          lazy.prop(o, "input", () => {
            if (!o.witness)
              return;
            return EMPTY_BUFFER;
          });
          lazy.prop(o, "witness", () => {
            if (a.redeem && a.redeem.input && a.redeem.input.length > 0 && a.redeem.output && a.redeem.output.length > 0) {
              const stack = bscript.toStack(_rchunks());
              o.redeem = Object.assign({ witness: stack }, a.redeem);
              o.redeem.input = EMPTY_BUFFER;
              return [].concat(stack, a.redeem.output);
            }
            if (!a.redeem)
              return;
            if (!a.redeem.output)
              return;
            if (!a.redeem.witness)
              return;
            return [].concat(a.redeem.witness, a.redeem.output);
          });
          lazy.prop(o, "name", () => {
            const nameParts = ["p2wsh"];
            if (o.redeem !== void 0)
              nameParts.push(o.redeem.name);
            return nameParts.join("-");
          });
          if (opts.validate) {
            let hash2 = Buffer2.from([]);
            if (a.address) {
              if (_address().prefix !== network.bech32)
                throw new TypeError("Invalid prefix or Network mismatch");
              if (_address().version !== 0)
                throw new TypeError("Invalid address version");
              if (_address().data.length !== 32)
                throw new TypeError("Invalid address data");
              hash2 = _address().data;
            }
            if (a.hash) {
              if (hash2.length > 0 && !hash2.equals(a.hash))
                throw new TypeError("Hash mismatch");
              else
                hash2 = a.hash;
            }
            if (a.output) {
              if (a.output.length !== 34 || a.output[0] !== OPS.OP_0 || a.output[1] !== 32)
                throw new TypeError("Output is invalid");
              const hash22 = a.output.slice(2);
              if (hash2.length > 0 && !hash2.equals(hash22))
                throw new TypeError("Hash mismatch");
              else
                hash2 = hash22;
            }
            if (a.redeem) {
              if (a.redeem.network && a.redeem.network !== network)
                throw new TypeError("Network mismatch");
              if (a.redeem.input && a.redeem.input.length > 0 && a.redeem.witness && a.redeem.witness.length > 0)
                throw new TypeError("Ambiguous witness source");
              if (a.redeem.output) {
                if (bscript.decompile(a.redeem.output).length === 0)
                  throw new TypeError("Redeem.output is invalid");
                const hash22 = bcrypto.sha256(a.redeem.output);
                if (hash2.length > 0 && !hash2.equals(hash22))
                  throw new TypeError("Hash mismatch");
                else
                  hash2 = hash22;
              }
              if (a.redeem.input && !bscript.isPushOnly(_rchunks()))
                throw new TypeError("Non push-only scriptSig");
              if (a.witness && a.redeem.witness && !stacksEqual(a.witness, a.redeem.witness))
                throw new TypeError("Witness and redeem.witness mismatch");
              if (a.redeem.input && _rchunks().some(chunkHasUncompressedPubkey) || a.redeem.output && (bscript.decompile(a.redeem.output) || []).some(chunkHasUncompressedPubkey)) {
                throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey");
              }
            }
            if (a.witness && a.witness.length > 0) {
              const wScript = a.witness[a.witness.length - 1];
              if (a.redeem && a.redeem.output && !a.redeem.output.equals(wScript))
                throw new TypeError("Witness and redeem.output mismatch");
              if (a.witness.some(chunkHasUncompressedPubkey) || (bscript.decompile(wScript) || []).some(chunkHasUncompressedPubkey))
                throw new TypeError("Witness contains uncompressed pubkey");
            }
          }
          return Object.assign(o, a);
        }
        exports2.p2wsh = p2wsh;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../crypto": 37, "../networks": 40, "../script": 51, "./lazy": 43, "bech32": 3, "buffer": 83, "tiny-secp256k1": 172, "typeforce": 177 }], 50: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const bip174_1 = require2("bip174");
        const varuint = require2("bip174/src/lib/converter/varint");
        const utils_1 = require2("bip174/src/lib/utils");
        const address_1 = require2("./address");
        const bufferutils_1 = require2("./bufferutils");
        const crypto_1 = require2("./crypto");
        const ecpair_1 = require2("./ecpair");
        const networks_1 = require2("./networks");
        const payments = require2("./payments");
        const bscript = require2("./script");
        const transaction_1 = require2("./transaction");
        const DEFAULT_OPTS = {
          network: networks_1.bitcoin,
          maximumFeeRate: 5e3
        };
        class Psbt {
          constructor(opts = {}, data = new bip174_1.Psbt(new PsbtTransaction())) {
            this.data = data;
            this.opts = Object.assign({}, DEFAULT_OPTS, opts);
            this.__CACHE = {
              __NON_WITNESS_UTXO_TX_CACHE: [],
              __NON_WITNESS_UTXO_BUF_CACHE: [],
              __TX_IN_CACHE: {},
              __TX: this.data.globalMap.unsignedTx.tx,
              __UNSAFE_SIGN_NONSEGWIT: false
            };
            if (this.data.inputs.length === 0)
              this.setVersion(2);
            const dpew = (obj, attr2, enumerable, writable2) => Object.defineProperty(obj, attr2, {
              enumerable,
              writable: writable2
            });
            dpew(this, "__CACHE", false, true);
            dpew(this, "opts", false, true);
          }
          static fromBase64(data, opts = {}) {
            const buffer2 = Buffer2.from(data, "base64");
            return this.fromBuffer(buffer2, opts);
          }
          static fromHex(data, opts = {}) {
            const buffer2 = Buffer2.from(data, "hex");
            return this.fromBuffer(buffer2, opts);
          }
          static fromBuffer(buffer2, opts = {}) {
            const psbtBase = bip174_1.Psbt.fromBuffer(buffer2, transactionFromBuffer);
            const psbt = new Psbt(opts, psbtBase);
            checkTxForDupeIns(psbt.__CACHE.__TX, psbt.__CACHE);
            return psbt;
          }
          get inputCount() {
            return this.data.inputs.length;
          }
          get version() {
            return this.__CACHE.__TX.version;
          }
          set version(version) {
            this.setVersion(version);
          }
          get locktime() {
            return this.__CACHE.__TX.locktime;
          }
          set locktime(locktime) {
            this.setLocktime(locktime);
          }
          get txInputs() {
            return this.__CACHE.__TX.ins.map((input) => ({
              hash: bufferutils_1.cloneBuffer(input.hash),
              index: input.index,
              sequence: input.sequence
            }));
          }
          get txOutputs() {
            return this.__CACHE.__TX.outs.map((output) => {
              let address;
              try {
                address = address_1.fromOutputScript(output.script, this.opts.network);
              } catch (_) {
              }
              return {
                script: bufferutils_1.cloneBuffer(output.script),
                value: output.value,
                address
              };
            });
          }
          combine(...those) {
            this.data.combine(...those.map((o) => o.data));
            return this;
          }
          clone() {
            const res = Psbt.fromBuffer(this.data.toBuffer());
            res.opts = JSON.parse(JSON.stringify(this.opts));
            return res;
          }
          setMaximumFeeRate(satoshiPerByte) {
            check32Bit(satoshiPerByte);
            this.opts.maximumFeeRate = satoshiPerByte;
          }
          setVersion(version) {
            check32Bit(version);
            checkInputsForPartialSig(this.data.inputs, "setVersion");
            const c = this.__CACHE;
            c.__TX.version = version;
            c.__EXTRACTED_TX = void 0;
            return this;
          }
          setLocktime(locktime) {
            check32Bit(locktime);
            checkInputsForPartialSig(this.data.inputs, "setLocktime");
            const c = this.__CACHE;
            c.__TX.locktime = locktime;
            c.__EXTRACTED_TX = void 0;
            return this;
          }
          setInputSequence(inputIndex, sequence) {
            check32Bit(sequence);
            checkInputsForPartialSig(this.data.inputs, "setInputSequence");
            const c = this.__CACHE;
            if (c.__TX.ins.length <= inputIndex) {
              throw new Error("Input index too high");
            }
            c.__TX.ins[inputIndex].sequence = sequence;
            c.__EXTRACTED_TX = void 0;
            return this;
          }
          addInputs(inputDatas) {
            inputDatas.forEach((inputData) => this.addInput(inputData));
            return this;
          }
          addInput(inputData) {
            if (arguments.length > 1 || !inputData || inputData.hash === void 0 || inputData.index === void 0) {
              throw new Error(`Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]`);
            }
            checkInputsForPartialSig(this.data.inputs, "addInput");
            if (inputData.witnessScript)
              checkInvalidP2WSH(inputData.witnessScript);
            const c = this.__CACHE;
            this.data.addInput(inputData);
            const txIn = c.__TX.ins[c.__TX.ins.length - 1];
            checkTxInputCache(c, txIn);
            const inputIndex = this.data.inputs.length - 1;
            const input = this.data.inputs[inputIndex];
            if (input.nonWitnessUtxo) {
              addNonWitnessTxCache(this.__CACHE, input, inputIndex);
            }
            c.__FEE = void 0;
            c.__FEE_RATE = void 0;
            c.__EXTRACTED_TX = void 0;
            return this;
          }
          addOutputs(outputDatas) {
            outputDatas.forEach((outputData) => this.addOutput(outputData));
            return this;
          }
          addOutput(outputData) {
            if (arguments.length > 1 || !outputData || outputData.value === void 0 || outputData.address === void 0 && outputData.script === void 0) {
              throw new Error(`Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]`);
            }
            checkInputsForPartialSig(this.data.inputs, "addOutput");
            const { address } = outputData;
            if (typeof address === "string") {
              const { network } = this.opts;
              const script = address_1.toOutputScript(address, network);
              outputData = Object.assign(outputData, { script });
            }
            const c = this.__CACHE;
            this.data.addOutput(outputData);
            c.__FEE = void 0;
            c.__FEE_RATE = void 0;
            c.__EXTRACTED_TX = void 0;
            return this;
          }
          extractTransaction(disableFeeCheck) {
            if (!this.data.inputs.every(isFinalized))
              throw new Error("Not finalized");
            const c = this.__CACHE;
            if (!disableFeeCheck) {
              checkFees(this, c, this.opts);
            }
            if (c.__EXTRACTED_TX)
              return c.__EXTRACTED_TX;
            const tx = c.__TX.clone();
            inputFinalizeGetAmts(this.data.inputs, tx, c, true);
            return tx;
          }
          getFeeRate() {
            return getTxCacheValue("__FEE_RATE", "fee rate", this.data.inputs, this.__CACHE);
          }
          getFee() {
            return getTxCacheValue("__FEE", "fee", this.data.inputs, this.__CACHE);
          }
          finalizeAllInputs() {
            utils_1.checkForInput(this.data.inputs, 0);
            range(this.data.inputs.length).forEach((idx) => this.finalizeInput(idx));
            return this;
          }
          finalizeInput(inputIndex, finalScriptsFunc = getFinalScripts) {
            const input = utils_1.checkForInput(this.data.inputs, inputIndex);
            const { script, isP2SH, isP2WSH, isSegwit } = getScriptFromInput(inputIndex, input, this.__CACHE);
            if (!script)
              throw new Error(`No script found for input #${inputIndex}`);
            checkPartialSigSighashes(input);
            const { finalScriptSig, finalScriptWitness } = finalScriptsFunc(inputIndex, input, script, isSegwit, isP2SH, isP2WSH);
            if (finalScriptSig)
              this.data.updateInput(inputIndex, { finalScriptSig });
            if (finalScriptWitness)
              this.data.updateInput(inputIndex, { finalScriptWitness });
            if (!finalScriptSig && !finalScriptWitness)
              throw new Error(`Unknown error finalizing input #${inputIndex}`);
            this.data.clearFinalizedInput(inputIndex);
            return this;
          }
          getInputType(inputIndex) {
            const input = utils_1.checkForInput(this.data.inputs, inputIndex);
            const script = getScriptFromUtxo(inputIndex, input, this.__CACHE);
            const result = getMeaningfulScript(script, inputIndex, "input", input.redeemScript || redeemFromFinalScriptSig(input.finalScriptSig), input.witnessScript || redeemFromFinalWitnessScript(input.finalScriptWitness));
            const type = result.type === "raw" ? "" : result.type + "-";
            const mainType = classifyScript(result.meaningfulScript);
            return type + mainType;
          }
          inputHasPubkey(inputIndex, pubkey) {
            const input = utils_1.checkForInput(this.data.inputs, inputIndex);
            return pubkeyInInput(pubkey, input, inputIndex, this.__CACHE);
          }
          inputHasHDKey(inputIndex, root) {
            const input = utils_1.checkForInput(this.data.inputs, inputIndex);
            const derivationIsMine = bip32DerivationIsMine(root);
            return !!input.bip32Derivation && input.bip32Derivation.some(derivationIsMine);
          }
          outputHasPubkey(outputIndex, pubkey) {
            const output = utils_1.checkForOutput(this.data.outputs, outputIndex);
            return pubkeyInOutput(pubkey, output, outputIndex, this.__CACHE);
          }
          outputHasHDKey(outputIndex, root) {
            const output = utils_1.checkForOutput(this.data.outputs, outputIndex);
            const derivationIsMine = bip32DerivationIsMine(root);
            return !!output.bip32Derivation && output.bip32Derivation.some(derivationIsMine);
          }
          validateSignaturesOfAllInputs() {
            utils_1.checkForInput(this.data.inputs, 0);
            const results = range(this.data.inputs.length).map((idx) => this.validateSignaturesOfInput(idx));
            return results.reduce((final, res) => res === true && final, true);
          }
          validateSignaturesOfInput(inputIndex, pubkey) {
            const input = this.data.inputs[inputIndex];
            const partialSig = (input || {}).partialSig;
            if (!input || !partialSig || partialSig.length < 1)
              throw new Error("No signatures to validate");
            const mySigs = pubkey ? partialSig.filter((sig) => sig.pubkey.equals(pubkey)) : partialSig;
            if (mySigs.length < 1)
              throw new Error("No signatures for this pubkey");
            const results = [];
            let hashCache;
            let scriptCache;
            let sighashCache;
            for (const pSig of mySigs) {
              const sig = bscript.signature.decode(pSig.signature);
              const { hash: hash2, script } = sighashCache !== sig.hashType ? getHashForSig(inputIndex, Object.assign({}, input, { sighashType: sig.hashType }), this.__CACHE, true) : { hash: hashCache, script: scriptCache };
              sighashCache = sig.hashType;
              hashCache = hash2;
              scriptCache = script;
              checkScriptForPubkey(pSig.pubkey, script, "verify");
              const keypair = ecpair_1.fromPublicKey(pSig.pubkey);
              results.push(keypair.verify(hash2, sig.signature));
            }
            return results.every((res) => res === true);
          }
          signAllInputsHD(hdKeyPair, sighashTypes = [transaction_1.Transaction.SIGHASH_ALL]) {
            if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {
              throw new Error("Need HDSigner to sign input");
            }
            const results = [];
            for (const i2 of range(this.data.inputs.length)) {
              try {
                this.signInputHD(i2, hdKeyPair, sighashTypes);
                results.push(true);
              } catch (err) {
                results.push(false);
              }
            }
            if (results.every((v2) => v2 === false)) {
              throw new Error("No inputs were signed");
            }
            return this;
          }
          signAllInputsHDAsync(hdKeyPair, sighashTypes = [transaction_1.Transaction.SIGHASH_ALL]) {
            return new Promise((resolve, reject) => {
              if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {
                return reject(new Error("Need HDSigner to sign input"));
              }
              const results = [];
              const promises = [];
              for (const i2 of range(this.data.inputs.length)) {
                promises.push(this.signInputHDAsync(i2, hdKeyPair, sighashTypes).then(() => {
                  results.push(true);
                }, () => {
                  results.push(false);
                }));
              }
              return Promise.all(promises).then(() => {
                if (results.every((v2) => v2 === false)) {
                  return reject(new Error("No inputs were signed"));
                }
                resolve();
              });
            });
          }
          signInputHD(inputIndex, hdKeyPair, sighashTypes = [transaction_1.Transaction.SIGHASH_ALL]) {
            if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {
              throw new Error("Need HDSigner to sign input");
            }
            const signers = getSignersFromHD(inputIndex, this.data.inputs, hdKeyPair);
            signers.forEach((signer) => this.signInput(inputIndex, signer, sighashTypes));
            return this;
          }
          signInputHDAsync(inputIndex, hdKeyPair, sighashTypes = [transaction_1.Transaction.SIGHASH_ALL]) {
            return new Promise((resolve, reject) => {
              if (!hdKeyPair || !hdKeyPair.publicKey || !hdKeyPair.fingerprint) {
                return reject(new Error("Need HDSigner to sign input"));
              }
              const signers = getSignersFromHD(inputIndex, this.data.inputs, hdKeyPair);
              const promises = signers.map((signer) => this.signInputAsync(inputIndex, signer, sighashTypes));
              return Promise.all(promises).then(() => {
                resolve();
              }).catch(reject);
            });
          }
          signAllInputs(keyPair2, sighashTypes = [transaction_1.Transaction.SIGHASH_ALL]) {
            if (!keyPair2 || !keyPair2.publicKey)
              throw new Error("Need Signer to sign input");
            const results = [];
            for (const i2 of range(this.data.inputs.length)) {
              try {
                this.signInput(i2, keyPair2, sighashTypes);
                results.push(true);
              } catch (err) {
                results.push(false);
              }
            }
            if (results.every((v2) => v2 === false)) {
              throw new Error("No inputs were signed");
            }
            return this;
          }
          signAllInputsAsync(keyPair2, sighashTypes = [transaction_1.Transaction.SIGHASH_ALL]) {
            return new Promise((resolve, reject) => {
              if (!keyPair2 || !keyPair2.publicKey)
                return reject(new Error("Need Signer to sign input"));
              const results = [];
              const promises = [];
              for (const [i2] of this.data.inputs.entries()) {
                promises.push(this.signInputAsync(i2, keyPair2, sighashTypes).then(() => {
                  results.push(true);
                }, () => {
                  results.push(false);
                }));
              }
              return Promise.all(promises).then(() => {
                if (results.every((v2) => v2 === false)) {
                  return reject(new Error("No inputs were signed"));
                }
                resolve();
              });
            });
          }
          signInput(inputIndex, keyPair2, sighashTypes = [transaction_1.Transaction.SIGHASH_ALL]) {
            if (!keyPair2 || !keyPair2.publicKey)
              throw new Error("Need Signer to sign input");
            const { hash: hash2, sighashType } = getHashAndSighashType(this.data.inputs, inputIndex, keyPair2.publicKey, this.__CACHE, sighashTypes);
            const partialSig = [
              {
                pubkey: keyPair2.publicKey,
                signature: bscript.signature.encode(keyPair2.sign(hash2), sighashType)
              }
            ];
            this.data.updateInput(inputIndex, { partialSig });
            return this;
          }
          signInputAsync(inputIndex, keyPair2, sighashTypes = [transaction_1.Transaction.SIGHASH_ALL]) {
            return Promise.resolve().then(() => {
              if (!keyPair2 || !keyPair2.publicKey)
                throw new Error("Need Signer to sign input");
              const { hash: hash2, sighashType } = getHashAndSighashType(this.data.inputs, inputIndex, keyPair2.publicKey, this.__CACHE, sighashTypes);
              return Promise.resolve(keyPair2.sign(hash2)).then((signature) => {
                const partialSig = [
                  {
                    pubkey: keyPair2.publicKey,
                    signature: bscript.signature.encode(signature, sighashType)
                  }
                ];
                this.data.updateInput(inputIndex, { partialSig });
              });
            });
          }
          toBuffer() {
            checkCache(this.__CACHE);
            return this.data.toBuffer();
          }
          toHex() {
            checkCache(this.__CACHE);
            return this.data.toHex();
          }
          toBase64() {
            checkCache(this.__CACHE);
            return this.data.toBase64();
          }
          updateGlobal(updateData) {
            this.data.updateGlobal(updateData);
            return this;
          }
          updateInput(inputIndex, updateData) {
            if (updateData.witnessScript)
              checkInvalidP2WSH(updateData.witnessScript);
            this.data.updateInput(inputIndex, updateData);
            if (updateData.nonWitnessUtxo) {
              addNonWitnessTxCache(this.__CACHE, this.data.inputs[inputIndex], inputIndex);
            }
            return this;
          }
          updateOutput(outputIndex, updateData) {
            this.data.updateOutput(outputIndex, updateData);
            return this;
          }
          addUnknownKeyValToGlobal(keyVal) {
            this.data.addUnknownKeyValToGlobal(keyVal);
            return this;
          }
          addUnknownKeyValToInput(inputIndex, keyVal) {
            this.data.addUnknownKeyValToInput(inputIndex, keyVal);
            return this;
          }
          addUnknownKeyValToOutput(outputIndex, keyVal) {
            this.data.addUnknownKeyValToOutput(outputIndex, keyVal);
            return this;
          }
          clearFinalizedInput(inputIndex) {
            this.data.clearFinalizedInput(inputIndex);
            return this;
          }
        }
        exports2.Psbt = Psbt;
        const transactionFromBuffer = (buffer2) => new PsbtTransaction(buffer2);
        class PsbtTransaction {
          constructor(buffer2 = Buffer2.from([2, 0, 0, 0, 0, 0, 0, 0, 0, 0])) {
            this.tx = transaction_1.Transaction.fromBuffer(buffer2);
            checkTxEmpty(this.tx);
            Object.defineProperty(this, "tx", {
              enumerable: false,
              writable: true
            });
          }
          getInputOutputCounts() {
            return {
              inputCount: this.tx.ins.length,
              outputCount: this.tx.outs.length
            };
          }
          addInput(input) {
            if (input.hash === void 0 || input.index === void 0 || !Buffer2.isBuffer(input.hash) && typeof input.hash !== "string" || typeof input.index !== "number") {
              throw new Error("Error adding input.");
            }
            const hash2 = typeof input.hash === "string" ? bufferutils_1.reverseBuffer(Buffer2.from(input.hash, "hex")) : input.hash;
            this.tx.addInput(hash2, input.index, input.sequence);
          }
          addOutput(output) {
            if (output.script === void 0 || output.value === void 0 || !Buffer2.isBuffer(output.script) || typeof output.value !== "number") {
              throw new Error("Error adding output.");
            }
            this.tx.addOutput(output.script, output.value);
          }
          toBuffer() {
            return this.tx.toBuffer();
          }
        }
        function canFinalize(input, script, scriptType) {
          switch (scriptType) {
            case "pubkey":
            case "pubkeyhash":
            case "witnesspubkeyhash":
              return hasSigs(1, input.partialSig);
            case "multisig":
              const p2ms = payments.p2ms({ output: script });
              return hasSigs(p2ms.m, input.partialSig, p2ms.pubkeys);
            default:
              return false;
          }
        }
        function checkCache(cache) {
          if (cache.__UNSAFE_SIGN_NONSEGWIT !== false) {
            throw new Error("Not BIP174 compliant, can not export");
          }
        }
        function hasSigs(neededSigs, partialSig, pubkeys) {
          if (!partialSig)
            return false;
          let sigs;
          if (pubkeys) {
            sigs = pubkeys.map((pkey) => {
              const pubkey = ecpair_1.fromPublicKey(pkey, { compressed: true }).publicKey;
              return partialSig.find((pSig) => pSig.pubkey.equals(pubkey));
            }).filter((v2) => !!v2);
          } else {
            sigs = partialSig;
          }
          if (sigs.length > neededSigs)
            throw new Error("Too many signatures");
          return sigs.length === neededSigs;
        }
        function isFinalized(input) {
          return !!input.finalScriptSig || !!input.finalScriptWitness;
        }
        function isPaymentFactory(payment) {
          return (script) => {
            try {
              payment({ output: script });
              return true;
            } catch (err) {
              return false;
            }
          };
        }
        const isP2MS = isPaymentFactory(payments.p2ms);
        const isP2PK = isPaymentFactory(payments.p2pk);
        const isP2PKH = isPaymentFactory(payments.p2pkh);
        const isP2WPKH = isPaymentFactory(payments.p2wpkh);
        const isP2WSHScript = isPaymentFactory(payments.p2wsh);
        const isP2SHScript = isPaymentFactory(payments.p2sh);
        function bip32DerivationIsMine(root) {
          return (d) => {
            if (!d.masterFingerprint.equals(root.fingerprint))
              return false;
            if (!root.derivePath(d.path).publicKey.equals(d.pubkey))
              return false;
            return true;
          };
        }
        function check32Bit(num) {
          if (typeof num !== "number" || num !== Math.floor(num) || num > 4294967295 || num < 0) {
            throw new Error("Invalid 32 bit integer");
          }
        }
        function checkFees(psbt, cache, opts) {
          const feeRate = cache.__FEE_RATE || psbt.getFeeRate();
          const vsize = cache.__EXTRACTED_TX.virtualSize();
          const satoshis = feeRate * vsize;
          if (feeRate >= opts.maximumFeeRate) {
            throw new Error(`Warning: You are paying around ${(satoshis / 1e8).toFixed(8)} in fees, which is ${feeRate} satoshi per byte for a transaction with a VSize of ${vsize} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`);
          }
        }
        function checkInputsForPartialSig(inputs, action) {
          inputs.forEach((input) => {
            let throws = false;
            let pSigs = [];
            if ((input.partialSig || []).length === 0) {
              if (!input.finalScriptSig && !input.finalScriptWitness)
                return;
              pSigs = getPsigsFromInputFinalScripts(input);
            } else {
              pSigs = input.partialSig;
            }
            pSigs.forEach((pSig) => {
              const { hashType } = bscript.signature.decode(pSig.signature);
              const whitelist = [];
              const isAnyoneCanPay = hashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY;
              if (isAnyoneCanPay)
                whitelist.push("addInput");
              const hashMod = hashType & 31;
              switch (hashMod) {
                case transaction_1.Transaction.SIGHASH_ALL:
                  break;
                case transaction_1.Transaction.SIGHASH_SINGLE:
                case transaction_1.Transaction.SIGHASH_NONE:
                  whitelist.push("addOutput");
                  whitelist.push("setInputSequence");
                  break;
              }
              if (whitelist.indexOf(action) === -1) {
                throws = true;
              }
            });
            if (throws) {
              throw new Error("Can not modify transaction, signatures exist.");
            }
          });
        }
        function checkPartialSigSighashes(input) {
          if (!input.sighashType || !input.partialSig)
            return;
          const { partialSig, sighashType } = input;
          partialSig.forEach((pSig) => {
            const { hashType } = bscript.signature.decode(pSig.signature);
            if (sighashType !== hashType) {
              throw new Error("Signature sighash does not match input sighash type");
            }
          });
        }
        function checkScriptForPubkey(pubkey, script, action) {
          if (!pubkeyInScript(pubkey, script)) {
            throw new Error(`Can not ${action} for this input with the key ${pubkey.toString("hex")}`);
          }
        }
        function checkTxEmpty(tx) {
          const isEmpty = tx.ins.every((input) => input.script && input.script.length === 0 && input.witness && input.witness.length === 0);
          if (!isEmpty) {
            throw new Error("Format Error: Transaction ScriptSigs are not empty");
          }
        }
        function checkTxForDupeIns(tx, cache) {
          tx.ins.forEach((input) => {
            checkTxInputCache(cache, input);
          });
        }
        function checkTxInputCache(cache, input) {
          const key = bufferutils_1.reverseBuffer(Buffer2.from(input.hash)).toString("hex") + ":" + input.index;
          if (cache.__TX_IN_CACHE[key])
            throw new Error("Duplicate input detected.");
          cache.__TX_IN_CACHE[key] = 1;
        }
        function scriptCheckerFactory(payment, paymentScriptName) {
          return (inputIndex, scriptPubKey, redeemScript, ioType) => {
            const redeemScriptOutput = payment({
              redeem: { output: redeemScript }
            }).output;
            if (!scriptPubKey.equals(redeemScriptOutput)) {
              throw new Error(`${paymentScriptName} for ${ioType} #${inputIndex} doesn't match the scriptPubKey in the prevout`);
            }
          };
        }
        const checkRedeemScript = scriptCheckerFactory(payments.p2sh, "Redeem script");
        const checkWitnessScript = scriptCheckerFactory(payments.p2wsh, "Witness script");
        function getTxCacheValue(key, name, inputs, c) {
          if (!inputs.every(isFinalized))
            throw new Error(`PSBT must be finalized to calculate ${name}`);
          if (key === "__FEE_RATE" && c.__FEE_RATE)
            return c.__FEE_RATE;
          if (key === "__FEE" && c.__FEE)
            return c.__FEE;
          let tx;
          let mustFinalize = true;
          if (c.__EXTRACTED_TX) {
            tx = c.__EXTRACTED_TX;
            mustFinalize = false;
          } else {
            tx = c.__TX.clone();
          }
          inputFinalizeGetAmts(inputs, tx, c, mustFinalize);
          if (key === "__FEE_RATE")
            return c.__FEE_RATE;
          else if (key === "__FEE")
            return c.__FEE;
        }
        function getFinalScripts(inputIndex, input, script, isSegwit, isP2SH, isP2WSH) {
          const scriptType = classifyScript(script);
          if (!canFinalize(input, script, scriptType))
            throw new Error(`Can not finalize input #${inputIndex}`);
          return prepareFinalScripts(script, scriptType, input.partialSig, isSegwit, isP2SH, isP2WSH);
        }
        function prepareFinalScripts(script, scriptType, partialSig, isSegwit, isP2SH, isP2WSH) {
          let finalScriptSig;
          let finalScriptWitness;
          const payment = getPayment(script, scriptType, partialSig);
          const p2wsh = !isP2WSH ? null : payments.p2wsh({ redeem: payment });
          const p2sh = !isP2SH ? null : payments.p2sh({ redeem: p2wsh || payment });
          if (isSegwit) {
            if (p2wsh) {
              finalScriptWitness = witnessStackToScriptWitness(p2wsh.witness);
            } else {
              finalScriptWitness = witnessStackToScriptWitness(payment.witness);
            }
            if (p2sh) {
              finalScriptSig = p2sh.input;
            }
          } else {
            if (p2sh) {
              finalScriptSig = p2sh.input;
            } else {
              finalScriptSig = payment.input;
            }
          }
          return {
            finalScriptSig,
            finalScriptWitness
          };
        }
        function getHashAndSighashType(inputs, inputIndex, pubkey, cache, sighashTypes) {
          const input = utils_1.checkForInput(inputs, inputIndex);
          const { hash: hash2, sighashType, script } = getHashForSig(inputIndex, input, cache, false, sighashTypes);
          checkScriptForPubkey(pubkey, script, "sign");
          return {
            hash: hash2,
            sighashType
          };
        }
        function getHashForSig(inputIndex, input, cache, forValidate, sighashTypes) {
          const unsignedTx = cache.__TX;
          const sighashType = input.sighashType || transaction_1.Transaction.SIGHASH_ALL;
          if (sighashTypes && sighashTypes.indexOf(sighashType) < 0) {
            const str = sighashTypeToString(sighashType);
            throw new Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${str}`);
          }
          let hash2;
          let prevout;
          if (input.nonWitnessUtxo) {
            const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(cache, input, inputIndex);
            const prevoutHash = unsignedTx.ins[inputIndex].hash;
            const utxoHash = nonWitnessUtxoTx.getHash();
            if (!prevoutHash.equals(utxoHash)) {
              throw new Error(`Non-witness UTXO hash for input #${inputIndex} doesn't match the hash specified in the prevout`);
            }
            const prevoutIndex = unsignedTx.ins[inputIndex].index;
            prevout = nonWitnessUtxoTx.outs[prevoutIndex];
          } else if (input.witnessUtxo) {
            prevout = input.witnessUtxo;
          } else {
            throw new Error("Need a Utxo input item for signing");
          }
          const { meaningfulScript, type } = getMeaningfulScript(prevout.script, inputIndex, "input", input.redeemScript, input.witnessScript);
          if (["p2sh-p2wsh", "p2wsh"].indexOf(type) >= 0) {
            hash2 = unsignedTx.hashForWitnessV0(inputIndex, meaningfulScript, prevout.value, sighashType);
          } else if (isP2WPKH(meaningfulScript)) {
            const signingScript = payments.p2pkh({ hash: meaningfulScript.slice(2) }).output;
            hash2 = unsignedTx.hashForWitnessV0(inputIndex, signingScript, prevout.value, sighashType);
          } else {
            if (input.nonWitnessUtxo === void 0 && cache.__UNSAFE_SIGN_NONSEGWIT === false)
              throw new Error(`Input #${inputIndex} has witnessUtxo but non-segwit script: ${meaningfulScript.toString("hex")}`);
            if (!forValidate && cache.__UNSAFE_SIGN_NONSEGWIT !== false)
              console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as the old TransactionBuilder class when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************");
            hash2 = unsignedTx.hashForSignature(inputIndex, meaningfulScript, sighashType);
          }
          return {
            script: meaningfulScript,
            sighashType,
            hash: hash2
          };
        }
        function getPayment(script, scriptType, partialSig) {
          let payment;
          switch (scriptType) {
            case "multisig":
              const sigs = getSortedSigs(script, partialSig);
              payment = payments.p2ms({
                output: script,
                signatures: sigs
              });
              break;
            case "pubkey":
              payment = payments.p2pk({
                output: script,
                signature: partialSig[0].signature
              });
              break;
            case "pubkeyhash":
              payment = payments.p2pkh({
                output: script,
                pubkey: partialSig[0].pubkey,
                signature: partialSig[0].signature
              });
              break;
            case "witnesspubkeyhash":
              payment = payments.p2wpkh({
                output: script,
                pubkey: partialSig[0].pubkey,
                signature: partialSig[0].signature
              });
              break;
          }
          return payment;
        }
        function getPsigsFromInputFinalScripts(input) {
          const scriptItems = !input.finalScriptSig ? [] : bscript.decompile(input.finalScriptSig) || [];
          const witnessItems = !input.finalScriptWitness ? [] : bscript.decompile(input.finalScriptWitness) || [];
          return scriptItems.concat(witnessItems).filter((item) => {
            return Buffer2.isBuffer(item) && bscript.isCanonicalScriptSignature(item);
          }).map((sig) => ({ signature: sig }));
        }
        function getScriptFromInput(inputIndex, input, cache) {
          const unsignedTx = cache.__TX;
          const res = {
            script: null,
            isSegwit: false,
            isP2SH: false,
            isP2WSH: false
          };
          res.isP2SH = !!input.redeemScript;
          res.isP2WSH = !!input.witnessScript;
          if (input.witnessScript) {
            res.script = input.witnessScript;
          } else if (input.redeemScript) {
            res.script = input.redeemScript;
          } else {
            if (input.nonWitnessUtxo) {
              const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(cache, input, inputIndex);
              const prevoutIndex = unsignedTx.ins[inputIndex].index;
              res.script = nonWitnessUtxoTx.outs[prevoutIndex].script;
            } else if (input.witnessUtxo) {
              res.script = input.witnessUtxo.script;
            }
          }
          if (input.witnessScript || isP2WPKH(res.script)) {
            res.isSegwit = true;
          }
          return res;
        }
        function getSignersFromHD(inputIndex, inputs, hdKeyPair) {
          const input = utils_1.checkForInput(inputs, inputIndex);
          if (!input.bip32Derivation || input.bip32Derivation.length === 0) {
            throw new Error("Need bip32Derivation to sign with HD");
          }
          const myDerivations = input.bip32Derivation.map((bipDv) => {
            if (bipDv.masterFingerprint.equals(hdKeyPair.fingerprint)) {
              return bipDv;
            } else {
              return;
            }
          }).filter((v2) => !!v2);
          if (myDerivations.length === 0) {
            throw new Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");
          }
          const signers = myDerivations.map((bipDv) => {
            const node = hdKeyPair.derivePath(bipDv.path);
            if (!bipDv.pubkey.equals(node.publicKey)) {
              throw new Error("pubkey did not match bip32Derivation");
            }
            return node;
          });
          return signers;
        }
        function getSortedSigs(script, partialSig) {
          const p2ms = payments.p2ms({ output: script });
          return p2ms.pubkeys.map((pk) => {
            return (partialSig.filter((ps) => {
              return ps.pubkey.equals(pk);
            })[0] || {}).signature;
          }).filter((v2) => !!v2);
        }
        function scriptWitnessToWitnessStack(buffer2) {
          let offset = 0;
          function readSlice(n) {
            offset += n;
            return buffer2.slice(offset - n, offset);
          }
          function readVarInt() {
            const vi = varuint.decode(buffer2, offset);
            offset += varuint.decode.bytes;
            return vi;
          }
          function readVarSlice() {
            return readSlice(readVarInt());
          }
          function readVector() {
            const count = readVarInt();
            const vector = [];
            for (let i2 = 0; i2 < count; i2++)
              vector.push(readVarSlice());
            return vector;
          }
          return readVector();
        }
        function sighashTypeToString(sighashType) {
          let text2 = sighashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY ? "SIGHASH_ANYONECANPAY | " : "";
          const sigMod = sighashType & 31;
          switch (sigMod) {
            case transaction_1.Transaction.SIGHASH_ALL:
              text2 += "SIGHASH_ALL";
              break;
            case transaction_1.Transaction.SIGHASH_SINGLE:
              text2 += "SIGHASH_SINGLE";
              break;
            case transaction_1.Transaction.SIGHASH_NONE:
              text2 += "SIGHASH_NONE";
              break;
          }
          return text2;
        }
        function witnessStackToScriptWitness(witness) {
          let buffer2 = Buffer2.allocUnsafe(0);
          function writeSlice(slice) {
            buffer2 = Buffer2.concat([buffer2, Buffer2.from(slice)]);
          }
          function writeVarInt(i2) {
            const currentLen = buffer2.length;
            const varintLen = varuint.encodingLength(i2);
            buffer2 = Buffer2.concat([buffer2, Buffer2.allocUnsafe(varintLen)]);
            varuint.encode(i2, buffer2, currentLen);
          }
          function writeVarSlice(slice) {
            writeVarInt(slice.length);
            writeSlice(slice);
          }
          function writeVector(vector) {
            writeVarInt(vector.length);
            vector.forEach(writeVarSlice);
          }
          writeVector(witness);
          return buffer2;
        }
        function addNonWitnessTxCache(cache, input, inputIndex) {
          cache.__NON_WITNESS_UTXO_BUF_CACHE[inputIndex] = input.nonWitnessUtxo;
          const tx = transaction_1.Transaction.fromBuffer(input.nonWitnessUtxo);
          cache.__NON_WITNESS_UTXO_TX_CACHE[inputIndex] = tx;
          const self2 = cache;
          const selfIndex = inputIndex;
          delete input.nonWitnessUtxo;
          Object.defineProperty(input, "nonWitnessUtxo", {
            enumerable: true,
            get() {
              const buf = self2.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex];
              const txCache = self2.__NON_WITNESS_UTXO_TX_CACHE[selfIndex];
              if (buf !== void 0) {
                return buf;
              } else {
                const newBuf = txCache.toBuffer();
                self2.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex] = newBuf;
                return newBuf;
              }
            },
            set(data) {
              self2.__NON_WITNESS_UTXO_BUF_CACHE[selfIndex] = data;
            }
          });
        }
        function inputFinalizeGetAmts(inputs, tx, cache, mustFinalize) {
          let inputAmount = 0;
          inputs.forEach((input, idx) => {
            if (mustFinalize && input.finalScriptSig)
              tx.ins[idx].script = input.finalScriptSig;
            if (mustFinalize && input.finalScriptWitness) {
              tx.ins[idx].witness = scriptWitnessToWitnessStack(input.finalScriptWitness);
            }
            if (input.witnessUtxo) {
              inputAmount += input.witnessUtxo.value;
            } else if (input.nonWitnessUtxo) {
              const nwTx = nonWitnessUtxoTxFromCache(cache, input, idx);
              const vout = tx.ins[idx].index;
              const out = nwTx.outs[vout];
              inputAmount += out.value;
            }
          });
          const outputAmount = tx.outs.reduce((total, o) => total + o.value, 0);
          const fee = inputAmount - outputAmount;
          if (fee < 0) {
            throw new Error("Outputs are spending more than Inputs");
          }
          const bytes = tx.virtualSize();
          cache.__FEE = fee;
          cache.__EXTRACTED_TX = tx;
          cache.__FEE_RATE = Math.floor(fee / bytes);
        }
        function nonWitnessUtxoTxFromCache(cache, input, inputIndex) {
          const c = cache.__NON_WITNESS_UTXO_TX_CACHE;
          if (!c[inputIndex]) {
            addNonWitnessTxCache(cache, input, inputIndex);
          }
          return c[inputIndex];
        }
        function getScriptFromUtxo(inputIndex, input, cache) {
          if (input.witnessUtxo !== void 0) {
            return input.witnessUtxo.script;
          } else if (input.nonWitnessUtxo !== void 0) {
            const nonWitnessUtxoTx = nonWitnessUtxoTxFromCache(cache, input, inputIndex);
            return nonWitnessUtxoTx.outs[cache.__TX.ins[inputIndex].index].script;
          } else {
            throw new Error("Can't find pubkey in input without Utxo data");
          }
        }
        function pubkeyInInput(pubkey, input, inputIndex, cache) {
          const script = getScriptFromUtxo(inputIndex, input, cache);
          const { meaningfulScript } = getMeaningfulScript(script, inputIndex, "input", input.redeemScript, input.witnessScript);
          return pubkeyInScript(pubkey, meaningfulScript);
        }
        function pubkeyInOutput(pubkey, output, outputIndex, cache) {
          const script = cache.__TX.outs[outputIndex].script;
          const { meaningfulScript } = getMeaningfulScript(script, outputIndex, "output", output.redeemScript, output.witnessScript);
          return pubkeyInScript(pubkey, meaningfulScript);
        }
        function redeemFromFinalScriptSig(finalScript) {
          if (!finalScript)
            return;
          const decomp = bscript.decompile(finalScript);
          if (!decomp)
            return;
          const lastItem = decomp[decomp.length - 1];
          if (!Buffer2.isBuffer(lastItem) || isPubkeyLike(lastItem) || isSigLike(lastItem))
            return;
          const sDecomp = bscript.decompile(lastItem);
          if (!sDecomp)
            return;
          return lastItem;
        }
        function redeemFromFinalWitnessScript(finalScript) {
          if (!finalScript)
            return;
          const decomp = scriptWitnessToWitnessStack(finalScript);
          const lastItem = decomp[decomp.length - 1];
          if (isPubkeyLike(lastItem))
            return;
          const sDecomp = bscript.decompile(lastItem);
          if (!sDecomp)
            return;
          return lastItem;
        }
        function isPubkeyLike(buf) {
          return buf.length === 33 && bscript.isCanonicalPubKey(buf);
        }
        function isSigLike(buf) {
          return bscript.isCanonicalScriptSignature(buf);
        }
        function getMeaningfulScript(script, index, ioType, redeemScript, witnessScript) {
          const isP2SH = isP2SHScript(script);
          const isP2SHP2WSH = isP2SH && redeemScript && isP2WSHScript(redeemScript);
          const isP2WSH = isP2WSHScript(script);
          if (isP2SH && redeemScript === void 0)
            throw new Error("scriptPubkey is P2SH but redeemScript missing");
          if ((isP2WSH || isP2SHP2WSH) && witnessScript === void 0)
            throw new Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");
          let meaningfulScript;
          if (isP2SHP2WSH) {
            meaningfulScript = witnessScript;
            checkRedeemScript(index, script, redeemScript, ioType);
            checkWitnessScript(index, redeemScript, witnessScript, ioType);
            checkInvalidP2WSH(meaningfulScript);
          } else if (isP2WSH) {
            meaningfulScript = witnessScript;
            checkWitnessScript(index, script, witnessScript, ioType);
            checkInvalidP2WSH(meaningfulScript);
          } else if (isP2SH) {
            meaningfulScript = redeemScript;
            checkRedeemScript(index, script, redeemScript, ioType);
          } else {
            meaningfulScript = script;
          }
          return {
            meaningfulScript,
            type: isP2SHP2WSH ? "p2sh-p2wsh" : isP2SH ? "p2sh" : isP2WSH ? "p2wsh" : "raw"
          };
        }
        function checkInvalidP2WSH(script) {
          if (isP2WPKH(script) || isP2SHScript(script)) {
            throw new Error("P2WPKH or P2SH can not be contained within P2WSH");
          }
        }
        function pubkeyInScript(pubkey, script) {
          const pubkeyHash = crypto_1.hash160(pubkey);
          const decompiled = bscript.decompile(script);
          if (decompiled === null)
            throw new Error("Unknown script error");
          return decompiled.some((element2) => {
            if (typeof element2 === "number")
              return false;
            return element2.equals(pubkey) || element2.equals(pubkeyHash);
          });
        }
        function classifyScript(script) {
          if (isP2WPKH(script))
            return "witnesspubkeyhash";
          if (isP2PKH(script))
            return "pubkeyhash";
          if (isP2MS(script))
            return "multisig";
          if (isP2PK(script))
            return "pubkey";
          return "nonstandard";
        }
        function range(n) {
          return [...Array(n).keys()];
        }
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "./address": 33, "./bufferutils": 35, "./crypto": 37, "./ecpair": 38, "./networks": 40, "./payments": 42, "./script": 51, "./transaction": 75, "bip174": 24, "bip174/src/lib/converter/varint": 20, "bip174/src/lib/utils": 26, "buffer": 83 }], 51: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const scriptNumber = require2("./script_number");
        const scriptSignature = require2("./script_signature");
        const types = require2("./types");
        const bip66 = require2("bip66");
        const ecc = require2("tiny-secp256k1");
        const pushdata = require2("pushdata-bitcoin");
        const typeforce = require2("typeforce");
        exports2.OPS = require2("bitcoin-ops");
        const REVERSE_OPS = require2("bitcoin-ops/map");
        const OP_INT_BASE = exports2.OPS.OP_RESERVED;
        function isOPInt(value) {
          return types.Number(value) && (value === exports2.OPS.OP_0 || value >= exports2.OPS.OP_1 && value <= exports2.OPS.OP_16 || value === exports2.OPS.OP_1NEGATE);
        }
        function isPushOnlyChunk(value) {
          return types.Buffer(value) || isOPInt(value);
        }
        function isPushOnly(value) {
          return types.Array(value) && value.every(isPushOnlyChunk);
        }
        exports2.isPushOnly = isPushOnly;
        function asMinimalOP(buffer2) {
          if (buffer2.length === 0)
            return exports2.OPS.OP_0;
          if (buffer2.length !== 1)
            return;
          if (buffer2[0] >= 1 && buffer2[0] <= 16)
            return OP_INT_BASE + buffer2[0];
          if (buffer2[0] === 129)
            return exports2.OPS.OP_1NEGATE;
        }
        function chunksIsBuffer(buf) {
          return Buffer2.isBuffer(buf);
        }
        function chunksIsArray(buf) {
          return types.Array(buf);
        }
        function singleChunkIsBuffer(buf) {
          return Buffer2.isBuffer(buf);
        }
        function compile(chunks) {
          if (chunksIsBuffer(chunks))
            return chunks;
          typeforce(types.Array, chunks);
          const bufferSize = chunks.reduce((accum, chunk) => {
            if (singleChunkIsBuffer(chunk)) {
              if (chunk.length === 1 && asMinimalOP(chunk) !== void 0) {
                return accum + 1;
              }
              return accum + pushdata.encodingLength(chunk.length) + chunk.length;
            }
            return accum + 1;
          }, 0);
          const buffer2 = Buffer2.allocUnsafe(bufferSize);
          let offset = 0;
          chunks.forEach((chunk) => {
            if (singleChunkIsBuffer(chunk)) {
              const opcode = asMinimalOP(chunk);
              if (opcode !== void 0) {
                buffer2.writeUInt8(opcode, offset);
                offset += 1;
                return;
              }
              offset += pushdata.encode(buffer2, chunk.length, offset);
              chunk.copy(buffer2, offset);
              offset += chunk.length;
            } else {
              buffer2.writeUInt8(chunk, offset);
              offset += 1;
            }
          });
          if (offset !== buffer2.length)
            throw new Error("Could not decode chunks");
          return buffer2;
        }
        exports2.compile = compile;
        function decompile(buffer2) {
          if (chunksIsArray(buffer2))
            return buffer2;
          typeforce(types.Buffer, buffer2);
          const chunks = [];
          let i2 = 0;
          while (i2 < buffer2.length) {
            const opcode = buffer2[i2];
            if (opcode > exports2.OPS.OP_0 && opcode <= exports2.OPS.OP_PUSHDATA4) {
              const d = pushdata.decode(buffer2, i2);
              if (d === null)
                return null;
              i2 += d.size;
              if (i2 + d.number > buffer2.length)
                return null;
              const data = buffer2.slice(i2, i2 + d.number);
              i2 += d.number;
              const op = asMinimalOP(data);
              if (op !== void 0) {
                chunks.push(op);
              } else {
                chunks.push(data);
              }
            } else {
              chunks.push(opcode);
              i2 += 1;
            }
          }
          return chunks;
        }
        exports2.decompile = decompile;
        function toASM(chunks) {
          if (chunksIsBuffer(chunks)) {
            chunks = decompile(chunks);
          }
          return chunks.map((chunk) => {
            if (singleChunkIsBuffer(chunk)) {
              const op = asMinimalOP(chunk);
              if (op === void 0)
                return chunk.toString("hex");
              chunk = op;
            }
            return REVERSE_OPS[chunk];
          }).join(" ");
        }
        exports2.toASM = toASM;
        function fromASM(asm) {
          typeforce(types.String, asm);
          return compile(asm.split(" ").map((chunkStr) => {
            if (exports2.OPS[chunkStr] !== void 0)
              return exports2.OPS[chunkStr];
            typeforce(types.Hex, chunkStr);
            return Buffer2.from(chunkStr, "hex");
          }));
        }
        exports2.fromASM = fromASM;
        function toStack(chunks) {
          chunks = decompile(chunks);
          typeforce(isPushOnly, chunks);
          return chunks.map((op) => {
            if (singleChunkIsBuffer(op))
              return op;
            if (op === exports2.OPS.OP_0)
              return Buffer2.allocUnsafe(0);
            return scriptNumber.encode(op - OP_INT_BASE);
          });
        }
        exports2.toStack = toStack;
        function isCanonicalPubKey(buffer2) {
          return ecc.isPoint(buffer2);
        }
        exports2.isCanonicalPubKey = isCanonicalPubKey;
        function isDefinedHashType(hashType) {
          const hashTypeMod = hashType & ~128;
          return hashTypeMod > 0 && hashTypeMod < 4;
        }
        exports2.isDefinedHashType = isDefinedHashType;
        function isCanonicalScriptSignature(buffer2) {
          if (!Buffer2.isBuffer(buffer2))
            return false;
          if (!isDefinedHashType(buffer2[buffer2.length - 1]))
            return false;
          return bip66.check(buffer2.slice(0, -1));
        }
        exports2.isCanonicalScriptSignature = isCanonicalScriptSignature;
        exports2.number = scriptNumber;
        exports2.signature = scriptSignature;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "./script_number": 52, "./script_signature": 53, "./types": 77, "bip66": 30, "bitcoin-ops": 31, "bitcoin-ops/map": 32, "buffer": 83, "pushdata-bitcoin": 144, "tiny-secp256k1": 172, "typeforce": 177 }], 52: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        function decode(buffer2, maxLength, minimal) {
          maxLength = maxLength || 4;
          minimal = minimal === void 0 ? true : minimal;
          const length = buffer2.length;
          if (length === 0)
            return 0;
          if (length > maxLength)
            throw new TypeError("Script number overflow");
          if (minimal) {
            if ((buffer2[length - 1] & 127) === 0) {
              if (length <= 1 || (buffer2[length - 2] & 128) === 0)
                throw new Error("Non-minimally encoded script number");
            }
          }
          if (length === 5) {
            const a = buffer2.readUInt32LE(0);
            const b = buffer2.readUInt8(4);
            if (b & 128)
              return -((b & ~128) * 4294967296 + a);
            return b * 4294967296 + a;
          }
          let result = 0;
          for (let i2 = 0; i2 < length; ++i2) {
            result |= buffer2[i2] << 8 * i2;
          }
          if (buffer2[length - 1] & 128)
            return -(result & ~(128 << 8 * (length - 1)));
          return result;
        }
        exports2.decode = decode;
        function scriptNumSize(i2) {
          return i2 > 2147483647 ? 5 : i2 > 8388607 ? 4 : i2 > 32767 ? 3 : i2 > 127 ? 2 : i2 > 0 ? 1 : 0;
        }
        function encode(_number) {
          let value = Math.abs(_number);
          const size = scriptNumSize(value);
          const buffer2 = Buffer2.allocUnsafe(size);
          const negative = _number < 0;
          for (let i2 = 0; i2 < size; ++i2) {
            buffer2.writeUInt8(value & 255, i2);
            value >>= 8;
          }
          if (buffer2[size - 1] & 128) {
            buffer2.writeUInt8(negative ? 128 : 0, size - 1);
          } else if (negative) {
            buffer2[size - 1] |= 128;
          }
          return buffer2;
        }
        exports2.encode = encode;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "buffer": 83 }], 53: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const types = require2("./types");
        const bip66 = require2("bip66");
        const typeforce = require2("typeforce");
        const ZERO = Buffer2.alloc(1, 0);
        function toDER(x) {
          let i2 = 0;
          while (x[i2] === 0)
            ++i2;
          if (i2 === x.length)
            return ZERO;
          x = x.slice(i2);
          if (x[0] & 128)
            return Buffer2.concat([ZERO, x], 1 + x.length);
          return x;
        }
        function fromDER(x) {
          if (x[0] === 0)
            x = x.slice(1);
          const buffer2 = Buffer2.alloc(32, 0);
          const bstart = Math.max(0, 32 - x.length);
          x.copy(buffer2, bstart);
          return buffer2;
        }
        function decode(buffer2) {
          const hashType = buffer2.readUInt8(buffer2.length - 1);
          const hashTypeMod = hashType & ~128;
          if (hashTypeMod <= 0 || hashTypeMod >= 4)
            throw new Error("Invalid hashType " + hashType);
          const decoded = bip66.decode(buffer2.slice(0, -1));
          const r = fromDER(decoded.r);
          const s = fromDER(decoded.s);
          const signature = Buffer2.concat([r, s], 64);
          return { signature, hashType };
        }
        exports2.decode = decode;
        function encode(signature, hashType) {
          typeforce({
            signature: types.BufferN(64),
            hashType: types.UInt8
          }, { signature, hashType });
          const hashTypeMod = hashType & ~128;
          if (hashTypeMod <= 0 || hashTypeMod >= 4)
            throw new Error("Invalid hashType " + hashType);
          const hashTypeBuffer = Buffer2.allocUnsafe(1);
          hashTypeBuffer.writeUInt8(hashType, 0);
          const r = toDER(signature.slice(0, 32));
          const s = toDER(signature.slice(32, 64));
          return Buffer2.concat([bip66.encode(r, s), hashTypeBuffer]);
        }
        exports2.encode = encode;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "./types": 77, "bip66": 30, "buffer": 83, "typeforce": 177 }], 54: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const input = require2("./input");
    exports2.input = input;
    const output = require2("./output");
    exports2.output = output;
  }, { "./input": 55, "./output": 56 }], 55: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const bscript = require2("../../script");
    const script_1 = require2("../../script");
    function partialSignature(value) {
      return value === script_1.OPS.OP_0 || bscript.isCanonicalScriptSignature(value);
    }
    function check(script, allowIncomplete) {
      const chunks = bscript.decompile(script);
      if (chunks.length < 2)
        return false;
      if (chunks[0] !== script_1.OPS.OP_0)
        return false;
      if (allowIncomplete) {
        return chunks.slice(1).every(partialSignature);
      }
      return chunks.slice(1).every(bscript.isCanonicalScriptSignature);
    }
    exports2.check = check;
    check.toJSON = () => {
      return "multisig input";
    };
  }, { "../../script": 51 }], 56: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const bscript = require2("../../script");
    const script_1 = require2("../../script");
    const types = require2("../../types");
    const OP_INT_BASE = script_1.OPS.OP_RESERVED;
    function check(script, allowIncomplete) {
      const chunks = bscript.decompile(script);
      if (chunks.length < 4)
        return false;
      if (chunks[chunks.length - 1] !== script_1.OPS.OP_CHECKMULTISIG)
        return false;
      if (!types.Number(chunks[0]))
        return false;
      if (!types.Number(chunks[chunks.length - 2]))
        return false;
      const m = chunks[0] - OP_INT_BASE;
      const n = chunks[chunks.length - 2] - OP_INT_BASE;
      if (m <= 0)
        return false;
      if (n > 16)
        return false;
      if (m > n)
        return false;
      if (n !== chunks.length - 3)
        return false;
      if (allowIncomplete)
        return true;
      const keys2 = chunks.slice(1, -2);
      return keys2.every(bscript.isCanonicalPubKey);
    }
    exports2.check = check;
    check.toJSON = () => {
      return "multi-sig output";
    };
  }, { "../../script": 51, "../../types": 77 }], 57: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const bscript = require2("../script");
    const OPS = bscript.OPS;
    function check(script) {
      const buffer2 = bscript.compile(script);
      return buffer2.length > 1 && buffer2[0] === OPS.OP_RETURN;
    }
    exports2.check = check;
    check.toJSON = () => {
      return "null data output";
    };
    const output = { check };
    exports2.output = output;
  }, { "../script": 51 }], 58: [function(require2, module2, exports2) {
    arguments[4][54][0].apply(exports2, arguments);
  }, { "./input": 59, "./output": 60, "dup": 54 }], 59: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const bscript = require2("../../script");
    function check(script) {
      const chunks = bscript.decompile(script);
      return chunks.length === 1 && bscript.isCanonicalScriptSignature(chunks[0]);
    }
    exports2.check = check;
    check.toJSON = () => {
      return "pubKey input";
    };
  }, { "../../script": 51 }], 60: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const bscript = require2("../../script");
    const script_1 = require2("../../script");
    function check(script) {
      const chunks = bscript.decompile(script);
      return chunks.length === 2 && bscript.isCanonicalPubKey(chunks[0]) && chunks[1] === script_1.OPS.OP_CHECKSIG;
    }
    exports2.check = check;
    check.toJSON = () => {
      return "pubKey output";
    };
  }, { "../../script": 51 }], 61: [function(require2, module2, exports2) {
    arguments[4][54][0].apply(exports2, arguments);
  }, { "./input": 62, "./output": 63, "dup": 54 }], 62: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const bscript = require2("../../script");
    function check(script) {
      const chunks = bscript.decompile(script);
      return chunks.length === 2 && bscript.isCanonicalScriptSignature(chunks[0]) && bscript.isCanonicalPubKey(chunks[1]);
    }
    exports2.check = check;
    check.toJSON = () => {
      return "pubKeyHash input";
    };
  }, { "../../script": 51 }], 63: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const bscript = require2("../../script");
    const script_1 = require2("../../script");
    function check(script) {
      const buffer2 = bscript.compile(script);
      return buffer2.length === 25 && buffer2[0] === script_1.OPS.OP_DUP && buffer2[1] === script_1.OPS.OP_HASH160 && buffer2[2] === 20 && buffer2[23] === script_1.OPS.OP_EQUALVERIFY && buffer2[24] === script_1.OPS.OP_CHECKSIG;
    }
    exports2.check = check;
    check.toJSON = () => {
      return "pubKeyHash output";
    };
  }, { "../../script": 51 }], 64: [function(require2, module2, exports2) {
    arguments[4][54][0].apply(exports2, arguments);
  }, { "./input": 65, "./output": 66, "dup": 54 }], 65: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const bscript = require2("../../script");
        const p2ms = require2("../multisig");
        const p2pk = require2("../pubkey");
        const p2pkh = require2("../pubkeyhash");
        const p2wpkho = require2("../witnesspubkeyhash/output");
        const p2wsho = require2("../witnessscripthash/output");
        function check(script, allowIncomplete) {
          const chunks = bscript.decompile(script);
          if (chunks.length < 1)
            return false;
          const lastChunk = chunks[chunks.length - 1];
          if (!Buffer2.isBuffer(lastChunk))
            return false;
          const scriptSigChunks = bscript.decompile(bscript.compile(chunks.slice(0, -1)));
          const redeemScriptChunks = bscript.decompile(lastChunk);
          if (!redeemScriptChunks)
            return false;
          if (!bscript.isPushOnly(scriptSigChunks))
            return false;
          if (chunks.length === 1) {
            return p2wsho.check(redeemScriptChunks) || p2wpkho.check(redeemScriptChunks);
          }
          if (p2pkh.input.check(scriptSigChunks) && p2pkh.output.check(redeemScriptChunks))
            return true;
          if (p2ms.input.check(scriptSigChunks, allowIncomplete) && p2ms.output.check(redeemScriptChunks))
            return true;
          if (p2pk.input.check(scriptSigChunks) && p2pk.output.check(redeemScriptChunks))
            return true;
          return false;
        }
        exports2.check = check;
        check.toJSON = () => {
          return "scriptHash input";
        };
      }).call(this);
    }).call(this, { "isBuffer": require2("../../../../is-buffer/index.js") });
  }, { "../../../../is-buffer/index.js": 138, "../../script": 51, "../multisig": 54, "../pubkey": 58, "../pubkeyhash": 61, "../witnesspubkeyhash/output": 71, "../witnessscripthash/output": 74 }], 66: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const bscript = require2("../../script");
    const script_1 = require2("../../script");
    function check(script) {
      const buffer2 = bscript.compile(script);
      return buffer2.length === 23 && buffer2[0] === script_1.OPS.OP_HASH160 && buffer2[1] === 20 && buffer2[22] === script_1.OPS.OP_EQUAL;
    }
    exports2.check = check;
    check.toJSON = () => {
      return "scriptHash output";
    };
  }, { "../../script": 51 }], 67: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const output = require2("./output");
    exports2.output = output;
  }, { "./output": 68 }], 68: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const bscript = require2("../../script");
        const script_1 = require2("../../script");
        const types = require2("../../types");
        const typeforce = require2("typeforce");
        const HEADER = Buffer2.from("aa21a9ed", "hex");
        function check(script) {
          const buffer2 = bscript.compile(script);
          return buffer2.length > 37 && buffer2[0] === script_1.OPS.OP_RETURN && buffer2[1] === 36 && buffer2.slice(2, 6).equals(HEADER);
        }
        exports2.check = check;
        check.toJSON = () => {
          return "Witness commitment output";
        };
        function encode(commitment) {
          typeforce(types.Hash256bit, commitment);
          const buffer2 = Buffer2.allocUnsafe(36);
          HEADER.copy(buffer2, 0);
          commitment.copy(buffer2, 4);
          return bscript.compile([script_1.OPS.OP_RETURN, buffer2]);
        }
        exports2.encode = encode;
        function decode(buffer2) {
          typeforce(check, buffer2);
          return bscript.decompile(buffer2)[1].slice(4, 36);
        }
        exports2.decode = decode;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "../../script": 51, "../../types": 77, "buffer": 83, "typeforce": 177 }], 69: [function(require2, module2, exports2) {
    arguments[4][54][0].apply(exports2, arguments);
  }, { "./input": 70, "./output": 71, "dup": 54 }], 70: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const bscript = require2("../../script");
    function isCompressedCanonicalPubKey(pubKey) {
      return bscript.isCanonicalPubKey(pubKey) && pubKey.length === 33;
    }
    function check(script) {
      const chunks = bscript.decompile(script);
      return chunks.length === 2 && bscript.isCanonicalScriptSignature(chunks[0]) && isCompressedCanonicalPubKey(chunks[1]);
    }
    exports2.check = check;
    check.toJSON = () => {
      return "witnessPubKeyHash input";
    };
  }, { "../../script": 51 }], 71: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const bscript = require2("../../script");
    const script_1 = require2("../../script");
    function check(script) {
      const buffer2 = bscript.compile(script);
      return buffer2.length === 22 && buffer2[0] === script_1.OPS.OP_0 && buffer2[1] === 20;
    }
    exports2.check = check;
    check.toJSON = () => {
      return "Witness pubKeyHash output";
    };
  }, { "../../script": 51 }], 72: [function(require2, module2, exports2) {
    arguments[4][54][0].apply(exports2, arguments);
  }, { "./input": 73, "./output": 74, "dup": 54 }], 73: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const bscript = require2("../../script");
        const typeforce = require2("typeforce");
        const p2ms = require2("../multisig");
        const p2pk = require2("../pubkey");
        const p2pkh = require2("../pubkeyhash");
        function check(chunks, allowIncomplete) {
          typeforce(typeforce.Array, chunks);
          if (chunks.length < 1)
            return false;
          const witnessScript = chunks[chunks.length - 1];
          if (!Buffer2.isBuffer(witnessScript))
            return false;
          const witnessScriptChunks = bscript.decompile(witnessScript);
          if (!witnessScriptChunks || witnessScriptChunks.length === 0)
            return false;
          const witnessRawScriptSig = bscript.compile(chunks.slice(0, -1));
          if (p2pkh.input.check(witnessRawScriptSig) && p2pkh.output.check(witnessScriptChunks))
            return true;
          if (p2ms.input.check(witnessRawScriptSig, allowIncomplete) && p2ms.output.check(witnessScriptChunks))
            return true;
          if (p2pk.input.check(witnessRawScriptSig) && p2pk.output.check(witnessScriptChunks))
            return true;
          return false;
        }
        exports2.check = check;
        check.toJSON = () => {
          return "witnessScriptHash input";
        };
      }).call(this);
    }).call(this, { "isBuffer": require2("../../../../is-buffer/index.js") });
  }, { "../../../../is-buffer/index.js": 138, "../../script": 51, "../multisig": 54, "../pubkey": 58, "../pubkeyhash": 61, "typeforce": 177 }], 74: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const bscript = require2("../../script");
    const script_1 = require2("../../script");
    function check(script) {
      const buffer2 = bscript.compile(script);
      return buffer2.length === 34 && buffer2[0] === script_1.OPS.OP_0 && buffer2[1] === 32;
    }
    exports2.check = check;
    check.toJSON = () => {
      return "Witness scriptHash output";
    };
  }, { "../../script": 51 }], 75: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const bufferutils_1 = require2("./bufferutils");
        const bcrypto = require2("./crypto");
        const bscript = require2("./script");
        const script_1 = require2("./script");
        const types = require2("./types");
        const typeforce = require2("typeforce");
        const varuint = require2("varuint-bitcoin");
        function varSliceSize(someScript) {
          const length = someScript.length;
          return varuint.encodingLength(length) + length;
        }
        function vectorSize(someVector) {
          const length = someVector.length;
          return varuint.encodingLength(length) + someVector.reduce((sum, witness) => {
            return sum + varSliceSize(witness);
          }, 0);
        }
        const EMPTY_SCRIPT = Buffer2.allocUnsafe(0);
        const EMPTY_WITNESS = [];
        const ZERO = Buffer2.from("0000000000000000000000000000000000000000000000000000000000000000", "hex");
        const ONE = Buffer2.from("0000000000000000000000000000000000000000000000000000000000000001", "hex");
        const VALUE_UINT64_MAX = Buffer2.from("ffffffffffffffff", "hex");
        const BLANK_OUTPUT = {
          script: EMPTY_SCRIPT,
          valueBuffer: VALUE_UINT64_MAX
        };
        function isOutput(out) {
          return out.value !== void 0;
        }
        class Transaction {
          constructor() {
            this.version = 1;
            this.locktime = 0;
            this.ins = [];
            this.outs = [];
          }
          static fromBuffer(buffer2, _NO_STRICT) {
            const bufferReader = new bufferutils_1.BufferReader(buffer2);
            const tx = new Transaction();
            tx.version = bufferReader.readInt32();
            const marker = bufferReader.readUInt8();
            const flag = bufferReader.readUInt8();
            let hasWitnesses = false;
            if (marker === Transaction.ADVANCED_TRANSACTION_MARKER && flag === Transaction.ADVANCED_TRANSACTION_FLAG) {
              hasWitnesses = true;
            } else {
              bufferReader.offset -= 2;
            }
            const vinLen = bufferReader.readVarInt();
            for (let i2 = 0; i2 < vinLen; ++i2) {
              tx.ins.push({
                hash: bufferReader.readSlice(32),
                index: bufferReader.readUInt32(),
                script: bufferReader.readVarSlice(),
                sequence: bufferReader.readUInt32(),
                witness: EMPTY_WITNESS
              });
            }
            const voutLen = bufferReader.readVarInt();
            for (let i2 = 0; i2 < voutLen; ++i2) {
              tx.outs.push({
                value: bufferReader.readUInt64(),
                script: bufferReader.readVarSlice()
              });
            }
            if (hasWitnesses) {
              for (let i2 = 0; i2 < vinLen; ++i2) {
                tx.ins[i2].witness = bufferReader.readVector();
              }
              if (!tx.hasWitnesses())
                throw new Error("Transaction has superfluous witness data");
            }
            tx.locktime = bufferReader.readUInt32();
            if (_NO_STRICT)
              return tx;
            if (bufferReader.offset !== buffer2.length)
              throw new Error("Transaction has unexpected data");
            return tx;
          }
          static fromHex(hex) {
            return Transaction.fromBuffer(Buffer2.from(hex, "hex"), false);
          }
          static isCoinbaseHash(buffer2) {
            typeforce(types.Hash256bit, buffer2);
            for (let i2 = 0; i2 < 32; ++i2) {
              if (buffer2[i2] !== 0)
                return false;
            }
            return true;
          }
          isCoinbase() {
            return this.ins.length === 1 && Transaction.isCoinbaseHash(this.ins[0].hash);
          }
          addInput(hash2, index, sequence, scriptSig) {
            typeforce(types.tuple(types.Hash256bit, types.UInt32, types.maybe(types.UInt32), types.maybe(types.Buffer)), arguments);
            if (types.Null(sequence)) {
              sequence = Transaction.DEFAULT_SEQUENCE;
            }
            return this.ins.push({
              hash: hash2,
              index,
              script: scriptSig || EMPTY_SCRIPT,
              sequence,
              witness: EMPTY_WITNESS
            }) - 1;
          }
          addOutput(scriptPubKey, value) {
            typeforce(types.tuple(types.Buffer, types.Satoshi), arguments);
            return this.outs.push({
              script: scriptPubKey,
              value
            }) - 1;
          }
          hasWitnesses() {
            return this.ins.some((x) => {
              return x.witness.length !== 0;
            });
          }
          weight() {
            const base = this.byteLength(false);
            const total = this.byteLength(true);
            return base * 3 + total;
          }
          virtualSize() {
            return Math.ceil(this.weight() / 4);
          }
          byteLength(_ALLOW_WITNESS = true) {
            const hasWitnesses = _ALLOW_WITNESS && this.hasWitnesses();
            return (hasWitnesses ? 10 : 8) + varuint.encodingLength(this.ins.length) + varuint.encodingLength(this.outs.length) + this.ins.reduce((sum, input) => {
              return sum + 40 + varSliceSize(input.script);
            }, 0) + this.outs.reduce((sum, output) => {
              return sum + 8 + varSliceSize(output.script);
            }, 0) + (hasWitnesses ? this.ins.reduce((sum, input) => {
              return sum + vectorSize(input.witness);
            }, 0) : 0);
          }
          clone() {
            const newTx = new Transaction();
            newTx.version = this.version;
            newTx.locktime = this.locktime;
            newTx.ins = this.ins.map((txIn) => {
              return {
                hash: txIn.hash,
                index: txIn.index,
                script: txIn.script,
                sequence: txIn.sequence,
                witness: txIn.witness
              };
            });
            newTx.outs = this.outs.map((txOut) => {
              return {
                script: txOut.script,
                value: txOut.value
              };
            });
            return newTx;
          }
          hashForSignature(inIndex, prevOutScript, hashType) {
            typeforce(types.tuple(types.UInt32, types.Buffer, types.Number), arguments);
            if (inIndex >= this.ins.length)
              return ONE;
            const ourScript = bscript.compile(bscript.decompile(prevOutScript).filter((x) => {
              return x !== script_1.OPS.OP_CODESEPARATOR;
            }));
            const txTmp = this.clone();
            if ((hashType & 31) === Transaction.SIGHASH_NONE) {
              txTmp.outs = [];
              txTmp.ins.forEach((input, i2) => {
                if (i2 === inIndex)
                  return;
                input.sequence = 0;
              });
            } else if ((hashType & 31) === Transaction.SIGHASH_SINGLE) {
              if (inIndex >= this.outs.length)
                return ONE;
              txTmp.outs.length = inIndex + 1;
              for (let i2 = 0; i2 < inIndex; i2++) {
                txTmp.outs[i2] = BLANK_OUTPUT;
              }
              txTmp.ins.forEach((input, y) => {
                if (y === inIndex)
                  return;
                input.sequence = 0;
              });
            }
            if (hashType & Transaction.SIGHASH_ANYONECANPAY) {
              txTmp.ins = [txTmp.ins[inIndex]];
              txTmp.ins[0].script = ourScript;
            } else {
              txTmp.ins.forEach((input) => {
                input.script = EMPTY_SCRIPT;
              });
              txTmp.ins[inIndex].script = ourScript;
            }
            const buffer2 = Buffer2.allocUnsafe(txTmp.byteLength(false) + 4);
            buffer2.writeInt32LE(hashType, buffer2.length - 4);
            txTmp.__toBuffer(buffer2, 0, false);
            return bcrypto.hash256(buffer2);
          }
          hashForWitnessV0(inIndex, prevOutScript, value, hashType) {
            typeforce(types.tuple(types.UInt32, types.Buffer, types.Satoshi, types.UInt32), arguments);
            let tbuffer = Buffer2.from([]);
            let bufferWriter;
            let hashOutputs = ZERO;
            let hashPrevouts = ZERO;
            let hashSequence = ZERO;
            if (!(hashType & Transaction.SIGHASH_ANYONECANPAY)) {
              tbuffer = Buffer2.allocUnsafe(36 * this.ins.length);
              bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);
              this.ins.forEach((txIn) => {
                bufferWriter.writeSlice(txIn.hash);
                bufferWriter.writeUInt32(txIn.index);
              });
              hashPrevouts = bcrypto.hash256(tbuffer);
            }
            if (!(hashType & Transaction.SIGHASH_ANYONECANPAY) && (hashType & 31) !== Transaction.SIGHASH_SINGLE && (hashType & 31) !== Transaction.SIGHASH_NONE) {
              tbuffer = Buffer2.allocUnsafe(4 * this.ins.length);
              bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);
              this.ins.forEach((txIn) => {
                bufferWriter.writeUInt32(txIn.sequence);
              });
              hashSequence = bcrypto.hash256(tbuffer);
            }
            if ((hashType & 31) !== Transaction.SIGHASH_SINGLE && (hashType & 31) !== Transaction.SIGHASH_NONE) {
              const txOutsSize = this.outs.reduce((sum, output) => {
                return sum + 8 + varSliceSize(output.script);
              }, 0);
              tbuffer = Buffer2.allocUnsafe(txOutsSize);
              bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);
              this.outs.forEach((out) => {
                bufferWriter.writeUInt64(out.value);
                bufferWriter.writeVarSlice(out.script);
              });
              hashOutputs = bcrypto.hash256(tbuffer);
            } else if ((hashType & 31) === Transaction.SIGHASH_SINGLE && inIndex < this.outs.length) {
              const output = this.outs[inIndex];
              tbuffer = Buffer2.allocUnsafe(8 + varSliceSize(output.script));
              bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);
              bufferWriter.writeUInt64(output.value);
              bufferWriter.writeVarSlice(output.script);
              hashOutputs = bcrypto.hash256(tbuffer);
            }
            tbuffer = Buffer2.allocUnsafe(156 + varSliceSize(prevOutScript));
            bufferWriter = new bufferutils_1.BufferWriter(tbuffer, 0);
            const input = this.ins[inIndex];
            bufferWriter.writeUInt32(this.version);
            bufferWriter.writeSlice(hashPrevouts);
            bufferWriter.writeSlice(hashSequence);
            bufferWriter.writeSlice(input.hash);
            bufferWriter.writeUInt32(input.index);
            bufferWriter.writeVarSlice(prevOutScript);
            bufferWriter.writeUInt64(value);
            bufferWriter.writeUInt32(input.sequence);
            bufferWriter.writeSlice(hashOutputs);
            bufferWriter.writeUInt32(this.locktime);
            bufferWriter.writeUInt32(hashType);
            return bcrypto.hash256(tbuffer);
          }
          getHash(forWitness) {
            if (forWitness && this.isCoinbase())
              return Buffer2.alloc(32, 0);
            return bcrypto.hash256(this.__toBuffer(void 0, void 0, forWitness));
          }
          getId() {
            return bufferutils_1.reverseBuffer(this.getHash(false)).toString("hex");
          }
          toBuffer(buffer2, initialOffset) {
            return this.__toBuffer(buffer2, initialOffset, true);
          }
          toHex() {
            return this.toBuffer(void 0, void 0).toString("hex");
          }
          setInputScript(index, scriptSig) {
            typeforce(types.tuple(types.Number, types.Buffer), arguments);
            this.ins[index].script = scriptSig;
          }
          setWitness(index, witness) {
            typeforce(types.tuple(types.Number, [types.Buffer]), arguments);
            this.ins[index].witness = witness;
          }
          __toBuffer(buffer2, initialOffset, _ALLOW_WITNESS = false) {
            if (!buffer2)
              buffer2 = Buffer2.allocUnsafe(this.byteLength(_ALLOW_WITNESS));
            const bufferWriter = new bufferutils_1.BufferWriter(buffer2, initialOffset || 0);
            bufferWriter.writeInt32(this.version);
            const hasWitnesses = _ALLOW_WITNESS && this.hasWitnesses();
            if (hasWitnesses) {
              bufferWriter.writeUInt8(Transaction.ADVANCED_TRANSACTION_MARKER);
              bufferWriter.writeUInt8(Transaction.ADVANCED_TRANSACTION_FLAG);
            }
            bufferWriter.writeVarInt(this.ins.length);
            this.ins.forEach((txIn) => {
              bufferWriter.writeSlice(txIn.hash);
              bufferWriter.writeUInt32(txIn.index);
              bufferWriter.writeVarSlice(txIn.script);
              bufferWriter.writeUInt32(txIn.sequence);
            });
            bufferWriter.writeVarInt(this.outs.length);
            this.outs.forEach((txOut) => {
              if (isOutput(txOut)) {
                bufferWriter.writeUInt64(txOut.value);
              } else {
                bufferWriter.writeSlice(txOut.valueBuffer);
              }
              bufferWriter.writeVarSlice(txOut.script);
            });
            if (hasWitnesses) {
              this.ins.forEach((input) => {
                bufferWriter.writeVector(input.witness);
              });
            }
            bufferWriter.writeUInt32(this.locktime);
            if (initialOffset !== void 0)
              return buffer2.slice(initialOffset, bufferWriter.offset);
            return buffer2;
          }
        }
        Transaction.DEFAULT_SEQUENCE = 4294967295;
        Transaction.SIGHASH_ALL = 1;
        Transaction.SIGHASH_NONE = 2;
        Transaction.SIGHASH_SINGLE = 3;
        Transaction.SIGHASH_ANYONECANPAY = 128;
        Transaction.ADVANCED_TRANSACTION_MARKER = 0;
        Transaction.ADVANCED_TRANSACTION_FLAG = 1;
        exports2.Transaction = Transaction;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "./bufferutils": 35, "./crypto": 37, "./script": 51, "./types": 77, "buffer": 83, "typeforce": 177, "varuint-bitcoin": 180 }], 76: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        Object.defineProperty(exports2, "__esModule", { value: true });
        const baddress = require2("./address");
        const bufferutils_1 = require2("./bufferutils");
        const classify = require2("./classify");
        const bcrypto = require2("./crypto");
        const ECPair = require2("./ecpair");
        const networks = require2("./networks");
        const payments = require2("./payments");
        const bscript = require2("./script");
        const script_1 = require2("./script");
        const transaction_1 = require2("./transaction");
        const types = require2("./types");
        const typeforce = require2("typeforce");
        const SCRIPT_TYPES = classify.types;
        const PREVOUT_TYPES = new Set([
          "p2pkh",
          "p2pk",
          "p2wpkh",
          "p2ms",
          "p2sh-p2pkh",
          "p2sh-p2pk",
          "p2sh-p2wpkh",
          "p2sh-p2ms",
          "p2wsh-p2pkh",
          "p2wsh-p2pk",
          "p2wsh-p2ms",
          "p2sh-p2wsh-p2pkh",
          "p2sh-p2wsh-p2pk",
          "p2sh-p2wsh-p2ms"
        ]);
        function tfMessage(type, value, message) {
          try {
            typeforce(type, value);
          } catch (err) {
            throw new Error(message);
          }
        }
        function txIsString(tx) {
          return typeof tx === "string" || tx instanceof String;
        }
        function txIsTransaction(tx) {
          return tx instanceof transaction_1.Transaction;
        }
        class TransactionBuilder {
          constructor(network = networks.bitcoin, maximumFeeRate = 2500) {
            this.network = network;
            this.maximumFeeRate = maximumFeeRate;
            this.__PREV_TX_SET = {};
            this.__INPUTS = [];
            this.__TX = new transaction_1.Transaction();
            this.__TX.version = 2;
            this.__USE_LOW_R = false;
            console.warn("Deprecation Warning: TransactionBuilder will be removed in the future. (v6.x.x or later) Please use the Psbt class instead. Examples of usage are available in the transactions-psbt.js integration test file on our Github. A high level explanation is available in the psbt.ts and psbt.js files as well.");
          }
          static fromTransaction(transaction, network) {
            const txb = new TransactionBuilder(network);
            txb.setVersion(transaction.version);
            txb.setLockTime(transaction.locktime);
            transaction.outs.forEach((txOut) => {
              txb.addOutput(txOut.script, txOut.value);
            });
            transaction.ins.forEach((txIn) => {
              txb.__addInputUnsafe(txIn.hash, txIn.index, {
                sequence: txIn.sequence,
                script: txIn.script,
                witness: txIn.witness
              });
            });
            txb.__INPUTS.forEach((input, i2) => {
              fixMultisigOrder(input, transaction, i2);
            });
            return txb;
          }
          setLowR(setting) {
            typeforce(typeforce.maybe(typeforce.Boolean), setting);
            if (setting === void 0) {
              setting = true;
            }
            this.__USE_LOW_R = setting;
            return setting;
          }
          setLockTime(locktime) {
            typeforce(types.UInt32, locktime);
            if (this.__INPUTS.some((input) => {
              if (!input.signatures)
                return false;
              return input.signatures.some((s) => s !== void 0);
            })) {
              throw new Error("No, this would invalidate signatures");
            }
            this.__TX.locktime = locktime;
          }
          setVersion(version) {
            typeforce(types.UInt32, version);
            this.__TX.version = version;
          }
          addInput(txHash, vout, sequence, prevOutScript) {
            if (!this.__canModifyInputs()) {
              throw new Error("No, this would invalidate signatures");
            }
            let value;
            if (txIsString(txHash)) {
              txHash = bufferutils_1.reverseBuffer(Buffer2.from(txHash, "hex"));
            } else if (txIsTransaction(txHash)) {
              const txOut = txHash.outs[vout];
              prevOutScript = txOut.script;
              value = txOut.value;
              txHash = txHash.getHash(false);
            }
            return this.__addInputUnsafe(txHash, vout, {
              sequence,
              prevOutScript,
              value
            });
          }
          addOutput(scriptPubKey, value) {
            if (!this.__canModifyOutputs()) {
              throw new Error("No, this would invalidate signatures");
            }
            if (typeof scriptPubKey === "string") {
              scriptPubKey = baddress.toOutputScript(scriptPubKey, this.network);
            }
            return this.__TX.addOutput(scriptPubKey, value);
          }
          build() {
            return this.__build(false);
          }
          buildIncomplete() {
            return this.__build(true);
          }
          sign(signParams, keyPair2, redeemScript, hashType, witnessValue, witnessScript) {
            trySign(getSigningData(this.network, this.__INPUTS, this.__needsOutputs.bind(this), this.__TX, signParams, keyPair2, redeemScript, hashType, witnessValue, witnessScript, this.__USE_LOW_R));
          }
          __addInputUnsafe(txHash, vout, options) {
            if (transaction_1.Transaction.isCoinbaseHash(txHash)) {
              throw new Error("coinbase inputs not supported");
            }
            const prevTxOut = txHash.toString("hex") + ":" + vout;
            if (this.__PREV_TX_SET[prevTxOut] !== void 0)
              throw new Error("Duplicate TxOut: " + prevTxOut);
            let input = {};
            if (options.script !== void 0) {
              input = expandInput(options.script, options.witness || []);
            }
            if (options.value !== void 0) {
              input.value = options.value;
            }
            if (!input.prevOutScript && options.prevOutScript) {
              let prevOutType;
              if (!input.pubkeys && !input.signatures) {
                const expanded = expandOutput(options.prevOutScript);
                if (expanded.pubkeys) {
                  input.pubkeys = expanded.pubkeys;
                  input.signatures = expanded.signatures;
                }
                prevOutType = expanded.type;
              }
              input.prevOutScript = options.prevOutScript;
              input.prevOutType = prevOutType || classify.output(options.prevOutScript);
            }
            const vin = this.__TX.addInput(txHash, vout, options.sequence, options.scriptSig);
            this.__INPUTS[vin] = input;
            this.__PREV_TX_SET[prevTxOut] = true;
            return vin;
          }
          __build(allowIncomplete) {
            if (!allowIncomplete) {
              if (!this.__TX.ins.length)
                throw new Error("Transaction has no inputs");
              if (!this.__TX.outs.length)
                throw new Error("Transaction has no outputs");
            }
            const tx = this.__TX.clone();
            this.__INPUTS.forEach((input, i2) => {
              if (!input.prevOutType && !allowIncomplete)
                throw new Error("Transaction is not complete");
              const result = build(input.prevOutType, input, allowIncomplete);
              if (!result) {
                if (!allowIncomplete && input.prevOutType === SCRIPT_TYPES.NONSTANDARD)
                  throw new Error("Unknown input type");
                if (!allowIncomplete)
                  throw new Error("Not enough information");
                return;
              }
              tx.setInputScript(i2, result.input);
              tx.setWitness(i2, result.witness);
            });
            if (!allowIncomplete) {
              if (this.__overMaximumFees(tx.virtualSize())) {
                throw new Error("Transaction has absurd fees");
              }
            }
            return tx;
          }
          __canModifyInputs() {
            return this.__INPUTS.every((input) => {
              if (!input.signatures)
                return true;
              return input.signatures.every((signature) => {
                if (!signature)
                  return true;
                const hashType = signatureHashType(signature);
                return (hashType & transaction_1.Transaction.SIGHASH_ANYONECANPAY) !== 0;
              });
            });
          }
          __needsOutputs(signingHashType) {
            if (signingHashType === transaction_1.Transaction.SIGHASH_ALL) {
              return this.__TX.outs.length === 0;
            }
            return this.__TX.outs.length === 0 && this.__INPUTS.some((input) => {
              if (!input.signatures)
                return false;
              return input.signatures.some((signature) => {
                if (!signature)
                  return false;
                const hashType = signatureHashType(signature);
                if (hashType & transaction_1.Transaction.SIGHASH_NONE)
                  return false;
                return true;
              });
            });
          }
          __canModifyOutputs() {
            const nInputs = this.__TX.ins.length;
            const nOutputs = this.__TX.outs.length;
            return this.__INPUTS.every((input) => {
              if (input.signatures === void 0)
                return true;
              return input.signatures.every((signature) => {
                if (!signature)
                  return true;
                const hashType = signatureHashType(signature);
                const hashTypeMod = hashType & 31;
                if (hashTypeMod === transaction_1.Transaction.SIGHASH_NONE)
                  return true;
                if (hashTypeMod === transaction_1.Transaction.SIGHASH_SINGLE) {
                  return nInputs <= nOutputs;
                }
                return false;
              });
            });
          }
          __overMaximumFees(bytes) {
            const incoming = this.__INPUTS.reduce((a, x) => a + (x.value >>> 0), 0);
            const outgoing = this.__TX.outs.reduce((a, x) => a + x.value, 0);
            const fee = incoming - outgoing;
            const feeRate = fee / bytes;
            return feeRate > this.maximumFeeRate;
          }
        }
        exports2.TransactionBuilder = TransactionBuilder;
        function expandInput(scriptSig, witnessStack, type, scriptPubKey) {
          if (scriptSig.length === 0 && witnessStack.length === 0)
            return {};
          if (!type) {
            let ssType = classify.input(scriptSig, true);
            let wsType = classify.witness(witnessStack, true);
            if (ssType === SCRIPT_TYPES.NONSTANDARD)
              ssType = void 0;
            if (wsType === SCRIPT_TYPES.NONSTANDARD)
              wsType = void 0;
            type = ssType || wsType;
          }
          switch (type) {
            case SCRIPT_TYPES.P2WPKH: {
              const { output, pubkey, signature } = payments.p2wpkh({
                witness: witnessStack
              });
              return {
                prevOutScript: output,
                prevOutType: SCRIPT_TYPES.P2WPKH,
                pubkeys: [pubkey],
                signatures: [signature]
              };
            }
            case SCRIPT_TYPES.P2PKH: {
              const { output, pubkey, signature } = payments.p2pkh({
                input: scriptSig
              });
              return {
                prevOutScript: output,
                prevOutType: SCRIPT_TYPES.P2PKH,
                pubkeys: [pubkey],
                signatures: [signature]
              };
            }
            case SCRIPT_TYPES.P2PK: {
              const { signature } = payments.p2pk({ input: scriptSig });
              return {
                prevOutType: SCRIPT_TYPES.P2PK,
                pubkeys: [void 0],
                signatures: [signature]
              };
            }
            case SCRIPT_TYPES.P2MS: {
              const { m, pubkeys, signatures } = payments.p2ms({
                input: scriptSig,
                output: scriptPubKey
              }, { allowIncomplete: true });
              return {
                prevOutType: SCRIPT_TYPES.P2MS,
                pubkeys,
                signatures,
                maxSignatures: m
              };
            }
          }
          if (type === SCRIPT_TYPES.P2SH) {
            const { output, redeem } = payments.p2sh({
              input: scriptSig,
              witness: witnessStack
            });
            const outputType = classify.output(redeem.output);
            const expanded = expandInput(redeem.input, redeem.witness, outputType, redeem.output);
            if (!expanded.prevOutType)
              return {};
            return {
              prevOutScript: output,
              prevOutType: SCRIPT_TYPES.P2SH,
              redeemScript: redeem.output,
              redeemScriptType: expanded.prevOutType,
              witnessScript: expanded.witnessScript,
              witnessScriptType: expanded.witnessScriptType,
              pubkeys: expanded.pubkeys,
              signatures: expanded.signatures
            };
          }
          if (type === SCRIPT_TYPES.P2WSH) {
            const { output, redeem } = payments.p2wsh({
              input: scriptSig,
              witness: witnessStack
            });
            const outputType = classify.output(redeem.output);
            let expanded;
            if (outputType === SCRIPT_TYPES.P2WPKH) {
              expanded = expandInput(redeem.input, redeem.witness, outputType);
            } else {
              expanded = expandInput(bscript.compile(redeem.witness), [], outputType, redeem.output);
            }
            if (!expanded.prevOutType)
              return {};
            return {
              prevOutScript: output,
              prevOutType: SCRIPT_TYPES.P2WSH,
              witnessScript: redeem.output,
              witnessScriptType: expanded.prevOutType,
              pubkeys: expanded.pubkeys,
              signatures: expanded.signatures
            };
          }
          return {
            prevOutType: SCRIPT_TYPES.NONSTANDARD,
            prevOutScript: scriptSig
          };
        }
        function fixMultisigOrder(input, transaction, vin) {
          if (input.redeemScriptType !== SCRIPT_TYPES.P2MS || !input.redeemScript)
            return;
          if (input.pubkeys.length === input.signatures.length)
            return;
          const unmatched = input.signatures.concat();
          input.signatures = input.pubkeys.map((pubKey) => {
            const keyPair2 = ECPair.fromPublicKey(pubKey);
            let match;
            unmatched.some((signature, i2) => {
              if (!signature)
                return false;
              const parsed = bscript.signature.decode(signature);
              const hash2 = transaction.hashForSignature(vin, input.redeemScript, parsed.hashType);
              if (!keyPair2.verify(hash2, parsed.signature))
                return false;
              unmatched[i2] = void 0;
              match = signature;
              return true;
            });
            return match;
          });
        }
        function expandOutput(script, ourPubKey) {
          typeforce(types.Buffer, script);
          const type = classify.output(script);
          switch (type) {
            case SCRIPT_TYPES.P2PKH: {
              if (!ourPubKey)
                return { type };
              const pkh1 = payments.p2pkh({ output: script }).hash;
              const pkh2 = bcrypto.hash160(ourPubKey);
              if (!pkh1.equals(pkh2))
                return { type };
              return {
                type,
                pubkeys: [ourPubKey],
                signatures: [void 0]
              };
            }
            case SCRIPT_TYPES.P2WPKH: {
              if (!ourPubKey)
                return { type };
              const wpkh1 = payments.p2wpkh({ output: script }).hash;
              const wpkh2 = bcrypto.hash160(ourPubKey);
              if (!wpkh1.equals(wpkh2))
                return { type };
              return {
                type,
                pubkeys: [ourPubKey],
                signatures: [void 0]
              };
            }
            case SCRIPT_TYPES.P2PK: {
              const p2pk = payments.p2pk({ output: script });
              return {
                type,
                pubkeys: [p2pk.pubkey],
                signatures: [void 0]
              };
            }
            case SCRIPT_TYPES.P2MS: {
              const p2ms = payments.p2ms({ output: script });
              return {
                type,
                pubkeys: p2ms.pubkeys,
                signatures: p2ms.pubkeys.map(() => void 0),
                maxSignatures: p2ms.m
              };
            }
          }
          return { type };
        }
        function prepareInput(input, ourPubKey, redeemScript, witnessScript) {
          if (redeemScript && witnessScript) {
            const p2wsh = payments.p2wsh({
              redeem: { output: witnessScript }
            });
            const p2wshAlt = payments.p2wsh({ output: redeemScript });
            const p2sh = payments.p2sh({ redeem: { output: redeemScript } });
            const p2shAlt = payments.p2sh({ redeem: p2wsh });
            if (!p2wsh.hash.equals(p2wshAlt.hash))
              throw new Error("Witness script inconsistent with prevOutScript");
            if (!p2sh.hash.equals(p2shAlt.hash))
              throw new Error("Redeem script inconsistent with prevOutScript");
            const expanded = expandOutput(p2wsh.redeem.output, ourPubKey);
            if (!expanded.pubkeys)
              throw new Error(expanded.type + " not supported as witnessScript (" + bscript.toASM(witnessScript) + ")");
            if (input.signatures && input.signatures.some((x) => x !== void 0)) {
              expanded.signatures = input.signatures;
            }
            const signScript = witnessScript;
            if (expanded.type === SCRIPT_TYPES.P2WPKH)
              throw new Error("P2SH(P2WSH(P2WPKH)) is a consensus failure");
            return {
              redeemScript,
              redeemScriptType: SCRIPT_TYPES.P2WSH,
              witnessScript,
              witnessScriptType: expanded.type,
              prevOutType: SCRIPT_TYPES.P2SH,
              prevOutScript: p2sh.output,
              hasWitness: true,
              signScript,
              signType: expanded.type,
              pubkeys: expanded.pubkeys,
              signatures: expanded.signatures,
              maxSignatures: expanded.maxSignatures
            };
          }
          if (redeemScript) {
            const p2sh = payments.p2sh({ redeem: { output: redeemScript } });
            if (input.prevOutScript) {
              let p2shAlt;
              try {
                p2shAlt = payments.p2sh({ output: input.prevOutScript });
              } catch (e) {
                throw new Error("PrevOutScript must be P2SH");
              }
              if (!p2sh.hash.equals(p2shAlt.hash))
                throw new Error("Redeem script inconsistent with prevOutScript");
            }
            const expanded = expandOutput(p2sh.redeem.output, ourPubKey);
            if (!expanded.pubkeys)
              throw new Error(expanded.type + " not supported as redeemScript (" + bscript.toASM(redeemScript) + ")");
            if (input.signatures && input.signatures.some((x) => x !== void 0)) {
              expanded.signatures = input.signatures;
            }
            let signScript = redeemScript;
            if (expanded.type === SCRIPT_TYPES.P2WPKH) {
              signScript = payments.p2pkh({ pubkey: expanded.pubkeys[0] }).output;
            }
            return {
              redeemScript,
              redeemScriptType: expanded.type,
              prevOutType: SCRIPT_TYPES.P2SH,
              prevOutScript: p2sh.output,
              hasWitness: expanded.type === SCRIPT_TYPES.P2WPKH,
              signScript,
              signType: expanded.type,
              pubkeys: expanded.pubkeys,
              signatures: expanded.signatures,
              maxSignatures: expanded.maxSignatures
            };
          }
          if (witnessScript) {
            const p2wsh = payments.p2wsh({ redeem: { output: witnessScript } });
            if (input.prevOutScript) {
              const p2wshAlt = payments.p2wsh({ output: input.prevOutScript });
              if (!p2wsh.hash.equals(p2wshAlt.hash))
                throw new Error("Witness script inconsistent with prevOutScript");
            }
            const expanded = expandOutput(p2wsh.redeem.output, ourPubKey);
            if (!expanded.pubkeys)
              throw new Error(expanded.type + " not supported as witnessScript (" + bscript.toASM(witnessScript) + ")");
            if (input.signatures && input.signatures.some((x) => x !== void 0)) {
              expanded.signatures = input.signatures;
            }
            const signScript = witnessScript;
            if (expanded.type === SCRIPT_TYPES.P2WPKH)
              throw new Error("P2WSH(P2WPKH) is a consensus failure");
            return {
              witnessScript,
              witnessScriptType: expanded.type,
              prevOutType: SCRIPT_TYPES.P2WSH,
              prevOutScript: p2wsh.output,
              hasWitness: true,
              signScript,
              signType: expanded.type,
              pubkeys: expanded.pubkeys,
              signatures: expanded.signatures,
              maxSignatures: expanded.maxSignatures
            };
          }
          if (input.prevOutType && input.prevOutScript) {
            if (input.prevOutType === SCRIPT_TYPES.P2SH)
              throw new Error("PrevOutScript is " + input.prevOutType + ", requires redeemScript");
            if (input.prevOutType === SCRIPT_TYPES.P2WSH)
              throw new Error("PrevOutScript is " + input.prevOutType + ", requires witnessScript");
            if (!input.prevOutScript)
              throw new Error("PrevOutScript is missing");
            const expanded = expandOutput(input.prevOutScript, ourPubKey);
            if (!expanded.pubkeys)
              throw new Error(expanded.type + " not supported (" + bscript.toASM(input.prevOutScript) + ")");
            if (input.signatures && input.signatures.some((x) => x !== void 0)) {
              expanded.signatures = input.signatures;
            }
            let signScript = input.prevOutScript;
            if (expanded.type === SCRIPT_TYPES.P2WPKH) {
              signScript = payments.p2pkh({ pubkey: expanded.pubkeys[0] }).output;
            }
            return {
              prevOutType: expanded.type,
              prevOutScript: input.prevOutScript,
              hasWitness: expanded.type === SCRIPT_TYPES.P2WPKH,
              signScript,
              signType: expanded.type,
              pubkeys: expanded.pubkeys,
              signatures: expanded.signatures,
              maxSignatures: expanded.maxSignatures
            };
          }
          const prevOutScript = payments.p2pkh({ pubkey: ourPubKey }).output;
          return {
            prevOutType: SCRIPT_TYPES.P2PKH,
            prevOutScript,
            hasWitness: false,
            signScript: prevOutScript,
            signType: SCRIPT_TYPES.P2PKH,
            pubkeys: [ourPubKey],
            signatures: [void 0]
          };
        }
        function build(type, input, allowIncomplete) {
          const pubkeys = input.pubkeys || [];
          let signatures = input.signatures || [];
          switch (type) {
            case SCRIPT_TYPES.P2PKH: {
              if (pubkeys.length === 0)
                break;
              if (signatures.length === 0)
                break;
              return payments.p2pkh({ pubkey: pubkeys[0], signature: signatures[0] });
            }
            case SCRIPT_TYPES.P2WPKH: {
              if (pubkeys.length === 0)
                break;
              if (signatures.length === 0)
                break;
              return payments.p2wpkh({ pubkey: pubkeys[0], signature: signatures[0] });
            }
            case SCRIPT_TYPES.P2PK: {
              if (pubkeys.length === 0)
                break;
              if (signatures.length === 0)
                break;
              return payments.p2pk({ signature: signatures[0] });
            }
            case SCRIPT_TYPES.P2MS: {
              const m = input.maxSignatures;
              if (allowIncomplete) {
                signatures = signatures.map((x) => x || script_1.OPS.OP_0);
              } else {
                signatures = signatures.filter((x) => x);
              }
              const validate = !allowIncomplete || m === signatures.length;
              return payments.p2ms({ m, pubkeys, signatures }, { allowIncomplete, validate });
            }
            case SCRIPT_TYPES.P2SH: {
              const redeem = build(input.redeemScriptType, input, allowIncomplete);
              if (!redeem)
                return;
              return payments.p2sh({
                redeem: {
                  output: redeem.output || input.redeemScript,
                  input: redeem.input,
                  witness: redeem.witness
                }
              });
            }
            case SCRIPT_TYPES.P2WSH: {
              const redeem = build(input.witnessScriptType, input, allowIncomplete);
              if (!redeem)
                return;
              return payments.p2wsh({
                redeem: {
                  output: input.witnessScript,
                  input: redeem.input,
                  witness: redeem.witness
                }
              });
            }
          }
        }
        function canSign(input) {
          return input.signScript !== void 0 && input.signType !== void 0 && input.pubkeys !== void 0 && input.signatures !== void 0 && input.signatures.length === input.pubkeys.length && input.pubkeys.length > 0 && (input.hasWitness === false || input.value !== void 0);
        }
        function signatureHashType(buffer2) {
          return buffer2.readUInt8(buffer2.length - 1);
        }
        function checkSignArgs(inputs, signParams) {
          if (!PREVOUT_TYPES.has(signParams.prevOutScriptType)) {
            throw new TypeError(`Unknown prevOutScriptType "${signParams.prevOutScriptType}"`);
          }
          tfMessage(typeforce.Number, signParams.vin, `sign must include vin parameter as Number (input index)`);
          tfMessage(types.Signer, signParams.keyPair, `sign must include keyPair parameter as Signer interface`);
          tfMessage(typeforce.maybe(typeforce.Number), signParams.hashType, `sign hashType parameter must be a number`);
          const prevOutType = (inputs[signParams.vin] || []).prevOutType;
          const posType = signParams.prevOutScriptType;
          switch (posType) {
            case "p2pkh":
              if (prevOutType && prevOutType !== "pubkeyhash") {
                throw new TypeError(`input #${signParams.vin} is not of type p2pkh: ${prevOutType}`);
              }
              tfMessage(typeforce.value(void 0), signParams.witnessScript, `${posType} requires NO witnessScript`);
              tfMessage(typeforce.value(void 0), signParams.redeemScript, `${posType} requires NO redeemScript`);
              tfMessage(typeforce.value(void 0), signParams.witnessValue, `${posType} requires NO witnessValue`);
              break;
            case "p2pk":
              if (prevOutType && prevOutType !== "pubkey") {
                throw new TypeError(`input #${signParams.vin} is not of type p2pk: ${prevOutType}`);
              }
              tfMessage(typeforce.value(void 0), signParams.witnessScript, `${posType} requires NO witnessScript`);
              tfMessage(typeforce.value(void 0), signParams.redeemScript, `${posType} requires NO redeemScript`);
              tfMessage(typeforce.value(void 0), signParams.witnessValue, `${posType} requires NO witnessValue`);
              break;
            case "p2wpkh":
              if (prevOutType && prevOutType !== "witnesspubkeyhash") {
                throw new TypeError(`input #${signParams.vin} is not of type p2wpkh: ${prevOutType}`);
              }
              tfMessage(typeforce.value(void 0), signParams.witnessScript, `${posType} requires NO witnessScript`);
              tfMessage(typeforce.value(void 0), signParams.redeemScript, `${posType} requires NO redeemScript`);
              tfMessage(types.Satoshi, signParams.witnessValue, `${posType} requires witnessValue`);
              break;
            case "p2ms":
              if (prevOutType && prevOutType !== "multisig") {
                throw new TypeError(`input #${signParams.vin} is not of type p2ms: ${prevOutType}`);
              }
              tfMessage(typeforce.value(void 0), signParams.witnessScript, `${posType} requires NO witnessScript`);
              tfMessage(typeforce.value(void 0), signParams.redeemScript, `${posType} requires NO redeemScript`);
              tfMessage(typeforce.value(void 0), signParams.witnessValue, `${posType} requires NO witnessValue`);
              break;
            case "p2sh-p2wpkh":
              if (prevOutType && prevOutType !== "scripthash") {
                throw new TypeError(`input #${signParams.vin} is not of type p2sh-p2wpkh: ${prevOutType}`);
              }
              tfMessage(typeforce.value(void 0), signParams.witnessScript, `${posType} requires NO witnessScript`);
              tfMessage(typeforce.Buffer, signParams.redeemScript, `${posType} requires redeemScript`);
              tfMessage(types.Satoshi, signParams.witnessValue, `${posType} requires witnessValue`);
              break;
            case "p2sh-p2ms":
            case "p2sh-p2pk":
            case "p2sh-p2pkh":
              if (prevOutType && prevOutType !== "scripthash") {
                throw new TypeError(`input #${signParams.vin} is not of type ${posType}: ${prevOutType}`);
              }
              tfMessage(typeforce.value(void 0), signParams.witnessScript, `${posType} requires NO witnessScript`);
              tfMessage(typeforce.Buffer, signParams.redeemScript, `${posType} requires redeemScript`);
              tfMessage(typeforce.value(void 0), signParams.witnessValue, `${posType} requires NO witnessValue`);
              break;
            case "p2wsh-p2ms":
            case "p2wsh-p2pk":
            case "p2wsh-p2pkh":
              if (prevOutType && prevOutType !== "witnessscripthash") {
                throw new TypeError(`input #${signParams.vin} is not of type ${posType}: ${prevOutType}`);
              }
              tfMessage(typeforce.Buffer, signParams.witnessScript, `${posType} requires witnessScript`);
              tfMessage(typeforce.value(void 0), signParams.redeemScript, `${posType} requires NO redeemScript`);
              tfMessage(types.Satoshi, signParams.witnessValue, `${posType} requires witnessValue`);
              break;
            case "p2sh-p2wsh-p2ms":
            case "p2sh-p2wsh-p2pk":
            case "p2sh-p2wsh-p2pkh":
              if (prevOutType && prevOutType !== "scripthash") {
                throw new TypeError(`input #${signParams.vin} is not of type ${posType}: ${prevOutType}`);
              }
              tfMessage(typeforce.Buffer, signParams.witnessScript, `${posType} requires witnessScript`);
              tfMessage(typeforce.Buffer, signParams.redeemScript, `${posType} requires witnessScript`);
              tfMessage(types.Satoshi, signParams.witnessValue, `${posType} requires witnessScript`);
              break;
          }
        }
        function trySign({
          input,
          ourPubKey,
          keyPair: keyPair2,
          signatureHash,
          hashType,
          useLowR
        }) {
          let signed = false;
          for (const [i2, pubKey] of input.pubkeys.entries()) {
            if (!ourPubKey.equals(pubKey))
              continue;
            if (input.signatures[i2])
              throw new Error("Signature already exists");
            if (ourPubKey.length !== 33 && input.hasWitness) {
              throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");
            }
            const signature = keyPair2.sign(signatureHash, useLowR);
            input.signatures[i2] = bscript.signature.encode(signature, hashType);
            signed = true;
          }
          if (!signed)
            throw new Error("Key pair cannot sign for this input");
        }
        function getSigningData(network, inputs, needsOutputs, tx, signParams, keyPair2, redeemScript, hashType, witnessValue, witnessScript, useLowR) {
          let vin;
          if (typeof signParams === "number") {
            console.warn("DEPRECATED: TransactionBuilder sign method arguments will change in v6, please use the TxbSignArg interface");
            vin = signParams;
          } else if (typeof signParams === "object") {
            checkSignArgs(inputs, signParams);
            ({
              vin,
              keyPair: keyPair2,
              redeemScript,
              hashType,
              witnessValue,
              witnessScript
            } = signParams);
          } else {
            throw new TypeError("TransactionBuilder sign first arg must be TxbSignArg or number");
          }
          if (keyPair2 === void 0) {
            throw new Error("sign requires keypair");
          }
          if (keyPair2.network && keyPair2.network !== network)
            throw new TypeError("Inconsistent network");
          if (!inputs[vin])
            throw new Error("No input at index: " + vin);
          hashType = hashType || transaction_1.Transaction.SIGHASH_ALL;
          if (needsOutputs(hashType))
            throw new Error("Transaction needs outputs");
          const input = inputs[vin];
          if (input.redeemScript !== void 0 && redeemScript && !input.redeemScript.equals(redeemScript)) {
            throw new Error("Inconsistent redeemScript");
          }
          const ourPubKey = keyPair2.publicKey || keyPair2.getPublicKey && keyPair2.getPublicKey();
          if (!canSign(input)) {
            if (witnessValue !== void 0) {
              if (input.value !== void 0 && input.value !== witnessValue)
                throw new Error("Input did not match witnessValue");
              typeforce(types.Satoshi, witnessValue);
              input.value = witnessValue;
            }
            if (!canSign(input)) {
              const prepared = prepareInput(input, ourPubKey, redeemScript, witnessScript);
              Object.assign(input, prepared);
            }
            if (!canSign(input))
              throw Error(input.prevOutType + " not supported");
          }
          let signatureHash;
          if (input.hasWitness) {
            signatureHash = tx.hashForWitnessV0(vin, input.signScript, input.value, hashType);
          } else {
            signatureHash = tx.hashForSignature(vin, input.signScript, hashType);
          }
          return {
            input,
            ourPubKey,
            keyPair: keyPair2,
            signatureHash,
            hashType,
            useLowR: !!useLowR
          };
        }
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "./address": 33, "./bufferutils": 35, "./classify": 36, "./crypto": 37, "./ecpair": 38, "./networks": 40, "./payments": 42, "./script": 51, "./transaction": 75, "./types": 77, "buffer": 83, "typeforce": 177 }], 77: [function(require2, module2, exports2) {
    Object.defineProperty(exports2, "__esModule", { value: true });
    const typeforce = require2("typeforce");
    const UINT31_MAX = Math.pow(2, 31) - 1;
    function UInt31(value) {
      return typeforce.UInt32(value) && value <= UINT31_MAX;
    }
    exports2.UInt31 = UInt31;
    function BIP32Path(value) {
      return typeforce.String(value) && !!value.match(/^(m\/)?(\d+'?\/)*\d+'?$/);
    }
    exports2.BIP32Path = BIP32Path;
    BIP32Path.toJSON = () => {
      return "BIP32 derivation path";
    };
    function Signer(obj) {
      return (typeforce.Buffer(obj.publicKey) || typeof obj.getPublicKey === "function") && typeof obj.sign === "function";
    }
    exports2.Signer = Signer;
    const SATOSHI_MAX = 21 * 1e14;
    function Satoshi(value) {
      return typeforce.UInt53(value) && value <= SATOSHI_MAX;
    }
    exports2.Satoshi = Satoshi;
    exports2.ECPoint = typeforce.quacksLike("Point");
    exports2.Network = typeforce.compile({
      messagePrefix: typeforce.oneOf(typeforce.Buffer, typeforce.String),
      bip32: {
        public: typeforce.UInt32,
        private: typeforce.UInt32
      },
      pubKeyHash: typeforce.UInt8,
      scriptHash: typeforce.UInt8,
      wif: typeforce.UInt8
    });
    exports2.Buffer256bit = typeforce.BufferN(32);
    exports2.Hash160bit = typeforce.BufferN(20);
    exports2.Hash256bit = typeforce.BufferN(32);
    exports2.Number = typeforce.Number;
    exports2.Array = typeforce.Array;
    exports2.Boolean = typeforce.Boolean;
    exports2.String = typeforce.String;
    exports2.Buffer = typeforce.Buffer;
    exports2.Hex = typeforce.Hex;
    exports2.maybe = typeforce.maybe;
    exports2.tuple = typeforce.tuple;
    exports2.UInt8 = typeforce.UInt8;
    exports2.UInt32 = typeforce.UInt32;
    exports2.Function = typeforce.Function;
    exports2.BufferN = typeforce.BufferN;
    exports2.Null = typeforce.Null;
    exports2.oneOf = typeforce.oneOf;
  }, { "typeforce": 177 }], 78: [function(require2, module2, exports2) {
    var r;
    module2.exports = function rand(len2) {
      if (!r)
        r = new Rand(null);
      return r.generate(len2);
    };
    function Rand(rand) {
      this.rand = rand;
    }
    module2.exports.Rand = Rand;
    Rand.prototype.generate = function generate(len2) {
      return this._rand(len2);
    };
    Rand.prototype._rand = function _rand(n) {
      if (this.rand.getBytes)
        return this.rand.getBytes(n);
      var res = new Uint8Array(n);
      for (var i2 = 0; i2 < res.length; i2++)
        res[i2] = this.rand.getByte();
      return res;
    };
    if (typeof self === "object") {
      if (self.crypto && self.crypto.getRandomValues) {
        Rand.prototype._rand = function _rand(n) {
          var arr = new Uint8Array(n);
          self.crypto.getRandomValues(arr);
          return arr;
        };
      } else if (self.msCrypto && self.msCrypto.getRandomValues) {
        Rand.prototype._rand = function _rand(n) {
          var arr = new Uint8Array(n);
          self.msCrypto.getRandomValues(arr);
          return arr;
        };
      } else if (typeof window === "object") {
        Rand.prototype._rand = function() {
          throw new Error("Not implemented yet");
        };
      }
    } else {
      try {
        var crypto = require2("crypto");
        if (typeof crypto.randomBytes !== "function")
          throw new Error("Not supported");
        Rand.prototype._rand = function _rand(n) {
          return crypto.randomBytes(n);
        };
      } catch (e) {
      }
    }
  }, { "crypto": 79 }], 79: [function(require2, module2, exports2) {
  }, {}], 80: [function(require2, module2, exports2) {
    var basex = require2("base-x");
    var ALPHABET = "123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";
    module2.exports = basex(ALPHABET);
  }, { "base-x": 1 }], 81: [function(require2, module2, exports2) {
    var base58 = require2("bs58");
    var Buffer2 = require2("safe-buffer").Buffer;
    module2.exports = function(checksumFn) {
      function encode(payload) {
        var checksum = checksumFn(payload);
        return base58.encode(Buffer2.concat([
          payload,
          checksum
        ], payload.length + 4));
      }
      function decodeRaw(buffer2) {
        var payload = buffer2.slice(0, -4);
        var checksum = buffer2.slice(-4);
        var newChecksum = checksumFn(payload);
        if (checksum[0] ^ newChecksum[0] | checksum[1] ^ newChecksum[1] | checksum[2] ^ newChecksum[2] | checksum[3] ^ newChecksum[3])
          return;
        return payload;
      }
      function decodeUnsafe(string) {
        var buffer2 = base58.decodeUnsafe(string);
        if (!buffer2)
          return;
        return decodeRaw(buffer2);
      }
      function decode(string) {
        var buffer2 = base58.decode(string);
        var payload = decodeRaw(buffer2);
        if (!payload)
          throw new Error("Invalid checksum");
        return payload;
      }
      return {
        encode,
        decode,
        decodeUnsafe
      };
    };
  }, { "bs58": 80, "safe-buffer": 147 }], 82: [function(require2, module2, exports2) {
    var createHash = require2("create-hash");
    var bs58checkBase = require2("./base");
    function sha256x2(buffer2) {
      var tmp = createHash("sha256").update(buffer2).digest();
      return createHash("sha256").update(tmp).digest();
    }
    module2.exports = bs58checkBase(sha256x2);
  }, { "./base": 81, "create-hash": 85 }], 83: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        var base64 = require2("base64-js");
        var ieee7542 = require2("ieee754");
        exports2.Buffer = Buffer3;
        exports2.SlowBuffer = SlowBuffer;
        exports2.INSPECT_MAX_BYTES = 50;
        var K_MAX_LENGTH = 2147483647;
        exports2.kMaxLength = K_MAX_LENGTH;
        Buffer3.TYPED_ARRAY_SUPPORT = typedArraySupport();
        if (!Buffer3.TYPED_ARRAY_SUPPORT && typeof console !== "undefined" && typeof console.error === "function") {
          console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
        }
        function typedArraySupport() {
          try {
            var arr = new Uint8Array(1);
            arr.__proto__ = { __proto__: Uint8Array.prototype, foo: function() {
              return 42;
            } };
            return arr.foo() === 42;
          } catch (e) {
            return false;
          }
        }
        Object.defineProperty(Buffer3.prototype, "parent", {
          enumerable: true,
          get: function() {
            if (!Buffer3.isBuffer(this))
              return void 0;
            return this.buffer;
          }
        });
        Object.defineProperty(Buffer3.prototype, "offset", {
          enumerable: true,
          get: function() {
            if (!Buffer3.isBuffer(this))
              return void 0;
            return this.byteOffset;
          }
        });
        function createBuffer(length) {
          if (length > K_MAX_LENGTH) {
            throw new RangeError('The value "' + length + '" is invalid for option "size"');
          }
          var buf = new Uint8Array(length);
          buf.__proto__ = Buffer3.prototype;
          return buf;
        }
        function Buffer3(arg, encodingOrOffset, length) {
          if (typeof arg === "number") {
            if (typeof encodingOrOffset === "string") {
              throw new TypeError('The "string" argument must be of type string. Received type number');
            }
            return allocUnsafe(arg);
          }
          return from2(arg, encodingOrOffset, length);
        }
        if (typeof Symbol !== "undefined" && Symbol.species != null && Buffer3[Symbol.species] === Buffer3) {
          Object.defineProperty(Buffer3, Symbol.species, {
            value: null,
            configurable: true,
            enumerable: false,
            writable: false
          });
        }
        Buffer3.poolSize = 8192;
        function from2(value, encodingOrOffset, length) {
          if (typeof value === "string") {
            return fromString(value, encodingOrOffset);
          }
          if (ArrayBuffer.isView(value)) {
            return fromArrayLike(value);
          }
          if (value == null) {
            throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof value);
          }
          if (isInstance(value, ArrayBuffer) || value && isInstance(value.buffer, ArrayBuffer)) {
            return fromArrayBuffer(value, encodingOrOffset, length);
          }
          if (typeof value === "number") {
            throw new TypeError('The "value" argument must not be of type number. Received type number');
          }
          var valueOf = value.valueOf && value.valueOf();
          if (valueOf != null && valueOf !== value) {
            return Buffer3.from(valueOf, encodingOrOffset, length);
          }
          var b = fromObject(value);
          if (b)
            return b;
          if (typeof Symbol !== "undefined" && Symbol.toPrimitive != null && typeof value[Symbol.toPrimitive] === "function") {
            return Buffer3.from(value[Symbol.toPrimitive]("string"), encodingOrOffset, length);
          }
          throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof value);
        }
        Buffer3.from = function(value, encodingOrOffset, length) {
          return from2(value, encodingOrOffset, length);
        };
        Buffer3.prototype.__proto__ = Uint8Array.prototype;
        Buffer3.__proto__ = Uint8Array;
        function assertSize(size) {
          if (typeof size !== "number") {
            throw new TypeError('"size" argument must be of type number');
          } else if (size < 0) {
            throw new RangeError('The value "' + size + '" is invalid for option "size"');
          }
        }
        function alloc(size, fill, encoding) {
          assertSize(size);
          if (size <= 0) {
            return createBuffer(size);
          }
          if (fill !== void 0) {
            return typeof encoding === "string" ? createBuffer(size).fill(fill, encoding) : createBuffer(size).fill(fill);
          }
          return createBuffer(size);
        }
        Buffer3.alloc = function(size, fill, encoding) {
          return alloc(size, fill, encoding);
        };
        function allocUnsafe(size) {
          assertSize(size);
          return createBuffer(size < 0 ? 0 : checked(size) | 0);
        }
        Buffer3.allocUnsafe = function(size) {
          return allocUnsafe(size);
        };
        Buffer3.allocUnsafeSlow = function(size) {
          return allocUnsafe(size);
        };
        function fromString(string, encoding) {
          if (typeof encoding !== "string" || encoding === "") {
            encoding = "utf8";
          }
          if (!Buffer3.isEncoding(encoding)) {
            throw new TypeError("Unknown encoding: " + encoding);
          }
          var length = byteLength2(string, encoding) | 0;
          var buf = createBuffer(length);
          var actual = buf.write(string, encoding);
          if (actual !== length) {
            buf = buf.slice(0, actual);
          }
          return buf;
        }
        function fromArrayLike(array) {
          var length = array.length < 0 ? 0 : checked(array.length) | 0;
          var buf = createBuffer(length);
          for (var i2 = 0; i2 < length; i2 += 1) {
            buf[i2] = array[i2] & 255;
          }
          return buf;
        }
        function fromArrayBuffer(array, byteOffset, length) {
          if (byteOffset < 0 || array.byteLength < byteOffset) {
            throw new RangeError('"offset" is outside of buffer bounds');
          }
          if (array.byteLength < byteOffset + (length || 0)) {
            throw new RangeError('"length" is outside of buffer bounds');
          }
          var buf;
          if (byteOffset === void 0 && length === void 0) {
            buf = new Uint8Array(array);
          } else if (length === void 0) {
            buf = new Uint8Array(array, byteOffset);
          } else {
            buf = new Uint8Array(array, byteOffset, length);
          }
          buf.__proto__ = Buffer3.prototype;
          return buf;
        }
        function fromObject(obj) {
          if (Buffer3.isBuffer(obj)) {
            var len2 = checked(obj.length) | 0;
            var buf = createBuffer(len2);
            if (buf.length === 0) {
              return buf;
            }
            obj.copy(buf, 0, 0, len2);
            return buf;
          }
          if (obj.length !== void 0) {
            if (typeof obj.length !== "number" || numberIsNaN(obj.length)) {
              return createBuffer(0);
            }
            return fromArrayLike(obj);
          }
          if (obj.type === "Buffer" && Array.isArray(obj.data)) {
            return fromArrayLike(obj.data);
          }
        }
        function checked(length) {
          if (length >= K_MAX_LENGTH) {
            throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + K_MAX_LENGTH.toString(16) + " bytes");
          }
          return length | 0;
        }
        function SlowBuffer(length) {
          if (+length != length) {
            length = 0;
          }
          return Buffer3.alloc(+length);
        }
        Buffer3.isBuffer = function isBuffer(b) {
          return b != null && b._isBuffer === true && b !== Buffer3.prototype;
        };
        Buffer3.compare = function compare(a, b) {
          if (isInstance(a, Uint8Array))
            a = Buffer3.from(a, a.offset, a.byteLength);
          if (isInstance(b, Uint8Array))
            b = Buffer3.from(b, b.offset, b.byteLength);
          if (!Buffer3.isBuffer(a) || !Buffer3.isBuffer(b)) {
            throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
          }
          if (a === b)
            return 0;
          var x = a.length;
          var y = b.length;
          for (var i2 = 0, len2 = Math.min(x, y); i2 < len2; ++i2) {
            if (a[i2] !== b[i2]) {
              x = a[i2];
              y = b[i2];
              break;
            }
          }
          if (x < y)
            return -1;
          if (y < x)
            return 1;
          return 0;
        };
        Buffer3.isEncoding = function isEncoding2(encoding) {
          switch (String(encoding).toLowerCase()) {
            case "hex":
            case "utf8":
            case "utf-8":
            case "ascii":
            case "latin1":
            case "binary":
            case "base64":
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
              return true;
            default:
              return false;
          }
        };
        Buffer3.concat = function concat(list, length) {
          if (!Array.isArray(list)) {
            throw new TypeError('"list" argument must be an Array of Buffers');
          }
          if (list.length === 0) {
            return Buffer3.alloc(0);
          }
          var i2;
          if (length === void 0) {
            length = 0;
            for (i2 = 0; i2 < list.length; ++i2) {
              length += list[i2].length;
            }
          }
          var buffer2 = Buffer3.allocUnsafe(length);
          var pos = 0;
          for (i2 = 0; i2 < list.length; ++i2) {
            var buf = list[i2];
            if (isInstance(buf, Uint8Array)) {
              buf = Buffer3.from(buf);
            }
            if (!Buffer3.isBuffer(buf)) {
              throw new TypeError('"list" argument must be an Array of Buffers');
            }
            buf.copy(buffer2, pos);
            pos += buf.length;
          }
          return buffer2;
        };
        function byteLength2(string, encoding) {
          if (Buffer3.isBuffer(string)) {
            return string.length;
          }
          if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {
            return string.byteLength;
          }
          if (typeof string !== "string") {
            throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type ' + typeof string);
          }
          var len2 = string.length;
          var mustMatch = arguments.length > 2 && arguments[2] === true;
          if (!mustMatch && len2 === 0)
            return 0;
          var loweredCase = false;
          for (; ; ) {
            switch (encoding) {
              case "ascii":
              case "latin1":
              case "binary":
                return len2;
              case "utf8":
              case "utf-8":
                return utf8ToBytes(string).length;
              case "ucs2":
              case "ucs-2":
              case "utf16le":
              case "utf-16le":
                return len2 * 2;
              case "hex":
                return len2 >>> 1;
              case "base64":
                return base64ToBytes(string).length;
              default:
                if (loweredCase) {
                  return mustMatch ? -1 : utf8ToBytes(string).length;
                }
                encoding = ("" + encoding).toLowerCase();
                loweredCase = true;
            }
          }
        }
        Buffer3.byteLength = byteLength2;
        function slowToString(encoding, start2, end) {
          var loweredCase = false;
          if (start2 === void 0 || start2 < 0) {
            start2 = 0;
          }
          if (start2 > this.length) {
            return "";
          }
          if (end === void 0 || end > this.length) {
            end = this.length;
          }
          if (end <= 0) {
            return "";
          }
          end >>>= 0;
          start2 >>>= 0;
          if (end <= start2) {
            return "";
          }
          if (!encoding)
            encoding = "utf8";
          while (true) {
            switch (encoding) {
              case "hex":
                return hexSlice(this, start2, end);
              case "utf8":
              case "utf-8":
                return utf8Slice(this, start2, end);
              case "ascii":
                return asciiSlice(this, start2, end);
              case "latin1":
              case "binary":
                return latin1Slice(this, start2, end);
              case "base64":
                return base64Slice(this, start2, end);
              case "ucs2":
              case "ucs-2":
              case "utf16le":
              case "utf-16le":
                return utf16leSlice(this, start2, end);
              default:
                if (loweredCase)
                  throw new TypeError("Unknown encoding: " + encoding);
                encoding = (encoding + "").toLowerCase();
                loweredCase = true;
            }
          }
        }
        Buffer3.prototype._isBuffer = true;
        function swap(b, n, m) {
          var i2 = b[n];
          b[n] = b[m];
          b[m] = i2;
        }
        Buffer3.prototype.swap16 = function swap16() {
          var len2 = this.length;
          if (len2 % 2 !== 0) {
            throw new RangeError("Buffer size must be a multiple of 16-bits");
          }
          for (var i2 = 0; i2 < len2; i2 += 2) {
            swap(this, i2, i2 + 1);
          }
          return this;
        };
        Buffer3.prototype.swap32 = function swap32() {
          var len2 = this.length;
          if (len2 % 4 !== 0) {
            throw new RangeError("Buffer size must be a multiple of 32-bits");
          }
          for (var i2 = 0; i2 < len2; i2 += 4) {
            swap(this, i2, i2 + 3);
            swap(this, i2 + 1, i2 + 2);
          }
          return this;
        };
        Buffer3.prototype.swap64 = function swap64() {
          var len2 = this.length;
          if (len2 % 8 !== 0) {
            throw new RangeError("Buffer size must be a multiple of 64-bits");
          }
          for (var i2 = 0; i2 < len2; i2 += 8) {
            swap(this, i2, i2 + 7);
            swap(this, i2 + 1, i2 + 6);
            swap(this, i2 + 2, i2 + 5);
            swap(this, i2 + 3, i2 + 4);
          }
          return this;
        };
        Buffer3.prototype.toString = function toString() {
          var length = this.length;
          if (length === 0)
            return "";
          if (arguments.length === 0)
            return utf8Slice(this, 0, length);
          return slowToString.apply(this, arguments);
        };
        Buffer3.prototype.toLocaleString = Buffer3.prototype.toString;
        Buffer3.prototype.equals = function equals(b) {
          if (!Buffer3.isBuffer(b))
            throw new TypeError("Argument must be a Buffer");
          if (this === b)
            return true;
          return Buffer3.compare(this, b) === 0;
        };
        Buffer3.prototype.inspect = function inspect2() {
          var str = "";
          var max = exports2.INSPECT_MAX_BYTES;
          str = this.toString("hex", 0, max).replace(/(.{2})/g, "$1 ").trim();
          if (this.length > max)
            str += " ... ";
          return "<Buffer " + str + ">";
        };
        Buffer3.prototype.compare = function compare(target, start2, end, thisStart, thisEnd) {
          if (isInstance(target, Uint8Array)) {
            target = Buffer3.from(target, target.offset, target.byteLength);
          }
          if (!Buffer3.isBuffer(target)) {
            throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type ' + typeof target);
          }
          if (start2 === void 0) {
            start2 = 0;
          }
          if (end === void 0) {
            end = target ? target.length : 0;
          }
          if (thisStart === void 0) {
            thisStart = 0;
          }
          if (thisEnd === void 0) {
            thisEnd = this.length;
          }
          if (start2 < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
            throw new RangeError("out of range index");
          }
          if (thisStart >= thisEnd && start2 >= end) {
            return 0;
          }
          if (thisStart >= thisEnd) {
            return -1;
          }
          if (start2 >= end) {
            return 1;
          }
          start2 >>>= 0;
          end >>>= 0;
          thisStart >>>= 0;
          thisEnd >>>= 0;
          if (this === target)
            return 0;
          var x = thisEnd - thisStart;
          var y = end - start2;
          var len2 = Math.min(x, y);
          var thisCopy = this.slice(thisStart, thisEnd);
          var targetCopy = target.slice(start2, end);
          for (var i2 = 0; i2 < len2; ++i2) {
            if (thisCopy[i2] !== targetCopy[i2]) {
              x = thisCopy[i2];
              y = targetCopy[i2];
              break;
            }
          }
          if (x < y)
            return -1;
          if (y < x)
            return 1;
          return 0;
        };
        function bidirectionalIndexOf(buffer2, val, byteOffset, encoding, dir) {
          if (buffer2.length === 0)
            return -1;
          if (typeof byteOffset === "string") {
            encoding = byteOffset;
            byteOffset = 0;
          } else if (byteOffset > 2147483647) {
            byteOffset = 2147483647;
          } else if (byteOffset < -2147483648) {
            byteOffset = -2147483648;
          }
          byteOffset = +byteOffset;
          if (numberIsNaN(byteOffset)) {
            byteOffset = dir ? 0 : buffer2.length - 1;
          }
          if (byteOffset < 0)
            byteOffset = buffer2.length + byteOffset;
          if (byteOffset >= buffer2.length) {
            if (dir)
              return -1;
            else
              byteOffset = buffer2.length - 1;
          } else if (byteOffset < 0) {
            if (dir)
              byteOffset = 0;
            else
              return -1;
          }
          if (typeof val === "string") {
            val = Buffer3.from(val, encoding);
          }
          if (Buffer3.isBuffer(val)) {
            if (val.length === 0) {
              return -1;
            }
            return arrayIndexOf(buffer2, val, byteOffset, encoding, dir);
          } else if (typeof val === "number") {
            val = val & 255;
            if (typeof Uint8Array.prototype.indexOf === "function") {
              if (dir) {
                return Uint8Array.prototype.indexOf.call(buffer2, val, byteOffset);
              } else {
                return Uint8Array.prototype.lastIndexOf.call(buffer2, val, byteOffset);
              }
            }
            return arrayIndexOf(buffer2, [val], byteOffset, encoding, dir);
          }
          throw new TypeError("val must be string, number or Buffer");
        }
        function arrayIndexOf(arr, val, byteOffset, encoding, dir) {
          var indexSize = 1;
          var arrLength = arr.length;
          var valLength = val.length;
          if (encoding !== void 0) {
            encoding = String(encoding).toLowerCase();
            if (encoding === "ucs2" || encoding === "ucs-2" || encoding === "utf16le" || encoding === "utf-16le") {
              if (arr.length < 2 || val.length < 2) {
                return -1;
              }
              indexSize = 2;
              arrLength /= 2;
              valLength /= 2;
              byteOffset /= 2;
            }
          }
          function read(buf, i3) {
            if (indexSize === 1) {
              return buf[i3];
            } else {
              return buf.readUInt16BE(i3 * indexSize);
            }
          }
          var i2;
          if (dir) {
            var foundIndex = -1;
            for (i2 = byteOffset; i2 < arrLength; i2++) {
              if (read(arr, i2) === read(val, foundIndex === -1 ? 0 : i2 - foundIndex)) {
                if (foundIndex === -1)
                  foundIndex = i2;
                if (i2 - foundIndex + 1 === valLength)
                  return foundIndex * indexSize;
              } else {
                if (foundIndex !== -1)
                  i2 -= i2 - foundIndex;
                foundIndex = -1;
              }
            }
          } else {
            if (byteOffset + valLength > arrLength)
              byteOffset = arrLength - valLength;
            for (i2 = byteOffset; i2 >= 0; i2--) {
              var found = true;
              for (var j = 0; j < valLength; j++) {
                if (read(arr, i2 + j) !== read(val, j)) {
                  found = false;
                  break;
                }
              }
              if (found)
                return i2;
            }
          }
          return -1;
        }
        Buffer3.prototype.includes = function includes2(val, byteOffset, encoding) {
          return this.indexOf(val, byteOffset, encoding) !== -1;
        };
        Buffer3.prototype.indexOf = function indexOf2(val, byteOffset, encoding) {
          return bidirectionalIndexOf(this, val, byteOffset, encoding, true);
        };
        Buffer3.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {
          return bidirectionalIndexOf(this, val, byteOffset, encoding, false);
        };
        function hexWrite(buf, string, offset, length) {
          offset = Number(offset) || 0;
          var remaining = buf.length - offset;
          if (!length) {
            length = remaining;
          } else {
            length = Number(length);
            if (length > remaining) {
              length = remaining;
            }
          }
          var strLen = string.length;
          if (length > strLen / 2) {
            length = strLen / 2;
          }
          for (var i2 = 0; i2 < length; ++i2) {
            var parsed = parseInt(string.substr(i2 * 2, 2), 16);
            if (numberIsNaN(parsed))
              return i2;
            buf[offset + i2] = parsed;
          }
          return i2;
        }
        function utf8Write(buf, string, offset, length) {
          return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);
        }
        function asciiWrite(buf, string, offset, length) {
          return blitBuffer(asciiToBytes(string), buf, offset, length);
        }
        function latin1Write(buf, string, offset, length) {
          return asciiWrite(buf, string, offset, length);
        }
        function base64Write(buf, string, offset, length) {
          return blitBuffer(base64ToBytes(string), buf, offset, length);
        }
        function ucs2Write(buf, string, offset, length) {
          return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);
        }
        Buffer3.prototype.write = function write(string, offset, length, encoding) {
          if (offset === void 0) {
            encoding = "utf8";
            length = this.length;
            offset = 0;
          } else if (length === void 0 && typeof offset === "string") {
            encoding = offset;
            length = this.length;
            offset = 0;
          } else if (isFinite(offset)) {
            offset = offset >>> 0;
            if (isFinite(length)) {
              length = length >>> 0;
              if (encoding === void 0)
                encoding = "utf8";
            } else {
              encoding = length;
              length = void 0;
            }
          } else {
            throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
          }
          var remaining = this.length - offset;
          if (length === void 0 || length > remaining)
            length = remaining;
          if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {
            throw new RangeError("Attempt to write outside buffer bounds");
          }
          if (!encoding)
            encoding = "utf8";
          var loweredCase = false;
          for (; ; ) {
            switch (encoding) {
              case "hex":
                return hexWrite(this, string, offset, length);
              case "utf8":
              case "utf-8":
                return utf8Write(this, string, offset, length);
              case "ascii":
                return asciiWrite(this, string, offset, length);
              case "latin1":
              case "binary":
                return latin1Write(this, string, offset, length);
              case "base64":
                return base64Write(this, string, offset, length);
              case "ucs2":
              case "ucs-2":
              case "utf16le":
              case "utf-16le":
                return ucs2Write(this, string, offset, length);
              default:
                if (loweredCase)
                  throw new TypeError("Unknown encoding: " + encoding);
                encoding = ("" + encoding).toLowerCase();
                loweredCase = true;
            }
          }
        };
        Buffer3.prototype.toJSON = function toJSON() {
          return {
            type: "Buffer",
            data: Array.prototype.slice.call(this._arr || this, 0)
          };
        };
        function base64Slice(buf, start2, end) {
          if (start2 === 0 && end === buf.length) {
            return base64.fromByteArray(buf);
          } else {
            return base64.fromByteArray(buf.slice(start2, end));
          }
        }
        function utf8Slice(buf, start2, end) {
          end = Math.min(buf.length, end);
          var res = [];
          var i2 = start2;
          while (i2 < end) {
            var firstByte = buf[i2];
            var codePoint = null;
            var bytesPerSequence = firstByte > 239 ? 4 : firstByte > 223 ? 3 : firstByte > 191 ? 2 : 1;
            if (i2 + bytesPerSequence <= end) {
              var secondByte, thirdByte, fourthByte, tempCodePoint;
              switch (bytesPerSequence) {
                case 1:
                  if (firstByte < 128) {
                    codePoint = firstByte;
                  }
                  break;
                case 2:
                  secondByte = buf[i2 + 1];
                  if ((secondByte & 192) === 128) {
                    tempCodePoint = (firstByte & 31) << 6 | secondByte & 63;
                    if (tempCodePoint > 127) {
                      codePoint = tempCodePoint;
                    }
                  }
                  break;
                case 3:
                  secondByte = buf[i2 + 1];
                  thirdByte = buf[i2 + 2];
                  if ((secondByte & 192) === 128 && (thirdByte & 192) === 128) {
                    tempCodePoint = (firstByte & 15) << 12 | (secondByte & 63) << 6 | thirdByte & 63;
                    if (tempCodePoint > 2047 && (tempCodePoint < 55296 || tempCodePoint > 57343)) {
                      codePoint = tempCodePoint;
                    }
                  }
                  break;
                case 4:
                  secondByte = buf[i2 + 1];
                  thirdByte = buf[i2 + 2];
                  fourthByte = buf[i2 + 3];
                  if ((secondByte & 192) === 128 && (thirdByte & 192) === 128 && (fourthByte & 192) === 128) {
                    tempCodePoint = (firstByte & 15) << 18 | (secondByte & 63) << 12 | (thirdByte & 63) << 6 | fourthByte & 63;
                    if (tempCodePoint > 65535 && tempCodePoint < 1114112) {
                      codePoint = tempCodePoint;
                    }
                  }
              }
            }
            if (codePoint === null) {
              codePoint = 65533;
              bytesPerSequence = 1;
            } else if (codePoint > 65535) {
              codePoint -= 65536;
              res.push(codePoint >>> 10 & 1023 | 55296);
              codePoint = 56320 | codePoint & 1023;
            }
            res.push(codePoint);
            i2 += bytesPerSequence;
          }
          return decodeCodePointsArray(res);
        }
        var MAX_ARGUMENTS_LENGTH = 4096;
        function decodeCodePointsArray(codePoints) {
          var len2 = codePoints.length;
          if (len2 <= MAX_ARGUMENTS_LENGTH) {
            return String.fromCharCode.apply(String, codePoints);
          }
          var res = "";
          var i2 = 0;
          while (i2 < len2) {
            res += String.fromCharCode.apply(String, codePoints.slice(i2, i2 += MAX_ARGUMENTS_LENGTH));
          }
          return res;
        }
        function asciiSlice(buf, start2, end) {
          var ret = "";
          end = Math.min(buf.length, end);
          for (var i2 = start2; i2 < end; ++i2) {
            ret += String.fromCharCode(buf[i2] & 127);
          }
          return ret;
        }
        function latin1Slice(buf, start2, end) {
          var ret = "";
          end = Math.min(buf.length, end);
          for (var i2 = start2; i2 < end; ++i2) {
            ret += String.fromCharCode(buf[i2]);
          }
          return ret;
        }
        function hexSlice(buf, start2, end) {
          var len2 = buf.length;
          if (!start2 || start2 < 0)
            start2 = 0;
          if (!end || end < 0 || end > len2)
            end = len2;
          var out = "";
          for (var i2 = start2; i2 < end; ++i2) {
            out += toHex(buf[i2]);
          }
          return out;
        }
        function utf16leSlice(buf, start2, end) {
          var bytes = buf.slice(start2, end);
          var res = "";
          for (var i2 = 0; i2 < bytes.length; i2 += 2) {
            res += String.fromCharCode(bytes[i2] + bytes[i2 + 1] * 256);
          }
          return res;
        }
        Buffer3.prototype.slice = function slice(start2, end) {
          var len2 = this.length;
          start2 = ~~start2;
          end = end === void 0 ? len2 : ~~end;
          if (start2 < 0) {
            start2 += len2;
            if (start2 < 0)
              start2 = 0;
          } else if (start2 > len2) {
            start2 = len2;
          }
          if (end < 0) {
            end += len2;
            if (end < 0)
              end = 0;
          } else if (end > len2) {
            end = len2;
          }
          if (end < start2)
            end = start2;
          var newBuf = this.subarray(start2, end);
          newBuf.__proto__ = Buffer3.prototype;
          return newBuf;
        };
        function checkOffset(offset, ext, length) {
          if (offset % 1 !== 0 || offset < 0)
            throw new RangeError("offset is not uint");
          if (offset + ext > length)
            throw new RangeError("Trying to access beyond buffer length");
        }
        Buffer3.prototype.readUIntLE = function readUIntLE(offset, byteLength3, noAssert) {
          offset = offset >>> 0;
          byteLength3 = byteLength3 >>> 0;
          if (!noAssert)
            checkOffset(offset, byteLength3, this.length);
          var val = this[offset];
          var mul = 1;
          var i2 = 0;
          while (++i2 < byteLength3 && (mul *= 256)) {
            val += this[offset + i2] * mul;
          }
          return val;
        };
        Buffer3.prototype.readUIntBE = function readUIntBE(offset, byteLength3, noAssert) {
          offset = offset >>> 0;
          byteLength3 = byteLength3 >>> 0;
          if (!noAssert) {
            checkOffset(offset, byteLength3, this.length);
          }
          var val = this[offset + --byteLength3];
          var mul = 1;
          while (byteLength3 > 0 && (mul *= 256)) {
            val += this[offset + --byteLength3] * mul;
          }
          return val;
        };
        Buffer3.prototype.readUInt8 = function readUInt8(offset, noAssert) {
          offset = offset >>> 0;
          if (!noAssert)
            checkOffset(offset, 1, this.length);
          return this[offset];
        };
        Buffer3.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {
          offset = offset >>> 0;
          if (!noAssert)
            checkOffset(offset, 2, this.length);
          return this[offset] | this[offset + 1] << 8;
        };
        Buffer3.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {
          offset = offset >>> 0;
          if (!noAssert)
            checkOffset(offset, 2, this.length);
          return this[offset] << 8 | this[offset + 1];
        };
        Buffer3.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {
          offset = offset >>> 0;
          if (!noAssert)
            checkOffset(offset, 4, this.length);
          return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 16777216;
        };
        Buffer3.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {
          offset = offset >>> 0;
          if (!noAssert)
            checkOffset(offset, 4, this.length);
          return this[offset] * 16777216 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);
        };
        Buffer3.prototype.readIntLE = function readIntLE(offset, byteLength3, noAssert) {
          offset = offset >>> 0;
          byteLength3 = byteLength3 >>> 0;
          if (!noAssert)
            checkOffset(offset, byteLength3, this.length);
          var val = this[offset];
          var mul = 1;
          var i2 = 0;
          while (++i2 < byteLength3 && (mul *= 256)) {
            val += this[offset + i2] * mul;
          }
          mul *= 128;
          if (val >= mul)
            val -= Math.pow(2, 8 * byteLength3);
          return val;
        };
        Buffer3.prototype.readIntBE = function readIntBE(offset, byteLength3, noAssert) {
          offset = offset >>> 0;
          byteLength3 = byteLength3 >>> 0;
          if (!noAssert)
            checkOffset(offset, byteLength3, this.length);
          var i2 = byteLength3;
          var mul = 1;
          var val = this[offset + --i2];
          while (i2 > 0 && (mul *= 256)) {
            val += this[offset + --i2] * mul;
          }
          mul *= 128;
          if (val >= mul)
            val -= Math.pow(2, 8 * byteLength3);
          return val;
        };
        Buffer3.prototype.readInt8 = function readInt8(offset, noAssert) {
          offset = offset >>> 0;
          if (!noAssert)
            checkOffset(offset, 1, this.length);
          if (!(this[offset] & 128))
            return this[offset];
          return (255 - this[offset] + 1) * -1;
        };
        Buffer3.prototype.readInt16LE = function readInt16LE(offset, noAssert) {
          offset = offset >>> 0;
          if (!noAssert)
            checkOffset(offset, 2, this.length);
          var val = this[offset] | this[offset + 1] << 8;
          return val & 32768 ? val | 4294901760 : val;
        };
        Buffer3.prototype.readInt16BE = function readInt16BE(offset, noAssert) {
          offset = offset >>> 0;
          if (!noAssert)
            checkOffset(offset, 2, this.length);
          var val = this[offset + 1] | this[offset] << 8;
          return val & 32768 ? val | 4294901760 : val;
        };
        Buffer3.prototype.readInt32LE = function readInt32LE(offset, noAssert) {
          offset = offset >>> 0;
          if (!noAssert)
            checkOffset(offset, 4, this.length);
          return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;
        };
        Buffer3.prototype.readInt32BE = function readInt32BE(offset, noAssert) {
          offset = offset >>> 0;
          if (!noAssert)
            checkOffset(offset, 4, this.length);
          return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];
        };
        Buffer3.prototype.readFloatLE = function readFloatLE(offset, noAssert) {
          offset = offset >>> 0;
          if (!noAssert)
            checkOffset(offset, 4, this.length);
          return ieee7542.read(this, offset, true, 23, 4);
        };
        Buffer3.prototype.readFloatBE = function readFloatBE(offset, noAssert) {
          offset = offset >>> 0;
          if (!noAssert)
            checkOffset(offset, 4, this.length);
          return ieee7542.read(this, offset, false, 23, 4);
        };
        Buffer3.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {
          offset = offset >>> 0;
          if (!noAssert)
            checkOffset(offset, 8, this.length);
          return ieee7542.read(this, offset, true, 52, 8);
        };
        Buffer3.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {
          offset = offset >>> 0;
          if (!noAssert)
            checkOffset(offset, 8, this.length);
          return ieee7542.read(this, offset, false, 52, 8);
        };
        function checkInt(buf, value, offset, ext, max, min) {
          if (!Buffer3.isBuffer(buf))
            throw new TypeError('"buffer" argument must be a Buffer instance');
          if (value > max || value < min)
            throw new RangeError('"value" argument is out of bounds');
          if (offset + ext > buf.length)
            throw new RangeError("Index out of range");
        }
        Buffer3.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength3, noAssert) {
          value = +value;
          offset = offset >>> 0;
          byteLength3 = byteLength3 >>> 0;
          if (!noAssert) {
            var maxBytes = Math.pow(2, 8 * byteLength3) - 1;
            checkInt(this, value, offset, byteLength3, maxBytes, 0);
          }
          var mul = 1;
          var i2 = 0;
          this[offset] = value & 255;
          while (++i2 < byteLength3 && (mul *= 256)) {
            this[offset + i2] = value / mul & 255;
          }
          return offset + byteLength3;
        };
        Buffer3.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength3, noAssert) {
          value = +value;
          offset = offset >>> 0;
          byteLength3 = byteLength3 >>> 0;
          if (!noAssert) {
            var maxBytes = Math.pow(2, 8 * byteLength3) - 1;
            checkInt(this, value, offset, byteLength3, maxBytes, 0);
          }
          var i2 = byteLength3 - 1;
          var mul = 1;
          this[offset + i2] = value & 255;
          while (--i2 >= 0 && (mul *= 256)) {
            this[offset + i2] = value / mul & 255;
          }
          return offset + byteLength3;
        };
        Buffer3.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {
          value = +value;
          offset = offset >>> 0;
          if (!noAssert)
            checkInt(this, value, offset, 1, 255, 0);
          this[offset] = value & 255;
          return offset + 1;
        };
        Buffer3.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {
          value = +value;
          offset = offset >>> 0;
          if (!noAssert)
            checkInt(this, value, offset, 2, 65535, 0);
          this[offset] = value & 255;
          this[offset + 1] = value >>> 8;
          return offset + 2;
        };
        Buffer3.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {
          value = +value;
          offset = offset >>> 0;
          if (!noAssert)
            checkInt(this, value, offset, 2, 65535, 0);
          this[offset] = value >>> 8;
          this[offset + 1] = value & 255;
          return offset + 2;
        };
        Buffer3.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {
          value = +value;
          offset = offset >>> 0;
          if (!noAssert)
            checkInt(this, value, offset, 4, 4294967295, 0);
          this[offset + 3] = value >>> 24;
          this[offset + 2] = value >>> 16;
          this[offset + 1] = value >>> 8;
          this[offset] = value & 255;
          return offset + 4;
        };
        Buffer3.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {
          value = +value;
          offset = offset >>> 0;
          if (!noAssert)
            checkInt(this, value, offset, 4, 4294967295, 0);
          this[offset] = value >>> 24;
          this[offset + 1] = value >>> 16;
          this[offset + 2] = value >>> 8;
          this[offset + 3] = value & 255;
          return offset + 4;
        };
        Buffer3.prototype.writeIntLE = function writeIntLE(value, offset, byteLength3, noAssert) {
          value = +value;
          offset = offset >>> 0;
          if (!noAssert) {
            var limit = Math.pow(2, 8 * byteLength3 - 1);
            checkInt(this, value, offset, byteLength3, limit - 1, -limit);
          }
          var i2 = 0;
          var mul = 1;
          var sub = 0;
          this[offset] = value & 255;
          while (++i2 < byteLength3 && (mul *= 256)) {
            if (value < 0 && sub === 0 && this[offset + i2 - 1] !== 0) {
              sub = 1;
            }
            this[offset + i2] = (value / mul >> 0) - sub & 255;
          }
          return offset + byteLength3;
        };
        Buffer3.prototype.writeIntBE = function writeIntBE(value, offset, byteLength3, noAssert) {
          value = +value;
          offset = offset >>> 0;
          if (!noAssert) {
            var limit = Math.pow(2, 8 * byteLength3 - 1);
            checkInt(this, value, offset, byteLength3, limit - 1, -limit);
          }
          var i2 = byteLength3 - 1;
          var mul = 1;
          var sub = 0;
          this[offset + i2] = value & 255;
          while (--i2 >= 0 && (mul *= 256)) {
            if (value < 0 && sub === 0 && this[offset + i2 + 1] !== 0) {
              sub = 1;
            }
            this[offset + i2] = (value / mul >> 0) - sub & 255;
          }
          return offset + byteLength3;
        };
        Buffer3.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {
          value = +value;
          offset = offset >>> 0;
          if (!noAssert)
            checkInt(this, value, offset, 1, 127, -128);
          if (value < 0)
            value = 255 + value + 1;
          this[offset] = value & 255;
          return offset + 1;
        };
        Buffer3.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {
          value = +value;
          offset = offset >>> 0;
          if (!noAssert)
            checkInt(this, value, offset, 2, 32767, -32768);
          this[offset] = value & 255;
          this[offset + 1] = value >>> 8;
          return offset + 2;
        };
        Buffer3.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {
          value = +value;
          offset = offset >>> 0;
          if (!noAssert)
            checkInt(this, value, offset, 2, 32767, -32768);
          this[offset] = value >>> 8;
          this[offset + 1] = value & 255;
          return offset + 2;
        };
        Buffer3.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {
          value = +value;
          offset = offset >>> 0;
          if (!noAssert)
            checkInt(this, value, offset, 4, 2147483647, -2147483648);
          this[offset] = value & 255;
          this[offset + 1] = value >>> 8;
          this[offset + 2] = value >>> 16;
          this[offset + 3] = value >>> 24;
          return offset + 4;
        };
        Buffer3.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {
          value = +value;
          offset = offset >>> 0;
          if (!noAssert)
            checkInt(this, value, offset, 4, 2147483647, -2147483648);
          if (value < 0)
            value = 4294967295 + value + 1;
          this[offset] = value >>> 24;
          this[offset + 1] = value >>> 16;
          this[offset + 2] = value >>> 8;
          this[offset + 3] = value & 255;
          return offset + 4;
        };
        function checkIEEE754(buf, value, offset, ext, max, min) {
          if (offset + ext > buf.length)
            throw new RangeError("Index out of range");
          if (offset < 0)
            throw new RangeError("Index out of range");
        }
        function writeFloat(buf, value, offset, littleEndian, noAssert) {
          value = +value;
          offset = offset >>> 0;
          if (!noAssert) {
            checkIEEE754(buf, value, offset, 4);
          }
          ieee7542.write(buf, value, offset, littleEndian, 23, 4);
          return offset + 4;
        }
        Buffer3.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {
          return writeFloat(this, value, offset, true, noAssert);
        };
        Buffer3.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {
          return writeFloat(this, value, offset, false, noAssert);
        };
        function writeDouble(buf, value, offset, littleEndian, noAssert) {
          value = +value;
          offset = offset >>> 0;
          if (!noAssert) {
            checkIEEE754(buf, value, offset, 8);
          }
          ieee7542.write(buf, value, offset, littleEndian, 52, 8);
          return offset + 8;
        }
        Buffer3.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {
          return writeDouble(this, value, offset, true, noAssert);
        };
        Buffer3.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {
          return writeDouble(this, value, offset, false, noAssert);
        };
        Buffer3.prototype.copy = function copy(target, targetStart, start2, end) {
          if (!Buffer3.isBuffer(target))
            throw new TypeError("argument should be a Buffer");
          if (!start2)
            start2 = 0;
          if (!end && end !== 0)
            end = this.length;
          if (targetStart >= target.length)
            targetStart = target.length;
          if (!targetStart)
            targetStart = 0;
          if (end > 0 && end < start2)
            end = start2;
          if (end === start2)
            return 0;
          if (target.length === 0 || this.length === 0)
            return 0;
          if (targetStart < 0) {
            throw new RangeError("targetStart out of bounds");
          }
          if (start2 < 0 || start2 >= this.length)
            throw new RangeError("Index out of range");
          if (end < 0)
            throw new RangeError("sourceEnd out of bounds");
          if (end > this.length)
            end = this.length;
          if (target.length - targetStart < end - start2) {
            end = target.length - targetStart + start2;
          }
          var len2 = end - start2;
          if (this === target && typeof Uint8Array.prototype.copyWithin === "function") {
            this.copyWithin(targetStart, start2, end);
          } else if (this === target && start2 < targetStart && targetStart < end) {
            for (var i2 = len2 - 1; i2 >= 0; --i2) {
              target[i2 + targetStart] = this[i2 + start2];
            }
          } else {
            Uint8Array.prototype.set.call(target, this.subarray(start2, end), targetStart);
          }
          return len2;
        };
        Buffer3.prototype.fill = function fill(val, start2, end, encoding) {
          if (typeof val === "string") {
            if (typeof start2 === "string") {
              encoding = start2;
              start2 = 0;
              end = this.length;
            } else if (typeof end === "string") {
              encoding = end;
              end = this.length;
            }
            if (encoding !== void 0 && typeof encoding !== "string") {
              throw new TypeError("encoding must be a string");
            }
            if (typeof encoding === "string" && !Buffer3.isEncoding(encoding)) {
              throw new TypeError("Unknown encoding: " + encoding);
            }
            if (val.length === 1) {
              var code2 = val.charCodeAt(0);
              if (encoding === "utf8" && code2 < 128 || encoding === "latin1") {
                val = code2;
              }
            }
          } else if (typeof val === "number") {
            val = val & 255;
          }
          if (start2 < 0 || this.length < start2 || this.length < end) {
            throw new RangeError("Out of range index");
          }
          if (end <= start2) {
            return this;
          }
          start2 = start2 >>> 0;
          end = end === void 0 ? this.length : end >>> 0;
          if (!val)
            val = 0;
          var i2;
          if (typeof val === "number") {
            for (i2 = start2; i2 < end; ++i2) {
              this[i2] = val;
            }
          } else {
            var bytes = Buffer3.isBuffer(val) ? val : Buffer3.from(val, encoding);
            var len2 = bytes.length;
            if (len2 === 0) {
              throw new TypeError('The value "' + val + '" is invalid for argument "value"');
            }
            for (i2 = 0; i2 < end - start2; ++i2) {
              this[i2 + start2] = bytes[i2 % len2];
            }
          }
          return this;
        };
        var INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g;
        function base64clean(str) {
          str = str.split("=")[0];
          str = str.trim().replace(INVALID_BASE64_RE, "");
          if (str.length < 2)
            return "";
          while (str.length % 4 !== 0) {
            str = str + "=";
          }
          return str;
        }
        function toHex(n) {
          if (n < 16)
            return "0" + n.toString(16);
          return n.toString(16);
        }
        function utf8ToBytes(string, units) {
          units = units || Infinity;
          var codePoint;
          var length = string.length;
          var leadSurrogate = null;
          var bytes = [];
          for (var i2 = 0; i2 < length; ++i2) {
            codePoint = string.charCodeAt(i2);
            if (codePoint > 55295 && codePoint < 57344) {
              if (!leadSurrogate) {
                if (codePoint > 56319) {
                  if ((units -= 3) > -1)
                    bytes.push(239, 191, 189);
                  continue;
                } else if (i2 + 1 === length) {
                  if ((units -= 3) > -1)
                    bytes.push(239, 191, 189);
                  continue;
                }
                leadSurrogate = codePoint;
                continue;
              }
              if (codePoint < 56320) {
                if ((units -= 3) > -1)
                  bytes.push(239, 191, 189);
                leadSurrogate = codePoint;
                continue;
              }
              codePoint = (leadSurrogate - 55296 << 10 | codePoint - 56320) + 65536;
            } else if (leadSurrogate) {
              if ((units -= 3) > -1)
                bytes.push(239, 191, 189);
            }
            leadSurrogate = null;
            if (codePoint < 128) {
              if ((units -= 1) < 0)
                break;
              bytes.push(codePoint);
            } else if (codePoint < 2048) {
              if ((units -= 2) < 0)
                break;
              bytes.push(codePoint >> 6 | 192, codePoint & 63 | 128);
            } else if (codePoint < 65536) {
              if ((units -= 3) < 0)
                break;
              bytes.push(codePoint >> 12 | 224, codePoint >> 6 & 63 | 128, codePoint & 63 | 128);
            } else if (codePoint < 1114112) {
              if ((units -= 4) < 0)
                break;
              bytes.push(codePoint >> 18 | 240, codePoint >> 12 & 63 | 128, codePoint >> 6 & 63 | 128, codePoint & 63 | 128);
            } else {
              throw new Error("Invalid code point");
            }
          }
          return bytes;
        }
        function asciiToBytes(str) {
          var byteArray = [];
          for (var i2 = 0; i2 < str.length; ++i2) {
            byteArray.push(str.charCodeAt(i2) & 255);
          }
          return byteArray;
        }
        function utf16leToBytes(str, units) {
          var c, hi, lo;
          var byteArray = [];
          for (var i2 = 0; i2 < str.length; ++i2) {
            if ((units -= 2) < 0)
              break;
            c = str.charCodeAt(i2);
            hi = c >> 8;
            lo = c % 256;
            byteArray.push(lo);
            byteArray.push(hi);
          }
          return byteArray;
        }
        function base64ToBytes(str) {
          return base64.toByteArray(base64clean(str));
        }
        function blitBuffer(src, dst, offset, length) {
          for (var i2 = 0; i2 < length; ++i2) {
            if (i2 + offset >= dst.length || i2 >= src.length)
              break;
            dst[i2 + offset] = src[i2];
          }
          return i2;
        }
        function isInstance(obj, type) {
          return obj instanceof type || obj != null && obj.constructor != null && obj.constructor.name != null && obj.constructor.name === type.name;
        }
        function numberIsNaN(obj) {
          return obj !== obj;
        }
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "base64-js": 2, "buffer": 83, "ieee754": 136 }], 84: [function(require2, module2, exports2) {
    var Buffer2 = require2("safe-buffer").Buffer;
    var Transform2 = require2("stream").Transform;
    var StringDecoder2 = require2("string_decoder").StringDecoder;
    var inherits = require2("inherits");
    function CipherBase(hashMode) {
      Transform2.call(this);
      this.hashMode = typeof hashMode === "string";
      if (this.hashMode) {
        this[hashMode] = this._finalOrDigest;
      } else {
        this.final = this._finalOrDigest;
      }
      if (this._final) {
        this.__final = this._final;
        this._final = null;
      }
      this._decoder = null;
      this._encoding = null;
    }
    inherits(CipherBase, Transform2);
    CipherBase.prototype.update = function(data, inputEnc, outputEnc) {
      if (typeof data === "string") {
        data = Buffer2.from(data, inputEnc);
      }
      var outData = this._update(data);
      if (this.hashMode)
        return this;
      if (outputEnc) {
        outData = this._toString(outData, outputEnc);
      }
      return outData;
    };
    CipherBase.prototype.setAutoPadding = function() {
    };
    CipherBase.prototype.getAuthTag = function() {
      throw new Error("trying to get auth tag in unsupported state");
    };
    CipherBase.prototype.setAuthTag = function() {
      throw new Error("trying to set auth tag in unsupported state");
    };
    CipherBase.prototype.setAAD = function() {
      throw new Error("trying to set aad in unsupported state");
    };
    CipherBase.prototype._transform = function(data, _, next2) {
      var err;
      try {
        if (this.hashMode) {
          this._update(data);
        } else {
          this.push(this._update(data));
        }
      } catch (e) {
        err = e;
      } finally {
        next2(err);
      }
    };
    CipherBase.prototype._flush = function(done2) {
      var err;
      try {
        this.push(this.__final());
      } catch (e) {
        err = e;
      }
      done2(err);
    };
    CipherBase.prototype._finalOrDigest = function(outputEnc) {
      var outData = this.__final() || Buffer2.alloc(0);
      if (outputEnc) {
        outData = this._toString(outData, outputEnc, true);
      }
      return outData;
    };
    CipherBase.prototype._toString = function(value, enc, fin) {
      if (!this._decoder) {
        this._decoder = new StringDecoder2(enc);
        this._encoding = enc;
      }
      if (this._encoding !== enc)
        throw new Error("can't switch encodings");
      var out = this._decoder.write(value);
      if (fin) {
        out += this._decoder.end();
      }
      return out;
    };
    module2.exports = CipherBase;
  }, { "inherits": 137, "safe-buffer": 147, "stream": 156, "string_decoder": 171 }], 85: [function(require2, module2, exports2) {
    var inherits = require2("inherits");
    var MD5 = require2("md5.js");
    var RIPEMD160 = require2("ripemd160");
    var sha = require2("sha.js");
    var Base = require2("cipher-base");
    function Hash(hash2) {
      Base.call(this, "digest");
      this._hash = hash2;
    }
    inherits(Hash, Base);
    Hash.prototype._update = function(data) {
      this._hash.update(data);
    };
    Hash.prototype._final = function() {
      return this._hash.digest();
    };
    module2.exports = function createHash(alg) {
      alg = alg.toLowerCase();
      if (alg === "md5")
        return new MD5();
      if (alg === "rmd160" || alg === "ripemd160")
        return new RIPEMD160();
      return new Hash(sha(alg));
    };
  }, { "cipher-base": 84, "inherits": 137, "md5.js": 139, "ripemd160": 146, "sha.js": 149 }], 86: [function(require2, module2, exports2) {
    var MD5 = require2("md5.js");
    module2.exports = function(buffer2) {
      return new MD5().update(buffer2).digest();
    };
  }, { "md5.js": 139 }], 87: [function(require2, module2, exports2) {
    var inherits = require2("inherits");
    var Legacy = require2("./legacy");
    var Base = require2("cipher-base");
    var Buffer2 = require2("safe-buffer").Buffer;
    var md5 = require2("create-hash/md5");
    var RIPEMD160 = require2("ripemd160");
    var sha = require2("sha.js");
    var ZEROS = Buffer2.alloc(128);
    function Hmac(alg, key) {
      Base.call(this, "digest");
      if (typeof key === "string") {
        key = Buffer2.from(key);
      }
      var blocksize = alg === "sha512" || alg === "sha384" ? 128 : 64;
      this._alg = alg;
      this._key = key;
      if (key.length > blocksize) {
        var hash2 = alg === "rmd160" ? new RIPEMD160() : sha(alg);
        key = hash2.update(key).digest();
      } else if (key.length < blocksize) {
        key = Buffer2.concat([key, ZEROS], blocksize);
      }
      var ipad = this._ipad = Buffer2.allocUnsafe(blocksize);
      var opad = this._opad = Buffer2.allocUnsafe(blocksize);
      for (var i2 = 0; i2 < blocksize; i2++) {
        ipad[i2] = key[i2] ^ 54;
        opad[i2] = key[i2] ^ 92;
      }
      this._hash = alg === "rmd160" ? new RIPEMD160() : sha(alg);
      this._hash.update(ipad);
    }
    inherits(Hmac, Base);
    Hmac.prototype._update = function(data) {
      this._hash.update(data);
    };
    Hmac.prototype._final = function() {
      var h = this._hash.digest();
      var hash2 = this._alg === "rmd160" ? new RIPEMD160() : sha(this._alg);
      return hash2.update(this._opad).update(h).digest();
    };
    module2.exports = function createHmac(alg, key) {
      alg = alg.toLowerCase();
      if (alg === "rmd160" || alg === "ripemd160") {
        return new Hmac("rmd160", key);
      }
      if (alg === "md5") {
        return new Legacy(md5, key);
      }
      return new Hmac(alg, key);
    };
  }, { "./legacy": 88, "cipher-base": 84, "create-hash/md5": 86, "inherits": 137, "ripemd160": 146, "safe-buffer": 147, "sha.js": 149 }], 88: [function(require2, module2, exports2) {
    var inherits = require2("inherits");
    var Buffer2 = require2("safe-buffer").Buffer;
    var Base = require2("cipher-base");
    var ZEROS = Buffer2.alloc(128);
    var blocksize = 64;
    function Hmac(alg, key) {
      Base.call(this, "digest");
      if (typeof key === "string") {
        key = Buffer2.from(key);
      }
      this._alg = alg;
      this._key = key;
      if (key.length > blocksize) {
        key = alg(key);
      } else if (key.length < blocksize) {
        key = Buffer2.concat([key, ZEROS], blocksize);
      }
      var ipad = this._ipad = Buffer2.allocUnsafe(blocksize);
      var opad = this._opad = Buffer2.allocUnsafe(blocksize);
      for (var i2 = 0; i2 < blocksize; i2++) {
        ipad[i2] = key[i2] ^ 54;
        opad[i2] = key[i2] ^ 92;
      }
      this._hash = [ipad];
    }
    inherits(Hmac, Base);
    Hmac.prototype._update = function(data) {
      this._hash.push(data);
    };
    Hmac.prototype._final = function() {
      var h = this._alg(Buffer2.concat(this._hash));
      return this._alg(Buffer2.concat([this._opad, h]));
    };
    module2.exports = Hmac;
  }, { "cipher-base": 84, "inherits": 137, "safe-buffer": 147 }], 89: [function(require2, module2, exports2) {
    var elliptic = exports2;
    elliptic.version = require2("../package.json").version;
    elliptic.utils = require2("./elliptic/utils");
    elliptic.rand = require2("brorand");
    elliptic.curve = require2("./elliptic/curve");
    elliptic.curves = require2("./elliptic/curves");
    elliptic.ec = require2("./elliptic/ec");
    elliptic.eddsa = require2("./elliptic/eddsa");
  }, { "../package.json": 105, "./elliptic/curve": 92, "./elliptic/curves": 95, "./elliptic/ec": 96, "./elliptic/eddsa": 99, "./elliptic/utils": 103, "brorand": 78 }], 90: [function(require2, module2, exports2) {
    var BN = require2("bn.js");
    var utils = require2("../utils");
    var getNAF = utils.getNAF;
    var getJSF = utils.getJSF;
    var assert = utils.assert;
    function BaseCurve(type, conf) {
      this.type = type;
      this.p = new BN(conf.p, 16);
      this.red = conf.prime ? BN.red(conf.prime) : BN.mont(this.p);
      this.zero = new BN(0).toRed(this.red);
      this.one = new BN(1).toRed(this.red);
      this.two = new BN(2).toRed(this.red);
      this.n = conf.n && new BN(conf.n, 16);
      this.g = conf.g && this.pointFromJSON(conf.g, conf.gRed);
      this._wnafT1 = new Array(4);
      this._wnafT2 = new Array(4);
      this._wnafT3 = new Array(4);
      this._wnafT4 = new Array(4);
      this._bitLength = this.n ? this.n.bitLength() : 0;
      var adjustCount = this.n && this.p.div(this.n);
      if (!adjustCount || adjustCount.cmpn(100) > 0) {
        this.redN = null;
      } else {
        this._maxwellTrick = true;
        this.redN = this.n.toRed(this.red);
      }
    }
    module2.exports = BaseCurve;
    BaseCurve.prototype.point = function point() {
      throw new Error("Not implemented");
    };
    BaseCurve.prototype.validate = function validate() {
      throw new Error("Not implemented");
    };
    BaseCurve.prototype._fixedNafMul = function _fixedNafMul(p2, k) {
      assert(p2.precomputed);
      var doubles = p2._getDoubles();
      var naf = getNAF(k, 1, this._bitLength);
      var I = (1 << doubles.step + 1) - (doubles.step % 2 === 0 ? 2 : 1);
      I /= 3;
      var repr = [];
      var j;
      var nafW;
      for (j = 0; j < naf.length; j += doubles.step) {
        nafW = 0;
        for (var l = j + doubles.step - 1; l >= j; l--)
          nafW = (nafW << 1) + naf[l];
        repr.push(nafW);
      }
      var a = this.jpoint(null, null, null);
      var b = this.jpoint(null, null, null);
      for (var i2 = I; i2 > 0; i2--) {
        for (j = 0; j < repr.length; j++) {
          nafW = repr[j];
          if (nafW === i2)
            b = b.mixedAdd(doubles.points[j]);
          else if (nafW === -i2)
            b = b.mixedAdd(doubles.points[j].neg());
        }
        a = a.add(b);
      }
      return a.toP();
    };
    BaseCurve.prototype._wnafMul = function _wnafMul(p2, k) {
      var w = 4;
      var nafPoints = p2._getNAFPoints(w);
      w = nafPoints.wnd;
      var wnd = nafPoints.points;
      var naf = getNAF(k, w, this._bitLength);
      var acc = this.jpoint(null, null, null);
      for (var i2 = naf.length - 1; i2 >= 0; i2--) {
        for (var l = 0; i2 >= 0 && naf[i2] === 0; i2--)
          l++;
        if (i2 >= 0)
          l++;
        acc = acc.dblp(l);
        if (i2 < 0)
          break;
        var z = naf[i2];
        assert(z !== 0);
        if (p2.type === "affine") {
          if (z > 0)
            acc = acc.mixedAdd(wnd[z - 1 >> 1]);
          else
            acc = acc.mixedAdd(wnd[-z - 1 >> 1].neg());
        } else {
          if (z > 0)
            acc = acc.add(wnd[z - 1 >> 1]);
          else
            acc = acc.add(wnd[-z - 1 >> 1].neg());
        }
      }
      return p2.type === "affine" ? acc.toP() : acc;
    };
    BaseCurve.prototype._wnafMulAdd = function _wnafMulAdd(defW, points, coeffs, len2, jacobianResult) {
      var wndWidth = this._wnafT1;
      var wnd = this._wnafT2;
      var naf = this._wnafT3;
      var max = 0;
      var i2;
      var j;
      var p2;
      for (i2 = 0; i2 < len2; i2++) {
        p2 = points[i2];
        var nafPoints = p2._getNAFPoints(defW);
        wndWidth[i2] = nafPoints.wnd;
        wnd[i2] = nafPoints.points;
      }
      for (i2 = len2 - 1; i2 >= 1; i2 -= 2) {
        var a = i2 - 1;
        var b = i2;
        if (wndWidth[a] !== 1 || wndWidth[b] !== 1) {
          naf[a] = getNAF(coeffs[a], wndWidth[a], this._bitLength);
          naf[b] = getNAF(coeffs[b], wndWidth[b], this._bitLength);
          max = Math.max(naf[a].length, max);
          max = Math.max(naf[b].length, max);
          continue;
        }
        var comb = [
          points[a],
          null,
          null,
          points[b]
        ];
        if (points[a].y.cmp(points[b].y) === 0) {
          comb[1] = points[a].add(points[b]);
          comb[2] = points[a].toJ().mixedAdd(points[b].neg());
        } else if (points[a].y.cmp(points[b].y.redNeg()) === 0) {
          comb[1] = points[a].toJ().mixedAdd(points[b]);
          comb[2] = points[a].add(points[b].neg());
        } else {
          comb[1] = points[a].toJ().mixedAdd(points[b]);
          comb[2] = points[a].toJ().mixedAdd(points[b].neg());
        }
        var index = [
          -3,
          -1,
          -5,
          -7,
          0,
          7,
          5,
          1,
          3
        ];
        var jsf = getJSF(coeffs[a], coeffs[b]);
        max = Math.max(jsf[0].length, max);
        naf[a] = new Array(max);
        naf[b] = new Array(max);
        for (j = 0; j < max; j++) {
          var ja = jsf[0][j] | 0;
          var jb = jsf[1][j] | 0;
          naf[a][j] = index[(ja + 1) * 3 + (jb + 1)];
          naf[b][j] = 0;
          wnd[a] = comb;
        }
      }
      var acc = this.jpoint(null, null, null);
      var tmp = this._wnafT4;
      for (i2 = max; i2 >= 0; i2--) {
        var k = 0;
        while (i2 >= 0) {
          var zero = true;
          for (j = 0; j < len2; j++) {
            tmp[j] = naf[j][i2] | 0;
            if (tmp[j] !== 0)
              zero = false;
          }
          if (!zero)
            break;
          k++;
          i2--;
        }
        if (i2 >= 0)
          k++;
        acc = acc.dblp(k);
        if (i2 < 0)
          break;
        for (j = 0; j < len2; j++) {
          var z = tmp[j];
          if (z === 0)
            continue;
          else if (z > 0)
            p2 = wnd[j][z - 1 >> 1];
          else if (z < 0)
            p2 = wnd[j][-z - 1 >> 1].neg();
          if (p2.type === "affine")
            acc = acc.mixedAdd(p2);
          else
            acc = acc.add(p2);
        }
      }
      for (i2 = 0; i2 < len2; i2++)
        wnd[i2] = null;
      if (jacobianResult)
        return acc;
      else
        return acc.toP();
    };
    function BasePoint(curve, type) {
      this.curve = curve;
      this.type = type;
      this.precomputed = null;
    }
    BaseCurve.BasePoint = BasePoint;
    BasePoint.prototype.eq = function eq() {
      throw new Error("Not implemented");
    };
    BasePoint.prototype.validate = function validate() {
      return this.curve.validate(this);
    };
    BaseCurve.prototype.decodePoint = function decodePoint(bytes, enc) {
      bytes = utils.toArray(bytes, enc);
      var len2 = this.p.byteLength();
      if ((bytes[0] === 4 || bytes[0] === 6 || bytes[0] === 7) && bytes.length - 1 === 2 * len2) {
        if (bytes[0] === 6)
          assert(bytes[bytes.length - 1] % 2 === 0);
        else if (bytes[0] === 7)
          assert(bytes[bytes.length - 1] % 2 === 1);
        var res = this.point(bytes.slice(1, 1 + len2), bytes.slice(1 + len2, 1 + 2 * len2));
        return res;
      } else if ((bytes[0] === 2 || bytes[0] === 3) && bytes.length - 1 === len2) {
        return this.pointFromX(bytes.slice(1, 1 + len2), bytes[0] === 3);
      }
      throw new Error("Unknown point format");
    };
    BasePoint.prototype.encodeCompressed = function encodeCompressed(enc) {
      return this.encode(enc, true);
    };
    BasePoint.prototype._encode = function _encode(compact) {
      var len2 = this.curve.p.byteLength();
      var x = this.getX().toArray("be", len2);
      if (compact)
        return [this.getY().isEven() ? 2 : 3].concat(x);
      return [4].concat(x, this.getY().toArray("be", len2));
    };
    BasePoint.prototype.encode = function encode(enc, compact) {
      return utils.encode(this._encode(compact), enc);
    };
    BasePoint.prototype.precompute = function precompute(power) {
      if (this.precomputed)
        return this;
      var precomputed = {
        doubles: null,
        naf: null,
        beta: null
      };
      precomputed.naf = this._getNAFPoints(8);
      precomputed.doubles = this._getDoubles(4, power);
      precomputed.beta = this._getBeta();
      this.precomputed = precomputed;
      return this;
    };
    BasePoint.prototype._hasDoubles = function _hasDoubles(k) {
      if (!this.precomputed)
        return false;
      var doubles = this.precomputed.doubles;
      if (!doubles)
        return false;
      return doubles.points.length >= Math.ceil((k.bitLength() + 1) / doubles.step);
    };
    BasePoint.prototype._getDoubles = function _getDoubles(step, power) {
      if (this.precomputed && this.precomputed.doubles)
        return this.precomputed.doubles;
      var doubles = [this];
      var acc = this;
      for (var i2 = 0; i2 < power; i2 += step) {
        for (var j = 0; j < step; j++)
          acc = acc.dbl();
        doubles.push(acc);
      }
      return {
        step,
        points: doubles
      };
    };
    BasePoint.prototype._getNAFPoints = function _getNAFPoints(wnd) {
      if (this.precomputed && this.precomputed.naf)
        return this.precomputed.naf;
      var res = [this];
      var max = (1 << wnd) - 1;
      var dbl = max === 1 ? null : this.dbl();
      for (var i2 = 1; i2 < max; i2++)
        res[i2] = res[i2 - 1].add(dbl);
      return {
        wnd,
        points: res
      };
    };
    BasePoint.prototype._getBeta = function _getBeta() {
      return null;
    };
    BasePoint.prototype.dblp = function dblp(k) {
      var r = this;
      for (var i2 = 0; i2 < k; i2++)
        r = r.dbl();
      return r;
    };
  }, { "../utils": 103, "bn.js": 104 }], 91: [function(require2, module2, exports2) {
    var utils = require2("../utils");
    var BN = require2("bn.js");
    var inherits = require2("inherits");
    var Base = require2("./base");
    var assert = utils.assert;
    function EdwardsCurve(conf) {
      this.twisted = (conf.a | 0) !== 1;
      this.mOneA = this.twisted && (conf.a | 0) === -1;
      this.extended = this.mOneA;
      Base.call(this, "edwards", conf);
      this.a = new BN(conf.a, 16).umod(this.red.m);
      this.a = this.a.toRed(this.red);
      this.c = new BN(conf.c, 16).toRed(this.red);
      this.c2 = this.c.redSqr();
      this.d = new BN(conf.d, 16).toRed(this.red);
      this.dd = this.d.redAdd(this.d);
      assert(!this.twisted || this.c.fromRed().cmpn(1) === 0);
      this.oneC = (conf.c | 0) === 1;
    }
    inherits(EdwardsCurve, Base);
    module2.exports = EdwardsCurve;
    EdwardsCurve.prototype._mulA = function _mulA(num) {
      if (this.mOneA)
        return num.redNeg();
      else
        return this.a.redMul(num);
    };
    EdwardsCurve.prototype._mulC = function _mulC(num) {
      if (this.oneC)
        return num;
      else
        return this.c.redMul(num);
    };
    EdwardsCurve.prototype.jpoint = function jpoint(x, y, z, t) {
      return this.point(x, y, z, t);
    };
    EdwardsCurve.prototype.pointFromX = function pointFromX(x, odd) {
      x = new BN(x, 16);
      if (!x.red)
        x = x.toRed(this.red);
      var x2 = x.redSqr();
      var rhs = this.c2.redSub(this.a.redMul(x2));
      var lhs = this.one.redSub(this.c2.redMul(this.d).redMul(x2));
      var y2 = rhs.redMul(lhs.redInvm());
      var y = y2.redSqrt();
      if (y.redSqr().redSub(y2).cmp(this.zero) !== 0)
        throw new Error("invalid point");
      var isOdd = y.fromRed().isOdd();
      if (odd && !isOdd || !odd && isOdd)
        y = y.redNeg();
      return this.point(x, y);
    };
    EdwardsCurve.prototype.pointFromY = function pointFromY(y, odd) {
      y = new BN(y, 16);
      if (!y.red)
        y = y.toRed(this.red);
      var y2 = y.redSqr();
      var lhs = y2.redSub(this.c2);
      var rhs = y2.redMul(this.d).redMul(this.c2).redSub(this.a);
      var x2 = lhs.redMul(rhs.redInvm());
      if (x2.cmp(this.zero) === 0) {
        if (odd)
          throw new Error("invalid point");
        else
          return this.point(this.zero, y);
      }
      var x = x2.redSqrt();
      if (x.redSqr().redSub(x2).cmp(this.zero) !== 0)
        throw new Error("invalid point");
      if (x.fromRed().isOdd() !== odd)
        x = x.redNeg();
      return this.point(x, y);
    };
    EdwardsCurve.prototype.validate = function validate(point) {
      if (point.isInfinity())
        return true;
      point.normalize();
      var x2 = point.x.redSqr();
      var y2 = point.y.redSqr();
      var lhs = x2.redMul(this.a).redAdd(y2);
      var rhs = this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));
      return lhs.cmp(rhs) === 0;
    };
    function Point(curve, x, y, z, t) {
      Base.BasePoint.call(this, curve, "projective");
      if (x === null && y === null && z === null) {
        this.x = this.curve.zero;
        this.y = this.curve.one;
        this.z = this.curve.one;
        this.t = this.curve.zero;
        this.zOne = true;
      } else {
        this.x = new BN(x, 16);
        this.y = new BN(y, 16);
        this.z = z ? new BN(z, 16) : this.curve.one;
        this.t = t && new BN(t, 16);
        if (!this.x.red)
          this.x = this.x.toRed(this.curve.red);
        if (!this.y.red)
          this.y = this.y.toRed(this.curve.red);
        if (!this.z.red)
          this.z = this.z.toRed(this.curve.red);
        if (this.t && !this.t.red)
          this.t = this.t.toRed(this.curve.red);
        this.zOne = this.z === this.curve.one;
        if (this.curve.extended && !this.t) {
          this.t = this.x.redMul(this.y);
          if (!this.zOne)
            this.t = this.t.redMul(this.z.redInvm());
        }
      }
    }
    inherits(Point, Base.BasePoint);
    EdwardsCurve.prototype.pointFromJSON = function pointFromJSON(obj) {
      return Point.fromJSON(this, obj);
    };
    EdwardsCurve.prototype.point = function point(x, y, z, t) {
      return new Point(this, x, y, z, t);
    };
    Point.fromJSON = function fromJSON(curve, obj) {
      return new Point(curve, obj[0], obj[1], obj[2]);
    };
    Point.prototype.inspect = function inspect2() {
      if (this.isInfinity())
        return "<EC Point Infinity>";
      return "<EC Point x: " + this.x.fromRed().toString(16, 2) + " y: " + this.y.fromRed().toString(16, 2) + " z: " + this.z.fromRed().toString(16, 2) + ">";
    };
    Point.prototype.isInfinity = function isInfinity() {
      return this.x.cmpn(0) === 0 && (this.y.cmp(this.z) === 0 || this.zOne && this.y.cmp(this.curve.c) === 0);
    };
    Point.prototype._extDbl = function _extDbl() {
      var a = this.x.redSqr();
      var b = this.y.redSqr();
      var c = this.z.redSqr();
      c = c.redIAdd(c);
      var d = this.curve._mulA(a);
      var e = this.x.redAdd(this.y).redSqr().redISub(a).redISub(b);
      var g = d.redAdd(b);
      var f = g.redSub(c);
      var h = d.redSub(b);
      var nx = e.redMul(f);
      var ny = g.redMul(h);
      var nt = e.redMul(h);
      var nz = f.redMul(g);
      return this.curve.point(nx, ny, nz, nt);
    };
    Point.prototype._projDbl = function _projDbl() {
      var b = this.x.redAdd(this.y).redSqr();
      var c = this.x.redSqr();
      var d = this.y.redSqr();
      var nx;
      var ny;
      var nz;
      var e;
      var h;
      var j;
      if (this.curve.twisted) {
        e = this.curve._mulA(c);
        var f = e.redAdd(d);
        if (this.zOne) {
          nx = b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two));
          ny = f.redMul(e.redSub(d));
          nz = f.redSqr().redSub(f).redSub(f);
        } else {
          h = this.z.redSqr();
          j = f.redSub(h).redISub(h);
          nx = b.redSub(c).redISub(d).redMul(j);
          ny = f.redMul(e.redSub(d));
          nz = f.redMul(j);
        }
      } else {
        e = c.redAdd(d);
        h = this.curve._mulC(this.z).redSqr();
        j = e.redSub(h).redSub(h);
        nx = this.curve._mulC(b.redISub(e)).redMul(j);
        ny = this.curve._mulC(e).redMul(c.redISub(d));
        nz = e.redMul(j);
      }
      return this.curve.point(nx, ny, nz);
    };
    Point.prototype.dbl = function dbl() {
      if (this.isInfinity())
        return this;
      if (this.curve.extended)
        return this._extDbl();
      else
        return this._projDbl();
    };
    Point.prototype._extAdd = function _extAdd(p2) {
      var a = this.y.redSub(this.x).redMul(p2.y.redSub(p2.x));
      var b = this.y.redAdd(this.x).redMul(p2.y.redAdd(p2.x));
      var c = this.t.redMul(this.curve.dd).redMul(p2.t);
      var d = this.z.redMul(p2.z.redAdd(p2.z));
      var e = b.redSub(a);
      var f = d.redSub(c);
      var g = d.redAdd(c);
      var h = b.redAdd(a);
      var nx = e.redMul(f);
      var ny = g.redMul(h);
      var nt = e.redMul(h);
      var nz = f.redMul(g);
      return this.curve.point(nx, ny, nz, nt);
    };
    Point.prototype._projAdd = function _projAdd(p2) {
      var a = this.z.redMul(p2.z);
      var b = a.redSqr();
      var c = this.x.redMul(p2.x);
      var d = this.y.redMul(p2.y);
      var e = this.curve.d.redMul(c).redMul(d);
      var f = b.redSub(e);
      var g = b.redAdd(e);
      var tmp = this.x.redAdd(this.y).redMul(p2.x.redAdd(p2.y)).redISub(c).redISub(d);
      var nx = a.redMul(f).redMul(tmp);
      var ny;
      var nz;
      if (this.curve.twisted) {
        ny = a.redMul(g).redMul(d.redSub(this.curve._mulA(c)));
        nz = f.redMul(g);
      } else {
        ny = a.redMul(g).redMul(d.redSub(c));
        nz = this.curve._mulC(f).redMul(g);
      }
      return this.curve.point(nx, ny, nz);
    };
    Point.prototype.add = function add(p2) {
      if (this.isInfinity())
        return p2;
      if (p2.isInfinity())
        return this;
      if (this.curve.extended)
        return this._extAdd(p2);
      else
        return this._projAdd(p2);
    };
    Point.prototype.mul = function mul(k) {
      if (this._hasDoubles(k))
        return this.curve._fixedNafMul(this, k);
      else
        return this.curve._wnafMul(this, k);
    };
    Point.prototype.mulAdd = function mulAdd(k1, p2, k2) {
      return this.curve._wnafMulAdd(1, [this, p2], [k1, k2], 2, false);
    };
    Point.prototype.jmulAdd = function jmulAdd(k1, p2, k2) {
      return this.curve._wnafMulAdd(1, [this, p2], [k1, k2], 2, true);
    };
    Point.prototype.normalize = function normalize() {
      if (this.zOne)
        return this;
      var zi = this.z.redInvm();
      this.x = this.x.redMul(zi);
      this.y = this.y.redMul(zi);
      if (this.t)
        this.t = this.t.redMul(zi);
      this.z = this.curve.one;
      this.zOne = true;
      return this;
    };
    Point.prototype.neg = function neg() {
      return this.curve.point(this.x.redNeg(), this.y, this.z, this.t && this.t.redNeg());
    };
    Point.prototype.getX = function getX() {
      this.normalize();
      return this.x.fromRed();
    };
    Point.prototype.getY = function getY() {
      this.normalize();
      return this.y.fromRed();
    };
    Point.prototype.eq = function eq(other) {
      return this === other || this.getX().cmp(other.getX()) === 0 && this.getY().cmp(other.getY()) === 0;
    };
    Point.prototype.eqXToP = function eqXToP(x) {
      var rx = x.toRed(this.curve.red).redMul(this.z);
      if (this.x.cmp(rx) === 0)
        return true;
      var xc = x.clone();
      var t = this.curve.redN.redMul(this.z);
      for (; ; ) {
        xc.iadd(this.curve.n);
        if (xc.cmp(this.curve.p) >= 0)
          return false;
        rx.redIAdd(t);
        if (this.x.cmp(rx) === 0)
          return true;
      }
    };
    Point.prototype.toP = Point.prototype.normalize;
    Point.prototype.mixedAdd = Point.prototype.add;
  }, { "../utils": 103, "./base": 90, "bn.js": 104, "inherits": 137 }], 92: [function(require2, module2, exports2) {
    var curve = exports2;
    curve.base = require2("./base");
    curve.short = require2("./short");
    curve.mont = require2("./mont");
    curve.edwards = require2("./edwards");
  }, { "./base": 90, "./edwards": 91, "./mont": 93, "./short": 94 }], 93: [function(require2, module2, exports2) {
    var BN = require2("bn.js");
    var inherits = require2("inherits");
    var Base = require2("./base");
    var utils = require2("../utils");
    function MontCurve(conf) {
      Base.call(this, "mont", conf);
      this.a = new BN(conf.a, 16).toRed(this.red);
      this.b = new BN(conf.b, 16).toRed(this.red);
      this.i4 = new BN(4).toRed(this.red).redInvm();
      this.two = new BN(2).toRed(this.red);
      this.a24 = this.i4.redMul(this.a.redAdd(this.two));
    }
    inherits(MontCurve, Base);
    module2.exports = MontCurve;
    MontCurve.prototype.validate = function validate(point) {
      var x = point.normalize().x;
      var x2 = x.redSqr();
      var rhs = x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x);
      var y = rhs.redSqrt();
      return y.redSqr().cmp(rhs) === 0;
    };
    function Point(curve, x, z) {
      Base.BasePoint.call(this, curve, "projective");
      if (x === null && z === null) {
        this.x = this.curve.one;
        this.z = this.curve.zero;
      } else {
        this.x = new BN(x, 16);
        this.z = new BN(z, 16);
        if (!this.x.red)
          this.x = this.x.toRed(this.curve.red);
        if (!this.z.red)
          this.z = this.z.toRed(this.curve.red);
      }
    }
    inherits(Point, Base.BasePoint);
    MontCurve.prototype.decodePoint = function decodePoint(bytes, enc) {
      return this.point(utils.toArray(bytes, enc), 1);
    };
    MontCurve.prototype.point = function point(x, z) {
      return new Point(this, x, z);
    };
    MontCurve.prototype.pointFromJSON = function pointFromJSON(obj) {
      return Point.fromJSON(this, obj);
    };
    Point.prototype.precompute = function precompute() {
    };
    Point.prototype._encode = function _encode() {
      return this.getX().toArray("be", this.curve.p.byteLength());
    };
    Point.fromJSON = function fromJSON(curve, obj) {
      return new Point(curve, obj[0], obj[1] || curve.one);
    };
    Point.prototype.inspect = function inspect2() {
      if (this.isInfinity())
        return "<EC Point Infinity>";
      return "<EC Point x: " + this.x.fromRed().toString(16, 2) + " z: " + this.z.fromRed().toString(16, 2) + ">";
    };
    Point.prototype.isInfinity = function isInfinity() {
      return this.z.cmpn(0) === 0;
    };
    Point.prototype.dbl = function dbl() {
      var a = this.x.redAdd(this.z);
      var aa = a.redSqr();
      var b = this.x.redSub(this.z);
      var bb = b.redSqr();
      var c = aa.redSub(bb);
      var nx = aa.redMul(bb);
      var nz = c.redMul(bb.redAdd(this.curve.a24.redMul(c)));
      return this.curve.point(nx, nz);
    };
    Point.prototype.add = function add() {
      throw new Error("Not supported on Montgomery curve");
    };
    Point.prototype.diffAdd = function diffAdd(p2, diff) {
      var a = this.x.redAdd(this.z);
      var b = this.x.redSub(this.z);
      var c = p2.x.redAdd(p2.z);
      var d = p2.x.redSub(p2.z);
      var da = d.redMul(a);
      var cb = c.redMul(b);
      var nx = diff.z.redMul(da.redAdd(cb).redSqr());
      var nz = diff.x.redMul(da.redISub(cb).redSqr());
      return this.curve.point(nx, nz);
    };
    Point.prototype.mul = function mul(k) {
      var t = k.clone();
      var a = this;
      var b = this.curve.point(null, null);
      var c = this;
      for (var bits = []; t.cmpn(0) !== 0; t.iushrn(1))
        bits.push(t.andln(1));
      for (var i2 = bits.length - 1; i2 >= 0; i2--) {
        if (bits[i2] === 0) {
          a = a.diffAdd(b, c);
          b = b.dbl();
        } else {
          b = a.diffAdd(b, c);
          a = a.dbl();
        }
      }
      return b;
    };
    Point.prototype.mulAdd = function mulAdd() {
      throw new Error("Not supported on Montgomery curve");
    };
    Point.prototype.jumlAdd = function jumlAdd() {
      throw new Error("Not supported on Montgomery curve");
    };
    Point.prototype.eq = function eq(other) {
      return this.getX().cmp(other.getX()) === 0;
    };
    Point.prototype.normalize = function normalize() {
      this.x = this.x.redMul(this.z.redInvm());
      this.z = this.curve.one;
      return this;
    };
    Point.prototype.getX = function getX() {
      this.normalize();
      return this.x.fromRed();
    };
  }, { "../utils": 103, "./base": 90, "bn.js": 104, "inherits": 137 }], 94: [function(require2, module2, exports2) {
    var utils = require2("../utils");
    var BN = require2("bn.js");
    var inherits = require2("inherits");
    var Base = require2("./base");
    var assert = utils.assert;
    function ShortCurve(conf) {
      Base.call(this, "short", conf);
      this.a = new BN(conf.a, 16).toRed(this.red);
      this.b = new BN(conf.b, 16).toRed(this.red);
      this.tinv = this.two.redInvm();
      this.zeroA = this.a.fromRed().cmpn(0) === 0;
      this.threeA = this.a.fromRed().sub(this.p).cmpn(-3) === 0;
      this.endo = this._getEndomorphism(conf);
      this._endoWnafT1 = new Array(4);
      this._endoWnafT2 = new Array(4);
    }
    inherits(ShortCurve, Base);
    module2.exports = ShortCurve;
    ShortCurve.prototype._getEndomorphism = function _getEndomorphism(conf) {
      if (!this.zeroA || !this.g || !this.n || this.p.modn(3) !== 1)
        return;
      var beta;
      var lambda;
      if (conf.beta) {
        beta = new BN(conf.beta, 16).toRed(this.red);
      } else {
        var betas = this._getEndoRoots(this.p);
        beta = betas[0].cmp(betas[1]) < 0 ? betas[0] : betas[1];
        beta = beta.toRed(this.red);
      }
      if (conf.lambda) {
        lambda = new BN(conf.lambda, 16);
      } else {
        var lambdas = this._getEndoRoots(this.n);
        if (this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta)) === 0) {
          lambda = lambdas[0];
        } else {
          lambda = lambdas[1];
          assert(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta)) === 0);
        }
      }
      var basis;
      if (conf.basis) {
        basis = conf.basis.map(function(vec) {
          return {
            a: new BN(vec.a, 16),
            b: new BN(vec.b, 16)
          };
        });
      } else {
        basis = this._getEndoBasis(lambda);
      }
      return {
        beta,
        lambda,
        basis
      };
    };
    ShortCurve.prototype._getEndoRoots = function _getEndoRoots(num) {
      var red = num === this.p ? this.red : BN.mont(num);
      var tinv = new BN(2).toRed(red).redInvm();
      var ntinv = tinv.redNeg();
      var s = new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);
      var l1 = ntinv.redAdd(s).fromRed();
      var l2 = ntinv.redSub(s).fromRed();
      return [l1, l2];
    };
    ShortCurve.prototype._getEndoBasis = function _getEndoBasis(lambda) {
      var aprxSqrt = this.n.ushrn(Math.floor(this.n.bitLength() / 2));
      var u = lambda;
      var v2 = this.n.clone();
      var x1 = new BN(1);
      var y1 = new BN(0);
      var x2 = new BN(0);
      var y2 = new BN(1);
      var a0;
      var b0;
      var a1;
      var b1;
      var a2;
      var b2;
      var prevR;
      var i2 = 0;
      var r;
      var x;
      while (u.cmpn(0) !== 0) {
        var q = v2.div(u);
        r = v2.sub(q.mul(u));
        x = x2.sub(q.mul(x1));
        var y = y2.sub(q.mul(y1));
        if (!a1 && r.cmp(aprxSqrt) < 0) {
          a0 = prevR.neg();
          b0 = x1;
          a1 = r.neg();
          b1 = x;
        } else if (a1 && ++i2 === 2) {
          break;
        }
        prevR = r;
        v2 = u;
        u = r;
        x2 = x1;
        x1 = x;
        y2 = y1;
        y1 = y;
      }
      a2 = r.neg();
      b2 = x;
      var len1 = a1.sqr().add(b1.sqr());
      var len2 = a2.sqr().add(b2.sqr());
      if (len2.cmp(len1) >= 0) {
        a2 = a0;
        b2 = b0;
      }
      if (a1.negative) {
        a1 = a1.neg();
        b1 = b1.neg();
      }
      if (a2.negative) {
        a2 = a2.neg();
        b2 = b2.neg();
      }
      return [
        { a: a1, b: b1 },
        { a: a2, b: b2 }
      ];
    };
    ShortCurve.prototype._endoSplit = function _endoSplit(k) {
      var basis = this.endo.basis;
      var v1 = basis[0];
      var v2 = basis[1];
      var c1 = v2.b.mul(k).divRound(this.n);
      var c2 = v1.b.neg().mul(k).divRound(this.n);
      var p1 = c1.mul(v1.a);
      var p2 = c2.mul(v2.a);
      var q1 = c1.mul(v1.b);
      var q2 = c2.mul(v2.b);
      var k1 = k.sub(p1).sub(p2);
      var k2 = q1.add(q2).neg();
      return { k1, k2 };
    };
    ShortCurve.prototype.pointFromX = function pointFromX(x, odd) {
      x = new BN(x, 16);
      if (!x.red)
        x = x.toRed(this.red);
      var y2 = x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);
      var y = y2.redSqrt();
      if (y.redSqr().redSub(y2).cmp(this.zero) !== 0)
        throw new Error("invalid point");
      var isOdd = y.fromRed().isOdd();
      if (odd && !isOdd || !odd && isOdd)
        y = y.redNeg();
      return this.point(x, y);
    };
    ShortCurve.prototype.validate = function validate(point) {
      if (point.inf)
        return true;
      var x = point.x;
      var y = point.y;
      var ax = this.a.redMul(x);
      var rhs = x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);
      return y.redSqr().redISub(rhs).cmpn(0) === 0;
    };
    ShortCurve.prototype._endoWnafMulAdd = function _endoWnafMulAdd(points, coeffs, jacobianResult) {
      var npoints = this._endoWnafT1;
      var ncoeffs = this._endoWnafT2;
      for (var i2 = 0; i2 < points.length; i2++) {
        var split = this._endoSplit(coeffs[i2]);
        var p2 = points[i2];
        var beta = p2._getBeta();
        if (split.k1.negative) {
          split.k1.ineg();
          p2 = p2.neg(true);
        }
        if (split.k2.negative) {
          split.k2.ineg();
          beta = beta.neg(true);
        }
        npoints[i2 * 2] = p2;
        npoints[i2 * 2 + 1] = beta;
        ncoeffs[i2 * 2] = split.k1;
        ncoeffs[i2 * 2 + 1] = split.k2;
      }
      var res = this._wnafMulAdd(1, npoints, ncoeffs, i2 * 2, jacobianResult);
      for (var j = 0; j < i2 * 2; j++) {
        npoints[j] = null;
        ncoeffs[j] = null;
      }
      return res;
    };
    function Point(curve, x, y, isRed) {
      Base.BasePoint.call(this, curve, "affine");
      if (x === null && y === null) {
        this.x = null;
        this.y = null;
        this.inf = true;
      } else {
        this.x = new BN(x, 16);
        this.y = new BN(y, 16);
        if (isRed) {
          this.x.forceRed(this.curve.red);
          this.y.forceRed(this.curve.red);
        }
        if (!this.x.red)
          this.x = this.x.toRed(this.curve.red);
        if (!this.y.red)
          this.y = this.y.toRed(this.curve.red);
        this.inf = false;
      }
    }
    inherits(Point, Base.BasePoint);
    ShortCurve.prototype.point = function point(x, y, isRed) {
      return new Point(this, x, y, isRed);
    };
    ShortCurve.prototype.pointFromJSON = function pointFromJSON(obj, red) {
      return Point.fromJSON(this, obj, red);
    };
    Point.prototype._getBeta = function _getBeta() {
      if (!this.curve.endo)
        return;
      var pre = this.precomputed;
      if (pre && pre.beta)
        return pre.beta;
      var beta = this.curve.point(this.x.redMul(this.curve.endo.beta), this.y);
      if (pre) {
        var curve = this.curve;
        var endoMul = function(p2) {
          return curve.point(p2.x.redMul(curve.endo.beta), p2.y);
        };
        pre.beta = beta;
        beta.precomputed = {
          beta: null,
          naf: pre.naf && {
            wnd: pre.naf.wnd,
            points: pre.naf.points.map(endoMul)
          },
          doubles: pre.doubles && {
            step: pre.doubles.step,
            points: pre.doubles.points.map(endoMul)
          }
        };
      }
      return beta;
    };
    Point.prototype.toJSON = function toJSON() {
      if (!this.precomputed)
        return [this.x, this.y];
      return [this.x, this.y, this.precomputed && {
        doubles: this.precomputed.doubles && {
          step: this.precomputed.doubles.step,
          points: this.precomputed.doubles.points.slice(1)
        },
        naf: this.precomputed.naf && {
          wnd: this.precomputed.naf.wnd,
          points: this.precomputed.naf.points.slice(1)
        }
      }];
    };
    Point.fromJSON = function fromJSON(curve, obj, red) {
      if (typeof obj === "string")
        obj = JSON.parse(obj);
      var res = curve.point(obj[0], obj[1], red);
      if (!obj[2])
        return res;
      function obj2point(obj2) {
        return curve.point(obj2[0], obj2[1], red);
      }
      var pre = obj[2];
      res.precomputed = {
        beta: null,
        doubles: pre.doubles && {
          step: pre.doubles.step,
          points: [res].concat(pre.doubles.points.map(obj2point))
        },
        naf: pre.naf && {
          wnd: pre.naf.wnd,
          points: [res].concat(pre.naf.points.map(obj2point))
        }
      };
      return res;
    };
    Point.prototype.inspect = function inspect2() {
      if (this.isInfinity())
        return "<EC Point Infinity>";
      return "<EC Point x: " + this.x.fromRed().toString(16, 2) + " y: " + this.y.fromRed().toString(16, 2) + ">";
    };
    Point.prototype.isInfinity = function isInfinity() {
      return this.inf;
    };
    Point.prototype.add = function add(p2) {
      if (this.inf)
        return p2;
      if (p2.inf)
        return this;
      if (this.eq(p2))
        return this.dbl();
      if (this.neg().eq(p2))
        return this.curve.point(null, null);
      if (this.x.cmp(p2.x) === 0)
        return this.curve.point(null, null);
      var c = this.y.redSub(p2.y);
      if (c.cmpn(0) !== 0)
        c = c.redMul(this.x.redSub(p2.x).redInvm());
      var nx = c.redSqr().redISub(this.x).redISub(p2.x);
      var ny = c.redMul(this.x.redSub(nx)).redISub(this.y);
      return this.curve.point(nx, ny);
    };
    Point.prototype.dbl = function dbl() {
      if (this.inf)
        return this;
      var ys1 = this.y.redAdd(this.y);
      if (ys1.cmpn(0) === 0)
        return this.curve.point(null, null);
      var a = this.curve.a;
      var x2 = this.x.redSqr();
      var dyinv = ys1.redInvm();
      var c = x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);
      var nx = c.redSqr().redISub(this.x.redAdd(this.x));
      var ny = c.redMul(this.x.redSub(nx)).redISub(this.y);
      return this.curve.point(nx, ny);
    };
    Point.prototype.getX = function getX() {
      return this.x.fromRed();
    };
    Point.prototype.getY = function getY() {
      return this.y.fromRed();
    };
    Point.prototype.mul = function mul(k) {
      k = new BN(k, 16);
      if (this.isInfinity())
        return this;
      else if (this._hasDoubles(k))
        return this.curve._fixedNafMul(this, k);
      else if (this.curve.endo)
        return this.curve._endoWnafMulAdd([this], [k]);
      else
        return this.curve._wnafMul(this, k);
    };
    Point.prototype.mulAdd = function mulAdd(k1, p2, k2) {
      var points = [this, p2];
      var coeffs = [k1, k2];
      if (this.curve.endo)
        return this.curve._endoWnafMulAdd(points, coeffs);
      else
        return this.curve._wnafMulAdd(1, points, coeffs, 2);
    };
    Point.prototype.jmulAdd = function jmulAdd(k1, p2, k2) {
      var points = [this, p2];
      var coeffs = [k1, k2];
      if (this.curve.endo)
        return this.curve._endoWnafMulAdd(points, coeffs, true);
      else
        return this.curve._wnafMulAdd(1, points, coeffs, 2, true);
    };
    Point.prototype.eq = function eq(p2) {
      return this === p2 || this.inf === p2.inf && (this.inf || this.x.cmp(p2.x) === 0 && this.y.cmp(p2.y) === 0);
    };
    Point.prototype.neg = function neg(_precompute) {
      if (this.inf)
        return this;
      var res = this.curve.point(this.x, this.y.redNeg());
      if (_precompute && this.precomputed) {
        var pre = this.precomputed;
        var negate = function(p2) {
          return p2.neg();
        };
        res.precomputed = {
          naf: pre.naf && {
            wnd: pre.naf.wnd,
            points: pre.naf.points.map(negate)
          },
          doubles: pre.doubles && {
            step: pre.doubles.step,
            points: pre.doubles.points.map(negate)
          }
        };
      }
      return res;
    };
    Point.prototype.toJ = function toJ() {
      if (this.inf)
        return this.curve.jpoint(null, null, null);
      var res = this.curve.jpoint(this.x, this.y, this.curve.one);
      return res;
    };
    function JPoint(curve, x, y, z) {
      Base.BasePoint.call(this, curve, "jacobian");
      if (x === null && y === null && z === null) {
        this.x = this.curve.one;
        this.y = this.curve.one;
        this.z = new BN(0);
      } else {
        this.x = new BN(x, 16);
        this.y = new BN(y, 16);
        this.z = new BN(z, 16);
      }
      if (!this.x.red)
        this.x = this.x.toRed(this.curve.red);
      if (!this.y.red)
        this.y = this.y.toRed(this.curve.red);
      if (!this.z.red)
        this.z = this.z.toRed(this.curve.red);
      this.zOne = this.z === this.curve.one;
    }
    inherits(JPoint, Base.BasePoint);
    ShortCurve.prototype.jpoint = function jpoint(x, y, z) {
      return new JPoint(this, x, y, z);
    };
    JPoint.prototype.toP = function toP() {
      if (this.isInfinity())
        return this.curve.point(null, null);
      var zinv = this.z.redInvm();
      var zinv2 = zinv.redSqr();
      var ax = this.x.redMul(zinv2);
      var ay = this.y.redMul(zinv2).redMul(zinv);
      return this.curve.point(ax, ay);
    };
    JPoint.prototype.neg = function neg() {
      return this.curve.jpoint(this.x, this.y.redNeg(), this.z);
    };
    JPoint.prototype.add = function add(p2) {
      if (this.isInfinity())
        return p2;
      if (p2.isInfinity())
        return this;
      var pz2 = p2.z.redSqr();
      var z2 = this.z.redSqr();
      var u1 = this.x.redMul(pz2);
      var u2 = p2.x.redMul(z2);
      var s1 = this.y.redMul(pz2.redMul(p2.z));
      var s2 = p2.y.redMul(z2.redMul(this.z));
      var h = u1.redSub(u2);
      var r = s1.redSub(s2);
      if (h.cmpn(0) === 0) {
        if (r.cmpn(0) !== 0)
          return this.curve.jpoint(null, null, null);
        else
          return this.dbl();
      }
      var h2 = h.redSqr();
      var h3 = h2.redMul(h);
      var v2 = u1.redMul(h2);
      var nx = r.redSqr().redIAdd(h3).redISub(v2).redISub(v2);
      var ny = r.redMul(v2.redISub(nx)).redISub(s1.redMul(h3));
      var nz = this.z.redMul(p2.z).redMul(h);
      return this.curve.jpoint(nx, ny, nz);
    };
    JPoint.prototype.mixedAdd = function mixedAdd(p2) {
      if (this.isInfinity())
        return p2.toJ();
      if (p2.isInfinity())
        return this;
      var z2 = this.z.redSqr();
      var u1 = this.x;
      var u2 = p2.x.redMul(z2);
      var s1 = this.y;
      var s2 = p2.y.redMul(z2).redMul(this.z);
      var h = u1.redSub(u2);
      var r = s1.redSub(s2);
      if (h.cmpn(0) === 0) {
        if (r.cmpn(0) !== 0)
          return this.curve.jpoint(null, null, null);
        else
          return this.dbl();
      }
      var h2 = h.redSqr();
      var h3 = h2.redMul(h);
      var v2 = u1.redMul(h2);
      var nx = r.redSqr().redIAdd(h3).redISub(v2).redISub(v2);
      var ny = r.redMul(v2.redISub(nx)).redISub(s1.redMul(h3));
      var nz = this.z.redMul(h);
      return this.curve.jpoint(nx, ny, nz);
    };
    JPoint.prototype.dblp = function dblp(pow) {
      if (pow === 0)
        return this;
      if (this.isInfinity())
        return this;
      if (!pow)
        return this.dbl();
      var i2;
      if (this.curve.zeroA || this.curve.threeA) {
        var r = this;
        for (i2 = 0; i2 < pow; i2++)
          r = r.dbl();
        return r;
      }
      var a = this.curve.a;
      var tinv = this.curve.tinv;
      var jx = this.x;
      var jy = this.y;
      var jz = this.z;
      var jz4 = jz.redSqr().redSqr();
      var jyd = jy.redAdd(jy);
      for (i2 = 0; i2 < pow; i2++) {
        var jx2 = jx.redSqr();
        var jyd2 = jyd.redSqr();
        var jyd4 = jyd2.redSqr();
        var c = jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));
        var t1 = jx.redMul(jyd2);
        var nx = c.redSqr().redISub(t1.redAdd(t1));
        var t2 = t1.redISub(nx);
        var dny = c.redMul(t2);
        dny = dny.redIAdd(dny).redISub(jyd4);
        var nz = jyd.redMul(jz);
        if (i2 + 1 < pow)
          jz4 = jz4.redMul(jyd4);
        jx = nx;
        jz = nz;
        jyd = dny;
      }
      return this.curve.jpoint(jx, jyd.redMul(tinv), jz);
    };
    JPoint.prototype.dbl = function dbl() {
      if (this.isInfinity())
        return this;
      if (this.curve.zeroA)
        return this._zeroDbl();
      else if (this.curve.threeA)
        return this._threeDbl();
      else
        return this._dbl();
    };
    JPoint.prototype._zeroDbl = function _zeroDbl() {
      var nx;
      var ny;
      var nz;
      if (this.zOne) {
        var xx = this.x.redSqr();
        var yy = this.y.redSqr();
        var yyyy = yy.redSqr();
        var s = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);
        s = s.redIAdd(s);
        var m = xx.redAdd(xx).redIAdd(xx);
        var t = m.redSqr().redISub(s).redISub(s);
        var yyyy8 = yyyy.redIAdd(yyyy);
        yyyy8 = yyyy8.redIAdd(yyyy8);
        yyyy8 = yyyy8.redIAdd(yyyy8);
        nx = t;
        ny = m.redMul(s.redISub(t)).redISub(yyyy8);
        nz = this.y.redAdd(this.y);
      } else {
        var a = this.x.redSqr();
        var b = this.y.redSqr();
        var c = b.redSqr();
        var d = this.x.redAdd(b).redSqr().redISub(a).redISub(c);
        d = d.redIAdd(d);
        var e = a.redAdd(a).redIAdd(a);
        var f = e.redSqr();
        var c8 = c.redIAdd(c);
        c8 = c8.redIAdd(c8);
        c8 = c8.redIAdd(c8);
        nx = f.redISub(d).redISub(d);
        ny = e.redMul(d.redISub(nx)).redISub(c8);
        nz = this.y.redMul(this.z);
        nz = nz.redIAdd(nz);
      }
      return this.curve.jpoint(nx, ny, nz);
    };
    JPoint.prototype._threeDbl = function _threeDbl() {
      var nx;
      var ny;
      var nz;
      if (this.zOne) {
        var xx = this.x.redSqr();
        var yy = this.y.redSqr();
        var yyyy = yy.redSqr();
        var s = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);
        s = s.redIAdd(s);
        var m = xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);
        var t = m.redSqr().redISub(s).redISub(s);
        nx = t;
        var yyyy8 = yyyy.redIAdd(yyyy);
        yyyy8 = yyyy8.redIAdd(yyyy8);
        yyyy8 = yyyy8.redIAdd(yyyy8);
        ny = m.redMul(s.redISub(t)).redISub(yyyy8);
        nz = this.y.redAdd(this.y);
      } else {
        var delta = this.z.redSqr();
        var gamma = this.y.redSqr();
        var beta = this.x.redMul(gamma);
        var alpha = this.x.redSub(delta).redMul(this.x.redAdd(delta));
        alpha = alpha.redAdd(alpha).redIAdd(alpha);
        var beta4 = beta.redIAdd(beta);
        beta4 = beta4.redIAdd(beta4);
        var beta8 = beta4.redAdd(beta4);
        nx = alpha.redSqr().redISub(beta8);
        nz = this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);
        var ggamma8 = gamma.redSqr();
        ggamma8 = ggamma8.redIAdd(ggamma8);
        ggamma8 = ggamma8.redIAdd(ggamma8);
        ggamma8 = ggamma8.redIAdd(ggamma8);
        ny = alpha.redMul(beta4.redISub(nx)).redISub(ggamma8);
      }
      return this.curve.jpoint(nx, ny, nz);
    };
    JPoint.prototype._dbl = function _dbl() {
      var a = this.curve.a;
      var jx = this.x;
      var jy = this.y;
      var jz = this.z;
      var jz4 = jz.redSqr().redSqr();
      var jx2 = jx.redSqr();
      var jy2 = jy.redSqr();
      var c = jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));
      var jxd4 = jx.redAdd(jx);
      jxd4 = jxd4.redIAdd(jxd4);
      var t1 = jxd4.redMul(jy2);
      var nx = c.redSqr().redISub(t1.redAdd(t1));
      var t2 = t1.redISub(nx);
      var jyd8 = jy2.redSqr();
      jyd8 = jyd8.redIAdd(jyd8);
      jyd8 = jyd8.redIAdd(jyd8);
      jyd8 = jyd8.redIAdd(jyd8);
      var ny = c.redMul(t2).redISub(jyd8);
      var nz = jy.redAdd(jy).redMul(jz);
      return this.curve.jpoint(nx, ny, nz);
    };
    JPoint.prototype.trpl = function trpl() {
      if (!this.curve.zeroA)
        return this.dbl().add(this);
      var xx = this.x.redSqr();
      var yy = this.y.redSqr();
      var zz = this.z.redSqr();
      var yyyy = yy.redSqr();
      var m = xx.redAdd(xx).redIAdd(xx);
      var mm = m.redSqr();
      var e = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);
      e = e.redIAdd(e);
      e = e.redAdd(e).redIAdd(e);
      e = e.redISub(mm);
      var ee = e.redSqr();
      var t = yyyy.redIAdd(yyyy);
      t = t.redIAdd(t);
      t = t.redIAdd(t);
      t = t.redIAdd(t);
      var u = m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);
      var yyu4 = yy.redMul(u);
      yyu4 = yyu4.redIAdd(yyu4);
      yyu4 = yyu4.redIAdd(yyu4);
      var nx = this.x.redMul(ee).redISub(yyu4);
      nx = nx.redIAdd(nx);
      nx = nx.redIAdd(nx);
      var ny = this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));
      ny = ny.redIAdd(ny);
      ny = ny.redIAdd(ny);
      ny = ny.redIAdd(ny);
      var nz = this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);
      return this.curve.jpoint(nx, ny, nz);
    };
    JPoint.prototype.mul = function mul(k, kbase) {
      k = new BN(k, kbase);
      return this.curve._wnafMul(this, k);
    };
    JPoint.prototype.eq = function eq(p2) {
      if (p2.type === "affine")
        return this.eq(p2.toJ());
      if (this === p2)
        return true;
      var z2 = this.z.redSqr();
      var pz2 = p2.z.redSqr();
      if (this.x.redMul(pz2).redISub(p2.x.redMul(z2)).cmpn(0) !== 0)
        return false;
      var z3 = z2.redMul(this.z);
      var pz3 = pz2.redMul(p2.z);
      return this.y.redMul(pz3).redISub(p2.y.redMul(z3)).cmpn(0) === 0;
    };
    JPoint.prototype.eqXToP = function eqXToP(x) {
      var zs = this.z.redSqr();
      var rx = x.toRed(this.curve.red).redMul(zs);
      if (this.x.cmp(rx) === 0)
        return true;
      var xc = x.clone();
      var t = this.curve.redN.redMul(zs);
      for (; ; ) {
        xc.iadd(this.curve.n);
        if (xc.cmp(this.curve.p) >= 0)
          return false;
        rx.redIAdd(t);
        if (this.x.cmp(rx) === 0)
          return true;
      }
    };
    JPoint.prototype.inspect = function inspect2() {
      if (this.isInfinity())
        return "<EC JPoint Infinity>";
      return "<EC JPoint x: " + this.x.toString(16, 2) + " y: " + this.y.toString(16, 2) + " z: " + this.z.toString(16, 2) + ">";
    };
    JPoint.prototype.isInfinity = function isInfinity() {
      return this.z.cmpn(0) === 0;
    };
  }, { "../utils": 103, "./base": 90, "bn.js": 104, "inherits": 137 }], 95: [function(require2, module2, exports2) {
    var curves = exports2;
    var hash2 = require2("hash.js");
    var curve = require2("./curve");
    var utils = require2("./utils");
    var assert = utils.assert;
    function PresetCurve(options) {
      if (options.type === "short")
        this.curve = new curve.short(options);
      else if (options.type === "edwards")
        this.curve = new curve.edwards(options);
      else
        this.curve = new curve.mont(options);
      this.g = this.curve.g;
      this.n = this.curve.n;
      this.hash = options.hash;
      assert(this.g.validate(), "Invalid curve");
      assert(this.g.mul(this.n).isInfinity(), "Invalid curve, G*N != O");
    }
    curves.PresetCurve = PresetCurve;
    function defineCurve(name, options) {
      Object.defineProperty(curves, name, {
        configurable: true,
        enumerable: true,
        get: function() {
          var curve2 = new PresetCurve(options);
          Object.defineProperty(curves, name, {
            configurable: true,
            enumerable: true,
            value: curve2
          });
          return curve2;
        }
      });
    }
    defineCurve("p192", {
      type: "short",
      prime: "p192",
      p: "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",
      a: "ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",
      b: "64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",
      n: "ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",
      hash: hash2.sha256,
      gRed: false,
      g: [
        "188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012",
        "07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"
      ]
    });
    defineCurve("p224", {
      type: "short",
      prime: "p224",
      p: "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",
      a: "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",
      b: "b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",
      n: "ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",
      hash: hash2.sha256,
      gRed: false,
      g: [
        "b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21",
        "bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"
      ]
    });
    defineCurve("p256", {
      type: "short",
      prime: null,
      p: "ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",
      a: "ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",
      b: "5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",
      n: "ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",
      hash: hash2.sha256,
      gRed: false,
      g: [
        "6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296",
        "4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"
      ]
    });
    defineCurve("p384", {
      type: "short",
      prime: null,
      p: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",
      a: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",
      b: "b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",
      n: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",
      hash: hash2.sha384,
      gRed: false,
      g: [
        "aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7",
        "3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"
      ]
    });
    defineCurve("p521", {
      type: "short",
      prime: null,
      p: "000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",
      a: "000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",
      b: "00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",
      n: "000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",
      hash: hash2.sha512,
      gRed: false,
      g: [
        "000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66",
        "00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"
      ]
    });
    defineCurve("curve25519", {
      type: "mont",
      prime: "p25519",
      p: "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
      a: "76d06",
      b: "1",
      n: "1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",
      hash: hash2.sha256,
      gRed: false,
      g: [
        "9"
      ]
    });
    defineCurve("ed25519", {
      type: "edwards",
      prime: "p25519",
      p: "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",
      a: "-1",
      c: "1",
      d: "52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",
      n: "1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",
      hash: hash2.sha256,
      gRed: false,
      g: [
        "216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a",
        "6666666666666666666666666666666666666666666666666666666666666658"
      ]
    });
    var pre;
    try {
      pre = require2("./precomputed/secp256k1");
    } catch (e) {
      pre = void 0;
    }
    defineCurve("secp256k1", {
      type: "short",
      prime: "k256",
      p: "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",
      a: "0",
      b: "7",
      n: "ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",
      h: "1",
      hash: hash2.sha256,
      beta: "7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",
      lambda: "5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",
      basis: [
        {
          a: "3086d221a7d46bcde86c90e49284eb15",
          b: "-e4437ed6010e88286f547fa90abfe4c3"
        },
        {
          a: "114ca50f7a8e2f3f657c1108d9d44cfd8",
          b: "3086d221a7d46bcde86c90e49284eb15"
        }
      ],
      gRed: false,
      g: [
        "79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",
        "483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",
        pre
      ]
    });
  }, { "./curve": 92, "./precomputed/secp256k1": 102, "./utils": 103, "hash.js": 123 }], 96: [function(require2, module2, exports2) {
    var BN = require2("bn.js");
    var HmacDRBG = require2("hmac-drbg");
    var utils = require2("../utils");
    var curves = require2("../curves");
    var rand = require2("brorand");
    var assert = utils.assert;
    var KeyPair = require2("./key");
    var Signature = require2("./signature");
    function EC(options) {
      if (!(this instanceof EC))
        return new EC(options);
      if (typeof options === "string") {
        assert(Object.prototype.hasOwnProperty.call(curves, options), "Unknown curve " + options);
        options = curves[options];
      }
      if (options instanceof curves.PresetCurve)
        options = { curve: options };
      this.curve = options.curve.curve;
      this.n = this.curve.n;
      this.nh = this.n.ushrn(1);
      this.g = this.curve.g;
      this.g = options.curve.g;
      this.g.precompute(options.curve.n.bitLength() + 1);
      this.hash = options.hash || options.curve.hash;
    }
    module2.exports = EC;
    EC.prototype.keyPair = function keyPair2(options) {
      return new KeyPair(this, options);
    };
    EC.prototype.keyFromPrivate = function keyFromPrivate(priv, enc) {
      return KeyPair.fromPrivate(this, priv, enc);
    };
    EC.prototype.keyFromPublic = function keyFromPublic(pub, enc) {
      return KeyPair.fromPublic(this, pub, enc);
    };
    EC.prototype.genKeyPair = function genKeyPair(options) {
      if (!options)
        options = {};
      var drbg = new HmacDRBG({
        hash: this.hash,
        pers: options.pers,
        persEnc: options.persEnc || "utf8",
        entropy: options.entropy || rand(this.hash.hmacStrength),
        entropyEnc: options.entropy && options.entropyEnc || "utf8",
        nonce: this.n.toArray()
      });
      var bytes = this.n.byteLength();
      var ns2 = this.n.sub(new BN(2));
      for (; ; ) {
        var priv = new BN(drbg.generate(bytes));
        if (priv.cmp(ns2) > 0)
          continue;
        priv.iaddn(1);
        return this.keyFromPrivate(priv);
      }
    };
    EC.prototype._truncateToN = function _truncateToN(msg, truncOnly) {
      var delta = msg.byteLength() * 8 - this.n.bitLength();
      if (delta > 0)
        msg = msg.ushrn(delta);
      if (!truncOnly && msg.cmp(this.n) >= 0)
        return msg.sub(this.n);
      else
        return msg;
    };
    EC.prototype.sign = function sign(msg, key, enc, options) {
      if (typeof enc === "object") {
        options = enc;
        enc = null;
      }
      if (!options)
        options = {};
      key = this.keyFromPrivate(key, enc);
      msg = this._truncateToN(new BN(msg, 16));
      var bytes = this.n.byteLength();
      var bkey = key.getPrivate().toArray("be", bytes);
      var nonce = msg.toArray("be", bytes);
      var drbg = new HmacDRBG({
        hash: this.hash,
        entropy: bkey,
        nonce,
        pers: options.pers,
        persEnc: options.persEnc || "utf8"
      });
      var ns1 = this.n.sub(new BN(1));
      for (var iter = 0; ; iter++) {
        var k = options.k ? options.k(iter) : new BN(drbg.generate(this.n.byteLength()));
        k = this._truncateToN(k, true);
        if (k.cmpn(1) <= 0 || k.cmp(ns1) >= 0)
          continue;
        var kp = this.g.mul(k);
        if (kp.isInfinity())
          continue;
        var kpX = kp.getX();
        var r = kpX.umod(this.n);
        if (r.cmpn(0) === 0)
          continue;
        var s = k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));
        s = s.umod(this.n);
        if (s.cmpn(0) === 0)
          continue;
        var recoveryParam = (kp.getY().isOdd() ? 1 : 0) | (kpX.cmp(r) !== 0 ? 2 : 0);
        if (options.canonical && s.cmp(this.nh) > 0) {
          s = this.n.sub(s);
          recoveryParam ^= 1;
        }
        return new Signature({ r, s, recoveryParam });
      }
    };
    EC.prototype.verify = function verify(msg, signature, key, enc) {
      msg = this._truncateToN(new BN(msg, 16));
      key = this.keyFromPublic(key, enc);
      signature = new Signature(signature, "hex");
      var r = signature.r;
      var s = signature.s;
      if (r.cmpn(1) < 0 || r.cmp(this.n) >= 0)
        return false;
      if (s.cmpn(1) < 0 || s.cmp(this.n) >= 0)
        return false;
      var sinv = s.invm(this.n);
      var u1 = sinv.mul(msg).umod(this.n);
      var u2 = sinv.mul(r).umod(this.n);
      var p2;
      if (!this.curve._maxwellTrick) {
        p2 = this.g.mulAdd(u1, key.getPublic(), u2);
        if (p2.isInfinity())
          return false;
        return p2.getX().umod(this.n).cmp(r) === 0;
      }
      p2 = this.g.jmulAdd(u1, key.getPublic(), u2);
      if (p2.isInfinity())
        return false;
      return p2.eqXToP(r);
    };
    EC.prototype.recoverPubKey = function(msg, signature, j, enc) {
      assert((3 & j) === j, "The recovery param is more than two bits");
      signature = new Signature(signature, enc);
      var n = this.n;
      var e = new BN(msg);
      var r = signature.r;
      var s = signature.s;
      var isYOdd = j & 1;
      var isSecondKey = j >> 1;
      if (r.cmp(this.curve.p.umod(this.curve.n)) >= 0 && isSecondKey)
        throw new Error("Unable to find sencond key candinate");
      if (isSecondKey)
        r = this.curve.pointFromX(r.add(this.curve.n), isYOdd);
      else
        r = this.curve.pointFromX(r, isYOdd);
      var rInv = signature.r.invm(n);
      var s1 = n.sub(e).mul(rInv).umod(n);
      var s2 = s.mul(rInv).umod(n);
      return this.g.mulAdd(s1, r, s2);
    };
    EC.prototype.getKeyRecoveryParam = function(e, signature, Q, enc) {
      signature = new Signature(signature, enc);
      if (signature.recoveryParam !== null)
        return signature.recoveryParam;
      for (var i2 = 0; i2 < 4; i2++) {
        var Qprime;
        try {
          Qprime = this.recoverPubKey(e, signature, i2);
        } catch (e2) {
          continue;
        }
        if (Qprime.eq(Q))
          return i2;
      }
      throw new Error("Unable to find valid recovery factor");
    };
  }, { "../curves": 95, "../utils": 103, "./key": 97, "./signature": 98, "bn.js": 104, "brorand": 78, "hmac-drbg": 135 }], 97: [function(require2, module2, exports2) {
    var BN = require2("bn.js");
    var utils = require2("../utils");
    var assert = utils.assert;
    function KeyPair(ec, options) {
      this.ec = ec;
      this.priv = null;
      this.pub = null;
      if (options.priv)
        this._importPrivate(options.priv, options.privEnc);
      if (options.pub)
        this._importPublic(options.pub, options.pubEnc);
    }
    module2.exports = KeyPair;
    KeyPair.fromPublic = function fromPublic(ec, pub, enc) {
      if (pub instanceof KeyPair)
        return pub;
      return new KeyPair(ec, {
        pub,
        pubEnc: enc
      });
    };
    KeyPair.fromPrivate = function fromPrivate(ec, priv, enc) {
      if (priv instanceof KeyPair)
        return priv;
      return new KeyPair(ec, {
        priv,
        privEnc: enc
      });
    };
    KeyPair.prototype.validate = function validate() {
      var pub = this.getPublic();
      if (pub.isInfinity())
        return { result: false, reason: "Invalid public key" };
      if (!pub.validate())
        return { result: false, reason: "Public key is not a point" };
      if (!pub.mul(this.ec.curve.n).isInfinity())
        return { result: false, reason: "Public key * N != O" };
      return { result: true, reason: null };
    };
    KeyPair.prototype.getPublic = function getPublic(compact, enc) {
      if (typeof compact === "string") {
        enc = compact;
        compact = null;
      }
      if (!this.pub)
        this.pub = this.ec.g.mul(this.priv);
      if (!enc)
        return this.pub;
      return this.pub.encode(enc, compact);
    };
    KeyPair.prototype.getPrivate = function getPrivate(enc) {
      if (enc === "hex")
        return this.priv.toString(16, 2);
      else
        return this.priv;
    };
    KeyPair.prototype._importPrivate = function _importPrivate(key, enc) {
      this.priv = new BN(key, enc || 16);
      this.priv = this.priv.umod(this.ec.curve.n);
    };
    KeyPair.prototype._importPublic = function _importPublic(key, enc) {
      if (key.x || key.y) {
        if (this.ec.curve.type === "mont") {
          assert(key.x, "Need x coordinate");
        } else if (this.ec.curve.type === "short" || this.ec.curve.type === "edwards") {
          assert(key.x && key.y, "Need both x and y coordinate");
        }
        this.pub = this.ec.curve.point(key.x, key.y);
        return;
      }
      this.pub = this.ec.curve.decodePoint(key, enc);
    };
    KeyPair.prototype.derive = function derive(pub) {
      if (!pub.validate()) {
        assert(pub.validate(), "public point not validated");
      }
      return pub.mul(this.priv).getX();
    };
    KeyPair.prototype.sign = function sign(msg, enc, options) {
      return this.ec.sign(msg, this, enc, options);
    };
    KeyPair.prototype.verify = function verify(msg, signature) {
      return this.ec.verify(msg, signature, this);
    };
    KeyPair.prototype.inspect = function inspect2() {
      return "<Key priv: " + (this.priv && this.priv.toString(16, 2)) + " pub: " + (this.pub && this.pub.inspect()) + " >";
    };
  }, { "../utils": 103, "bn.js": 104 }], 98: [function(require2, module2, exports2) {
    var BN = require2("bn.js");
    var utils = require2("../utils");
    var assert = utils.assert;
    function Signature(options, enc) {
      if (options instanceof Signature)
        return options;
      if (this._importDER(options, enc))
        return;
      assert(options.r && options.s, "Signature without r or s");
      this.r = new BN(options.r, 16);
      this.s = new BN(options.s, 16);
      if (options.recoveryParam === void 0)
        this.recoveryParam = null;
      else
        this.recoveryParam = options.recoveryParam;
    }
    module2.exports = Signature;
    function Position() {
      this.place = 0;
    }
    function getLength(buf, p2) {
      var initial = buf[p2.place++];
      if (!(initial & 128)) {
        return initial;
      }
      var octetLen = initial & 15;
      if (octetLen === 0 || octetLen > 4) {
        return false;
      }
      var val = 0;
      for (var i2 = 0, off = p2.place; i2 < octetLen; i2++, off++) {
        val <<= 8;
        val |= buf[off];
        val >>>= 0;
      }
      if (val <= 127) {
        return false;
      }
      p2.place = off;
      return val;
    }
    function rmPadding(buf) {
      var i2 = 0;
      var len2 = buf.length - 1;
      while (!buf[i2] && !(buf[i2 + 1] & 128) && i2 < len2) {
        i2++;
      }
      if (i2 === 0) {
        return buf;
      }
      return buf.slice(i2);
    }
    Signature.prototype._importDER = function _importDER(data, enc) {
      data = utils.toArray(data, enc);
      var p2 = new Position();
      if (data[p2.place++] !== 48) {
        return false;
      }
      var len2 = getLength(data, p2);
      if (len2 === false) {
        return false;
      }
      if (len2 + p2.place !== data.length) {
        return false;
      }
      if (data[p2.place++] !== 2) {
        return false;
      }
      var rlen = getLength(data, p2);
      if (rlen === false) {
        return false;
      }
      var r = data.slice(p2.place, rlen + p2.place);
      p2.place += rlen;
      if (data[p2.place++] !== 2) {
        return false;
      }
      var slen = getLength(data, p2);
      if (slen === false) {
        return false;
      }
      if (data.length !== slen + p2.place) {
        return false;
      }
      var s = data.slice(p2.place, slen + p2.place);
      if (r[0] === 0) {
        if (r[1] & 128) {
          r = r.slice(1);
        } else {
          return false;
        }
      }
      if (s[0] === 0) {
        if (s[1] & 128) {
          s = s.slice(1);
        } else {
          return false;
        }
      }
      this.r = new BN(r);
      this.s = new BN(s);
      this.recoveryParam = null;
      return true;
    };
    function constructLength(arr, len2) {
      if (len2 < 128) {
        arr.push(len2);
        return;
      }
      var octets = 1 + (Math.log(len2) / Math.LN2 >>> 3);
      arr.push(octets | 128);
      while (--octets) {
        arr.push(len2 >>> (octets << 3) & 255);
      }
      arr.push(len2);
    }
    Signature.prototype.toDER = function toDER(enc) {
      var r = this.r.toArray();
      var s = this.s.toArray();
      if (r[0] & 128)
        r = [0].concat(r);
      if (s[0] & 128)
        s = [0].concat(s);
      r = rmPadding(r);
      s = rmPadding(s);
      while (!s[0] && !(s[1] & 128)) {
        s = s.slice(1);
      }
      var arr = [2];
      constructLength(arr, r.length);
      arr = arr.concat(r);
      arr.push(2);
      constructLength(arr, s.length);
      var backHalf = arr.concat(s);
      var res = [48];
      constructLength(res, backHalf.length);
      res = res.concat(backHalf);
      return utils.encode(res, enc);
    };
  }, { "../utils": 103, "bn.js": 104 }], 99: [function(require2, module2, exports2) {
    var hash2 = require2("hash.js");
    var curves = require2("../curves");
    var utils = require2("../utils");
    var assert = utils.assert;
    var parseBytes = utils.parseBytes;
    var KeyPair = require2("./key");
    var Signature = require2("./signature");
    function EDDSA(curve) {
      assert(curve === "ed25519", "only tested with ed25519 so far");
      if (!(this instanceof EDDSA))
        return new EDDSA(curve);
      curve = curves[curve].curve;
      this.curve = curve;
      this.g = curve.g;
      this.g.precompute(curve.n.bitLength() + 1);
      this.pointClass = curve.point().constructor;
      this.encodingLength = Math.ceil(curve.n.bitLength() / 8);
      this.hash = hash2.sha512;
    }
    module2.exports = EDDSA;
    EDDSA.prototype.sign = function sign(message, secret) {
      message = parseBytes(message);
      var key = this.keyFromSecret(secret);
      var r = this.hashInt(key.messagePrefix(), message);
      var R2 = this.g.mul(r);
      var Rencoded = this.encodePoint(R2);
      var s_ = this.hashInt(Rencoded, key.pubBytes(), message).mul(key.priv());
      var S = r.add(s_).umod(this.curve.n);
      return this.makeSignature({ R: R2, S, Rencoded });
    };
    EDDSA.prototype.verify = function verify(message, sig, pub) {
      message = parseBytes(message);
      sig = this.makeSignature(sig);
      var key = this.keyFromPublic(pub);
      var h = this.hashInt(sig.Rencoded(), key.pubBytes(), message);
      var SG = this.g.mul(sig.S());
      var RplusAh = sig.R().add(key.pub().mul(h));
      return RplusAh.eq(SG);
    };
    EDDSA.prototype.hashInt = function hashInt() {
      var hash3 = this.hash();
      for (var i2 = 0; i2 < arguments.length; i2++)
        hash3.update(arguments[i2]);
      return utils.intFromLE(hash3.digest()).umod(this.curve.n);
    };
    EDDSA.prototype.keyFromPublic = function keyFromPublic(pub) {
      return KeyPair.fromPublic(this, pub);
    };
    EDDSA.prototype.keyFromSecret = function keyFromSecret(secret) {
      return KeyPair.fromSecret(this, secret);
    };
    EDDSA.prototype.makeSignature = function makeSignature(sig) {
      if (sig instanceof Signature)
        return sig;
      return new Signature(this, sig);
    };
    EDDSA.prototype.encodePoint = function encodePoint(point) {
      var enc = point.getY().toArray("le", this.encodingLength);
      enc[this.encodingLength - 1] |= point.getX().isOdd() ? 128 : 0;
      return enc;
    };
    EDDSA.prototype.decodePoint = function decodePoint(bytes) {
      bytes = utils.parseBytes(bytes);
      var lastIx = bytes.length - 1;
      var normed = bytes.slice(0, lastIx).concat(bytes[lastIx] & ~128);
      var xIsOdd = (bytes[lastIx] & 128) !== 0;
      var y = utils.intFromLE(normed);
      return this.curve.pointFromY(y, xIsOdd);
    };
    EDDSA.prototype.encodeInt = function encodeInt(num) {
      return num.toArray("le", this.encodingLength);
    };
    EDDSA.prototype.decodeInt = function decodeInt(bytes) {
      return utils.intFromLE(bytes);
    };
    EDDSA.prototype.isPoint = function isPoint(val) {
      return val instanceof this.pointClass;
    };
  }, { "../curves": 95, "../utils": 103, "./key": 100, "./signature": 101, "hash.js": 123 }], 100: [function(require2, module2, exports2) {
    var utils = require2("../utils");
    var assert = utils.assert;
    var parseBytes = utils.parseBytes;
    var cachedProperty = utils.cachedProperty;
    function KeyPair(eddsa, params2) {
      this.eddsa = eddsa;
      this._secret = parseBytes(params2.secret);
      if (eddsa.isPoint(params2.pub))
        this._pub = params2.pub;
      else
        this._pubBytes = parseBytes(params2.pub);
    }
    KeyPair.fromPublic = function fromPublic(eddsa, pub) {
      if (pub instanceof KeyPair)
        return pub;
      return new KeyPair(eddsa, { pub });
    };
    KeyPair.fromSecret = function fromSecret(eddsa, secret) {
      if (secret instanceof KeyPair)
        return secret;
      return new KeyPair(eddsa, { secret });
    };
    KeyPair.prototype.secret = function secret() {
      return this._secret;
    };
    cachedProperty(KeyPair, "pubBytes", function pubBytes() {
      return this.eddsa.encodePoint(this.pub());
    });
    cachedProperty(KeyPair, "pub", function pub() {
      if (this._pubBytes)
        return this.eddsa.decodePoint(this._pubBytes);
      return this.eddsa.g.mul(this.priv());
    });
    cachedProperty(KeyPair, "privBytes", function privBytes() {
      var eddsa = this.eddsa;
      var hash2 = this.hash();
      var lastIx = eddsa.encodingLength - 1;
      var a = hash2.slice(0, eddsa.encodingLength);
      a[0] &= 248;
      a[lastIx] &= 127;
      a[lastIx] |= 64;
      return a;
    });
    cachedProperty(KeyPair, "priv", function priv() {
      return this.eddsa.decodeInt(this.privBytes());
    });
    cachedProperty(KeyPair, "hash", function hash2() {
      return this.eddsa.hash().update(this.secret()).digest();
    });
    cachedProperty(KeyPair, "messagePrefix", function messagePrefix() {
      return this.hash().slice(this.eddsa.encodingLength);
    });
    KeyPair.prototype.sign = function sign(message) {
      assert(this._secret, "KeyPair can only verify");
      return this.eddsa.sign(message, this);
    };
    KeyPair.prototype.verify = function verify(message, sig) {
      return this.eddsa.verify(message, sig, this);
    };
    KeyPair.prototype.getSecret = function getSecret(enc) {
      assert(this._secret, "KeyPair is public only");
      return utils.encode(this.secret(), enc);
    };
    KeyPair.prototype.getPublic = function getPublic(enc) {
      return utils.encode(this.pubBytes(), enc);
    };
    module2.exports = KeyPair;
  }, { "../utils": 103 }], 101: [function(require2, module2, exports2) {
    var BN = require2("bn.js");
    var utils = require2("../utils");
    var assert = utils.assert;
    var cachedProperty = utils.cachedProperty;
    var parseBytes = utils.parseBytes;
    function Signature(eddsa, sig) {
      this.eddsa = eddsa;
      if (typeof sig !== "object")
        sig = parseBytes(sig);
      if (Array.isArray(sig)) {
        sig = {
          R: sig.slice(0, eddsa.encodingLength),
          S: sig.slice(eddsa.encodingLength)
        };
      }
      assert(sig.R && sig.S, "Signature without R or S");
      if (eddsa.isPoint(sig.R))
        this._R = sig.R;
      if (sig.S instanceof BN)
        this._S = sig.S;
      this._Rencoded = Array.isArray(sig.R) ? sig.R : sig.Rencoded;
      this._Sencoded = Array.isArray(sig.S) ? sig.S : sig.Sencoded;
    }
    cachedProperty(Signature, "S", function S() {
      return this.eddsa.decodeInt(this.Sencoded());
    });
    cachedProperty(Signature, "R", function R2() {
      return this.eddsa.decodePoint(this.Rencoded());
    });
    cachedProperty(Signature, "Rencoded", function Rencoded() {
      return this.eddsa.encodePoint(this.R());
    });
    cachedProperty(Signature, "Sencoded", function Sencoded() {
      return this.eddsa.encodeInt(this.S());
    });
    Signature.prototype.toBytes = function toBytes() {
      return this.Rencoded().concat(this.Sencoded());
    };
    Signature.prototype.toHex = function toHex() {
      return utils.encode(this.toBytes(), "hex").toUpperCase();
    };
    module2.exports = Signature;
  }, { "../utils": 103, "bn.js": 104 }], 102: [function(require2, module2, exports2) {
    module2.exports = {
      doubles: {
        step: 4,
        points: [
          [
            "e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a",
            "f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"
          ],
          [
            "8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508",
            "11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"
          ],
          [
            "175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739",
            "d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"
          ],
          [
            "363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640",
            "4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"
          ],
          [
            "8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c",
            "4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"
          ],
          [
            "723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda",
            "96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"
          ],
          [
            "eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa",
            "5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"
          ],
          [
            "100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0",
            "cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"
          ],
          [
            "e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d",
            "9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"
          ],
          [
            "feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d",
            "e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"
          ],
          [
            "da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1",
            "9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"
          ],
          [
            "53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0",
            "5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"
          ],
          [
            "8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047",
            "10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"
          ],
          [
            "385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862",
            "283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"
          ],
          [
            "6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7",
            "7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"
          ],
          [
            "3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd",
            "56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"
          ],
          [
            "85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83",
            "7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"
          ],
          [
            "948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a",
            "53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"
          ],
          [
            "6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8",
            "bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"
          ],
          [
            "e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d",
            "4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"
          ],
          [
            "e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725",
            "7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"
          ],
          [
            "213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754",
            "4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"
          ],
          [
            "4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c",
            "17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"
          ],
          [
            "fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6",
            "6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"
          ],
          [
            "76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39",
            "c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"
          ],
          [
            "c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891",
            "893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"
          ],
          [
            "d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b",
            "febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"
          ],
          [
            "b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03",
            "2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"
          ],
          [
            "e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d",
            "eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"
          ],
          [
            "a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070",
            "7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"
          ],
          [
            "90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4",
            "e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"
          ],
          [
            "8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da",
            "662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"
          ],
          [
            "e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11",
            "1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"
          ],
          [
            "8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e",
            "efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"
          ],
          [
            "e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41",
            "2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"
          ],
          [
            "b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef",
            "67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"
          ],
          [
            "d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8",
            "db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"
          ],
          [
            "324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d",
            "648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"
          ],
          [
            "4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96",
            "35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"
          ],
          [
            "9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd",
            "ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"
          ],
          [
            "6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5",
            "9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"
          ],
          [
            "a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266",
            "40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"
          ],
          [
            "7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71",
            "34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"
          ],
          [
            "928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac",
            "c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"
          ],
          [
            "85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751",
            "1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"
          ],
          [
            "ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e",
            "493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"
          ],
          [
            "827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241",
            "c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"
          ],
          [
            "eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3",
            "be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"
          ],
          [
            "e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f",
            "4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"
          ],
          [
            "1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19",
            "aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"
          ],
          [
            "146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be",
            "b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"
          ],
          [
            "fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9",
            "6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"
          ],
          [
            "da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2",
            "8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"
          ],
          [
            "a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13",
            "7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"
          ],
          [
            "174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c",
            "ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"
          ],
          [
            "959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba",
            "2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"
          ],
          [
            "d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151",
            "e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"
          ],
          [
            "64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073",
            "d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"
          ],
          [
            "8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458",
            "38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"
          ],
          [
            "13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b",
            "69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"
          ],
          [
            "bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366",
            "d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"
          ],
          [
            "8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa",
            "40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"
          ],
          [
            "8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0",
            "620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"
          ],
          [
            "dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787",
            "7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"
          ],
          [
            "f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e",
            "ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"
          ]
        ]
      },
      naf: {
        wnd: 7,
        points: [
          [
            "f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9",
            "388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"
          ],
          [
            "2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4",
            "d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"
          ],
          [
            "5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc",
            "6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"
          ],
          [
            "acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe",
            "cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"
          ],
          [
            "774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb",
            "d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"
          ],
          [
            "f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8",
            "ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"
          ],
          [
            "d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e",
            "581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"
          ],
          [
            "defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34",
            "4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"
          ],
          [
            "2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c",
            "85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"
          ],
          [
            "352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5",
            "321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"
          ],
          [
            "2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f",
            "2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"
          ],
          [
            "9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714",
            "73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"
          ],
          [
            "daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729",
            "a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"
          ],
          [
            "c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db",
            "2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"
          ],
          [
            "6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4",
            "e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"
          ],
          [
            "1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5",
            "b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"
          ],
          [
            "605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479",
            "2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"
          ],
          [
            "62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d",
            "80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"
          ],
          [
            "80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f",
            "1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"
          ],
          [
            "7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb",
            "d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"
          ],
          [
            "d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9",
            "eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"
          ],
          [
            "49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963",
            "758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"
          ],
          [
            "77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74",
            "958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"
          ],
          [
            "f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530",
            "e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"
          ],
          [
            "463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b",
            "5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"
          ],
          [
            "f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247",
            "cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"
          ],
          [
            "caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1",
            "cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"
          ],
          [
            "2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120",
            "4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"
          ],
          [
            "7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435",
            "91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"
          ],
          [
            "754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18",
            "673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"
          ],
          [
            "e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8",
            "59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"
          ],
          [
            "186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb",
            "3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"
          ],
          [
            "df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f",
            "55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"
          ],
          [
            "5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143",
            "efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"
          ],
          [
            "290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba",
            "e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"
          ],
          [
            "af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45",
            "f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"
          ],
          [
            "766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a",
            "744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"
          ],
          [
            "59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e",
            "c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"
          ],
          [
            "f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8",
            "e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"
          ],
          [
            "7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c",
            "30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"
          ],
          [
            "948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519",
            "e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"
          ],
          [
            "7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab",
            "100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"
          ],
          [
            "3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca",
            "ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"
          ],
          [
            "d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf",
            "8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"
          ],
          [
            "1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610",
            "68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"
          ],
          [
            "733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4",
            "f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"
          ],
          [
            "15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c",
            "d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"
          ],
          [
            "a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940",
            "edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"
          ],
          [
            "e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980",
            "a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"
          ],
          [
            "311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3",
            "66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"
          ],
          [
            "34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf",
            "9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"
          ],
          [
            "f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63",
            "4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"
          ],
          [
            "d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448",
            "fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"
          ],
          [
            "32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf",
            "5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"
          ],
          [
            "7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5",
            "8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"
          ],
          [
            "ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6",
            "8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"
          ],
          [
            "16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5",
            "5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"
          ],
          [
            "eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99",
            "f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"
          ],
          [
            "78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51",
            "f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"
          ],
          [
            "494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5",
            "42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"
          ],
          [
            "a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5",
            "204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"
          ],
          [
            "c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997",
            "4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"
          ],
          [
            "841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881",
            "73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"
          ],
          [
            "5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5",
            "39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"
          ],
          [
            "36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66",
            "d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"
          ],
          [
            "336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726",
            "ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"
          ],
          [
            "8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede",
            "6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"
          ],
          [
            "1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94",
            "60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"
          ],
          [
            "85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31",
            "3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"
          ],
          [
            "29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51",
            "b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"
          ],
          [
            "a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252",
            "ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"
          ],
          [
            "4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5",
            "cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"
          ],
          [
            "d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b",
            "6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"
          ],
          [
            "ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4",
            "322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"
          ],
          [
            "af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f",
            "6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"
          ],
          [
            "e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889",
            "2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"
          ],
          [
            "591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246",
            "b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"
          ],
          [
            "11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984",
            "998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"
          ],
          [
            "3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a",
            "b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"
          ],
          [
            "cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030",
            "bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"
          ],
          [
            "c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197",
            "6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"
          ],
          [
            "c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593",
            "c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"
          ],
          [
            "a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef",
            "21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"
          ],
          [
            "347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38",
            "60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"
          ],
          [
            "da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a",
            "49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"
          ],
          [
            "c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111",
            "5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"
          ],
          [
            "4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502",
            "7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"
          ],
          [
            "3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea",
            "be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"
          ],
          [
            "cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26",
            "8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"
          ],
          [
            "b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986",
            "39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"
          ],
          [
            "d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e",
            "62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"
          ],
          [
            "48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4",
            "25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"
          ],
          [
            "dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda",
            "ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"
          ],
          [
            "6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859",
            "cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"
          ],
          [
            "e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f",
            "f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"
          ],
          [
            "eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c",
            "6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"
          ],
          [
            "13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942",
            "fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"
          ],
          [
            "ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a",
            "1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"
          ],
          [
            "b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80",
            "5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"
          ],
          [
            "ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d",
            "438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"
          ],
          [
            "8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1",
            "cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"
          ],
          [
            "52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63",
            "c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"
          ],
          [
            "e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352",
            "6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"
          ],
          [
            "7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193",
            "ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"
          ],
          [
            "5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00",
            "9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"
          ],
          [
            "32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58",
            "ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"
          ],
          [
            "e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7",
            "d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"
          ],
          [
            "8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8",
            "c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"
          ],
          [
            "4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e",
            "67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"
          ],
          [
            "3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d",
            "cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"
          ],
          [
            "674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b",
            "299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"
          ],
          [
            "d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f",
            "f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"
          ],
          [
            "30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6",
            "462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"
          ],
          [
            "be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297",
            "62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"
          ],
          [
            "93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a",
            "7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"
          ],
          [
            "b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c",
            "ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"
          ],
          [
            "d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52",
            "4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"
          ],
          [
            "d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb",
            "bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"
          ],
          [
            "463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065",
            "bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"
          ],
          [
            "7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917",
            "603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"
          ],
          [
            "74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9",
            "cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"
          ],
          [
            "30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3",
            "553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"
          ],
          [
            "9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57",
            "712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"
          ],
          [
            "176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66",
            "ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"
          ],
          [
            "75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8",
            "9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"
          ],
          [
            "809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721",
            "9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"
          ],
          [
            "1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180",
            "4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"
          ]
        ]
      }
    };
  }, {}], 103: [function(require2, module2, exports2) {
    var utils = exports2;
    var BN = require2("bn.js");
    var minAssert = require2("minimalistic-assert");
    var minUtils = require2("minimalistic-crypto-utils");
    utils.assert = minAssert;
    utils.toArray = minUtils.toArray;
    utils.zero2 = minUtils.zero2;
    utils.toHex = minUtils.toHex;
    utils.encode = minUtils.encode;
    function getNAF(num, w, bits) {
      var naf = new Array(Math.max(num.bitLength(), bits) + 1);
      naf.fill(0);
      var ws = 1 << w + 1;
      var k = num.clone();
      for (var i2 = 0; i2 < naf.length; i2++) {
        var z;
        var mod = k.andln(ws - 1);
        if (k.isOdd()) {
          if (mod > (ws >> 1) - 1)
            z = (ws >> 1) - mod;
          else
            z = mod;
          k.isubn(z);
        } else {
          z = 0;
        }
        naf[i2] = z;
        k.iushrn(1);
      }
      return naf;
    }
    utils.getNAF = getNAF;
    function getJSF(k1, k2) {
      var jsf = [
        [],
        []
      ];
      k1 = k1.clone();
      k2 = k2.clone();
      var d1 = 0;
      var d2 = 0;
      var m8;
      while (k1.cmpn(-d1) > 0 || k2.cmpn(-d2) > 0) {
        var m14 = k1.andln(3) + d1 & 3;
        var m24 = k2.andln(3) + d2 & 3;
        if (m14 === 3)
          m14 = -1;
        if (m24 === 3)
          m24 = -1;
        var u1;
        if ((m14 & 1) === 0) {
          u1 = 0;
        } else {
          m8 = k1.andln(7) + d1 & 7;
          if ((m8 === 3 || m8 === 5) && m24 === 2)
            u1 = -m14;
          else
            u1 = m14;
        }
        jsf[0].push(u1);
        var u2;
        if ((m24 & 1) === 0) {
          u2 = 0;
        } else {
          m8 = k2.andln(7) + d2 & 7;
          if ((m8 === 3 || m8 === 5) && m14 === 2)
            u2 = -m24;
          else
            u2 = m24;
        }
        jsf[1].push(u2);
        if (2 * d1 === u1 + 1)
          d1 = 1 - d1;
        if (2 * d2 === u2 + 1)
          d2 = 1 - d2;
        k1.iushrn(1);
        k2.iushrn(1);
      }
      return jsf;
    }
    utils.getJSF = getJSF;
    function cachedProperty(obj, name, computer) {
      var key = "_" + name;
      obj.prototype[name] = function cachedProperty2() {
        return this[key] !== void 0 ? this[key] : this[key] = computer.call(this);
      };
    }
    utils.cachedProperty = cachedProperty;
    function parseBytes(bytes) {
      return typeof bytes === "string" ? utils.toArray(bytes, "hex") : bytes;
    }
    utils.parseBytes = parseBytes;
    function intFromLE(bytes) {
      return new BN(bytes, "hex", "le");
    }
    utils.intFromLE = intFromLE;
  }, { "bn.js": 104, "minimalistic-assert": 141, "minimalistic-crypto-utils": 142 }], 104: [function(require2, module2, exports2) {
    (function(module3, exports3) {
      function assert(val, msg) {
        if (!val)
          throw new Error(msg || "Assertion failed");
      }
      function inherits(ctor, superCtor) {
        ctor.super_ = superCtor;
        var TempCtor = function() {
        };
        TempCtor.prototype = superCtor.prototype;
        ctor.prototype = new TempCtor();
        ctor.prototype.constructor = ctor;
      }
      function BN(number, base, endian) {
        if (BN.isBN(number)) {
          return number;
        }
        this.negative = 0;
        this.words = null;
        this.length = 0;
        this.red = null;
        if (number !== null) {
          if (base === "le" || base === "be") {
            endian = base;
            base = 10;
          }
          this._init(number || 0, base || 10, endian || "be");
        }
      }
      if (typeof module3 === "object") {
        module3.exports = BN;
      } else {
        exports3.BN = BN;
      }
      BN.BN = BN;
      BN.wordSize = 26;
      var Buffer2;
      try {
        if (typeof window !== "undefined" && typeof window.Buffer !== "undefined") {
          Buffer2 = window.Buffer;
        } else {
          Buffer2 = require2("buffer").Buffer;
        }
      } catch (e) {
      }
      BN.isBN = function isBN(num) {
        if (num instanceof BN) {
          return true;
        }
        return num !== null && typeof num === "object" && num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);
      };
      BN.max = function max(left, right) {
        if (left.cmp(right) > 0)
          return left;
        return right;
      };
      BN.min = function min(left, right) {
        if (left.cmp(right) < 0)
          return left;
        return right;
      };
      BN.prototype._init = function init2(number, base, endian) {
        if (typeof number === "number") {
          return this._initNumber(number, base, endian);
        }
        if (typeof number === "object") {
          return this._initArray(number, base, endian);
        }
        if (base === "hex") {
          base = 16;
        }
        assert(base === (base | 0) && base >= 2 && base <= 36);
        number = number.toString().replace(/\s+/g, "");
        var start2 = 0;
        if (number[0] === "-") {
          start2++;
          this.negative = 1;
        }
        if (start2 < number.length) {
          if (base === 16) {
            this._parseHex(number, start2, endian);
          } else {
            this._parseBase(number, base, start2);
            if (endian === "le") {
              this._initArray(this.toArray(), base, endian);
            }
          }
        }
      };
      BN.prototype._initNumber = function _initNumber(number, base, endian) {
        if (number < 0) {
          this.negative = 1;
          number = -number;
        }
        if (number < 67108864) {
          this.words = [number & 67108863];
          this.length = 1;
        } else if (number < 4503599627370496) {
          this.words = [
            number & 67108863,
            number / 67108864 & 67108863
          ];
          this.length = 2;
        } else {
          assert(number < 9007199254740992);
          this.words = [
            number & 67108863,
            number / 67108864 & 67108863,
            1
          ];
          this.length = 3;
        }
        if (endian !== "le")
          return;
        this._initArray(this.toArray(), base, endian);
      };
      BN.prototype._initArray = function _initArray(number, base, endian) {
        assert(typeof number.length === "number");
        if (number.length <= 0) {
          this.words = [0];
          this.length = 1;
          return this;
        }
        this.length = Math.ceil(number.length / 3);
        this.words = new Array(this.length);
        for (var i2 = 0; i2 < this.length; i2++) {
          this.words[i2] = 0;
        }
        var j, w;
        var off = 0;
        if (endian === "be") {
          for (i2 = number.length - 1, j = 0; i2 >= 0; i2 -= 3) {
            w = number[i2] | number[i2 - 1] << 8 | number[i2 - 2] << 16;
            this.words[j] |= w << off & 67108863;
            this.words[j + 1] = w >>> 26 - off & 67108863;
            off += 24;
            if (off >= 26) {
              off -= 26;
              j++;
            }
          }
        } else if (endian === "le") {
          for (i2 = 0, j = 0; i2 < number.length; i2 += 3) {
            w = number[i2] | number[i2 + 1] << 8 | number[i2 + 2] << 16;
            this.words[j] |= w << off & 67108863;
            this.words[j + 1] = w >>> 26 - off & 67108863;
            off += 24;
            if (off >= 26) {
              off -= 26;
              j++;
            }
          }
        }
        return this.strip();
      };
      function parseHex4Bits(string, index) {
        var c = string.charCodeAt(index);
        if (c >= 65 && c <= 70) {
          return c - 55;
        } else if (c >= 97 && c <= 102) {
          return c - 87;
        } else {
          return c - 48 & 15;
        }
      }
      function parseHexByte(string, lowerBound, index) {
        var r = parseHex4Bits(string, index);
        if (index - 1 >= lowerBound) {
          r |= parseHex4Bits(string, index - 1) << 4;
        }
        return r;
      }
      BN.prototype._parseHex = function _parseHex(number, start2, endian) {
        this.length = Math.ceil((number.length - start2) / 6);
        this.words = new Array(this.length);
        for (var i2 = 0; i2 < this.length; i2++) {
          this.words[i2] = 0;
        }
        var off = 0;
        var j = 0;
        var w;
        if (endian === "be") {
          for (i2 = number.length - 1; i2 >= start2; i2 -= 2) {
            w = parseHexByte(number, start2, i2) << off;
            this.words[j] |= w & 67108863;
            if (off >= 18) {
              off -= 18;
              j += 1;
              this.words[j] |= w >>> 26;
            } else {
              off += 8;
            }
          }
        } else {
          var parseLength = number.length - start2;
          for (i2 = parseLength % 2 === 0 ? start2 + 1 : start2; i2 < number.length; i2 += 2) {
            w = parseHexByte(number, start2, i2) << off;
            this.words[j] |= w & 67108863;
            if (off >= 18) {
              off -= 18;
              j += 1;
              this.words[j] |= w >>> 26;
            } else {
              off += 8;
            }
          }
        }
        this.strip();
      };
      function parseBase(str, start2, end, mul) {
        var r = 0;
        var len2 = Math.min(str.length, end);
        for (var i2 = start2; i2 < len2; i2++) {
          var c = str.charCodeAt(i2) - 48;
          r *= mul;
          if (c >= 49) {
            r += c - 49 + 10;
          } else if (c >= 17) {
            r += c - 17 + 10;
          } else {
            r += c;
          }
        }
        return r;
      }
      BN.prototype._parseBase = function _parseBase(number, base, start2) {
        this.words = [0];
        this.length = 1;
        for (var limbLen = 0, limbPow = 1; limbPow <= 67108863; limbPow *= base) {
          limbLen++;
        }
        limbLen--;
        limbPow = limbPow / base | 0;
        var total = number.length - start2;
        var mod = total % limbLen;
        var end = Math.min(total, total - mod) + start2;
        var word = 0;
        for (var i2 = start2; i2 < end; i2 += limbLen) {
          word = parseBase(number, i2, i2 + limbLen, base);
          this.imuln(limbPow);
          if (this.words[0] + word < 67108864) {
            this.words[0] += word;
          } else {
            this._iaddn(word);
          }
        }
        if (mod !== 0) {
          var pow = 1;
          word = parseBase(number, i2, number.length, base);
          for (i2 = 0; i2 < mod; i2++) {
            pow *= base;
          }
          this.imuln(pow);
          if (this.words[0] + word < 67108864) {
            this.words[0] += word;
          } else {
            this._iaddn(word);
          }
        }
        this.strip();
      };
      BN.prototype.copy = function copy(dest) {
        dest.words = new Array(this.length);
        for (var i2 = 0; i2 < this.length; i2++) {
          dest.words[i2] = this.words[i2];
        }
        dest.length = this.length;
        dest.negative = this.negative;
        dest.red = this.red;
      };
      BN.prototype.clone = function clone() {
        var r = new BN(null);
        this.copy(r);
        return r;
      };
      BN.prototype._expand = function _expand(size) {
        while (this.length < size) {
          this.words[this.length++] = 0;
        }
        return this;
      };
      BN.prototype.strip = function strip() {
        while (this.length > 1 && this.words[this.length - 1] === 0) {
          this.length--;
        }
        return this._normSign();
      };
      BN.prototype._normSign = function _normSign() {
        if (this.length === 1 && this.words[0] === 0) {
          this.negative = 0;
        }
        return this;
      };
      BN.prototype.inspect = function inspect2() {
        return (this.red ? "<BN-R: " : "<BN: ") + this.toString(16) + ">";
      };
      var zeros = [
        "",
        "0",
        "00",
        "000",
        "0000",
        "00000",
        "000000",
        "0000000",
        "00000000",
        "000000000",
        "0000000000",
        "00000000000",
        "000000000000",
        "0000000000000",
        "00000000000000",
        "000000000000000",
        "0000000000000000",
        "00000000000000000",
        "000000000000000000",
        "0000000000000000000",
        "00000000000000000000",
        "000000000000000000000",
        "0000000000000000000000",
        "00000000000000000000000",
        "000000000000000000000000",
        "0000000000000000000000000"
      ];
      var groupSizes = [
        0,
        0,
        25,
        16,
        12,
        11,
        10,
        9,
        8,
        8,
        7,
        7,
        7,
        7,
        6,
        6,
        6,
        6,
        6,
        6,
        6,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5
      ];
      var groupBases = [
        0,
        0,
        33554432,
        43046721,
        16777216,
        48828125,
        60466176,
        40353607,
        16777216,
        43046721,
        1e7,
        19487171,
        35831808,
        62748517,
        7529536,
        11390625,
        16777216,
        24137569,
        34012224,
        47045881,
        64e6,
        4084101,
        5153632,
        6436343,
        7962624,
        9765625,
        11881376,
        14348907,
        17210368,
        20511149,
        243e5,
        28629151,
        33554432,
        39135393,
        45435424,
        52521875,
        60466176
      ];
      BN.prototype.toString = function toString(base, padding) {
        base = base || 10;
        padding = padding | 0 || 1;
        var out;
        if (base === 16 || base === "hex") {
          out = "";
          var off = 0;
          var carry = 0;
          for (var i2 = 0; i2 < this.length; i2++) {
            var w = this.words[i2];
            var word = ((w << off | carry) & 16777215).toString(16);
            carry = w >>> 24 - off & 16777215;
            if (carry !== 0 || i2 !== this.length - 1) {
              out = zeros[6 - word.length] + word + out;
            } else {
              out = word + out;
            }
            off += 2;
            if (off >= 26) {
              off -= 26;
              i2--;
            }
          }
          if (carry !== 0) {
            out = carry.toString(16) + out;
          }
          while (out.length % padding !== 0) {
            out = "0" + out;
          }
          if (this.negative !== 0) {
            out = "-" + out;
          }
          return out;
        }
        if (base === (base | 0) && base >= 2 && base <= 36) {
          var groupSize = groupSizes[base];
          var groupBase = groupBases[base];
          out = "";
          var c = this.clone();
          c.negative = 0;
          while (!c.isZero()) {
            var r = c.modn(groupBase).toString(base);
            c = c.idivn(groupBase);
            if (!c.isZero()) {
              out = zeros[groupSize - r.length] + r + out;
            } else {
              out = r + out;
            }
          }
          if (this.isZero()) {
            out = "0" + out;
          }
          while (out.length % padding !== 0) {
            out = "0" + out;
          }
          if (this.negative !== 0) {
            out = "-" + out;
          }
          return out;
        }
        assert(false, "Base should be between 2 and 36");
      };
      BN.prototype.toNumber = function toNumber() {
        var ret = this.words[0];
        if (this.length === 2) {
          ret += this.words[1] * 67108864;
        } else if (this.length === 3 && this.words[2] === 1) {
          ret += 4503599627370496 + this.words[1] * 67108864;
        } else if (this.length > 2) {
          assert(false, "Number can only safely store up to 53 bits");
        }
        return this.negative !== 0 ? -ret : ret;
      };
      BN.prototype.toJSON = function toJSON() {
        return this.toString(16);
      };
      BN.prototype.toBuffer = function toBuffer(endian, length) {
        assert(typeof Buffer2 !== "undefined");
        return this.toArrayLike(Buffer2, endian, length);
      };
      BN.prototype.toArray = function toArray(endian, length) {
        return this.toArrayLike(Array, endian, length);
      };
      BN.prototype.toArrayLike = function toArrayLike(ArrayType, endian, length) {
        var byteLength2 = this.byteLength();
        var reqLength = length || Math.max(1, byteLength2);
        assert(byteLength2 <= reqLength, "byte array longer than desired length");
        assert(reqLength > 0, "Requested array length <= 0");
        this.strip();
        var littleEndian = endian === "le";
        var res = new ArrayType(reqLength);
        var b, i2;
        var q = this.clone();
        if (!littleEndian) {
          for (i2 = 0; i2 < reqLength - byteLength2; i2++) {
            res[i2] = 0;
          }
          for (i2 = 0; !q.isZero(); i2++) {
            b = q.andln(255);
            q.iushrn(8);
            res[reqLength - i2 - 1] = b;
          }
        } else {
          for (i2 = 0; !q.isZero(); i2++) {
            b = q.andln(255);
            q.iushrn(8);
            res[i2] = b;
          }
          for (; i2 < reqLength; i2++) {
            res[i2] = 0;
          }
        }
        return res;
      };
      if (Math.clz32) {
        BN.prototype._countBits = function _countBits(w) {
          return 32 - Math.clz32(w);
        };
      } else {
        BN.prototype._countBits = function _countBits(w) {
          var t = w;
          var r = 0;
          if (t >= 4096) {
            r += 13;
            t >>>= 13;
          }
          if (t >= 64) {
            r += 7;
            t >>>= 7;
          }
          if (t >= 8) {
            r += 4;
            t >>>= 4;
          }
          if (t >= 2) {
            r += 2;
            t >>>= 2;
          }
          return r + t;
        };
      }
      BN.prototype._zeroBits = function _zeroBits(w) {
        if (w === 0)
          return 26;
        var t = w;
        var r = 0;
        if ((t & 8191) === 0) {
          r += 13;
          t >>>= 13;
        }
        if ((t & 127) === 0) {
          r += 7;
          t >>>= 7;
        }
        if ((t & 15) === 0) {
          r += 4;
          t >>>= 4;
        }
        if ((t & 3) === 0) {
          r += 2;
          t >>>= 2;
        }
        if ((t & 1) === 0) {
          r++;
        }
        return r;
      };
      BN.prototype.bitLength = function bitLength() {
        var w = this.words[this.length - 1];
        var hi = this._countBits(w);
        return (this.length - 1) * 26 + hi;
      };
      function toBitArray(num) {
        var w = new Array(num.bitLength());
        for (var bit = 0; bit < w.length; bit++) {
          var off = bit / 26 | 0;
          var wbit = bit % 26;
          w[bit] = (num.words[off] & 1 << wbit) >>> wbit;
        }
        return w;
      }
      BN.prototype.zeroBits = function zeroBits() {
        if (this.isZero())
          return 0;
        var r = 0;
        for (var i2 = 0; i2 < this.length; i2++) {
          var b = this._zeroBits(this.words[i2]);
          r += b;
          if (b !== 26)
            break;
        }
        return r;
      };
      BN.prototype.byteLength = function byteLength2() {
        return Math.ceil(this.bitLength() / 8);
      };
      BN.prototype.toTwos = function toTwos(width) {
        if (this.negative !== 0) {
          return this.abs().inotn(width).iaddn(1);
        }
        return this.clone();
      };
      BN.prototype.fromTwos = function fromTwos(width) {
        if (this.testn(width - 1)) {
          return this.notn(width).iaddn(1).ineg();
        }
        return this.clone();
      };
      BN.prototype.isNeg = function isNeg() {
        return this.negative !== 0;
      };
      BN.prototype.neg = function neg() {
        return this.clone().ineg();
      };
      BN.prototype.ineg = function ineg() {
        if (!this.isZero()) {
          this.negative ^= 1;
        }
        return this;
      };
      BN.prototype.iuor = function iuor(num) {
        while (this.length < num.length) {
          this.words[this.length++] = 0;
        }
        for (var i2 = 0; i2 < num.length; i2++) {
          this.words[i2] = this.words[i2] | num.words[i2];
        }
        return this.strip();
      };
      BN.prototype.ior = function ior(num) {
        assert((this.negative | num.negative) === 0);
        return this.iuor(num);
      };
      BN.prototype.or = function or(num) {
        if (this.length > num.length)
          return this.clone().ior(num);
        return num.clone().ior(this);
      };
      BN.prototype.uor = function uor(num) {
        if (this.length > num.length)
          return this.clone().iuor(num);
        return num.clone().iuor(this);
      };
      BN.prototype.iuand = function iuand(num) {
        var b;
        if (this.length > num.length) {
          b = num;
        } else {
          b = this;
        }
        for (var i2 = 0; i2 < b.length; i2++) {
          this.words[i2] = this.words[i2] & num.words[i2];
        }
        this.length = b.length;
        return this.strip();
      };
      BN.prototype.iand = function iand(num) {
        assert((this.negative | num.negative) === 0);
        return this.iuand(num);
      };
      BN.prototype.and = function and(num) {
        if (this.length > num.length)
          return this.clone().iand(num);
        return num.clone().iand(this);
      };
      BN.prototype.uand = function uand(num) {
        if (this.length > num.length)
          return this.clone().iuand(num);
        return num.clone().iuand(this);
      };
      BN.prototype.iuxor = function iuxor(num) {
        var a;
        var b;
        if (this.length > num.length) {
          a = this;
          b = num;
        } else {
          a = num;
          b = this;
        }
        for (var i2 = 0; i2 < b.length; i2++) {
          this.words[i2] = a.words[i2] ^ b.words[i2];
        }
        if (this !== a) {
          for (; i2 < a.length; i2++) {
            this.words[i2] = a.words[i2];
          }
        }
        this.length = a.length;
        return this.strip();
      };
      BN.prototype.ixor = function ixor(num) {
        assert((this.negative | num.negative) === 0);
        return this.iuxor(num);
      };
      BN.prototype.xor = function xor(num) {
        if (this.length > num.length)
          return this.clone().ixor(num);
        return num.clone().ixor(this);
      };
      BN.prototype.uxor = function uxor(num) {
        if (this.length > num.length)
          return this.clone().iuxor(num);
        return num.clone().iuxor(this);
      };
      BN.prototype.inotn = function inotn(width) {
        assert(typeof width === "number" && width >= 0);
        var bytesNeeded = Math.ceil(width / 26) | 0;
        var bitsLeft = width % 26;
        this._expand(bytesNeeded);
        if (bitsLeft > 0) {
          bytesNeeded--;
        }
        for (var i2 = 0; i2 < bytesNeeded; i2++) {
          this.words[i2] = ~this.words[i2] & 67108863;
        }
        if (bitsLeft > 0) {
          this.words[i2] = ~this.words[i2] & 67108863 >> 26 - bitsLeft;
        }
        return this.strip();
      };
      BN.prototype.notn = function notn(width) {
        return this.clone().inotn(width);
      };
      BN.prototype.setn = function setn(bit, val) {
        assert(typeof bit === "number" && bit >= 0);
        var off = bit / 26 | 0;
        var wbit = bit % 26;
        this._expand(off + 1);
        if (val) {
          this.words[off] = this.words[off] | 1 << wbit;
        } else {
          this.words[off] = this.words[off] & ~(1 << wbit);
        }
        return this.strip();
      };
      BN.prototype.iadd = function iadd(num) {
        var r;
        if (this.negative !== 0 && num.negative === 0) {
          this.negative = 0;
          r = this.isub(num);
          this.negative ^= 1;
          return this._normSign();
        } else if (this.negative === 0 && num.negative !== 0) {
          num.negative = 0;
          r = this.isub(num);
          num.negative = 1;
          return r._normSign();
        }
        var a, b;
        if (this.length > num.length) {
          a = this;
          b = num;
        } else {
          a = num;
          b = this;
        }
        var carry = 0;
        for (var i2 = 0; i2 < b.length; i2++) {
          r = (a.words[i2] | 0) + (b.words[i2] | 0) + carry;
          this.words[i2] = r & 67108863;
          carry = r >>> 26;
        }
        for (; carry !== 0 && i2 < a.length; i2++) {
          r = (a.words[i2] | 0) + carry;
          this.words[i2] = r & 67108863;
          carry = r >>> 26;
        }
        this.length = a.length;
        if (carry !== 0) {
          this.words[this.length] = carry;
          this.length++;
        } else if (a !== this) {
          for (; i2 < a.length; i2++) {
            this.words[i2] = a.words[i2];
          }
        }
        return this;
      };
      BN.prototype.add = function add(num) {
        var res;
        if (num.negative !== 0 && this.negative === 0) {
          num.negative = 0;
          res = this.sub(num);
          num.negative ^= 1;
          return res;
        } else if (num.negative === 0 && this.negative !== 0) {
          this.negative = 0;
          res = num.sub(this);
          this.negative = 1;
          return res;
        }
        if (this.length > num.length)
          return this.clone().iadd(num);
        return num.clone().iadd(this);
      };
      BN.prototype.isub = function isub(num) {
        if (num.negative !== 0) {
          num.negative = 0;
          var r = this.iadd(num);
          num.negative = 1;
          return r._normSign();
        } else if (this.negative !== 0) {
          this.negative = 0;
          this.iadd(num);
          this.negative = 1;
          return this._normSign();
        }
        var cmp = this.cmp(num);
        if (cmp === 0) {
          this.negative = 0;
          this.length = 1;
          this.words[0] = 0;
          return this;
        }
        var a, b;
        if (cmp > 0) {
          a = this;
          b = num;
        } else {
          a = num;
          b = this;
        }
        var carry = 0;
        for (var i2 = 0; i2 < b.length; i2++) {
          r = (a.words[i2] | 0) - (b.words[i2] | 0) + carry;
          carry = r >> 26;
          this.words[i2] = r & 67108863;
        }
        for (; carry !== 0 && i2 < a.length; i2++) {
          r = (a.words[i2] | 0) + carry;
          carry = r >> 26;
          this.words[i2] = r & 67108863;
        }
        if (carry === 0 && i2 < a.length && a !== this) {
          for (; i2 < a.length; i2++) {
            this.words[i2] = a.words[i2];
          }
        }
        this.length = Math.max(this.length, i2);
        if (a !== this) {
          this.negative = 1;
        }
        return this.strip();
      };
      BN.prototype.sub = function sub(num) {
        return this.clone().isub(num);
      };
      function smallMulTo(self2, num, out) {
        out.negative = num.negative ^ self2.negative;
        var len2 = self2.length + num.length | 0;
        out.length = len2;
        len2 = len2 - 1 | 0;
        var a = self2.words[0] | 0;
        var b = num.words[0] | 0;
        var r = a * b;
        var lo = r & 67108863;
        var carry = r / 67108864 | 0;
        out.words[0] = lo;
        for (var k = 1; k < len2; k++) {
          var ncarry = carry >>> 26;
          var rword = carry & 67108863;
          var maxJ = Math.min(k, num.length - 1);
          for (var j = Math.max(0, k - self2.length + 1); j <= maxJ; j++) {
            var i2 = k - j | 0;
            a = self2.words[i2] | 0;
            b = num.words[j] | 0;
            r = a * b + rword;
            ncarry += r / 67108864 | 0;
            rword = r & 67108863;
          }
          out.words[k] = rword | 0;
          carry = ncarry | 0;
        }
        if (carry !== 0) {
          out.words[k] = carry | 0;
        } else {
          out.length--;
        }
        return out.strip();
      }
      var comb10MulTo = function comb10MulTo2(self2, num, out) {
        var a = self2.words;
        var b = num.words;
        var o = out.words;
        var c = 0;
        var lo;
        var mid;
        var hi;
        var a0 = a[0] | 0;
        var al0 = a0 & 8191;
        var ah0 = a0 >>> 13;
        var a1 = a[1] | 0;
        var al1 = a1 & 8191;
        var ah1 = a1 >>> 13;
        var a2 = a[2] | 0;
        var al2 = a2 & 8191;
        var ah2 = a2 >>> 13;
        var a3 = a[3] | 0;
        var al3 = a3 & 8191;
        var ah3 = a3 >>> 13;
        var a4 = a[4] | 0;
        var al4 = a4 & 8191;
        var ah4 = a4 >>> 13;
        var a5 = a[5] | 0;
        var al5 = a5 & 8191;
        var ah5 = a5 >>> 13;
        var a6 = a[6] | 0;
        var al6 = a6 & 8191;
        var ah6 = a6 >>> 13;
        var a7 = a[7] | 0;
        var al7 = a7 & 8191;
        var ah7 = a7 >>> 13;
        var a8 = a[8] | 0;
        var al8 = a8 & 8191;
        var ah8 = a8 >>> 13;
        var a9 = a[9] | 0;
        var al9 = a9 & 8191;
        var ah9 = a9 >>> 13;
        var b0 = b[0] | 0;
        var bl0 = b0 & 8191;
        var bh0 = b0 >>> 13;
        var b1 = b[1] | 0;
        var bl1 = b1 & 8191;
        var bh1 = b1 >>> 13;
        var b2 = b[2] | 0;
        var bl2 = b2 & 8191;
        var bh2 = b2 >>> 13;
        var b3 = b[3] | 0;
        var bl3 = b3 & 8191;
        var bh3 = b3 >>> 13;
        var b4 = b[4] | 0;
        var bl4 = b4 & 8191;
        var bh4 = b4 >>> 13;
        var b5 = b[5] | 0;
        var bl5 = b5 & 8191;
        var bh5 = b5 >>> 13;
        var b6 = b[6] | 0;
        var bl6 = b6 & 8191;
        var bh6 = b6 >>> 13;
        var b7 = b[7] | 0;
        var bl7 = b7 & 8191;
        var bh7 = b7 >>> 13;
        var b8 = b[8] | 0;
        var bl8 = b8 & 8191;
        var bh8 = b8 >>> 13;
        var b9 = b[9] | 0;
        var bl9 = b9 & 8191;
        var bh9 = b9 >>> 13;
        out.negative = self2.negative ^ num.negative;
        out.length = 19;
        lo = Math.imul(al0, bl0);
        mid = Math.imul(al0, bh0);
        mid = mid + Math.imul(ah0, bl0) | 0;
        hi = Math.imul(ah0, bh0);
        var w0 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w0 >>> 26) | 0;
        w0 &= 67108863;
        lo = Math.imul(al1, bl0);
        mid = Math.imul(al1, bh0);
        mid = mid + Math.imul(ah1, bl0) | 0;
        hi = Math.imul(ah1, bh0);
        lo = lo + Math.imul(al0, bl1) | 0;
        mid = mid + Math.imul(al0, bh1) | 0;
        mid = mid + Math.imul(ah0, bl1) | 0;
        hi = hi + Math.imul(ah0, bh1) | 0;
        var w1 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w1 >>> 26) | 0;
        w1 &= 67108863;
        lo = Math.imul(al2, bl0);
        mid = Math.imul(al2, bh0);
        mid = mid + Math.imul(ah2, bl0) | 0;
        hi = Math.imul(ah2, bh0);
        lo = lo + Math.imul(al1, bl1) | 0;
        mid = mid + Math.imul(al1, bh1) | 0;
        mid = mid + Math.imul(ah1, bl1) | 0;
        hi = hi + Math.imul(ah1, bh1) | 0;
        lo = lo + Math.imul(al0, bl2) | 0;
        mid = mid + Math.imul(al0, bh2) | 0;
        mid = mid + Math.imul(ah0, bl2) | 0;
        hi = hi + Math.imul(ah0, bh2) | 0;
        var w2 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w2 >>> 26) | 0;
        w2 &= 67108863;
        lo = Math.imul(al3, bl0);
        mid = Math.imul(al3, bh0);
        mid = mid + Math.imul(ah3, bl0) | 0;
        hi = Math.imul(ah3, bh0);
        lo = lo + Math.imul(al2, bl1) | 0;
        mid = mid + Math.imul(al2, bh1) | 0;
        mid = mid + Math.imul(ah2, bl1) | 0;
        hi = hi + Math.imul(ah2, bh1) | 0;
        lo = lo + Math.imul(al1, bl2) | 0;
        mid = mid + Math.imul(al1, bh2) | 0;
        mid = mid + Math.imul(ah1, bl2) | 0;
        hi = hi + Math.imul(ah1, bh2) | 0;
        lo = lo + Math.imul(al0, bl3) | 0;
        mid = mid + Math.imul(al0, bh3) | 0;
        mid = mid + Math.imul(ah0, bl3) | 0;
        hi = hi + Math.imul(ah0, bh3) | 0;
        var w3 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w3 >>> 26) | 0;
        w3 &= 67108863;
        lo = Math.imul(al4, bl0);
        mid = Math.imul(al4, bh0);
        mid = mid + Math.imul(ah4, bl0) | 0;
        hi = Math.imul(ah4, bh0);
        lo = lo + Math.imul(al3, bl1) | 0;
        mid = mid + Math.imul(al3, bh1) | 0;
        mid = mid + Math.imul(ah3, bl1) | 0;
        hi = hi + Math.imul(ah3, bh1) | 0;
        lo = lo + Math.imul(al2, bl2) | 0;
        mid = mid + Math.imul(al2, bh2) | 0;
        mid = mid + Math.imul(ah2, bl2) | 0;
        hi = hi + Math.imul(ah2, bh2) | 0;
        lo = lo + Math.imul(al1, bl3) | 0;
        mid = mid + Math.imul(al1, bh3) | 0;
        mid = mid + Math.imul(ah1, bl3) | 0;
        hi = hi + Math.imul(ah1, bh3) | 0;
        lo = lo + Math.imul(al0, bl4) | 0;
        mid = mid + Math.imul(al0, bh4) | 0;
        mid = mid + Math.imul(ah0, bl4) | 0;
        hi = hi + Math.imul(ah0, bh4) | 0;
        var w4 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w4 >>> 26) | 0;
        w4 &= 67108863;
        lo = Math.imul(al5, bl0);
        mid = Math.imul(al5, bh0);
        mid = mid + Math.imul(ah5, bl0) | 0;
        hi = Math.imul(ah5, bh0);
        lo = lo + Math.imul(al4, bl1) | 0;
        mid = mid + Math.imul(al4, bh1) | 0;
        mid = mid + Math.imul(ah4, bl1) | 0;
        hi = hi + Math.imul(ah4, bh1) | 0;
        lo = lo + Math.imul(al3, bl2) | 0;
        mid = mid + Math.imul(al3, bh2) | 0;
        mid = mid + Math.imul(ah3, bl2) | 0;
        hi = hi + Math.imul(ah3, bh2) | 0;
        lo = lo + Math.imul(al2, bl3) | 0;
        mid = mid + Math.imul(al2, bh3) | 0;
        mid = mid + Math.imul(ah2, bl3) | 0;
        hi = hi + Math.imul(ah2, bh3) | 0;
        lo = lo + Math.imul(al1, bl4) | 0;
        mid = mid + Math.imul(al1, bh4) | 0;
        mid = mid + Math.imul(ah1, bl4) | 0;
        hi = hi + Math.imul(ah1, bh4) | 0;
        lo = lo + Math.imul(al0, bl5) | 0;
        mid = mid + Math.imul(al0, bh5) | 0;
        mid = mid + Math.imul(ah0, bl5) | 0;
        hi = hi + Math.imul(ah0, bh5) | 0;
        var w5 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w5 >>> 26) | 0;
        w5 &= 67108863;
        lo = Math.imul(al6, bl0);
        mid = Math.imul(al6, bh0);
        mid = mid + Math.imul(ah6, bl0) | 0;
        hi = Math.imul(ah6, bh0);
        lo = lo + Math.imul(al5, bl1) | 0;
        mid = mid + Math.imul(al5, bh1) | 0;
        mid = mid + Math.imul(ah5, bl1) | 0;
        hi = hi + Math.imul(ah5, bh1) | 0;
        lo = lo + Math.imul(al4, bl2) | 0;
        mid = mid + Math.imul(al4, bh2) | 0;
        mid = mid + Math.imul(ah4, bl2) | 0;
        hi = hi + Math.imul(ah4, bh2) | 0;
        lo = lo + Math.imul(al3, bl3) | 0;
        mid = mid + Math.imul(al3, bh3) | 0;
        mid = mid + Math.imul(ah3, bl3) | 0;
        hi = hi + Math.imul(ah3, bh3) | 0;
        lo = lo + Math.imul(al2, bl4) | 0;
        mid = mid + Math.imul(al2, bh4) | 0;
        mid = mid + Math.imul(ah2, bl4) | 0;
        hi = hi + Math.imul(ah2, bh4) | 0;
        lo = lo + Math.imul(al1, bl5) | 0;
        mid = mid + Math.imul(al1, bh5) | 0;
        mid = mid + Math.imul(ah1, bl5) | 0;
        hi = hi + Math.imul(ah1, bh5) | 0;
        lo = lo + Math.imul(al0, bl6) | 0;
        mid = mid + Math.imul(al0, bh6) | 0;
        mid = mid + Math.imul(ah0, bl6) | 0;
        hi = hi + Math.imul(ah0, bh6) | 0;
        var w6 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w6 >>> 26) | 0;
        w6 &= 67108863;
        lo = Math.imul(al7, bl0);
        mid = Math.imul(al7, bh0);
        mid = mid + Math.imul(ah7, bl0) | 0;
        hi = Math.imul(ah7, bh0);
        lo = lo + Math.imul(al6, bl1) | 0;
        mid = mid + Math.imul(al6, bh1) | 0;
        mid = mid + Math.imul(ah6, bl1) | 0;
        hi = hi + Math.imul(ah6, bh1) | 0;
        lo = lo + Math.imul(al5, bl2) | 0;
        mid = mid + Math.imul(al5, bh2) | 0;
        mid = mid + Math.imul(ah5, bl2) | 0;
        hi = hi + Math.imul(ah5, bh2) | 0;
        lo = lo + Math.imul(al4, bl3) | 0;
        mid = mid + Math.imul(al4, bh3) | 0;
        mid = mid + Math.imul(ah4, bl3) | 0;
        hi = hi + Math.imul(ah4, bh3) | 0;
        lo = lo + Math.imul(al3, bl4) | 0;
        mid = mid + Math.imul(al3, bh4) | 0;
        mid = mid + Math.imul(ah3, bl4) | 0;
        hi = hi + Math.imul(ah3, bh4) | 0;
        lo = lo + Math.imul(al2, bl5) | 0;
        mid = mid + Math.imul(al2, bh5) | 0;
        mid = mid + Math.imul(ah2, bl5) | 0;
        hi = hi + Math.imul(ah2, bh5) | 0;
        lo = lo + Math.imul(al1, bl6) | 0;
        mid = mid + Math.imul(al1, bh6) | 0;
        mid = mid + Math.imul(ah1, bl6) | 0;
        hi = hi + Math.imul(ah1, bh6) | 0;
        lo = lo + Math.imul(al0, bl7) | 0;
        mid = mid + Math.imul(al0, bh7) | 0;
        mid = mid + Math.imul(ah0, bl7) | 0;
        hi = hi + Math.imul(ah0, bh7) | 0;
        var w7 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w7 >>> 26) | 0;
        w7 &= 67108863;
        lo = Math.imul(al8, bl0);
        mid = Math.imul(al8, bh0);
        mid = mid + Math.imul(ah8, bl0) | 0;
        hi = Math.imul(ah8, bh0);
        lo = lo + Math.imul(al7, bl1) | 0;
        mid = mid + Math.imul(al7, bh1) | 0;
        mid = mid + Math.imul(ah7, bl1) | 0;
        hi = hi + Math.imul(ah7, bh1) | 0;
        lo = lo + Math.imul(al6, bl2) | 0;
        mid = mid + Math.imul(al6, bh2) | 0;
        mid = mid + Math.imul(ah6, bl2) | 0;
        hi = hi + Math.imul(ah6, bh2) | 0;
        lo = lo + Math.imul(al5, bl3) | 0;
        mid = mid + Math.imul(al5, bh3) | 0;
        mid = mid + Math.imul(ah5, bl3) | 0;
        hi = hi + Math.imul(ah5, bh3) | 0;
        lo = lo + Math.imul(al4, bl4) | 0;
        mid = mid + Math.imul(al4, bh4) | 0;
        mid = mid + Math.imul(ah4, bl4) | 0;
        hi = hi + Math.imul(ah4, bh4) | 0;
        lo = lo + Math.imul(al3, bl5) | 0;
        mid = mid + Math.imul(al3, bh5) | 0;
        mid = mid + Math.imul(ah3, bl5) | 0;
        hi = hi + Math.imul(ah3, bh5) | 0;
        lo = lo + Math.imul(al2, bl6) | 0;
        mid = mid + Math.imul(al2, bh6) | 0;
        mid = mid + Math.imul(ah2, bl6) | 0;
        hi = hi + Math.imul(ah2, bh6) | 0;
        lo = lo + Math.imul(al1, bl7) | 0;
        mid = mid + Math.imul(al1, bh7) | 0;
        mid = mid + Math.imul(ah1, bl7) | 0;
        hi = hi + Math.imul(ah1, bh7) | 0;
        lo = lo + Math.imul(al0, bl8) | 0;
        mid = mid + Math.imul(al0, bh8) | 0;
        mid = mid + Math.imul(ah0, bl8) | 0;
        hi = hi + Math.imul(ah0, bh8) | 0;
        var w8 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w8 >>> 26) | 0;
        w8 &= 67108863;
        lo = Math.imul(al9, bl0);
        mid = Math.imul(al9, bh0);
        mid = mid + Math.imul(ah9, bl0) | 0;
        hi = Math.imul(ah9, bh0);
        lo = lo + Math.imul(al8, bl1) | 0;
        mid = mid + Math.imul(al8, bh1) | 0;
        mid = mid + Math.imul(ah8, bl1) | 0;
        hi = hi + Math.imul(ah8, bh1) | 0;
        lo = lo + Math.imul(al7, bl2) | 0;
        mid = mid + Math.imul(al7, bh2) | 0;
        mid = mid + Math.imul(ah7, bl2) | 0;
        hi = hi + Math.imul(ah7, bh2) | 0;
        lo = lo + Math.imul(al6, bl3) | 0;
        mid = mid + Math.imul(al6, bh3) | 0;
        mid = mid + Math.imul(ah6, bl3) | 0;
        hi = hi + Math.imul(ah6, bh3) | 0;
        lo = lo + Math.imul(al5, bl4) | 0;
        mid = mid + Math.imul(al5, bh4) | 0;
        mid = mid + Math.imul(ah5, bl4) | 0;
        hi = hi + Math.imul(ah5, bh4) | 0;
        lo = lo + Math.imul(al4, bl5) | 0;
        mid = mid + Math.imul(al4, bh5) | 0;
        mid = mid + Math.imul(ah4, bl5) | 0;
        hi = hi + Math.imul(ah4, bh5) | 0;
        lo = lo + Math.imul(al3, bl6) | 0;
        mid = mid + Math.imul(al3, bh6) | 0;
        mid = mid + Math.imul(ah3, bl6) | 0;
        hi = hi + Math.imul(ah3, bh6) | 0;
        lo = lo + Math.imul(al2, bl7) | 0;
        mid = mid + Math.imul(al2, bh7) | 0;
        mid = mid + Math.imul(ah2, bl7) | 0;
        hi = hi + Math.imul(ah2, bh7) | 0;
        lo = lo + Math.imul(al1, bl8) | 0;
        mid = mid + Math.imul(al1, bh8) | 0;
        mid = mid + Math.imul(ah1, bl8) | 0;
        hi = hi + Math.imul(ah1, bh8) | 0;
        lo = lo + Math.imul(al0, bl9) | 0;
        mid = mid + Math.imul(al0, bh9) | 0;
        mid = mid + Math.imul(ah0, bl9) | 0;
        hi = hi + Math.imul(ah0, bh9) | 0;
        var w9 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w9 >>> 26) | 0;
        w9 &= 67108863;
        lo = Math.imul(al9, bl1);
        mid = Math.imul(al9, bh1);
        mid = mid + Math.imul(ah9, bl1) | 0;
        hi = Math.imul(ah9, bh1);
        lo = lo + Math.imul(al8, bl2) | 0;
        mid = mid + Math.imul(al8, bh2) | 0;
        mid = mid + Math.imul(ah8, bl2) | 0;
        hi = hi + Math.imul(ah8, bh2) | 0;
        lo = lo + Math.imul(al7, bl3) | 0;
        mid = mid + Math.imul(al7, bh3) | 0;
        mid = mid + Math.imul(ah7, bl3) | 0;
        hi = hi + Math.imul(ah7, bh3) | 0;
        lo = lo + Math.imul(al6, bl4) | 0;
        mid = mid + Math.imul(al6, bh4) | 0;
        mid = mid + Math.imul(ah6, bl4) | 0;
        hi = hi + Math.imul(ah6, bh4) | 0;
        lo = lo + Math.imul(al5, bl5) | 0;
        mid = mid + Math.imul(al5, bh5) | 0;
        mid = mid + Math.imul(ah5, bl5) | 0;
        hi = hi + Math.imul(ah5, bh5) | 0;
        lo = lo + Math.imul(al4, bl6) | 0;
        mid = mid + Math.imul(al4, bh6) | 0;
        mid = mid + Math.imul(ah4, bl6) | 0;
        hi = hi + Math.imul(ah4, bh6) | 0;
        lo = lo + Math.imul(al3, bl7) | 0;
        mid = mid + Math.imul(al3, bh7) | 0;
        mid = mid + Math.imul(ah3, bl7) | 0;
        hi = hi + Math.imul(ah3, bh7) | 0;
        lo = lo + Math.imul(al2, bl8) | 0;
        mid = mid + Math.imul(al2, bh8) | 0;
        mid = mid + Math.imul(ah2, bl8) | 0;
        hi = hi + Math.imul(ah2, bh8) | 0;
        lo = lo + Math.imul(al1, bl9) | 0;
        mid = mid + Math.imul(al1, bh9) | 0;
        mid = mid + Math.imul(ah1, bl9) | 0;
        hi = hi + Math.imul(ah1, bh9) | 0;
        var w10 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w10 >>> 26) | 0;
        w10 &= 67108863;
        lo = Math.imul(al9, bl2);
        mid = Math.imul(al9, bh2);
        mid = mid + Math.imul(ah9, bl2) | 0;
        hi = Math.imul(ah9, bh2);
        lo = lo + Math.imul(al8, bl3) | 0;
        mid = mid + Math.imul(al8, bh3) | 0;
        mid = mid + Math.imul(ah8, bl3) | 0;
        hi = hi + Math.imul(ah8, bh3) | 0;
        lo = lo + Math.imul(al7, bl4) | 0;
        mid = mid + Math.imul(al7, bh4) | 0;
        mid = mid + Math.imul(ah7, bl4) | 0;
        hi = hi + Math.imul(ah7, bh4) | 0;
        lo = lo + Math.imul(al6, bl5) | 0;
        mid = mid + Math.imul(al6, bh5) | 0;
        mid = mid + Math.imul(ah6, bl5) | 0;
        hi = hi + Math.imul(ah6, bh5) | 0;
        lo = lo + Math.imul(al5, bl6) | 0;
        mid = mid + Math.imul(al5, bh6) | 0;
        mid = mid + Math.imul(ah5, bl6) | 0;
        hi = hi + Math.imul(ah5, bh6) | 0;
        lo = lo + Math.imul(al4, bl7) | 0;
        mid = mid + Math.imul(al4, bh7) | 0;
        mid = mid + Math.imul(ah4, bl7) | 0;
        hi = hi + Math.imul(ah4, bh7) | 0;
        lo = lo + Math.imul(al3, bl8) | 0;
        mid = mid + Math.imul(al3, bh8) | 0;
        mid = mid + Math.imul(ah3, bl8) | 0;
        hi = hi + Math.imul(ah3, bh8) | 0;
        lo = lo + Math.imul(al2, bl9) | 0;
        mid = mid + Math.imul(al2, bh9) | 0;
        mid = mid + Math.imul(ah2, bl9) | 0;
        hi = hi + Math.imul(ah2, bh9) | 0;
        var w11 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w11 >>> 26) | 0;
        w11 &= 67108863;
        lo = Math.imul(al9, bl3);
        mid = Math.imul(al9, bh3);
        mid = mid + Math.imul(ah9, bl3) | 0;
        hi = Math.imul(ah9, bh3);
        lo = lo + Math.imul(al8, bl4) | 0;
        mid = mid + Math.imul(al8, bh4) | 0;
        mid = mid + Math.imul(ah8, bl4) | 0;
        hi = hi + Math.imul(ah8, bh4) | 0;
        lo = lo + Math.imul(al7, bl5) | 0;
        mid = mid + Math.imul(al7, bh5) | 0;
        mid = mid + Math.imul(ah7, bl5) | 0;
        hi = hi + Math.imul(ah7, bh5) | 0;
        lo = lo + Math.imul(al6, bl6) | 0;
        mid = mid + Math.imul(al6, bh6) | 0;
        mid = mid + Math.imul(ah6, bl6) | 0;
        hi = hi + Math.imul(ah6, bh6) | 0;
        lo = lo + Math.imul(al5, bl7) | 0;
        mid = mid + Math.imul(al5, bh7) | 0;
        mid = mid + Math.imul(ah5, bl7) | 0;
        hi = hi + Math.imul(ah5, bh7) | 0;
        lo = lo + Math.imul(al4, bl8) | 0;
        mid = mid + Math.imul(al4, bh8) | 0;
        mid = mid + Math.imul(ah4, bl8) | 0;
        hi = hi + Math.imul(ah4, bh8) | 0;
        lo = lo + Math.imul(al3, bl9) | 0;
        mid = mid + Math.imul(al3, bh9) | 0;
        mid = mid + Math.imul(ah3, bl9) | 0;
        hi = hi + Math.imul(ah3, bh9) | 0;
        var w12 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w12 >>> 26) | 0;
        w12 &= 67108863;
        lo = Math.imul(al9, bl4);
        mid = Math.imul(al9, bh4);
        mid = mid + Math.imul(ah9, bl4) | 0;
        hi = Math.imul(ah9, bh4);
        lo = lo + Math.imul(al8, bl5) | 0;
        mid = mid + Math.imul(al8, bh5) | 0;
        mid = mid + Math.imul(ah8, bl5) | 0;
        hi = hi + Math.imul(ah8, bh5) | 0;
        lo = lo + Math.imul(al7, bl6) | 0;
        mid = mid + Math.imul(al7, bh6) | 0;
        mid = mid + Math.imul(ah7, bl6) | 0;
        hi = hi + Math.imul(ah7, bh6) | 0;
        lo = lo + Math.imul(al6, bl7) | 0;
        mid = mid + Math.imul(al6, bh7) | 0;
        mid = mid + Math.imul(ah6, bl7) | 0;
        hi = hi + Math.imul(ah6, bh7) | 0;
        lo = lo + Math.imul(al5, bl8) | 0;
        mid = mid + Math.imul(al5, bh8) | 0;
        mid = mid + Math.imul(ah5, bl8) | 0;
        hi = hi + Math.imul(ah5, bh8) | 0;
        lo = lo + Math.imul(al4, bl9) | 0;
        mid = mid + Math.imul(al4, bh9) | 0;
        mid = mid + Math.imul(ah4, bl9) | 0;
        hi = hi + Math.imul(ah4, bh9) | 0;
        var w13 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w13 >>> 26) | 0;
        w13 &= 67108863;
        lo = Math.imul(al9, bl5);
        mid = Math.imul(al9, bh5);
        mid = mid + Math.imul(ah9, bl5) | 0;
        hi = Math.imul(ah9, bh5);
        lo = lo + Math.imul(al8, bl6) | 0;
        mid = mid + Math.imul(al8, bh6) | 0;
        mid = mid + Math.imul(ah8, bl6) | 0;
        hi = hi + Math.imul(ah8, bh6) | 0;
        lo = lo + Math.imul(al7, bl7) | 0;
        mid = mid + Math.imul(al7, bh7) | 0;
        mid = mid + Math.imul(ah7, bl7) | 0;
        hi = hi + Math.imul(ah7, bh7) | 0;
        lo = lo + Math.imul(al6, bl8) | 0;
        mid = mid + Math.imul(al6, bh8) | 0;
        mid = mid + Math.imul(ah6, bl8) | 0;
        hi = hi + Math.imul(ah6, bh8) | 0;
        lo = lo + Math.imul(al5, bl9) | 0;
        mid = mid + Math.imul(al5, bh9) | 0;
        mid = mid + Math.imul(ah5, bl9) | 0;
        hi = hi + Math.imul(ah5, bh9) | 0;
        var w14 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w14 >>> 26) | 0;
        w14 &= 67108863;
        lo = Math.imul(al9, bl6);
        mid = Math.imul(al9, bh6);
        mid = mid + Math.imul(ah9, bl6) | 0;
        hi = Math.imul(ah9, bh6);
        lo = lo + Math.imul(al8, bl7) | 0;
        mid = mid + Math.imul(al8, bh7) | 0;
        mid = mid + Math.imul(ah8, bl7) | 0;
        hi = hi + Math.imul(ah8, bh7) | 0;
        lo = lo + Math.imul(al7, bl8) | 0;
        mid = mid + Math.imul(al7, bh8) | 0;
        mid = mid + Math.imul(ah7, bl8) | 0;
        hi = hi + Math.imul(ah7, bh8) | 0;
        lo = lo + Math.imul(al6, bl9) | 0;
        mid = mid + Math.imul(al6, bh9) | 0;
        mid = mid + Math.imul(ah6, bl9) | 0;
        hi = hi + Math.imul(ah6, bh9) | 0;
        var w15 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w15 >>> 26) | 0;
        w15 &= 67108863;
        lo = Math.imul(al9, bl7);
        mid = Math.imul(al9, bh7);
        mid = mid + Math.imul(ah9, bl7) | 0;
        hi = Math.imul(ah9, bh7);
        lo = lo + Math.imul(al8, bl8) | 0;
        mid = mid + Math.imul(al8, bh8) | 0;
        mid = mid + Math.imul(ah8, bl8) | 0;
        hi = hi + Math.imul(ah8, bh8) | 0;
        lo = lo + Math.imul(al7, bl9) | 0;
        mid = mid + Math.imul(al7, bh9) | 0;
        mid = mid + Math.imul(ah7, bl9) | 0;
        hi = hi + Math.imul(ah7, bh9) | 0;
        var w16 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w16 >>> 26) | 0;
        w16 &= 67108863;
        lo = Math.imul(al9, bl8);
        mid = Math.imul(al9, bh8);
        mid = mid + Math.imul(ah9, bl8) | 0;
        hi = Math.imul(ah9, bh8);
        lo = lo + Math.imul(al8, bl9) | 0;
        mid = mid + Math.imul(al8, bh9) | 0;
        mid = mid + Math.imul(ah8, bl9) | 0;
        hi = hi + Math.imul(ah8, bh9) | 0;
        var w17 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w17 >>> 26) | 0;
        w17 &= 67108863;
        lo = Math.imul(al9, bl9);
        mid = Math.imul(al9, bh9);
        mid = mid + Math.imul(ah9, bl9) | 0;
        hi = Math.imul(ah9, bh9);
        var w18 = (c + lo | 0) + ((mid & 8191) << 13) | 0;
        c = (hi + (mid >>> 13) | 0) + (w18 >>> 26) | 0;
        w18 &= 67108863;
        o[0] = w0;
        o[1] = w1;
        o[2] = w2;
        o[3] = w3;
        o[4] = w4;
        o[5] = w5;
        o[6] = w6;
        o[7] = w7;
        o[8] = w8;
        o[9] = w9;
        o[10] = w10;
        o[11] = w11;
        o[12] = w12;
        o[13] = w13;
        o[14] = w14;
        o[15] = w15;
        o[16] = w16;
        o[17] = w17;
        o[18] = w18;
        if (c !== 0) {
          o[19] = c;
          out.length++;
        }
        return out;
      };
      if (!Math.imul) {
        comb10MulTo = smallMulTo;
      }
      function bigMulTo(self2, num, out) {
        out.negative = num.negative ^ self2.negative;
        out.length = self2.length + num.length;
        var carry = 0;
        var hncarry = 0;
        for (var k = 0; k < out.length - 1; k++) {
          var ncarry = hncarry;
          hncarry = 0;
          var rword = carry & 67108863;
          var maxJ = Math.min(k, num.length - 1);
          for (var j = Math.max(0, k - self2.length + 1); j <= maxJ; j++) {
            var i2 = k - j;
            var a = self2.words[i2] | 0;
            var b = num.words[j] | 0;
            var r = a * b;
            var lo = r & 67108863;
            ncarry = ncarry + (r / 67108864 | 0) | 0;
            lo = lo + rword | 0;
            rword = lo & 67108863;
            ncarry = ncarry + (lo >>> 26) | 0;
            hncarry += ncarry >>> 26;
            ncarry &= 67108863;
          }
          out.words[k] = rword;
          carry = ncarry;
          ncarry = hncarry;
        }
        if (carry !== 0) {
          out.words[k] = carry;
        } else {
          out.length--;
        }
        return out.strip();
      }
      function jumboMulTo(self2, num, out) {
        var fftm = new FFTM();
        return fftm.mulp(self2, num, out);
      }
      BN.prototype.mulTo = function mulTo(num, out) {
        var res;
        var len2 = this.length + num.length;
        if (this.length === 10 && num.length === 10) {
          res = comb10MulTo(this, num, out);
        } else if (len2 < 63) {
          res = smallMulTo(this, num, out);
        } else if (len2 < 1024) {
          res = bigMulTo(this, num, out);
        } else {
          res = jumboMulTo(this, num, out);
        }
        return res;
      };
      function FFTM(x, y) {
        this.x = x;
        this.y = y;
      }
      FFTM.prototype.makeRBT = function makeRBT(N) {
        var t = new Array(N);
        var l = BN.prototype._countBits(N) - 1;
        for (var i2 = 0; i2 < N; i2++) {
          t[i2] = this.revBin(i2, l, N);
        }
        return t;
      };
      FFTM.prototype.revBin = function revBin(x, l, N) {
        if (x === 0 || x === N - 1)
          return x;
        var rb = 0;
        for (var i2 = 0; i2 < l; i2++) {
          rb |= (x & 1) << l - i2 - 1;
          x >>= 1;
        }
        return rb;
      };
      FFTM.prototype.permute = function permute(rbt, rws, iws, rtws, itws, N) {
        for (var i2 = 0; i2 < N; i2++) {
          rtws[i2] = rws[rbt[i2]];
          itws[i2] = iws[rbt[i2]];
        }
      };
      FFTM.prototype.transform = function transform(rws, iws, rtws, itws, N, rbt) {
        this.permute(rbt, rws, iws, rtws, itws, N);
        for (var s = 1; s < N; s <<= 1) {
          var l = s << 1;
          var rtwdf = Math.cos(2 * Math.PI / l);
          var itwdf = Math.sin(2 * Math.PI / l);
          for (var p2 = 0; p2 < N; p2 += l) {
            var rtwdf_ = rtwdf;
            var itwdf_ = itwdf;
            for (var j = 0; j < s; j++) {
              var re = rtws[p2 + j];
              var ie = itws[p2 + j];
              var ro = rtws[p2 + j + s];
              var io = itws[p2 + j + s];
              var rx = rtwdf_ * ro - itwdf_ * io;
              io = rtwdf_ * io + itwdf_ * ro;
              ro = rx;
              rtws[p2 + j] = re + ro;
              itws[p2 + j] = ie + io;
              rtws[p2 + j + s] = re - ro;
              itws[p2 + j + s] = ie - io;
              if (j !== l) {
                rx = rtwdf * rtwdf_ - itwdf * itwdf_;
                itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;
                rtwdf_ = rx;
              }
            }
          }
        }
      };
      FFTM.prototype.guessLen13b = function guessLen13b(n, m) {
        var N = Math.max(m, n) | 1;
        var odd = N & 1;
        var i2 = 0;
        for (N = N / 2 | 0; N; N = N >>> 1) {
          i2++;
        }
        return 1 << i2 + 1 + odd;
      };
      FFTM.prototype.conjugate = function conjugate(rws, iws, N) {
        if (N <= 1)
          return;
        for (var i2 = 0; i2 < N / 2; i2++) {
          var t = rws[i2];
          rws[i2] = rws[N - i2 - 1];
          rws[N - i2 - 1] = t;
          t = iws[i2];
          iws[i2] = -iws[N - i2 - 1];
          iws[N - i2 - 1] = -t;
        }
      };
      FFTM.prototype.normalize13b = function normalize13b(ws, N) {
        var carry = 0;
        for (var i2 = 0; i2 < N / 2; i2++) {
          var w = Math.round(ws[2 * i2 + 1] / N) * 8192 + Math.round(ws[2 * i2] / N) + carry;
          ws[i2] = w & 67108863;
          if (w < 67108864) {
            carry = 0;
          } else {
            carry = w / 67108864 | 0;
          }
        }
        return ws;
      };
      FFTM.prototype.convert13b = function convert13b(ws, len2, rws, N) {
        var carry = 0;
        for (var i2 = 0; i2 < len2; i2++) {
          carry = carry + (ws[i2] | 0);
          rws[2 * i2] = carry & 8191;
          carry = carry >>> 13;
          rws[2 * i2 + 1] = carry & 8191;
          carry = carry >>> 13;
        }
        for (i2 = 2 * len2; i2 < N; ++i2) {
          rws[i2] = 0;
        }
        assert(carry === 0);
        assert((carry & ~8191) === 0);
      };
      FFTM.prototype.stub = function stub(N) {
        var ph = new Array(N);
        for (var i2 = 0; i2 < N; i2++) {
          ph[i2] = 0;
        }
        return ph;
      };
      FFTM.prototype.mulp = function mulp(x, y, out) {
        var N = 2 * this.guessLen13b(x.length, y.length);
        var rbt = this.makeRBT(N);
        var _ = this.stub(N);
        var rws = new Array(N);
        var rwst = new Array(N);
        var iwst = new Array(N);
        var nrws = new Array(N);
        var nrwst = new Array(N);
        var niwst = new Array(N);
        var rmws = out.words;
        rmws.length = N;
        this.convert13b(x.words, x.length, rws, N);
        this.convert13b(y.words, y.length, nrws, N);
        this.transform(rws, _, rwst, iwst, N, rbt);
        this.transform(nrws, _, nrwst, niwst, N, rbt);
        for (var i2 = 0; i2 < N; i2++) {
          var rx = rwst[i2] * nrwst[i2] - iwst[i2] * niwst[i2];
          iwst[i2] = rwst[i2] * niwst[i2] + iwst[i2] * nrwst[i2];
          rwst[i2] = rx;
        }
        this.conjugate(rwst, iwst, N);
        this.transform(rwst, iwst, rmws, _, N, rbt);
        this.conjugate(rmws, _, N);
        this.normalize13b(rmws, N);
        out.negative = x.negative ^ y.negative;
        out.length = x.length + y.length;
        return out.strip();
      };
      BN.prototype.mul = function mul(num) {
        var out = new BN(null);
        out.words = new Array(this.length + num.length);
        return this.mulTo(num, out);
      };
      BN.prototype.mulf = function mulf(num) {
        var out = new BN(null);
        out.words = new Array(this.length + num.length);
        return jumboMulTo(this, num, out);
      };
      BN.prototype.imul = function imul(num) {
        return this.clone().mulTo(num, this);
      };
      BN.prototype.imuln = function imuln(num) {
        assert(typeof num === "number");
        assert(num < 67108864);
        var carry = 0;
        for (var i2 = 0; i2 < this.length; i2++) {
          var w = (this.words[i2] | 0) * num;
          var lo = (w & 67108863) + (carry & 67108863);
          carry >>= 26;
          carry += w / 67108864 | 0;
          carry += lo >>> 26;
          this.words[i2] = lo & 67108863;
        }
        if (carry !== 0) {
          this.words[i2] = carry;
          this.length++;
        }
        return this;
      };
      BN.prototype.muln = function muln(num) {
        return this.clone().imuln(num);
      };
      BN.prototype.sqr = function sqr() {
        return this.mul(this);
      };
      BN.prototype.isqr = function isqr() {
        return this.imul(this.clone());
      };
      BN.prototype.pow = function pow(num) {
        var w = toBitArray(num);
        if (w.length === 0)
          return new BN(1);
        var res = this;
        for (var i2 = 0; i2 < w.length; i2++, res = res.sqr()) {
          if (w[i2] !== 0)
            break;
        }
        if (++i2 < w.length) {
          for (var q = res.sqr(); i2 < w.length; i2++, q = q.sqr()) {
            if (w[i2] === 0)
              continue;
            res = res.mul(q);
          }
        }
        return res;
      };
      BN.prototype.iushln = function iushln(bits) {
        assert(typeof bits === "number" && bits >= 0);
        var r = bits % 26;
        var s = (bits - r) / 26;
        var carryMask = 67108863 >>> 26 - r << 26 - r;
        var i2;
        if (r !== 0) {
          var carry = 0;
          for (i2 = 0; i2 < this.length; i2++) {
            var newCarry = this.words[i2] & carryMask;
            var c = (this.words[i2] | 0) - newCarry << r;
            this.words[i2] = c | carry;
            carry = newCarry >>> 26 - r;
          }
          if (carry) {
            this.words[i2] = carry;
            this.length++;
          }
        }
        if (s !== 0) {
          for (i2 = this.length - 1; i2 >= 0; i2--) {
            this.words[i2 + s] = this.words[i2];
          }
          for (i2 = 0; i2 < s; i2++) {
            this.words[i2] = 0;
          }
          this.length += s;
        }
        return this.strip();
      };
      BN.prototype.ishln = function ishln(bits) {
        assert(this.negative === 0);
        return this.iushln(bits);
      };
      BN.prototype.iushrn = function iushrn(bits, hint, extended) {
        assert(typeof bits === "number" && bits >= 0);
        var h;
        if (hint) {
          h = (hint - hint % 26) / 26;
        } else {
          h = 0;
        }
        var r = bits % 26;
        var s = Math.min((bits - r) / 26, this.length);
        var mask = 67108863 ^ 67108863 >>> r << r;
        var maskedWords = extended;
        h -= s;
        h = Math.max(0, h);
        if (maskedWords) {
          for (var i2 = 0; i2 < s; i2++) {
            maskedWords.words[i2] = this.words[i2];
          }
          maskedWords.length = s;
        }
        if (s === 0)
          ;
        else if (this.length > s) {
          this.length -= s;
          for (i2 = 0; i2 < this.length; i2++) {
            this.words[i2] = this.words[i2 + s];
          }
        } else {
          this.words[0] = 0;
          this.length = 1;
        }
        var carry = 0;
        for (i2 = this.length - 1; i2 >= 0 && (carry !== 0 || i2 >= h); i2--) {
          var word = this.words[i2] | 0;
          this.words[i2] = carry << 26 - r | word >>> r;
          carry = word & mask;
        }
        if (maskedWords && carry !== 0) {
          maskedWords.words[maskedWords.length++] = carry;
        }
        if (this.length === 0) {
          this.words[0] = 0;
          this.length = 1;
        }
        return this.strip();
      };
      BN.prototype.ishrn = function ishrn(bits, hint, extended) {
        assert(this.negative === 0);
        return this.iushrn(bits, hint, extended);
      };
      BN.prototype.shln = function shln(bits) {
        return this.clone().ishln(bits);
      };
      BN.prototype.ushln = function ushln(bits) {
        return this.clone().iushln(bits);
      };
      BN.prototype.shrn = function shrn(bits) {
        return this.clone().ishrn(bits);
      };
      BN.prototype.ushrn = function ushrn(bits) {
        return this.clone().iushrn(bits);
      };
      BN.prototype.testn = function testn(bit) {
        assert(typeof bit === "number" && bit >= 0);
        var r = bit % 26;
        var s = (bit - r) / 26;
        var q = 1 << r;
        if (this.length <= s)
          return false;
        var w = this.words[s];
        return !!(w & q);
      };
      BN.prototype.imaskn = function imaskn(bits) {
        assert(typeof bits === "number" && bits >= 0);
        var r = bits % 26;
        var s = (bits - r) / 26;
        assert(this.negative === 0, "imaskn works only with positive numbers");
        if (this.length <= s) {
          return this;
        }
        if (r !== 0) {
          s++;
        }
        this.length = Math.min(s, this.length);
        if (r !== 0) {
          var mask = 67108863 ^ 67108863 >>> r << r;
          this.words[this.length - 1] &= mask;
        }
        return this.strip();
      };
      BN.prototype.maskn = function maskn(bits) {
        return this.clone().imaskn(bits);
      };
      BN.prototype.iaddn = function iaddn(num) {
        assert(typeof num === "number");
        assert(num < 67108864);
        if (num < 0)
          return this.isubn(-num);
        if (this.negative !== 0) {
          if (this.length === 1 && (this.words[0] | 0) < num) {
            this.words[0] = num - (this.words[0] | 0);
            this.negative = 0;
            return this;
          }
          this.negative = 0;
          this.isubn(num);
          this.negative = 1;
          return this;
        }
        return this._iaddn(num);
      };
      BN.prototype._iaddn = function _iaddn(num) {
        this.words[0] += num;
        for (var i2 = 0; i2 < this.length && this.words[i2] >= 67108864; i2++) {
          this.words[i2] -= 67108864;
          if (i2 === this.length - 1) {
            this.words[i2 + 1] = 1;
          } else {
            this.words[i2 + 1]++;
          }
        }
        this.length = Math.max(this.length, i2 + 1);
        return this;
      };
      BN.prototype.isubn = function isubn(num) {
        assert(typeof num === "number");
        assert(num < 67108864);
        if (num < 0)
          return this.iaddn(-num);
        if (this.negative !== 0) {
          this.negative = 0;
          this.iaddn(num);
          this.negative = 1;
          return this;
        }
        this.words[0] -= num;
        if (this.length === 1 && this.words[0] < 0) {
          this.words[0] = -this.words[0];
          this.negative = 1;
        } else {
          for (var i2 = 0; i2 < this.length && this.words[i2] < 0; i2++) {
            this.words[i2] += 67108864;
            this.words[i2 + 1] -= 1;
          }
        }
        return this.strip();
      };
      BN.prototype.addn = function addn(num) {
        return this.clone().iaddn(num);
      };
      BN.prototype.subn = function subn(num) {
        return this.clone().isubn(num);
      };
      BN.prototype.iabs = function iabs() {
        this.negative = 0;
        return this;
      };
      BN.prototype.abs = function abs() {
        return this.clone().iabs();
      };
      BN.prototype._ishlnsubmul = function _ishlnsubmul(num, mul, shift) {
        var len2 = num.length + shift;
        var i2;
        this._expand(len2);
        var w;
        var carry = 0;
        for (i2 = 0; i2 < num.length; i2++) {
          w = (this.words[i2 + shift] | 0) + carry;
          var right = (num.words[i2] | 0) * mul;
          w -= right & 67108863;
          carry = (w >> 26) - (right / 67108864 | 0);
          this.words[i2 + shift] = w & 67108863;
        }
        for (; i2 < this.length - shift; i2++) {
          w = (this.words[i2 + shift] | 0) + carry;
          carry = w >> 26;
          this.words[i2 + shift] = w & 67108863;
        }
        if (carry === 0)
          return this.strip();
        assert(carry === -1);
        carry = 0;
        for (i2 = 0; i2 < this.length; i2++) {
          w = -(this.words[i2] | 0) + carry;
          carry = w >> 26;
          this.words[i2] = w & 67108863;
        }
        this.negative = 1;
        return this.strip();
      };
      BN.prototype._wordDiv = function _wordDiv(num, mode) {
        var shift = this.length - num.length;
        var a = this.clone();
        var b = num;
        var bhi = b.words[b.length - 1] | 0;
        var bhiBits = this._countBits(bhi);
        shift = 26 - bhiBits;
        if (shift !== 0) {
          b = b.ushln(shift);
          a.iushln(shift);
          bhi = b.words[b.length - 1] | 0;
        }
        var m = a.length - b.length;
        var q;
        if (mode !== "mod") {
          q = new BN(null);
          q.length = m + 1;
          q.words = new Array(q.length);
          for (var i2 = 0; i2 < q.length; i2++) {
            q.words[i2] = 0;
          }
        }
        var diff = a.clone()._ishlnsubmul(b, 1, m);
        if (diff.negative === 0) {
          a = diff;
          if (q) {
            q.words[m] = 1;
          }
        }
        for (var j = m - 1; j >= 0; j--) {
          var qj = (a.words[b.length + j] | 0) * 67108864 + (a.words[b.length + j - 1] | 0);
          qj = Math.min(qj / bhi | 0, 67108863);
          a._ishlnsubmul(b, qj, j);
          while (a.negative !== 0) {
            qj--;
            a.negative = 0;
            a._ishlnsubmul(b, 1, j);
            if (!a.isZero()) {
              a.negative ^= 1;
            }
          }
          if (q) {
            q.words[j] = qj;
          }
        }
        if (q) {
          q.strip();
        }
        a.strip();
        if (mode !== "div" && shift !== 0) {
          a.iushrn(shift);
        }
        return {
          div: q || null,
          mod: a
        };
      };
      BN.prototype.divmod = function divmod(num, mode, positive) {
        assert(!num.isZero());
        if (this.isZero()) {
          return {
            div: new BN(0),
            mod: new BN(0)
          };
        }
        var div, mod, res;
        if (this.negative !== 0 && num.negative === 0) {
          res = this.neg().divmod(num, mode);
          if (mode !== "mod") {
            div = res.div.neg();
          }
          if (mode !== "div") {
            mod = res.mod.neg();
            if (positive && mod.negative !== 0) {
              mod.iadd(num);
            }
          }
          return {
            div,
            mod
          };
        }
        if (this.negative === 0 && num.negative !== 0) {
          res = this.divmod(num.neg(), mode);
          if (mode !== "mod") {
            div = res.div.neg();
          }
          return {
            div,
            mod: res.mod
          };
        }
        if ((this.negative & num.negative) !== 0) {
          res = this.neg().divmod(num.neg(), mode);
          if (mode !== "div") {
            mod = res.mod.neg();
            if (positive && mod.negative !== 0) {
              mod.isub(num);
            }
          }
          return {
            div: res.div,
            mod
          };
        }
        if (num.length > this.length || this.cmp(num) < 0) {
          return {
            div: new BN(0),
            mod: this
          };
        }
        if (num.length === 1) {
          if (mode === "div") {
            return {
              div: this.divn(num.words[0]),
              mod: null
            };
          }
          if (mode === "mod") {
            return {
              div: null,
              mod: new BN(this.modn(num.words[0]))
            };
          }
          return {
            div: this.divn(num.words[0]),
            mod: new BN(this.modn(num.words[0]))
          };
        }
        return this._wordDiv(num, mode);
      };
      BN.prototype.div = function div(num) {
        return this.divmod(num, "div", false).div;
      };
      BN.prototype.mod = function mod(num) {
        return this.divmod(num, "mod", false).mod;
      };
      BN.prototype.umod = function umod(num) {
        return this.divmod(num, "mod", true).mod;
      };
      BN.prototype.divRound = function divRound(num) {
        var dm = this.divmod(num);
        if (dm.mod.isZero())
          return dm.div;
        var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;
        var half = num.ushrn(1);
        var r2 = num.andln(1);
        var cmp = mod.cmp(half);
        if (cmp < 0 || r2 === 1 && cmp === 0)
          return dm.div;
        return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);
      };
      BN.prototype.modn = function modn(num) {
        assert(num <= 67108863);
        var p2 = (1 << 26) % num;
        var acc = 0;
        for (var i2 = this.length - 1; i2 >= 0; i2--) {
          acc = (p2 * acc + (this.words[i2] | 0)) % num;
        }
        return acc;
      };
      BN.prototype.idivn = function idivn(num) {
        assert(num <= 67108863);
        var carry = 0;
        for (var i2 = this.length - 1; i2 >= 0; i2--) {
          var w = (this.words[i2] | 0) + carry * 67108864;
          this.words[i2] = w / num | 0;
          carry = w % num;
        }
        return this.strip();
      };
      BN.prototype.divn = function divn(num) {
        return this.clone().idivn(num);
      };
      BN.prototype.egcd = function egcd(p2) {
        assert(p2.negative === 0);
        assert(!p2.isZero());
        var x = this;
        var y = p2.clone();
        if (x.negative !== 0) {
          x = x.umod(p2);
        } else {
          x = x.clone();
        }
        var A = new BN(1);
        var B = new BN(0);
        var C = new BN(0);
        var D = new BN(1);
        var g = 0;
        while (x.isEven() && y.isEven()) {
          x.iushrn(1);
          y.iushrn(1);
          ++g;
        }
        var yp = y.clone();
        var xp = x.clone();
        while (!x.isZero()) {
          for (var i2 = 0, im = 1; (x.words[0] & im) === 0 && i2 < 26; ++i2, im <<= 1)
            ;
          if (i2 > 0) {
            x.iushrn(i2);
            while (i2-- > 0) {
              if (A.isOdd() || B.isOdd()) {
                A.iadd(yp);
                B.isub(xp);
              }
              A.iushrn(1);
              B.iushrn(1);
            }
          }
          for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1)
            ;
          if (j > 0) {
            y.iushrn(j);
            while (j-- > 0) {
              if (C.isOdd() || D.isOdd()) {
                C.iadd(yp);
                D.isub(xp);
              }
              C.iushrn(1);
              D.iushrn(1);
            }
          }
          if (x.cmp(y) >= 0) {
            x.isub(y);
            A.isub(C);
            B.isub(D);
          } else {
            y.isub(x);
            C.isub(A);
            D.isub(B);
          }
        }
        return {
          a: C,
          b: D,
          gcd: y.iushln(g)
        };
      };
      BN.prototype._invmp = function _invmp(p2) {
        assert(p2.negative === 0);
        assert(!p2.isZero());
        var a = this;
        var b = p2.clone();
        if (a.negative !== 0) {
          a = a.umod(p2);
        } else {
          a = a.clone();
        }
        var x1 = new BN(1);
        var x2 = new BN(0);
        var delta = b.clone();
        while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {
          for (var i2 = 0, im = 1; (a.words[0] & im) === 0 && i2 < 26; ++i2, im <<= 1)
            ;
          if (i2 > 0) {
            a.iushrn(i2);
            while (i2-- > 0) {
              if (x1.isOdd()) {
                x1.iadd(delta);
              }
              x1.iushrn(1);
            }
          }
          for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1)
            ;
          if (j > 0) {
            b.iushrn(j);
            while (j-- > 0) {
              if (x2.isOdd()) {
                x2.iadd(delta);
              }
              x2.iushrn(1);
            }
          }
          if (a.cmp(b) >= 0) {
            a.isub(b);
            x1.isub(x2);
          } else {
            b.isub(a);
            x2.isub(x1);
          }
        }
        var res;
        if (a.cmpn(1) === 0) {
          res = x1;
        } else {
          res = x2;
        }
        if (res.cmpn(0) < 0) {
          res.iadd(p2);
        }
        return res;
      };
      BN.prototype.gcd = function gcd(num) {
        if (this.isZero())
          return num.abs();
        if (num.isZero())
          return this.abs();
        var a = this.clone();
        var b = num.clone();
        a.negative = 0;
        b.negative = 0;
        for (var shift = 0; a.isEven() && b.isEven(); shift++) {
          a.iushrn(1);
          b.iushrn(1);
        }
        do {
          while (a.isEven()) {
            a.iushrn(1);
          }
          while (b.isEven()) {
            b.iushrn(1);
          }
          var r = a.cmp(b);
          if (r < 0) {
            var t = a;
            a = b;
            b = t;
          } else if (r === 0 || b.cmpn(1) === 0) {
            break;
          }
          a.isub(b);
        } while (true);
        return b.iushln(shift);
      };
      BN.prototype.invm = function invm(num) {
        return this.egcd(num).a.umod(num);
      };
      BN.prototype.isEven = function isEven() {
        return (this.words[0] & 1) === 0;
      };
      BN.prototype.isOdd = function isOdd() {
        return (this.words[0] & 1) === 1;
      };
      BN.prototype.andln = function andln(num) {
        return this.words[0] & num;
      };
      BN.prototype.bincn = function bincn(bit) {
        assert(typeof bit === "number");
        var r = bit % 26;
        var s = (bit - r) / 26;
        var q = 1 << r;
        if (this.length <= s) {
          this._expand(s + 1);
          this.words[s] |= q;
          return this;
        }
        var carry = q;
        for (var i2 = s; carry !== 0 && i2 < this.length; i2++) {
          var w = this.words[i2] | 0;
          w += carry;
          carry = w >>> 26;
          w &= 67108863;
          this.words[i2] = w;
        }
        if (carry !== 0) {
          this.words[i2] = carry;
          this.length++;
        }
        return this;
      };
      BN.prototype.isZero = function isZero() {
        return this.length === 1 && this.words[0] === 0;
      };
      BN.prototype.cmpn = function cmpn(num) {
        var negative = num < 0;
        if (this.negative !== 0 && !negative)
          return -1;
        if (this.negative === 0 && negative)
          return 1;
        this.strip();
        var res;
        if (this.length > 1) {
          res = 1;
        } else {
          if (negative) {
            num = -num;
          }
          assert(num <= 67108863, "Number is too big");
          var w = this.words[0] | 0;
          res = w === num ? 0 : w < num ? -1 : 1;
        }
        if (this.negative !== 0)
          return -res | 0;
        return res;
      };
      BN.prototype.cmp = function cmp(num) {
        if (this.negative !== 0 && num.negative === 0)
          return -1;
        if (this.negative === 0 && num.negative !== 0)
          return 1;
        var res = this.ucmp(num);
        if (this.negative !== 0)
          return -res | 0;
        return res;
      };
      BN.prototype.ucmp = function ucmp(num) {
        if (this.length > num.length)
          return 1;
        if (this.length < num.length)
          return -1;
        var res = 0;
        for (var i2 = this.length - 1; i2 >= 0; i2--) {
          var a = this.words[i2] | 0;
          var b = num.words[i2] | 0;
          if (a === b)
            continue;
          if (a < b) {
            res = -1;
          } else if (a > b) {
            res = 1;
          }
          break;
        }
        return res;
      };
      BN.prototype.gtn = function gtn(num) {
        return this.cmpn(num) === 1;
      };
      BN.prototype.gt = function gt(num) {
        return this.cmp(num) === 1;
      };
      BN.prototype.gten = function gten(num) {
        return this.cmpn(num) >= 0;
      };
      BN.prototype.gte = function gte(num) {
        return this.cmp(num) >= 0;
      };
      BN.prototype.ltn = function ltn(num) {
        return this.cmpn(num) === -1;
      };
      BN.prototype.lt = function lt(num) {
        return this.cmp(num) === -1;
      };
      BN.prototype.lten = function lten(num) {
        return this.cmpn(num) <= 0;
      };
      BN.prototype.lte = function lte(num) {
        return this.cmp(num) <= 0;
      };
      BN.prototype.eqn = function eqn(num) {
        return this.cmpn(num) === 0;
      };
      BN.prototype.eq = function eq(num) {
        return this.cmp(num) === 0;
      };
      BN.red = function red(num) {
        return new Red(num);
      };
      BN.prototype.toRed = function toRed(ctx) {
        assert(!this.red, "Already a number in reduction context");
        assert(this.negative === 0, "red works only with positives");
        return ctx.convertTo(this)._forceRed(ctx);
      };
      BN.prototype.fromRed = function fromRed() {
        assert(this.red, "fromRed works only with numbers in reduction context");
        return this.red.convertFrom(this);
      };
      BN.prototype._forceRed = function _forceRed(ctx) {
        this.red = ctx;
        return this;
      };
      BN.prototype.forceRed = function forceRed(ctx) {
        assert(!this.red, "Already a number in reduction context");
        return this._forceRed(ctx);
      };
      BN.prototype.redAdd = function redAdd(num) {
        assert(this.red, "redAdd works only with red numbers");
        return this.red.add(this, num);
      };
      BN.prototype.redIAdd = function redIAdd(num) {
        assert(this.red, "redIAdd works only with red numbers");
        return this.red.iadd(this, num);
      };
      BN.prototype.redSub = function redSub(num) {
        assert(this.red, "redSub works only with red numbers");
        return this.red.sub(this, num);
      };
      BN.prototype.redISub = function redISub(num) {
        assert(this.red, "redISub works only with red numbers");
        return this.red.isub(this, num);
      };
      BN.prototype.redShl = function redShl(num) {
        assert(this.red, "redShl works only with red numbers");
        return this.red.shl(this, num);
      };
      BN.prototype.redMul = function redMul(num) {
        assert(this.red, "redMul works only with red numbers");
        this.red._verify2(this, num);
        return this.red.mul(this, num);
      };
      BN.prototype.redIMul = function redIMul(num) {
        assert(this.red, "redMul works only with red numbers");
        this.red._verify2(this, num);
        return this.red.imul(this, num);
      };
      BN.prototype.redSqr = function redSqr() {
        assert(this.red, "redSqr works only with red numbers");
        this.red._verify1(this);
        return this.red.sqr(this);
      };
      BN.prototype.redISqr = function redISqr() {
        assert(this.red, "redISqr works only with red numbers");
        this.red._verify1(this);
        return this.red.isqr(this);
      };
      BN.prototype.redSqrt = function redSqrt() {
        assert(this.red, "redSqrt works only with red numbers");
        this.red._verify1(this);
        return this.red.sqrt(this);
      };
      BN.prototype.redInvm = function redInvm() {
        assert(this.red, "redInvm works only with red numbers");
        this.red._verify1(this);
        return this.red.invm(this);
      };
      BN.prototype.redNeg = function redNeg() {
        assert(this.red, "redNeg works only with red numbers");
        this.red._verify1(this);
        return this.red.neg(this);
      };
      BN.prototype.redPow = function redPow(num) {
        assert(this.red && !num.red, "redPow(normalNum)");
        this.red._verify1(this);
        return this.red.pow(this, num);
      };
      var primes = {
        k256: null,
        p224: null,
        p192: null,
        p25519: null
      };
      function MPrime(name, p2) {
        this.name = name;
        this.p = new BN(p2, 16);
        this.n = this.p.bitLength();
        this.k = new BN(1).iushln(this.n).isub(this.p);
        this.tmp = this._tmp();
      }
      MPrime.prototype._tmp = function _tmp() {
        var tmp = new BN(null);
        tmp.words = new Array(Math.ceil(this.n / 13));
        return tmp;
      };
      MPrime.prototype.ireduce = function ireduce(num) {
        var r = num;
        var rlen;
        do {
          this.split(r, this.tmp);
          r = this.imulK(r);
          r = r.iadd(this.tmp);
          rlen = r.bitLength();
        } while (rlen > this.n);
        var cmp = rlen < this.n ? -1 : r.ucmp(this.p);
        if (cmp === 0) {
          r.words[0] = 0;
          r.length = 1;
        } else if (cmp > 0) {
          r.isub(this.p);
        } else {
          if (r.strip !== void 0) {
            r.strip();
          } else {
            r._strip();
          }
        }
        return r;
      };
      MPrime.prototype.split = function split(input, out) {
        input.iushrn(this.n, 0, out);
      };
      MPrime.prototype.imulK = function imulK(num) {
        return num.imul(this.k);
      };
      function K256() {
        MPrime.call(this, "k256", "ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f");
      }
      inherits(K256, MPrime);
      K256.prototype.split = function split(input, output) {
        var mask = 4194303;
        var outLen = Math.min(input.length, 9);
        for (var i2 = 0; i2 < outLen; i2++) {
          output.words[i2] = input.words[i2];
        }
        output.length = outLen;
        if (input.length <= 9) {
          input.words[0] = 0;
          input.length = 1;
          return;
        }
        var prev = input.words[9];
        output.words[output.length++] = prev & mask;
        for (i2 = 10; i2 < input.length; i2++) {
          var next2 = input.words[i2] | 0;
          input.words[i2 - 10] = (next2 & mask) << 4 | prev >>> 22;
          prev = next2;
        }
        prev >>>= 22;
        input.words[i2 - 10] = prev;
        if (prev === 0 && input.length > 10) {
          input.length -= 10;
        } else {
          input.length -= 9;
        }
      };
      K256.prototype.imulK = function imulK(num) {
        num.words[num.length] = 0;
        num.words[num.length + 1] = 0;
        num.length += 2;
        var lo = 0;
        for (var i2 = 0; i2 < num.length; i2++) {
          var w = num.words[i2] | 0;
          lo += w * 977;
          num.words[i2] = lo & 67108863;
          lo = w * 64 + (lo / 67108864 | 0);
        }
        if (num.words[num.length - 1] === 0) {
          num.length--;
          if (num.words[num.length - 1] === 0) {
            num.length--;
          }
        }
        return num;
      };
      function P224() {
        MPrime.call(this, "p224", "ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001");
      }
      inherits(P224, MPrime);
      function P192() {
        MPrime.call(this, "p192", "ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff");
      }
      inherits(P192, MPrime);
      function P25519() {
        MPrime.call(this, "25519", "7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed");
      }
      inherits(P25519, MPrime);
      P25519.prototype.imulK = function imulK(num) {
        var carry = 0;
        for (var i2 = 0; i2 < num.length; i2++) {
          var hi = (num.words[i2] | 0) * 19 + carry;
          var lo = hi & 67108863;
          hi >>>= 26;
          num.words[i2] = lo;
          carry = hi;
        }
        if (carry !== 0) {
          num.words[num.length++] = carry;
        }
        return num;
      };
      BN._prime = function prime(name) {
        if (primes[name])
          return primes[name];
        var prime2;
        if (name === "k256") {
          prime2 = new K256();
        } else if (name === "p224") {
          prime2 = new P224();
        } else if (name === "p192") {
          prime2 = new P192();
        } else if (name === "p25519") {
          prime2 = new P25519();
        } else {
          throw new Error("Unknown prime " + name);
        }
        primes[name] = prime2;
        return prime2;
      };
      function Red(m) {
        if (typeof m === "string") {
          var prime = BN._prime(m);
          this.m = prime.p;
          this.prime = prime;
        } else {
          assert(m.gtn(1), "modulus must be greater than 1");
          this.m = m;
          this.prime = null;
        }
      }
      Red.prototype._verify1 = function _verify1(a) {
        assert(a.negative === 0, "red works only with positives");
        assert(a.red, "red works only with red numbers");
      };
      Red.prototype._verify2 = function _verify2(a, b) {
        assert((a.negative | b.negative) === 0, "red works only with positives");
        assert(a.red && a.red === b.red, "red works only with red numbers");
      };
      Red.prototype.imod = function imod(a) {
        if (this.prime)
          return this.prime.ireduce(a)._forceRed(this);
        return a.umod(this.m)._forceRed(this);
      };
      Red.prototype.neg = function neg(a) {
        if (a.isZero()) {
          return a.clone();
        }
        return this.m.sub(a)._forceRed(this);
      };
      Red.prototype.add = function add(a, b) {
        this._verify2(a, b);
        var res = a.add(b);
        if (res.cmp(this.m) >= 0) {
          res.isub(this.m);
        }
        return res._forceRed(this);
      };
      Red.prototype.iadd = function iadd(a, b) {
        this._verify2(a, b);
        var res = a.iadd(b);
        if (res.cmp(this.m) >= 0) {
          res.isub(this.m);
        }
        return res;
      };
      Red.prototype.sub = function sub(a, b) {
        this._verify2(a, b);
        var res = a.sub(b);
        if (res.cmpn(0) < 0) {
          res.iadd(this.m);
        }
        return res._forceRed(this);
      };
      Red.prototype.isub = function isub(a, b) {
        this._verify2(a, b);
        var res = a.isub(b);
        if (res.cmpn(0) < 0) {
          res.iadd(this.m);
        }
        return res;
      };
      Red.prototype.shl = function shl(a, num) {
        this._verify1(a);
        return this.imod(a.ushln(num));
      };
      Red.prototype.imul = function imul(a, b) {
        this._verify2(a, b);
        return this.imod(a.imul(b));
      };
      Red.prototype.mul = function mul(a, b) {
        this._verify2(a, b);
        return this.imod(a.mul(b));
      };
      Red.prototype.isqr = function isqr(a) {
        return this.imul(a, a.clone());
      };
      Red.prototype.sqr = function sqr(a) {
        return this.mul(a, a);
      };
      Red.prototype.sqrt = function sqrt(a) {
        if (a.isZero())
          return a.clone();
        var mod3 = this.m.andln(3);
        assert(mod3 % 2 === 1);
        if (mod3 === 3) {
          var pow = this.m.add(new BN(1)).iushrn(2);
          return this.pow(a, pow);
        }
        var q = this.m.subn(1);
        var s = 0;
        while (!q.isZero() && q.andln(1) === 0) {
          s++;
          q.iushrn(1);
        }
        assert(!q.isZero());
        var one = new BN(1).toRed(this);
        var nOne = one.redNeg();
        var lpow = this.m.subn(1).iushrn(1);
        var z = this.m.bitLength();
        z = new BN(2 * z * z).toRed(this);
        while (this.pow(z, lpow).cmp(nOne) !== 0) {
          z.redIAdd(nOne);
        }
        var c = this.pow(z, q);
        var r = this.pow(a, q.addn(1).iushrn(1));
        var t = this.pow(a, q);
        var m = s;
        while (t.cmp(one) !== 0) {
          var tmp = t;
          for (var i2 = 0; tmp.cmp(one) !== 0; i2++) {
            tmp = tmp.redSqr();
          }
          assert(i2 < m);
          var b = this.pow(c, new BN(1).iushln(m - i2 - 1));
          r = r.redMul(b);
          c = b.redSqr();
          t = t.redMul(c);
          m = i2;
        }
        return r;
      };
      Red.prototype.invm = function invm(a) {
        var inv = a._invmp(this.m);
        if (inv.negative !== 0) {
          inv.negative = 0;
          return this.imod(inv).redNeg();
        } else {
          return this.imod(inv);
        }
      };
      Red.prototype.pow = function pow(a, num) {
        if (num.isZero())
          return new BN(1).toRed(this);
        if (num.cmpn(1) === 0)
          return a.clone();
        var windowSize = 4;
        var wnd = new Array(1 << windowSize);
        wnd[0] = new BN(1).toRed(this);
        wnd[1] = a;
        for (var i2 = 2; i2 < wnd.length; i2++) {
          wnd[i2] = this.mul(wnd[i2 - 1], a);
        }
        var res = wnd[0];
        var current = 0;
        var currentLen = 0;
        var start2 = num.bitLength() % 26;
        if (start2 === 0) {
          start2 = 26;
        }
        for (i2 = num.length - 1; i2 >= 0; i2--) {
          var word = num.words[i2];
          for (var j = start2 - 1; j >= 0; j--) {
            var bit = word >> j & 1;
            if (res !== wnd[0]) {
              res = this.sqr(res);
            }
            if (bit === 0 && current === 0) {
              currentLen = 0;
              continue;
            }
            current <<= 1;
            current |= bit;
            currentLen++;
            if (currentLen !== windowSize && (i2 !== 0 || j !== 0))
              continue;
            res = this.mul(res, wnd[current]);
            currentLen = 0;
            current = 0;
          }
          start2 = 26;
        }
        return res;
      };
      Red.prototype.convertTo = function convertTo(num) {
        var r = num.umod(this.m);
        return r === num ? r.clone() : r;
      };
      Red.prototype.convertFrom = function convertFrom(num) {
        var res = num.clone();
        res.red = null;
        return res;
      };
      BN.mont = function mont(num) {
        return new Mont(num);
      };
      function Mont(m) {
        Red.call(this, m);
        this.shift = this.m.bitLength();
        if (this.shift % 26 !== 0) {
          this.shift += 26 - this.shift % 26;
        }
        this.r = new BN(1).iushln(this.shift);
        this.r2 = this.imod(this.r.sqr());
        this.rinv = this.r._invmp(this.m);
        this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);
        this.minv = this.minv.umod(this.r);
        this.minv = this.r.sub(this.minv);
      }
      inherits(Mont, Red);
      Mont.prototype.convertTo = function convertTo(num) {
        return this.imod(num.ushln(this.shift));
      };
      Mont.prototype.convertFrom = function convertFrom(num) {
        var r = this.imod(num.mul(this.rinv));
        r.red = null;
        return r;
      };
      Mont.prototype.imul = function imul(a, b) {
        if (a.isZero() || b.isZero()) {
          a.words[0] = 0;
          a.length = 1;
          return a;
        }
        var t = a.imul(b);
        var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);
        var u = t.isub(c).iushrn(this.shift);
        var res = u;
        if (u.cmp(this.m) >= 0) {
          res = u.isub(this.m);
        } else if (u.cmpn(0) < 0) {
          res = u.iadd(this.m);
        }
        return res._forceRed(this);
      };
      Mont.prototype.mul = function mul(a, b) {
        if (a.isZero() || b.isZero())
          return new BN(0)._forceRed(this);
        var t = a.mul(b);
        var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);
        var u = t.isub(c).iushrn(this.shift);
        var res = u;
        if (u.cmp(this.m) >= 0) {
          res = u.isub(this.m);
        } else if (u.cmpn(0) < 0) {
          res = u.iadd(this.m);
        }
        return res._forceRed(this);
      };
      Mont.prototype.invm = function invm(a) {
        var res = this.imod(a._invmp(this.m).mul(this.r2));
        return res._forceRed(this);
      };
    })(typeof module2 === "undefined" || module2, this);
  }, { "buffer": 79 }], 105: [function(require2, module2, exports2) {
    module2.exports = {
      "name": "elliptic",
      "version": "6.5.4",
      "description": "EC cryptography",
      "main": "lib/elliptic.js",
      "files": [
        "lib"
      ],
      "scripts": {
        "lint": "eslint lib test",
        "lint:fix": "npm run lint -- --fix",
        "unit": "istanbul test _mocha --reporter=spec test/index.js",
        "test": "npm run lint && npm run unit",
        "version": "grunt dist && git add dist/"
      },
      "repository": {
        "type": "git",
        "url": "git@github.com:indutny/elliptic"
      },
      "keywords": [
        "EC",
        "Elliptic",
        "curve",
        "Cryptography"
      ],
      "author": "Fedor Indutny <fedor@indutny.com>",
      "license": "MIT",
      "bugs": {
        "url": "https://github.com/indutny/elliptic/issues"
      },
      "homepage": "https://github.com/indutny/elliptic",
      "devDependencies": {
        "brfs": "^2.0.2",
        "coveralls": "^3.1.0",
        "eslint": "^7.6.0",
        "grunt": "^1.2.1",
        "grunt-browserify": "^5.3.0",
        "grunt-cli": "^1.3.2",
        "grunt-contrib-connect": "^3.0.0",
        "grunt-contrib-copy": "^1.0.0",
        "grunt-contrib-uglify": "^5.0.0",
        "grunt-mocha-istanbul": "^5.0.2",
        "grunt-saucelabs": "^9.0.1",
        "istanbul": "^0.4.5",
        "mocha": "^8.0.1"
      },
      "dependencies": {
        "bn.js": "^4.11.9",
        "brorand": "^1.1.0",
        "hash.js": "^1.0.0",
        "hmac-drbg": "^1.0.1",
        "inherits": "^2.0.4",
        "minimalistic-assert": "^1.0.1",
        "minimalistic-crypto-utils": "^1.0.1"
      }
    };
  }, {}], 106: [function(require2, module2, exports2) {
    var R2 = typeof Reflect === "object" ? Reflect : null;
    var ReflectApply3 = R2 && typeof R2.apply === "function" ? R2.apply : function ReflectApply4(target, receiver, args) {
      return Function.prototype.apply.call(target, receiver, args);
    };
    var ReflectOwnKeys2;
    if (R2 && typeof R2.ownKeys === "function") {
      ReflectOwnKeys2 = R2.ownKeys;
    } else if (Object.getOwnPropertySymbols) {
      ReflectOwnKeys2 = function ReflectOwnKeys3(target) {
        return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));
      };
    } else {
      ReflectOwnKeys2 = function ReflectOwnKeys3(target) {
        return Object.getOwnPropertyNames(target);
      };
    }
    function ProcessEmitWarning2(warning) {
      if (console && console.warn)
        console.warn(warning);
    }
    var NumberIsNaN3 = Number.isNaN || function NumberIsNaN4(value) {
      return value !== value;
    };
    function EventEmitter2() {
      EventEmitter2.init.call(this);
    }
    module2.exports = EventEmitter2;
    module2.exports.once = once3;
    EventEmitter2.EventEmitter = EventEmitter2;
    EventEmitter2.prototype._events = void 0;
    EventEmitter2.prototype._eventsCount = 0;
    EventEmitter2.prototype._maxListeners = void 0;
    var defaultMaxListeners2 = 10;
    function checkListener2(listener) {
      if (typeof listener !== "function") {
        throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof listener);
      }
    }
    Object.defineProperty(EventEmitter2, "defaultMaxListeners", {
      enumerable: true,
      get: function() {
        return defaultMaxListeners2;
      },
      set: function(arg) {
        if (typeof arg !== "number" || arg < 0 || NumberIsNaN3(arg)) {
          throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + arg + ".");
        }
        defaultMaxListeners2 = arg;
      }
    });
    EventEmitter2.init = function() {
      if (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) {
        this._events = Object.create(null);
        this._eventsCount = 0;
      }
      this._maxListeners = this._maxListeners || void 0;
    };
    EventEmitter2.prototype.setMaxListeners = function setMaxListeners2(n) {
      if (typeof n !== "number" || n < 0 || NumberIsNaN3(n)) {
        throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + n + ".");
      }
      this._maxListeners = n;
      return this;
    };
    function _getMaxListeners2(that) {
      if (that._maxListeners === void 0)
        return EventEmitter2.defaultMaxListeners;
      return that._maxListeners;
    }
    EventEmitter2.prototype.getMaxListeners = function getMaxListeners2() {
      return _getMaxListeners2(this);
    };
    EventEmitter2.prototype.emit = function emit2(type) {
      var args = [];
      for (var i2 = 1; i2 < arguments.length; i2++)
        args.push(arguments[i2]);
      var doError = type === "error";
      var events2 = this._events;
      if (events2 !== void 0)
        doError = doError && events2.error === void 0;
      else if (!doError)
        return false;
      if (doError) {
        var er;
        if (args.length > 0)
          er = args[0];
        if (er instanceof Error) {
          throw er;
        }
        var err = new Error("Unhandled error." + (er ? " (" + er.message + ")" : ""));
        err.context = er;
        throw err;
      }
      var handler = events2[type];
      if (handler === void 0)
        return false;
      if (typeof handler === "function") {
        ReflectApply3(handler, this, args);
      } else {
        var len2 = handler.length;
        var listeners2 = arrayClone2(handler, len2);
        for (var i2 = 0; i2 < len2; ++i2)
          ReflectApply3(listeners2[i2], this, args);
      }
      return true;
    };
    function _addListener2(target, type, listener, prepend) {
      var m;
      var events2;
      var existing;
      checkListener2(listener);
      events2 = target._events;
      if (events2 === void 0) {
        events2 = target._events = Object.create(null);
        target._eventsCount = 0;
      } else {
        if (events2.newListener !== void 0) {
          target.emit("newListener", type, listener.listener ? listener.listener : listener);
          events2 = target._events;
        }
        existing = events2[type];
      }
      if (existing === void 0) {
        existing = events2[type] = listener;
        ++target._eventsCount;
      } else {
        if (typeof existing === "function") {
          existing = events2[type] = prepend ? [listener, existing] : [existing, listener];
        } else if (prepend) {
          existing.unshift(listener);
        } else {
          existing.push(listener);
        }
        m = _getMaxListeners2(target);
        if (m > 0 && existing.length > m && !existing.warned) {
          existing.warned = true;
          var w = new Error("Possible EventEmitter memory leak detected. " + existing.length + " " + String(type) + " listeners added. Use emitter.setMaxListeners() to increase limit");
          w.name = "MaxListenersExceededWarning";
          w.emitter = target;
          w.type = type;
          w.count = existing.length;
          ProcessEmitWarning2(w);
        }
      }
      return target;
    }
    EventEmitter2.prototype.addListener = function addListener2(type, listener) {
      return _addListener2(this, type, listener, false);
    };
    EventEmitter2.prototype.on = EventEmitter2.prototype.addListener;
    EventEmitter2.prototype.prependListener = function prependListener3(type, listener) {
      return _addListener2(this, type, listener, true);
    };
    function onceWrapper2() {
      if (!this.fired) {
        this.target.removeListener(this.type, this.wrapFn);
        this.fired = true;
        if (arguments.length === 0)
          return this.listener.call(this.target);
        return this.listener.apply(this.target, arguments);
      }
    }
    function _onceWrap2(target, type, listener) {
      var state2 = { fired: false, wrapFn: void 0, target, type, listener };
      var wrapped = onceWrapper2.bind(state2);
      wrapped.listener = listener;
      state2.wrapFn = wrapped;
      return wrapped;
    }
    EventEmitter2.prototype.once = function once4(type, listener) {
      checkListener2(listener);
      this.on(type, _onceWrap2(this, type, listener));
      return this;
    };
    EventEmitter2.prototype.prependOnceListener = function prependOnceListener2(type, listener) {
      checkListener2(listener);
      this.prependListener(type, _onceWrap2(this, type, listener));
      return this;
    };
    EventEmitter2.prototype.removeListener = function removeListener2(type, listener) {
      var list, events2, position, i2, originalListener;
      checkListener2(listener);
      events2 = this._events;
      if (events2 === void 0)
        return this;
      list = events2[type];
      if (list === void 0)
        return this;
      if (list === listener || list.listener === listener) {
        if (--this._eventsCount === 0)
          this._events = Object.create(null);
        else {
          delete events2[type];
          if (events2.removeListener)
            this.emit("removeListener", type, list.listener || listener);
        }
      } else if (typeof list !== "function") {
        position = -1;
        for (i2 = list.length - 1; i2 >= 0; i2--) {
          if (list[i2] === listener || list[i2].listener === listener) {
            originalListener = list[i2].listener;
            position = i2;
            break;
          }
        }
        if (position < 0)
          return this;
        if (position === 0)
          list.shift();
        else {
          spliceOne2(list, position);
        }
        if (list.length === 1)
          events2[type] = list[0];
        if (events2.removeListener !== void 0)
          this.emit("removeListener", type, originalListener || listener);
      }
      return this;
    };
    EventEmitter2.prototype.off = EventEmitter2.prototype.removeListener;
    EventEmitter2.prototype.removeAllListeners = function removeAllListeners2(type) {
      var listeners2, events2, i2;
      events2 = this._events;
      if (events2 === void 0)
        return this;
      if (events2.removeListener === void 0) {
        if (arguments.length === 0) {
          this._events = Object.create(null);
          this._eventsCount = 0;
        } else if (events2[type] !== void 0) {
          if (--this._eventsCount === 0)
            this._events = Object.create(null);
          else
            delete events2[type];
        }
        return this;
      }
      if (arguments.length === 0) {
        var keys2 = Object.keys(events2);
        var key;
        for (i2 = 0; i2 < keys2.length; ++i2) {
          key = keys2[i2];
          if (key === "removeListener")
            continue;
          this.removeAllListeners(key);
        }
        this.removeAllListeners("removeListener");
        this._events = Object.create(null);
        this._eventsCount = 0;
        return this;
      }
      listeners2 = events2[type];
      if (typeof listeners2 === "function") {
        this.removeListener(type, listeners2);
      } else if (listeners2 !== void 0) {
        for (i2 = listeners2.length - 1; i2 >= 0; i2--) {
          this.removeListener(type, listeners2[i2]);
        }
      }
      return this;
    };
    function _listeners2(target, type, unwrap) {
      var events2 = target._events;
      if (events2 === void 0)
        return [];
      var evlistener = events2[type];
      if (evlistener === void 0)
        return [];
      if (typeof evlistener === "function")
        return unwrap ? [evlistener.listener || evlistener] : [evlistener];
      return unwrap ? unwrapListeners2(evlistener) : arrayClone2(evlistener, evlistener.length);
    }
    EventEmitter2.prototype.listeners = function listeners2(type) {
      return _listeners2(this, type, true);
    };
    EventEmitter2.prototype.rawListeners = function rawListeners2(type) {
      return _listeners2(this, type, false);
    };
    EventEmitter2.listenerCount = function(emitter, type) {
      if (typeof emitter.listenerCount === "function") {
        return emitter.listenerCount(type);
      } else {
        return listenerCount2.call(emitter, type);
      }
    };
    EventEmitter2.prototype.listenerCount = listenerCount2;
    function listenerCount2(type) {
      var events2 = this._events;
      if (events2 !== void 0) {
        var evlistener = events2[type];
        if (typeof evlistener === "function") {
          return 1;
        } else if (evlistener !== void 0) {
          return evlistener.length;
        }
      }
      return 0;
    }
    EventEmitter2.prototype.eventNames = function eventNames2() {
      return this._eventsCount > 0 ? ReflectOwnKeys2(this._events) : [];
    };
    function arrayClone2(arr, n) {
      var copy = new Array(n);
      for (var i2 = 0; i2 < n; ++i2)
        copy[i2] = arr[i2];
      return copy;
    }
    function spliceOne2(list, index) {
      for (; index + 1 < list.length; index++)
        list[index] = list[index + 1];
      list.pop();
    }
    function unwrapListeners2(arr) {
      var ret = new Array(arr.length);
      for (var i2 = 0; i2 < ret.length; ++i2) {
        ret[i2] = arr[i2].listener || arr[i2];
      }
      return ret;
    }
    function once3(emitter, name) {
      return new Promise(function(resolve, reject) {
        function errorListener(err) {
          emitter.removeListener(name, resolver);
          reject(err);
        }
        function resolver() {
          if (typeof emitter.removeListener === "function") {
            emitter.removeListener("error", errorListener);
          }
          resolve([].slice.call(arguments));
        }
        eventTargetAgnosticAddListener2(emitter, name, resolver, { once: true });
        if (name !== "error") {
          addErrorHandlerIfEventEmitter2(emitter, errorListener, { once: true });
        }
      });
    }
    function addErrorHandlerIfEventEmitter2(emitter, handler, flags) {
      if (typeof emitter.on === "function") {
        eventTargetAgnosticAddListener2(emitter, "error", handler, flags);
      }
    }
    function eventTargetAgnosticAddListener2(emitter, name, listener, flags) {
      if (typeof emitter.on === "function") {
        if (flags.once) {
          emitter.once(name, listener);
        } else {
          emitter.on(name, listener);
        }
      } else if (typeof emitter.addEventListener === "function") {
        emitter.addEventListener(name, function wrapListener(arg) {
          if (flags.once) {
            emitter.removeEventListener(name, wrapListener);
          }
          listener(arg);
        });
      } else {
        throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof emitter);
      }
    }
  }, {}], 107: [function(require2, module2, exports2) {
    var Buffer2 = require2("safe-buffer").Buffer;
    var Transform2 = require2("readable-stream").Transform;
    var inherits = require2("inherits");
    function throwIfNotStringOrBuffer(val, prefix) {
      if (!Buffer2.isBuffer(val) && typeof val !== "string") {
        throw new TypeError(prefix + " must be a string or a buffer");
      }
    }
    function HashBase(blockSize) {
      Transform2.call(this);
      this._block = Buffer2.allocUnsafe(blockSize);
      this._blockSize = blockSize;
      this._blockOffset = 0;
      this._length = [0, 0, 0, 0];
      this._finalized = false;
    }
    inherits(HashBase, Transform2);
    HashBase.prototype._transform = function(chunk, encoding, callback) {
      var error = null;
      try {
        this.update(chunk, encoding);
      } catch (err) {
        error = err;
      }
      callback(error);
    };
    HashBase.prototype._flush = function(callback) {
      var error = null;
      try {
        this.push(this.digest());
      } catch (err) {
        error = err;
      }
      callback(error);
    };
    HashBase.prototype.update = function(data, encoding) {
      throwIfNotStringOrBuffer(data, "Data");
      if (this._finalized)
        throw new Error("Digest already called");
      if (!Buffer2.isBuffer(data))
        data = Buffer2.from(data, encoding);
      var block = this._block;
      var offset = 0;
      while (this._blockOffset + data.length - offset >= this._blockSize) {
        for (var i2 = this._blockOffset; i2 < this._blockSize; )
          block[i2++] = data[offset++];
        this._update();
        this._blockOffset = 0;
      }
      while (offset < data.length)
        block[this._blockOffset++] = data[offset++];
      for (var j = 0, carry = data.length * 8; carry > 0; ++j) {
        this._length[j] += carry;
        carry = this._length[j] / 4294967296 | 0;
        if (carry > 0)
          this._length[j] -= 4294967296 * carry;
      }
      return this;
    };
    HashBase.prototype._update = function() {
      throw new Error("_update is not implemented");
    };
    HashBase.prototype.digest = function(encoding) {
      if (this._finalized)
        throw new Error("Digest already called");
      this._finalized = true;
      var digest = this._digest();
      if (encoding !== void 0)
        digest = digest.toString(encoding);
      this._block.fill(0);
      this._blockOffset = 0;
      for (var i2 = 0; i2 < 4; ++i2)
        this._length[i2] = 0;
      return digest;
    };
    HashBase.prototype._digest = function() {
      throw new Error("_digest is not implemented");
    };
    module2.exports = HashBase;
  }, { "inherits": 137, "readable-stream": 122, "safe-buffer": 147 }], 108: [function(require2, module2, exports2) {
    function _inheritsLoose2(subClass, superClass) {
      subClass.prototype = Object.create(superClass.prototype);
      subClass.prototype.constructor = subClass;
      subClass.__proto__ = superClass;
    }
    var codes2 = {};
    function createErrorType2(code2, message, Base) {
      if (!Base) {
        Base = Error;
      }
      function getMessage(arg1, arg2, arg3) {
        if (typeof message === "string") {
          return message;
        } else {
          return message(arg1, arg2, arg3);
        }
      }
      var NodeError = /* @__PURE__ */ function(_Base) {
        _inheritsLoose2(NodeError2, _Base);
        function NodeError2(arg1, arg2, arg3) {
          return _Base.call(this, getMessage(arg1, arg2, arg3)) || this;
        }
        return NodeError2;
      }(Base);
      NodeError.prototype.name = Base.name;
      NodeError.prototype.code = code2;
      codes2[code2] = NodeError;
    }
    function oneOf2(expected, thing) {
      if (Array.isArray(expected)) {
        var len2 = expected.length;
        expected = expected.map(function(i2) {
          return String(i2);
        });
        if (len2 > 2) {
          return "one of ".concat(thing, " ").concat(expected.slice(0, len2 - 1).join(", "), ", or ") + expected[len2 - 1];
        } else if (len2 === 2) {
          return "one of ".concat(thing, " ").concat(expected[0], " or ").concat(expected[1]);
        } else {
          return "of ".concat(thing, " ").concat(expected[0]);
        }
      } else {
        return "of ".concat(thing, " ").concat(String(expected));
      }
    }
    function startsWith2(str, search, pos) {
      return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;
    }
    function endsWith2(str, search, this_len) {
      if (this_len === void 0 || this_len > str.length) {
        this_len = str.length;
      }
      return str.substring(this_len - search.length, this_len) === search;
    }
    function includes2(str, search, start2) {
      if (typeof start2 !== "number") {
        start2 = 0;
      }
      if (start2 + search.length > str.length) {
        return false;
      } else {
        return str.indexOf(search, start2) !== -1;
      }
    }
    createErrorType2("ERR_INVALID_OPT_VALUE", function(name, value) {
      return 'The value "' + value + '" is invalid for option "' + name + '"';
    }, TypeError);
    createErrorType2("ERR_INVALID_ARG_TYPE", function(name, expected, actual) {
      var determiner;
      if (typeof expected === "string" && startsWith2(expected, "not ")) {
        determiner = "must not be";
        expected = expected.replace(/^not /, "");
      } else {
        determiner = "must be";
      }
      var msg;
      if (endsWith2(name, " argument")) {
        msg = "The ".concat(name, " ").concat(determiner, " ").concat(oneOf2(expected, "type"));
      } else {
        var type = includes2(name, ".") ? "property" : "argument";
        msg = 'The "'.concat(name, '" ').concat(type, " ").concat(determiner, " ").concat(oneOf2(expected, "type"));
      }
      msg += ". Received type ".concat(typeof actual);
      return msg;
    }, TypeError);
    createErrorType2("ERR_STREAM_PUSH_AFTER_EOF", "stream.push() after EOF");
    createErrorType2("ERR_METHOD_NOT_IMPLEMENTED", function(name) {
      return "The " + name + " method is not implemented";
    });
    createErrorType2("ERR_STREAM_PREMATURE_CLOSE", "Premature close");
    createErrorType2("ERR_STREAM_DESTROYED", function(name) {
      return "Cannot call " + name + " after a stream was destroyed";
    });
    createErrorType2("ERR_MULTIPLE_CALLBACK", "Callback called multiple times");
    createErrorType2("ERR_STREAM_CANNOT_PIPE", "Cannot pipe, not readable");
    createErrorType2("ERR_STREAM_WRITE_AFTER_END", "write after end");
    createErrorType2("ERR_STREAM_NULL_VALUES", "May not write null values to stream", TypeError);
    createErrorType2("ERR_UNKNOWN_ENCODING", function(arg) {
      return "Unknown encoding: " + arg;
    }, TypeError);
    createErrorType2("ERR_STREAM_UNSHIFT_AFTER_END_EVENT", "stream.unshift() after end event");
    module2.exports.codes = codes2;
  }, {}], 109: [function(require2, module2, exports2) {
    (function(process2) {
      (function() {
        var objectKeys2 = Object.keys || function(obj) {
          var keys3 = [];
          for (var key in obj) {
            keys3.push(key);
          }
          return keys3;
        };
        module2.exports = Duplex2;
        var Readable2 = require2("./_stream_readable");
        var Writable2 = require2("./_stream_writable");
        require2("inherits")(Duplex2, Readable2);
        {
          var keys2 = objectKeys2(Writable2.prototype);
          for (var v2 = 0; v2 < keys2.length; v2++) {
            var method2 = keys2[v2];
            if (!Duplex2.prototype[method2])
              Duplex2.prototype[method2] = Writable2.prototype[method2];
          }
        }
        function Duplex2(options) {
          if (!(this instanceof Duplex2))
            return new Duplex2(options);
          Readable2.call(this, options);
          Writable2.call(this, options);
          this.allowHalfOpen = true;
          if (options) {
            if (options.readable === false)
              this.readable = false;
            if (options.writable === false)
              this.writable = false;
            if (options.allowHalfOpen === false) {
              this.allowHalfOpen = false;
              this.once("end", onend2);
            }
          }
        }
        Object.defineProperty(Duplex2.prototype, "writableHighWaterMark", {
          enumerable: false,
          get: function get14() {
            return this._writableState.highWaterMark;
          }
        });
        Object.defineProperty(Duplex2.prototype, "writableBuffer", {
          enumerable: false,
          get: function get14() {
            return this._writableState && this._writableState.getBuffer();
          }
        });
        Object.defineProperty(Duplex2.prototype, "writableLength", {
          enumerable: false,
          get: function get14() {
            return this._writableState.length;
          }
        });
        function onend2() {
          if (this._writableState.ended)
            return;
          process2.nextTick(onEndNT2, this);
        }
        function onEndNT2(self2) {
          self2.end();
        }
        Object.defineProperty(Duplex2.prototype, "destroyed", {
          enumerable: false,
          get: function get14() {
            if (this._readableState === void 0 || this._writableState === void 0) {
              return false;
            }
            return this._readableState.destroyed && this._writableState.destroyed;
          },
          set: function set5(value) {
            if (this._readableState === void 0 || this._writableState === void 0) {
              return;
            }
            this._readableState.destroyed = value;
            this._writableState.destroyed = value;
          }
        });
      }).call(this);
    }).call(this, require2("_process"));
  }, { "./_stream_readable": 111, "./_stream_writable": 113, "_process": 143, "inherits": 137 }], 110: [function(require2, module2, exports2) {
    module2.exports = PassThrough2;
    var Transform2 = require2("./_stream_transform");
    require2("inherits")(PassThrough2, Transform2);
    function PassThrough2(options) {
      if (!(this instanceof PassThrough2))
        return new PassThrough2(options);
      Transform2.call(this, options);
    }
    PassThrough2.prototype._transform = function(chunk, encoding, cb) {
      cb(null, chunk);
    };
  }, { "./_stream_transform": 112, "inherits": 137 }], 111: [function(require2, module2, exports2) {
    (function(process2, globalThis2) {
      (function() {
        module2.exports = Readable2;
        var Duplex2;
        Readable2.ReadableState = ReadableState2;
        require2("events").EventEmitter;
        var EElistenerCount3 = function EElistenerCount4(emitter, type) {
          return emitter.listeners(type).length;
        };
        var Stream2 = require2("./internal/streams/stream");
        var Buffer2 = require2("buffer").Buffer;
        var OurUint8Array2 = globalThis2.Uint8Array || function() {
        };
        function _uint8ArrayToBuffer2(chunk) {
          return Buffer2.from(chunk);
        }
        function _isUint8Array2(obj) {
          return Buffer2.isBuffer(obj) || obj instanceof OurUint8Array2;
        }
        var debugUtil2 = require2("util");
        var debug2;
        if (debugUtil2 && debugUtil2.debuglog) {
          debug2 = debugUtil2.debuglog("stream");
        } else {
          debug2 = function debug3() {
          };
        }
        var BufferList2 = require2("./internal/streams/buffer_list");
        var destroyImpl2 = require2("./internal/streams/destroy");
        var _require3 = require2("./internal/streams/state"), getHighWaterMark2 = _require3.getHighWaterMark;
        var _require$codes2 = require2("../errors").codes, ERR_INVALID_ARG_TYPE2 = _require$codes2.ERR_INVALID_ARG_TYPE, ERR_STREAM_PUSH_AFTER_EOF2 = _require$codes2.ERR_STREAM_PUSH_AFTER_EOF, ERR_METHOD_NOT_IMPLEMENTED2 = _require$codes2.ERR_METHOD_NOT_IMPLEMENTED, ERR_STREAM_UNSHIFT_AFTER_END_EVENT2 = _require$codes2.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;
        var StringDecoder2;
        var createReadableStreamAsyncIterator3;
        var from2;
        require2("inherits")(Readable2, Stream2);
        var errorOrDestroy2 = destroyImpl2.errorOrDestroy;
        var kProxyEvents2 = ["error", "close", "destroy", "pause", "resume"];
        function prependListener3(emitter, event, fn) {
          if (typeof emitter.prependListener === "function")
            return emitter.prependListener(event, fn);
          if (!emitter._events || !emitter._events[event])
            emitter.on(event, fn);
          else if (Array.isArray(emitter._events[event]))
            emitter._events[event].unshift(fn);
          else
            emitter._events[event] = [fn, emitter._events[event]];
        }
        function ReadableState2(options, stream, isDuplex) {
          Duplex2 = Duplex2 || require2("./_stream_duplex");
          options = options || {};
          if (typeof isDuplex !== "boolean")
            isDuplex = stream instanceof Duplex2;
          this.objectMode = !!options.objectMode;
          if (isDuplex)
            this.objectMode = this.objectMode || !!options.readableObjectMode;
          this.highWaterMark = getHighWaterMark2(this, options, "readableHighWaterMark", isDuplex);
          this.buffer = new BufferList2();
          this.length = 0;
          this.pipes = null;
          this.pipesCount = 0;
          this.flowing = null;
          this.ended = false;
          this.endEmitted = false;
          this.reading = false;
          this.sync = true;
          this.needReadable = false;
          this.emittedReadable = false;
          this.readableListening = false;
          this.resumeScheduled = false;
          this.paused = true;
          this.emitClose = options.emitClose !== false;
          this.autoDestroy = !!options.autoDestroy;
          this.destroyed = false;
          this.defaultEncoding = options.defaultEncoding || "utf8";
          this.awaitDrain = 0;
          this.readingMore = false;
          this.decoder = null;
          this.encoding = null;
          if (options.encoding) {
            if (!StringDecoder2)
              StringDecoder2 = require2("string_decoder/").StringDecoder;
            this.decoder = new StringDecoder2(options.encoding);
            this.encoding = options.encoding;
          }
        }
        function Readable2(options) {
          Duplex2 = Duplex2 || require2("./_stream_duplex");
          if (!(this instanceof Readable2))
            return new Readable2(options);
          var isDuplex = this instanceof Duplex2;
          this._readableState = new ReadableState2(options, this, isDuplex);
          this.readable = true;
          if (options) {
            if (typeof options.read === "function")
              this._read = options.read;
            if (typeof options.destroy === "function")
              this._destroy = options.destroy;
          }
          Stream2.call(this);
        }
        Object.defineProperty(Readable2.prototype, "destroyed", {
          enumerable: false,
          get: function get14() {
            if (this._readableState === void 0) {
              return false;
            }
            return this._readableState.destroyed;
          },
          set: function set5(value) {
            if (!this._readableState) {
              return;
            }
            this._readableState.destroyed = value;
          }
        });
        Readable2.prototype.destroy = destroyImpl2.destroy;
        Readable2.prototype._undestroy = destroyImpl2.undestroy;
        Readable2.prototype._destroy = function(err, cb) {
          cb(err);
        };
        Readable2.prototype.push = function(chunk, encoding) {
          var state2 = this._readableState;
          var skipChunkCheck;
          if (!state2.objectMode) {
            if (typeof chunk === "string") {
              encoding = encoding || state2.defaultEncoding;
              if (encoding !== state2.encoding) {
                chunk = Buffer2.from(chunk, encoding);
                encoding = "";
              }
              skipChunkCheck = true;
            }
          } else {
            skipChunkCheck = true;
          }
          return readableAddChunk2(this, chunk, encoding, false, skipChunkCheck);
        };
        Readable2.prototype.unshift = function(chunk) {
          return readableAddChunk2(this, chunk, null, true, false);
        };
        function readableAddChunk2(stream, chunk, encoding, addToFront, skipChunkCheck) {
          debug2("readableAddChunk", chunk);
          var state2 = stream._readableState;
          if (chunk === null) {
            state2.reading = false;
            onEofChunk2(stream, state2);
          } else {
            var er;
            if (!skipChunkCheck)
              er = chunkInvalid2(state2, chunk);
            if (er) {
              errorOrDestroy2(stream, er);
            } else if (state2.objectMode || chunk && chunk.length > 0) {
              if (typeof chunk !== "string" && !state2.objectMode && Object.getPrototypeOf(chunk) !== Buffer2.prototype) {
                chunk = _uint8ArrayToBuffer2(chunk);
              }
              if (addToFront) {
                if (state2.endEmitted)
                  errorOrDestroy2(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT2());
                else
                  addChunk2(stream, state2, chunk, true);
              } else if (state2.ended) {
                errorOrDestroy2(stream, new ERR_STREAM_PUSH_AFTER_EOF2());
              } else if (state2.destroyed) {
                return false;
              } else {
                state2.reading = false;
                if (state2.decoder && !encoding) {
                  chunk = state2.decoder.write(chunk);
                  if (state2.objectMode || chunk.length !== 0)
                    addChunk2(stream, state2, chunk, false);
                  else
                    maybeReadMore2(stream, state2);
                } else {
                  addChunk2(stream, state2, chunk, false);
                }
              }
            } else if (!addToFront) {
              state2.reading = false;
              maybeReadMore2(stream, state2);
            }
          }
          return !state2.ended && (state2.length < state2.highWaterMark || state2.length === 0);
        }
        function addChunk2(stream, state2, chunk, addToFront) {
          if (state2.flowing && state2.length === 0 && !state2.sync) {
            state2.awaitDrain = 0;
            stream.emit("data", chunk);
          } else {
            state2.length += state2.objectMode ? 1 : chunk.length;
            if (addToFront)
              state2.buffer.unshift(chunk);
            else
              state2.buffer.push(chunk);
            if (state2.needReadable)
              emitReadable2(stream);
          }
          maybeReadMore2(stream, state2);
        }
        function chunkInvalid2(state2, chunk) {
          var er;
          if (!_isUint8Array2(chunk) && typeof chunk !== "string" && chunk !== void 0 && !state2.objectMode) {
            er = new ERR_INVALID_ARG_TYPE2("chunk", ["string", "Buffer", "Uint8Array"], chunk);
          }
          return er;
        }
        Readable2.prototype.isPaused = function() {
          return this._readableState.flowing === false;
        };
        Readable2.prototype.setEncoding = function(enc) {
          if (!StringDecoder2)
            StringDecoder2 = require2("string_decoder/").StringDecoder;
          var decoder = new StringDecoder2(enc);
          this._readableState.decoder = decoder;
          this._readableState.encoding = this._readableState.decoder.encoding;
          var p2 = this._readableState.buffer.head;
          var content = "";
          while (p2 !== null) {
            content += decoder.write(p2.data);
            p2 = p2.next;
          }
          this._readableState.buffer.clear();
          if (content !== "")
            this._readableState.buffer.push(content);
          this._readableState.length = content.length;
          return this;
        };
        var MAX_HWM2 = 1073741824;
        function computeNewHighWaterMark2(n) {
          if (n >= MAX_HWM2) {
            n = MAX_HWM2;
          } else {
            n--;
            n |= n >>> 1;
            n |= n >>> 2;
            n |= n >>> 4;
            n |= n >>> 8;
            n |= n >>> 16;
            n++;
          }
          return n;
        }
        function howMuchToRead2(n, state2) {
          if (n <= 0 || state2.length === 0 && state2.ended)
            return 0;
          if (state2.objectMode)
            return 1;
          if (n !== n) {
            if (state2.flowing && state2.length)
              return state2.buffer.head.data.length;
            else
              return state2.length;
          }
          if (n > state2.highWaterMark)
            state2.highWaterMark = computeNewHighWaterMark2(n);
          if (n <= state2.length)
            return n;
          if (!state2.ended) {
            state2.needReadable = true;
            return 0;
          }
          return state2.length;
        }
        Readable2.prototype.read = function(n) {
          debug2("read", n);
          n = parseInt(n, 10);
          var state2 = this._readableState;
          var nOrig = n;
          if (n !== 0)
            state2.emittedReadable = false;
          if (n === 0 && state2.needReadable && ((state2.highWaterMark !== 0 ? state2.length >= state2.highWaterMark : state2.length > 0) || state2.ended)) {
            debug2("read: emitReadable", state2.length, state2.ended);
            if (state2.length === 0 && state2.ended)
              endReadable2(this);
            else
              emitReadable2(this);
            return null;
          }
          n = howMuchToRead2(n, state2);
          if (n === 0 && state2.ended) {
            if (state2.length === 0)
              endReadable2(this);
            return null;
          }
          var doRead = state2.needReadable;
          debug2("need readable", doRead);
          if (state2.length === 0 || state2.length - n < state2.highWaterMark) {
            doRead = true;
            debug2("length less than watermark", doRead);
          }
          if (state2.ended || state2.reading) {
            doRead = false;
            debug2("reading or ended", doRead);
          } else if (doRead) {
            debug2("do read");
            state2.reading = true;
            state2.sync = true;
            if (state2.length === 0)
              state2.needReadable = true;
            this._read(state2.highWaterMark);
            state2.sync = false;
            if (!state2.reading)
              n = howMuchToRead2(nOrig, state2);
          }
          var ret;
          if (n > 0)
            ret = fromList2(n, state2);
          else
            ret = null;
          if (ret === null) {
            state2.needReadable = state2.length <= state2.highWaterMark;
            n = 0;
          } else {
            state2.length -= n;
            state2.awaitDrain = 0;
          }
          if (state2.length === 0) {
            if (!state2.ended)
              state2.needReadable = true;
            if (nOrig !== n && state2.ended)
              endReadable2(this);
          }
          if (ret !== null)
            this.emit("data", ret);
          return ret;
        };
        function onEofChunk2(stream, state2) {
          debug2("onEofChunk");
          if (state2.ended)
            return;
          if (state2.decoder) {
            var chunk = state2.decoder.end();
            if (chunk && chunk.length) {
              state2.buffer.push(chunk);
              state2.length += state2.objectMode ? 1 : chunk.length;
            }
          }
          state2.ended = true;
          if (state2.sync) {
            emitReadable2(stream);
          } else {
            state2.needReadable = false;
            if (!state2.emittedReadable) {
              state2.emittedReadable = true;
              emitReadable_2(stream);
            }
          }
        }
        function emitReadable2(stream) {
          var state2 = stream._readableState;
          debug2("emitReadable", state2.needReadable, state2.emittedReadable);
          state2.needReadable = false;
          if (!state2.emittedReadable) {
            debug2("emitReadable", state2.flowing);
            state2.emittedReadable = true;
            process2.nextTick(emitReadable_2, stream);
          }
        }
        function emitReadable_2(stream) {
          var state2 = stream._readableState;
          debug2("emitReadable_", state2.destroyed, state2.length, state2.ended);
          if (!state2.destroyed && (state2.length || state2.ended)) {
            stream.emit("readable");
            state2.emittedReadable = false;
          }
          state2.needReadable = !state2.flowing && !state2.ended && state2.length <= state2.highWaterMark;
          flow2(stream);
        }
        function maybeReadMore2(stream, state2) {
          if (!state2.readingMore) {
            state2.readingMore = true;
            process2.nextTick(maybeReadMore_2, stream, state2);
          }
        }
        function maybeReadMore_2(stream, state2) {
          while (!state2.reading && !state2.ended && (state2.length < state2.highWaterMark || state2.flowing && state2.length === 0)) {
            var len2 = state2.length;
            debug2("maybeReadMore read 0");
            stream.read(0);
            if (len2 === state2.length)
              break;
          }
          state2.readingMore = false;
        }
        Readable2.prototype._read = function(n) {
          errorOrDestroy2(this, new ERR_METHOD_NOT_IMPLEMENTED2("_read()"));
        };
        Readable2.prototype.pipe = function(dest, pipeOpts) {
          var src = this;
          var state2 = this._readableState;
          switch (state2.pipesCount) {
            case 0:
              state2.pipes = dest;
              break;
            case 1:
              state2.pipes = [state2.pipes, dest];
              break;
            default:
              state2.pipes.push(dest);
              break;
          }
          state2.pipesCount += 1;
          debug2("pipe count=%d opts=%j", state2.pipesCount, pipeOpts);
          var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process2.stdout && dest !== process2.stderr;
          var endFn = doEnd ? onend2 : unpipe;
          if (state2.endEmitted)
            process2.nextTick(endFn);
          else
            src.once("end", endFn);
          dest.on("unpipe", onunpipe);
          function onunpipe(readable2, unpipeInfo) {
            debug2("onunpipe");
            if (readable2 === src) {
              if (unpipeInfo && unpipeInfo.hasUnpiped === false) {
                unpipeInfo.hasUnpiped = true;
                cleanup();
              }
            }
          }
          function onend2() {
            debug2("onend");
            dest.end();
          }
          var ondrain = pipeOnDrain2(src);
          dest.on("drain", ondrain);
          var cleanedUp = false;
          function cleanup() {
            debug2("cleanup");
            dest.removeListener("close", onclose);
            dest.removeListener("finish", onfinish);
            dest.removeListener("drain", ondrain);
            dest.removeListener("error", onerror);
            dest.removeListener("unpipe", onunpipe);
            src.removeListener("end", onend2);
            src.removeListener("end", unpipe);
            src.removeListener("data", ondata);
            cleanedUp = true;
            if (state2.awaitDrain && (!dest._writableState || dest._writableState.needDrain))
              ondrain();
          }
          src.on("data", ondata);
          function ondata(chunk) {
            debug2("ondata");
            var ret = dest.write(chunk);
            debug2("dest.write", ret);
            if (ret === false) {
              if ((state2.pipesCount === 1 && state2.pipes === dest || state2.pipesCount > 1 && indexOf2(state2.pipes, dest) !== -1) && !cleanedUp) {
                debug2("false write response, pause", state2.awaitDrain);
                state2.awaitDrain++;
              }
              src.pause();
            }
          }
          function onerror(er) {
            debug2("onerror", er);
            unpipe();
            dest.removeListener("error", onerror);
            if (EElistenerCount3(dest, "error") === 0)
              errorOrDestroy2(dest, er);
          }
          prependListener3(dest, "error", onerror);
          function onclose() {
            dest.removeListener("finish", onfinish);
            unpipe();
          }
          dest.once("close", onclose);
          function onfinish() {
            debug2("onfinish");
            dest.removeListener("close", onclose);
            unpipe();
          }
          dest.once("finish", onfinish);
          function unpipe() {
            debug2("unpipe");
            src.unpipe(dest);
          }
          dest.emit("pipe", src);
          if (!state2.flowing) {
            debug2("pipe resume");
            src.resume();
          }
          return dest;
        };
        function pipeOnDrain2(src) {
          return function pipeOnDrainFunctionResult() {
            var state2 = src._readableState;
            debug2("pipeOnDrain", state2.awaitDrain);
            if (state2.awaitDrain)
              state2.awaitDrain--;
            if (state2.awaitDrain === 0 && EElistenerCount3(src, "data")) {
              state2.flowing = true;
              flow2(src);
            }
          };
        }
        Readable2.prototype.unpipe = function(dest) {
          var state2 = this._readableState;
          var unpipeInfo = {
            hasUnpiped: false
          };
          if (state2.pipesCount === 0)
            return this;
          if (state2.pipesCount === 1) {
            if (dest && dest !== state2.pipes)
              return this;
            if (!dest)
              dest = state2.pipes;
            state2.pipes = null;
            state2.pipesCount = 0;
            state2.flowing = false;
            if (dest)
              dest.emit("unpipe", this, unpipeInfo);
            return this;
          }
          if (!dest) {
            var dests = state2.pipes;
            var len2 = state2.pipesCount;
            state2.pipes = null;
            state2.pipesCount = 0;
            state2.flowing = false;
            for (var i2 = 0; i2 < len2; i2++) {
              dests[i2].emit("unpipe", this, {
                hasUnpiped: false
              });
            }
            return this;
          }
          var index = indexOf2(state2.pipes, dest);
          if (index === -1)
            return this;
          state2.pipes.splice(index, 1);
          state2.pipesCount -= 1;
          if (state2.pipesCount === 1)
            state2.pipes = state2.pipes[0];
          dest.emit("unpipe", this, unpipeInfo);
          return this;
        };
        Readable2.prototype.on = function(ev, fn) {
          var res = Stream2.prototype.on.call(this, ev, fn);
          var state2 = this._readableState;
          if (ev === "data") {
            state2.readableListening = this.listenerCount("readable") > 0;
            if (state2.flowing !== false)
              this.resume();
          } else if (ev === "readable") {
            if (!state2.endEmitted && !state2.readableListening) {
              state2.readableListening = state2.needReadable = true;
              state2.flowing = false;
              state2.emittedReadable = false;
              debug2("on readable", state2.length, state2.reading);
              if (state2.length) {
                emitReadable2(this);
              } else if (!state2.reading) {
                process2.nextTick(nReadingNextTick2, this);
              }
            }
          }
          return res;
        };
        Readable2.prototype.addListener = Readable2.prototype.on;
        Readable2.prototype.removeListener = function(ev, fn) {
          var res = Stream2.prototype.removeListener.call(this, ev, fn);
          if (ev === "readable") {
            process2.nextTick(updateReadableListening2, this);
          }
          return res;
        };
        Readable2.prototype.removeAllListeners = function(ev) {
          var res = Stream2.prototype.removeAllListeners.apply(this, arguments);
          if (ev === "readable" || ev === void 0) {
            process2.nextTick(updateReadableListening2, this);
          }
          return res;
        };
        function updateReadableListening2(self2) {
          var state2 = self2._readableState;
          state2.readableListening = self2.listenerCount("readable") > 0;
          if (state2.resumeScheduled && !state2.paused) {
            state2.flowing = true;
          } else if (self2.listenerCount("data") > 0) {
            self2.resume();
          }
        }
        function nReadingNextTick2(self2) {
          debug2("readable nexttick read 0");
          self2.read(0);
        }
        Readable2.prototype.resume = function() {
          var state2 = this._readableState;
          if (!state2.flowing) {
            debug2("resume");
            state2.flowing = !state2.readableListening;
            resume2(this, state2);
          }
          state2.paused = false;
          return this;
        };
        function resume2(stream, state2) {
          if (!state2.resumeScheduled) {
            state2.resumeScheduled = true;
            process2.nextTick(resume_2, stream, state2);
          }
        }
        function resume_2(stream, state2) {
          debug2("resume", state2.reading);
          if (!state2.reading) {
            stream.read(0);
          }
          state2.resumeScheduled = false;
          stream.emit("resume");
          flow2(stream);
          if (state2.flowing && !state2.reading)
            stream.read(0);
        }
        Readable2.prototype.pause = function() {
          debug2("call pause flowing=%j", this._readableState.flowing);
          if (this._readableState.flowing !== false) {
            debug2("pause");
            this._readableState.flowing = false;
            this.emit("pause");
          }
          this._readableState.paused = true;
          return this;
        };
        function flow2(stream) {
          var state2 = stream._readableState;
          debug2("flow", state2.flowing);
          while (state2.flowing && stream.read() !== null) {
          }
        }
        Readable2.prototype.wrap = function(stream) {
          var _this = this;
          var state2 = this._readableState;
          var paused = false;
          stream.on("end", function() {
            debug2("wrapped end");
            if (state2.decoder && !state2.ended) {
              var chunk = state2.decoder.end();
              if (chunk && chunk.length)
                _this.push(chunk);
            }
            _this.push(null);
          });
          stream.on("data", function(chunk) {
            debug2("wrapped data");
            if (state2.decoder)
              chunk = state2.decoder.write(chunk);
            if (state2.objectMode && (chunk === null || chunk === void 0))
              return;
            else if (!state2.objectMode && (!chunk || !chunk.length))
              return;
            var ret = _this.push(chunk);
            if (!ret) {
              paused = true;
              stream.pause();
            }
          });
          for (var i2 in stream) {
            if (this[i2] === void 0 && typeof stream[i2] === "function") {
              this[i2] = function methodWrap(method2) {
                return function methodWrapReturnFunction() {
                  return stream[method2].apply(stream, arguments);
                };
              }(i2);
            }
          }
          for (var n = 0; n < kProxyEvents2.length; n++) {
            stream.on(kProxyEvents2[n], this.emit.bind(this, kProxyEvents2[n]));
          }
          this._read = function(n2) {
            debug2("wrapped _read", n2);
            if (paused) {
              paused = false;
              stream.resume();
            }
          };
          return this;
        };
        if (typeof Symbol === "function") {
          Readable2.prototype[Symbol.asyncIterator] = function() {
            if (createReadableStreamAsyncIterator3 === void 0) {
              createReadableStreamAsyncIterator3 = require2("./internal/streams/async_iterator");
            }
            return createReadableStreamAsyncIterator3(this);
          };
        }
        Object.defineProperty(Readable2.prototype, "readableHighWaterMark", {
          enumerable: false,
          get: function get14() {
            return this._readableState.highWaterMark;
          }
        });
        Object.defineProperty(Readable2.prototype, "readableBuffer", {
          enumerable: false,
          get: function get14() {
            return this._readableState && this._readableState.buffer;
          }
        });
        Object.defineProperty(Readable2.prototype, "readableFlowing", {
          enumerable: false,
          get: function get14() {
            return this._readableState.flowing;
          },
          set: function set5(state2) {
            if (this._readableState) {
              this._readableState.flowing = state2;
            }
          }
        });
        Readable2._fromList = fromList2;
        Object.defineProperty(Readable2.prototype, "readableLength", {
          enumerable: false,
          get: function get14() {
            return this._readableState.length;
          }
        });
        function fromList2(n, state2) {
          if (state2.length === 0)
            return null;
          var ret;
          if (state2.objectMode)
            ret = state2.buffer.shift();
          else if (!n || n >= state2.length) {
            if (state2.decoder)
              ret = state2.buffer.join("");
            else if (state2.buffer.length === 1)
              ret = state2.buffer.first();
            else
              ret = state2.buffer.concat(state2.length);
            state2.buffer.clear();
          } else {
            ret = state2.buffer.consume(n, state2.decoder);
          }
          return ret;
        }
        function endReadable2(stream) {
          var state2 = stream._readableState;
          debug2("endReadable", state2.endEmitted);
          if (!state2.endEmitted) {
            state2.ended = true;
            process2.nextTick(endReadableNT2, state2, stream);
          }
        }
        function endReadableNT2(state2, stream) {
          debug2("endReadableNT", state2.endEmitted, state2.length);
          if (!state2.endEmitted && state2.length === 0) {
            state2.endEmitted = true;
            stream.readable = false;
            stream.emit("end");
            if (state2.autoDestroy) {
              var wState = stream._writableState;
              if (!wState || wState.autoDestroy && wState.finished) {
                stream.destroy();
              }
            }
          }
        }
        if (typeof Symbol === "function") {
          Readable2.from = function(iterable, opts) {
            if (from2 === void 0) {
              from2 = require2("./internal/streams/from");
            }
            return from2(Readable2, iterable, opts);
          };
        }
        function indexOf2(xs, x) {
          for (var i2 = 0, l = xs.length; i2 < l; i2++) {
            if (xs[i2] === x)
              return i2;
          }
          return -1;
        }
      }).call(this);
    }).call(this, require2("_process"), typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {});
  }, { "../errors": 108, "./_stream_duplex": 109, "./internal/streams/async_iterator": 114, "./internal/streams/buffer_list": 115, "./internal/streams/destroy": 116, "./internal/streams/from": 118, "./internal/streams/state": 120, "./internal/streams/stream": 121, "_process": 143, "buffer": 83, "events": 106, "inherits": 137, "string_decoder/": 171, "util": 79 }], 112: [function(require2, module2, exports2) {
    module2.exports = Transform2;
    var _require$codes2 = require2("../errors").codes, ERR_METHOD_NOT_IMPLEMENTED2 = _require$codes2.ERR_METHOD_NOT_IMPLEMENTED, ERR_MULTIPLE_CALLBACK2 = _require$codes2.ERR_MULTIPLE_CALLBACK, ERR_TRANSFORM_ALREADY_TRANSFORMING2 = _require$codes2.ERR_TRANSFORM_ALREADY_TRANSFORMING, ERR_TRANSFORM_WITH_LENGTH_02 = _require$codes2.ERR_TRANSFORM_WITH_LENGTH_0;
    var Duplex2 = require2("./_stream_duplex");
    require2("inherits")(Transform2, Duplex2);
    function afterTransform2(er, data) {
      var ts = this._transformState;
      ts.transforming = false;
      var cb = ts.writecb;
      if (cb === null) {
        return this.emit("error", new ERR_MULTIPLE_CALLBACK2());
      }
      ts.writechunk = null;
      ts.writecb = null;
      if (data != null)
        this.push(data);
      cb(er);
      var rs = this._readableState;
      rs.reading = false;
      if (rs.needReadable || rs.length < rs.highWaterMark) {
        this._read(rs.highWaterMark);
      }
    }
    function Transform2(options) {
      if (!(this instanceof Transform2))
        return new Transform2(options);
      Duplex2.call(this, options);
      this._transformState = {
        afterTransform: afterTransform2.bind(this),
        needTransform: false,
        transforming: false,
        writecb: null,
        writechunk: null,
        writeencoding: null
      };
      this._readableState.needReadable = true;
      this._readableState.sync = false;
      if (options) {
        if (typeof options.transform === "function")
          this._transform = options.transform;
        if (typeof options.flush === "function")
          this._flush = options.flush;
      }
      this.on("prefinish", prefinish2);
    }
    function prefinish2() {
      var _this = this;
      if (typeof this._flush === "function" && !this._readableState.destroyed) {
        this._flush(function(er, data) {
          done2(_this, er, data);
        });
      } else {
        done2(this, null, null);
      }
    }
    Transform2.prototype.push = function(chunk, encoding) {
      this._transformState.needTransform = false;
      return Duplex2.prototype.push.call(this, chunk, encoding);
    };
    Transform2.prototype._transform = function(chunk, encoding, cb) {
      cb(new ERR_METHOD_NOT_IMPLEMENTED2("_transform()"));
    };
    Transform2.prototype._write = function(chunk, encoding, cb) {
      var ts = this._transformState;
      ts.writecb = cb;
      ts.writechunk = chunk;
      ts.writeencoding = encoding;
      if (!ts.transforming) {
        var rs = this._readableState;
        if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark)
          this._read(rs.highWaterMark);
      }
    };
    Transform2.prototype._read = function(n) {
      var ts = this._transformState;
      if (ts.writechunk !== null && !ts.transforming) {
        ts.transforming = true;
        this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);
      } else {
        ts.needTransform = true;
      }
    };
    Transform2.prototype._destroy = function(err, cb) {
      Duplex2.prototype._destroy.call(this, err, function(err2) {
        cb(err2);
      });
    };
    function done2(stream, er, data) {
      if (er)
        return stream.emit("error", er);
      if (data != null)
        stream.push(data);
      if (stream._writableState.length)
        throw new ERR_TRANSFORM_WITH_LENGTH_02();
      if (stream._transformState.transforming)
        throw new ERR_TRANSFORM_ALREADY_TRANSFORMING2();
      return stream.push(null);
    }
  }, { "../errors": 108, "./_stream_duplex": 109, "inherits": 137 }], 113: [function(require2, module2, exports2) {
    (function(process2, globalThis2) {
      (function() {
        module2.exports = Writable2;
        function CorkedRequest2(state2) {
          var _this = this;
          this.next = null;
          this.entry = null;
          this.finish = function() {
            onCorkedFinish2(_this, state2);
          };
        }
        var Duplex2;
        Writable2.WritableState = WritableState2;
        var internalUtil2 = {
          deprecate: require2("util-deprecate")
        };
        var Stream2 = require2("./internal/streams/stream");
        var Buffer2 = require2("buffer").Buffer;
        var OurUint8Array2 = globalThis2.Uint8Array || function() {
        };
        function _uint8ArrayToBuffer2(chunk) {
          return Buffer2.from(chunk);
        }
        function _isUint8Array2(obj) {
          return Buffer2.isBuffer(obj) || obj instanceof OurUint8Array2;
        }
        var destroyImpl2 = require2("./internal/streams/destroy");
        var _require3 = require2("./internal/streams/state"), getHighWaterMark2 = _require3.getHighWaterMark;
        var _require$codes2 = require2("../errors").codes, ERR_INVALID_ARG_TYPE2 = _require$codes2.ERR_INVALID_ARG_TYPE, ERR_METHOD_NOT_IMPLEMENTED2 = _require$codes2.ERR_METHOD_NOT_IMPLEMENTED, ERR_MULTIPLE_CALLBACK2 = _require$codes2.ERR_MULTIPLE_CALLBACK, ERR_STREAM_CANNOT_PIPE2 = _require$codes2.ERR_STREAM_CANNOT_PIPE, ERR_STREAM_DESTROYED2 = _require$codes2.ERR_STREAM_DESTROYED, ERR_STREAM_NULL_VALUES2 = _require$codes2.ERR_STREAM_NULL_VALUES, ERR_STREAM_WRITE_AFTER_END2 = _require$codes2.ERR_STREAM_WRITE_AFTER_END, ERR_UNKNOWN_ENCODING2 = _require$codes2.ERR_UNKNOWN_ENCODING;
        var errorOrDestroy2 = destroyImpl2.errorOrDestroy;
        require2("inherits")(Writable2, Stream2);
        function nop2() {
        }
        function WritableState2(options, stream, isDuplex) {
          Duplex2 = Duplex2 || require2("./_stream_duplex");
          options = options || {};
          if (typeof isDuplex !== "boolean")
            isDuplex = stream instanceof Duplex2;
          this.objectMode = !!options.objectMode;
          if (isDuplex)
            this.objectMode = this.objectMode || !!options.writableObjectMode;
          this.highWaterMark = getHighWaterMark2(this, options, "writableHighWaterMark", isDuplex);
          this.finalCalled = false;
          this.needDrain = false;
          this.ending = false;
          this.ended = false;
          this.finished = false;
          this.destroyed = false;
          var noDecode = options.decodeStrings === false;
          this.decodeStrings = !noDecode;
          this.defaultEncoding = options.defaultEncoding || "utf8";
          this.length = 0;
          this.writing = false;
          this.corked = 0;
          this.sync = true;
          this.bufferProcessing = false;
          this.onwrite = function(er) {
            onwrite2(stream, er);
          };
          this.writecb = null;
          this.writelen = 0;
          this.bufferedRequest = null;
          this.lastBufferedRequest = null;
          this.pendingcb = 0;
          this.prefinished = false;
          this.errorEmitted = false;
          this.emitClose = options.emitClose !== false;
          this.autoDestroy = !!options.autoDestroy;
          this.bufferedRequestCount = 0;
          this.corkedRequestsFree = new CorkedRequest2(this);
        }
        WritableState2.prototype.getBuffer = function getBuffer2() {
          var current = this.bufferedRequest;
          var out = [];
          while (current) {
            out.push(current);
            current = current.next;
          }
          return out;
        };
        (function() {
          try {
            Object.defineProperty(WritableState2.prototype, "buffer", {
              get: internalUtil2.deprecate(function writableStateBufferGetter() {
                return this.getBuffer();
              }, "_writableState.buffer is deprecated. Use _writableState.getBuffer instead.", "DEP0003")
            });
          } catch (_) {
          }
        })();
        var realHasInstance2;
        if (typeof Symbol === "function" && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === "function") {
          realHasInstance2 = Function.prototype[Symbol.hasInstance];
          Object.defineProperty(Writable2, Symbol.hasInstance, {
            value: function value(object) {
              if (realHasInstance2.call(this, object))
                return true;
              if (this !== Writable2)
                return false;
              return object && object._writableState instanceof WritableState2;
            }
          });
        } else {
          realHasInstance2 = function realHasInstance3(object) {
            return object instanceof this;
          };
        }
        function Writable2(options) {
          Duplex2 = Duplex2 || require2("./_stream_duplex");
          var isDuplex = this instanceof Duplex2;
          if (!isDuplex && !realHasInstance2.call(Writable2, this))
            return new Writable2(options);
          this._writableState = new WritableState2(options, this, isDuplex);
          this.writable = true;
          if (options) {
            if (typeof options.write === "function")
              this._write = options.write;
            if (typeof options.writev === "function")
              this._writev = options.writev;
            if (typeof options.destroy === "function")
              this._destroy = options.destroy;
            if (typeof options.final === "function")
              this._final = options.final;
          }
          Stream2.call(this);
        }
        Writable2.prototype.pipe = function() {
          errorOrDestroy2(this, new ERR_STREAM_CANNOT_PIPE2());
        };
        function writeAfterEnd2(stream, cb) {
          var er = new ERR_STREAM_WRITE_AFTER_END2();
          errorOrDestroy2(stream, er);
          process2.nextTick(cb, er);
        }
        function validChunk2(stream, state2, chunk, cb) {
          var er;
          if (chunk === null) {
            er = new ERR_STREAM_NULL_VALUES2();
          } else if (typeof chunk !== "string" && !state2.objectMode) {
            er = new ERR_INVALID_ARG_TYPE2("chunk", ["string", "Buffer"], chunk);
          }
          if (er) {
            errorOrDestroy2(stream, er);
            process2.nextTick(cb, er);
            return false;
          }
          return true;
        }
        Writable2.prototype.write = function(chunk, encoding, cb) {
          var state2 = this._writableState;
          var ret = false;
          var isBuf = !state2.objectMode && _isUint8Array2(chunk);
          if (isBuf && !Buffer2.isBuffer(chunk)) {
            chunk = _uint8ArrayToBuffer2(chunk);
          }
          if (typeof encoding === "function") {
            cb = encoding;
            encoding = null;
          }
          if (isBuf)
            encoding = "buffer";
          else if (!encoding)
            encoding = state2.defaultEncoding;
          if (typeof cb !== "function")
            cb = nop2;
          if (state2.ending)
            writeAfterEnd2(this, cb);
          else if (isBuf || validChunk2(this, state2, chunk, cb)) {
            state2.pendingcb++;
            ret = writeOrBuffer2(this, state2, isBuf, chunk, encoding, cb);
          }
          return ret;
        };
        Writable2.prototype.cork = function() {
          this._writableState.corked++;
        };
        Writable2.prototype.uncork = function() {
          var state2 = this._writableState;
          if (state2.corked) {
            state2.corked--;
            if (!state2.writing && !state2.corked && !state2.bufferProcessing && state2.bufferedRequest)
              clearBuffer2(this, state2);
          }
        };
        Writable2.prototype.setDefaultEncoding = function setDefaultEncoding2(encoding) {
          if (typeof encoding === "string")
            encoding = encoding.toLowerCase();
          if (!(["hex", "utf8", "utf-8", "ascii", "binary", "base64", "ucs2", "ucs-2", "utf16le", "utf-16le", "raw"].indexOf((encoding + "").toLowerCase()) > -1))
            throw new ERR_UNKNOWN_ENCODING2(encoding);
          this._writableState.defaultEncoding = encoding;
          return this;
        };
        Object.defineProperty(Writable2.prototype, "writableBuffer", {
          enumerable: false,
          get: function get14() {
            return this._writableState && this._writableState.getBuffer();
          }
        });
        function decodeChunk2(state2, chunk, encoding) {
          if (!state2.objectMode && state2.decodeStrings !== false && typeof chunk === "string") {
            chunk = Buffer2.from(chunk, encoding);
          }
          return chunk;
        }
        Object.defineProperty(Writable2.prototype, "writableHighWaterMark", {
          enumerable: false,
          get: function get14() {
            return this._writableState.highWaterMark;
          }
        });
        function writeOrBuffer2(stream, state2, isBuf, chunk, encoding, cb) {
          if (!isBuf) {
            var newChunk = decodeChunk2(state2, chunk, encoding);
            if (chunk !== newChunk) {
              isBuf = true;
              encoding = "buffer";
              chunk = newChunk;
            }
          }
          var len2 = state2.objectMode ? 1 : chunk.length;
          state2.length += len2;
          var ret = state2.length < state2.highWaterMark;
          if (!ret)
            state2.needDrain = true;
          if (state2.writing || state2.corked) {
            var last = state2.lastBufferedRequest;
            state2.lastBufferedRequest = {
              chunk,
              encoding,
              isBuf,
              callback: cb,
              next: null
            };
            if (last) {
              last.next = state2.lastBufferedRequest;
            } else {
              state2.bufferedRequest = state2.lastBufferedRequest;
            }
            state2.bufferedRequestCount += 1;
          } else {
            doWrite2(stream, state2, false, len2, chunk, encoding, cb);
          }
          return ret;
        }
        function doWrite2(stream, state2, writev, len2, chunk, encoding, cb) {
          state2.writelen = len2;
          state2.writecb = cb;
          state2.writing = true;
          state2.sync = true;
          if (state2.destroyed)
            state2.onwrite(new ERR_STREAM_DESTROYED2("write"));
          else if (writev)
            stream._writev(chunk, state2.onwrite);
          else
            stream._write(chunk, encoding, state2.onwrite);
          state2.sync = false;
        }
        function onwriteError2(stream, state2, sync, er, cb) {
          --state2.pendingcb;
          if (sync) {
            process2.nextTick(cb, er);
            process2.nextTick(finishMaybe2, stream, state2);
            stream._writableState.errorEmitted = true;
            errorOrDestroy2(stream, er);
          } else {
            cb(er);
            stream._writableState.errorEmitted = true;
            errorOrDestroy2(stream, er);
            finishMaybe2(stream, state2);
          }
        }
        function onwriteStateUpdate2(state2) {
          state2.writing = false;
          state2.writecb = null;
          state2.length -= state2.writelen;
          state2.writelen = 0;
        }
        function onwrite2(stream, er) {
          var state2 = stream._writableState;
          var sync = state2.sync;
          var cb = state2.writecb;
          if (typeof cb !== "function")
            throw new ERR_MULTIPLE_CALLBACK2();
          onwriteStateUpdate2(state2);
          if (er)
            onwriteError2(stream, state2, sync, er, cb);
          else {
            var finished2 = needFinish2(state2) || stream.destroyed;
            if (!finished2 && !state2.corked && !state2.bufferProcessing && state2.bufferedRequest) {
              clearBuffer2(stream, state2);
            }
            if (sync) {
              process2.nextTick(afterWrite2, stream, state2, finished2, cb);
            } else {
              afterWrite2(stream, state2, finished2, cb);
            }
          }
        }
        function afterWrite2(stream, state2, finished2, cb) {
          if (!finished2)
            onwriteDrain2(stream, state2);
          state2.pendingcb--;
          cb();
          finishMaybe2(stream, state2);
        }
        function onwriteDrain2(stream, state2) {
          if (state2.length === 0 && state2.needDrain) {
            state2.needDrain = false;
            stream.emit("drain");
          }
        }
        function clearBuffer2(stream, state2) {
          state2.bufferProcessing = true;
          var entry = state2.bufferedRequest;
          if (stream._writev && entry && entry.next) {
            var l = state2.bufferedRequestCount;
            var buffer2 = new Array(l);
            var holder = state2.corkedRequestsFree;
            holder.entry = entry;
            var count = 0;
            var allBuffers = true;
            while (entry) {
              buffer2[count] = entry;
              if (!entry.isBuf)
                allBuffers = false;
              entry = entry.next;
              count += 1;
            }
            buffer2.allBuffers = allBuffers;
            doWrite2(stream, state2, true, state2.length, buffer2, "", holder.finish);
            state2.pendingcb++;
            state2.lastBufferedRequest = null;
            if (holder.next) {
              state2.corkedRequestsFree = holder.next;
              holder.next = null;
            } else {
              state2.corkedRequestsFree = new CorkedRequest2(state2);
            }
            state2.bufferedRequestCount = 0;
          } else {
            while (entry) {
              var chunk = entry.chunk;
              var encoding = entry.encoding;
              var cb = entry.callback;
              var len2 = state2.objectMode ? 1 : chunk.length;
              doWrite2(stream, state2, false, len2, chunk, encoding, cb);
              entry = entry.next;
              state2.bufferedRequestCount--;
              if (state2.writing) {
                break;
              }
            }
            if (entry === null)
              state2.lastBufferedRequest = null;
          }
          state2.bufferedRequest = entry;
          state2.bufferProcessing = false;
        }
        Writable2.prototype._write = function(chunk, encoding, cb) {
          cb(new ERR_METHOD_NOT_IMPLEMENTED2("_write()"));
        };
        Writable2.prototype._writev = null;
        Writable2.prototype.end = function(chunk, encoding, cb) {
          var state2 = this._writableState;
          if (typeof chunk === "function") {
            cb = chunk;
            chunk = null;
            encoding = null;
          } else if (typeof encoding === "function") {
            cb = encoding;
            encoding = null;
          }
          if (chunk !== null && chunk !== void 0)
            this.write(chunk, encoding);
          if (state2.corked) {
            state2.corked = 1;
            this.uncork();
          }
          if (!state2.ending)
            endWritable2(this, state2, cb);
          return this;
        };
        Object.defineProperty(Writable2.prototype, "writableLength", {
          enumerable: false,
          get: function get14() {
            return this._writableState.length;
          }
        });
        function needFinish2(state2) {
          return state2.ending && state2.length === 0 && state2.bufferedRequest === null && !state2.finished && !state2.writing;
        }
        function callFinal2(stream, state2) {
          stream._final(function(err) {
            state2.pendingcb--;
            if (err) {
              errorOrDestroy2(stream, err);
            }
            state2.prefinished = true;
            stream.emit("prefinish");
            finishMaybe2(stream, state2);
          });
        }
        function prefinish2(stream, state2) {
          if (!state2.prefinished && !state2.finalCalled) {
            if (typeof stream._final === "function" && !state2.destroyed) {
              state2.pendingcb++;
              state2.finalCalled = true;
              process2.nextTick(callFinal2, stream, state2);
            } else {
              state2.prefinished = true;
              stream.emit("prefinish");
            }
          }
        }
        function finishMaybe2(stream, state2) {
          var need = needFinish2(state2);
          if (need) {
            prefinish2(stream, state2);
            if (state2.pendingcb === 0) {
              state2.finished = true;
              stream.emit("finish");
              if (state2.autoDestroy) {
                var rState = stream._readableState;
                if (!rState || rState.autoDestroy && rState.endEmitted) {
                  stream.destroy();
                }
              }
            }
          }
          return need;
        }
        function endWritable2(stream, state2, cb) {
          state2.ending = true;
          finishMaybe2(stream, state2);
          if (cb) {
            if (state2.finished)
              process2.nextTick(cb);
            else
              stream.once("finish", cb);
          }
          state2.ended = true;
          stream.writable = false;
        }
        function onCorkedFinish2(corkReq, state2, err) {
          var entry = corkReq.entry;
          corkReq.entry = null;
          while (entry) {
            var cb = entry.callback;
            state2.pendingcb--;
            cb(err);
            entry = entry.next;
          }
          state2.corkedRequestsFree.next = corkReq;
        }
        Object.defineProperty(Writable2.prototype, "destroyed", {
          enumerable: false,
          get: function get14() {
            if (this._writableState === void 0) {
              return false;
            }
            return this._writableState.destroyed;
          },
          set: function set5(value) {
            if (!this._writableState) {
              return;
            }
            this._writableState.destroyed = value;
          }
        });
        Writable2.prototype.destroy = destroyImpl2.destroy;
        Writable2.prototype._undestroy = destroyImpl2.undestroy;
        Writable2.prototype._destroy = function(err, cb) {
          cb(err);
        };
      }).call(this);
    }).call(this, require2("_process"), typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {});
  }, { "../errors": 108, "./_stream_duplex": 109, "./internal/streams/destroy": 116, "./internal/streams/state": 120, "./internal/streams/stream": 121, "_process": 143, "buffer": 83, "inherits": 137, "util-deprecate": 179 }], 114: [function(require2, module2, exports2) {
    (function(process2) {
      (function() {
        var _Object$setPrototypeO2;
        function _defineProperty2(obj, key, value) {
          if (key in obj) {
            Object.defineProperty(obj, key, { value, enumerable: true, configurable: true, writable: true });
          } else {
            obj[key] = value;
          }
          return obj;
        }
        var finished2 = require2("./end-of-stream");
        var kLastResolve2 = Symbol("lastResolve");
        var kLastReject2 = Symbol("lastReject");
        var kError2 = Symbol("error");
        var kEnded2 = Symbol("ended");
        var kLastPromise2 = Symbol("lastPromise");
        var kHandlePromise2 = Symbol("handlePromise");
        var kStream2 = Symbol("stream");
        function createIterResult2(value, done2) {
          return {
            value,
            done: done2
          };
        }
        function readAndResolve2(iter) {
          var resolve = iter[kLastResolve2];
          if (resolve !== null) {
            var data = iter[kStream2].read();
            if (data !== null) {
              iter[kLastPromise2] = null;
              iter[kLastResolve2] = null;
              iter[kLastReject2] = null;
              resolve(createIterResult2(data, false));
            }
          }
        }
        function onReadable2(iter) {
          process2.nextTick(readAndResolve2, iter);
        }
        function wrapForNext2(lastPromise, iter) {
          return function(resolve, reject) {
            lastPromise.then(function() {
              if (iter[kEnded2]) {
                resolve(createIterResult2(void 0, true));
                return;
              }
              iter[kHandlePromise2](resolve, reject);
            }, reject);
          };
        }
        var AsyncIteratorPrototype2 = Object.getPrototypeOf(function() {
        });
        var ReadableStreamAsyncIteratorPrototype2 = Object.setPrototypeOf((_Object$setPrototypeO2 = {
          get stream() {
            return this[kStream2];
          },
          next: function next2() {
            var _this = this;
            var error = this[kError2];
            if (error !== null) {
              return Promise.reject(error);
            }
            if (this[kEnded2]) {
              return Promise.resolve(createIterResult2(void 0, true));
            }
            if (this[kStream2].destroyed) {
              return new Promise(function(resolve, reject) {
                process2.nextTick(function() {
                  if (_this[kError2]) {
                    reject(_this[kError2]);
                  } else {
                    resolve(createIterResult2(void 0, true));
                  }
                });
              });
            }
            var lastPromise = this[kLastPromise2];
            var promise2;
            if (lastPromise) {
              promise2 = new Promise(wrapForNext2(lastPromise, this));
            } else {
              var data = this[kStream2].read();
              if (data !== null) {
                return Promise.resolve(createIterResult2(data, false));
              }
              promise2 = new Promise(this[kHandlePromise2]);
            }
            this[kLastPromise2] = promise2;
            return promise2;
          }
        }, _defineProperty2(_Object$setPrototypeO2, Symbol.asyncIterator, function() {
          return this;
        }), _defineProperty2(_Object$setPrototypeO2, "return", function _return2() {
          var _this2 = this;
          return new Promise(function(resolve, reject) {
            _this2[kStream2].destroy(null, function(err) {
              if (err) {
                reject(err);
                return;
              }
              resolve(createIterResult2(void 0, true));
            });
          });
        }), _Object$setPrototypeO2), AsyncIteratorPrototype2);
        var createReadableStreamAsyncIterator3 = function createReadableStreamAsyncIterator4(stream) {
          var _Object$create;
          var iterator = Object.create(ReadableStreamAsyncIteratorPrototype2, (_Object$create = {}, _defineProperty2(_Object$create, kStream2, {
            value: stream,
            writable: true
          }), _defineProperty2(_Object$create, kLastResolve2, {
            value: null,
            writable: true
          }), _defineProperty2(_Object$create, kLastReject2, {
            value: null,
            writable: true
          }), _defineProperty2(_Object$create, kError2, {
            value: null,
            writable: true
          }), _defineProperty2(_Object$create, kEnded2, {
            value: stream._readableState.endEmitted,
            writable: true
          }), _defineProperty2(_Object$create, kHandlePromise2, {
            value: function value(resolve, reject) {
              var data = iterator[kStream2].read();
              if (data) {
                iterator[kLastPromise2] = null;
                iterator[kLastResolve2] = null;
                iterator[kLastReject2] = null;
                resolve(createIterResult2(data, false));
              } else {
                iterator[kLastResolve2] = resolve;
                iterator[kLastReject2] = reject;
              }
            },
            writable: true
          }), _Object$create));
          iterator[kLastPromise2] = null;
          finished2(stream, function(err) {
            if (err && err.code !== "ERR_STREAM_PREMATURE_CLOSE") {
              var reject = iterator[kLastReject2];
              if (reject !== null) {
                iterator[kLastPromise2] = null;
                iterator[kLastResolve2] = null;
                iterator[kLastReject2] = null;
                reject(err);
              }
              iterator[kError2] = err;
              return;
            }
            var resolve = iterator[kLastResolve2];
            if (resolve !== null) {
              iterator[kLastPromise2] = null;
              iterator[kLastResolve2] = null;
              iterator[kLastReject2] = null;
              resolve(createIterResult2(void 0, true));
            }
            iterator[kEnded2] = true;
          });
          stream.on("readable", onReadable2.bind(null, iterator));
          return iterator;
        };
        module2.exports = createReadableStreamAsyncIterator3;
      }).call(this);
    }).call(this, require2("_process"));
  }, { "./end-of-stream": 117, "_process": 143 }], 115: [function(require2, module2, exports2) {
    function ownKeys2(object, enumerableOnly) {
      var keys2 = Object.keys(object);
      if (Object.getOwnPropertySymbols) {
        var symbols = Object.getOwnPropertySymbols(object);
        if (enumerableOnly)
          symbols = symbols.filter(function(sym) {
            return Object.getOwnPropertyDescriptor(object, sym).enumerable;
          });
        keys2.push.apply(keys2, symbols);
      }
      return keys2;
    }
    function _objectSpread2(target) {
      for (var i2 = 1; i2 < arguments.length; i2++) {
        var source = arguments[i2] != null ? arguments[i2] : {};
        if (i2 % 2) {
          ownKeys2(Object(source), true).forEach(function(key) {
            _defineProperty2(target, key, source[key]);
          });
        } else if (Object.getOwnPropertyDescriptors) {
          Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
        } else {
          ownKeys2(Object(source)).forEach(function(key) {
            Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
          });
        }
      }
      return target;
    }
    function _defineProperty2(obj, key, value) {
      if (key in obj) {
        Object.defineProperty(obj, key, { value, enumerable: true, configurable: true, writable: true });
      } else {
        obj[key] = value;
      }
      return obj;
    }
    function _classCallCheck2(instance2, Constructor) {
      if (!(instance2 instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
      }
    }
    function _defineProperties2(target, props) {
      for (var i2 = 0; i2 < props.length; i2++) {
        var descriptor = props[i2];
        descriptor.enumerable = descriptor.enumerable || false;
        descriptor.configurable = true;
        if ("value" in descriptor)
          descriptor.writable = true;
        Object.defineProperty(target, descriptor.key, descriptor);
      }
    }
    function _createClass2(Constructor, protoProps, staticProps) {
      if (protoProps)
        _defineProperties2(Constructor.prototype, protoProps);
      if (staticProps)
        _defineProperties2(Constructor, staticProps);
      return Constructor;
    }
    var _require3 = require2("buffer"), Buffer2 = _require3.Buffer;
    var _require22 = require2("util"), inspect2 = _require22.inspect;
    var custom2 = inspect2 && inspect2.custom || "inspect";
    function copyBuffer2(src, target, offset) {
      Buffer2.prototype.copy.call(src, target, offset);
    }
    module2.exports = /* @__PURE__ */ function() {
      function BufferList2() {
        _classCallCheck2(this, BufferList2);
        this.head = null;
        this.tail = null;
        this.length = 0;
      }
      _createClass2(BufferList2, [{
        key: "push",
        value: function push2(v2) {
          var entry = {
            data: v2,
            next: null
          };
          if (this.length > 0)
            this.tail.next = entry;
          else
            this.head = entry;
          this.tail = entry;
          ++this.length;
        }
      }, {
        key: "unshift",
        value: function unshift(v2) {
          var entry = {
            data: v2,
            next: this.head
          };
          if (this.length === 0)
            this.tail = entry;
          this.head = entry;
          ++this.length;
        }
      }, {
        key: "shift",
        value: function shift() {
          if (this.length === 0)
            return;
          var ret = this.head.data;
          if (this.length === 1)
            this.head = this.tail = null;
          else
            this.head = this.head.next;
          --this.length;
          return ret;
        }
      }, {
        key: "clear",
        value: function clear() {
          this.head = this.tail = null;
          this.length = 0;
        }
      }, {
        key: "join",
        value: function join(s) {
          if (this.length === 0)
            return "";
          var p2 = this.head;
          var ret = "" + p2.data;
          while (p2 = p2.next) {
            ret += s + p2.data;
          }
          return ret;
        }
      }, {
        key: "concat",
        value: function concat(n) {
          if (this.length === 0)
            return Buffer2.alloc(0);
          var ret = Buffer2.allocUnsafe(n >>> 0);
          var p2 = this.head;
          var i2 = 0;
          while (p2) {
            copyBuffer2(p2.data, ret, i2);
            i2 += p2.data.length;
            p2 = p2.next;
          }
          return ret;
        }
      }, {
        key: "consume",
        value: function consume(n, hasStrings) {
          var ret;
          if (n < this.head.data.length) {
            ret = this.head.data.slice(0, n);
            this.head.data = this.head.data.slice(n);
          } else if (n === this.head.data.length) {
            ret = this.shift();
          } else {
            ret = hasStrings ? this._getString(n) : this._getBuffer(n);
          }
          return ret;
        }
      }, {
        key: "first",
        value: function first() {
          return this.head.data;
        }
      }, {
        key: "_getString",
        value: function _getString(n) {
          var p2 = this.head;
          var c = 1;
          var ret = p2.data;
          n -= ret.length;
          while (p2 = p2.next) {
            var str = p2.data;
            var nb = n > str.length ? str.length : n;
            if (nb === str.length)
              ret += str;
            else
              ret += str.slice(0, n);
            n -= nb;
            if (n === 0) {
              if (nb === str.length) {
                ++c;
                if (p2.next)
                  this.head = p2.next;
                else
                  this.head = this.tail = null;
              } else {
                this.head = p2;
                p2.data = str.slice(nb);
              }
              break;
            }
            ++c;
          }
          this.length -= c;
          return ret;
        }
      }, {
        key: "_getBuffer",
        value: function _getBuffer(n) {
          var ret = Buffer2.allocUnsafe(n);
          var p2 = this.head;
          var c = 1;
          p2.data.copy(ret);
          n -= p2.data.length;
          while (p2 = p2.next) {
            var buf = p2.data;
            var nb = n > buf.length ? buf.length : n;
            buf.copy(ret, ret.length - n, 0, nb);
            n -= nb;
            if (n === 0) {
              if (nb === buf.length) {
                ++c;
                if (p2.next)
                  this.head = p2.next;
                else
                  this.head = this.tail = null;
              } else {
                this.head = p2;
                p2.data = buf.slice(nb);
              }
              break;
            }
            ++c;
          }
          this.length -= c;
          return ret;
        }
      }, {
        key: custom2,
        value: function value(_, options) {
          return inspect2(this, _objectSpread2({}, options, {
            depth: 0,
            customInspect: false
          }));
        }
      }]);
      return BufferList2;
    }();
  }, { "buffer": 83, "util": 79 }], 116: [function(require2, module2, exports2) {
    (function(process2) {
      (function() {
        function destroy2(err, cb) {
          var _this = this;
          var readableDestroyed = this._readableState && this._readableState.destroyed;
          var writableDestroyed = this._writableState && this._writableState.destroyed;
          if (readableDestroyed || writableDestroyed) {
            if (cb) {
              cb(err);
            } else if (err) {
              if (!this._writableState) {
                process2.nextTick(emitErrorNT2, this, err);
              } else if (!this._writableState.errorEmitted) {
                this._writableState.errorEmitted = true;
                process2.nextTick(emitErrorNT2, this, err);
              }
            }
            return this;
          }
          if (this._readableState) {
            this._readableState.destroyed = true;
          }
          if (this._writableState) {
            this._writableState.destroyed = true;
          }
          this._destroy(err || null, function(err2) {
            if (!cb && err2) {
              if (!_this._writableState) {
                process2.nextTick(emitErrorAndCloseNT2, _this, err2);
              } else if (!_this._writableState.errorEmitted) {
                _this._writableState.errorEmitted = true;
                process2.nextTick(emitErrorAndCloseNT2, _this, err2);
              } else {
                process2.nextTick(emitCloseNT2, _this);
              }
            } else if (cb) {
              process2.nextTick(emitCloseNT2, _this);
              cb(err2);
            } else {
              process2.nextTick(emitCloseNT2, _this);
            }
          });
          return this;
        }
        function emitErrorAndCloseNT2(self2, err) {
          emitErrorNT2(self2, err);
          emitCloseNT2(self2);
        }
        function emitCloseNT2(self2) {
          if (self2._writableState && !self2._writableState.emitClose)
            return;
          if (self2._readableState && !self2._readableState.emitClose)
            return;
          self2.emit("close");
        }
        function undestroy2() {
          if (this._readableState) {
            this._readableState.destroyed = false;
            this._readableState.reading = false;
            this._readableState.ended = false;
            this._readableState.endEmitted = false;
          }
          if (this._writableState) {
            this._writableState.destroyed = false;
            this._writableState.ended = false;
            this._writableState.ending = false;
            this._writableState.finalCalled = false;
            this._writableState.prefinished = false;
            this._writableState.finished = false;
            this._writableState.errorEmitted = false;
          }
        }
        function emitErrorNT2(self2, err) {
          self2.emit("error", err);
        }
        function errorOrDestroy2(stream, err) {
          var rState = stream._readableState;
          var wState = stream._writableState;
          if (rState && rState.autoDestroy || wState && wState.autoDestroy)
            stream.destroy(err);
          else
            stream.emit("error", err);
        }
        module2.exports = {
          destroy: destroy2,
          undestroy: undestroy2,
          errorOrDestroy: errorOrDestroy2
        };
      }).call(this);
    }).call(this, require2("_process"));
  }, { "_process": 143 }], 117: [function(require2, module2, exports2) {
    var ERR_STREAM_PREMATURE_CLOSE2 = require2("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;
    function once3(callback) {
      var called = false;
      return function() {
        if (called)
          return;
        called = true;
        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }
        callback.apply(this, args);
      };
    }
    function noop2() {
    }
    function isRequest2(stream) {
      return stream.setHeader && typeof stream.abort === "function";
    }
    function eos2(stream, opts, callback) {
      if (typeof opts === "function")
        return eos2(stream, null, opts);
      if (!opts)
        opts = {};
      callback = once3(callback || noop2);
      var readable2 = opts.readable || opts.readable !== false && stream.readable;
      var writable2 = opts.writable || opts.writable !== false && stream.writable;
      var onlegacyfinish = function onlegacyfinish2() {
        if (!stream.writable)
          onfinish();
      };
      var writableEnded = stream._writableState && stream._writableState.finished;
      var onfinish = function onfinish2() {
        writable2 = false;
        writableEnded = true;
        if (!readable2)
          callback.call(stream);
      };
      var readableEnded = stream._readableState && stream._readableState.endEmitted;
      var onend2 = function onend3() {
        readable2 = false;
        readableEnded = true;
        if (!writable2)
          callback.call(stream);
      };
      var onerror = function onerror2(err) {
        callback.call(stream, err);
      };
      var onclose = function onclose2() {
        var err;
        if (readable2 && !readableEnded) {
          if (!stream._readableState || !stream._readableState.ended)
            err = new ERR_STREAM_PREMATURE_CLOSE2();
          return callback.call(stream, err);
        }
        if (writable2 && !writableEnded) {
          if (!stream._writableState || !stream._writableState.ended)
            err = new ERR_STREAM_PREMATURE_CLOSE2();
          return callback.call(stream, err);
        }
      };
      var onrequest = function onrequest2() {
        stream.req.on("finish", onfinish);
      };
      if (isRequest2(stream)) {
        stream.on("complete", onfinish);
        stream.on("abort", onclose);
        if (stream.req)
          onrequest();
        else
          stream.on("request", onrequest);
      } else if (writable2 && !stream._writableState) {
        stream.on("end", onlegacyfinish);
        stream.on("close", onlegacyfinish);
      }
      stream.on("end", onend2);
      stream.on("finish", onfinish);
      if (opts.error !== false)
        stream.on("error", onerror);
      stream.on("close", onclose);
      return function() {
        stream.removeListener("complete", onfinish);
        stream.removeListener("abort", onclose);
        stream.removeListener("request", onrequest);
        if (stream.req)
          stream.req.removeListener("finish", onfinish);
        stream.removeListener("end", onlegacyfinish);
        stream.removeListener("close", onlegacyfinish);
        stream.removeListener("finish", onfinish);
        stream.removeListener("end", onend2);
        stream.removeListener("error", onerror);
        stream.removeListener("close", onclose);
      };
    }
    module2.exports = eos2;
  }, { "../../../errors": 108 }], 118: [function(require2, module2, exports2) {
    module2.exports = function() {
      throw new Error("Readable.from is not available in the browser");
    };
  }, {}], 119: [function(require2, module2, exports2) {
    var eos2;
    function once3(callback) {
      var called = false;
      return function() {
        if (called)
          return;
        called = true;
        callback.apply(void 0, arguments);
      };
    }
    var _require$codes2 = require2("../../../errors").codes, ERR_MISSING_ARGS2 = _require$codes2.ERR_MISSING_ARGS, ERR_STREAM_DESTROYED2 = _require$codes2.ERR_STREAM_DESTROYED;
    function noop2(err) {
      if (err)
        throw err;
    }
    function isRequest2(stream) {
      return stream.setHeader && typeof stream.abort === "function";
    }
    function destroyer2(stream, reading, writing, callback) {
      callback = once3(callback);
      var closed = false;
      stream.on("close", function() {
        closed = true;
      });
      if (eos2 === void 0)
        eos2 = require2("./end-of-stream");
      eos2(stream, {
        readable: reading,
        writable: writing
      }, function(err) {
        if (err)
          return callback(err);
        closed = true;
        callback();
      });
      var destroyed = false;
      return function(err) {
        if (closed)
          return;
        if (destroyed)
          return;
        destroyed = true;
        if (isRequest2(stream))
          return stream.abort();
        if (typeof stream.destroy === "function")
          return stream.destroy();
        callback(err || new ERR_STREAM_DESTROYED2("pipe"));
      };
    }
    function call2(fn) {
      fn();
    }
    function pipe2(from2, to) {
      return from2.pipe(to);
    }
    function popCallback2(streams) {
      if (!streams.length)
        return noop2;
      if (typeof streams[streams.length - 1] !== "function")
        return noop2;
      return streams.pop();
    }
    function pipeline2() {
      for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {
        streams[_key] = arguments[_key];
      }
      var callback = popCallback2(streams);
      if (Array.isArray(streams[0]))
        streams = streams[0];
      if (streams.length < 2) {
        throw new ERR_MISSING_ARGS2("streams");
      }
      var error;
      var destroys = streams.map(function(stream, i2) {
        var reading = i2 < streams.length - 1;
        var writing = i2 > 0;
        return destroyer2(stream, reading, writing, function(err) {
          if (!error)
            error = err;
          if (err)
            destroys.forEach(call2);
          if (reading)
            return;
          destroys.forEach(call2);
          callback(error);
        });
      });
      return streams.reduce(pipe2);
    }
    module2.exports = pipeline2;
  }, { "../../../errors": 108, "./end-of-stream": 117 }], 120: [function(require2, module2, exports2) {
    var ERR_INVALID_OPT_VALUE2 = require2("../../../errors").codes.ERR_INVALID_OPT_VALUE;
    function highWaterMarkFrom2(options, isDuplex, duplexKey) {
      return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null;
    }
    function getHighWaterMark2(state2, options, duplexKey, isDuplex) {
      var hwm = highWaterMarkFrom2(options, isDuplex, duplexKey);
      if (hwm != null) {
        if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {
          var name = isDuplex ? duplexKey : "highWaterMark";
          throw new ERR_INVALID_OPT_VALUE2(name, hwm);
        }
        return Math.floor(hwm);
      }
      return state2.objectMode ? 16 : 16 * 1024;
    }
    module2.exports = {
      getHighWaterMark: getHighWaterMark2
    };
  }, { "../../../errors": 108 }], 121: [function(require2, module2, exports2) {
    module2.exports = require2("events").EventEmitter;
  }, { "events": 106 }], 122: [function(require2, module2, exports2) {
    exports2 = module2.exports = require2("./lib/_stream_readable.js");
    exports2.Stream = exports2;
    exports2.Readable = exports2;
    exports2.Writable = require2("./lib/_stream_writable.js");
    exports2.Duplex = require2("./lib/_stream_duplex.js");
    exports2.Transform = require2("./lib/_stream_transform.js");
    exports2.PassThrough = require2("./lib/_stream_passthrough.js");
    exports2.finished = require2("./lib/internal/streams/end-of-stream.js");
    exports2.pipeline = require2("./lib/internal/streams/pipeline.js");
  }, { "./lib/_stream_duplex.js": 109, "./lib/_stream_passthrough.js": 110, "./lib/_stream_readable.js": 111, "./lib/_stream_transform.js": 112, "./lib/_stream_writable.js": 113, "./lib/internal/streams/end-of-stream.js": 117, "./lib/internal/streams/pipeline.js": 119 }], 123: [function(require2, module2, exports2) {
    var hash2 = exports2;
    hash2.utils = require2("./hash/utils");
    hash2.common = require2("./hash/common");
    hash2.sha = require2("./hash/sha");
    hash2.ripemd = require2("./hash/ripemd");
    hash2.hmac = require2("./hash/hmac");
    hash2.sha1 = hash2.sha.sha1;
    hash2.sha256 = hash2.sha.sha256;
    hash2.sha224 = hash2.sha.sha224;
    hash2.sha384 = hash2.sha.sha384;
    hash2.sha512 = hash2.sha.sha512;
    hash2.ripemd160 = hash2.ripemd.ripemd160;
  }, { "./hash/common": 124, "./hash/hmac": 125, "./hash/ripemd": 126, "./hash/sha": 127, "./hash/utils": 134 }], 124: [function(require2, module2, exports2) {
    var utils = require2("./utils");
    var assert = require2("minimalistic-assert");
    function BlockHash() {
      this.pending = null;
      this.pendingTotal = 0;
      this.blockSize = this.constructor.blockSize;
      this.outSize = this.constructor.outSize;
      this.hmacStrength = this.constructor.hmacStrength;
      this.padLength = this.constructor.padLength / 8;
      this.endian = "big";
      this._delta8 = this.blockSize / 8;
      this._delta32 = this.blockSize / 32;
    }
    exports2.BlockHash = BlockHash;
    BlockHash.prototype.update = function update2(msg, enc) {
      msg = utils.toArray(msg, enc);
      if (!this.pending)
        this.pending = msg;
      else
        this.pending = this.pending.concat(msg);
      this.pendingTotal += msg.length;
      if (this.pending.length >= this._delta8) {
        msg = this.pending;
        var r = msg.length % this._delta8;
        this.pending = msg.slice(msg.length - r, msg.length);
        if (this.pending.length === 0)
          this.pending = null;
        msg = utils.join32(msg, 0, msg.length - r, this.endian);
        for (var i2 = 0; i2 < msg.length; i2 += this._delta32)
          this._update(msg, i2, i2 + this._delta32);
      }
      return this;
    };
    BlockHash.prototype.digest = function digest(enc) {
      this.update(this._pad());
      assert(this.pending === null);
      return this._digest(enc);
    };
    BlockHash.prototype._pad = function pad() {
      var len2 = this.pendingTotal;
      var bytes = this._delta8;
      var k = bytes - (len2 + this.padLength) % bytes;
      var res = new Array(k + this.padLength);
      res[0] = 128;
      for (var i2 = 1; i2 < k; i2++)
        res[i2] = 0;
      len2 <<= 3;
      if (this.endian === "big") {
        for (var t = 8; t < this.padLength; t++)
          res[i2++] = 0;
        res[i2++] = 0;
        res[i2++] = 0;
        res[i2++] = 0;
        res[i2++] = 0;
        res[i2++] = len2 >>> 24 & 255;
        res[i2++] = len2 >>> 16 & 255;
        res[i2++] = len2 >>> 8 & 255;
        res[i2++] = len2 & 255;
      } else {
        res[i2++] = len2 & 255;
        res[i2++] = len2 >>> 8 & 255;
        res[i2++] = len2 >>> 16 & 255;
        res[i2++] = len2 >>> 24 & 255;
        res[i2++] = 0;
        res[i2++] = 0;
        res[i2++] = 0;
        res[i2++] = 0;
        for (t = 8; t < this.padLength; t++)
          res[i2++] = 0;
      }
      return res;
    };
  }, { "./utils": 134, "minimalistic-assert": 141 }], 125: [function(require2, module2, exports2) {
    var utils = require2("./utils");
    var assert = require2("minimalistic-assert");
    function Hmac(hash2, key, enc) {
      if (!(this instanceof Hmac))
        return new Hmac(hash2, key, enc);
      this.Hash = hash2;
      this.blockSize = hash2.blockSize / 8;
      this.outSize = hash2.outSize / 8;
      this.inner = null;
      this.outer = null;
      this._init(utils.toArray(key, enc));
    }
    module2.exports = Hmac;
    Hmac.prototype._init = function init2(key) {
      if (key.length > this.blockSize)
        key = new this.Hash().update(key).digest();
      assert(key.length <= this.blockSize);
      for (var i2 = key.length; i2 < this.blockSize; i2++)
        key.push(0);
      for (i2 = 0; i2 < key.length; i2++)
        key[i2] ^= 54;
      this.inner = new this.Hash().update(key);
      for (i2 = 0; i2 < key.length; i2++)
        key[i2] ^= 106;
      this.outer = new this.Hash().update(key);
    };
    Hmac.prototype.update = function update2(msg, enc) {
      this.inner.update(msg, enc);
      return this;
    };
    Hmac.prototype.digest = function digest(enc) {
      this.outer.update(this.inner.digest());
      return this.outer.digest(enc);
    };
  }, { "./utils": 134, "minimalistic-assert": 141 }], 126: [function(require2, module2, exports2) {
    var utils = require2("./utils");
    var common = require2("./common");
    var rotl32 = utils.rotl32;
    var sum32 = utils.sum32;
    var sum32_3 = utils.sum32_3;
    var sum32_4 = utils.sum32_4;
    var BlockHash = common.BlockHash;
    function RIPEMD160() {
      if (!(this instanceof RIPEMD160))
        return new RIPEMD160();
      BlockHash.call(this);
      this.h = [1732584193, 4023233417, 2562383102, 271733878, 3285377520];
      this.endian = "little";
    }
    utils.inherits(RIPEMD160, BlockHash);
    exports2.ripemd160 = RIPEMD160;
    RIPEMD160.blockSize = 512;
    RIPEMD160.outSize = 160;
    RIPEMD160.hmacStrength = 192;
    RIPEMD160.padLength = 64;
    RIPEMD160.prototype._update = function update2(msg, start2) {
      var A = this.h[0];
      var B = this.h[1];
      var C = this.h[2];
      var D = this.h[3];
      var E = this.h[4];
      var Ah = A;
      var Bh = B;
      var Ch = C;
      var Dh = D;
      var Eh = E;
      for (var j = 0; j < 80; j++) {
        var T = sum32(rotl32(sum32_4(A, f(j, B, C, D), msg[r[j] + start2], K(j)), s[j]), E);
        A = E;
        E = D;
        D = rotl32(C, 10);
        C = B;
        B = T;
        T = sum32(rotl32(sum32_4(Ah, f(79 - j, Bh, Ch, Dh), msg[rh[j] + start2], Kh(j)), sh[j]), Eh);
        Ah = Eh;
        Eh = Dh;
        Dh = rotl32(Ch, 10);
        Ch = Bh;
        Bh = T;
      }
      T = sum32_3(this.h[1], C, Dh);
      this.h[1] = sum32_3(this.h[2], D, Eh);
      this.h[2] = sum32_3(this.h[3], E, Ah);
      this.h[3] = sum32_3(this.h[4], A, Bh);
      this.h[4] = sum32_3(this.h[0], B, Ch);
      this.h[0] = T;
    };
    RIPEMD160.prototype._digest = function digest(enc) {
      if (enc === "hex")
        return utils.toHex32(this.h, "little");
      else
        return utils.split32(this.h, "little");
    };
    function f(j, x, y, z) {
      if (j <= 15)
        return x ^ y ^ z;
      else if (j <= 31)
        return x & y | ~x & z;
      else if (j <= 47)
        return (x | ~y) ^ z;
      else if (j <= 63)
        return x & z | y & ~z;
      else
        return x ^ (y | ~z);
    }
    function K(j) {
      if (j <= 15)
        return 0;
      else if (j <= 31)
        return 1518500249;
      else if (j <= 47)
        return 1859775393;
      else if (j <= 63)
        return 2400959708;
      else
        return 2840853838;
    }
    function Kh(j) {
      if (j <= 15)
        return 1352829926;
      else if (j <= 31)
        return 1548603684;
      else if (j <= 47)
        return 1836072691;
      else if (j <= 63)
        return 2053994217;
      else
        return 0;
    }
    var r = [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9,
      10,
      11,
      12,
      13,
      14,
      15,
      7,
      4,
      13,
      1,
      10,
      6,
      15,
      3,
      12,
      0,
      9,
      5,
      2,
      14,
      11,
      8,
      3,
      10,
      14,
      4,
      9,
      15,
      8,
      1,
      2,
      7,
      0,
      6,
      13,
      11,
      5,
      12,
      1,
      9,
      11,
      10,
      0,
      8,
      12,
      4,
      13,
      3,
      7,
      15,
      14,
      5,
      6,
      2,
      4,
      0,
      5,
      9,
      7,
      12,
      2,
      10,
      14,
      1,
      3,
      8,
      11,
      6,
      15,
      13
    ];
    var rh = [
      5,
      14,
      7,
      0,
      9,
      2,
      11,
      4,
      13,
      6,
      15,
      8,
      1,
      10,
      3,
      12,
      6,
      11,
      3,
      7,
      0,
      13,
      5,
      10,
      14,
      15,
      8,
      12,
      4,
      9,
      1,
      2,
      15,
      5,
      1,
      3,
      7,
      14,
      6,
      9,
      11,
      8,
      12,
      2,
      10,
      0,
      4,
      13,
      8,
      6,
      4,
      1,
      3,
      11,
      15,
      0,
      5,
      12,
      2,
      13,
      9,
      7,
      10,
      14,
      12,
      15,
      10,
      4,
      1,
      5,
      8,
      7,
      6,
      2,
      13,
      14,
      0,
      3,
      9,
      11
    ];
    var s = [
      11,
      14,
      15,
      12,
      5,
      8,
      7,
      9,
      11,
      13,
      14,
      15,
      6,
      7,
      9,
      8,
      7,
      6,
      8,
      13,
      11,
      9,
      7,
      15,
      7,
      12,
      15,
      9,
      11,
      7,
      13,
      12,
      11,
      13,
      6,
      7,
      14,
      9,
      13,
      15,
      14,
      8,
      13,
      6,
      5,
      12,
      7,
      5,
      11,
      12,
      14,
      15,
      14,
      15,
      9,
      8,
      9,
      14,
      5,
      6,
      8,
      6,
      5,
      12,
      9,
      15,
      5,
      11,
      6,
      8,
      13,
      12,
      5,
      12,
      13,
      14,
      11,
      8,
      5,
      6
    ];
    var sh = [
      8,
      9,
      9,
      11,
      13,
      15,
      15,
      5,
      7,
      7,
      8,
      11,
      14,
      14,
      12,
      6,
      9,
      13,
      15,
      7,
      12,
      8,
      9,
      11,
      7,
      7,
      12,
      7,
      6,
      15,
      13,
      11,
      9,
      7,
      15,
      11,
      8,
      6,
      6,
      14,
      12,
      13,
      5,
      14,
      13,
      13,
      7,
      5,
      15,
      5,
      8,
      11,
      14,
      14,
      6,
      14,
      6,
      9,
      12,
      9,
      12,
      5,
      15,
      8,
      8,
      5,
      12,
      9,
      12,
      5,
      14,
      6,
      8,
      13,
      6,
      5,
      15,
      13,
      11,
      11
    ];
  }, { "./common": 124, "./utils": 134 }], 127: [function(require2, module2, exports2) {
    exports2.sha1 = require2("./sha/1");
    exports2.sha224 = require2("./sha/224");
    exports2.sha256 = require2("./sha/256");
    exports2.sha384 = require2("./sha/384");
    exports2.sha512 = require2("./sha/512");
  }, { "./sha/1": 128, "./sha/224": 129, "./sha/256": 130, "./sha/384": 131, "./sha/512": 132 }], 128: [function(require2, module2, exports2) {
    var utils = require2("../utils");
    var common = require2("../common");
    var shaCommon = require2("./common");
    var rotl32 = utils.rotl32;
    var sum32 = utils.sum32;
    var sum32_5 = utils.sum32_5;
    var ft_1 = shaCommon.ft_1;
    var BlockHash = common.BlockHash;
    var sha1_K = [
      1518500249,
      1859775393,
      2400959708,
      3395469782
    ];
    function SHA1() {
      if (!(this instanceof SHA1))
        return new SHA1();
      BlockHash.call(this);
      this.h = [
        1732584193,
        4023233417,
        2562383102,
        271733878,
        3285377520
      ];
      this.W = new Array(80);
    }
    utils.inherits(SHA1, BlockHash);
    module2.exports = SHA1;
    SHA1.blockSize = 512;
    SHA1.outSize = 160;
    SHA1.hmacStrength = 80;
    SHA1.padLength = 64;
    SHA1.prototype._update = function _update(msg, start2) {
      var W = this.W;
      for (var i2 = 0; i2 < 16; i2++)
        W[i2] = msg[start2 + i2];
      for (; i2 < W.length; i2++)
        W[i2] = rotl32(W[i2 - 3] ^ W[i2 - 8] ^ W[i2 - 14] ^ W[i2 - 16], 1);
      var a = this.h[0];
      var b = this.h[1];
      var c = this.h[2];
      var d = this.h[3];
      var e = this.h[4];
      for (i2 = 0; i2 < W.length; i2++) {
        var s = ~~(i2 / 20);
        var t = sum32_5(rotl32(a, 5), ft_1(s, b, c, d), e, W[i2], sha1_K[s]);
        e = d;
        d = c;
        c = rotl32(b, 30);
        b = a;
        a = t;
      }
      this.h[0] = sum32(this.h[0], a);
      this.h[1] = sum32(this.h[1], b);
      this.h[2] = sum32(this.h[2], c);
      this.h[3] = sum32(this.h[3], d);
      this.h[4] = sum32(this.h[4], e);
    };
    SHA1.prototype._digest = function digest(enc) {
      if (enc === "hex")
        return utils.toHex32(this.h, "big");
      else
        return utils.split32(this.h, "big");
    };
  }, { "../common": 124, "../utils": 134, "./common": 133 }], 129: [function(require2, module2, exports2) {
    var utils = require2("../utils");
    var SHA256 = require2("./256");
    function SHA224() {
      if (!(this instanceof SHA224))
        return new SHA224();
      SHA256.call(this);
      this.h = [
        3238371032,
        914150663,
        812702999,
        4144912697,
        4290775857,
        1750603025,
        1694076839,
        3204075428
      ];
    }
    utils.inherits(SHA224, SHA256);
    module2.exports = SHA224;
    SHA224.blockSize = 512;
    SHA224.outSize = 224;
    SHA224.hmacStrength = 192;
    SHA224.padLength = 64;
    SHA224.prototype._digest = function digest(enc) {
      if (enc === "hex")
        return utils.toHex32(this.h.slice(0, 7), "big");
      else
        return utils.split32(this.h.slice(0, 7), "big");
    };
  }, { "../utils": 134, "./256": 130 }], 130: [function(require2, module2, exports2) {
    var utils = require2("../utils");
    var common = require2("../common");
    var shaCommon = require2("./common");
    var assert = require2("minimalistic-assert");
    var sum32 = utils.sum32;
    var sum32_4 = utils.sum32_4;
    var sum32_5 = utils.sum32_5;
    var ch32 = shaCommon.ch32;
    var maj32 = shaCommon.maj32;
    var s0_256 = shaCommon.s0_256;
    var s1_256 = shaCommon.s1_256;
    var g0_256 = shaCommon.g0_256;
    var g1_256 = shaCommon.g1_256;
    var BlockHash = common.BlockHash;
    var sha256_K = [
      1116352408,
      1899447441,
      3049323471,
      3921009573,
      961987163,
      1508970993,
      2453635748,
      2870763221,
      3624381080,
      310598401,
      607225278,
      1426881987,
      1925078388,
      2162078206,
      2614888103,
      3248222580,
      3835390401,
      4022224774,
      264347078,
      604807628,
      770255983,
      1249150122,
      1555081692,
      1996064986,
      2554220882,
      2821834349,
      2952996808,
      3210313671,
      3336571891,
      3584528711,
      113926993,
      338241895,
      666307205,
      773529912,
      1294757372,
      1396182291,
      1695183700,
      1986661051,
      2177026350,
      2456956037,
      2730485921,
      2820302411,
      3259730800,
      3345764771,
      3516065817,
      3600352804,
      4094571909,
      275423344,
      430227734,
      506948616,
      659060556,
      883997877,
      958139571,
      1322822218,
      1537002063,
      1747873779,
      1955562222,
      2024104815,
      2227730452,
      2361852424,
      2428436474,
      2756734187,
      3204031479,
      3329325298
    ];
    function SHA256() {
      if (!(this instanceof SHA256))
        return new SHA256();
      BlockHash.call(this);
      this.h = [
        1779033703,
        3144134277,
        1013904242,
        2773480762,
        1359893119,
        2600822924,
        528734635,
        1541459225
      ];
      this.k = sha256_K;
      this.W = new Array(64);
    }
    utils.inherits(SHA256, BlockHash);
    module2.exports = SHA256;
    SHA256.blockSize = 512;
    SHA256.outSize = 256;
    SHA256.hmacStrength = 192;
    SHA256.padLength = 64;
    SHA256.prototype._update = function _update(msg, start2) {
      var W = this.W;
      for (var i2 = 0; i2 < 16; i2++)
        W[i2] = msg[start2 + i2];
      for (; i2 < W.length; i2++)
        W[i2] = sum32_4(g1_256(W[i2 - 2]), W[i2 - 7], g0_256(W[i2 - 15]), W[i2 - 16]);
      var a = this.h[0];
      var b = this.h[1];
      var c = this.h[2];
      var d = this.h[3];
      var e = this.h[4];
      var f = this.h[5];
      var g = this.h[6];
      var h = this.h[7];
      assert(this.k.length === W.length);
      for (i2 = 0; i2 < W.length; i2++) {
        var T1 = sum32_5(h, s1_256(e), ch32(e, f, g), this.k[i2], W[i2]);
        var T2 = sum32(s0_256(a), maj32(a, b, c));
        h = g;
        g = f;
        f = e;
        e = sum32(d, T1);
        d = c;
        c = b;
        b = a;
        a = sum32(T1, T2);
      }
      this.h[0] = sum32(this.h[0], a);
      this.h[1] = sum32(this.h[1], b);
      this.h[2] = sum32(this.h[2], c);
      this.h[3] = sum32(this.h[3], d);
      this.h[4] = sum32(this.h[4], e);
      this.h[5] = sum32(this.h[5], f);
      this.h[6] = sum32(this.h[6], g);
      this.h[7] = sum32(this.h[7], h);
    };
    SHA256.prototype._digest = function digest(enc) {
      if (enc === "hex")
        return utils.toHex32(this.h, "big");
      else
        return utils.split32(this.h, "big");
    };
  }, { "../common": 124, "../utils": 134, "./common": 133, "minimalistic-assert": 141 }], 131: [function(require2, module2, exports2) {
    var utils = require2("../utils");
    var SHA512 = require2("./512");
    function SHA384() {
      if (!(this instanceof SHA384))
        return new SHA384();
      SHA512.call(this);
      this.h = [
        3418070365,
        3238371032,
        1654270250,
        914150663,
        2438529370,
        812702999,
        355462360,
        4144912697,
        1731405415,
        4290775857,
        2394180231,
        1750603025,
        3675008525,
        1694076839,
        1203062813,
        3204075428
      ];
    }
    utils.inherits(SHA384, SHA512);
    module2.exports = SHA384;
    SHA384.blockSize = 1024;
    SHA384.outSize = 384;
    SHA384.hmacStrength = 192;
    SHA384.padLength = 128;
    SHA384.prototype._digest = function digest(enc) {
      if (enc === "hex")
        return utils.toHex32(this.h.slice(0, 12), "big");
      else
        return utils.split32(this.h.slice(0, 12), "big");
    };
  }, { "../utils": 134, "./512": 132 }], 132: [function(require2, module2, exports2) {
    var utils = require2("../utils");
    var common = require2("../common");
    var assert = require2("minimalistic-assert");
    var rotr64_hi = utils.rotr64_hi;
    var rotr64_lo = utils.rotr64_lo;
    var shr64_hi = utils.shr64_hi;
    var shr64_lo = utils.shr64_lo;
    var sum64 = utils.sum64;
    var sum64_hi = utils.sum64_hi;
    var sum64_lo = utils.sum64_lo;
    var sum64_4_hi = utils.sum64_4_hi;
    var sum64_4_lo = utils.sum64_4_lo;
    var sum64_5_hi = utils.sum64_5_hi;
    var sum64_5_lo = utils.sum64_5_lo;
    var BlockHash = common.BlockHash;
    var sha512_K = [
      1116352408,
      3609767458,
      1899447441,
      602891725,
      3049323471,
      3964484399,
      3921009573,
      2173295548,
      961987163,
      4081628472,
      1508970993,
      3053834265,
      2453635748,
      2937671579,
      2870763221,
      3664609560,
      3624381080,
      2734883394,
      310598401,
      1164996542,
      607225278,
      1323610764,
      1426881987,
      3590304994,
      1925078388,
      4068182383,
      2162078206,
      991336113,
      2614888103,
      633803317,
      3248222580,
      3479774868,
      3835390401,
      2666613458,
      4022224774,
      944711139,
      264347078,
      2341262773,
      604807628,
      2007800933,
      770255983,
      1495990901,
      1249150122,
      1856431235,
      1555081692,
      3175218132,
      1996064986,
      2198950837,
      2554220882,
      3999719339,
      2821834349,
      766784016,
      2952996808,
      2566594879,
      3210313671,
      3203337956,
      3336571891,
      1034457026,
      3584528711,
      2466948901,
      113926993,
      3758326383,
      338241895,
      168717936,
      666307205,
      1188179964,
      773529912,
      1546045734,
      1294757372,
      1522805485,
      1396182291,
      2643833823,
      1695183700,
      2343527390,
      1986661051,
      1014477480,
      2177026350,
      1206759142,
      2456956037,
      344077627,
      2730485921,
      1290863460,
      2820302411,
      3158454273,
      3259730800,
      3505952657,
      3345764771,
      106217008,
      3516065817,
      3606008344,
      3600352804,
      1432725776,
      4094571909,
      1467031594,
      275423344,
      851169720,
      430227734,
      3100823752,
      506948616,
      1363258195,
      659060556,
      3750685593,
      883997877,
      3785050280,
      958139571,
      3318307427,
      1322822218,
      3812723403,
      1537002063,
      2003034995,
      1747873779,
      3602036899,
      1955562222,
      1575990012,
      2024104815,
      1125592928,
      2227730452,
      2716904306,
      2361852424,
      442776044,
      2428436474,
      593698344,
      2756734187,
      3733110249,
      3204031479,
      2999351573,
      3329325298,
      3815920427,
      3391569614,
      3928383900,
      3515267271,
      566280711,
      3940187606,
      3454069534,
      4118630271,
      4000239992,
      116418474,
      1914138554,
      174292421,
      2731055270,
      289380356,
      3203993006,
      460393269,
      320620315,
      685471733,
      587496836,
      852142971,
      1086792851,
      1017036298,
      365543100,
      1126000580,
      2618297676,
      1288033470,
      3409855158,
      1501505948,
      4234509866,
      1607167915,
      987167468,
      1816402316,
      1246189591
    ];
    function SHA512() {
      if (!(this instanceof SHA512))
        return new SHA512();
      BlockHash.call(this);
      this.h = [
        1779033703,
        4089235720,
        3144134277,
        2227873595,
        1013904242,
        4271175723,
        2773480762,
        1595750129,
        1359893119,
        2917565137,
        2600822924,
        725511199,
        528734635,
        4215389547,
        1541459225,
        327033209
      ];
      this.k = sha512_K;
      this.W = new Array(160);
    }
    utils.inherits(SHA512, BlockHash);
    module2.exports = SHA512;
    SHA512.blockSize = 1024;
    SHA512.outSize = 512;
    SHA512.hmacStrength = 192;
    SHA512.padLength = 128;
    SHA512.prototype._prepareBlock = function _prepareBlock(msg, start2) {
      var W = this.W;
      for (var i2 = 0; i2 < 32; i2++)
        W[i2] = msg[start2 + i2];
      for (; i2 < W.length; i2 += 2) {
        var c0_hi = g1_512_hi(W[i2 - 4], W[i2 - 3]);
        var c0_lo = g1_512_lo(W[i2 - 4], W[i2 - 3]);
        var c1_hi = W[i2 - 14];
        var c1_lo = W[i2 - 13];
        var c2_hi = g0_512_hi(W[i2 - 30], W[i2 - 29]);
        var c2_lo = g0_512_lo(W[i2 - 30], W[i2 - 29]);
        var c3_hi = W[i2 - 32];
        var c3_lo = W[i2 - 31];
        W[i2] = sum64_4_hi(c0_hi, c0_lo, c1_hi, c1_lo, c2_hi, c2_lo, c3_hi, c3_lo);
        W[i2 + 1] = sum64_4_lo(c0_hi, c0_lo, c1_hi, c1_lo, c2_hi, c2_lo, c3_hi, c3_lo);
      }
    };
    SHA512.prototype._update = function _update(msg, start2) {
      this._prepareBlock(msg, start2);
      var W = this.W;
      var ah = this.h[0];
      var al = this.h[1];
      var bh = this.h[2];
      var bl = this.h[3];
      var ch = this.h[4];
      var cl = this.h[5];
      var dh = this.h[6];
      var dl = this.h[7];
      var eh = this.h[8];
      var el = this.h[9];
      var fh = this.h[10];
      var fl = this.h[11];
      var gh = this.h[12];
      var gl = this.h[13];
      var hh = this.h[14];
      var hl = this.h[15];
      assert(this.k.length === W.length);
      for (var i2 = 0; i2 < W.length; i2 += 2) {
        var c0_hi = hh;
        var c0_lo = hl;
        var c1_hi = s1_512_hi(eh, el);
        var c1_lo = s1_512_lo(eh, el);
        var c2_hi = ch64_hi(eh, el, fh, fl, gh);
        var c2_lo = ch64_lo(eh, el, fh, fl, gh, gl);
        var c3_hi = this.k[i2];
        var c3_lo = this.k[i2 + 1];
        var c4_hi = W[i2];
        var c4_lo = W[i2 + 1];
        var T1_hi = sum64_5_hi(c0_hi, c0_lo, c1_hi, c1_lo, c2_hi, c2_lo, c3_hi, c3_lo, c4_hi, c4_lo);
        var T1_lo = sum64_5_lo(c0_hi, c0_lo, c1_hi, c1_lo, c2_hi, c2_lo, c3_hi, c3_lo, c4_hi, c4_lo);
        c0_hi = s0_512_hi(ah, al);
        c0_lo = s0_512_lo(ah, al);
        c1_hi = maj64_hi(ah, al, bh, bl, ch);
        c1_lo = maj64_lo(ah, al, bh, bl, ch, cl);
        var T2_hi = sum64_hi(c0_hi, c0_lo, c1_hi, c1_lo);
        var T2_lo = sum64_lo(c0_hi, c0_lo, c1_hi, c1_lo);
        hh = gh;
        hl = gl;
        gh = fh;
        gl = fl;
        fh = eh;
        fl = el;
        eh = sum64_hi(dh, dl, T1_hi, T1_lo);
        el = sum64_lo(dl, dl, T1_hi, T1_lo);
        dh = ch;
        dl = cl;
        ch = bh;
        cl = bl;
        bh = ah;
        bl = al;
        ah = sum64_hi(T1_hi, T1_lo, T2_hi, T2_lo);
        al = sum64_lo(T1_hi, T1_lo, T2_hi, T2_lo);
      }
      sum64(this.h, 0, ah, al);
      sum64(this.h, 2, bh, bl);
      sum64(this.h, 4, ch, cl);
      sum64(this.h, 6, dh, dl);
      sum64(this.h, 8, eh, el);
      sum64(this.h, 10, fh, fl);
      sum64(this.h, 12, gh, gl);
      sum64(this.h, 14, hh, hl);
    };
    SHA512.prototype._digest = function digest(enc) {
      if (enc === "hex")
        return utils.toHex32(this.h, "big");
      else
        return utils.split32(this.h, "big");
    };
    function ch64_hi(xh, xl, yh, yl, zh) {
      var r = xh & yh ^ ~xh & zh;
      if (r < 0)
        r += 4294967296;
      return r;
    }
    function ch64_lo(xh, xl, yh, yl, zh, zl) {
      var r = xl & yl ^ ~xl & zl;
      if (r < 0)
        r += 4294967296;
      return r;
    }
    function maj64_hi(xh, xl, yh, yl, zh) {
      var r = xh & yh ^ xh & zh ^ yh & zh;
      if (r < 0)
        r += 4294967296;
      return r;
    }
    function maj64_lo(xh, xl, yh, yl, zh, zl) {
      var r = xl & yl ^ xl & zl ^ yl & zl;
      if (r < 0)
        r += 4294967296;
      return r;
    }
    function s0_512_hi(xh, xl) {
      var c0_hi = rotr64_hi(xh, xl, 28);
      var c1_hi = rotr64_hi(xl, xh, 2);
      var c2_hi = rotr64_hi(xl, xh, 7);
      var r = c0_hi ^ c1_hi ^ c2_hi;
      if (r < 0)
        r += 4294967296;
      return r;
    }
    function s0_512_lo(xh, xl) {
      var c0_lo = rotr64_lo(xh, xl, 28);
      var c1_lo = rotr64_lo(xl, xh, 2);
      var c2_lo = rotr64_lo(xl, xh, 7);
      var r = c0_lo ^ c1_lo ^ c2_lo;
      if (r < 0)
        r += 4294967296;
      return r;
    }
    function s1_512_hi(xh, xl) {
      var c0_hi = rotr64_hi(xh, xl, 14);
      var c1_hi = rotr64_hi(xh, xl, 18);
      var c2_hi = rotr64_hi(xl, xh, 9);
      var r = c0_hi ^ c1_hi ^ c2_hi;
      if (r < 0)
        r += 4294967296;
      return r;
    }
    function s1_512_lo(xh, xl) {
      var c0_lo = rotr64_lo(xh, xl, 14);
      var c1_lo = rotr64_lo(xh, xl, 18);
      var c2_lo = rotr64_lo(xl, xh, 9);
      var r = c0_lo ^ c1_lo ^ c2_lo;
      if (r < 0)
        r += 4294967296;
      return r;
    }
    function g0_512_hi(xh, xl) {
      var c0_hi = rotr64_hi(xh, xl, 1);
      var c1_hi = rotr64_hi(xh, xl, 8);
      var c2_hi = shr64_hi(xh, xl, 7);
      var r = c0_hi ^ c1_hi ^ c2_hi;
      if (r < 0)
        r += 4294967296;
      return r;
    }
    function g0_512_lo(xh, xl) {
      var c0_lo = rotr64_lo(xh, xl, 1);
      var c1_lo = rotr64_lo(xh, xl, 8);
      var c2_lo = shr64_lo(xh, xl, 7);
      var r = c0_lo ^ c1_lo ^ c2_lo;
      if (r < 0)
        r += 4294967296;
      return r;
    }
    function g1_512_hi(xh, xl) {
      var c0_hi = rotr64_hi(xh, xl, 19);
      var c1_hi = rotr64_hi(xl, xh, 29);
      var c2_hi = shr64_hi(xh, xl, 6);
      var r = c0_hi ^ c1_hi ^ c2_hi;
      if (r < 0)
        r += 4294967296;
      return r;
    }
    function g1_512_lo(xh, xl) {
      var c0_lo = rotr64_lo(xh, xl, 19);
      var c1_lo = rotr64_lo(xl, xh, 29);
      var c2_lo = shr64_lo(xh, xl, 6);
      var r = c0_lo ^ c1_lo ^ c2_lo;
      if (r < 0)
        r += 4294967296;
      return r;
    }
  }, { "../common": 124, "../utils": 134, "minimalistic-assert": 141 }], 133: [function(require2, module2, exports2) {
    var utils = require2("../utils");
    var rotr32 = utils.rotr32;
    function ft_1(s, x, y, z) {
      if (s === 0)
        return ch32(x, y, z);
      if (s === 1 || s === 3)
        return p32(x, y, z);
      if (s === 2)
        return maj32(x, y, z);
    }
    exports2.ft_1 = ft_1;
    function ch32(x, y, z) {
      return x & y ^ ~x & z;
    }
    exports2.ch32 = ch32;
    function maj32(x, y, z) {
      return x & y ^ x & z ^ y & z;
    }
    exports2.maj32 = maj32;
    function p32(x, y, z) {
      return x ^ y ^ z;
    }
    exports2.p32 = p32;
    function s0_256(x) {
      return rotr32(x, 2) ^ rotr32(x, 13) ^ rotr32(x, 22);
    }
    exports2.s0_256 = s0_256;
    function s1_256(x) {
      return rotr32(x, 6) ^ rotr32(x, 11) ^ rotr32(x, 25);
    }
    exports2.s1_256 = s1_256;
    function g0_256(x) {
      return rotr32(x, 7) ^ rotr32(x, 18) ^ x >>> 3;
    }
    exports2.g0_256 = g0_256;
    function g1_256(x) {
      return rotr32(x, 17) ^ rotr32(x, 19) ^ x >>> 10;
    }
    exports2.g1_256 = g1_256;
  }, { "../utils": 134 }], 134: [function(require2, module2, exports2) {
    var assert = require2("minimalistic-assert");
    var inherits = require2("inherits");
    exports2.inherits = inherits;
    function isSurrogatePair(msg, i2) {
      if ((msg.charCodeAt(i2) & 64512) !== 55296) {
        return false;
      }
      if (i2 < 0 || i2 + 1 >= msg.length) {
        return false;
      }
      return (msg.charCodeAt(i2 + 1) & 64512) === 56320;
    }
    function toArray(msg, enc) {
      if (Array.isArray(msg))
        return msg.slice();
      if (!msg)
        return [];
      var res = [];
      if (typeof msg === "string") {
        if (!enc) {
          var p2 = 0;
          for (var i2 = 0; i2 < msg.length; i2++) {
            var c = msg.charCodeAt(i2);
            if (c < 128) {
              res[p2++] = c;
            } else if (c < 2048) {
              res[p2++] = c >> 6 | 192;
              res[p2++] = c & 63 | 128;
            } else if (isSurrogatePair(msg, i2)) {
              c = 65536 + ((c & 1023) << 10) + (msg.charCodeAt(++i2) & 1023);
              res[p2++] = c >> 18 | 240;
              res[p2++] = c >> 12 & 63 | 128;
              res[p2++] = c >> 6 & 63 | 128;
              res[p2++] = c & 63 | 128;
            } else {
              res[p2++] = c >> 12 | 224;
              res[p2++] = c >> 6 & 63 | 128;
              res[p2++] = c & 63 | 128;
            }
          }
        } else if (enc === "hex") {
          msg = msg.replace(/[^a-z0-9]+/ig, "");
          if (msg.length % 2 !== 0)
            msg = "0" + msg;
          for (i2 = 0; i2 < msg.length; i2 += 2)
            res.push(parseInt(msg[i2] + msg[i2 + 1], 16));
        }
      } else {
        for (i2 = 0; i2 < msg.length; i2++)
          res[i2] = msg[i2] | 0;
      }
      return res;
    }
    exports2.toArray = toArray;
    function toHex(msg) {
      var res = "";
      for (var i2 = 0; i2 < msg.length; i2++)
        res += zero2(msg[i2].toString(16));
      return res;
    }
    exports2.toHex = toHex;
    function htonl(w) {
      var res = w >>> 24 | w >>> 8 & 65280 | w << 8 & 16711680 | (w & 255) << 24;
      return res >>> 0;
    }
    exports2.htonl = htonl;
    function toHex32(msg, endian) {
      var res = "";
      for (var i2 = 0; i2 < msg.length; i2++) {
        var w = msg[i2];
        if (endian === "little")
          w = htonl(w);
        res += zero8(w.toString(16));
      }
      return res;
    }
    exports2.toHex32 = toHex32;
    function zero2(word) {
      if (word.length === 1)
        return "0" + word;
      else
        return word;
    }
    exports2.zero2 = zero2;
    function zero8(word) {
      if (word.length === 7)
        return "0" + word;
      else if (word.length === 6)
        return "00" + word;
      else if (word.length === 5)
        return "000" + word;
      else if (word.length === 4)
        return "0000" + word;
      else if (word.length === 3)
        return "00000" + word;
      else if (word.length === 2)
        return "000000" + word;
      else if (word.length === 1)
        return "0000000" + word;
      else
        return word;
    }
    exports2.zero8 = zero8;
    function join32(msg, start2, end, endian) {
      var len2 = end - start2;
      assert(len2 % 4 === 0);
      var res = new Array(len2 / 4);
      for (var i2 = 0, k = start2; i2 < res.length; i2++, k += 4) {
        var w;
        if (endian === "big")
          w = msg[k] << 24 | msg[k + 1] << 16 | msg[k + 2] << 8 | msg[k + 3];
        else
          w = msg[k + 3] << 24 | msg[k + 2] << 16 | msg[k + 1] << 8 | msg[k];
        res[i2] = w >>> 0;
      }
      return res;
    }
    exports2.join32 = join32;
    function split32(msg, endian) {
      var res = new Array(msg.length * 4);
      for (var i2 = 0, k = 0; i2 < msg.length; i2++, k += 4) {
        var m = msg[i2];
        if (endian === "big") {
          res[k] = m >>> 24;
          res[k + 1] = m >>> 16 & 255;
          res[k + 2] = m >>> 8 & 255;
          res[k + 3] = m & 255;
        } else {
          res[k + 3] = m >>> 24;
          res[k + 2] = m >>> 16 & 255;
          res[k + 1] = m >>> 8 & 255;
          res[k] = m & 255;
        }
      }
      return res;
    }
    exports2.split32 = split32;
    function rotr32(w, b) {
      return w >>> b | w << 32 - b;
    }
    exports2.rotr32 = rotr32;
    function rotl32(w, b) {
      return w << b | w >>> 32 - b;
    }
    exports2.rotl32 = rotl32;
    function sum32(a, b) {
      return a + b >>> 0;
    }
    exports2.sum32 = sum32;
    function sum32_3(a, b, c) {
      return a + b + c >>> 0;
    }
    exports2.sum32_3 = sum32_3;
    function sum32_4(a, b, c, d) {
      return a + b + c + d >>> 0;
    }
    exports2.sum32_4 = sum32_4;
    function sum32_5(a, b, c, d, e) {
      return a + b + c + d + e >>> 0;
    }
    exports2.sum32_5 = sum32_5;
    function sum64(buf, pos, ah, al) {
      var bh = buf[pos];
      var bl = buf[pos + 1];
      var lo = al + bl >>> 0;
      var hi = (lo < al ? 1 : 0) + ah + bh;
      buf[pos] = hi >>> 0;
      buf[pos + 1] = lo;
    }
    exports2.sum64 = sum64;
    function sum64_hi(ah, al, bh, bl) {
      var lo = al + bl >>> 0;
      var hi = (lo < al ? 1 : 0) + ah + bh;
      return hi >>> 0;
    }
    exports2.sum64_hi = sum64_hi;
    function sum64_lo(ah, al, bh, bl) {
      var lo = al + bl;
      return lo >>> 0;
    }
    exports2.sum64_lo = sum64_lo;
    function sum64_4_hi(ah, al, bh, bl, ch, cl, dh, dl) {
      var carry = 0;
      var lo = al;
      lo = lo + bl >>> 0;
      carry += lo < al ? 1 : 0;
      lo = lo + cl >>> 0;
      carry += lo < cl ? 1 : 0;
      lo = lo + dl >>> 0;
      carry += lo < dl ? 1 : 0;
      var hi = ah + bh + ch + dh + carry;
      return hi >>> 0;
    }
    exports2.sum64_4_hi = sum64_4_hi;
    function sum64_4_lo(ah, al, bh, bl, ch, cl, dh, dl) {
      var lo = al + bl + cl + dl;
      return lo >>> 0;
    }
    exports2.sum64_4_lo = sum64_4_lo;
    function sum64_5_hi(ah, al, bh, bl, ch, cl, dh, dl, eh, el) {
      var carry = 0;
      var lo = al;
      lo = lo + bl >>> 0;
      carry += lo < al ? 1 : 0;
      lo = lo + cl >>> 0;
      carry += lo < cl ? 1 : 0;
      lo = lo + dl >>> 0;
      carry += lo < dl ? 1 : 0;
      lo = lo + el >>> 0;
      carry += lo < el ? 1 : 0;
      var hi = ah + bh + ch + dh + eh + carry;
      return hi >>> 0;
    }
    exports2.sum64_5_hi = sum64_5_hi;
    function sum64_5_lo(ah, al, bh, bl, ch, cl, dh, dl, eh, el) {
      var lo = al + bl + cl + dl + el;
      return lo >>> 0;
    }
    exports2.sum64_5_lo = sum64_5_lo;
    function rotr64_hi(ah, al, num) {
      var r = al << 32 - num | ah >>> num;
      return r >>> 0;
    }
    exports2.rotr64_hi = rotr64_hi;
    function rotr64_lo(ah, al, num) {
      var r = ah << 32 - num | al >>> num;
      return r >>> 0;
    }
    exports2.rotr64_lo = rotr64_lo;
    function shr64_hi(ah, al, num) {
      return ah >>> num;
    }
    exports2.shr64_hi = shr64_hi;
    function shr64_lo(ah, al, num) {
      var r = ah << 32 - num | al >>> num;
      return r >>> 0;
    }
    exports2.shr64_lo = shr64_lo;
  }, { "inherits": 137, "minimalistic-assert": 141 }], 135: [function(require2, module2, exports2) {
    var hash2 = require2("hash.js");
    var utils = require2("minimalistic-crypto-utils");
    var assert = require2("minimalistic-assert");
    function HmacDRBG(options) {
      if (!(this instanceof HmacDRBG))
        return new HmacDRBG(options);
      this.hash = options.hash;
      this.predResist = !!options.predResist;
      this.outLen = this.hash.outSize;
      this.minEntropy = options.minEntropy || this.hash.hmacStrength;
      this._reseed = null;
      this.reseedInterval = null;
      this.K = null;
      this.V = null;
      var entropy = utils.toArray(options.entropy, options.entropyEnc || "hex");
      var nonce = utils.toArray(options.nonce, options.nonceEnc || "hex");
      var pers = utils.toArray(options.pers, options.persEnc || "hex");
      assert(entropy.length >= this.minEntropy / 8, "Not enough entropy. Minimum is: " + this.minEntropy + " bits");
      this._init(entropy, nonce, pers);
    }
    module2.exports = HmacDRBG;
    HmacDRBG.prototype._init = function init2(entropy, nonce, pers) {
      var seed = entropy.concat(nonce).concat(pers);
      this.K = new Array(this.outLen / 8);
      this.V = new Array(this.outLen / 8);
      for (var i2 = 0; i2 < this.V.length; i2++) {
        this.K[i2] = 0;
        this.V[i2] = 1;
      }
      this._update(seed);
      this._reseed = 1;
      this.reseedInterval = 281474976710656;
    };
    HmacDRBG.prototype._hmac = function hmac() {
      return new hash2.hmac(this.hash, this.K);
    };
    HmacDRBG.prototype._update = function update2(seed) {
      var kmac = this._hmac().update(this.V).update([0]);
      if (seed)
        kmac = kmac.update(seed);
      this.K = kmac.digest();
      this.V = this._hmac().update(this.V).digest();
      if (!seed)
        return;
      this.K = this._hmac().update(this.V).update([1]).update(seed).digest();
      this.V = this._hmac().update(this.V).digest();
    };
    HmacDRBG.prototype.reseed = function reseed(entropy, entropyEnc, add, addEnc) {
      if (typeof entropyEnc !== "string") {
        addEnc = add;
        add = entropyEnc;
        entropyEnc = null;
      }
      entropy = utils.toArray(entropy, entropyEnc);
      add = utils.toArray(add, addEnc);
      assert(entropy.length >= this.minEntropy / 8, "Not enough entropy. Minimum is: " + this.minEntropy + " bits");
      this._update(entropy.concat(add || []));
      this._reseed = 1;
    };
    HmacDRBG.prototype.generate = function generate(len2, enc, add, addEnc) {
      if (this._reseed > this.reseedInterval)
        throw new Error("Reseed is required");
      if (typeof enc !== "string") {
        addEnc = add;
        add = enc;
        enc = null;
      }
      if (add) {
        add = utils.toArray(add, addEnc || "hex");
        this._update(add);
      }
      var temp = [];
      while (temp.length < len2) {
        this.V = this._hmac().update(this.V).digest();
        temp = temp.concat(this.V);
      }
      var res = temp.slice(0, len2);
      this._update(add);
      this._reseed++;
      return utils.encode(res, enc);
    };
  }, { "hash.js": 123, "minimalistic-assert": 141, "minimalistic-crypto-utils": 142 }], 136: [function(require2, module2, exports2) {
    /*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
    exports2.read = function(buffer2, offset, isLE, mLen, nBytes) {
      var e, m;
      var eLen = nBytes * 8 - mLen - 1;
      var eMax = (1 << eLen) - 1;
      var eBias = eMax >> 1;
      var nBits = -7;
      var i2 = isLE ? nBytes - 1 : 0;
      var d = isLE ? -1 : 1;
      var s = buffer2[offset + i2];
      i2 += d;
      e = s & (1 << -nBits) - 1;
      s >>= -nBits;
      nBits += eLen;
      for (; nBits > 0; e = e * 256 + buffer2[offset + i2], i2 += d, nBits -= 8) {
      }
      m = e & (1 << -nBits) - 1;
      e >>= -nBits;
      nBits += mLen;
      for (; nBits > 0; m = m * 256 + buffer2[offset + i2], i2 += d, nBits -= 8) {
      }
      if (e === 0) {
        e = 1 - eBias;
      } else if (e === eMax) {
        return m ? NaN : (s ? -1 : 1) * Infinity;
      } else {
        m = m + Math.pow(2, mLen);
        e = e - eBias;
      }
      return (s ? -1 : 1) * m * Math.pow(2, e - mLen);
    };
    exports2.write = function(buffer2, value, offset, isLE, mLen, nBytes) {
      var e, m, c;
      var eLen = nBytes * 8 - mLen - 1;
      var eMax = (1 << eLen) - 1;
      var eBias = eMax >> 1;
      var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;
      var i2 = isLE ? 0 : nBytes - 1;
      var d = isLE ? 1 : -1;
      var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;
      value = Math.abs(value);
      if (isNaN(value) || value === Infinity) {
        m = isNaN(value) ? 1 : 0;
        e = eMax;
      } else {
        e = Math.floor(Math.log(value) / Math.LN2);
        if (value * (c = Math.pow(2, -e)) < 1) {
          e--;
          c *= 2;
        }
        if (e + eBias >= 1) {
          value += rt / c;
        } else {
          value += rt * Math.pow(2, 1 - eBias);
        }
        if (value * c >= 2) {
          e++;
          c /= 2;
        }
        if (e + eBias >= eMax) {
          m = 0;
          e = eMax;
        } else if (e + eBias >= 1) {
          m = (value * c - 1) * Math.pow(2, mLen);
          e = e + eBias;
        } else {
          m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);
          e = 0;
        }
      }
      for (; mLen >= 8; buffer2[offset + i2] = m & 255, i2 += d, m /= 256, mLen -= 8) {
      }
      e = e << mLen | m;
      eLen += mLen;
      for (; eLen > 0; buffer2[offset + i2] = e & 255, i2 += d, e /= 256, eLen -= 8) {
      }
      buffer2[offset + i2 - d] |= s * 128;
    };
  }, {}], 137: [function(require2, module2, exports2) {
    if (typeof Object.create === "function") {
      module2.exports = function inherits(ctor, superCtor) {
        if (superCtor) {
          ctor.super_ = superCtor;
          ctor.prototype = Object.create(superCtor.prototype, {
            constructor: {
              value: ctor,
              enumerable: false,
              writable: true,
              configurable: true
            }
          });
        }
      };
    } else {
      module2.exports = function inherits(ctor, superCtor) {
        if (superCtor) {
          ctor.super_ = superCtor;
          var TempCtor = function() {
          };
          TempCtor.prototype = superCtor.prototype;
          ctor.prototype = new TempCtor();
          ctor.prototype.constructor = ctor;
        }
      };
    }
  }, {}], 138: [function(require2, module2, exports2) {
    /*!
     * Determine if an object is a Buffer
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     */
    module2.exports = function(obj) {
      return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer);
    };
    function isBuffer(obj) {
      return !!obj.constructor && typeof obj.constructor.isBuffer === "function" && obj.constructor.isBuffer(obj);
    }
    function isSlowBuffer(obj) {
      return typeof obj.readFloatLE === "function" && typeof obj.slice === "function" && isBuffer(obj.slice(0, 0));
    }
  }, {}], 139: [function(require2, module2, exports2) {
    var inherits = require2("inherits");
    var HashBase = require2("hash-base");
    var Buffer2 = require2("safe-buffer").Buffer;
    var ARRAY16 = new Array(16);
    function MD5() {
      HashBase.call(this, 64);
      this._a = 1732584193;
      this._b = 4023233417;
      this._c = 2562383102;
      this._d = 271733878;
    }
    inherits(MD5, HashBase);
    MD5.prototype._update = function() {
      var M = ARRAY16;
      for (var i2 = 0; i2 < 16; ++i2)
        M[i2] = this._block.readInt32LE(i2 * 4);
      var a = this._a;
      var b = this._b;
      var c = this._c;
      var d = this._d;
      a = fnF(a, b, c, d, M[0], 3614090360, 7);
      d = fnF(d, a, b, c, M[1], 3905402710, 12);
      c = fnF(c, d, a, b, M[2], 606105819, 17);
      b = fnF(b, c, d, a, M[3], 3250441966, 22);
      a = fnF(a, b, c, d, M[4], 4118548399, 7);
      d = fnF(d, a, b, c, M[5], 1200080426, 12);
      c = fnF(c, d, a, b, M[6], 2821735955, 17);
      b = fnF(b, c, d, a, M[7], 4249261313, 22);
      a = fnF(a, b, c, d, M[8], 1770035416, 7);
      d = fnF(d, a, b, c, M[9], 2336552879, 12);
      c = fnF(c, d, a, b, M[10], 4294925233, 17);
      b = fnF(b, c, d, a, M[11], 2304563134, 22);
      a = fnF(a, b, c, d, M[12], 1804603682, 7);
      d = fnF(d, a, b, c, M[13], 4254626195, 12);
      c = fnF(c, d, a, b, M[14], 2792965006, 17);
      b = fnF(b, c, d, a, M[15], 1236535329, 22);
      a = fnG(a, b, c, d, M[1], 4129170786, 5);
      d = fnG(d, a, b, c, M[6], 3225465664, 9);
      c = fnG(c, d, a, b, M[11], 643717713, 14);
      b = fnG(b, c, d, a, M[0], 3921069994, 20);
      a = fnG(a, b, c, d, M[5], 3593408605, 5);
      d = fnG(d, a, b, c, M[10], 38016083, 9);
      c = fnG(c, d, a, b, M[15], 3634488961, 14);
      b = fnG(b, c, d, a, M[4], 3889429448, 20);
      a = fnG(a, b, c, d, M[9], 568446438, 5);
      d = fnG(d, a, b, c, M[14], 3275163606, 9);
      c = fnG(c, d, a, b, M[3], 4107603335, 14);
      b = fnG(b, c, d, a, M[8], 1163531501, 20);
      a = fnG(a, b, c, d, M[13], 2850285829, 5);
      d = fnG(d, a, b, c, M[2], 4243563512, 9);
      c = fnG(c, d, a, b, M[7], 1735328473, 14);
      b = fnG(b, c, d, a, M[12], 2368359562, 20);
      a = fnH(a, b, c, d, M[5], 4294588738, 4);
      d = fnH(d, a, b, c, M[8], 2272392833, 11);
      c = fnH(c, d, a, b, M[11], 1839030562, 16);
      b = fnH(b, c, d, a, M[14], 4259657740, 23);
      a = fnH(a, b, c, d, M[1], 2763975236, 4);
      d = fnH(d, a, b, c, M[4], 1272893353, 11);
      c = fnH(c, d, a, b, M[7], 4139469664, 16);
      b = fnH(b, c, d, a, M[10], 3200236656, 23);
      a = fnH(a, b, c, d, M[13], 681279174, 4);
      d = fnH(d, a, b, c, M[0], 3936430074, 11);
      c = fnH(c, d, a, b, M[3], 3572445317, 16);
      b = fnH(b, c, d, a, M[6], 76029189, 23);
      a = fnH(a, b, c, d, M[9], 3654602809, 4);
      d = fnH(d, a, b, c, M[12], 3873151461, 11);
      c = fnH(c, d, a, b, M[15], 530742520, 16);
      b = fnH(b, c, d, a, M[2], 3299628645, 23);
      a = fnI(a, b, c, d, M[0], 4096336452, 6);
      d = fnI(d, a, b, c, M[7], 1126891415, 10);
      c = fnI(c, d, a, b, M[14], 2878612391, 15);
      b = fnI(b, c, d, a, M[5], 4237533241, 21);
      a = fnI(a, b, c, d, M[12], 1700485571, 6);
      d = fnI(d, a, b, c, M[3], 2399980690, 10);
      c = fnI(c, d, a, b, M[10], 4293915773, 15);
      b = fnI(b, c, d, a, M[1], 2240044497, 21);
      a = fnI(a, b, c, d, M[8], 1873313359, 6);
      d = fnI(d, a, b, c, M[15], 4264355552, 10);
      c = fnI(c, d, a, b, M[6], 2734768916, 15);
      b = fnI(b, c, d, a, M[13], 1309151649, 21);
      a = fnI(a, b, c, d, M[4], 4149444226, 6);
      d = fnI(d, a, b, c, M[11], 3174756917, 10);
      c = fnI(c, d, a, b, M[2], 718787259, 15);
      b = fnI(b, c, d, a, M[9], 3951481745, 21);
      this._a = this._a + a | 0;
      this._b = this._b + b | 0;
      this._c = this._c + c | 0;
      this._d = this._d + d | 0;
    };
    MD5.prototype._digest = function() {
      this._block[this._blockOffset++] = 128;
      if (this._blockOffset > 56) {
        this._block.fill(0, this._blockOffset, 64);
        this._update();
        this._blockOffset = 0;
      }
      this._block.fill(0, this._blockOffset, 56);
      this._block.writeUInt32LE(this._length[0], 56);
      this._block.writeUInt32LE(this._length[1], 60);
      this._update();
      var buffer2 = Buffer2.allocUnsafe(16);
      buffer2.writeInt32LE(this._a, 0);
      buffer2.writeInt32LE(this._b, 4);
      buffer2.writeInt32LE(this._c, 8);
      buffer2.writeInt32LE(this._d, 12);
      return buffer2;
    };
    function rotl(x, n) {
      return x << n | x >>> 32 - n;
    }
    function fnF(a, b, c, d, m, k, s) {
      return rotl(a + (b & c | ~b & d) + m + k | 0, s) + b | 0;
    }
    function fnG(a, b, c, d, m, k, s) {
      return rotl(a + (b & d | c & ~d) + m + k | 0, s) + b | 0;
    }
    function fnH(a, b, c, d, m, k, s) {
      return rotl(a + (b ^ c ^ d) + m + k | 0, s) + b | 0;
    }
    function fnI(a, b, c, d, m, k, s) {
      return rotl(a + (c ^ (b | ~d)) + m + k | 0, s) + b | 0;
    }
    module2.exports = MD5;
  }, { "hash-base": 107, "inherits": 137, "safe-buffer": 147 }], 140: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        module2.exports = function fastRoot(values, digestFn) {
          if (!Array.isArray(values))
            throw TypeError("Expected values Array");
          if (typeof digestFn !== "function")
            throw TypeError("Expected digest Function");
          var length = values.length;
          var results = values.concat();
          while (length > 1) {
            var j = 0;
            for (var i2 = 0; i2 < length; i2 += 2, ++j) {
              var left = results[i2];
              var right = i2 + 1 === length ? left : results[i2 + 1];
              var data = Buffer2.concat([left, right]);
              results[j] = digestFn(data);
            }
            length = j;
          }
          return results[0];
        };
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "buffer": 83 }], 141: [function(require2, module2, exports2) {
    module2.exports = assert;
    function assert(val, msg) {
      if (!val)
        throw new Error(msg || "Assertion failed");
    }
    assert.equal = function assertEqual(l, r, msg) {
      if (l != r)
        throw new Error(msg || "Assertion failed: " + l + " != " + r);
    };
  }, {}], 142: [function(require2, module2, exports2) {
    var utils = exports2;
    function toArray(msg, enc) {
      if (Array.isArray(msg))
        return msg.slice();
      if (!msg)
        return [];
      var res = [];
      if (typeof msg !== "string") {
        for (var i2 = 0; i2 < msg.length; i2++)
          res[i2] = msg[i2] | 0;
        return res;
      }
      if (enc === "hex") {
        msg = msg.replace(/[^a-z0-9]+/ig, "");
        if (msg.length % 2 !== 0)
          msg = "0" + msg;
        for (var i2 = 0; i2 < msg.length; i2 += 2)
          res.push(parseInt(msg[i2] + msg[i2 + 1], 16));
      } else {
        for (var i2 = 0; i2 < msg.length; i2++) {
          var c = msg.charCodeAt(i2);
          var hi = c >> 8;
          var lo = c & 255;
          if (hi)
            res.push(hi, lo);
          else
            res.push(lo);
        }
      }
      return res;
    }
    utils.toArray = toArray;
    function zero2(word) {
      if (word.length === 1)
        return "0" + word;
      else
        return word;
    }
    utils.zero2 = zero2;
    function toHex(msg) {
      var res = "";
      for (var i2 = 0; i2 < msg.length; i2++)
        res += zero2(msg[i2].toString(16));
      return res;
    }
    utils.toHex = toHex;
    utils.encode = function encode(arr, enc) {
      if (enc === "hex")
        return toHex(arr);
      else
        return arr;
    };
  }, {}], 143: [function(require2, module2, exports2) {
    var process2 = module2.exports = {};
    var cachedSetTimeout;
    var cachedClearTimeout;
    function defaultSetTimout() {
      throw new Error("setTimeout has not been defined");
    }
    function defaultClearTimeout() {
      throw new Error("clearTimeout has not been defined");
    }
    (function() {
      try {
        if (typeof setTimeout === "function") {
          cachedSetTimeout = setTimeout;
        } else {
          cachedSetTimeout = defaultSetTimout;
        }
      } catch (e) {
        cachedSetTimeout = defaultSetTimout;
      }
      try {
        if (typeof clearTimeout === "function") {
          cachedClearTimeout = clearTimeout;
        } else {
          cachedClearTimeout = defaultClearTimeout;
        }
      } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
      }
    })();
    function runTimeout(fun) {
      if (cachedSetTimeout === setTimeout) {
        return setTimeout(fun, 0);
      }
      if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
      }
      try {
        return cachedSetTimeout(fun, 0);
      } catch (e) {
        try {
          return cachedSetTimeout.call(null, fun, 0);
        } catch (e2) {
          return cachedSetTimeout.call(this, fun, 0);
        }
      }
    }
    function runClearTimeout(marker) {
      if (cachedClearTimeout === clearTimeout) {
        return clearTimeout(marker);
      }
      if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
      }
      try {
        return cachedClearTimeout(marker);
      } catch (e) {
        try {
          return cachedClearTimeout.call(null, marker);
        } catch (e2) {
          return cachedClearTimeout.call(this, marker);
        }
      }
    }
    var queue = [];
    var draining = false;
    var currentQueue;
    var queueIndex = -1;
    function cleanUpNextTick() {
      if (!draining || !currentQueue) {
        return;
      }
      draining = false;
      if (currentQueue.length) {
        queue = currentQueue.concat(queue);
      } else {
        queueIndex = -1;
      }
      if (queue.length) {
        drainQueue();
      }
    }
    function drainQueue() {
      if (draining) {
        return;
      }
      var timeout = runTimeout(cleanUpNextTick);
      draining = true;
      var len2 = queue.length;
      while (len2) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len2) {
          if (currentQueue) {
            currentQueue[queueIndex].run();
          }
        }
        queueIndex = -1;
        len2 = queue.length;
      }
      currentQueue = null;
      draining = false;
      runClearTimeout(timeout);
    }
    process2.nextTick = function(fun) {
      var args = new Array(arguments.length - 1);
      if (arguments.length > 1) {
        for (var i2 = 1; i2 < arguments.length; i2++) {
          args[i2 - 1] = arguments[i2];
        }
      }
      queue.push(new Item(fun, args));
      if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
      }
    };
    function Item(fun, array) {
      this.fun = fun;
      this.array = array;
    }
    Item.prototype.run = function() {
      this.fun.apply(null, this.array);
    };
    process2.title = "browser";
    process2.browser = true;
    process2.env = {};
    process2.argv = [];
    process2.version = "";
    process2.versions = {};
    function noop2() {
    }
    process2.on = noop2;
    process2.addListener = noop2;
    process2.once = noop2;
    process2.off = noop2;
    process2.removeListener = noop2;
    process2.removeAllListeners = noop2;
    process2.emit = noop2;
    process2.prependListener = noop2;
    process2.prependOnceListener = noop2;
    process2.listeners = function(name) {
      return [];
    };
    process2.binding = function(name) {
      throw new Error("process.binding is not supported");
    };
    process2.cwd = function() {
      return "/";
    };
    process2.chdir = function(dir) {
      throw new Error("process.chdir is not supported");
    };
    process2.umask = function() {
      return 0;
    };
  }, {}], 144: [function(require2, module2, exports2) {
    var OPS = require2("bitcoin-ops");
    function encodingLength(i2) {
      return i2 < OPS.OP_PUSHDATA1 ? 1 : i2 <= 255 ? 2 : i2 <= 65535 ? 3 : 5;
    }
    function encode(buffer2, number, offset) {
      var size = encodingLength(number);
      if (size === 1) {
        buffer2.writeUInt8(number, offset);
      } else if (size === 2) {
        buffer2.writeUInt8(OPS.OP_PUSHDATA1, offset);
        buffer2.writeUInt8(number, offset + 1);
      } else if (size === 3) {
        buffer2.writeUInt8(OPS.OP_PUSHDATA2, offset);
        buffer2.writeUInt16LE(number, offset + 1);
      } else {
        buffer2.writeUInt8(OPS.OP_PUSHDATA4, offset);
        buffer2.writeUInt32LE(number, offset + 1);
      }
      return size;
    }
    function decode(buffer2, offset) {
      var opcode = buffer2.readUInt8(offset);
      var number, size;
      if (opcode < OPS.OP_PUSHDATA1) {
        number = opcode;
        size = 1;
      } else if (opcode === OPS.OP_PUSHDATA1) {
        if (offset + 2 > buffer2.length)
          return null;
        number = buffer2.readUInt8(offset + 1);
        size = 2;
      } else if (opcode === OPS.OP_PUSHDATA2) {
        if (offset + 3 > buffer2.length)
          return null;
        number = buffer2.readUInt16LE(offset + 1);
        size = 3;
      } else {
        if (offset + 5 > buffer2.length)
          return null;
        if (opcode !== OPS.OP_PUSHDATA4)
          throw new Error("Unexpected opcode");
        number = buffer2.readUInt32LE(offset + 1);
        size = 5;
      }
      return {
        opcode,
        number,
        size
      };
    }
    module2.exports = {
      encodingLength,
      encode,
      decode
    };
  }, { "bitcoin-ops": 31 }], 145: [function(require2, module2, exports2) {
    (function(process2, globalThis2) {
      (function() {
        var MAX_BYTES = 65536;
        var MAX_UINT32 = 4294967295;
        function oldBrowser() {
          throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11");
        }
        var Buffer2 = require2("safe-buffer").Buffer;
        var crypto = globalThis2.crypto || globalThis2.msCrypto;
        if (crypto && crypto.getRandomValues) {
          module2.exports = randomBytes;
        } else {
          module2.exports = oldBrowser;
        }
        function randomBytes(size, cb) {
          if (size > MAX_UINT32)
            throw new RangeError("requested too many random bytes");
          var bytes = Buffer2.allocUnsafe(size);
          if (size > 0) {
            if (size > MAX_BYTES) {
              for (var generated = 0; generated < size; generated += MAX_BYTES) {
                crypto.getRandomValues(bytes.slice(generated, generated + MAX_BYTES));
              }
            } else {
              crypto.getRandomValues(bytes);
            }
          }
          if (typeof cb === "function") {
            return process2.nextTick(function() {
              cb(null, bytes);
            });
          }
          return bytes;
        }
      }).call(this);
    }).call(this, require2("_process"), typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {});
  }, { "_process": 143, "safe-buffer": 147 }], 146: [function(require2, module2, exports2) {
    var Buffer2 = require2("buffer").Buffer;
    var inherits = require2("inherits");
    var HashBase = require2("hash-base");
    var ARRAY16 = new Array(16);
    var zl = [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9,
      10,
      11,
      12,
      13,
      14,
      15,
      7,
      4,
      13,
      1,
      10,
      6,
      15,
      3,
      12,
      0,
      9,
      5,
      2,
      14,
      11,
      8,
      3,
      10,
      14,
      4,
      9,
      15,
      8,
      1,
      2,
      7,
      0,
      6,
      13,
      11,
      5,
      12,
      1,
      9,
      11,
      10,
      0,
      8,
      12,
      4,
      13,
      3,
      7,
      15,
      14,
      5,
      6,
      2,
      4,
      0,
      5,
      9,
      7,
      12,
      2,
      10,
      14,
      1,
      3,
      8,
      11,
      6,
      15,
      13
    ];
    var zr = [
      5,
      14,
      7,
      0,
      9,
      2,
      11,
      4,
      13,
      6,
      15,
      8,
      1,
      10,
      3,
      12,
      6,
      11,
      3,
      7,
      0,
      13,
      5,
      10,
      14,
      15,
      8,
      12,
      4,
      9,
      1,
      2,
      15,
      5,
      1,
      3,
      7,
      14,
      6,
      9,
      11,
      8,
      12,
      2,
      10,
      0,
      4,
      13,
      8,
      6,
      4,
      1,
      3,
      11,
      15,
      0,
      5,
      12,
      2,
      13,
      9,
      7,
      10,
      14,
      12,
      15,
      10,
      4,
      1,
      5,
      8,
      7,
      6,
      2,
      13,
      14,
      0,
      3,
      9,
      11
    ];
    var sl = [
      11,
      14,
      15,
      12,
      5,
      8,
      7,
      9,
      11,
      13,
      14,
      15,
      6,
      7,
      9,
      8,
      7,
      6,
      8,
      13,
      11,
      9,
      7,
      15,
      7,
      12,
      15,
      9,
      11,
      7,
      13,
      12,
      11,
      13,
      6,
      7,
      14,
      9,
      13,
      15,
      14,
      8,
      13,
      6,
      5,
      12,
      7,
      5,
      11,
      12,
      14,
      15,
      14,
      15,
      9,
      8,
      9,
      14,
      5,
      6,
      8,
      6,
      5,
      12,
      9,
      15,
      5,
      11,
      6,
      8,
      13,
      12,
      5,
      12,
      13,
      14,
      11,
      8,
      5,
      6
    ];
    var sr = [
      8,
      9,
      9,
      11,
      13,
      15,
      15,
      5,
      7,
      7,
      8,
      11,
      14,
      14,
      12,
      6,
      9,
      13,
      15,
      7,
      12,
      8,
      9,
      11,
      7,
      7,
      12,
      7,
      6,
      15,
      13,
      11,
      9,
      7,
      15,
      11,
      8,
      6,
      6,
      14,
      12,
      13,
      5,
      14,
      13,
      13,
      7,
      5,
      15,
      5,
      8,
      11,
      14,
      14,
      6,
      14,
      6,
      9,
      12,
      9,
      12,
      5,
      15,
      8,
      8,
      5,
      12,
      9,
      12,
      5,
      14,
      6,
      8,
      13,
      6,
      5,
      15,
      13,
      11,
      11
    ];
    var hl = [0, 1518500249, 1859775393, 2400959708, 2840853838];
    var hr = [1352829926, 1548603684, 1836072691, 2053994217, 0];
    function RIPEMD160() {
      HashBase.call(this, 64);
      this._a = 1732584193;
      this._b = 4023233417;
      this._c = 2562383102;
      this._d = 271733878;
      this._e = 3285377520;
    }
    inherits(RIPEMD160, HashBase);
    RIPEMD160.prototype._update = function() {
      var words = ARRAY16;
      for (var j = 0; j < 16; ++j)
        words[j] = this._block.readInt32LE(j * 4);
      var al = this._a | 0;
      var bl = this._b | 0;
      var cl = this._c | 0;
      var dl = this._d | 0;
      var el = this._e | 0;
      var ar = this._a | 0;
      var br = this._b | 0;
      var cr = this._c | 0;
      var dr = this._d | 0;
      var er = this._e | 0;
      for (var i2 = 0; i2 < 80; i2 += 1) {
        var tl;
        var tr;
        if (i2 < 16) {
          tl = fn1(al, bl, cl, dl, el, words[zl[i2]], hl[0], sl[i2]);
          tr = fn5(ar, br, cr, dr, er, words[zr[i2]], hr[0], sr[i2]);
        } else if (i2 < 32) {
          tl = fn2(al, bl, cl, dl, el, words[zl[i2]], hl[1], sl[i2]);
          tr = fn4(ar, br, cr, dr, er, words[zr[i2]], hr[1], sr[i2]);
        } else if (i2 < 48) {
          tl = fn3(al, bl, cl, dl, el, words[zl[i2]], hl[2], sl[i2]);
          tr = fn3(ar, br, cr, dr, er, words[zr[i2]], hr[2], sr[i2]);
        } else if (i2 < 64) {
          tl = fn4(al, bl, cl, dl, el, words[zl[i2]], hl[3], sl[i2]);
          tr = fn2(ar, br, cr, dr, er, words[zr[i2]], hr[3], sr[i2]);
        } else {
          tl = fn5(al, bl, cl, dl, el, words[zl[i2]], hl[4], sl[i2]);
          tr = fn1(ar, br, cr, dr, er, words[zr[i2]], hr[4], sr[i2]);
        }
        al = el;
        el = dl;
        dl = rotl(cl, 10);
        cl = bl;
        bl = tl;
        ar = er;
        er = dr;
        dr = rotl(cr, 10);
        cr = br;
        br = tr;
      }
      var t = this._b + cl + dr | 0;
      this._b = this._c + dl + er | 0;
      this._c = this._d + el + ar | 0;
      this._d = this._e + al + br | 0;
      this._e = this._a + bl + cr | 0;
      this._a = t;
    };
    RIPEMD160.prototype._digest = function() {
      this._block[this._blockOffset++] = 128;
      if (this._blockOffset > 56) {
        this._block.fill(0, this._blockOffset, 64);
        this._update();
        this._blockOffset = 0;
      }
      this._block.fill(0, this._blockOffset, 56);
      this._block.writeUInt32LE(this._length[0], 56);
      this._block.writeUInt32LE(this._length[1], 60);
      this._update();
      var buffer2 = Buffer2.alloc ? Buffer2.alloc(20) : new Buffer2(20);
      buffer2.writeInt32LE(this._a, 0);
      buffer2.writeInt32LE(this._b, 4);
      buffer2.writeInt32LE(this._c, 8);
      buffer2.writeInt32LE(this._d, 12);
      buffer2.writeInt32LE(this._e, 16);
      return buffer2;
    };
    function rotl(x, n) {
      return x << n | x >>> 32 - n;
    }
    function fn1(a, b, c, d, e, m, k, s) {
      return rotl(a + (b ^ c ^ d) + m + k | 0, s) + e | 0;
    }
    function fn2(a, b, c, d, e, m, k, s) {
      return rotl(a + (b & c | ~b & d) + m + k | 0, s) + e | 0;
    }
    function fn3(a, b, c, d, e, m, k, s) {
      return rotl(a + ((b | ~c) ^ d) + m + k | 0, s) + e | 0;
    }
    function fn4(a, b, c, d, e, m, k, s) {
      return rotl(a + (b & d | c & ~d) + m + k | 0, s) + e | 0;
    }
    function fn5(a, b, c, d, e, m, k, s) {
      return rotl(a + (b ^ (c | ~d)) + m + k | 0, s) + e | 0;
    }
    module2.exports = RIPEMD160;
  }, { "buffer": 83, "hash-base": 107, "inherits": 137 }], 147: [function(require2, module2, exports2) {
    /*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
    var buffer2 = require2("buffer");
    var Buffer2 = buffer2.Buffer;
    function copyProps(src, dst) {
      for (var key in src) {
        dst[key] = src[key];
      }
    }
    if (Buffer2.from && Buffer2.alloc && Buffer2.allocUnsafe && Buffer2.allocUnsafeSlow) {
      module2.exports = buffer2;
    } else {
      copyProps(buffer2, exports2);
      exports2.Buffer = SafeBuffer;
    }
    function SafeBuffer(arg, encodingOrOffset, length) {
      return Buffer2(arg, encodingOrOffset, length);
    }
    SafeBuffer.prototype = Object.create(Buffer2.prototype);
    copyProps(Buffer2, SafeBuffer);
    SafeBuffer.from = function(arg, encodingOrOffset, length) {
      if (typeof arg === "number") {
        throw new TypeError("Argument must not be a number");
      }
      return Buffer2(arg, encodingOrOffset, length);
    };
    SafeBuffer.alloc = function(size, fill, encoding) {
      if (typeof size !== "number") {
        throw new TypeError("Argument must be a number");
      }
      var buf = Buffer2(size);
      if (fill !== void 0) {
        if (typeof encoding === "string") {
          buf.fill(fill, encoding);
        } else {
          buf.fill(fill);
        }
      } else {
        buf.fill(0);
      }
      return buf;
    };
    SafeBuffer.allocUnsafe = function(size) {
      if (typeof size !== "number") {
        throw new TypeError("Argument must be a number");
      }
      return Buffer2(size);
    };
    SafeBuffer.allocUnsafeSlow = function(size) {
      if (typeof size !== "number") {
        throw new TypeError("Argument must be a number");
      }
      return buffer2.SlowBuffer(size);
    };
  }, { "buffer": 83 }], 148: [function(require2, module2, exports2) {
    var Buffer2 = require2("safe-buffer").Buffer;
    function Hash(blockSize, finalSize) {
      this._block = Buffer2.alloc(blockSize);
      this._finalSize = finalSize;
      this._blockSize = blockSize;
      this._len = 0;
    }
    Hash.prototype.update = function(data, enc) {
      if (typeof data === "string") {
        enc = enc || "utf8";
        data = Buffer2.from(data, enc);
      }
      var block = this._block;
      var blockSize = this._blockSize;
      var length = data.length;
      var accum = this._len;
      for (var offset = 0; offset < length; ) {
        var assigned = accum % blockSize;
        var remainder = Math.min(length - offset, blockSize - assigned);
        for (var i2 = 0; i2 < remainder; i2++) {
          block[assigned + i2] = data[offset + i2];
        }
        accum += remainder;
        offset += remainder;
        if (accum % blockSize === 0) {
          this._update(block);
        }
      }
      this._len += length;
      return this;
    };
    Hash.prototype.digest = function(enc) {
      var rem = this._len % this._blockSize;
      this._block[rem] = 128;
      this._block.fill(0, rem + 1);
      if (rem >= this._finalSize) {
        this._update(this._block);
        this._block.fill(0);
      }
      var bits = this._len * 8;
      if (bits <= 4294967295) {
        this._block.writeUInt32BE(bits, this._blockSize - 4);
      } else {
        var lowBits = (bits & 4294967295) >>> 0;
        var highBits = (bits - lowBits) / 4294967296;
        this._block.writeUInt32BE(highBits, this._blockSize - 8);
        this._block.writeUInt32BE(lowBits, this._blockSize - 4);
      }
      this._update(this._block);
      var hash2 = this._hash();
      return enc ? hash2.toString(enc) : hash2;
    };
    Hash.prototype._update = function() {
      throw new Error("_update must be implemented by subclass");
    };
    module2.exports = Hash;
  }, { "safe-buffer": 147 }], 149: [function(require2, module2, exports2) {
    var exports2 = module2.exports = function SHA(algorithm) {
      algorithm = algorithm.toLowerCase();
      var Algorithm = exports2[algorithm];
      if (!Algorithm)
        throw new Error(algorithm + " is not supported (we accept pull requests)");
      return new Algorithm();
    };
    exports2.sha = require2("./sha");
    exports2.sha1 = require2("./sha1");
    exports2.sha224 = require2("./sha224");
    exports2.sha256 = require2("./sha256");
    exports2.sha384 = require2("./sha384");
    exports2.sha512 = require2("./sha512");
  }, { "./sha": 150, "./sha1": 151, "./sha224": 152, "./sha256": 153, "./sha384": 154, "./sha512": 155 }], 150: [function(require2, module2, exports2) {
    var inherits = require2("inherits");
    var Hash = require2("./hash");
    var Buffer2 = require2("safe-buffer").Buffer;
    var K = [
      1518500249,
      1859775393,
      2400959708 | 0,
      3395469782 | 0
    ];
    var W = new Array(80);
    function Sha() {
      this.init();
      this._w = W;
      Hash.call(this, 64, 56);
    }
    inherits(Sha, Hash);
    Sha.prototype.init = function() {
      this._a = 1732584193;
      this._b = 4023233417;
      this._c = 2562383102;
      this._d = 271733878;
      this._e = 3285377520;
      return this;
    };
    function rotl5(num) {
      return num << 5 | num >>> 27;
    }
    function rotl30(num) {
      return num << 30 | num >>> 2;
    }
    function ft(s, b, c, d) {
      if (s === 0)
        return b & c | ~b & d;
      if (s === 2)
        return b & c | b & d | c & d;
      return b ^ c ^ d;
    }
    Sha.prototype._update = function(M) {
      var W2 = this._w;
      var a = this._a | 0;
      var b = this._b | 0;
      var c = this._c | 0;
      var d = this._d | 0;
      var e = this._e | 0;
      for (var i2 = 0; i2 < 16; ++i2)
        W2[i2] = M.readInt32BE(i2 * 4);
      for (; i2 < 80; ++i2)
        W2[i2] = W2[i2 - 3] ^ W2[i2 - 8] ^ W2[i2 - 14] ^ W2[i2 - 16];
      for (var j = 0; j < 80; ++j) {
        var s = ~~(j / 20);
        var t = rotl5(a) + ft(s, b, c, d) + e + W2[j] + K[s] | 0;
        e = d;
        d = c;
        c = rotl30(b);
        b = a;
        a = t;
      }
      this._a = a + this._a | 0;
      this._b = b + this._b | 0;
      this._c = c + this._c | 0;
      this._d = d + this._d | 0;
      this._e = e + this._e | 0;
    };
    Sha.prototype._hash = function() {
      var H = Buffer2.allocUnsafe(20);
      H.writeInt32BE(this._a | 0, 0);
      H.writeInt32BE(this._b | 0, 4);
      H.writeInt32BE(this._c | 0, 8);
      H.writeInt32BE(this._d | 0, 12);
      H.writeInt32BE(this._e | 0, 16);
      return H;
    };
    module2.exports = Sha;
  }, { "./hash": 148, "inherits": 137, "safe-buffer": 147 }], 151: [function(require2, module2, exports2) {
    var inherits = require2("inherits");
    var Hash = require2("./hash");
    var Buffer2 = require2("safe-buffer").Buffer;
    var K = [
      1518500249,
      1859775393,
      2400959708 | 0,
      3395469782 | 0
    ];
    var W = new Array(80);
    function Sha1() {
      this.init();
      this._w = W;
      Hash.call(this, 64, 56);
    }
    inherits(Sha1, Hash);
    Sha1.prototype.init = function() {
      this._a = 1732584193;
      this._b = 4023233417;
      this._c = 2562383102;
      this._d = 271733878;
      this._e = 3285377520;
      return this;
    };
    function rotl1(num) {
      return num << 1 | num >>> 31;
    }
    function rotl5(num) {
      return num << 5 | num >>> 27;
    }
    function rotl30(num) {
      return num << 30 | num >>> 2;
    }
    function ft(s, b, c, d) {
      if (s === 0)
        return b & c | ~b & d;
      if (s === 2)
        return b & c | b & d | c & d;
      return b ^ c ^ d;
    }
    Sha1.prototype._update = function(M) {
      var W2 = this._w;
      var a = this._a | 0;
      var b = this._b | 0;
      var c = this._c | 0;
      var d = this._d | 0;
      var e = this._e | 0;
      for (var i2 = 0; i2 < 16; ++i2)
        W2[i2] = M.readInt32BE(i2 * 4);
      for (; i2 < 80; ++i2)
        W2[i2] = rotl1(W2[i2 - 3] ^ W2[i2 - 8] ^ W2[i2 - 14] ^ W2[i2 - 16]);
      for (var j = 0; j < 80; ++j) {
        var s = ~~(j / 20);
        var t = rotl5(a) + ft(s, b, c, d) + e + W2[j] + K[s] | 0;
        e = d;
        d = c;
        c = rotl30(b);
        b = a;
        a = t;
      }
      this._a = a + this._a | 0;
      this._b = b + this._b | 0;
      this._c = c + this._c | 0;
      this._d = d + this._d | 0;
      this._e = e + this._e | 0;
    };
    Sha1.prototype._hash = function() {
      var H = Buffer2.allocUnsafe(20);
      H.writeInt32BE(this._a | 0, 0);
      H.writeInt32BE(this._b | 0, 4);
      H.writeInt32BE(this._c | 0, 8);
      H.writeInt32BE(this._d | 0, 12);
      H.writeInt32BE(this._e | 0, 16);
      return H;
    };
    module2.exports = Sha1;
  }, { "./hash": 148, "inherits": 137, "safe-buffer": 147 }], 152: [function(require2, module2, exports2) {
    var inherits = require2("inherits");
    var Sha256 = require2("./sha256");
    var Hash = require2("./hash");
    var Buffer2 = require2("safe-buffer").Buffer;
    var W = new Array(64);
    function Sha224() {
      this.init();
      this._w = W;
      Hash.call(this, 64, 56);
    }
    inherits(Sha224, Sha256);
    Sha224.prototype.init = function() {
      this._a = 3238371032;
      this._b = 914150663;
      this._c = 812702999;
      this._d = 4144912697;
      this._e = 4290775857;
      this._f = 1750603025;
      this._g = 1694076839;
      this._h = 3204075428;
      return this;
    };
    Sha224.prototype._hash = function() {
      var H = Buffer2.allocUnsafe(28);
      H.writeInt32BE(this._a, 0);
      H.writeInt32BE(this._b, 4);
      H.writeInt32BE(this._c, 8);
      H.writeInt32BE(this._d, 12);
      H.writeInt32BE(this._e, 16);
      H.writeInt32BE(this._f, 20);
      H.writeInt32BE(this._g, 24);
      return H;
    };
    module2.exports = Sha224;
  }, { "./hash": 148, "./sha256": 153, "inherits": 137, "safe-buffer": 147 }], 153: [function(require2, module2, exports2) {
    var inherits = require2("inherits");
    var Hash = require2("./hash");
    var Buffer2 = require2("safe-buffer").Buffer;
    var K = [
      1116352408,
      1899447441,
      3049323471,
      3921009573,
      961987163,
      1508970993,
      2453635748,
      2870763221,
      3624381080,
      310598401,
      607225278,
      1426881987,
      1925078388,
      2162078206,
      2614888103,
      3248222580,
      3835390401,
      4022224774,
      264347078,
      604807628,
      770255983,
      1249150122,
      1555081692,
      1996064986,
      2554220882,
      2821834349,
      2952996808,
      3210313671,
      3336571891,
      3584528711,
      113926993,
      338241895,
      666307205,
      773529912,
      1294757372,
      1396182291,
      1695183700,
      1986661051,
      2177026350,
      2456956037,
      2730485921,
      2820302411,
      3259730800,
      3345764771,
      3516065817,
      3600352804,
      4094571909,
      275423344,
      430227734,
      506948616,
      659060556,
      883997877,
      958139571,
      1322822218,
      1537002063,
      1747873779,
      1955562222,
      2024104815,
      2227730452,
      2361852424,
      2428436474,
      2756734187,
      3204031479,
      3329325298
    ];
    var W = new Array(64);
    function Sha256() {
      this.init();
      this._w = W;
      Hash.call(this, 64, 56);
    }
    inherits(Sha256, Hash);
    Sha256.prototype.init = function() {
      this._a = 1779033703;
      this._b = 3144134277;
      this._c = 1013904242;
      this._d = 2773480762;
      this._e = 1359893119;
      this._f = 2600822924;
      this._g = 528734635;
      this._h = 1541459225;
      return this;
    };
    function ch(x, y, z) {
      return z ^ x & (y ^ z);
    }
    function maj(x, y, z) {
      return x & y | z & (x | y);
    }
    function sigma0(x) {
      return (x >>> 2 | x << 30) ^ (x >>> 13 | x << 19) ^ (x >>> 22 | x << 10);
    }
    function sigma1(x) {
      return (x >>> 6 | x << 26) ^ (x >>> 11 | x << 21) ^ (x >>> 25 | x << 7);
    }
    function gamma0(x) {
      return (x >>> 7 | x << 25) ^ (x >>> 18 | x << 14) ^ x >>> 3;
    }
    function gamma1(x) {
      return (x >>> 17 | x << 15) ^ (x >>> 19 | x << 13) ^ x >>> 10;
    }
    Sha256.prototype._update = function(M) {
      var W2 = this._w;
      var a = this._a | 0;
      var b = this._b | 0;
      var c = this._c | 0;
      var d = this._d | 0;
      var e = this._e | 0;
      var f = this._f | 0;
      var g = this._g | 0;
      var h = this._h | 0;
      for (var i2 = 0; i2 < 16; ++i2)
        W2[i2] = M.readInt32BE(i2 * 4);
      for (; i2 < 64; ++i2)
        W2[i2] = gamma1(W2[i2 - 2]) + W2[i2 - 7] + gamma0(W2[i2 - 15]) + W2[i2 - 16] | 0;
      for (var j = 0; j < 64; ++j) {
        var T1 = h + sigma1(e) + ch(e, f, g) + K[j] + W2[j] | 0;
        var T2 = sigma0(a) + maj(a, b, c) | 0;
        h = g;
        g = f;
        f = e;
        e = d + T1 | 0;
        d = c;
        c = b;
        b = a;
        a = T1 + T2 | 0;
      }
      this._a = a + this._a | 0;
      this._b = b + this._b | 0;
      this._c = c + this._c | 0;
      this._d = d + this._d | 0;
      this._e = e + this._e | 0;
      this._f = f + this._f | 0;
      this._g = g + this._g | 0;
      this._h = h + this._h | 0;
    };
    Sha256.prototype._hash = function() {
      var H = Buffer2.allocUnsafe(32);
      H.writeInt32BE(this._a, 0);
      H.writeInt32BE(this._b, 4);
      H.writeInt32BE(this._c, 8);
      H.writeInt32BE(this._d, 12);
      H.writeInt32BE(this._e, 16);
      H.writeInt32BE(this._f, 20);
      H.writeInt32BE(this._g, 24);
      H.writeInt32BE(this._h, 28);
      return H;
    };
    module2.exports = Sha256;
  }, { "./hash": 148, "inherits": 137, "safe-buffer": 147 }], 154: [function(require2, module2, exports2) {
    var inherits = require2("inherits");
    var SHA512 = require2("./sha512");
    var Hash = require2("./hash");
    var Buffer2 = require2("safe-buffer").Buffer;
    var W = new Array(160);
    function Sha384() {
      this.init();
      this._w = W;
      Hash.call(this, 128, 112);
    }
    inherits(Sha384, SHA512);
    Sha384.prototype.init = function() {
      this._ah = 3418070365;
      this._bh = 1654270250;
      this._ch = 2438529370;
      this._dh = 355462360;
      this._eh = 1731405415;
      this._fh = 2394180231;
      this._gh = 3675008525;
      this._hh = 1203062813;
      this._al = 3238371032;
      this._bl = 914150663;
      this._cl = 812702999;
      this._dl = 4144912697;
      this._el = 4290775857;
      this._fl = 1750603025;
      this._gl = 1694076839;
      this._hl = 3204075428;
      return this;
    };
    Sha384.prototype._hash = function() {
      var H = Buffer2.allocUnsafe(48);
      function writeInt64BE(h, l, offset) {
        H.writeInt32BE(h, offset);
        H.writeInt32BE(l, offset + 4);
      }
      writeInt64BE(this._ah, this._al, 0);
      writeInt64BE(this._bh, this._bl, 8);
      writeInt64BE(this._ch, this._cl, 16);
      writeInt64BE(this._dh, this._dl, 24);
      writeInt64BE(this._eh, this._el, 32);
      writeInt64BE(this._fh, this._fl, 40);
      return H;
    };
    module2.exports = Sha384;
  }, { "./hash": 148, "./sha512": 155, "inherits": 137, "safe-buffer": 147 }], 155: [function(require2, module2, exports2) {
    var inherits = require2("inherits");
    var Hash = require2("./hash");
    var Buffer2 = require2("safe-buffer").Buffer;
    var K = [
      1116352408,
      3609767458,
      1899447441,
      602891725,
      3049323471,
      3964484399,
      3921009573,
      2173295548,
      961987163,
      4081628472,
      1508970993,
      3053834265,
      2453635748,
      2937671579,
      2870763221,
      3664609560,
      3624381080,
      2734883394,
      310598401,
      1164996542,
      607225278,
      1323610764,
      1426881987,
      3590304994,
      1925078388,
      4068182383,
      2162078206,
      991336113,
      2614888103,
      633803317,
      3248222580,
      3479774868,
      3835390401,
      2666613458,
      4022224774,
      944711139,
      264347078,
      2341262773,
      604807628,
      2007800933,
      770255983,
      1495990901,
      1249150122,
      1856431235,
      1555081692,
      3175218132,
      1996064986,
      2198950837,
      2554220882,
      3999719339,
      2821834349,
      766784016,
      2952996808,
      2566594879,
      3210313671,
      3203337956,
      3336571891,
      1034457026,
      3584528711,
      2466948901,
      113926993,
      3758326383,
      338241895,
      168717936,
      666307205,
      1188179964,
      773529912,
      1546045734,
      1294757372,
      1522805485,
      1396182291,
      2643833823,
      1695183700,
      2343527390,
      1986661051,
      1014477480,
      2177026350,
      1206759142,
      2456956037,
      344077627,
      2730485921,
      1290863460,
      2820302411,
      3158454273,
      3259730800,
      3505952657,
      3345764771,
      106217008,
      3516065817,
      3606008344,
      3600352804,
      1432725776,
      4094571909,
      1467031594,
      275423344,
      851169720,
      430227734,
      3100823752,
      506948616,
      1363258195,
      659060556,
      3750685593,
      883997877,
      3785050280,
      958139571,
      3318307427,
      1322822218,
      3812723403,
      1537002063,
      2003034995,
      1747873779,
      3602036899,
      1955562222,
      1575990012,
      2024104815,
      1125592928,
      2227730452,
      2716904306,
      2361852424,
      442776044,
      2428436474,
      593698344,
      2756734187,
      3733110249,
      3204031479,
      2999351573,
      3329325298,
      3815920427,
      3391569614,
      3928383900,
      3515267271,
      566280711,
      3940187606,
      3454069534,
      4118630271,
      4000239992,
      116418474,
      1914138554,
      174292421,
      2731055270,
      289380356,
      3203993006,
      460393269,
      320620315,
      685471733,
      587496836,
      852142971,
      1086792851,
      1017036298,
      365543100,
      1126000580,
      2618297676,
      1288033470,
      3409855158,
      1501505948,
      4234509866,
      1607167915,
      987167468,
      1816402316,
      1246189591
    ];
    var W = new Array(160);
    function Sha512() {
      this.init();
      this._w = W;
      Hash.call(this, 128, 112);
    }
    inherits(Sha512, Hash);
    Sha512.prototype.init = function() {
      this._ah = 1779033703;
      this._bh = 3144134277;
      this._ch = 1013904242;
      this._dh = 2773480762;
      this._eh = 1359893119;
      this._fh = 2600822924;
      this._gh = 528734635;
      this._hh = 1541459225;
      this._al = 4089235720;
      this._bl = 2227873595;
      this._cl = 4271175723;
      this._dl = 1595750129;
      this._el = 2917565137;
      this._fl = 725511199;
      this._gl = 4215389547;
      this._hl = 327033209;
      return this;
    };
    function Ch(x, y, z) {
      return z ^ x & (y ^ z);
    }
    function maj(x, y, z) {
      return x & y | z & (x | y);
    }
    function sigma0(x, xl) {
      return (x >>> 28 | xl << 4) ^ (xl >>> 2 | x << 30) ^ (xl >>> 7 | x << 25);
    }
    function sigma1(x, xl) {
      return (x >>> 14 | xl << 18) ^ (x >>> 18 | xl << 14) ^ (xl >>> 9 | x << 23);
    }
    function Gamma0(x, xl) {
      return (x >>> 1 | xl << 31) ^ (x >>> 8 | xl << 24) ^ x >>> 7;
    }
    function Gamma0l(x, xl) {
      return (x >>> 1 | xl << 31) ^ (x >>> 8 | xl << 24) ^ (x >>> 7 | xl << 25);
    }
    function Gamma1(x, xl) {
      return (x >>> 19 | xl << 13) ^ (xl >>> 29 | x << 3) ^ x >>> 6;
    }
    function Gamma1l(x, xl) {
      return (x >>> 19 | xl << 13) ^ (xl >>> 29 | x << 3) ^ (x >>> 6 | xl << 26);
    }
    function getCarry(a, b) {
      return a >>> 0 < b >>> 0 ? 1 : 0;
    }
    Sha512.prototype._update = function(M) {
      var W2 = this._w;
      var ah = this._ah | 0;
      var bh = this._bh | 0;
      var ch = this._ch | 0;
      var dh = this._dh | 0;
      var eh = this._eh | 0;
      var fh = this._fh | 0;
      var gh = this._gh | 0;
      var hh = this._hh | 0;
      var al = this._al | 0;
      var bl = this._bl | 0;
      var cl = this._cl | 0;
      var dl = this._dl | 0;
      var el = this._el | 0;
      var fl = this._fl | 0;
      var gl = this._gl | 0;
      var hl = this._hl | 0;
      for (var i2 = 0; i2 < 32; i2 += 2) {
        W2[i2] = M.readInt32BE(i2 * 4);
        W2[i2 + 1] = M.readInt32BE(i2 * 4 + 4);
      }
      for (; i2 < 160; i2 += 2) {
        var xh = W2[i2 - 15 * 2];
        var xl = W2[i2 - 15 * 2 + 1];
        var gamma0 = Gamma0(xh, xl);
        var gamma0l = Gamma0l(xl, xh);
        xh = W2[i2 - 2 * 2];
        xl = W2[i2 - 2 * 2 + 1];
        var gamma1 = Gamma1(xh, xl);
        var gamma1l = Gamma1l(xl, xh);
        var Wi7h = W2[i2 - 7 * 2];
        var Wi7l = W2[i2 - 7 * 2 + 1];
        var Wi16h = W2[i2 - 16 * 2];
        var Wi16l = W2[i2 - 16 * 2 + 1];
        var Wil = gamma0l + Wi7l | 0;
        var Wih = gamma0 + Wi7h + getCarry(Wil, gamma0l) | 0;
        Wil = Wil + gamma1l | 0;
        Wih = Wih + gamma1 + getCarry(Wil, gamma1l) | 0;
        Wil = Wil + Wi16l | 0;
        Wih = Wih + Wi16h + getCarry(Wil, Wi16l) | 0;
        W2[i2] = Wih;
        W2[i2 + 1] = Wil;
      }
      for (var j = 0; j < 160; j += 2) {
        Wih = W2[j];
        Wil = W2[j + 1];
        var majh = maj(ah, bh, ch);
        var majl = maj(al, bl, cl);
        var sigma0h = sigma0(ah, al);
        var sigma0l = sigma0(al, ah);
        var sigma1h = sigma1(eh, el);
        var sigma1l = sigma1(el, eh);
        var Kih = K[j];
        var Kil = K[j + 1];
        var chh = Ch(eh, fh, gh);
        var chl = Ch(el, fl, gl);
        var t1l = hl + sigma1l | 0;
        var t1h = hh + sigma1h + getCarry(t1l, hl) | 0;
        t1l = t1l + chl | 0;
        t1h = t1h + chh + getCarry(t1l, chl) | 0;
        t1l = t1l + Kil | 0;
        t1h = t1h + Kih + getCarry(t1l, Kil) | 0;
        t1l = t1l + Wil | 0;
        t1h = t1h + Wih + getCarry(t1l, Wil) | 0;
        var t2l = sigma0l + majl | 0;
        var t2h = sigma0h + majh + getCarry(t2l, sigma0l) | 0;
        hh = gh;
        hl = gl;
        gh = fh;
        gl = fl;
        fh = eh;
        fl = el;
        el = dl + t1l | 0;
        eh = dh + t1h + getCarry(el, dl) | 0;
        dh = ch;
        dl = cl;
        ch = bh;
        cl = bl;
        bh = ah;
        bl = al;
        al = t1l + t2l | 0;
        ah = t1h + t2h + getCarry(al, t1l) | 0;
      }
      this._al = this._al + al | 0;
      this._bl = this._bl + bl | 0;
      this._cl = this._cl + cl | 0;
      this._dl = this._dl + dl | 0;
      this._el = this._el + el | 0;
      this._fl = this._fl + fl | 0;
      this._gl = this._gl + gl | 0;
      this._hl = this._hl + hl | 0;
      this._ah = this._ah + ah + getCarry(this._al, al) | 0;
      this._bh = this._bh + bh + getCarry(this._bl, bl) | 0;
      this._ch = this._ch + ch + getCarry(this._cl, cl) | 0;
      this._dh = this._dh + dh + getCarry(this._dl, dl) | 0;
      this._eh = this._eh + eh + getCarry(this._el, el) | 0;
      this._fh = this._fh + fh + getCarry(this._fl, fl) | 0;
      this._gh = this._gh + gh + getCarry(this._gl, gl) | 0;
      this._hh = this._hh + hh + getCarry(this._hl, hl) | 0;
    };
    Sha512.prototype._hash = function() {
      var H = Buffer2.allocUnsafe(64);
      function writeInt64BE(h, l, offset) {
        H.writeInt32BE(h, offset);
        H.writeInt32BE(l, offset + 4);
      }
      writeInt64BE(this._ah, this._al, 0);
      writeInt64BE(this._bh, this._bl, 8);
      writeInt64BE(this._ch, this._cl, 16);
      writeInt64BE(this._dh, this._dl, 24);
      writeInt64BE(this._eh, this._el, 32);
      writeInt64BE(this._fh, this._fl, 40);
      writeInt64BE(this._gh, this._gl, 48);
      writeInt64BE(this._hh, this._hl, 56);
      return H;
    };
    module2.exports = Sha512;
  }, { "./hash": 148, "inherits": 137, "safe-buffer": 147 }], 156: [function(require2, module2, exports2) {
    module2.exports = Stream2;
    var EE = require2("events").EventEmitter;
    var inherits = require2("inherits");
    inherits(Stream2, EE);
    Stream2.Readable = require2("readable-stream/lib/_stream_readable.js");
    Stream2.Writable = require2("readable-stream/lib/_stream_writable.js");
    Stream2.Duplex = require2("readable-stream/lib/_stream_duplex.js");
    Stream2.Transform = require2("readable-stream/lib/_stream_transform.js");
    Stream2.PassThrough = require2("readable-stream/lib/_stream_passthrough.js");
    Stream2.finished = require2("readable-stream/lib/internal/streams/end-of-stream.js");
    Stream2.pipeline = require2("readable-stream/lib/internal/streams/pipeline.js");
    Stream2.Stream = Stream2;
    function Stream2() {
      EE.call(this);
    }
    Stream2.prototype.pipe = function(dest, options) {
      var source = this;
      function ondata(chunk) {
        if (dest.writable) {
          if (dest.write(chunk) === false && source.pause) {
            source.pause();
          }
        }
      }
      source.on("data", ondata);
      function ondrain() {
        if (source.readable && source.resume) {
          source.resume();
        }
      }
      dest.on("drain", ondrain);
      if (!dest._isStdio && (!options || options.end !== false)) {
        source.on("end", onend2);
        source.on("close", onclose);
      }
      var didOnEnd = false;
      function onend2() {
        if (didOnEnd)
          return;
        didOnEnd = true;
        dest.end();
      }
      function onclose() {
        if (didOnEnd)
          return;
        didOnEnd = true;
        if (typeof dest.destroy === "function")
          dest.destroy();
      }
      function onerror(er) {
        cleanup();
        if (EE.listenerCount(this, "error") === 0) {
          throw er;
        }
      }
      source.on("error", onerror);
      dest.on("error", onerror);
      function cleanup() {
        source.removeListener("data", ondata);
        dest.removeListener("drain", ondrain);
        source.removeListener("end", onend2);
        source.removeListener("close", onclose);
        source.removeListener("error", onerror);
        dest.removeListener("error", onerror);
        source.removeListener("end", cleanup);
        source.removeListener("close", cleanup);
        dest.removeListener("close", cleanup);
      }
      source.on("end", cleanup);
      source.on("close", cleanup);
      dest.on("close", cleanup);
      dest.emit("pipe", source);
      return dest;
    };
  }, { "events": 106, "inherits": 137, "readable-stream/lib/_stream_duplex.js": 158, "readable-stream/lib/_stream_passthrough.js": 159, "readable-stream/lib/_stream_readable.js": 160, "readable-stream/lib/_stream_transform.js": 161, "readable-stream/lib/_stream_writable.js": 162, "readable-stream/lib/internal/streams/end-of-stream.js": 166, "readable-stream/lib/internal/streams/pipeline.js": 168 }], 157: [function(require2, module2, exports2) {
    arguments[4][108][0].apply(exports2, arguments);
  }, { "dup": 108 }], 158: [function(require2, module2, exports2) {
    arguments[4][109][0].apply(exports2, arguments);
  }, { "./_stream_readable": 160, "./_stream_writable": 162, "_process": 143, "dup": 109, "inherits": 137 }], 159: [function(require2, module2, exports2) {
    arguments[4][110][0].apply(exports2, arguments);
  }, { "./_stream_transform": 161, "dup": 110, "inherits": 137 }], 160: [function(require2, module2, exports2) {
    arguments[4][111][0].apply(exports2, arguments);
  }, { "../errors": 157, "./_stream_duplex": 158, "./internal/streams/async_iterator": 163, "./internal/streams/buffer_list": 164, "./internal/streams/destroy": 165, "./internal/streams/from": 167, "./internal/streams/state": 169, "./internal/streams/stream": 170, "_process": 143, "buffer": 83, "dup": 111, "events": 106, "inherits": 137, "string_decoder/": 171, "util": 79 }], 161: [function(require2, module2, exports2) {
    arguments[4][112][0].apply(exports2, arguments);
  }, { "../errors": 157, "./_stream_duplex": 158, "dup": 112, "inherits": 137 }], 162: [function(require2, module2, exports2) {
    arguments[4][113][0].apply(exports2, arguments);
  }, { "../errors": 157, "./_stream_duplex": 158, "./internal/streams/destroy": 165, "./internal/streams/state": 169, "./internal/streams/stream": 170, "_process": 143, "buffer": 83, "dup": 113, "inherits": 137, "util-deprecate": 179 }], 163: [function(require2, module2, exports2) {
    arguments[4][114][0].apply(exports2, arguments);
  }, { "./end-of-stream": 166, "_process": 143, "dup": 114 }], 164: [function(require2, module2, exports2) {
    arguments[4][115][0].apply(exports2, arguments);
  }, { "buffer": 83, "dup": 115, "util": 79 }], 165: [function(require2, module2, exports2) {
    arguments[4][116][0].apply(exports2, arguments);
  }, { "_process": 143, "dup": 116 }], 166: [function(require2, module2, exports2) {
    arguments[4][117][0].apply(exports2, arguments);
  }, { "../../../errors": 157, "dup": 117 }], 167: [function(require2, module2, exports2) {
    arguments[4][118][0].apply(exports2, arguments);
  }, { "dup": 118 }], 168: [function(require2, module2, exports2) {
    arguments[4][119][0].apply(exports2, arguments);
  }, { "../../../errors": 157, "./end-of-stream": 166, "dup": 119 }], 169: [function(require2, module2, exports2) {
    arguments[4][120][0].apply(exports2, arguments);
  }, { "../../../errors": 157, "dup": 120 }], 170: [function(require2, module2, exports2) {
    arguments[4][121][0].apply(exports2, arguments);
  }, { "dup": 121, "events": 106 }], 171: [function(require2, module2, exports2) {
    var Buffer2 = require2("safe-buffer").Buffer;
    var isEncoding2 = Buffer2.isEncoding || function(encoding) {
      encoding = "" + encoding;
      switch (encoding && encoding.toLowerCase()) {
        case "hex":
        case "utf8":
        case "utf-8":
        case "ascii":
        case "binary":
        case "base64":
        case "ucs2":
        case "ucs-2":
        case "utf16le":
        case "utf-16le":
        case "raw":
          return true;
        default:
          return false;
      }
    };
    function _normalizeEncoding2(enc) {
      if (!enc)
        return "utf8";
      var retried;
      while (true) {
        switch (enc) {
          case "utf8":
          case "utf-8":
            return "utf8";
          case "ucs2":
          case "ucs-2":
          case "utf16le":
          case "utf-16le":
            return "utf16le";
          case "latin1":
          case "binary":
            return "latin1";
          case "base64":
          case "ascii":
          case "hex":
            return enc;
          default:
            if (retried)
              return;
            enc = ("" + enc).toLowerCase();
            retried = true;
        }
      }
    }
    function normalizeEncoding2(enc) {
      var nenc = _normalizeEncoding2(enc);
      if (typeof nenc !== "string" && (Buffer2.isEncoding === isEncoding2 || !isEncoding2(enc)))
        throw new Error("Unknown encoding: " + enc);
      return nenc || enc;
    }
    exports2.StringDecoder = StringDecoder2;
    function StringDecoder2(encoding) {
      this.encoding = normalizeEncoding2(encoding);
      var nb;
      switch (this.encoding) {
        case "utf16le":
          this.text = utf16Text2;
          this.end = utf16End2;
          nb = 4;
          break;
        case "utf8":
          this.fillLast = utf8FillLast2;
          nb = 4;
          break;
        case "base64":
          this.text = base64Text2;
          this.end = base64End2;
          nb = 3;
          break;
        default:
          this.write = simpleWrite2;
          this.end = simpleEnd2;
          return;
      }
      this.lastNeed = 0;
      this.lastTotal = 0;
      this.lastChar = Buffer2.allocUnsafe(nb);
    }
    StringDecoder2.prototype.write = function(buf) {
      if (buf.length === 0)
        return "";
      var r;
      var i2;
      if (this.lastNeed) {
        r = this.fillLast(buf);
        if (r === void 0)
          return "";
        i2 = this.lastNeed;
        this.lastNeed = 0;
      } else {
        i2 = 0;
      }
      if (i2 < buf.length)
        return r ? r + this.text(buf, i2) : this.text(buf, i2);
      return r || "";
    };
    StringDecoder2.prototype.end = utf8End2;
    StringDecoder2.prototype.text = utf8Text2;
    StringDecoder2.prototype.fillLast = function(buf) {
      if (this.lastNeed <= buf.length) {
        buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);
        return this.lastChar.toString(this.encoding, 0, this.lastTotal);
      }
      buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);
      this.lastNeed -= buf.length;
    };
    function utf8CheckByte2(byte) {
      if (byte <= 127)
        return 0;
      else if (byte >> 5 === 6)
        return 2;
      else if (byte >> 4 === 14)
        return 3;
      else if (byte >> 3 === 30)
        return 4;
      return byte >> 6 === 2 ? -1 : -2;
    }
    function utf8CheckIncomplete2(self2, buf, i2) {
      var j = buf.length - 1;
      if (j < i2)
        return 0;
      var nb = utf8CheckByte2(buf[j]);
      if (nb >= 0) {
        if (nb > 0)
          self2.lastNeed = nb - 1;
        return nb;
      }
      if (--j < i2 || nb === -2)
        return 0;
      nb = utf8CheckByte2(buf[j]);
      if (nb >= 0) {
        if (nb > 0)
          self2.lastNeed = nb - 2;
        return nb;
      }
      if (--j < i2 || nb === -2)
        return 0;
      nb = utf8CheckByte2(buf[j]);
      if (nb >= 0) {
        if (nb > 0) {
          if (nb === 2)
            nb = 0;
          else
            self2.lastNeed = nb - 3;
        }
        return nb;
      }
      return 0;
    }
    function utf8CheckExtraBytes2(self2, buf, p2) {
      if ((buf[0] & 192) !== 128) {
        self2.lastNeed = 0;
        return "\uFFFD";
      }
      if (self2.lastNeed > 1 && buf.length > 1) {
        if ((buf[1] & 192) !== 128) {
          self2.lastNeed = 1;
          return "\uFFFD";
        }
        if (self2.lastNeed > 2 && buf.length > 2) {
          if ((buf[2] & 192) !== 128) {
            self2.lastNeed = 2;
            return "\uFFFD";
          }
        }
      }
    }
    function utf8FillLast2(buf) {
      var p2 = this.lastTotal - this.lastNeed;
      var r = utf8CheckExtraBytes2(this, buf);
      if (r !== void 0)
        return r;
      if (this.lastNeed <= buf.length) {
        buf.copy(this.lastChar, p2, 0, this.lastNeed);
        return this.lastChar.toString(this.encoding, 0, this.lastTotal);
      }
      buf.copy(this.lastChar, p2, 0, buf.length);
      this.lastNeed -= buf.length;
    }
    function utf8Text2(buf, i2) {
      var total = utf8CheckIncomplete2(this, buf, i2);
      if (!this.lastNeed)
        return buf.toString("utf8", i2);
      this.lastTotal = total;
      var end = buf.length - (total - this.lastNeed);
      buf.copy(this.lastChar, 0, end);
      return buf.toString("utf8", i2, end);
    }
    function utf8End2(buf) {
      var r = buf && buf.length ? this.write(buf) : "";
      if (this.lastNeed)
        return r + "\uFFFD";
      return r;
    }
    function utf16Text2(buf, i2) {
      if ((buf.length - i2) % 2 === 0) {
        var r = buf.toString("utf16le", i2);
        if (r) {
          var c = r.charCodeAt(r.length - 1);
          if (c >= 55296 && c <= 56319) {
            this.lastNeed = 2;
            this.lastTotal = 4;
            this.lastChar[0] = buf[buf.length - 2];
            this.lastChar[1] = buf[buf.length - 1];
            return r.slice(0, -1);
          }
        }
        return r;
      }
      this.lastNeed = 1;
      this.lastTotal = 2;
      this.lastChar[0] = buf[buf.length - 1];
      return buf.toString("utf16le", i2, buf.length - 1);
    }
    function utf16End2(buf) {
      var r = buf && buf.length ? this.write(buf) : "";
      if (this.lastNeed) {
        var end = this.lastTotal - this.lastNeed;
        return r + this.lastChar.toString("utf16le", 0, end);
      }
      return r;
    }
    function base64Text2(buf, i2) {
      var n = (buf.length - i2) % 3;
      if (n === 0)
        return buf.toString("base64", i2);
      this.lastNeed = 3 - n;
      this.lastTotal = 3;
      if (n === 1) {
        this.lastChar[0] = buf[buf.length - 1];
      } else {
        this.lastChar[0] = buf[buf.length - 2];
        this.lastChar[1] = buf[buf.length - 1];
      }
      return buf.toString("base64", i2, buf.length - n);
    }
    function base64End2(buf) {
      var r = buf && buf.length ? this.write(buf) : "";
      if (this.lastNeed)
        return r + this.lastChar.toString("base64", 0, 3 - this.lastNeed);
      return r;
    }
    function simpleWrite2(buf) {
      return buf.toString(this.encoding);
    }
    function simpleEnd2(buf) {
      return buf && buf.length ? this.write(buf) : "";
    }
  }, { "safe-buffer": 147 }], 172: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        const BN = require2("bn.js");
        const EC = require2("elliptic").ec;
        const secp256k1 = new EC("secp256k1");
        const deterministicGenerateK = require2("./rfc6979");
        const ZERO32 = Buffer2.alloc(32, 0);
        const EC_GROUP_ORDER = Buffer2.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141", "hex");
        const EC_P = Buffer2.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f", "hex");
        const n = secp256k1.curve.n;
        const nDiv2 = n.shrn(1);
        const G = secp256k1.curve.g;
        const THROW_BAD_PRIVATE = "Expected Private";
        const THROW_BAD_POINT = "Expected Point";
        const THROW_BAD_TWEAK = "Expected Tweak";
        const THROW_BAD_HASH = "Expected Hash";
        const THROW_BAD_SIGNATURE = "Expected Signature";
        const THROW_BAD_EXTRA_DATA = "Expected Extra Data (32 bytes)";
        function isScalar(x) {
          return Buffer2.isBuffer(x) && x.length === 32;
        }
        function isOrderScalar(x) {
          if (!isScalar(x))
            return false;
          return x.compare(EC_GROUP_ORDER) < 0;
        }
        function isPoint(p2) {
          if (!Buffer2.isBuffer(p2))
            return false;
          if (p2.length < 33)
            return false;
          const t = p2[0];
          const x = p2.slice(1, 33);
          if (x.compare(ZERO32) === 0)
            return false;
          if (x.compare(EC_P) >= 0)
            return false;
          if ((t === 2 || t === 3) && p2.length === 33) {
            try {
              decodeFrom(p2);
            } catch (e) {
              return false;
            }
            return true;
          }
          const y = p2.slice(33);
          if (y.compare(ZERO32) === 0)
            return false;
          if (y.compare(EC_P) >= 0)
            return false;
          if (t === 4 && p2.length === 65)
            return true;
          return false;
        }
        function __isPointCompressed(p2) {
          return p2[0] !== 4;
        }
        function isPointCompressed(p2) {
          if (!isPoint(p2))
            return false;
          return __isPointCompressed(p2);
        }
        function isPrivate(x) {
          if (!isScalar(x))
            return false;
          return x.compare(ZERO32) > 0 && x.compare(EC_GROUP_ORDER) < 0;
        }
        function isSignature(value) {
          const r = value.slice(0, 32);
          const s = value.slice(32, 64);
          return Buffer2.isBuffer(value) && value.length === 64 && r.compare(EC_GROUP_ORDER) < 0 && s.compare(EC_GROUP_ORDER) < 0;
        }
        function assumeCompression(value, pubkey) {
          if (value === void 0 && pubkey !== void 0)
            return __isPointCompressed(pubkey);
          if (value === void 0)
            return true;
          return value;
        }
        function fromBuffer(d) {
          return new BN(d);
        }
        function toBuffer(d) {
          return d.toArrayLike(Buffer2, "be", 32);
        }
        function decodeFrom(P) {
          return secp256k1.curve.decodePoint(P);
        }
        function getEncoded(P, compressed) {
          return Buffer2.from(P._encode(compressed));
        }
        function pointAdd(pA, pB, __compressed) {
          if (!isPoint(pA))
            throw new TypeError(THROW_BAD_POINT);
          if (!isPoint(pB))
            throw new TypeError(THROW_BAD_POINT);
          const a = decodeFrom(pA);
          const b = decodeFrom(pB);
          const pp = a.add(b);
          if (pp.isInfinity())
            return null;
          const compressed = assumeCompression(__compressed, pA);
          return getEncoded(pp, compressed);
        }
        function pointAddScalar(p2, tweak, __compressed) {
          if (!isPoint(p2))
            throw new TypeError(THROW_BAD_POINT);
          if (!isOrderScalar(tweak))
            throw new TypeError(THROW_BAD_TWEAK);
          const compressed = assumeCompression(__compressed, p2);
          const pp = decodeFrom(p2);
          if (tweak.compare(ZERO32) === 0)
            return getEncoded(pp, compressed);
          const tt = fromBuffer(tweak);
          const qq = G.mul(tt);
          const uu = pp.add(qq);
          if (uu.isInfinity())
            return null;
          return getEncoded(uu, compressed);
        }
        function pointCompress(p2, __compressed) {
          if (!isPoint(p2))
            throw new TypeError(THROW_BAD_POINT);
          const pp = decodeFrom(p2);
          if (pp.isInfinity())
            throw new TypeError(THROW_BAD_POINT);
          const compressed = assumeCompression(__compressed, p2);
          return getEncoded(pp, compressed);
        }
        function pointFromScalar(d, __compressed) {
          if (!isPrivate(d))
            throw new TypeError(THROW_BAD_PRIVATE);
          const dd = fromBuffer(d);
          const pp = G.mul(dd);
          if (pp.isInfinity())
            return null;
          const compressed = assumeCompression(__compressed);
          return getEncoded(pp, compressed);
        }
        function pointMultiply(p2, tweak, __compressed) {
          if (!isPoint(p2))
            throw new TypeError(THROW_BAD_POINT);
          if (!isOrderScalar(tweak))
            throw new TypeError(THROW_BAD_TWEAK);
          const compressed = assumeCompression(__compressed, p2);
          const pp = decodeFrom(p2);
          const tt = fromBuffer(tweak);
          const qq = pp.mul(tt);
          if (qq.isInfinity())
            return null;
          return getEncoded(qq, compressed);
        }
        function privateAdd(d, tweak) {
          if (!isPrivate(d))
            throw new TypeError(THROW_BAD_PRIVATE);
          if (!isOrderScalar(tweak))
            throw new TypeError(THROW_BAD_TWEAK);
          const dd = fromBuffer(d);
          const tt = fromBuffer(tweak);
          const dt = toBuffer(dd.add(tt).umod(n));
          if (!isPrivate(dt))
            return null;
          return dt;
        }
        function privateSub(d, tweak) {
          if (!isPrivate(d))
            throw new TypeError(THROW_BAD_PRIVATE);
          if (!isOrderScalar(tweak))
            throw new TypeError(THROW_BAD_TWEAK);
          const dd = fromBuffer(d);
          const tt = fromBuffer(tweak);
          const dt = toBuffer(dd.sub(tt).umod(n));
          if (!isPrivate(dt))
            return null;
          return dt;
        }
        function sign(hash2, x) {
          return __sign(hash2, x);
        }
        function signWithEntropy(hash2, x, addData) {
          return __sign(hash2, x, addData);
        }
        function __sign(hash2, x, addData) {
          if (!isScalar(hash2))
            throw new TypeError(THROW_BAD_HASH);
          if (!isPrivate(x))
            throw new TypeError(THROW_BAD_PRIVATE);
          if (addData !== void 0 && !isScalar(addData))
            throw new TypeError(THROW_BAD_EXTRA_DATA);
          const d = fromBuffer(x);
          const e = fromBuffer(hash2);
          let r, s;
          const checkSig = function(k) {
            const kI = fromBuffer(k);
            const Q = G.mul(kI);
            if (Q.isInfinity())
              return false;
            r = Q.x.umod(n);
            if (r.isZero() === 0)
              return false;
            s = kI.invm(n).mul(e.add(d.mul(r))).umod(n);
            if (s.isZero() === 0)
              return false;
            return true;
          };
          deterministicGenerateK(hash2, x, checkSig, isPrivate, addData);
          if (s.cmp(nDiv2) > 0) {
            s = n.sub(s);
          }
          const buffer2 = Buffer2.allocUnsafe(64);
          toBuffer(r).copy(buffer2, 0);
          toBuffer(s).copy(buffer2, 32);
          return buffer2;
        }
        function verify(hash2, q, signature, strict) {
          if (!isScalar(hash2))
            throw new TypeError(THROW_BAD_HASH);
          if (!isPoint(q))
            throw new TypeError(THROW_BAD_POINT);
          if (!isSignature(signature))
            throw new TypeError(THROW_BAD_SIGNATURE);
          const Q = decodeFrom(q);
          const r = fromBuffer(signature.slice(0, 32));
          const s = fromBuffer(signature.slice(32, 64));
          if (strict && s.cmp(nDiv2) > 0) {
            return false;
          }
          if (r.gtn(0) <= 0)
            return false;
          if (s.gtn(0) <= 0)
            return false;
          const e = fromBuffer(hash2);
          const sInv = s.invm(n);
          const u1 = e.mul(sInv).umod(n);
          const u2 = r.mul(sInv).umod(n);
          const R2 = G.mulAdd(u1, Q, u2);
          if (R2.isInfinity())
            return false;
          const xR = R2.x;
          const v2 = xR.umod(n);
          return v2.eq(r);
        }
        module2.exports = {
          isPoint,
          isPointCompressed,
          isPrivate,
          pointAdd,
          pointAddScalar,
          pointCompress,
          pointFromScalar,
          pointMultiply,
          privateAdd,
          privateSub,
          sign,
          signWithEntropy,
          verify
        };
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "./rfc6979": 174, "bn.js": 173, "buffer": 83, "elliptic": 89 }], 173: [function(require2, module2, exports2) {
    arguments[4][104][0].apply(exports2, arguments);
  }, { "buffer": 79, "dup": 104 }], 174: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        const createHmac = require2("create-hmac");
        const ONE1 = Buffer2.alloc(1, 1);
        const ZERO1 = Buffer2.alloc(1, 0);
        function deterministicGenerateK(hash2, x, checkSig, isPrivate, extraEntropy) {
          let k = Buffer2.alloc(32, 0);
          let v2 = Buffer2.alloc(32, 1);
          k = createHmac("sha256", k).update(v2).update(ZERO1).update(x).update(hash2).update(extraEntropy || "").digest();
          v2 = createHmac("sha256", k).update(v2).digest();
          k = createHmac("sha256", k).update(v2).update(ONE1).update(x).update(hash2).update(extraEntropy || "").digest();
          v2 = createHmac("sha256", k).update(v2).digest();
          v2 = createHmac("sha256", k).update(v2).digest();
          let T = v2;
          while (!isPrivate(T) || !checkSig(T)) {
            k = createHmac("sha256", k).update(v2).update(ZERO1).digest();
            v2 = createHmac("sha256", k).update(v2).digest();
            v2 = createHmac("sha256", k).update(v2).digest();
            T = v2;
          }
          return T;
        }
        module2.exports = deterministicGenerateK;
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "buffer": 83, "create-hmac": 87 }], 175: [function(require2, module2, exports2) {
    var native = require2("./native");
    function getTypeName(fn) {
      return fn.name || fn.toString().match(/function (.*?)\s*\(/)[1];
    }
    function getValueTypeName(value) {
      return native.Nil(value) ? "" : getTypeName(value.constructor);
    }
    function getValue(value) {
      if (native.Function(value))
        return "";
      if (native.String(value))
        return JSON.stringify(value);
      if (value && native.Object(value))
        return "";
      return value;
    }
    function captureStackTrace(e, t) {
      if (Error.captureStackTrace) {
        Error.captureStackTrace(e, t);
      }
    }
    function tfJSON(type) {
      if (native.Function(type))
        return type.toJSON ? type.toJSON() : getTypeName(type);
      if (native.Array(type))
        return "Array";
      if (type && native.Object(type))
        return "Object";
      return type !== void 0 ? type : "";
    }
    function tfErrorString(type, value, valueTypeName) {
      var valueJson = getValue(value);
      return "Expected " + tfJSON(type) + ", got" + (valueTypeName !== "" ? " " + valueTypeName : "") + (valueJson !== "" ? " " + valueJson : "");
    }
    function TfTypeError(type, value, valueTypeName) {
      valueTypeName = valueTypeName || getValueTypeName(value);
      this.message = tfErrorString(type, value, valueTypeName);
      captureStackTrace(this, TfTypeError);
      this.__type = type;
      this.__value = value;
      this.__valueTypeName = valueTypeName;
    }
    TfTypeError.prototype = Object.create(Error.prototype);
    TfTypeError.prototype.constructor = TfTypeError;
    function tfPropertyErrorString(type, label, name, value, valueTypeName) {
      var description = '" of type ';
      if (label === "key")
        description = '" with key type ';
      return tfErrorString('property "' + tfJSON(name) + description + tfJSON(type), value, valueTypeName);
    }
    function TfPropertyTypeError(type, property, label, value, valueTypeName) {
      if (type) {
        valueTypeName = valueTypeName || getValueTypeName(value);
        this.message = tfPropertyErrorString(type, label, property, value, valueTypeName);
      } else {
        this.message = 'Unexpected property "' + property + '"';
      }
      captureStackTrace(this, TfTypeError);
      this.__label = label;
      this.__property = property;
      this.__type = type;
      this.__value = value;
      this.__valueTypeName = valueTypeName;
    }
    TfPropertyTypeError.prototype = Object.create(Error.prototype);
    TfPropertyTypeError.prototype.constructor = TfTypeError;
    function tfCustomError(expected, actual) {
      return new TfTypeError(expected, {}, actual);
    }
    function tfSubError(e, property, label) {
      if (e instanceof TfPropertyTypeError) {
        property = property + "." + e.__property;
        e = new TfPropertyTypeError(e.__type, property, e.__label, e.__value, e.__valueTypeName);
      } else if (e instanceof TfTypeError) {
        e = new TfPropertyTypeError(e.__type, property, label, e.__value, e.__valueTypeName);
      }
      captureStackTrace(e);
      return e;
    }
    module2.exports = {
      TfTypeError,
      TfPropertyTypeError,
      tfCustomError,
      tfSubError,
      tfJSON,
      getValueTypeName
    };
  }, { "./native": 178 }], 176: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        var NATIVE = require2("./native");
        var ERRORS = require2("./errors");
        function _Buffer(value) {
          return Buffer2.isBuffer(value);
        }
        function Hex(value) {
          return typeof value === "string" && /^([0-9a-f]{2})+$/i.test(value);
        }
        function _LengthN(type, length) {
          var name = type.toJSON();
          function Length(value) {
            if (!type(value))
              return false;
            if (value.length === length)
              return true;
            throw ERRORS.tfCustomError(name + "(Length: " + length + ")", name + "(Length: " + value.length + ")");
          }
          Length.toJSON = function() {
            return name;
          };
          return Length;
        }
        var _ArrayN = _LengthN.bind(null, NATIVE.Array);
        var _BufferN = _LengthN.bind(null, _Buffer);
        var _HexN = _LengthN.bind(null, Hex);
        var _StringN = _LengthN.bind(null, NATIVE.String);
        function Range(a, b, f) {
          f = f || NATIVE.Number;
          function _range(value, strict) {
            return f(value, strict) && value > a && value < b;
          }
          _range.toJSON = function() {
            return `${f.toJSON()} between [${a}, ${b}]`;
          };
          return _range;
        }
        var INT53_MAX = Math.pow(2, 53) - 1;
        function Finite(value) {
          return typeof value === "number" && isFinite(value);
        }
        function Int8(value) {
          return value << 24 >> 24 === value;
        }
        function Int16(value) {
          return value << 16 >> 16 === value;
        }
        function Int32(value) {
          return (value | 0) === value;
        }
        function Int53(value) {
          return typeof value === "number" && value >= -INT53_MAX && value <= INT53_MAX && Math.floor(value) === value;
        }
        function UInt8(value) {
          return (value & 255) === value;
        }
        function UInt16(value) {
          return (value & 65535) === value;
        }
        function UInt32(value) {
          return value >>> 0 === value;
        }
        function UInt53(value) {
          return typeof value === "number" && value >= 0 && value <= INT53_MAX && Math.floor(value) === value;
        }
        var types = {
          ArrayN: _ArrayN,
          Buffer: _Buffer,
          BufferN: _BufferN,
          Finite,
          Hex,
          HexN: _HexN,
          Int8,
          Int16,
          Int32,
          Int53,
          Range,
          StringN: _StringN,
          UInt8,
          UInt16,
          UInt32,
          UInt53
        };
        for (var typeName in types) {
          types[typeName].toJSON = function(t) {
            return t;
          }.bind(null, typeName);
        }
        module2.exports = types;
      }).call(this);
    }).call(this, { "isBuffer": require2("../is-buffer/index.js") });
  }, { "../is-buffer/index.js": 138, "./errors": 175, "./native": 178 }], 177: [function(require2, module2, exports2) {
    var ERRORS = require2("./errors");
    var NATIVE = require2("./native");
    var tfJSON = ERRORS.tfJSON;
    var TfTypeError = ERRORS.TfTypeError;
    var TfPropertyTypeError = ERRORS.TfPropertyTypeError;
    var tfSubError = ERRORS.tfSubError;
    var getValueTypeName = ERRORS.getValueTypeName;
    var TYPES = {
      arrayOf: function arrayOf(type, options) {
        type = compile(type);
        options = options || {};
        function _arrayOf(array, strict) {
          if (!NATIVE.Array(array))
            return false;
          if (NATIVE.Nil(array))
            return false;
          if (options.minLength !== void 0 && array.length < options.minLength)
            return false;
          if (options.maxLength !== void 0 && array.length > options.maxLength)
            return false;
          if (options.length !== void 0 && array.length !== options.length)
            return false;
          return array.every(function(value, i2) {
            try {
              return typeforce(type, value, strict);
            } catch (e) {
              throw tfSubError(e, i2);
            }
          });
        }
        _arrayOf.toJSON = function() {
          var str = "[" + tfJSON(type) + "]";
          if (options.length !== void 0) {
            str += "{" + options.length + "}";
          } else if (options.minLength !== void 0 || options.maxLength !== void 0) {
            str += "{" + (options.minLength === void 0 ? 0 : options.minLength) + "," + (options.maxLength === void 0 ? Infinity : options.maxLength) + "}";
          }
          return str;
        };
        return _arrayOf;
      },
      maybe: function maybe(type) {
        type = compile(type);
        function _maybe(value, strict) {
          return NATIVE.Nil(value) || type(value, strict, maybe);
        }
        _maybe.toJSON = function() {
          return "?" + tfJSON(type);
        };
        return _maybe;
      },
      map: function map(propertyType, propertyKeyType) {
        propertyType = compile(propertyType);
        if (propertyKeyType)
          propertyKeyType = compile(propertyKeyType);
        function _map(value, strict) {
          if (!NATIVE.Object(value))
            return false;
          if (NATIVE.Nil(value))
            return false;
          for (var propertyName in value) {
            try {
              if (propertyKeyType) {
                typeforce(propertyKeyType, propertyName, strict);
              }
            } catch (e) {
              throw tfSubError(e, propertyName, "key");
            }
            try {
              var propertyValue = value[propertyName];
              typeforce(propertyType, propertyValue, strict);
            } catch (e) {
              throw tfSubError(e, propertyName);
            }
          }
          return true;
        }
        if (propertyKeyType) {
          _map.toJSON = function() {
            return "{" + tfJSON(propertyKeyType) + ": " + tfJSON(propertyType) + "}";
          };
        } else {
          _map.toJSON = function() {
            return "{" + tfJSON(propertyType) + "}";
          };
        }
        return _map;
      },
      object: function object(uncompiled) {
        var type = {};
        for (var typePropertyName in uncompiled) {
          type[typePropertyName] = compile(uncompiled[typePropertyName]);
        }
        function _object(value, strict) {
          if (!NATIVE.Object(value))
            return false;
          if (NATIVE.Nil(value))
            return false;
          var propertyName;
          try {
            for (propertyName in type) {
              var propertyType = type[propertyName];
              var propertyValue = value[propertyName];
              typeforce(propertyType, propertyValue, strict);
            }
          } catch (e) {
            throw tfSubError(e, propertyName);
          }
          if (strict) {
            for (propertyName in value) {
              if (type[propertyName])
                continue;
              throw new TfPropertyTypeError(void 0, propertyName);
            }
          }
          return true;
        }
        _object.toJSON = function() {
          return tfJSON(type);
        };
        return _object;
      },
      anyOf: function anyOf() {
        var types = [].slice.call(arguments).map(compile);
        function _anyOf(value, strict) {
          return types.some(function(type) {
            try {
              return typeforce(type, value, strict);
            } catch (e) {
              return false;
            }
          });
        }
        _anyOf.toJSON = function() {
          return types.map(tfJSON).join("|");
        };
        return _anyOf;
      },
      allOf: function allOf() {
        var types = [].slice.call(arguments).map(compile);
        function _allOf(value, strict) {
          return types.every(function(type) {
            try {
              return typeforce(type, value, strict);
            } catch (e) {
              return false;
            }
          });
        }
        _allOf.toJSON = function() {
          return types.map(tfJSON).join(" & ");
        };
        return _allOf;
      },
      quacksLike: function quacksLike(type) {
        function _quacksLike(value) {
          return type === getValueTypeName(value);
        }
        _quacksLike.toJSON = function() {
          return type;
        };
        return _quacksLike;
      },
      tuple: function tuple() {
        var types = [].slice.call(arguments).map(compile);
        function _tuple(values, strict) {
          if (NATIVE.Nil(values))
            return false;
          if (NATIVE.Nil(values.length))
            return false;
          if (strict && values.length !== types.length)
            return false;
          return types.every(function(type, i2) {
            try {
              return typeforce(type, values[i2], strict);
            } catch (e) {
              throw tfSubError(e, i2);
            }
          });
        }
        _tuple.toJSON = function() {
          return "(" + types.map(tfJSON).join(", ") + ")";
        };
        return _tuple;
      },
      value: function value(expected) {
        function _value(actual) {
          return actual === expected;
        }
        _value.toJSON = function() {
          return expected;
        };
        return _value;
      }
    };
    TYPES.oneOf = TYPES.anyOf;
    function compile(type) {
      if (NATIVE.String(type)) {
        if (type[0] === "?")
          return TYPES.maybe(type.slice(1));
        return NATIVE[type] || TYPES.quacksLike(type);
      } else if (type && NATIVE.Object(type)) {
        if (NATIVE.Array(type)) {
          if (type.length !== 1)
            throw new TypeError("Expected compile() parameter of type Array of length 1");
          return TYPES.arrayOf(type[0]);
        }
        return TYPES.object(type);
      } else if (NATIVE.Function(type)) {
        return type;
      }
      return TYPES.value(type);
    }
    function typeforce(type, value, strict, surrogate) {
      if (NATIVE.Function(type)) {
        if (type(value, strict))
          return true;
        throw new TfTypeError(surrogate || type, value);
      }
      return typeforce(compile(type), value, strict);
    }
    for (var typeName in NATIVE) {
      typeforce[typeName] = NATIVE[typeName];
    }
    for (typeName in TYPES) {
      typeforce[typeName] = TYPES[typeName];
    }
    var EXTRA = require2("./extra");
    for (typeName in EXTRA) {
      typeforce[typeName] = EXTRA[typeName];
    }
    typeforce.compile = compile;
    typeforce.TfTypeError = TfTypeError;
    typeforce.TfPropertyTypeError = TfPropertyTypeError;
    module2.exports = typeforce;
  }, { "./errors": 175, "./extra": 176, "./native": 178 }], 178: [function(require2, module2, exports2) {
    var types = {
      Array: function(value) {
        return value !== null && value !== void 0 && value.constructor === Array;
      },
      Boolean: function(value) {
        return typeof value === "boolean";
      },
      Function: function(value) {
        return typeof value === "function";
      },
      Nil: function(value) {
        return value === void 0 || value === null;
      },
      Number: function(value) {
        return typeof value === "number";
      },
      Object: function(value) {
        return typeof value === "object";
      },
      String: function(value) {
        return typeof value === "string";
      },
      "": function() {
        return true;
      }
    };
    types.Null = types.Nil;
    for (var typeName in types) {
      types[typeName].toJSON = function(t) {
        return t;
      }.bind(null, typeName);
    }
    module2.exports = types;
  }, {}], 179: [function(require2, module2, exports2) {
    (function(globalThis2) {
      (function() {
        module2.exports = deprecate2;
        function deprecate2(fn, msg) {
          if (config2("noDeprecation")) {
            return fn;
          }
          var warned = false;
          function deprecated() {
            if (!warned) {
              if (config2("throwDeprecation")) {
                throw new Error(msg);
              } else if (config2("traceDeprecation")) {
                console.trace(msg);
              } else {
                console.warn(msg);
              }
              warned = true;
            }
            return fn.apply(this, arguments);
          }
          return deprecated;
        }
        function config2(name) {
          try {
            if (!globalThis2.localStorage)
              return false;
          } catch (_) {
            return false;
          }
          var val = globalThis2.localStorage[name];
          if (val == null)
            return false;
          return String(val).toLowerCase() === "true";
        }
      }).call(this);
    }).call(this, typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {});
  }, {}], 180: [function(require2, module2, exports2) {
    var Buffer2 = require2("safe-buffer").Buffer;
    var MAX_SAFE_INTEGER = 9007199254740991;
    function checkUInt53(n) {
      if (n < 0 || n > MAX_SAFE_INTEGER || n % 1 !== 0)
        throw new RangeError("value out of range");
    }
    function encode(number, buffer2, offset) {
      checkUInt53(number);
      if (!buffer2)
        buffer2 = Buffer2.allocUnsafe(encodingLength(number));
      if (!Buffer2.isBuffer(buffer2))
        throw new TypeError("buffer must be a Buffer instance");
      if (!offset)
        offset = 0;
      if (number < 253) {
        buffer2.writeUInt8(number, offset);
        encode.bytes = 1;
      } else if (number <= 65535) {
        buffer2.writeUInt8(253, offset);
        buffer2.writeUInt16LE(number, offset + 1);
        encode.bytes = 3;
      } else if (number <= 4294967295) {
        buffer2.writeUInt8(254, offset);
        buffer2.writeUInt32LE(number, offset + 1);
        encode.bytes = 5;
      } else {
        buffer2.writeUInt8(255, offset);
        buffer2.writeUInt32LE(number >>> 0, offset + 1);
        buffer2.writeUInt32LE(number / 4294967296 | 0, offset + 5);
        encode.bytes = 9;
      }
      return buffer2;
    }
    function decode(buffer2, offset) {
      if (!Buffer2.isBuffer(buffer2))
        throw new TypeError("buffer must be a Buffer instance");
      if (!offset)
        offset = 0;
      var first = buffer2.readUInt8(offset);
      if (first < 253) {
        decode.bytes = 1;
        return first;
      } else if (first === 253) {
        decode.bytes = 3;
        return buffer2.readUInt16LE(offset + 1);
      } else if (first === 254) {
        decode.bytes = 5;
        return buffer2.readUInt32LE(offset + 1);
      } else {
        decode.bytes = 9;
        var lo = buffer2.readUInt32LE(offset + 1);
        var hi = buffer2.readUInt32LE(offset + 5);
        var number = hi * 4294967296 + lo;
        checkUInt53(number);
        return number;
      }
    }
    function encodingLength(number) {
      checkUInt53(number);
      return number < 253 ? 1 : number <= 65535 ? 3 : number <= 4294967295 ? 5 : 9;
    }
    module2.exports = { encode, decode, encodingLength };
  }, { "safe-buffer": 147 }], 181: [function(require2, module2, exports2) {
    (function(Buffer2) {
      (function() {
        var bs58check = require2("bs58check");
        function decodeRaw(buffer2, version) {
          if (version !== void 0 && buffer2[0] !== version)
            throw new Error("Invalid network version");
          if (buffer2.length === 33) {
            return {
              version: buffer2[0],
              privateKey: buffer2.slice(1, 33),
              compressed: false
            };
          }
          if (buffer2.length !== 34)
            throw new Error("Invalid WIF length");
          if (buffer2[33] !== 1)
            throw new Error("Invalid compression flag");
          return {
            version: buffer2[0],
            privateKey: buffer2.slice(1, 33),
            compressed: true
          };
        }
        function encodeRaw(version, privateKey, compressed) {
          var result = new Buffer2(compressed ? 34 : 33);
          result.writeUInt8(version, 0);
          privateKey.copy(result, 1);
          if (compressed) {
            result[33] = 1;
          }
          return result;
        }
        function decode(string, version) {
          return decodeRaw(bs58check.decode(string), version);
        }
        function encode(version, privateKey, compressed) {
          if (typeof version === "number")
            return bs58check.encode(encodeRaw(version, privateKey, compressed));
          return bs58check.encode(encodeRaw(version.version, version.privateKey, version.compressed));
        }
        module2.exports = {
          decode,
          decodeRaw,
          encode,
          encodeRaw
        };
      }).call(this);
    }).call(this, require2("buffer").Buffer);
  }, { "bs58check": 82, "buffer": 83 }], "/": [function(require2, module2, exports2) {
    var bitcoin_js = require2("bitcoinjs-lib");
    bitcoin_js.Buffer = require2("safe-buffer").Buffer;
    module2.exports = bitcoin_js;
  }, { "bitcoinjs-lib": 39, "safe-buffer": 147 }] }, {}, [])("/");
});
function getAugmentedNamespace(n) {
  if (n.__esModule)
    return n;
  var a = Object.defineProperty({}, "__esModule", { value: true });
  Object.keys(n).forEach(function(k) {
    var d = Object.getOwnPropertyDescriptor(n, k);
    Object.defineProperty(a, k, d.get ? d : {
      enumerable: true,
      get: function() {
        return n[k];
      }
    });
  });
  return a;
}
var buffer = {};
var base64Js = {};
base64Js.byteLength = byteLength;
base64Js.toByteArray = toByteArray;
base64Js.fromByteArray = fromByteArray;
var lookup = [];
var revLookup = [];
var Arr = typeof Uint8Array !== "undefined" ? Uint8Array : Array;
var code = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i];
  revLookup[code.charCodeAt(i)] = i;
}
revLookup["-".charCodeAt(0)] = 62;
revLookup["_".charCodeAt(0)] = 63;
function getLens(b64) {
  var len2 = b64.length;
  if (len2 % 4 > 0) {
    throw new Error("Invalid string. Length must be a multiple of 4");
  }
  var validLen = b64.indexOf("=");
  if (validLen === -1)
    validLen = len2;
  var placeHoldersLen = validLen === len2 ? 0 : 4 - validLen % 4;
  return [validLen, placeHoldersLen];
}
function byteLength(b64) {
  var lens = getLens(b64);
  var validLen = lens[0];
  var placeHoldersLen = lens[1];
  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
}
function _byteLength(b64, validLen, placeHoldersLen) {
  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
}
function toByteArray(b64) {
  var tmp;
  var lens = getLens(b64);
  var validLen = lens[0];
  var placeHoldersLen = lens[1];
  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));
  var curByte = 0;
  var len2 = placeHoldersLen > 0 ? validLen - 4 : validLen;
  var i2;
  for (i2 = 0; i2 < len2; i2 += 4) {
    tmp = revLookup[b64.charCodeAt(i2)] << 18 | revLookup[b64.charCodeAt(i2 + 1)] << 12 | revLookup[b64.charCodeAt(i2 + 2)] << 6 | revLookup[b64.charCodeAt(i2 + 3)];
    arr[curByte++] = tmp >> 16 & 255;
    arr[curByte++] = tmp >> 8 & 255;
    arr[curByte++] = tmp & 255;
  }
  if (placeHoldersLen === 2) {
    tmp = revLookup[b64.charCodeAt(i2)] << 2 | revLookup[b64.charCodeAt(i2 + 1)] >> 4;
    arr[curByte++] = tmp & 255;
  }
  if (placeHoldersLen === 1) {
    tmp = revLookup[b64.charCodeAt(i2)] << 10 | revLookup[b64.charCodeAt(i2 + 1)] << 4 | revLookup[b64.charCodeAt(i2 + 2)] >> 2;
    arr[curByte++] = tmp >> 8 & 255;
    arr[curByte++] = tmp & 255;
  }
  return arr;
}
function tripletToBase64(num) {
  return lookup[num >> 18 & 63] + lookup[num >> 12 & 63] + lookup[num >> 6 & 63] + lookup[num & 63];
}
function encodeChunk(uint8, start2, end) {
  var tmp;
  var output = [];
  for (var i2 = start2; i2 < end; i2 += 3) {
    tmp = (uint8[i2] << 16 & 16711680) + (uint8[i2 + 1] << 8 & 65280) + (uint8[i2 + 2] & 255);
    output.push(tripletToBase64(tmp));
  }
  return output.join("");
}
function fromByteArray(uint8) {
  var tmp;
  var len2 = uint8.length;
  var extraBytes = len2 % 3;
  var parts = [];
  var maxChunkLength = 16383;
  for (var i2 = 0, len22 = len2 - extraBytes; i2 < len22; i2 += maxChunkLength) {
    parts.push(encodeChunk(uint8, i2, i2 + maxChunkLength > len22 ? len22 : i2 + maxChunkLength));
  }
  if (extraBytes === 1) {
    tmp = uint8[len2 - 1];
    parts.push(lookup[tmp >> 2] + lookup[tmp << 4 & 63] + "==");
  } else if (extraBytes === 2) {
    tmp = (uint8[len2 - 2] << 8) + uint8[len2 - 1];
    parts.push(lookup[tmp >> 10] + lookup[tmp >> 4 & 63] + lookup[tmp << 2 & 63] + "=");
  }
  return parts.join("");
}
var ieee754 = {};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
ieee754.read = function(buffer2, offset, isLE, mLen, nBytes) {
  var e, m;
  var eLen = nBytes * 8 - mLen - 1;
  var eMax = (1 << eLen) - 1;
  var eBias = eMax >> 1;
  var nBits = -7;
  var i2 = isLE ? nBytes - 1 : 0;
  var d = isLE ? -1 : 1;
  var s = buffer2[offset + i2];
  i2 += d;
  e = s & (1 << -nBits) - 1;
  s >>= -nBits;
  nBits += eLen;
  for (; nBits > 0; e = e * 256 + buffer2[offset + i2], i2 += d, nBits -= 8) {
  }
  m = e & (1 << -nBits) - 1;
  e >>= -nBits;
  nBits += mLen;
  for (; nBits > 0; m = m * 256 + buffer2[offset + i2], i2 += d, nBits -= 8) {
  }
  if (e === 0) {
    e = 1 - eBias;
  } else if (e === eMax) {
    return m ? NaN : (s ? -1 : 1) * Infinity;
  } else {
    m = m + Math.pow(2, mLen);
    e = e - eBias;
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);
};
ieee754.write = function(buffer2, value, offset, isLE, mLen, nBytes) {
  var e, m, c;
  var eLen = nBytes * 8 - mLen - 1;
  var eMax = (1 << eLen) - 1;
  var eBias = eMax >> 1;
  var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;
  var i2 = isLE ? 0 : nBytes - 1;
  var d = isLE ? 1 : -1;
  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;
  value = Math.abs(value);
  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0;
    e = eMax;
  } else {
    e = Math.floor(Math.log(value) / Math.LN2);
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--;
      c *= 2;
    }
    if (e + eBias >= 1) {
      value += rt / c;
    } else {
      value += rt * Math.pow(2, 1 - eBias);
    }
    if (value * c >= 2) {
      e++;
      c /= 2;
    }
    if (e + eBias >= eMax) {
      m = 0;
      e = eMax;
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * Math.pow(2, mLen);
      e = e + eBias;
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);
      e = 0;
    }
  }
  for (; mLen >= 8; buffer2[offset + i2] = m & 255, i2 += d, m /= 256, mLen -= 8) {
  }
  e = e << mLen | m;
  eLen += mLen;
  for (; eLen > 0; buffer2[offset + i2] = e & 255, i2 += d, e /= 256, eLen -= 8) {
  }
  buffer2[offset + i2 - d] |= s * 128;
};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
(function(exports2) {
  const base64 = base64Js;
  const ieee754$1 = ieee754;
  const customInspectSymbol = typeof Symbol === "function" && typeof Symbol["for"] === "function" ? Symbol["for"]("nodejs.util.inspect.custom") : null;
  exports2.Buffer = Buffer2;
  exports2.SlowBuffer = SlowBuffer;
  exports2.INSPECT_MAX_BYTES = 50;
  const K_MAX_LENGTH = 2147483647;
  exports2.kMaxLength = K_MAX_LENGTH;
  Buffer2.TYPED_ARRAY_SUPPORT = typedArraySupport();
  if (!Buffer2.TYPED_ARRAY_SUPPORT && typeof console !== "undefined" && typeof console.error === "function") {
    console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");
  }
  function typedArraySupport() {
    try {
      const arr = new Uint8Array(1);
      const proto = { foo: function() {
        return 42;
      } };
      Object.setPrototypeOf(proto, Uint8Array.prototype);
      Object.setPrototypeOf(arr, proto);
      return arr.foo() === 42;
    } catch (e) {
      return false;
    }
  }
  Object.defineProperty(Buffer2.prototype, "parent", {
    enumerable: true,
    get: function() {
      if (!Buffer2.isBuffer(this))
        return void 0;
      return this.buffer;
    }
  });
  Object.defineProperty(Buffer2.prototype, "offset", {
    enumerable: true,
    get: function() {
      if (!Buffer2.isBuffer(this))
        return void 0;
      return this.byteOffset;
    }
  });
  function createBuffer(length) {
    if (length > K_MAX_LENGTH) {
      throw new RangeError('The value "' + length + '" is invalid for option "size"');
    }
    const buf = new Uint8Array(length);
    Object.setPrototypeOf(buf, Buffer2.prototype);
    return buf;
  }
  function Buffer2(arg, encodingOrOffset, length) {
    if (typeof arg === "number") {
      if (typeof encodingOrOffset === "string") {
        throw new TypeError('The "string" argument must be of type string. Received type number');
      }
      return allocUnsafe(arg);
    }
    return from2(arg, encodingOrOffset, length);
  }
  Buffer2.poolSize = 8192;
  function from2(value, encodingOrOffset, length) {
    if (typeof value === "string") {
      return fromString(value, encodingOrOffset);
    }
    if (ArrayBuffer.isView(value)) {
      return fromArrayView(value);
    }
    if (value == null) {
      throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof value);
    }
    if (isInstance(value, ArrayBuffer) || value && isInstance(value.buffer, ArrayBuffer)) {
      return fromArrayBuffer(value, encodingOrOffset, length);
    }
    if (typeof SharedArrayBuffer !== "undefined" && (isInstance(value, SharedArrayBuffer) || value && isInstance(value.buffer, SharedArrayBuffer))) {
      return fromArrayBuffer(value, encodingOrOffset, length);
    }
    if (typeof value === "number") {
      throw new TypeError('The "value" argument must not be of type number. Received type number');
    }
    const valueOf = value.valueOf && value.valueOf();
    if (valueOf != null && valueOf !== value) {
      return Buffer2.from(valueOf, encodingOrOffset, length);
    }
    const b = fromObject(value);
    if (b)
      return b;
    if (typeof Symbol !== "undefined" && Symbol.toPrimitive != null && typeof value[Symbol.toPrimitive] === "function") {
      return Buffer2.from(value[Symbol.toPrimitive]("string"), encodingOrOffset, length);
    }
    throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof value);
  }
  Buffer2.from = function(value, encodingOrOffset, length) {
    return from2(value, encodingOrOffset, length);
  };
  Object.setPrototypeOf(Buffer2.prototype, Uint8Array.prototype);
  Object.setPrototypeOf(Buffer2, Uint8Array);
  function assertSize(size) {
    if (typeof size !== "number") {
      throw new TypeError('"size" argument must be of type number');
    } else if (size < 0) {
      throw new RangeError('The value "' + size + '" is invalid for option "size"');
    }
  }
  function alloc(size, fill, encoding) {
    assertSize(size);
    if (size <= 0) {
      return createBuffer(size);
    }
    if (fill !== void 0) {
      return typeof encoding === "string" ? createBuffer(size).fill(fill, encoding) : createBuffer(size).fill(fill);
    }
    return createBuffer(size);
  }
  Buffer2.alloc = function(size, fill, encoding) {
    return alloc(size, fill, encoding);
  };
  function allocUnsafe(size) {
    assertSize(size);
    return createBuffer(size < 0 ? 0 : checked(size) | 0);
  }
  Buffer2.allocUnsafe = function(size) {
    return allocUnsafe(size);
  };
  Buffer2.allocUnsafeSlow = function(size) {
    return allocUnsafe(size);
  };
  function fromString(string, encoding) {
    if (typeof encoding !== "string" || encoding === "") {
      encoding = "utf8";
    }
    if (!Buffer2.isEncoding(encoding)) {
      throw new TypeError("Unknown encoding: " + encoding);
    }
    const length = byteLength2(string, encoding) | 0;
    let buf = createBuffer(length);
    const actual = buf.write(string, encoding);
    if (actual !== length) {
      buf = buf.slice(0, actual);
    }
    return buf;
  }
  function fromArrayLike(array) {
    const length = array.length < 0 ? 0 : checked(array.length) | 0;
    const buf = createBuffer(length);
    for (let i2 = 0; i2 < length; i2 += 1) {
      buf[i2] = array[i2] & 255;
    }
    return buf;
  }
  function fromArrayView(arrayView) {
    if (isInstance(arrayView, Uint8Array)) {
      const copy = new Uint8Array(arrayView);
      return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength);
    }
    return fromArrayLike(arrayView);
  }
  function fromArrayBuffer(array, byteOffset, length) {
    if (byteOffset < 0 || array.byteLength < byteOffset) {
      throw new RangeError('"offset" is outside of buffer bounds');
    }
    if (array.byteLength < byteOffset + (length || 0)) {
      throw new RangeError('"length" is outside of buffer bounds');
    }
    let buf;
    if (byteOffset === void 0 && length === void 0) {
      buf = new Uint8Array(array);
    } else if (length === void 0) {
      buf = new Uint8Array(array, byteOffset);
    } else {
      buf = new Uint8Array(array, byteOffset, length);
    }
    Object.setPrototypeOf(buf, Buffer2.prototype);
    return buf;
  }
  function fromObject(obj) {
    if (Buffer2.isBuffer(obj)) {
      const len2 = checked(obj.length) | 0;
      const buf = createBuffer(len2);
      if (buf.length === 0) {
        return buf;
      }
      obj.copy(buf, 0, 0, len2);
      return buf;
    }
    if (obj.length !== void 0) {
      if (typeof obj.length !== "number" || numberIsNaN(obj.length)) {
        return createBuffer(0);
      }
      return fromArrayLike(obj);
    }
    if (obj.type === "Buffer" && Array.isArray(obj.data)) {
      return fromArrayLike(obj.data);
    }
  }
  function checked(length) {
    if (length >= K_MAX_LENGTH) {
      throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + K_MAX_LENGTH.toString(16) + " bytes");
    }
    return length | 0;
  }
  function SlowBuffer(length) {
    if (+length != length) {
      length = 0;
    }
    return Buffer2.alloc(+length);
  }
  Buffer2.isBuffer = function isBuffer(b) {
    return b != null && b._isBuffer === true && b !== Buffer2.prototype;
  };
  Buffer2.compare = function compare(a, b) {
    if (isInstance(a, Uint8Array))
      a = Buffer2.from(a, a.offset, a.byteLength);
    if (isInstance(b, Uint8Array))
      b = Buffer2.from(b, b.offset, b.byteLength);
    if (!Buffer2.isBuffer(a) || !Buffer2.isBuffer(b)) {
      throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
    }
    if (a === b)
      return 0;
    let x = a.length;
    let y = b.length;
    for (let i2 = 0, len2 = Math.min(x, y); i2 < len2; ++i2) {
      if (a[i2] !== b[i2]) {
        x = a[i2];
        y = b[i2];
        break;
      }
    }
    if (x < y)
      return -1;
    if (y < x)
      return 1;
    return 0;
  };
  Buffer2.isEncoding = function isEncoding2(encoding) {
    switch (String(encoding).toLowerCase()) {
      case "hex":
      case "utf8":
      case "utf-8":
      case "ascii":
      case "latin1":
      case "binary":
      case "base64":
      case "ucs2":
      case "ucs-2":
      case "utf16le":
      case "utf-16le":
        return true;
      default:
        return false;
    }
  };
  Buffer2.concat = function concat(list, length) {
    if (!Array.isArray(list)) {
      throw new TypeError('"list" argument must be an Array of Buffers');
    }
    if (list.length === 0) {
      return Buffer2.alloc(0);
    }
    let i2;
    if (length === void 0) {
      length = 0;
      for (i2 = 0; i2 < list.length; ++i2) {
        length += list[i2].length;
      }
    }
    const buffer2 = Buffer2.allocUnsafe(length);
    let pos = 0;
    for (i2 = 0; i2 < list.length; ++i2) {
      let buf = list[i2];
      if (isInstance(buf, Uint8Array)) {
        if (pos + buf.length > buffer2.length) {
          if (!Buffer2.isBuffer(buf))
            buf = Buffer2.from(buf);
          buf.copy(buffer2, pos);
        } else {
          Uint8Array.prototype.set.call(buffer2, buf, pos);
        }
      } else if (!Buffer2.isBuffer(buf)) {
        throw new TypeError('"list" argument must be an Array of Buffers');
      } else {
        buf.copy(buffer2, pos);
      }
      pos += buf.length;
    }
    return buffer2;
  };
  function byteLength2(string, encoding) {
    if (Buffer2.isBuffer(string)) {
      return string.length;
    }
    if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {
      return string.byteLength;
    }
    if (typeof string !== "string") {
      throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type ' + typeof string);
    }
    const len2 = string.length;
    const mustMatch = arguments.length > 2 && arguments[2] === true;
    if (!mustMatch && len2 === 0)
      return 0;
    let loweredCase = false;
    for (; ; ) {
      switch (encoding) {
        case "ascii":
        case "latin1":
        case "binary":
          return len2;
        case "utf8":
        case "utf-8":
          return utf8ToBytes(string).length;
        case "ucs2":
        case "ucs-2":
        case "utf16le":
        case "utf-16le":
          return len2 * 2;
        case "hex":
          return len2 >>> 1;
        case "base64":
          return base64ToBytes(string).length;
        default:
          if (loweredCase) {
            return mustMatch ? -1 : utf8ToBytes(string).length;
          }
          encoding = ("" + encoding).toLowerCase();
          loweredCase = true;
      }
    }
  }
  Buffer2.byteLength = byteLength2;
  function slowToString(encoding, start2, end) {
    let loweredCase = false;
    if (start2 === void 0 || start2 < 0) {
      start2 = 0;
    }
    if (start2 > this.length) {
      return "";
    }
    if (end === void 0 || end > this.length) {
      end = this.length;
    }
    if (end <= 0) {
      return "";
    }
    end >>>= 0;
    start2 >>>= 0;
    if (end <= start2) {
      return "";
    }
    if (!encoding)
      encoding = "utf8";
    while (true) {
      switch (encoding) {
        case "hex":
          return hexSlice(this, start2, end);
        case "utf8":
        case "utf-8":
          return utf8Slice(this, start2, end);
        case "ascii":
          return asciiSlice(this, start2, end);
        case "latin1":
        case "binary":
          return latin1Slice(this, start2, end);
        case "base64":
          return base64Slice(this, start2, end);
        case "ucs2":
        case "ucs-2":
        case "utf16le":
        case "utf-16le":
          return utf16leSlice(this, start2, end);
        default:
          if (loweredCase)
            throw new TypeError("Unknown encoding: " + encoding);
          encoding = (encoding + "").toLowerCase();
          loweredCase = true;
      }
    }
  }
  Buffer2.prototype._isBuffer = true;
  function swap(b, n, m) {
    const i2 = b[n];
    b[n] = b[m];
    b[m] = i2;
  }
  Buffer2.prototype.swap16 = function swap16() {
    const len2 = this.length;
    if (len2 % 2 !== 0) {
      throw new RangeError("Buffer size must be a multiple of 16-bits");
    }
    for (let i2 = 0; i2 < len2; i2 += 2) {
      swap(this, i2, i2 + 1);
    }
    return this;
  };
  Buffer2.prototype.swap32 = function swap32() {
    const len2 = this.length;
    if (len2 % 4 !== 0) {
      throw new RangeError("Buffer size must be a multiple of 32-bits");
    }
    for (let i2 = 0; i2 < len2; i2 += 4) {
      swap(this, i2, i2 + 3);
      swap(this, i2 + 1, i2 + 2);
    }
    return this;
  };
  Buffer2.prototype.swap64 = function swap64() {
    const len2 = this.length;
    if (len2 % 8 !== 0) {
      throw new RangeError("Buffer size must be a multiple of 64-bits");
    }
    for (let i2 = 0; i2 < len2; i2 += 8) {
      swap(this, i2, i2 + 7);
      swap(this, i2 + 1, i2 + 6);
      swap(this, i2 + 2, i2 + 5);
      swap(this, i2 + 3, i2 + 4);
    }
    return this;
  };
  Buffer2.prototype.toString = function toString() {
    const length = this.length;
    if (length === 0)
      return "";
    if (arguments.length === 0)
      return utf8Slice(this, 0, length);
    return slowToString.apply(this, arguments);
  };
  Buffer2.prototype.toLocaleString = Buffer2.prototype.toString;
  Buffer2.prototype.equals = function equals(b) {
    if (!Buffer2.isBuffer(b))
      throw new TypeError("Argument must be a Buffer");
    if (this === b)
      return true;
    return Buffer2.compare(this, b) === 0;
  };
  Buffer2.prototype.inspect = function inspect2() {
    let str = "";
    const max = exports2.INSPECT_MAX_BYTES;
    str = this.toString("hex", 0, max).replace(/(.{2})/g, "$1 ").trim();
    if (this.length > max)
      str += " ... ";
    return "<Buffer " + str + ">";
  };
  if (customInspectSymbol) {
    Buffer2.prototype[customInspectSymbol] = Buffer2.prototype.inspect;
  }
  Buffer2.prototype.compare = function compare(target, start2, end, thisStart, thisEnd) {
    if (isInstance(target, Uint8Array)) {
      target = Buffer2.from(target, target.offset, target.byteLength);
    }
    if (!Buffer2.isBuffer(target)) {
      throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type ' + typeof target);
    }
    if (start2 === void 0) {
      start2 = 0;
    }
    if (end === void 0) {
      end = target ? target.length : 0;
    }
    if (thisStart === void 0) {
      thisStart = 0;
    }
    if (thisEnd === void 0) {
      thisEnd = this.length;
    }
    if (start2 < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
      throw new RangeError("out of range index");
    }
    if (thisStart >= thisEnd && start2 >= end) {
      return 0;
    }
    if (thisStart >= thisEnd) {
      return -1;
    }
    if (start2 >= end) {
      return 1;
    }
    start2 >>>= 0;
    end >>>= 0;
    thisStart >>>= 0;
    thisEnd >>>= 0;
    if (this === target)
      return 0;
    let x = thisEnd - thisStart;
    let y = end - start2;
    const len2 = Math.min(x, y);
    const thisCopy = this.slice(thisStart, thisEnd);
    const targetCopy = target.slice(start2, end);
    for (let i2 = 0; i2 < len2; ++i2) {
      if (thisCopy[i2] !== targetCopy[i2]) {
        x = thisCopy[i2];
        y = targetCopy[i2];
        break;
      }
    }
    if (x < y)
      return -1;
    if (y < x)
      return 1;
    return 0;
  };
  function bidirectionalIndexOf(buffer2, val, byteOffset, encoding, dir) {
    if (buffer2.length === 0)
      return -1;
    if (typeof byteOffset === "string") {
      encoding = byteOffset;
      byteOffset = 0;
    } else if (byteOffset > 2147483647) {
      byteOffset = 2147483647;
    } else if (byteOffset < -2147483648) {
      byteOffset = -2147483648;
    }
    byteOffset = +byteOffset;
    if (numberIsNaN(byteOffset)) {
      byteOffset = dir ? 0 : buffer2.length - 1;
    }
    if (byteOffset < 0)
      byteOffset = buffer2.length + byteOffset;
    if (byteOffset >= buffer2.length) {
      if (dir)
        return -1;
      else
        byteOffset = buffer2.length - 1;
    } else if (byteOffset < 0) {
      if (dir)
        byteOffset = 0;
      else
        return -1;
    }
    if (typeof val === "string") {
      val = Buffer2.from(val, encoding);
    }
    if (Buffer2.isBuffer(val)) {
      if (val.length === 0) {
        return -1;
      }
      return arrayIndexOf(buffer2, val, byteOffset, encoding, dir);
    } else if (typeof val === "number") {
      val = val & 255;
      if (typeof Uint8Array.prototype.indexOf === "function") {
        if (dir) {
          return Uint8Array.prototype.indexOf.call(buffer2, val, byteOffset);
        } else {
          return Uint8Array.prototype.lastIndexOf.call(buffer2, val, byteOffset);
        }
      }
      return arrayIndexOf(buffer2, [val], byteOffset, encoding, dir);
    }
    throw new TypeError("val must be string, number or Buffer");
  }
  function arrayIndexOf(arr, val, byteOffset, encoding, dir) {
    let indexSize = 1;
    let arrLength = arr.length;
    let valLength = val.length;
    if (encoding !== void 0) {
      encoding = String(encoding).toLowerCase();
      if (encoding === "ucs2" || encoding === "ucs-2" || encoding === "utf16le" || encoding === "utf-16le") {
        if (arr.length < 2 || val.length < 2) {
          return -1;
        }
        indexSize = 2;
        arrLength /= 2;
        valLength /= 2;
        byteOffset /= 2;
      }
    }
    function read(buf, i3) {
      if (indexSize === 1) {
        return buf[i3];
      } else {
        return buf.readUInt16BE(i3 * indexSize);
      }
    }
    let i2;
    if (dir) {
      let foundIndex = -1;
      for (i2 = byteOffset; i2 < arrLength; i2++) {
        if (read(arr, i2) === read(val, foundIndex === -1 ? 0 : i2 - foundIndex)) {
          if (foundIndex === -1)
            foundIndex = i2;
          if (i2 - foundIndex + 1 === valLength)
            return foundIndex * indexSize;
        } else {
          if (foundIndex !== -1)
            i2 -= i2 - foundIndex;
          foundIndex = -1;
        }
      }
    } else {
      if (byteOffset + valLength > arrLength)
        byteOffset = arrLength - valLength;
      for (i2 = byteOffset; i2 >= 0; i2--) {
        let found = true;
        for (let j = 0; j < valLength; j++) {
          if (read(arr, i2 + j) !== read(val, j)) {
            found = false;
            break;
          }
        }
        if (found)
          return i2;
      }
    }
    return -1;
  }
  Buffer2.prototype.includes = function includes2(val, byteOffset, encoding) {
    return this.indexOf(val, byteOffset, encoding) !== -1;
  };
  Buffer2.prototype.indexOf = function indexOf2(val, byteOffset, encoding) {
    return bidirectionalIndexOf(this, val, byteOffset, encoding, true);
  };
  Buffer2.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {
    return bidirectionalIndexOf(this, val, byteOffset, encoding, false);
  };
  function hexWrite(buf, string, offset, length) {
    offset = Number(offset) || 0;
    const remaining = buf.length - offset;
    if (!length) {
      length = remaining;
    } else {
      length = Number(length);
      if (length > remaining) {
        length = remaining;
      }
    }
    const strLen = string.length;
    if (length > strLen / 2) {
      length = strLen / 2;
    }
    let i2;
    for (i2 = 0; i2 < length; ++i2) {
      const parsed = parseInt(string.substr(i2 * 2, 2), 16);
      if (numberIsNaN(parsed))
        return i2;
      buf[offset + i2] = parsed;
    }
    return i2;
  }
  function utf8Write(buf, string, offset, length) {
    return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);
  }
  function asciiWrite(buf, string, offset, length) {
    return blitBuffer(asciiToBytes(string), buf, offset, length);
  }
  function base64Write(buf, string, offset, length) {
    return blitBuffer(base64ToBytes(string), buf, offset, length);
  }
  function ucs2Write(buf, string, offset, length) {
    return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);
  }
  Buffer2.prototype.write = function write(string, offset, length, encoding) {
    if (offset === void 0) {
      encoding = "utf8";
      length = this.length;
      offset = 0;
    } else if (length === void 0 && typeof offset === "string") {
      encoding = offset;
      length = this.length;
      offset = 0;
    } else if (isFinite(offset)) {
      offset = offset >>> 0;
      if (isFinite(length)) {
        length = length >>> 0;
        if (encoding === void 0)
          encoding = "utf8";
      } else {
        encoding = length;
        length = void 0;
      }
    } else {
      throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
    }
    const remaining = this.length - offset;
    if (length === void 0 || length > remaining)
      length = remaining;
    if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {
      throw new RangeError("Attempt to write outside buffer bounds");
    }
    if (!encoding)
      encoding = "utf8";
    let loweredCase = false;
    for (; ; ) {
      switch (encoding) {
        case "hex":
          return hexWrite(this, string, offset, length);
        case "utf8":
        case "utf-8":
          return utf8Write(this, string, offset, length);
        case "ascii":
        case "latin1":
        case "binary":
          return asciiWrite(this, string, offset, length);
        case "base64":
          return base64Write(this, string, offset, length);
        case "ucs2":
        case "ucs-2":
        case "utf16le":
        case "utf-16le":
          return ucs2Write(this, string, offset, length);
        default:
          if (loweredCase)
            throw new TypeError("Unknown encoding: " + encoding);
          encoding = ("" + encoding).toLowerCase();
          loweredCase = true;
      }
    }
  };
  Buffer2.prototype.toJSON = function toJSON() {
    return {
      type: "Buffer",
      data: Array.prototype.slice.call(this._arr || this, 0)
    };
  };
  function base64Slice(buf, start2, end) {
    if (start2 === 0 && end === buf.length) {
      return base64.fromByteArray(buf);
    } else {
      return base64.fromByteArray(buf.slice(start2, end));
    }
  }
  function utf8Slice(buf, start2, end) {
    end = Math.min(buf.length, end);
    const res = [];
    let i2 = start2;
    while (i2 < end) {
      const firstByte = buf[i2];
      let codePoint = null;
      let bytesPerSequence = firstByte > 239 ? 4 : firstByte > 223 ? 3 : firstByte > 191 ? 2 : 1;
      if (i2 + bytesPerSequence <= end) {
        let secondByte, thirdByte, fourthByte, tempCodePoint;
        switch (bytesPerSequence) {
          case 1:
            if (firstByte < 128) {
              codePoint = firstByte;
            }
            break;
          case 2:
            secondByte = buf[i2 + 1];
            if ((secondByte & 192) === 128) {
              tempCodePoint = (firstByte & 31) << 6 | secondByte & 63;
              if (tempCodePoint > 127) {
                codePoint = tempCodePoint;
              }
            }
            break;
          case 3:
            secondByte = buf[i2 + 1];
            thirdByte = buf[i2 + 2];
            if ((secondByte & 192) === 128 && (thirdByte & 192) === 128) {
              tempCodePoint = (firstByte & 15) << 12 | (secondByte & 63) << 6 | thirdByte & 63;
              if (tempCodePoint > 2047 && (tempCodePoint < 55296 || tempCodePoint > 57343)) {
                codePoint = tempCodePoint;
              }
            }
            break;
          case 4:
            secondByte = buf[i2 + 1];
            thirdByte = buf[i2 + 2];
            fourthByte = buf[i2 + 3];
            if ((secondByte & 192) === 128 && (thirdByte & 192) === 128 && (fourthByte & 192) === 128) {
              tempCodePoint = (firstByte & 15) << 18 | (secondByte & 63) << 12 | (thirdByte & 63) << 6 | fourthByte & 63;
              if (tempCodePoint > 65535 && tempCodePoint < 1114112) {
                codePoint = tempCodePoint;
              }
            }
        }
      }
      if (codePoint === null) {
        codePoint = 65533;
        bytesPerSequence = 1;
      } else if (codePoint > 65535) {
        codePoint -= 65536;
        res.push(codePoint >>> 10 & 1023 | 55296);
        codePoint = 56320 | codePoint & 1023;
      }
      res.push(codePoint);
      i2 += bytesPerSequence;
    }
    return decodeCodePointsArray(res);
  }
  const MAX_ARGUMENTS_LENGTH = 4096;
  function decodeCodePointsArray(codePoints) {
    const len2 = codePoints.length;
    if (len2 <= MAX_ARGUMENTS_LENGTH) {
      return String.fromCharCode.apply(String, codePoints);
    }
    let res = "";
    let i2 = 0;
    while (i2 < len2) {
      res += String.fromCharCode.apply(String, codePoints.slice(i2, i2 += MAX_ARGUMENTS_LENGTH));
    }
    return res;
  }
  function asciiSlice(buf, start2, end) {
    let ret = "";
    end = Math.min(buf.length, end);
    for (let i2 = start2; i2 < end; ++i2) {
      ret += String.fromCharCode(buf[i2] & 127);
    }
    return ret;
  }
  function latin1Slice(buf, start2, end) {
    let ret = "";
    end = Math.min(buf.length, end);
    for (let i2 = start2; i2 < end; ++i2) {
      ret += String.fromCharCode(buf[i2]);
    }
    return ret;
  }
  function hexSlice(buf, start2, end) {
    const len2 = buf.length;
    if (!start2 || start2 < 0)
      start2 = 0;
    if (!end || end < 0 || end > len2)
      end = len2;
    let out = "";
    for (let i2 = start2; i2 < end; ++i2) {
      out += hexSliceLookupTable[buf[i2]];
    }
    return out;
  }
  function utf16leSlice(buf, start2, end) {
    const bytes = buf.slice(start2, end);
    let res = "";
    for (let i2 = 0; i2 < bytes.length - 1; i2 += 2) {
      res += String.fromCharCode(bytes[i2] + bytes[i2 + 1] * 256);
    }
    return res;
  }
  Buffer2.prototype.slice = function slice(start2, end) {
    const len2 = this.length;
    start2 = ~~start2;
    end = end === void 0 ? len2 : ~~end;
    if (start2 < 0) {
      start2 += len2;
      if (start2 < 0)
        start2 = 0;
    } else if (start2 > len2) {
      start2 = len2;
    }
    if (end < 0) {
      end += len2;
      if (end < 0)
        end = 0;
    } else if (end > len2) {
      end = len2;
    }
    if (end < start2)
      end = start2;
    const newBuf = this.subarray(start2, end);
    Object.setPrototypeOf(newBuf, Buffer2.prototype);
    return newBuf;
  };
  function checkOffset(offset, ext, length) {
    if (offset % 1 !== 0 || offset < 0)
      throw new RangeError("offset is not uint");
    if (offset + ext > length)
      throw new RangeError("Trying to access beyond buffer length");
  }
  Buffer2.prototype.readUintLE = Buffer2.prototype.readUIntLE = function readUIntLE(offset, byteLength3, noAssert) {
    offset = offset >>> 0;
    byteLength3 = byteLength3 >>> 0;
    if (!noAssert)
      checkOffset(offset, byteLength3, this.length);
    let val = this[offset];
    let mul = 1;
    let i2 = 0;
    while (++i2 < byteLength3 && (mul *= 256)) {
      val += this[offset + i2] * mul;
    }
    return val;
  };
  Buffer2.prototype.readUintBE = Buffer2.prototype.readUIntBE = function readUIntBE(offset, byteLength3, noAssert) {
    offset = offset >>> 0;
    byteLength3 = byteLength3 >>> 0;
    if (!noAssert) {
      checkOffset(offset, byteLength3, this.length);
    }
    let val = this[offset + --byteLength3];
    let mul = 1;
    while (byteLength3 > 0 && (mul *= 256)) {
      val += this[offset + --byteLength3] * mul;
    }
    return val;
  };
  Buffer2.prototype.readUint8 = Buffer2.prototype.readUInt8 = function readUInt8(offset, noAssert) {
    offset = offset >>> 0;
    if (!noAssert)
      checkOffset(offset, 1, this.length);
    return this[offset];
  };
  Buffer2.prototype.readUint16LE = Buffer2.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {
    offset = offset >>> 0;
    if (!noAssert)
      checkOffset(offset, 2, this.length);
    return this[offset] | this[offset + 1] << 8;
  };
  Buffer2.prototype.readUint16BE = Buffer2.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {
    offset = offset >>> 0;
    if (!noAssert)
      checkOffset(offset, 2, this.length);
    return this[offset] << 8 | this[offset + 1];
  };
  Buffer2.prototype.readUint32LE = Buffer2.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {
    offset = offset >>> 0;
    if (!noAssert)
      checkOffset(offset, 4, this.length);
    return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 16777216;
  };
  Buffer2.prototype.readUint32BE = Buffer2.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {
    offset = offset >>> 0;
    if (!noAssert)
      checkOffset(offset, 4, this.length);
    return this[offset] * 16777216 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);
  };
  Buffer2.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE(offset) {
    offset = offset >>> 0;
    validateNumber(offset, "offset");
    const first = this[offset];
    const last = this[offset + 7];
    if (first === void 0 || last === void 0) {
      boundsError(offset, this.length - 8);
    }
    const lo = first + this[++offset] * 2 ** 8 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 24;
    const hi = this[++offset] + this[++offset] * 2 ** 8 + this[++offset] * 2 ** 16 + last * 2 ** 24;
    return BigInt(lo) + (BigInt(hi) << BigInt(32));
  });
  Buffer2.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE(offset) {
    offset = offset >>> 0;
    validateNumber(offset, "offset");
    const first = this[offset];
    const last = this[offset + 7];
    if (first === void 0 || last === void 0) {
      boundsError(offset, this.length - 8);
    }
    const hi = first * 2 ** 24 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + this[++offset];
    const lo = this[++offset] * 2 ** 24 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + last;
    return (BigInt(hi) << BigInt(32)) + BigInt(lo);
  });
  Buffer2.prototype.readIntLE = function readIntLE(offset, byteLength3, noAssert) {
    offset = offset >>> 0;
    byteLength3 = byteLength3 >>> 0;
    if (!noAssert)
      checkOffset(offset, byteLength3, this.length);
    let val = this[offset];
    let mul = 1;
    let i2 = 0;
    while (++i2 < byteLength3 && (mul *= 256)) {
      val += this[offset + i2] * mul;
    }
    mul *= 128;
    if (val >= mul)
      val -= Math.pow(2, 8 * byteLength3);
    return val;
  };
  Buffer2.prototype.readIntBE = function readIntBE(offset, byteLength3, noAssert) {
    offset = offset >>> 0;
    byteLength3 = byteLength3 >>> 0;
    if (!noAssert)
      checkOffset(offset, byteLength3, this.length);
    let i2 = byteLength3;
    let mul = 1;
    let val = this[offset + --i2];
    while (i2 > 0 && (mul *= 256)) {
      val += this[offset + --i2] * mul;
    }
    mul *= 128;
    if (val >= mul)
      val -= Math.pow(2, 8 * byteLength3);
    return val;
  };
  Buffer2.prototype.readInt8 = function readInt8(offset, noAssert) {
    offset = offset >>> 0;
    if (!noAssert)
      checkOffset(offset, 1, this.length);
    if (!(this[offset] & 128))
      return this[offset];
    return (255 - this[offset] + 1) * -1;
  };
  Buffer2.prototype.readInt16LE = function readInt16LE(offset, noAssert) {
    offset = offset >>> 0;
    if (!noAssert)
      checkOffset(offset, 2, this.length);
    const val = this[offset] | this[offset + 1] << 8;
    return val & 32768 ? val | 4294901760 : val;
  };
  Buffer2.prototype.readInt16BE = function readInt16BE(offset, noAssert) {
    offset = offset >>> 0;
    if (!noAssert)
      checkOffset(offset, 2, this.length);
    const val = this[offset + 1] | this[offset] << 8;
    return val & 32768 ? val | 4294901760 : val;
  };
  Buffer2.prototype.readInt32LE = function readInt32LE(offset, noAssert) {
    offset = offset >>> 0;
    if (!noAssert)
      checkOffset(offset, 4, this.length);
    return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;
  };
  Buffer2.prototype.readInt32BE = function readInt32BE(offset, noAssert) {
    offset = offset >>> 0;
    if (!noAssert)
      checkOffset(offset, 4, this.length);
    return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];
  };
  Buffer2.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE(offset) {
    offset = offset >>> 0;
    validateNumber(offset, "offset");
    const first = this[offset];
    const last = this[offset + 7];
    if (first === void 0 || last === void 0) {
      boundsError(offset, this.length - 8);
    }
    const val = this[offset + 4] + this[offset + 5] * 2 ** 8 + this[offset + 6] * 2 ** 16 + (last << 24);
    return (BigInt(val) << BigInt(32)) + BigInt(first + this[++offset] * 2 ** 8 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 24);
  });
  Buffer2.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE(offset) {
    offset = offset >>> 0;
    validateNumber(offset, "offset");
    const first = this[offset];
    const last = this[offset + 7];
    if (first === void 0 || last === void 0) {
      boundsError(offset, this.length - 8);
    }
    const val = (first << 24) + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + this[++offset];
    return (BigInt(val) << BigInt(32)) + BigInt(this[++offset] * 2 ** 24 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + last);
  });
  Buffer2.prototype.readFloatLE = function readFloatLE(offset, noAssert) {
    offset = offset >>> 0;
    if (!noAssert)
      checkOffset(offset, 4, this.length);
    return ieee754$1.read(this, offset, true, 23, 4);
  };
  Buffer2.prototype.readFloatBE = function readFloatBE(offset, noAssert) {
    offset = offset >>> 0;
    if (!noAssert)
      checkOffset(offset, 4, this.length);
    return ieee754$1.read(this, offset, false, 23, 4);
  };
  Buffer2.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {
    offset = offset >>> 0;
    if (!noAssert)
      checkOffset(offset, 8, this.length);
    return ieee754$1.read(this, offset, true, 52, 8);
  };
  Buffer2.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {
    offset = offset >>> 0;
    if (!noAssert)
      checkOffset(offset, 8, this.length);
    return ieee754$1.read(this, offset, false, 52, 8);
  };
  function checkInt(buf, value, offset, ext, max, min) {
    if (!Buffer2.isBuffer(buf))
      throw new TypeError('"buffer" argument must be a Buffer instance');
    if (value > max || value < min)
      throw new RangeError('"value" argument is out of bounds');
    if (offset + ext > buf.length)
      throw new RangeError("Index out of range");
  }
  Buffer2.prototype.writeUintLE = Buffer2.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength3, noAssert) {
    value = +value;
    offset = offset >>> 0;
    byteLength3 = byteLength3 >>> 0;
    if (!noAssert) {
      const maxBytes = Math.pow(2, 8 * byteLength3) - 1;
      checkInt(this, value, offset, byteLength3, maxBytes, 0);
    }
    let mul = 1;
    let i2 = 0;
    this[offset] = value & 255;
    while (++i2 < byteLength3 && (mul *= 256)) {
      this[offset + i2] = value / mul & 255;
    }
    return offset + byteLength3;
  };
  Buffer2.prototype.writeUintBE = Buffer2.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength3, noAssert) {
    value = +value;
    offset = offset >>> 0;
    byteLength3 = byteLength3 >>> 0;
    if (!noAssert) {
      const maxBytes = Math.pow(2, 8 * byteLength3) - 1;
      checkInt(this, value, offset, byteLength3, maxBytes, 0);
    }
    let i2 = byteLength3 - 1;
    let mul = 1;
    this[offset + i2] = value & 255;
    while (--i2 >= 0 && (mul *= 256)) {
      this[offset + i2] = value / mul & 255;
    }
    return offset + byteLength3;
  };
  Buffer2.prototype.writeUint8 = Buffer2.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {
    value = +value;
    offset = offset >>> 0;
    if (!noAssert)
      checkInt(this, value, offset, 1, 255, 0);
    this[offset] = value & 255;
    return offset + 1;
  };
  Buffer2.prototype.writeUint16LE = Buffer2.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {
    value = +value;
    offset = offset >>> 0;
    if (!noAssert)
      checkInt(this, value, offset, 2, 65535, 0);
    this[offset] = value & 255;
    this[offset + 1] = value >>> 8;
    return offset + 2;
  };
  Buffer2.prototype.writeUint16BE = Buffer2.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {
    value = +value;
    offset = offset >>> 0;
    if (!noAssert)
      checkInt(this, value, offset, 2, 65535, 0);
    this[offset] = value >>> 8;
    this[offset + 1] = value & 255;
    return offset + 2;
  };
  Buffer2.prototype.writeUint32LE = Buffer2.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {
    value = +value;
    offset = offset >>> 0;
    if (!noAssert)
      checkInt(this, value, offset, 4, 4294967295, 0);
    this[offset + 3] = value >>> 24;
    this[offset + 2] = value >>> 16;
    this[offset + 1] = value >>> 8;
    this[offset] = value & 255;
    return offset + 4;
  };
  Buffer2.prototype.writeUint32BE = Buffer2.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {
    value = +value;
    offset = offset >>> 0;
    if (!noAssert)
      checkInt(this, value, offset, 4, 4294967295, 0);
    this[offset] = value >>> 24;
    this[offset + 1] = value >>> 16;
    this[offset + 2] = value >>> 8;
    this[offset + 3] = value & 255;
    return offset + 4;
  };
  function wrtBigUInt64LE(buf, value, offset, min, max) {
    checkIntBI(value, min, max, buf, offset, 7);
    let lo = Number(value & BigInt(4294967295));
    buf[offset++] = lo;
    lo = lo >> 8;
    buf[offset++] = lo;
    lo = lo >> 8;
    buf[offset++] = lo;
    lo = lo >> 8;
    buf[offset++] = lo;
    let hi = Number(value >> BigInt(32) & BigInt(4294967295));
    buf[offset++] = hi;
    hi = hi >> 8;
    buf[offset++] = hi;
    hi = hi >> 8;
    buf[offset++] = hi;
    hi = hi >> 8;
    buf[offset++] = hi;
    return offset;
  }
  function wrtBigUInt64BE(buf, value, offset, min, max) {
    checkIntBI(value, min, max, buf, offset, 7);
    let lo = Number(value & BigInt(4294967295));
    buf[offset + 7] = lo;
    lo = lo >> 8;
    buf[offset + 6] = lo;
    lo = lo >> 8;
    buf[offset + 5] = lo;
    lo = lo >> 8;
    buf[offset + 4] = lo;
    let hi = Number(value >> BigInt(32) & BigInt(4294967295));
    buf[offset + 3] = hi;
    hi = hi >> 8;
    buf[offset + 2] = hi;
    hi = hi >> 8;
    buf[offset + 1] = hi;
    hi = hi >> 8;
    buf[offset] = hi;
    return offset + 8;
  }
  Buffer2.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE(value, offset = 0) {
    return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt("0xffffffffffffffff"));
  });
  Buffer2.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE(value, offset = 0) {
    return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt("0xffffffffffffffff"));
  });
  Buffer2.prototype.writeIntLE = function writeIntLE(value, offset, byteLength3, noAssert) {
    value = +value;
    offset = offset >>> 0;
    if (!noAssert) {
      const limit = Math.pow(2, 8 * byteLength3 - 1);
      checkInt(this, value, offset, byteLength3, limit - 1, -limit);
    }
    let i2 = 0;
    let mul = 1;
    let sub = 0;
    this[offset] = value & 255;
    while (++i2 < byteLength3 && (mul *= 256)) {
      if (value < 0 && sub === 0 && this[offset + i2 - 1] !== 0) {
        sub = 1;
      }
      this[offset + i2] = (value / mul >> 0) - sub & 255;
    }
    return offset + byteLength3;
  };
  Buffer2.prototype.writeIntBE = function writeIntBE(value, offset, byteLength3, noAssert) {
    value = +value;
    offset = offset >>> 0;
    if (!noAssert) {
      const limit = Math.pow(2, 8 * byteLength3 - 1);
      checkInt(this, value, offset, byteLength3, limit - 1, -limit);
    }
    let i2 = byteLength3 - 1;
    let mul = 1;
    let sub = 0;
    this[offset + i2] = value & 255;
    while (--i2 >= 0 && (mul *= 256)) {
      if (value < 0 && sub === 0 && this[offset + i2 + 1] !== 0) {
        sub = 1;
      }
      this[offset + i2] = (value / mul >> 0) - sub & 255;
    }
    return offset + byteLength3;
  };
  Buffer2.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {
    value = +value;
    offset = offset >>> 0;
    if (!noAssert)
      checkInt(this, value, offset, 1, 127, -128);
    if (value < 0)
      value = 255 + value + 1;
    this[offset] = value & 255;
    return offset + 1;
  };
  Buffer2.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {
    value = +value;
    offset = offset >>> 0;
    if (!noAssert)
      checkInt(this, value, offset, 2, 32767, -32768);
    this[offset] = value & 255;
    this[offset + 1] = value >>> 8;
    return offset + 2;
  };
  Buffer2.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {
    value = +value;
    offset = offset >>> 0;
    if (!noAssert)
      checkInt(this, value, offset, 2, 32767, -32768);
    this[offset] = value >>> 8;
    this[offset + 1] = value & 255;
    return offset + 2;
  };
  Buffer2.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {
    value = +value;
    offset = offset >>> 0;
    if (!noAssert)
      checkInt(this, value, offset, 4, 2147483647, -2147483648);
    this[offset] = value & 255;
    this[offset + 1] = value >>> 8;
    this[offset + 2] = value >>> 16;
    this[offset + 3] = value >>> 24;
    return offset + 4;
  };
  Buffer2.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {
    value = +value;
    offset = offset >>> 0;
    if (!noAssert)
      checkInt(this, value, offset, 4, 2147483647, -2147483648);
    if (value < 0)
      value = 4294967295 + value + 1;
    this[offset] = value >>> 24;
    this[offset + 1] = value >>> 16;
    this[offset + 2] = value >>> 8;
    this[offset + 3] = value & 255;
    return offset + 4;
  };
  Buffer2.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE(value, offset = 0) {
    return wrtBigUInt64LE(this, value, offset, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));
  });
  Buffer2.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE(value, offset = 0) {
    return wrtBigUInt64BE(this, value, offset, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));
  });
  function checkIEEE754(buf, value, offset, ext, max, min) {
    if (offset + ext > buf.length)
      throw new RangeError("Index out of range");
    if (offset < 0)
      throw new RangeError("Index out of range");
  }
  function writeFloat(buf, value, offset, littleEndian, noAssert) {
    value = +value;
    offset = offset >>> 0;
    if (!noAssert) {
      checkIEEE754(buf, value, offset, 4);
    }
    ieee754$1.write(buf, value, offset, littleEndian, 23, 4);
    return offset + 4;
  }
  Buffer2.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {
    return writeFloat(this, value, offset, true, noAssert);
  };
  Buffer2.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {
    return writeFloat(this, value, offset, false, noAssert);
  };
  function writeDouble(buf, value, offset, littleEndian, noAssert) {
    value = +value;
    offset = offset >>> 0;
    if (!noAssert) {
      checkIEEE754(buf, value, offset, 8);
    }
    ieee754$1.write(buf, value, offset, littleEndian, 52, 8);
    return offset + 8;
  }
  Buffer2.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {
    return writeDouble(this, value, offset, true, noAssert);
  };
  Buffer2.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {
    return writeDouble(this, value, offset, false, noAssert);
  };
  Buffer2.prototype.copy = function copy(target, targetStart, start2, end) {
    if (!Buffer2.isBuffer(target))
      throw new TypeError("argument should be a Buffer");
    if (!start2)
      start2 = 0;
    if (!end && end !== 0)
      end = this.length;
    if (targetStart >= target.length)
      targetStart = target.length;
    if (!targetStart)
      targetStart = 0;
    if (end > 0 && end < start2)
      end = start2;
    if (end === start2)
      return 0;
    if (target.length === 0 || this.length === 0)
      return 0;
    if (targetStart < 0) {
      throw new RangeError("targetStart out of bounds");
    }
    if (start2 < 0 || start2 >= this.length)
      throw new RangeError("Index out of range");
    if (end < 0)
      throw new RangeError("sourceEnd out of bounds");
    if (end > this.length)
      end = this.length;
    if (target.length - targetStart < end - start2) {
      end = target.length - targetStart + start2;
    }
    const len2 = end - start2;
    if (this === target && typeof Uint8Array.prototype.copyWithin === "function") {
      this.copyWithin(targetStart, start2, end);
    } else {
      Uint8Array.prototype.set.call(target, this.subarray(start2, end), targetStart);
    }
    return len2;
  };
  Buffer2.prototype.fill = function fill(val, start2, end, encoding) {
    if (typeof val === "string") {
      if (typeof start2 === "string") {
        encoding = start2;
        start2 = 0;
        end = this.length;
      } else if (typeof end === "string") {
        encoding = end;
        end = this.length;
      }
      if (encoding !== void 0 && typeof encoding !== "string") {
        throw new TypeError("encoding must be a string");
      }
      if (typeof encoding === "string" && !Buffer2.isEncoding(encoding)) {
        throw new TypeError("Unknown encoding: " + encoding);
      }
      if (val.length === 1) {
        const code2 = val.charCodeAt(0);
        if (encoding === "utf8" && code2 < 128 || encoding === "latin1") {
          val = code2;
        }
      }
    } else if (typeof val === "number") {
      val = val & 255;
    } else if (typeof val === "boolean") {
      val = Number(val);
    }
    if (start2 < 0 || this.length < start2 || this.length < end) {
      throw new RangeError("Out of range index");
    }
    if (end <= start2) {
      return this;
    }
    start2 = start2 >>> 0;
    end = end === void 0 ? this.length : end >>> 0;
    if (!val)
      val = 0;
    let i2;
    if (typeof val === "number") {
      for (i2 = start2; i2 < end; ++i2) {
        this[i2] = val;
      }
    } else {
      const bytes = Buffer2.isBuffer(val) ? val : Buffer2.from(val, encoding);
      const len2 = bytes.length;
      if (len2 === 0) {
        throw new TypeError('The value "' + val + '" is invalid for argument "value"');
      }
      for (i2 = 0; i2 < end - start2; ++i2) {
        this[i2 + start2] = bytes[i2 % len2];
      }
    }
    return this;
  };
  const errors = {};
  function E(sym, getMessage, Base) {
    errors[sym] = class NodeError extends Base {
      constructor() {
        super();
        Object.defineProperty(this, "message", {
          value: getMessage.apply(this, arguments),
          writable: true,
          configurable: true
        });
        this.name = `${this.name} [${sym}]`;
        this.stack;
        delete this.name;
      }
      get code() {
        return sym;
      }
      set code(value) {
        Object.defineProperty(this, "code", {
          configurable: true,
          enumerable: true,
          value,
          writable: true
        });
      }
      toString() {
        return `${this.name} [${sym}]: ${this.message}`;
      }
    };
  }
  E("ERR_BUFFER_OUT_OF_BOUNDS", function(name) {
    if (name) {
      return `${name} is outside of buffer bounds`;
    }
    return "Attempt to access memory outside buffer bounds";
  }, RangeError);
  E("ERR_INVALID_ARG_TYPE", function(name, actual) {
    return `The "${name}" argument must be of type number. Received type ${typeof actual}`;
  }, TypeError);
  E("ERR_OUT_OF_RANGE", function(str, range, input) {
    let msg = `The value of "${str}" is out of range.`;
    let received = input;
    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {
      received = addNumericalSeparator(String(input));
    } else if (typeof input === "bigint") {
      received = String(input);
      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {
        received = addNumericalSeparator(received);
      }
      received += "n";
    }
    msg += ` It must be ${range}. Received ${received}`;
    return msg;
  }, RangeError);
  function addNumericalSeparator(val) {
    let res = "";
    let i2 = val.length;
    const start2 = val[0] === "-" ? 1 : 0;
    for (; i2 >= start2 + 4; i2 -= 3) {
      res = `_${val.slice(i2 - 3, i2)}${res}`;
    }
    return `${val.slice(0, i2)}${res}`;
  }
  function checkBounds(buf, offset, byteLength3) {
    validateNumber(offset, "offset");
    if (buf[offset] === void 0 || buf[offset + byteLength3] === void 0) {
      boundsError(offset, buf.length - (byteLength3 + 1));
    }
  }
  function checkIntBI(value, min, max, buf, offset, byteLength3) {
    if (value > max || value < min) {
      const n = typeof min === "bigint" ? "n" : "";
      let range;
      if (byteLength3 > 3) {
        if (min === 0 || min === BigInt(0)) {
          range = `>= 0${n} and < 2${n} ** ${(byteLength3 + 1) * 8}${n}`;
        } else {
          range = `>= -(2${n} ** ${(byteLength3 + 1) * 8 - 1}${n}) and < 2 ** ${(byteLength3 + 1) * 8 - 1}${n}`;
        }
      } else {
        range = `>= ${min}${n} and <= ${max}${n}`;
      }
      throw new errors.ERR_OUT_OF_RANGE("value", range, value);
    }
    checkBounds(buf, offset, byteLength3);
  }
  function validateNumber(value, name) {
    if (typeof value !== "number") {
      throw new errors.ERR_INVALID_ARG_TYPE(name, "number", value);
    }
  }
  function boundsError(value, length, type) {
    if (Math.floor(value) !== value) {
      validateNumber(value, type);
      throw new errors.ERR_OUT_OF_RANGE(type || "offset", "an integer", value);
    }
    if (length < 0) {
      throw new errors.ERR_BUFFER_OUT_OF_BOUNDS();
    }
    throw new errors.ERR_OUT_OF_RANGE(type || "offset", `>= ${type ? 1 : 0} and <= ${length}`, value);
  }
  const INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g;
  function base64clean(str) {
    str = str.split("=")[0];
    str = str.trim().replace(INVALID_BASE64_RE, "");
    if (str.length < 2)
      return "";
    while (str.length % 4 !== 0) {
      str = str + "=";
    }
    return str;
  }
  function utf8ToBytes(string, units) {
    units = units || Infinity;
    let codePoint;
    const length = string.length;
    let leadSurrogate = null;
    const bytes = [];
    for (let i2 = 0; i2 < length; ++i2) {
      codePoint = string.charCodeAt(i2);
      if (codePoint > 55295 && codePoint < 57344) {
        if (!leadSurrogate) {
          if (codePoint > 56319) {
            if ((units -= 3) > -1)
              bytes.push(239, 191, 189);
            continue;
          } else if (i2 + 1 === length) {
            if ((units -= 3) > -1)
              bytes.push(239, 191, 189);
            continue;
          }
          leadSurrogate = codePoint;
          continue;
        }
        if (codePoint < 56320) {
          if ((units -= 3) > -1)
            bytes.push(239, 191, 189);
          leadSurrogate = codePoint;
          continue;
        }
        codePoint = (leadSurrogate - 55296 << 10 | codePoint - 56320) + 65536;
      } else if (leadSurrogate) {
        if ((units -= 3) > -1)
          bytes.push(239, 191, 189);
      }
      leadSurrogate = null;
      if (codePoint < 128) {
        if ((units -= 1) < 0)
          break;
        bytes.push(codePoint);
      } else if (codePoint < 2048) {
        if ((units -= 2) < 0)
          break;
        bytes.push(codePoint >> 6 | 192, codePoint & 63 | 128);
      } else if (codePoint < 65536) {
        if ((units -= 3) < 0)
          break;
        bytes.push(codePoint >> 12 | 224, codePoint >> 6 & 63 | 128, codePoint & 63 | 128);
      } else if (codePoint < 1114112) {
        if ((units -= 4) < 0)
          break;
        bytes.push(codePoint >> 18 | 240, codePoint >> 12 & 63 | 128, codePoint >> 6 & 63 | 128, codePoint & 63 | 128);
      } else {
        throw new Error("Invalid code point");
      }
    }
    return bytes;
  }
  function asciiToBytes(str) {
    const byteArray = [];
    for (let i2 = 0; i2 < str.length; ++i2) {
      byteArray.push(str.charCodeAt(i2) & 255);
    }
    return byteArray;
  }
  function utf16leToBytes(str, units) {
    let c, hi, lo;
    const byteArray = [];
    for (let i2 = 0; i2 < str.length; ++i2) {
      if ((units -= 2) < 0)
        break;
      c = str.charCodeAt(i2);
      hi = c >> 8;
      lo = c % 256;
      byteArray.push(lo);
      byteArray.push(hi);
    }
    return byteArray;
  }
  function base64ToBytes(str) {
    return base64.toByteArray(base64clean(str));
  }
  function blitBuffer(src, dst, offset, length) {
    let i2;
    for (i2 = 0; i2 < length; ++i2) {
      if (i2 + offset >= dst.length || i2 >= src.length)
        break;
      dst[i2 + offset] = src[i2];
    }
    return i2;
  }
  function isInstance(obj, type) {
    return obj instanceof type || obj != null && obj.constructor != null && obj.constructor.name != null && obj.constructor.name === type.name;
  }
  function numberIsNaN(obj) {
    return obj !== obj;
  }
  const hexSliceLookupTable = function() {
    const alphabet = "0123456789abcdef";
    const table = new Array(256);
    for (let i2 = 0; i2 < 16; ++i2) {
      const i16 = i2 * 16;
      for (let j = 0; j < 16; ++j) {
        table[i16 + j] = alphabet[i2] + alphabet[j];
      }
    }
    return table;
  }();
  function defineBigIntMethod(fn) {
    return typeof BigInt === "undefined" ? BufferBigIntNotDefined : fn;
  }
  function BufferBigIntNotDefined() {
    throw new Error("BigInt not supported");
  }
})(buffer);
function noop$2() {
}
const identity = (x) => x;
function assign(tar, src) {
  for (const k in src)
    tar[k] = src[k];
  return tar;
}
function run(fn) {
  return fn();
}
function blank_object() {
  return Object.create(null);
}
function run_all(fns) {
  fns.forEach(run);
}
function is_function(thing) {
  return typeof thing === "function";
}
function safe_not_equal(a, b) {
  return a != a ? b == b : a !== b || (a && typeof a === "object" || typeof a === "function");
}
let src_url_equal_anchor;
function src_url_equal(element_src, url) {
  if (!src_url_equal_anchor) {
    src_url_equal_anchor = document.createElement("a");
  }
  src_url_equal_anchor.href = url;
  return element_src === src_url_equal_anchor.href;
}
function is_empty(obj) {
  return Object.keys(obj).length === 0;
}
function subscribe(store, ...callbacks) {
  if (store == null) {
    return noop$2;
  }
  const unsub = store.subscribe(...callbacks);
  return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;
}
function component_subscribe(component, store, callback) {
  component.$$.on_destroy.push(subscribe(store, callback));
}
function create_slot(definition, ctx, $$scope, fn) {
  if (definition) {
    const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);
    return definition[0](slot_ctx);
  }
}
function get_slot_context(definition, ctx, $$scope, fn) {
  return definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;
}
function get_slot_changes(definition, $$scope, dirty, fn) {
  if (definition[2] && fn) {
    const lets = definition[2](fn(dirty));
    if ($$scope.dirty === void 0) {
      return lets;
    }
    if (typeof lets === "object") {
      const merged = [];
      const len2 = Math.max($$scope.dirty.length, lets.length);
      for (let i2 = 0; i2 < len2; i2 += 1) {
        merged[i2] = $$scope.dirty[i2] | lets[i2];
      }
      return merged;
    }
    return $$scope.dirty | lets;
  }
  return $$scope.dirty;
}
function update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {
  if (slot_changes) {
    const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);
    slot.p(slot_context, slot_changes);
  }
}
function get_all_dirty_from_scope($$scope) {
  if ($$scope.ctx.length > 32) {
    const dirty = [];
    const length = $$scope.ctx.length / 32;
    for (let i2 = 0; i2 < length; i2++) {
      dirty[i2] = -1;
    }
    return dirty;
  }
  return -1;
}
function null_to_empty(value) {
  return value == null ? "" : value;
}
function set_store_value(store, ret, value) {
  store.set(value);
  return ret;
}
const is_client = typeof window !== "undefined";
let now = is_client ? () => window.performance.now() : () => Date.now();
let raf = is_client ? (cb) => requestAnimationFrame(cb) : noop$2;
const tasks = new Set();
function run_tasks(now2) {
  tasks.forEach((task) => {
    if (!task.c(now2)) {
      tasks.delete(task);
      task.f();
    }
  });
  if (tasks.size !== 0)
    raf(run_tasks);
}
function loop(callback) {
  let task;
  if (tasks.size === 0)
    raf(run_tasks);
  return {
    promise: new Promise((fulfill) => {
      tasks.add(task = { c: callback, f: fulfill });
    }),
    abort() {
      tasks.delete(task);
    }
  };
}
function append(target, node) {
  target.appendChild(node);
}
function get_root_for_style(node) {
  if (!node)
    return document;
  const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;
  if (root && root.host) {
    return root;
  }
  return node.ownerDocument;
}
function append_empty_stylesheet(node) {
  const style_element = element("style");
  append_stylesheet(get_root_for_style(node), style_element);
  return style_element;
}
function append_stylesheet(node, style) {
  append(node.head || node, style);
}
function insert(target, node, anchor) {
  target.insertBefore(node, anchor || null);
}
function detach(node) {
  node.parentNode.removeChild(node);
}
function destroy_each(iterations, detaching) {
  for (let i2 = 0; i2 < iterations.length; i2 += 1) {
    if (iterations[i2])
      iterations[i2].d(detaching);
  }
}
function element(name) {
  return document.createElement(name);
}
function svg_element(name) {
  return document.createElementNS("http://www.w3.org/2000/svg", name);
}
function text(data) {
  return document.createTextNode(data);
}
function space() {
  return text(" ");
}
function empty() {
  return text("");
}
function listen(node, event, handler, options) {
  node.addEventListener(event, handler, options);
  return () => node.removeEventListener(event, handler, options);
}
function attr(node, attribute, value) {
  if (value == null)
    node.removeAttribute(attribute);
  else if (node.getAttribute(attribute) !== value)
    node.setAttribute(attribute, value);
}
function set_svg_attributes(node, attributes) {
  for (const key in attributes) {
    attr(node, key, attributes[key]);
  }
}
function children(element2) {
  return Array.from(element2.childNodes);
}
function set_data(text2, data) {
  data = "" + data;
  if (text2.wholeText !== data)
    text2.data = data;
}
function set_input_value(input, value) {
  input.value = value == null ? "" : value;
}
function toggle_class(element2, name, toggle) {
  element2.classList[toggle ? "add" : "remove"](name);
}
function custom_event(type, detail, bubbles = false) {
  const e = document.createEvent("CustomEvent");
  e.initCustomEvent(type, bubbles, false, detail);
  return e;
}
const active_docs = new Set();
let active = 0;
function hash(str) {
  let hash2 = 5381;
  let i2 = str.length;
  while (i2--)
    hash2 = (hash2 << 5) - hash2 ^ str.charCodeAt(i2);
  return hash2 >>> 0;
}
function create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {
  const step = 16.666 / duration;
  let keyframes = "{\n";
  for (let p2 = 0; p2 <= 1; p2 += step) {
    const t = a + (b - a) * ease(p2);
    keyframes += p2 * 100 + `%{${fn(t, 1 - t)}}
`;
  }
  const rule = keyframes + `100% {${fn(b, 1 - b)}}
}`;
  const name = `__svelte_${hash(rule)}_${uid}`;
  const doc = get_root_for_style(node);
  active_docs.add(doc);
  const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = append_empty_stylesheet(node).sheet);
  const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});
  if (!current_rules[name]) {
    current_rules[name] = true;
    stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);
  }
  const animation = node.style.animation || "";
  node.style.animation = `${animation ? `${animation}, ` : ""}${name} ${duration}ms linear ${delay}ms 1 both`;
  active += 1;
  return name;
}
function delete_rule(node, name) {
  const previous = (node.style.animation || "").split(", ");
  const next2 = previous.filter(name ? (anim) => anim.indexOf(name) < 0 : (anim) => anim.indexOf("__svelte") === -1);
  const deleted = previous.length - next2.length;
  if (deleted) {
    node.style.animation = next2.join(", ");
    active -= deleted;
    if (!active)
      clear_rules();
  }
}
function clear_rules() {
  raf(() => {
    if (active)
      return;
    active_docs.forEach((doc) => {
      const stylesheet = doc.__svelte_stylesheet;
      let i2 = stylesheet.cssRules.length;
      while (i2--)
        stylesheet.deleteRule(i2);
      doc.__svelte_rules = {};
    });
    active_docs.clear();
  });
}
let current_component;
function set_current_component(component) {
  current_component = component;
}
function get_current_component() {
  if (!current_component)
    throw new Error("Function called outside component initialization");
  return current_component;
}
function onMount(fn) {
  get_current_component().$$.on_mount.push(fn);
}
function afterUpdate(fn) {
  get_current_component().$$.after_update.push(fn);
}
function onDestroy(fn) {
  get_current_component().$$.on_destroy.push(fn);
}
function createEventDispatcher() {
  const component = get_current_component();
  return (type, detail) => {
    const callbacks = component.$$.callbacks[type];
    if (callbacks) {
      const event = custom_event(type, detail);
      callbacks.slice().forEach((fn) => {
        fn.call(component, event);
      });
    }
  };
}
function bubble(component, event) {
  const callbacks = component.$$.callbacks[event.type];
  if (callbacks) {
    callbacks.slice().forEach((fn) => fn.call(this, event));
  }
}
const dirty_components = [];
const binding_callbacks = [];
const render_callbacks = [];
const flush_callbacks = [];
const resolved_promise = Promise.resolve();
let update_scheduled = false;
function schedule_update() {
  if (!update_scheduled) {
    update_scheduled = true;
    resolved_promise.then(flush);
  }
}
function tick() {
  schedule_update();
  return resolved_promise;
}
function add_render_callback(fn) {
  render_callbacks.push(fn);
}
function add_flush_callback(fn) {
  flush_callbacks.push(fn);
}
let flushing = false;
const seen_callbacks = new Set();
function flush() {
  if (flushing)
    return;
  flushing = true;
  do {
    for (let i2 = 0; i2 < dirty_components.length; i2 += 1) {
      const component = dirty_components[i2];
      set_current_component(component);
      update(component.$$);
    }
    set_current_component(null);
    dirty_components.length = 0;
    while (binding_callbacks.length)
      binding_callbacks.pop()();
    for (let i2 = 0; i2 < render_callbacks.length; i2 += 1) {
      const callback = render_callbacks[i2];
      if (!seen_callbacks.has(callback)) {
        seen_callbacks.add(callback);
        callback();
      }
    }
    render_callbacks.length = 0;
  } while (dirty_components.length);
  while (flush_callbacks.length) {
    flush_callbacks.pop()();
  }
  update_scheduled = false;
  flushing = false;
  seen_callbacks.clear();
}
function update($$) {
  if ($$.fragment !== null) {
    $$.update();
    run_all($$.before_update);
    const dirty = $$.dirty;
    $$.dirty = [-1];
    $$.fragment && $$.fragment.p($$.ctx, dirty);
    $$.after_update.forEach(add_render_callback);
  }
}
let promise;
function wait() {
  if (!promise) {
    promise = Promise.resolve();
    promise.then(() => {
      promise = null;
    });
  }
  return promise;
}
function dispatch(node, direction, kind) {
  node.dispatchEvent(custom_event(`${direction ? "intro" : "outro"}${kind}`));
}
const outroing = new Set();
let outros;
function group_outros() {
  outros = {
    r: 0,
    c: [],
    p: outros
  };
}
function check_outros() {
  if (!outros.r) {
    run_all(outros.c);
  }
  outros = outros.p;
}
function transition_in(block, local) {
  if (block && block.i) {
    outroing.delete(block);
    block.i(local);
  }
}
function transition_out(block, local, detach2, callback) {
  if (block && block.o) {
    if (outroing.has(block))
      return;
    outroing.add(block);
    outros.c.push(() => {
      outroing.delete(block);
      if (callback) {
        if (detach2)
          block.d(1);
        callback();
      }
    });
    block.o(local);
  }
}
const null_transition = { duration: 0 };
function create_bidirectional_transition(node, fn, params2, intro) {
  let config2 = fn(node, params2);
  let t = intro ? 0 : 1;
  let running_program = null;
  let pending_program = null;
  let animation_name = null;
  function clear_animation() {
    if (animation_name)
      delete_rule(node, animation_name);
  }
  function init2(program, duration) {
    const d = program.b - t;
    duration *= Math.abs(d);
    return {
      a: t,
      b: program.b,
      d,
      duration,
      start: program.start,
      end: program.start + duration,
      group: program.group
    };
  }
  function go(b) {
    const { delay = 0, duration = 300, easing = identity, tick: tick2 = noop$2, css } = config2 || null_transition;
    const program = {
      start: now() + delay,
      b
    };
    if (!b) {
      program.group = outros;
      outros.r += 1;
    }
    if (running_program || pending_program) {
      pending_program = program;
    } else {
      if (css) {
        clear_animation();
        animation_name = create_rule(node, t, b, duration, delay, easing, css);
      }
      if (b)
        tick2(0, 1);
      running_program = init2(program, duration);
      add_render_callback(() => dispatch(node, b, "start"));
      loop((now2) => {
        if (pending_program && now2 > pending_program.start) {
          running_program = init2(pending_program, duration);
          pending_program = null;
          dispatch(node, running_program.b, "start");
          if (css) {
            clear_animation();
            animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config2.css);
          }
        }
        if (running_program) {
          if (now2 >= running_program.end) {
            tick2(t = running_program.b, 1 - t);
            dispatch(node, running_program.b, "end");
            if (!pending_program) {
              if (running_program.b) {
                clear_animation();
              } else {
                if (!--running_program.group.r)
                  run_all(running_program.group.c);
              }
            }
            running_program = null;
          } else if (now2 >= running_program.start) {
            const p2 = now2 - running_program.start;
            t = running_program.a + running_program.d * easing(p2 / running_program.duration);
            tick2(t, 1 - t);
          }
        }
        return !!(running_program || pending_program);
      });
    }
  }
  return {
    run(b) {
      if (is_function(config2)) {
        wait().then(() => {
          config2 = config2();
          go(b);
        });
      } else {
        go(b);
      }
    },
    end() {
      clear_animation();
      running_program = pending_program = null;
    }
  };
}
const globals = typeof window !== "undefined" ? window : typeof globalThis !== "undefined" ? globalThis : globalThis;
function get_spread_update(levels, updates) {
  const update2 = {};
  const to_null_out = {};
  const accounted_for = { $$scope: 1 };
  let i2 = levels.length;
  while (i2--) {
    const o = levels[i2];
    const n = updates[i2];
    if (n) {
      for (const key in o) {
        if (!(key in n))
          to_null_out[key] = 1;
      }
      for (const key in n) {
        if (!accounted_for[key]) {
          update2[key] = n[key];
          accounted_for[key] = 1;
        }
      }
      levels[i2] = n;
    } else {
      for (const key in o) {
        accounted_for[key] = 1;
      }
    }
  }
  for (const key in to_null_out) {
    if (!(key in update2))
      update2[key] = void 0;
  }
  return update2;
}
function get_spread_object(spread_props) {
  return typeof spread_props === "object" && spread_props !== null ? spread_props : {};
}
function bind(component, name, callback) {
  const index = component.$$.props[name];
  if (index !== void 0) {
    component.$$.bound[index] = callback;
    callback(component.$$.ctx[index]);
  }
}
function create_component(block) {
  block && block.c();
}
function mount_component(component, target, anchor, customElement) {
  const { fragment, on_mount, on_destroy, after_update } = component.$$;
  fragment && fragment.m(target, anchor);
  if (!customElement) {
    add_render_callback(() => {
      const new_on_destroy = on_mount.map(run).filter(is_function);
      if (on_destroy) {
        on_destroy.push(...new_on_destroy);
      } else {
        run_all(new_on_destroy);
      }
      component.$$.on_mount = [];
    });
  }
  after_update.forEach(add_render_callback);
}
function destroy_component(component, detaching) {
  const $$ = component.$$;
  if ($$.fragment !== null) {
    run_all($$.on_destroy);
    $$.fragment && $$.fragment.d(detaching);
    $$.on_destroy = $$.fragment = null;
    $$.ctx = [];
  }
}
function make_dirty(component, i2) {
  if (component.$$.dirty[0] === -1) {
    dirty_components.push(component);
    schedule_update();
    component.$$.dirty.fill(0);
  }
  component.$$.dirty[i2 / 31 | 0] |= 1 << i2 % 31;
}
function init(component, options, instance2, create_fragment2, not_equal, props, append_styles, dirty = [-1]) {
  const parent_component = current_component;
  set_current_component(component);
  const $$ = component.$$ = {
    fragment: null,
    ctx: null,
    props,
    update: noop$2,
    not_equal,
    bound: blank_object(),
    on_mount: [],
    on_destroy: [],
    on_disconnect: [],
    before_update: [],
    after_update: [],
    context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),
    callbacks: blank_object(),
    dirty,
    skip_bound: false,
    root: options.target || parent_component.$$.root
  };
  append_styles && append_styles($$.root);
  let ready = false;
  $$.ctx = instance2 ? instance2(component, options.props || {}, (i2, ret, ...rest) => {
    const value = rest.length ? rest[0] : ret;
    if ($$.ctx && not_equal($$.ctx[i2], $$.ctx[i2] = value)) {
      if (!$$.skip_bound && $$.bound[i2])
        $$.bound[i2](value);
      if (ready)
        make_dirty(component, i2);
    }
    return ret;
  }) : [];
  $$.update();
  ready = true;
  run_all($$.before_update);
  $$.fragment = create_fragment2 ? create_fragment2($$.ctx) : false;
  if (options.target) {
    if (options.hydrate) {
      const nodes = children(options.target);
      $$.fragment && $$.fragment.l(nodes);
      nodes.forEach(detach);
    } else {
      $$.fragment && $$.fragment.c();
    }
    if (options.intro)
      transition_in(component.$$.fragment);
    mount_component(component, options.target, options.anchor, options.customElement);
    flush();
  }
  set_current_component(parent_component);
}
class SvelteComponent {
  $destroy() {
    destroy_component(this, 1);
    this.$destroy = noop$2;
  }
  $on(type, callback) {
    const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);
    callbacks.push(callback);
    return () => {
      const index = callbacks.indexOf(callback);
      if (index !== -1)
        callbacks.splice(index, 1);
    };
  }
  $set($$props) {
    if (this.$$set && !is_empty($$props)) {
      this.$$.skip_bound = true;
      this.$$set($$props);
      this.$$.skip_bound = false;
    }
  }
}
function create_fragment$d(ctx) {
  let path;
  let path_id_value;
  let path_levels = [
    {
      id: path_id_value = "path-" + ctx[0]
    },
    ctx[1]
  ];
  let path_data = {};
  for (let i2 = 0; i2 < path_levels.length; i2 += 1) {
    path_data = assign(path_data, path_levels[i2]);
  }
  return {
    c() {
      path = svg_element("path");
      set_svg_attributes(path, path_data);
    },
    m(target, anchor) {
      insert(target, path, anchor);
    },
    p(ctx2, [dirty]) {
      set_svg_attributes(path, path_data = get_spread_update(path_levels, [
        dirty & 1 && path_id_value !== (path_id_value = "path-" + ctx2[0]) && { id: path_id_value },
        dirty & 2 && ctx2[1]
      ]));
    },
    i: noop$2,
    o: noop$2,
    d(detaching) {
      if (detaching)
        detach(path);
    }
  };
}
function instance$a($$self, $$props, $$invalidate) {
  let { id } = $$props;
  let { data = {} } = $$props;
  $$self.$$set = ($$props2) => {
    if ("id" in $$props2)
      $$invalidate(0, id = $$props2.id);
    if ("data" in $$props2)
      $$invalidate(1, data = $$props2.data);
  };
  return [id, data];
}
class Path extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$a, create_fragment$d, safe_not_equal, { id: 0, data: 1 });
  }
}
function create_fragment$c(ctx) {
  let polygon;
  let polygon_id_value;
  let polygon_levels = [
    {
      id: polygon_id_value = "polygon-" + ctx[0]
    },
    ctx[1]
  ];
  let polygon_data = {};
  for (let i2 = 0; i2 < polygon_levels.length; i2 += 1) {
    polygon_data = assign(polygon_data, polygon_levels[i2]);
  }
  return {
    c() {
      polygon = svg_element("polygon");
      set_svg_attributes(polygon, polygon_data);
    },
    m(target, anchor) {
      insert(target, polygon, anchor);
    },
    p(ctx2, [dirty]) {
      set_svg_attributes(polygon, polygon_data = get_spread_update(polygon_levels, [
        dirty & 1 && polygon_id_value !== (polygon_id_value = "polygon-" + ctx2[0]) && { id: polygon_id_value },
        dirty & 2 && ctx2[1]
      ]));
    },
    i: noop$2,
    o: noop$2,
    d(detaching) {
      if (detaching)
        detach(polygon);
    }
  };
}
function instance$9($$self, $$props, $$invalidate) {
  let { id } = $$props;
  let { data = {} } = $$props;
  $$self.$$set = ($$props2) => {
    if ("id" in $$props2)
      $$invalidate(0, id = $$props2.id);
    if ("data" in $$props2)
      $$invalidate(1, data = $$props2.data);
  };
  return [id, data];
}
class Polygon extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$9, create_fragment$c, safe_not_equal, { id: 0, data: 1 });
  }
}
function create_fragment$b(ctx) {
  let g;
  return {
    c() {
      g = svg_element("g");
    },
    m(target, anchor) {
      insert(target, g, anchor);
      g.innerHTML = ctx[0];
    },
    p(ctx2, [dirty]) {
      if (dirty & 1)
        g.innerHTML = ctx2[0];
    },
    i: noop$2,
    o: noop$2,
    d(detaching) {
      if (detaching)
        detach(g);
    }
  };
}
function instance$8($$self, $$props, $$invalidate) {
  let cursor = 870711;
  function getId() {
    cursor += 1;
    return `fa-${cursor.toString(16)}`;
  }
  let raw;
  let { data } = $$props;
  function getRaw(data2) {
    if (!data2 || !data2.raw) {
      return null;
    }
    let rawData = data2.raw;
    const ids = {};
    rawData = rawData.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g, (match, id) => {
      const uniqueId = getId();
      ids[id] = uniqueId;
      return ` id="${uniqueId}"`;
    });
    rawData = rawData.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g, (match, rawId, _, pointerId) => {
      const id = rawId || pointerId;
      if (!id || !ids[id]) {
        return match;
      }
      return `#${ids[id]}`;
    });
    return rawData;
  }
  $$self.$$set = ($$props2) => {
    if ("data" in $$props2)
      $$invalidate(1, data = $$props2.data);
  };
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 2) {
      $$invalidate(0, raw = getRaw(data));
    }
  };
  return [raw, data];
}
class Raw extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$8, create_fragment$b, safe_not_equal, { data: 1 });
  }
}
var Svg_svelte_svelte_type_style_lang = "";
function create_fragment$a(ctx) {
  let svg;
  let svg_class_value;
  let svg_role_value;
  let current;
  const default_slot_template = ctx[13].default;
  const default_slot = create_slot(default_slot_template, ctx, ctx[12], null);
  return {
    c() {
      svg = svg_element("svg");
      if (default_slot)
        default_slot.c();
      attr(svg, "version", "1.1");
      attr(svg, "class", svg_class_value = "fa-icon " + ctx[0] + " svelte-1dof0an");
      attr(svg, "x", ctx[8]);
      attr(svg, "y", ctx[9]);
      attr(svg, "width", ctx[1]);
      attr(svg, "height", ctx[2]);
      attr(svg, "aria-label", ctx[11]);
      attr(svg, "role", svg_role_value = ctx[11] ? "img" : "presentation");
      attr(svg, "viewBox", ctx[3]);
      attr(svg, "style", ctx[10]);
      toggle_class(svg, "fa-spin", ctx[4]);
      toggle_class(svg, "fa-pulse", ctx[6]);
      toggle_class(svg, "fa-inverse", ctx[5]);
      toggle_class(svg, "fa-flip-horizontal", ctx[7] === "horizontal");
      toggle_class(svg, "fa-flip-vertical", ctx[7] === "vertical");
    },
    m(target, anchor) {
      insert(target, svg, anchor);
      if (default_slot) {
        default_slot.m(svg, null);
      }
      current = true;
    },
    p(ctx2, [dirty]) {
      if (default_slot) {
        if (default_slot.p && (!current || dirty & 4096)) {
          update_slot_base(default_slot, default_slot_template, ctx2, ctx2[12], !current ? get_all_dirty_from_scope(ctx2[12]) : get_slot_changes(default_slot_template, ctx2[12], dirty, null), null);
        }
      }
      if (!current || dirty & 1 && svg_class_value !== (svg_class_value = "fa-icon " + ctx2[0] + " svelte-1dof0an")) {
        attr(svg, "class", svg_class_value);
      }
      if (!current || dirty & 256) {
        attr(svg, "x", ctx2[8]);
      }
      if (!current || dirty & 512) {
        attr(svg, "y", ctx2[9]);
      }
      if (!current || dirty & 2) {
        attr(svg, "width", ctx2[1]);
      }
      if (!current || dirty & 4) {
        attr(svg, "height", ctx2[2]);
      }
      if (!current || dirty & 2048) {
        attr(svg, "aria-label", ctx2[11]);
      }
      if (!current || dirty & 2048 && svg_role_value !== (svg_role_value = ctx2[11] ? "img" : "presentation")) {
        attr(svg, "role", svg_role_value);
      }
      if (!current || dirty & 8) {
        attr(svg, "viewBox", ctx2[3]);
      }
      if (!current || dirty & 1024) {
        attr(svg, "style", ctx2[10]);
      }
      if (dirty & 17) {
        toggle_class(svg, "fa-spin", ctx2[4]);
      }
      if (dirty & 65) {
        toggle_class(svg, "fa-pulse", ctx2[6]);
      }
      if (dirty & 33) {
        toggle_class(svg, "fa-inverse", ctx2[5]);
      }
      if (dirty & 129) {
        toggle_class(svg, "fa-flip-horizontal", ctx2[7] === "horizontal");
      }
      if (dirty & 129) {
        toggle_class(svg, "fa-flip-vertical", ctx2[7] === "vertical");
      }
    },
    i(local) {
      if (current)
        return;
      transition_in(default_slot, local);
      current = true;
    },
    o(local) {
      transition_out(default_slot, local);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(svg);
      if (default_slot)
        default_slot.d(detaching);
    }
  };
}
function instance$7($$self, $$props, $$invalidate) {
  let { $$slots: slots = {}, $$scope } = $$props;
  let { class: className } = $$props;
  let { width } = $$props;
  let { height } = $$props;
  let { box } = $$props;
  let { spin = false } = $$props;
  let { inverse = false } = $$props;
  let { pulse = false } = $$props;
  let { flip = null } = $$props;
  let { x = void 0 } = $$props;
  let { y = void 0 } = $$props;
  let { style = void 0 } = $$props;
  let { label = void 0 } = $$props;
  $$self.$$set = ($$props2) => {
    if ("class" in $$props2)
      $$invalidate(0, className = $$props2.class);
    if ("width" in $$props2)
      $$invalidate(1, width = $$props2.width);
    if ("height" in $$props2)
      $$invalidate(2, height = $$props2.height);
    if ("box" in $$props2)
      $$invalidate(3, box = $$props2.box);
    if ("spin" in $$props2)
      $$invalidate(4, spin = $$props2.spin);
    if ("inverse" in $$props2)
      $$invalidate(5, inverse = $$props2.inverse);
    if ("pulse" in $$props2)
      $$invalidate(6, pulse = $$props2.pulse);
    if ("flip" in $$props2)
      $$invalidate(7, flip = $$props2.flip);
    if ("x" in $$props2)
      $$invalidate(8, x = $$props2.x);
    if ("y" in $$props2)
      $$invalidate(9, y = $$props2.y);
    if ("style" in $$props2)
      $$invalidate(10, style = $$props2.style);
    if ("label" in $$props2)
      $$invalidate(11, label = $$props2.label);
    if ("$$scope" in $$props2)
      $$invalidate(12, $$scope = $$props2.$$scope);
  };
  return [
    className,
    width,
    height,
    box,
    spin,
    inverse,
    pulse,
    flip,
    x,
    y,
    style,
    label,
    $$scope,
    slots
  ];
}
class Svg extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$7, create_fragment$a, safe_not_equal, {
      class: 0,
      width: 1,
      height: 2,
      box: 3,
      spin: 4,
      inverse: 5,
      pulse: 6,
      flip: 7,
      x: 8,
      y: 9,
      style: 10,
      label: 11
    });
  }
}
function get_each_context$1(ctx, list, i2) {
  const child_ctx = ctx.slice();
  child_ctx[24] = list[i2];
  child_ctx[26] = i2;
  return child_ctx;
}
function get_each_context_1(ctx, list, i2) {
  const child_ctx = ctx.slice();
  child_ctx[27] = list[i2];
  child_ctx[26] = i2;
  return child_ctx;
}
function create_if_block$2(ctx) {
  let t0;
  let t1;
  let if_block2_anchor;
  let current;
  let if_block0 = ctx[6].paths && create_if_block_3(ctx);
  let if_block1 = ctx[6].polygons && create_if_block_2(ctx);
  let if_block2 = ctx[6].raw && create_if_block_1(ctx);
  return {
    c() {
      if (if_block0)
        if_block0.c();
      t0 = space();
      if (if_block1)
        if_block1.c();
      t1 = space();
      if (if_block2)
        if_block2.c();
      if_block2_anchor = empty();
    },
    m(target, anchor) {
      if (if_block0)
        if_block0.m(target, anchor);
      insert(target, t0, anchor);
      if (if_block1)
        if_block1.m(target, anchor);
      insert(target, t1, anchor);
      if (if_block2)
        if_block2.m(target, anchor);
      insert(target, if_block2_anchor, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      if (ctx2[6].paths) {
        if (if_block0) {
          if_block0.p(ctx2, dirty);
          if (dirty & 64) {
            transition_in(if_block0, 1);
          }
        } else {
          if_block0 = create_if_block_3(ctx2);
          if_block0.c();
          transition_in(if_block0, 1);
          if_block0.m(t0.parentNode, t0);
        }
      } else if (if_block0) {
        group_outros();
        transition_out(if_block0, 1, 1, () => {
          if_block0 = null;
        });
        check_outros();
      }
      if (ctx2[6].polygons) {
        if (if_block1) {
          if_block1.p(ctx2, dirty);
          if (dirty & 64) {
            transition_in(if_block1, 1);
          }
        } else {
          if_block1 = create_if_block_2(ctx2);
          if_block1.c();
          transition_in(if_block1, 1);
          if_block1.m(t1.parentNode, t1);
        }
      } else if (if_block1) {
        group_outros();
        transition_out(if_block1, 1, 1, () => {
          if_block1 = null;
        });
        check_outros();
      }
      if (ctx2[6].raw) {
        if (if_block2) {
          if_block2.p(ctx2, dirty);
          if (dirty & 64) {
            transition_in(if_block2, 1);
          }
        } else {
          if_block2 = create_if_block_1(ctx2);
          if_block2.c();
          transition_in(if_block2, 1);
          if_block2.m(if_block2_anchor.parentNode, if_block2_anchor);
        }
      } else if (if_block2) {
        group_outros();
        transition_out(if_block2, 1, 1, () => {
          if_block2 = null;
        });
        check_outros();
      }
    },
    i(local) {
      if (current)
        return;
      transition_in(if_block0);
      transition_in(if_block1);
      transition_in(if_block2);
      current = true;
    },
    o(local) {
      transition_out(if_block0);
      transition_out(if_block1);
      transition_out(if_block2);
      current = false;
    },
    d(detaching) {
      if (if_block0)
        if_block0.d(detaching);
      if (detaching)
        detach(t0);
      if (if_block1)
        if_block1.d(detaching);
      if (detaching)
        detach(t1);
      if (if_block2)
        if_block2.d(detaching);
      if (detaching)
        detach(if_block2_anchor);
    }
  };
}
function create_if_block_3(ctx) {
  let each_1_anchor;
  let current;
  let each_value_1 = ctx[6].paths;
  let each_blocks = [];
  for (let i2 = 0; i2 < each_value_1.length; i2 += 1) {
    each_blocks[i2] = create_each_block_1(get_each_context_1(ctx, each_value_1, i2));
  }
  const out = (i2) => transition_out(each_blocks[i2], 1, 1, () => {
    each_blocks[i2] = null;
  });
  return {
    c() {
      for (let i2 = 0; i2 < each_blocks.length; i2 += 1) {
        each_blocks[i2].c();
      }
      each_1_anchor = empty();
    },
    m(target, anchor) {
      for (let i2 = 0; i2 < each_blocks.length; i2 += 1) {
        each_blocks[i2].m(target, anchor);
      }
      insert(target, each_1_anchor, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      if (dirty & 64) {
        each_value_1 = ctx2[6].paths;
        let i2;
        for (i2 = 0; i2 < each_value_1.length; i2 += 1) {
          const child_ctx = get_each_context_1(ctx2, each_value_1, i2);
          if (each_blocks[i2]) {
            each_blocks[i2].p(child_ctx, dirty);
            transition_in(each_blocks[i2], 1);
          } else {
            each_blocks[i2] = create_each_block_1(child_ctx);
            each_blocks[i2].c();
            transition_in(each_blocks[i2], 1);
            each_blocks[i2].m(each_1_anchor.parentNode, each_1_anchor);
          }
        }
        group_outros();
        for (i2 = each_value_1.length; i2 < each_blocks.length; i2 += 1) {
          out(i2);
        }
        check_outros();
      }
    },
    i(local) {
      if (current)
        return;
      for (let i2 = 0; i2 < each_value_1.length; i2 += 1) {
        transition_in(each_blocks[i2]);
      }
      current = true;
    },
    o(local) {
      each_blocks = each_blocks.filter(Boolean);
      for (let i2 = 0; i2 < each_blocks.length; i2 += 1) {
        transition_out(each_blocks[i2]);
      }
      current = false;
    },
    d(detaching) {
      destroy_each(each_blocks, detaching);
      if (detaching)
        detach(each_1_anchor);
    }
  };
}
function create_each_block_1(ctx) {
  let path;
  let current;
  path = new Path({
    props: {
      id: ctx[26],
      data: ctx[27]
    }
  });
  return {
    c() {
      create_component(path.$$.fragment);
    },
    m(target, anchor) {
      mount_component(path, target, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      const path_changes = {};
      if (dirty & 64)
        path_changes.data = ctx2[27];
      path.$set(path_changes);
    },
    i(local) {
      if (current)
        return;
      transition_in(path.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(path.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      destroy_component(path, detaching);
    }
  };
}
function create_if_block_2(ctx) {
  let each_1_anchor;
  let current;
  let each_value = ctx[6].polygons;
  let each_blocks = [];
  for (let i2 = 0; i2 < each_value.length; i2 += 1) {
    each_blocks[i2] = create_each_block$1(get_each_context$1(ctx, each_value, i2));
  }
  const out = (i2) => transition_out(each_blocks[i2], 1, 1, () => {
    each_blocks[i2] = null;
  });
  return {
    c() {
      for (let i2 = 0; i2 < each_blocks.length; i2 += 1) {
        each_blocks[i2].c();
      }
      each_1_anchor = empty();
    },
    m(target, anchor) {
      for (let i2 = 0; i2 < each_blocks.length; i2 += 1) {
        each_blocks[i2].m(target, anchor);
      }
      insert(target, each_1_anchor, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      if (dirty & 64) {
        each_value = ctx2[6].polygons;
        let i2;
        for (i2 = 0; i2 < each_value.length; i2 += 1) {
          const child_ctx = get_each_context$1(ctx2, each_value, i2);
          if (each_blocks[i2]) {
            each_blocks[i2].p(child_ctx, dirty);
            transition_in(each_blocks[i2], 1);
          } else {
            each_blocks[i2] = create_each_block$1(child_ctx);
            each_blocks[i2].c();
            transition_in(each_blocks[i2], 1);
            each_blocks[i2].m(each_1_anchor.parentNode, each_1_anchor);
          }
        }
        group_outros();
        for (i2 = each_value.length; i2 < each_blocks.length; i2 += 1) {
          out(i2);
        }
        check_outros();
      }
    },
    i(local) {
      if (current)
        return;
      for (let i2 = 0; i2 < each_value.length; i2 += 1) {
        transition_in(each_blocks[i2]);
      }
      current = true;
    },
    o(local) {
      each_blocks = each_blocks.filter(Boolean);
      for (let i2 = 0; i2 < each_blocks.length; i2 += 1) {
        transition_out(each_blocks[i2]);
      }
      current = false;
    },
    d(detaching) {
      destroy_each(each_blocks, detaching);
      if (detaching)
        detach(each_1_anchor);
    }
  };
}
function create_each_block$1(ctx) {
  let polygon;
  let current;
  polygon = new Polygon({
    props: {
      id: ctx[26],
      data: ctx[24]
    }
  });
  return {
    c() {
      create_component(polygon.$$.fragment);
    },
    m(target, anchor) {
      mount_component(polygon, target, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      const polygon_changes = {};
      if (dirty & 64)
        polygon_changes.data = ctx2[24];
      polygon.$set(polygon_changes);
    },
    i(local) {
      if (current)
        return;
      transition_in(polygon.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(polygon.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      destroy_component(polygon, detaching);
    }
  };
}
function create_if_block_1(ctx) {
  let raw;
  let updating_data;
  let current;
  function raw_data_binding(value) {
    ctx[15](value);
  }
  let raw_props = {};
  if (ctx[6] !== void 0) {
    raw_props.data = ctx[6];
  }
  raw = new Raw({ props: raw_props });
  binding_callbacks.push(() => bind(raw, "data", raw_data_binding));
  return {
    c() {
      create_component(raw.$$.fragment);
    },
    m(target, anchor) {
      mount_component(raw, target, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      const raw_changes = {};
      if (!updating_data && dirty & 64) {
        updating_data = true;
        raw_changes.data = ctx2[6];
        add_flush_callback(() => updating_data = false);
      }
      raw.$set(raw_changes);
    },
    i(local) {
      if (current)
        return;
      transition_in(raw.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(raw.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      destroy_component(raw, detaching);
    }
  };
}
function fallback_block(ctx) {
  let if_block_anchor;
  let current;
  let if_block = ctx[6] && create_if_block$2(ctx);
  return {
    c() {
      if (if_block)
        if_block.c();
      if_block_anchor = empty();
    },
    m(target, anchor) {
      if (if_block)
        if_block.m(target, anchor);
      insert(target, if_block_anchor, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      if (ctx2[6]) {
        if (if_block) {
          if_block.p(ctx2, dirty);
          if (dirty & 64) {
            transition_in(if_block, 1);
          }
        } else {
          if_block = create_if_block$2(ctx2);
          if_block.c();
          transition_in(if_block, 1);
          if_block.m(if_block_anchor.parentNode, if_block_anchor);
        }
      } else if (if_block) {
        group_outros();
        transition_out(if_block, 1, 1, () => {
          if_block = null;
        });
        check_outros();
      }
    },
    i(local) {
      if (current)
        return;
      transition_in(if_block);
      current = true;
    },
    o(local) {
      transition_out(if_block);
      current = false;
    },
    d(detaching) {
      if (if_block)
        if_block.d(detaching);
      if (detaching)
        detach(if_block_anchor);
    }
  };
}
function create_default_slot(ctx) {
  let current;
  const default_slot_template = ctx[14].default;
  const default_slot = create_slot(default_slot_template, ctx, ctx[16], null);
  const default_slot_or_fallback = default_slot || fallback_block(ctx);
  return {
    c() {
      if (default_slot_or_fallback)
        default_slot_or_fallback.c();
    },
    m(target, anchor) {
      if (default_slot_or_fallback) {
        default_slot_or_fallback.m(target, anchor);
      }
      current = true;
    },
    p(ctx2, dirty) {
      if (default_slot) {
        if (default_slot.p && (!current || dirty & 65536)) {
          update_slot_base(default_slot, default_slot_template, ctx2, ctx2[16], !current ? get_all_dirty_from_scope(ctx2[16]) : get_slot_changes(default_slot_template, ctx2[16], dirty, null), null);
        }
      } else {
        if (default_slot_or_fallback && default_slot_or_fallback.p && (!current || dirty & 64)) {
          default_slot_or_fallback.p(ctx2, !current ? -1 : dirty);
        }
      }
    },
    i(local) {
      if (current)
        return;
      transition_in(default_slot_or_fallback, local);
      current = true;
    },
    o(local) {
      transition_out(default_slot_or_fallback, local);
      current = false;
    },
    d(detaching) {
      if (default_slot_or_fallback)
        default_slot_or_fallback.d(detaching);
    }
  };
}
function create_fragment$9(ctx) {
  let svg;
  let current;
  svg = new Svg({
    props: {
      label: ctx[5],
      width: ctx[7],
      height: ctx[8],
      box: ctx[10],
      style: ctx[9],
      spin: ctx[1],
      flip: ctx[4],
      inverse: ctx[2],
      pulse: ctx[3],
      class: ctx[0],
      $$slots: { default: [create_default_slot] },
      $$scope: { ctx }
    }
  });
  return {
    c() {
      create_component(svg.$$.fragment);
    },
    m(target, anchor) {
      mount_component(svg, target, anchor);
      current = true;
    },
    p(ctx2, [dirty]) {
      const svg_changes = {};
      if (dirty & 32)
        svg_changes.label = ctx2[5];
      if (dirty & 128)
        svg_changes.width = ctx2[7];
      if (dirty & 256)
        svg_changes.height = ctx2[8];
      if (dirty & 1024)
        svg_changes.box = ctx2[10];
      if (dirty & 512)
        svg_changes.style = ctx2[9];
      if (dirty & 2)
        svg_changes.spin = ctx2[1];
      if (dirty & 16)
        svg_changes.flip = ctx2[4];
      if (dirty & 4)
        svg_changes.inverse = ctx2[2];
      if (dirty & 8)
        svg_changes.pulse = ctx2[3];
      if (dirty & 1)
        svg_changes.class = ctx2[0];
      if (dirty & 65600) {
        svg_changes.$$scope = { dirty, ctx: ctx2 };
      }
      svg.$set(svg_changes);
    },
    i(local) {
      if (current)
        return;
      transition_in(svg.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(svg.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      destroy_component(svg, detaching);
    }
  };
}
let outerScale = 1;
function normaliseData(data) {
  if ("iconName" in data && "icon" in data) {
    let normalisedData = {};
    let faIcon = data.icon;
    let name = data.iconName;
    let width = faIcon[0];
    let height = faIcon[1];
    let paths = faIcon[4];
    let iconData = { width, height, paths: [{ d: paths }] };
    normalisedData[name] = iconData;
    return normalisedData;
  }
  return data;
}
function instance$6($$self, $$props, $$invalidate) {
  let { $$slots: slots = {}, $$scope } = $$props;
  let { class: className = "" } = $$props;
  let { data } = $$props;
  let { scale = 1 } = $$props;
  let { spin = false } = $$props;
  let { inverse = false } = $$props;
  let { pulse = false } = $$props;
  let { flip = null } = $$props;
  let { label = null } = $$props;
  let self2 = null;
  let { style = null } = $$props;
  let width;
  let height;
  let combinedStyle;
  let box;
  function init2() {
    if (typeof data === "undefined") {
      return;
    }
    const normalisedData = normaliseData(data);
    const [name] = Object.keys(normalisedData);
    const icon = normalisedData[name];
    if (!icon.paths) {
      icon.paths = [];
    }
    if (icon.d) {
      icon.paths.push({ d: icon.d });
    }
    if (!icon.polygons) {
      icon.polygons = [];
    }
    if (icon.points) {
      icon.polygons.push({ points: icon.points });
    }
    $$invalidate(6, self2 = icon);
  }
  function normalisedScale() {
    let numScale = 1;
    if (typeof scale !== "undefined") {
      numScale = Number(scale);
    }
    if (isNaN(numScale) || numScale <= 0) {
      console.warn('Invalid prop: prop "scale" should be a number over 0.');
      return outerScale;
    }
    return numScale * outerScale;
  }
  function calculateBox() {
    if (self2) {
      return `0 0 ${self2.width} ${self2.height}`;
    }
    return `0 0 ${width} ${height}`;
  }
  function calculateRatio() {
    if (!self2) {
      return 1;
    }
    return Math.max(self2.width, self2.height) / 16;
  }
  function calculateWidth() {
    if (self2) {
      return self2.width / calculateRatio() * normalisedScale();
    }
    return 0;
  }
  function calculateHeight() {
    if (self2) {
      return self2.height / calculateRatio() * normalisedScale();
    }
    return 0;
  }
  function calculateStyle() {
    let combined = "";
    if (style !== null) {
      combined += style;
    }
    let size = normalisedScale();
    if (size === 1) {
      if (combined.length === 0) {
        return void 0;
      }
      return combined;
    }
    if (combined !== "" && !combined.endsWith(";")) {
      combined += "; ";
    }
    return `${combined}font-size: ${size}em`;
  }
  function raw_data_binding(value) {
    self2 = value;
    $$invalidate(6, self2);
  }
  $$self.$$set = ($$props2) => {
    if ("class" in $$props2)
      $$invalidate(0, className = $$props2.class);
    if ("data" in $$props2)
      $$invalidate(11, data = $$props2.data);
    if ("scale" in $$props2)
      $$invalidate(12, scale = $$props2.scale);
    if ("spin" in $$props2)
      $$invalidate(1, spin = $$props2.spin);
    if ("inverse" in $$props2)
      $$invalidate(2, inverse = $$props2.inverse);
    if ("pulse" in $$props2)
      $$invalidate(3, pulse = $$props2.pulse);
    if ("flip" in $$props2)
      $$invalidate(4, flip = $$props2.flip);
    if ("label" in $$props2)
      $$invalidate(5, label = $$props2.label);
    if ("style" in $$props2)
      $$invalidate(13, style = $$props2.style);
    if ("$$scope" in $$props2)
      $$invalidate(16, $$scope = $$props2.$$scope);
  };
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 14336) {
      {
        init2();
        $$invalidate(7, width = calculateWidth());
        $$invalidate(8, height = calculateHeight());
        $$invalidate(9, combinedStyle = calculateStyle());
        $$invalidate(10, box = calculateBox());
      }
    }
  };
  return [
    className,
    spin,
    inverse,
    pulse,
    flip,
    label,
    self2,
    width,
    height,
    combinedStyle,
    box,
    data,
    scale,
    style,
    slots,
    raw_data_binding,
    $$scope
  ];
}
class Icon extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$6, create_fragment$9, safe_not_equal, {
      class: 0,
      data: 11,
      scale: 12,
      spin: 1,
      inverse: 2,
      pulse: 3,
      flip: 4,
      label: 5,
      style: 13
    });
  }
}
function wrap(args) {
  if (!args) {
    throw Error("Parameter args is required");
  }
  if (!args.component == !args.asyncComponent) {
    throw Error("One and only one of component and asyncComponent is required");
  }
  if (args.component) {
    args.asyncComponent = () => Promise.resolve(args.component);
  }
  if (typeof args.asyncComponent != "function") {
    throw Error("Parameter asyncComponent must be a function");
  }
  if (args.conditions) {
    if (!Array.isArray(args.conditions)) {
      args.conditions = [args.conditions];
    }
    for (let i2 = 0; i2 < args.conditions.length; i2++) {
      if (!args.conditions[i2] || typeof args.conditions[i2] != "function") {
        throw Error("Invalid parameter conditions[" + i2 + "]");
      }
    }
  }
  if (args.loadingComponent) {
    args.asyncComponent.loading = args.loadingComponent;
    args.asyncComponent.loadingParams = args.loadingParams || void 0;
  }
  const obj = {
    component: args.asyncComponent,
    userData: args.userData,
    conditions: args.conditions && args.conditions.length ? args.conditions : void 0,
    props: args.props && Object.keys(args.props).length ? args.props : {},
    _sveltesparouter: true
  };
  return obj;
}
const subscriber_queue = [];
function readable(value, start2) {
  return {
    subscribe: writable(value, start2).subscribe
  };
}
function writable(value, start2 = noop$2) {
  let stop;
  const subscribers = new Set();
  function set5(new_value) {
    if (safe_not_equal(value, new_value)) {
      value = new_value;
      if (stop) {
        const run_queue = !subscriber_queue.length;
        for (const subscriber of subscribers) {
          subscriber[1]();
          subscriber_queue.push(subscriber, value);
        }
        if (run_queue) {
          for (let i2 = 0; i2 < subscriber_queue.length; i2 += 2) {
            subscriber_queue[i2][0](subscriber_queue[i2 + 1]);
          }
          subscriber_queue.length = 0;
        }
      }
    }
  }
  function update2(fn) {
    set5(fn(value));
  }
  function subscribe2(run2, invalidate = noop$2) {
    const subscriber = [run2, invalidate];
    subscribers.add(subscriber);
    if (subscribers.size === 1) {
      stop = start2(set5) || noop$2;
    }
    run2(value);
    return () => {
      subscribers.delete(subscriber);
      if (subscribers.size === 0) {
        stop();
        stop = null;
      }
    };
  }
  return { set: set5, update: update2, subscribe: subscribe2 };
}
function derived(stores, fn, initial_value) {
  const single = !Array.isArray(stores);
  const stores_array = single ? [stores] : stores;
  const auto = fn.length < 2;
  return readable(initial_value, (set5) => {
    let inited = false;
    const values = [];
    let pending = 0;
    let cleanup = noop$2;
    const sync = () => {
      if (pending) {
        return;
      }
      cleanup();
      const result = fn(single ? values[0] : values, set5);
      if (auto) {
        set5(result);
      } else {
        cleanup = is_function(result) ? result : noop$2;
      }
    };
    const unsubscribers = stores_array.map((store, i2) => subscribe(store, (value) => {
      values[i2] = value;
      pending &= ~(1 << i2);
      if (inited) {
        sync();
      }
    }, () => {
      pending |= 1 << i2;
    }));
    inited = true;
    sync();
    return function stop() {
      run_all(unsubscribers);
      cleanup();
    };
  });
}
function parse(str, loose) {
  if (str instanceof RegExp)
    return { keys: false, pattern: str };
  var c, o, tmp, ext, keys2 = [], pattern = "", arr = str.split("/");
  arr[0] || arr.shift();
  while (tmp = arr.shift()) {
    c = tmp[0];
    if (c === "*") {
      keys2.push("wild");
      pattern += "/(.*)";
    } else if (c === ":") {
      o = tmp.indexOf("?", 1);
      ext = tmp.indexOf(".", 1);
      keys2.push(tmp.substring(1, !!~o ? o : !!~ext ? ext : tmp.length));
      pattern += !!~o && !~ext ? "(?:/([^/]+?))?" : "/([^/]+?)";
      if (!!~ext)
        pattern += (!!~o ? "?" : "") + "\\" + tmp.substring(ext);
    } else {
      pattern += "/" + tmp;
    }
  }
  return {
    keys: keys2,
    pattern: new RegExp("^" + pattern + (loose ? "(?=$|/)" : "/?$"), "i")
  };
}
function create_else_block$1(ctx) {
  let switch_instance;
  let switch_instance_anchor;
  let current;
  const switch_instance_spread_levels = [ctx[2]];
  var switch_value = ctx[0];
  function switch_props(ctx2) {
    let switch_instance_props = {};
    for (let i2 = 0; i2 < switch_instance_spread_levels.length; i2 += 1) {
      switch_instance_props = assign(switch_instance_props, switch_instance_spread_levels[i2]);
    }
    return { props: switch_instance_props };
  }
  if (switch_value) {
    switch_instance = new switch_value(switch_props());
    switch_instance.$on("routeEvent", ctx[7]);
  }
  return {
    c() {
      if (switch_instance)
        create_component(switch_instance.$$.fragment);
      switch_instance_anchor = empty();
    },
    m(target, anchor) {
      if (switch_instance) {
        mount_component(switch_instance, target, anchor);
      }
      insert(target, switch_instance_anchor, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      const switch_instance_changes = dirty & 4 ? get_spread_update(switch_instance_spread_levels, [get_spread_object(ctx2[2])]) : {};
      if (switch_value !== (switch_value = ctx2[0])) {
        if (switch_instance) {
          group_outros();
          const old_component = switch_instance;
          transition_out(old_component.$$.fragment, 1, 0, () => {
            destroy_component(old_component, 1);
          });
          check_outros();
        }
        if (switch_value) {
          switch_instance = new switch_value(switch_props());
          switch_instance.$on("routeEvent", ctx2[7]);
          create_component(switch_instance.$$.fragment);
          transition_in(switch_instance.$$.fragment, 1);
          mount_component(switch_instance, switch_instance_anchor.parentNode, switch_instance_anchor);
        } else {
          switch_instance = null;
        }
      } else if (switch_value) {
        switch_instance.$set(switch_instance_changes);
      }
    },
    i(local) {
      if (current)
        return;
      if (switch_instance)
        transition_in(switch_instance.$$.fragment, local);
      current = true;
    },
    o(local) {
      if (switch_instance)
        transition_out(switch_instance.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(switch_instance_anchor);
      if (switch_instance)
        destroy_component(switch_instance, detaching);
    }
  };
}
function create_if_block$1(ctx) {
  let switch_instance;
  let switch_instance_anchor;
  let current;
  const switch_instance_spread_levels = [{ params: ctx[1] }, ctx[2]];
  var switch_value = ctx[0];
  function switch_props(ctx2) {
    let switch_instance_props = {};
    for (let i2 = 0; i2 < switch_instance_spread_levels.length; i2 += 1) {
      switch_instance_props = assign(switch_instance_props, switch_instance_spread_levels[i2]);
    }
    return { props: switch_instance_props };
  }
  if (switch_value) {
    switch_instance = new switch_value(switch_props());
    switch_instance.$on("routeEvent", ctx[6]);
  }
  return {
    c() {
      if (switch_instance)
        create_component(switch_instance.$$.fragment);
      switch_instance_anchor = empty();
    },
    m(target, anchor) {
      if (switch_instance) {
        mount_component(switch_instance, target, anchor);
      }
      insert(target, switch_instance_anchor, anchor);
      current = true;
    },
    p(ctx2, dirty) {
      const switch_instance_changes = dirty & 6 ? get_spread_update(switch_instance_spread_levels, [
        dirty & 2 && { params: ctx2[1] },
        dirty & 4 && get_spread_object(ctx2[2])
      ]) : {};
      if (switch_value !== (switch_value = ctx2[0])) {
        if (switch_instance) {
          group_outros();
          const old_component = switch_instance;
          transition_out(old_component.$$.fragment, 1, 0, () => {
            destroy_component(old_component, 1);
          });
          check_outros();
        }
        if (switch_value) {
          switch_instance = new switch_value(switch_props());
          switch_instance.$on("routeEvent", ctx2[6]);
          create_component(switch_instance.$$.fragment);
          transition_in(switch_instance.$$.fragment, 1);
          mount_component(switch_instance, switch_instance_anchor.parentNode, switch_instance_anchor);
        } else {
          switch_instance = null;
        }
      } else if (switch_value) {
        switch_instance.$set(switch_instance_changes);
      }
    },
    i(local) {
      if (current)
        return;
      if (switch_instance)
        transition_in(switch_instance.$$.fragment, local);
      current = true;
    },
    o(local) {
      if (switch_instance)
        transition_out(switch_instance.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(switch_instance_anchor);
      if (switch_instance)
        destroy_component(switch_instance, detaching);
    }
  };
}
function create_fragment$8(ctx) {
  let current_block_type_index;
  let if_block;
  let if_block_anchor;
  let current;
  const if_block_creators = [create_if_block$1, create_else_block$1];
  const if_blocks = [];
  function select_block_type(ctx2, dirty) {
    if (ctx2[1])
      return 0;
    return 1;
  }
  current_block_type_index = select_block_type(ctx);
  if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
  return {
    c() {
      if_block.c();
      if_block_anchor = empty();
    },
    m(target, anchor) {
      if_blocks[current_block_type_index].m(target, anchor);
      insert(target, if_block_anchor, anchor);
      current = true;
    },
    p(ctx2, [dirty]) {
      let previous_block_index = current_block_type_index;
      current_block_type_index = select_block_type(ctx2);
      if (current_block_type_index === previous_block_index) {
        if_blocks[current_block_type_index].p(ctx2, dirty);
      } else {
        group_outros();
        transition_out(if_blocks[previous_block_index], 1, 1, () => {
          if_blocks[previous_block_index] = null;
        });
        check_outros();
        if_block = if_blocks[current_block_type_index];
        if (!if_block) {
          if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
          if_block.c();
        } else {
          if_block.p(ctx2, dirty);
        }
        transition_in(if_block, 1);
        if_block.m(if_block_anchor.parentNode, if_block_anchor);
      }
    },
    i(local) {
      if (current)
        return;
      transition_in(if_block);
      current = true;
    },
    o(local) {
      transition_out(if_block);
      current = false;
    },
    d(detaching) {
      if_blocks[current_block_type_index].d(detaching);
      if (detaching)
        detach(if_block_anchor);
    }
  };
}
function getLocation() {
  const hashPosition = window.location.href.indexOf("#/");
  let location = hashPosition > -1 ? window.location.href.substr(hashPosition + 1) : "/";
  const qsPosition = location.indexOf("?");
  let querystring = "";
  if (qsPosition > -1) {
    querystring = location.substr(qsPosition + 1);
    location = location.substr(0, qsPosition);
  }
  return { location, querystring };
}
const loc = readable(null, function start(set5) {
  set5(getLocation());
  const update2 = () => {
    set5(getLocation());
  };
  window.addEventListener("hashchange", update2, false);
  return function stop() {
    window.removeEventListener("hashchange", update2, false);
  };
});
derived(loc, ($loc) => $loc.location);
derived(loc, ($loc) => $loc.querystring);
const params = writable(void 0);
async function push(location) {
  if (!location || location.length < 1 || location.charAt(0) != "/" && location.indexOf("#/") !== 0) {
    throw Error("Invalid parameter location");
  }
  await tick();
  history.replaceState(__spreadProps(__spreadValues({}, history.state), {
    __svelte_spa_router_scrollX: window.scrollX,
    __svelte_spa_router_scrollY: window.scrollY
  }), void 0, void 0);
  window.location.hash = (location.charAt(0) == "#" ? "" : "#") + location;
}
function instance$5($$self, $$props, $$invalidate) {
  let { routes: routes2 = {} } = $$props;
  let { prefix = "" } = $$props;
  let { restoreScrollState = false } = $$props;
  class RouteItem {
    constructor(path, component2) {
      if (!component2 || typeof component2 != "function" && (typeof component2 != "object" || component2._sveltesparouter !== true)) {
        throw Error("Invalid component object");
      }
      if (!path || typeof path == "string" && (path.length < 1 || path.charAt(0) != "/" && path.charAt(0) != "*") || typeof path == "object" && !(path instanceof RegExp)) {
        throw Error('Invalid value for "path" argument - strings must start with / or *');
      }
      const { pattern, keys: keys2 } = parse(path);
      this.path = path;
      if (typeof component2 == "object" && component2._sveltesparouter === true) {
        this.component = component2.component;
        this.conditions = component2.conditions || [];
        this.userData = component2.userData;
        this.props = component2.props || {};
      } else {
        this.component = () => Promise.resolve(component2);
        this.conditions = [];
        this.props = {};
      }
      this._pattern = pattern;
      this._keys = keys2;
    }
    match(path) {
      if (prefix) {
        if (typeof prefix == "string") {
          if (path.startsWith(prefix)) {
            path = path.substr(prefix.length) || "/";
          } else {
            return null;
          }
        } else if (prefix instanceof RegExp) {
          const match = path.match(prefix);
          if (match && match[0]) {
            path = path.substr(match[0].length) || "/";
          } else {
            return null;
          }
        }
      }
      const matches = this._pattern.exec(path);
      if (matches === null) {
        return null;
      }
      if (this._keys === false) {
        return matches;
      }
      const out = {};
      let i2 = 0;
      while (i2 < this._keys.length) {
        try {
          out[this._keys[i2]] = decodeURIComponent(matches[i2 + 1] || "") || null;
        } catch (e) {
          out[this._keys[i2]] = null;
        }
        i2++;
      }
      return out;
    }
    async checkConditions(detail) {
      for (let i2 = 0; i2 < this.conditions.length; i2++) {
        if (!await this.conditions[i2](detail)) {
          return false;
        }
      }
      return true;
    }
  }
  const routesList = [];
  if (routes2 instanceof Map) {
    routes2.forEach((route, path) => {
      routesList.push(new RouteItem(path, route));
    });
  } else {
    Object.keys(routes2).forEach((path) => {
      routesList.push(new RouteItem(path, routes2[path]));
    });
  }
  let component = null;
  let componentParams = null;
  let props = {};
  const dispatch2 = createEventDispatcher();
  async function dispatchNextTick(name, detail) {
    await tick();
    dispatch2(name, detail);
  }
  let previousScrollState = null;
  let popStateChanged = null;
  if (restoreScrollState) {
    popStateChanged = (event) => {
      if (event.state && event.state.__svelte_spa_router_scrollY) {
        previousScrollState = event.state;
      } else {
        previousScrollState = null;
      }
    };
    window.addEventListener("popstate", popStateChanged);
    afterUpdate(() => {
      if (previousScrollState) {
        window.scrollTo(previousScrollState.__svelte_spa_router_scrollX, previousScrollState.__svelte_spa_router_scrollY);
      } else {
        window.scrollTo(0, 0);
      }
    });
  }
  let lastLoc = null;
  let componentObj = null;
  const unsubscribeLoc = loc.subscribe(async (newLoc) => {
    lastLoc = newLoc;
    let i2 = 0;
    while (i2 < routesList.length) {
      const match = routesList[i2].match(newLoc.location);
      if (!match) {
        i2++;
        continue;
      }
      const detail = {
        route: routesList[i2].path,
        location: newLoc.location,
        querystring: newLoc.querystring,
        userData: routesList[i2].userData,
        params: match && typeof match == "object" && Object.keys(match).length ? match : null
      };
      if (!await routesList[i2].checkConditions(detail)) {
        $$invalidate(0, component = null);
        componentObj = null;
        dispatchNextTick("conditionsFailed", detail);
        return;
      }
      dispatchNextTick("routeLoading", Object.assign({}, detail));
      const obj = routesList[i2].component;
      if (componentObj != obj) {
        if (obj.loading) {
          $$invalidate(0, component = obj.loading);
          componentObj = obj;
          $$invalidate(1, componentParams = obj.loadingParams);
          $$invalidate(2, props = {});
          dispatchNextTick("routeLoaded", Object.assign({}, detail, {
            component,
            name: component.name,
            params: componentParams
          }));
        } else {
          $$invalidate(0, component = null);
          componentObj = null;
        }
        const loaded = await obj();
        if (newLoc != lastLoc) {
          return;
        }
        $$invalidate(0, component = loaded && loaded.default || loaded);
        componentObj = obj;
      }
      if (match && typeof match == "object" && Object.keys(match).length) {
        $$invalidate(1, componentParams = match);
      } else {
        $$invalidate(1, componentParams = null);
      }
      $$invalidate(2, props = routesList[i2].props);
      dispatchNextTick("routeLoaded", Object.assign({}, detail, {
        component,
        name: component.name,
        params: componentParams
      })).then(() => {
        params.set(componentParams);
      });
      return;
    }
    $$invalidate(0, component = null);
    componentObj = null;
    params.set(void 0);
  });
  onDestroy(() => {
    unsubscribeLoc();
    popStateChanged && window.removeEventListener("popstate", popStateChanged);
  });
  function routeEvent_handler(event) {
    bubble.call(this, $$self, event);
  }
  function routeEvent_handler_1(event) {
    bubble.call(this, $$self, event);
  }
  $$self.$$set = ($$props2) => {
    if ("routes" in $$props2)
      $$invalidate(3, routes2 = $$props2.routes);
    if ("prefix" in $$props2)
      $$invalidate(4, prefix = $$props2.prefix);
    if ("restoreScrollState" in $$props2)
      $$invalidate(5, restoreScrollState = $$props2.restoreScrollState);
  };
  $$self.$$.update = () => {
    if ($$self.$$.dirty & 32) {
      history.scrollRestoration = restoreScrollState ? "manual" : "auto";
    }
  };
  return [
    component,
    componentParams,
    props,
    routes2,
    prefix,
    restoreScrollState,
    routeEvent_handler,
    routeEvent_handler_1
  ];
}
class Router extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$5, create_fragment$8, safe_not_equal, {
      routes: 3,
      prefix: 4,
      restoreScrollState: 5
    });
  }
}
function cubicOut(t) {
  const f = t - 1;
  return f * f * f + 1;
}
function fly(node, { delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 } = {}) {
  const style = getComputedStyle(node);
  const target_opacity = +style.opacity;
  const transform = style.transform === "none" ? "" : style.transform;
  const od = target_opacity * (1 - opacity);
  return {
    delay,
    duration,
    easing,
    css: (t, u) => `
			transform: ${transform} translate(${(1 - t) * x}px, ${(1 - t) * y}px);
			opacity: ${target_opacity - od * u}`
  };
}
var agGridCommunity_cjs = {};
/**
 * ag-grid-community - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components * @version v26.1.0
 * @link http://www.ag-grid.com/
' * @license MIT
 */
(function(exports2) {
  Object.defineProperty(exports2, "__esModule", { value: true });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function makeNull(value) {
    if (value == null || value === "") {
      return null;
    }
    return value;
  }
  function exists(value, allowEmptyString) {
    if (allowEmptyString === void 0) {
      allowEmptyString = false;
    }
    return value != null && (value !== "" || allowEmptyString);
  }
  function missing(value) {
    return !exists(value);
  }
  function missingOrEmpty(value) {
    return value == null || value.length === 0;
  }
  function toStringOrNull(value) {
    return value != null && typeof value.toString === "function" ? value.toString() : null;
  }
  function attrToNumber(value) {
    if (value === void 0) {
      return;
    }
    if (value === null || value === "") {
      return null;
    }
    if (typeof value === "number") {
      return isNaN(value) ? void 0 : value;
    }
    var valueParsed = parseInt(value, 10);
    return isNaN(valueParsed) ? void 0 : valueParsed;
  }
  function attrToBoolean(value) {
    if (value === void 0) {
      return;
    }
    if (value === null || value === "") {
      return false;
    }
    if (typeof value === "boolean") {
      return value;
    }
    return /true/i.test(value);
  }
  function attrToString(value) {
    if (value == null || value === "") {
      return;
    }
    return value;
  }
  function referenceCompare(left, right) {
    if (left == null && right == null) {
      return true;
    }
    if (left == null && right != null) {
      return false;
    }
    if (left != null && right == null) {
      return false;
    }
    return left === right;
  }
  function jsonEquals(val1, val2) {
    var val1Json = val1 ? JSON.stringify(val1) : null;
    var val2Json = val2 ? JSON.stringify(val2) : null;
    return val1Json === val2Json;
  }
  function defaultComparator(valueA, valueB, accentedCompare) {
    if (accentedCompare === void 0) {
      accentedCompare = false;
    }
    var valueAMissing = valueA == null;
    var valueBMissing = valueB == null;
    if (valueA && valueA.toNumber) {
      valueA = valueA.toNumber();
    }
    if (valueB && valueB.toNumber) {
      valueB = valueB.toNumber();
    }
    if (valueAMissing && valueBMissing) {
      return 0;
    }
    if (valueAMissing) {
      return -1;
    }
    if (valueBMissing) {
      return 1;
    }
    function doQuickCompare(a, b) {
      return a > b ? 1 : a < b ? -1 : 0;
    }
    if (typeof valueA !== "string") {
      return doQuickCompare(valueA, valueB);
    }
    if (!accentedCompare) {
      return doQuickCompare(valueA, valueB);
    }
    try {
      return valueA.localeCompare(valueB);
    } catch (e) {
      return doQuickCompare(valueA, valueB);
    }
  }
  function find(collection, predicate, value) {
    if (collection === null || collection === void 0) {
      return null;
    }
    if (!Array.isArray(collection)) {
      var objToArray = values(collection);
      return find(objToArray, predicate, value);
    }
    var collectionAsArray = collection;
    var firstMatchingItem = null;
    for (var i2 = 0; i2 < collectionAsArray.length; i2++) {
      var item = collectionAsArray[i2];
      if (typeof predicate === "string") {
        if (item[predicate] === value) {
          firstMatchingItem = item;
          break;
        }
      } else {
        var callback = predicate;
        if (callback(item)) {
          firstMatchingItem = item;
          break;
        }
      }
    }
    return firstMatchingItem;
  }
  function values(object) {
    if (object instanceof Set || object instanceof Map) {
      var arr_1 = [];
      object.forEach(function(value) {
        return arr_1.push(value);
      });
      return arr_1;
    }
    return Object.keys(object).map(function(key) {
      return object[key];
    });
  }
  var GenericUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    makeNull,
    exists,
    missing,
    missingOrEmpty,
    toStringOrNull,
    attrToNumber,
    attrToBoolean,
    attrToString,
    referenceCompare,
    jsonEquals,
    defaultComparator,
    find,
    values
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var ColumnKeyCreator = function() {
    function ColumnKeyCreator2() {
      this.existingKeys = {};
    }
    ColumnKeyCreator2.prototype.addExistingKeys = function(keys3) {
      for (var i2 = 0; i2 < keys3.length; i2++) {
        this.existingKeys[keys3[i2]] = true;
      }
    };
    ColumnKeyCreator2.prototype.getUniqueKey = function(colId, colField) {
      colId = toStringOrNull(colId);
      var count = 0;
      while (true) {
        var idToTry = void 0;
        if (colId) {
          idToTry = colId;
          if (count !== 0) {
            idToTry += "_" + count;
          }
        } else if (colField) {
          idToTry = colField;
          if (count !== 0) {
            idToTry += "_" + count;
          }
        } else {
          idToTry = "" + count;
        }
        if (!this.existingKeys[idToTry]) {
          this.existingKeys[idToTry] = true;
          return idToTry;
        }
        count++;
      }
    };
    return ColumnKeyCreator2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function firstExistingValue() {
    var values2 = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      values2[_i] = arguments[_i];
    }
    for (var i2 = 0; i2 < values2.length; i2++) {
      var value = values2[i2];
      if (exists(value)) {
        return value;
      }
    }
    return null;
  }
  function anyExists(values2) {
    return values2 && firstExistingValue(values2) != null;
  }
  function existsAndNotEmpty(value) {
    return value != null && value.length > 0;
  }
  function last(arr) {
    if (!arr || !arr.length) {
      return;
    }
    return arr[arr.length - 1];
  }
  function areEqual(a, b, comparator) {
    if (a == null && b == null) {
      return true;
    }
    return a != null && b != null && a.length === b.length && every(a, function(value, index) {
      return comparator ? comparator(value, b[index]) : b[index] === value;
    });
  }
  function compareArrays(array1, array2) {
    return areEqual(array1, array2);
  }
  function shallowCompare(arr1, arr2) {
    return areEqual(arr1, arr2);
  }
  function sortNumerically(array) {
    return array.sort(function(a, b) {
      return a - b;
    });
  }
  function removeRepeatsFromArray(array, object) {
    if (!array) {
      return;
    }
    for (var index = array.length - 2; index >= 0; index--) {
      var thisOneMatches = array[index] === object;
      var nextOneMatches = array[index + 1] === object;
      if (thisOneMatches && nextOneMatches) {
        array.splice(index + 1, 1);
      }
    }
  }
  function removeFromArray(array, object) {
    var index = array.indexOf(object);
    if (index >= 0) {
      array.splice(index, 1);
    }
  }
  function removeAllFromArray(array, toRemove) {
    forEach(toRemove, function(item) {
      return removeFromArray(array, item);
    });
  }
  function insertIntoArray(array, object, toIndex) {
    array.splice(toIndex, 0, object);
  }
  function insertArrayIntoArray(dest, src, toIndex) {
    if (dest == null || src == null) {
      return;
    }
    for (var i2 = src.length - 1; i2 >= 0; i2--) {
      var item = src[i2];
      insertIntoArray(dest, item, toIndex);
    }
  }
  function moveInArray(array, objectsToMove, toIndex) {
    removeAllFromArray(array, objectsToMove);
    forEach(objectsToMove.slice().reverse(), function(obj) {
      return insertIntoArray(array, obj, toIndex);
    });
  }
  function includes2(array, value) {
    return array.indexOf(value) > -1;
  }
  function flatten(arrayOfArrays) {
    return [].concat.apply([], arrayOfArrays);
  }
  function pushAll(target, source) {
    if (source == null || target == null) {
      return;
    }
    forEach(source, function(value) {
      return target.push(value);
    });
  }
  function toStrings(array) {
    return map(array, toStringOrNull);
  }
  function findIndex(collection, predicate) {
    for (var i2 = 0; i2 < collection.length; i2++) {
      if (predicate(collection[i2], i2, collection)) {
        return i2;
      }
    }
    return -1;
  }
  function fill(collection, value, start2, end) {
    if (value === void 0) {
      value = null;
    }
    if (start2 === void 0) {
      start2 = 0;
    }
    if (end === void 0) {
      end = collection.length;
    }
    for (var i2 = start2; i2 < end; i2++) {
      collection[i2] = value;
    }
    return collection;
  }
  function every(list, predicate) {
    if (list == null) {
      return true;
    }
    for (var i2 = 0; i2 < list.length; i2++) {
      if (!predicate(list[i2], i2)) {
        return false;
      }
    }
    return true;
  }
  function some(list, predicate) {
    if (list == null) {
      return false;
    }
    for (var i2 = 0; i2 < list.length; i2++) {
      if (predicate(list[i2], i2)) {
        return true;
      }
    }
    return false;
  }
  function forEach(list, action) {
    if (list == null) {
      return;
    }
    for (var i2 = 0; i2 < list.length; i2++) {
      action(list[i2], i2);
    }
  }
  function forEachReverse(list, action) {
    if (list == null) {
      return;
    }
    for (var i2 = list.length - 1; i2 >= 0; i2--) {
      action(list[i2], i2);
    }
  }
  function map(list, process2) {
    if (list == null) {
      return null;
    }
    var mapped = [];
    for (var i2 = 0; i2 < list.length; i2++) {
      mapped.push(process2(list[i2], i2));
    }
    return mapped;
  }
  function filter(list, predicate) {
    if (list == null) {
      return null;
    }
    var filtered = [];
    for (var i2 = 0; i2 < list.length; i2++) {
      if (predicate(list[i2], i2)) {
        filtered.push(list[i2]);
      }
    }
    return filtered;
  }
  function reduce(list, step, initial) {
    if (list == null || initial == null) {
      return null;
    }
    var result = initial;
    for (var i2 = 0; i2 < list.length; i2++) {
      result = step(result, list[i2], i2);
    }
    return result;
  }
  function forEachSnapshotFirst(list, callback) {
    if (!list) {
      return;
    }
    var arrayCopy = list.slice(0);
    arrayCopy.forEach(callback);
  }
  var ArrayUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    firstExistingValue,
    anyExists,
    existsAndNotEmpty,
    last,
    areEqual,
    compareArrays,
    shallowCompare,
    sortNumerically,
    removeRepeatsFromArray,
    removeFromArray,
    removeAllFromArray,
    insertIntoArray,
    insertArrayIntoArray,
    moveInArray,
    includes: includes2,
    flatten,
    pushAll,
    toStrings,
    findIndex,
    fill,
    every,
    some,
    forEach,
    forEachReverse,
    map,
    filter,
    reduce,
    forEachSnapshotFirst
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function iterateObject(object, callback) {
    if (object == null) {
      return;
    }
    if (Array.isArray(object)) {
      forEach(object, function(value, index) {
        return callback("" + index, value);
      });
    } else {
      forEach(Object.keys(object), function(key) {
        return callback(key, object[key]);
      });
    }
  }
  function cloneObject(object) {
    var copy = {};
    var keys3 = Object.keys(object);
    for (var i2 = 0; i2 < keys3.length; i2++) {
      var key = keys3[i2];
      var value = object[key];
      copy[key] = value;
    }
    return copy;
  }
  function deepCloneObject(object) {
    return JSON.parse(JSON.stringify(object));
  }
  function deepCloneDefinition(object, keysToSkip) {
    if (!object) {
      return;
    }
    var obj = object;
    var res = {};
    Object.keys(obj).forEach(function(key) {
      if (keysToSkip && keysToSkip.indexOf(key) >= 0) {
        return;
      }
      var value = obj[key];
      var sourceIsSimpleObject = isNonNullObject(value) && value.constructor === Object;
      if (sourceIsSimpleObject) {
        res[key] = deepCloneDefinition(value);
      } else {
        res[key] = value;
      }
    });
    return res;
  }
  function getProperty(object, key) {
    return object[key];
  }
  function setProperty(object, key, value) {
    object[key] = value;
  }
  function copyPropertiesIfPresent(source, target) {
    var properties = [];
    for (var _i = 2; _i < arguments.length; _i++) {
      properties[_i - 2] = arguments[_i];
    }
    forEach(properties, function(p2) {
      return copyPropertyIfPresent(source, target, p2);
    });
  }
  function copyPropertyIfPresent(source, target, property, transform) {
    var value = getProperty(source, property);
    if (value !== void 0) {
      setProperty(target, property, transform ? transform(value) : value);
    }
  }
  function getAllKeysInObjects(objects) {
    var allValues = {};
    objects.filter(function(obj) {
      return obj != null;
    }).forEach(function(obj) {
      forEach(Object.keys(obj), function(key) {
        return allValues[key] = null;
      });
    });
    return Object.keys(allValues);
  }
  function getAllValuesInObject(obj) {
    if (!obj) {
      return [];
    }
    var anyObject = Object;
    if (typeof anyObject.values === "function") {
      return anyObject.values(obj);
    }
    var ret = [];
    for (var key in obj) {
      if (obj.hasOwnProperty(key) && obj.propertyIsEnumerable(key)) {
        ret.push(obj[key]);
      }
    }
    return ret;
  }
  function mergeDeep(dest, source, copyUndefined, makeCopyOfSimpleObjects) {
    if (copyUndefined === void 0) {
      copyUndefined = true;
    }
    if (makeCopyOfSimpleObjects === void 0) {
      makeCopyOfSimpleObjects = false;
    }
    if (!exists(source)) {
      return;
    }
    iterateObject(source, function(key, sourceValue) {
      var destValue = dest[key];
      if (destValue === sourceValue) {
        return;
      }
      if (makeCopyOfSimpleObjects) {
        var objectIsDueToBeCopied = destValue == null && sourceValue != null;
        if (objectIsDueToBeCopied) {
          var sourceIsSimpleObject = typeof sourceValue === "object" && sourceValue.constructor === Object;
          var dontCopy = sourceIsSimpleObject;
          if (dontCopy) {
            destValue = {};
            dest[key] = destValue;
          }
        }
      }
      if (isNonNullObject(sourceValue) && isNonNullObject(destValue) && !Array.isArray(destValue)) {
        mergeDeep(destValue, sourceValue, copyUndefined, makeCopyOfSimpleObjects);
      } else if (copyUndefined || sourceValue !== void 0) {
        dest[key] = sourceValue;
      }
    });
  }
  function assign2(object) {
    var sources = [];
    for (var _i = 1; _i < arguments.length; _i++) {
      sources[_i - 1] = arguments[_i];
    }
    forEach(sources, function(source) {
      return iterateObject(source, function(key, value) {
        return object[key] = value;
      });
    });
    return object;
  }
  function missingOrEmptyObject(value) {
    return missing(value) || Object.keys(value).length === 0;
  }
  function get14(source, expression, defaultValue) {
    if (source == null) {
      return defaultValue;
    }
    var keys3 = expression.split(".");
    var objectToRead = source;
    while (keys3.length > 1) {
      objectToRead = objectToRead[keys3.shift()];
      if (objectToRead == null) {
        return defaultValue;
      }
    }
    var value = objectToRead[keys3[0]];
    return value != null ? value : defaultValue;
  }
  function set5(target, expression, value) {
    if (target == null) {
      return;
    }
    var keys3 = expression.split(".");
    var objectToUpdate = target;
    while (keys3.length > 1) {
      objectToUpdate = objectToUpdate[keys3.shift()];
      if (objectToUpdate == null) {
        return;
      }
    }
    objectToUpdate[keys3[0]] = value;
  }
  function deepFreeze(object) {
    Object.freeze(object);
    forEach(values(object), function(v2) {
      if (isNonNullObject(v2) || typeof v2 === "function") {
        deepFreeze(v2);
      }
    });
    return object;
  }
  function getValueUsingField(data, field, fieldContainsDots) {
    if (!field || !data) {
      return;
    }
    if (!fieldContainsDots) {
      return data[field];
    }
    var fields = field.split(".");
    var currentObject = data;
    for (var i2 = 0; i2 < fields.length; i2++) {
      if (currentObject == null) {
        return void 0;
      }
      currentObject = currentObject[fields[i2]];
    }
    return currentObject;
  }
  function removeAllReferences(obj, objectName) {
    Object.keys(obj).forEach(function(key) {
      var value = obj[key];
      if (typeof value === "object") {
        obj[key] = void 0;
      }
    });
    var proto = Object.getPrototypeOf(obj);
    var properties = {};
    Object.keys(proto).forEach(function(key) {
      var value = proto[key];
      if (typeof value === "function") {
        var func = function() {
          console.warn("AG Grid: " + objectName + " function " + key + "() cannot be called as the grid has been destroyed.\n                     Please don't call grid API functions on destroyed grids - as a matter of fact you shouldn't\n                     be keeping the API reference, your application has a memory leak! Remove the API reference\n                     when the grid is destroyed.");
        };
        properties[key] = { value: func, writable: true };
      }
    });
    Object.defineProperties(obj, properties);
  }
  function isNonNullObject(value) {
    return typeof value === "object" && value !== null;
  }
  var ObjectUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    iterateObject,
    cloneObject,
    deepCloneObject,
    deepCloneDefinition,
    getProperty,
    setProperty,
    copyPropertiesIfPresent,
    copyPropertyIfPresent,
    getAllKeysInObjects,
    getAllValuesInObject,
    mergeDeep,
    assign: assign2,
    missingOrEmptyObject,
    get: get14,
    set: set5,
    deepFreeze,
    getValueUsingField,
    removeAllReferences,
    isNonNullObject
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var FUNCTION_STRIP_COMMENTS = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;
  var FUNCTION_ARGUMENT_NAMES = /([^\s,]+)/g;
  var doOnceFlags = {};
  function doOnce(func, key) {
    if (doOnceFlags[key]) {
      return;
    }
    func();
    doOnceFlags[key] = true;
  }
  function getFunctionName(funcConstructor) {
    if (funcConstructor.name) {
      return funcConstructor.name;
    }
    var matches = /function\s+([^\(]+)/.exec(funcConstructor.toString());
    return matches && matches.length === 2 ? matches[1].trim() : null;
  }
  function getFunctionParameters(func) {
    var fnStr = func.toString().replace(FUNCTION_STRIP_COMMENTS, "");
    return fnStr.slice(fnStr.indexOf("(") + 1, fnStr.indexOf(")")).match(FUNCTION_ARGUMENT_NAMES) || [];
  }
  function isFunction(val) {
    return !!(val && val.constructor && val.call && val.apply);
  }
  function executeInAWhile(funcs) {
    executeAfter(funcs, 400);
  }
  var executeNextVMTurnFuncs = [];
  var executeNextVMTurnPending = false;
  function executeNextVMTurn(func) {
    executeNextVMTurnFuncs.push(func);
    if (executeNextVMTurnPending) {
      return;
    }
    executeNextVMTurnPending = true;
    window.setTimeout(function() {
      var funcsCopy = executeNextVMTurnFuncs.slice();
      executeNextVMTurnFuncs.length = 0;
      executeNextVMTurnPending = false;
      funcsCopy.forEach(function(func2) {
        return func2();
      });
    }, 0);
  }
  function executeAfter(funcs, milliseconds) {
    if (milliseconds === void 0) {
      milliseconds = 0;
    }
    if (funcs.length > 0) {
      window.setTimeout(function() {
        return funcs.forEach(function(func) {
          return func();
        });
      }, milliseconds);
    }
  }
  function debounce(func, wait2, immediate) {
    if (immediate === void 0) {
      immediate = false;
    }
    var timeout;
    return function() {
      var args = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      }
      var context = this;
      var callNow = immediate && !timeout;
      window.clearTimeout(timeout);
      timeout = window.setTimeout(function() {
        timeout = null;
        if (!immediate) {
          func.apply(context, args);
        }
      }, wait2);
      if (callNow) {
        func.apply(context, args);
      }
    };
  }
  function waitUntil(condition, callback, timeout, timeoutMessage) {
    if (timeout === void 0) {
      timeout = 100;
    }
    var timeStamp = new Date().getTime();
    var interval = null;
    var executed = false;
    var internalCallback = function() {
      var reachedTimeout = new Date().getTime() - timeStamp > timeout;
      if (condition() || reachedTimeout) {
        callback();
        executed = true;
        if (interval != null) {
          window.clearInterval(interval);
          interval = null;
        }
        if (reachedTimeout && timeoutMessage) {
          console.warn(timeoutMessage);
        }
      }
    };
    internalCallback();
    if (!executed) {
      interval = window.setInterval(internalCallback, 10);
    }
  }
  function compose() {
    var fns = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      fns[_i] = arguments[_i];
    }
    return function(arg) {
      return fns.reduce(function(composed, f) {
        return f(composed);
      }, arg);
    };
  }
  function callIfPresent(func) {
    if (func) {
      func();
    }
  }
  var FunctionUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    doOnce,
    getFunctionName,
    getFunctionParameters,
    isFunction,
    executeInAWhile,
    executeNextVMTurn,
    executeAfter,
    debounce,
    waitUntil,
    compose,
    callIfPresent
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var Context = function() {
    function Context2(params2, logger) {
      this.beanWrappers = {};
      this.destroyed = false;
      if (!params2 || !params2.beanClasses) {
        return;
      }
      this.contextParams = params2;
      this.logger = logger;
      this.logger.log(">> creating ag-Application Context");
      this.createBeans();
      var beanInstances = this.getBeanInstances();
      this.wireBeans(beanInstances);
      this.logger.log(">> ag-Application Context ready - component is alive");
    }
    Context2.prototype.getBeanInstances = function() {
      return values(this.beanWrappers).map(function(beanEntry) {
        return beanEntry.beanInstance;
      });
    };
    Context2.prototype.createBean = function(bean, afterPreCreateCallback) {
      if (!bean) {
        throw Error("Can't wire to bean since it is null");
      }
      this.wireBeans([bean], afterPreCreateCallback);
      return bean;
    };
    Context2.prototype.wireBeans = function(beanInstances, afterPreCreateCallback) {
      this.autoWireBeans(beanInstances);
      this.methodWireBeans(beanInstances);
      this.callLifeCycleMethods(beanInstances, "preConstructMethods");
      if (exists(afterPreCreateCallback)) {
        beanInstances.forEach(afterPreCreateCallback);
      }
      this.callLifeCycleMethods(beanInstances, "postConstructMethods");
    };
    Context2.prototype.createBeans = function() {
      var _this = this;
      this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this));
      iterateObject(this.beanWrappers, function(key, beanEntry) {
        var constructorParamsMeta;
        if (beanEntry.bean.__agBeanMetaData && beanEntry.bean.__agBeanMetaData.autowireMethods && beanEntry.bean.__agBeanMetaData.autowireMethods.agConstructor) {
          constructorParamsMeta = beanEntry.bean.__agBeanMetaData.autowireMethods.agConstructor;
        }
        var constructorParams = _this.getBeansForParameters(constructorParamsMeta, beanEntry.bean.name);
        var newInstance = applyToConstructor(beanEntry.bean, constructorParams);
        beanEntry.beanInstance = newInstance;
      });
      var createdBeanNames = Object.keys(this.beanWrappers).join(", ");
      this.logger.log("created beans: " + createdBeanNames);
    };
    Context2.prototype.createBeanWrapper = function(BeanClass) {
      var metaData = BeanClass.__agBeanMetaData;
      if (!metaData) {
        var beanName = void 0;
        if (BeanClass.prototype.constructor) {
          beanName = getFunctionName(BeanClass.prototype.constructor);
        } else {
          beanName = "" + BeanClass;
        }
        console.error("Context item " + beanName + " is not a bean");
        return;
      }
      var beanEntry = {
        bean: BeanClass,
        beanInstance: null,
        beanName: metaData.beanName
      };
      this.beanWrappers[metaData.beanName] = beanEntry;
    };
    Context2.prototype.autoWireBeans = function(beanInstances) {
      var _this = this;
      beanInstances.forEach(function(beanInstance) {
        _this.forEachMetaDataInHierarchy(beanInstance, function(metaData, beanName) {
          var attributes = metaData.agClassAttributes;
          if (!attributes) {
            return;
          }
          attributes.forEach(function(attribute) {
            var otherBean = _this.lookupBeanInstance(beanName, attribute.beanName, attribute.optional);
            beanInstance[attribute.attributeName] = otherBean;
          });
        });
      });
    };
    Context2.prototype.methodWireBeans = function(beanInstances) {
      var _this = this;
      beanInstances.forEach(function(beanInstance) {
        _this.forEachMetaDataInHierarchy(beanInstance, function(metaData, beanName) {
          iterateObject(metaData.autowireMethods, function(methodName, wireParams) {
            if (methodName === "agConstructor") {
              return;
            }
            var initParams = _this.getBeansForParameters(wireParams, beanName);
            beanInstance[methodName].apply(beanInstance, initParams);
          });
        });
      });
    };
    Context2.prototype.forEachMetaDataInHierarchy = function(beanInstance, callback) {
      var prototype = Object.getPrototypeOf(beanInstance);
      while (prototype != null) {
        var constructor = prototype.constructor;
        if (constructor.hasOwnProperty("__agBeanMetaData")) {
          var metaData = constructor.__agBeanMetaData;
          var beanName = this.getBeanName(constructor);
          callback(metaData, beanName);
        }
        prototype = Object.getPrototypeOf(prototype);
      }
    };
    Context2.prototype.getBeanName = function(constructor) {
      if (constructor.__agBeanMetaData && constructor.__agBeanMetaData.beanName) {
        return constructor.__agBeanMetaData.beanName;
      }
      var constructorString = constructor.toString();
      var beanName = constructorString.substring(9, constructorString.indexOf("("));
      return beanName;
    };
    Context2.prototype.getBeansForParameters = function(parameters, beanName) {
      var _this = this;
      var beansList = [];
      if (parameters) {
        iterateObject(parameters, function(paramIndex, otherBeanName) {
          var otherBean = _this.lookupBeanInstance(beanName, otherBeanName);
          beansList[Number(paramIndex)] = otherBean;
        });
      }
      return beansList;
    };
    Context2.prototype.lookupBeanInstance = function(wiringBean, beanName, optional) {
      if (optional === void 0) {
        optional = false;
      }
      if (beanName === "context") {
        return this;
      }
      if (this.contextParams.providedBeanInstances && this.contextParams.providedBeanInstances.hasOwnProperty(beanName)) {
        return this.contextParams.providedBeanInstances[beanName];
      }
      var beanEntry = this.beanWrappers[beanName];
      if (beanEntry) {
        return beanEntry.beanInstance;
      }
      if (!optional) {
        console.error("AG Grid: unable to find bean reference " + beanName + " while initialising " + wiringBean);
      }
      return null;
    };
    Context2.prototype.callLifeCycleMethods = function(beanInstances, lifeCycleMethod) {
      var _this = this;
      beanInstances.forEach(function(beanInstance) {
        return _this.callLifeCycleMethodsOnBean(beanInstance, lifeCycleMethod);
      });
    };
    Context2.prototype.callLifeCycleMethodsOnBean = function(beanInstance, lifeCycleMethod, methodToIgnore) {
      var allMethods = {};
      this.forEachMetaDataInHierarchy(beanInstance, function(metaData) {
        var methods = metaData[lifeCycleMethod];
        if (methods) {
          methods.forEach(function(methodName) {
            if (methodName != methodToIgnore) {
              allMethods[methodName] = true;
            }
          });
        }
      });
      var allMethodsList = Object.keys(allMethods);
      allMethodsList.forEach(function(methodName) {
        return beanInstance[methodName]();
      });
    };
    Context2.prototype.getBean = function(name) {
      return this.lookupBeanInstance("getBean", name, true);
    };
    Context2.prototype.destroy = function() {
      if (this.destroyed) {
        return;
      }
      this.logger.log(">> Shutting down ag-Application Context");
      var beanInstances = this.getBeanInstances();
      this.destroyBeans(beanInstances);
      this.contextParams.providedBeanInstances = null;
      this.destroyed = true;
      this.logger.log(">> ag-Application Context shut down - component is dead");
    };
    Context2.prototype.destroyBean = function(bean) {
      if (!bean) {
        return;
      }
      this.destroyBeans([bean]);
    };
    Context2.prototype.destroyBeans = function(beans) {
      var _this = this;
      if (!beans) {
        return [];
      }
      beans.forEach(function(bean) {
        _this.callLifeCycleMethodsOnBean(bean, "preDestroyMethods", "destroy");
        var beanAny = bean;
        if (typeof beanAny.destroy === "function") {
          beanAny.destroy();
        }
      });
      return [];
    };
    return Context2;
  }();
  function applyToConstructor(constructor, argArray) {
    var args = [null].concat(argArray);
    var factoryFunction = constructor.bind.apply(constructor, args);
    return new factoryFunction();
  }
  function PreConstruct(target, methodName, descriptor) {
    var props = getOrCreateProps(target.constructor);
    if (!props.preConstructMethods) {
      props.preConstructMethods = [];
    }
    props.preConstructMethods.push(methodName);
  }
  function PostConstruct(target, methodName, descriptor) {
    var props = getOrCreateProps(target.constructor);
    if (!props.postConstructMethods) {
      props.postConstructMethods = [];
    }
    props.postConstructMethods.push(methodName);
  }
  function PreDestroy(target, methodName, descriptor) {
    var props = getOrCreateProps(target.constructor);
    if (!props.preDestroyMethods) {
      props.preDestroyMethods = [];
    }
    props.preDestroyMethods.push(methodName);
  }
  function Bean(beanName) {
    return function(classConstructor) {
      var props = getOrCreateProps(classConstructor);
      props.beanName = beanName;
    };
  }
  function Autowired(name) {
    return function(target, propertyKey, descriptor) {
      autowiredFunc(target, name, false, target, propertyKey, null);
    };
  }
  function Optional(name) {
    return function(target, propertyKey, descriptor) {
      autowiredFunc(target, name, true, target, propertyKey, null);
    };
  }
  function autowiredFunc(target, name, optional, classPrototype, methodOrAttributeName, index) {
    if (name === null) {
      console.error("AG Grid: Autowired name should not be null");
      return;
    }
    if (typeof index === "number") {
      console.error("AG Grid: Autowired should be on an attribute");
      return;
    }
    var props = getOrCreateProps(target.constructor);
    if (!props.agClassAttributes) {
      props.agClassAttributes = [];
    }
    props.agClassAttributes.push({
      attributeName: methodOrAttributeName,
      beanName: name,
      optional
    });
  }
  function Qualifier(name) {
    return function(classPrototype, methodOrAttributeName, index) {
      var constructor = typeof classPrototype == "function" ? classPrototype : classPrototype.constructor;
      var props;
      if (typeof index === "number") {
        var methodName = void 0;
        if (methodOrAttributeName) {
          props = getOrCreateProps(constructor);
          methodName = methodOrAttributeName;
        } else {
          props = getOrCreateProps(constructor);
          methodName = "agConstructor";
        }
        if (!props.autowireMethods) {
          props.autowireMethods = {};
        }
        if (!props.autowireMethods[methodName]) {
          props.autowireMethods[methodName] = {};
        }
        props.autowireMethods[methodName][index] = name;
      }
    };
  }
  function getOrCreateProps(target) {
    if (!target.hasOwnProperty("__agBeanMetaData")) {
      target.__agBeanMetaData = {};
    }
    return target.__agBeanMetaData;
  }
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __decorate = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param = function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  var EventService = function() {
    function EventService2() {
      this.allSyncListeners = new Map();
      this.allAsyncListeners = new Map();
      this.globalSyncListeners = new Set();
      this.globalAsyncListeners = new Set();
      this.asyncFunctionsQueue = [];
      this.scheduled = false;
      this.firedEvents = {};
    }
    EventService2.prototype.setBeans = function(loggerFactory, gridOptionsWrapper, frameworkOverrides, globalEventListener) {
      if (globalEventListener === void 0) {
        globalEventListener = null;
      }
      this.frameworkOverrides = frameworkOverrides;
      if (globalEventListener) {
        var async = gridOptionsWrapper.useAsyncEvents();
        this.addGlobalListener(globalEventListener, async);
      }
    };
    EventService2.prototype.getListeners = function(eventType, async, autoCreateListenerCollection) {
      var listenerMap = async ? this.allAsyncListeners : this.allSyncListeners;
      var listeners2 = listenerMap.get(eventType);
      if (!listeners2 && autoCreateListenerCollection) {
        listeners2 = new Set();
        listenerMap.set(eventType, listeners2);
      }
      return listeners2;
    };
    EventService2.prototype.noRegisteredListenersExist = function() {
      return this.allSyncListeners.size === 0 && this.allAsyncListeners.size === 0 && this.globalSyncListeners.size === 0 && this.globalAsyncListeners.size === 0;
    };
    EventService2.prototype.addEventListener = function(eventType, listener, async) {
      if (async === void 0) {
        async = false;
      }
      this.getListeners(eventType, async, true).add(listener);
    };
    EventService2.prototype.removeEventListener = function(eventType, listener, async) {
      if (async === void 0) {
        async = false;
      }
      var listeners2 = this.getListeners(eventType, async, false);
      if (!listeners2) {
        return;
      }
      listeners2.delete(listener);
      if (listeners2.size === 0) {
        var listenerMap = async ? this.allAsyncListeners : this.allSyncListeners;
        listenerMap.delete(eventType);
      }
    };
    EventService2.prototype.addGlobalListener = function(listener, async) {
      if (async === void 0) {
        async = false;
      }
      (async ? this.globalAsyncListeners : this.globalSyncListeners).add(listener);
    };
    EventService2.prototype.removeGlobalListener = function(listener, async) {
      if (async === void 0) {
        async = false;
      }
      (async ? this.globalAsyncListeners : this.globalSyncListeners).delete(listener);
    };
    EventService2.prototype.dispatchEvent = function(event) {
      this.dispatchToListeners(event, true);
      this.dispatchToListeners(event, false);
      this.firedEvents[event.type] = true;
    };
    EventService2.prototype.dispatchEventOnce = function(event) {
      if (!this.firedEvents[event.type]) {
        this.dispatchEvent(event);
      }
    };
    EventService2.prototype.dispatchToListeners = function(event, async) {
      var _this = this;
      var eventType = event.type;
      var processEventListeners = function(listeners3) {
        return listeners3.forEach(function(listener) {
          if (async) {
            _this.dispatchAsync(function() {
              return listener(event);
            });
          } else {
            listener(event);
          }
        });
      };
      var listeners2 = this.getListeners(eventType, async, false);
      if (listeners2) {
        processEventListeners(listeners2);
      }
      var globalListeners = async ? this.globalAsyncListeners : this.globalSyncListeners;
      globalListeners.forEach(function(listener) {
        if (async) {
          _this.dispatchAsync(function() {
            return _this.frameworkOverrides.dispatchEvent(eventType, function() {
              return listener(eventType, event);
            }, true);
          });
        } else {
          _this.frameworkOverrides.dispatchEvent(eventType, function() {
            return listener(eventType, event);
          }, true);
        }
      });
    };
    EventService2.prototype.dispatchAsync = function(func) {
      this.asyncFunctionsQueue.push(func);
      if (!this.scheduled) {
        window.setTimeout(this.flushAsyncQueue.bind(this), 0);
        this.scheduled = true;
      }
    };
    EventService2.prototype.flushAsyncQueue = function() {
      this.scheduled = false;
      var queueCopy = this.asyncFunctionsQueue.slice();
      this.asyncFunctionsQueue = [];
      queueCopy.forEach(function(func) {
        return func();
      });
    };
    __decorate([
      __param(0, Qualifier("loggerFactory")),
      __param(1, Qualifier("gridOptionsWrapper")),
      __param(2, Qualifier("frameworkOverrides")),
      __param(3, Qualifier("globalEventListener"))
    ], EventService2.prototype, "setBeans", null);
    EventService2 = __decorate([
      Bean("eventService")
    ], EventService2);
    return EventService2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var Constants = function() {
    function Constants2() {
    }
    Constants2.ROW_BUFFER_SIZE = 10;
    Constants2.LAYOUT_INTERVAL = 500;
    Constants2.BATCH_WAIT_MILLIS = 50;
    Constants2.EXPORT_TYPE_DRAG_COPY = "dragCopy";
    Constants2.EXPORT_TYPE_CLIPBOARD = "clipboard";
    Constants2.EXPORT_TYPE_EXCEL = "excel";
    Constants2.EXPORT_TYPE_CSV = "csv";
    Constants2.ROW_MODEL_TYPE_INFINITE = "infinite";
    Constants2.ROW_MODEL_TYPE_VIEWPORT = "viewport";
    Constants2.ROW_MODEL_TYPE_CLIENT_SIDE = "clientSide";
    Constants2.ROW_MODEL_TYPE_SERVER_SIDE = "serverSide";
    Constants2.ALWAYS = "always";
    Constants2.ONLY_WHEN_GROUPING = "onlyWhenGrouping";
    Constants2.PINNED_TOP = "top";
    Constants2.PINNED_BOTTOM = "bottom";
    Constants2.DOM_LAYOUT_NORMAL = "normal";
    Constants2.DOM_LAYOUT_PRINT = "print";
    Constants2.DOM_LAYOUT_AUTO_HEIGHT = "autoHeight";
    Constants2.GROUP_AUTO_COLUMN_ID = "ag-Grid-AutoColumn";
    Constants2.SOURCE_PASTE = "paste";
    Constants2.PINNED_RIGHT = "right";
    Constants2.PINNED_LEFT = "left";
    Constants2.SORT_ASC = "asc";
    Constants2.SORT_DESC = "desc";
    Constants2.INPUT_SELECTOR = "input, select, button, textarea";
    Constants2.FOCUSABLE_SELECTOR = "[tabindex], input, select, button, textarea";
    Constants2.FOCUSABLE_EXCLUDE = ".ag-hidden, .ag-hidden *, [disabled], .ag-disabled, .ag-disabled *";
    return Constants2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  (function(ModuleNames) {
    ModuleNames["CommunityCoreModule"] = "@ag-grid-community/core";
    ModuleNames["CommunityAllModules"] = "@ag-grid-community/all";
    ModuleNames["InfiniteRowModelModule"] = "@ag-grid-community/infinite-row-model";
    ModuleNames["ClientSideRowModelModule"] = "@ag-grid-community/client-side-row-model";
    ModuleNames["CsvExportModule"] = "@ag-grid-community/csv-export";
    ModuleNames["EnterpriseCoreModule"] = "@ag-grid-enterprise/core";
    ModuleNames["EnterpriseAllModules"] = "@ag-grid-enterprise/all";
    ModuleNames["RowGroupingModule"] = "@ag-grid-enterprise/row-grouping";
    ModuleNames["ColumnToolPanelModule"] = "@ag-grid-enterprise/column-tool-panel";
    ModuleNames["FiltersToolPanelModule"] = "@ag-grid-enterprise/filter-tool-panel";
    ModuleNames["MenuModule"] = "@ag-grid-enterprise/menu";
    ModuleNames["SetFilterModule"] = "@ag-grid-enterprise/set-filter";
    ModuleNames["MultiFilterModule"] = "@ag-grid-enterprise/multi-filter";
    ModuleNames["StatusBarModule"] = "@ag-grid-enterprise/status-bar";
    ModuleNames["SideBarModule"] = "@ag-grid-enterprise/side-bar";
    ModuleNames["RangeSelectionModule"] = "@ag-grid-enterprise/range-selection";
    ModuleNames["MasterDetailModule"] = "@ag-grid-enterprise/master-detail";
    ModuleNames["RichSelectModule"] = "@ag-grid-enterprise/rich-select";
    ModuleNames["GridChartsModule"] = "@ag-grid-enterprise/charts";
    ModuleNames["ViewportRowModelModule"] = "@ag-grid-enterprise/viewport-row-model";
    ModuleNames["ServerSideRowModelModule"] = "@ag-grid-enterprise/server-side-row-model";
    ModuleNames["ExcelExportModule"] = "@ag-grid-enterprise/excel-export";
    ModuleNames["ClipboardModule"] = "@ag-grid-enterprise/clipboard";
    ModuleNames["SparklinesModule"] = "@ag-grid-enterprise/sparklines";
    ModuleNames["AngularModule"] = "@ag-grid-community/angular";
    ModuleNames["ReactModule"] = "@ag-grid-community/react";
    ModuleNames["VueModule"] = "@ag-grid-community/vue";
    ModuleNames["PolymerModule"] = "@ag-grid-community/polymer";
  })(exports2.ModuleNames || (exports2.ModuleNames = {}));
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var ModuleRegistry = function() {
    function ModuleRegistry2() {
    }
    ModuleRegistry2.register = function(module2, moduleBased) {
      if (moduleBased === void 0) {
        moduleBased = true;
      }
      ModuleRegistry2.modulesMap[module2.moduleName] = module2;
      if (ModuleRegistry2.moduleBased === void 0) {
        ModuleRegistry2.moduleBased = moduleBased;
      } else {
        if (ModuleRegistry2.moduleBased !== moduleBased) {
          doOnce(function() {
            console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms.");
            console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.");
          }, "ModulePackageCheck");
        }
      }
    };
    ModuleRegistry2.registerModules = function(modules, moduleBased) {
      if (moduleBased === void 0) {
        moduleBased = true;
      }
      if (!modules) {
        return;
      }
      modules.forEach(function(module2) {
        return ModuleRegistry2.register(module2, moduleBased);
      });
    };
    ModuleRegistry2.assertRegistered = function(moduleName, reason) {
      if (this.isRegistered(moduleName)) {
        return true;
      }
      var warningKey = reason + moduleName;
      var warningMessage = "AG Grid: unable to use " + reason + " as module " + moduleName + " is not present. Please see: https://www.ag-grid.com/javascript-grid/modules/";
      doOnce(function() {
        console.warn(warningMessage);
      }, warningKey);
      return false;
    };
    ModuleRegistry2.isRegistered = function(moduleName) {
      return !!ModuleRegistry2.modulesMap[moduleName];
    };
    ModuleRegistry2.getRegisteredModules = function() {
      return values(ModuleRegistry2.modulesMap);
    };
    ModuleRegistry2.isPackageBased = function() {
      return !ModuleRegistry2.moduleBased;
    };
    ModuleRegistry2.modulesMap = {};
    return ModuleRegistry2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __decorate$1 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var instanceIdSequence = 0;
  var Column = function() {
    function Column2(colDef, userProvidedColDef, colId, primary) {
      this.instanceId = instanceIdSequence++;
      this.moving = false;
      this.menuVisible = false;
      this.filterActive = false;
      this.eventService = new EventService();
      this.rowGroupActive = false;
      this.pivotActive = false;
      this.aggregationActive = false;
      this.colDef = colDef;
      this.userProvidedColDef = userProvidedColDef;
      this.colId = colId;
      this.primary = primary;
      this.setState(colDef);
    }
    Column2.prototype.getInstanceId = function() {
      return this.instanceId;
    };
    Column2.prototype.setState = function(colDef) {
      if (colDef.sort !== void 0) {
        if (colDef.sort === Constants.SORT_ASC || colDef.sort === Constants.SORT_DESC) {
          this.sort = colDef.sort;
        }
      } else {
        if (colDef.initialSort === Constants.SORT_ASC || colDef.initialSort === Constants.SORT_DESC) {
          this.sort = colDef.initialSort;
        }
      }
      var sortIndex = attrToNumber(colDef.sortIndex);
      var initialSortIndex = attrToNumber(colDef.initialSortIndex);
      if (sortIndex !== void 0) {
        if (sortIndex !== null) {
          this.sortIndex = sortIndex;
        }
      } else {
        if (initialSortIndex !== null) {
          this.sortIndex = initialSortIndex;
        }
      }
      var hide = attrToBoolean(colDef.hide);
      var initialHide = attrToBoolean(colDef.initialHide);
      if (hide !== void 0) {
        this.visible = !hide;
      } else {
        this.visible = !initialHide;
      }
      if (colDef.pinned !== void 0) {
        this.setPinned(colDef.pinned);
      } else {
        this.setPinned(colDef.initialPinned);
      }
      var flex = attrToNumber(colDef.flex);
      var initialFlex = attrToNumber(colDef.initialFlex);
      if (flex !== void 0) {
        this.flex = flex;
      } else if (initialFlex !== void 0) {
        this.flex = initialFlex;
      }
    };
    Column2.prototype.setColDef = function(colDef, userProvidedColDef) {
      this.colDef = colDef;
      this.userProvidedColDef = userProvidedColDef;
      this.initMinAndMaxWidths();
      this.initDotNotation();
    };
    Column2.prototype.getUserProvidedColDef = function() {
      return this.userProvidedColDef;
    };
    Column2.prototype.setParent = function(parent) {
      this.parent = parent;
    };
    Column2.prototype.getParent = function() {
      return this.parent;
    };
    Column2.prototype.setOriginalParent = function(originalParent) {
      this.originalParent = originalParent;
    };
    Column2.prototype.getOriginalParent = function() {
      return this.originalParent;
    };
    Column2.prototype.initialise = function() {
      this.initMinAndMaxWidths();
      this.resetActualWidth("gridInitializing");
      this.initDotNotation();
      this.validate();
    };
    Column2.prototype.initDotNotation = function() {
      var suppressDotNotation = this.gridOptionsWrapper.isSuppressFieldDotNotation();
      this.fieldContainsDots = exists(this.colDef.field) && this.colDef.field.indexOf(".") >= 0 && !suppressDotNotation;
      this.tooltipFieldContainsDots = exists(this.colDef.tooltipField) && this.colDef.tooltipField.indexOf(".") >= 0 && !suppressDotNotation;
    };
    Column2.prototype.initMinAndMaxWidths = function() {
      var minColWidth = this.gridOptionsWrapper.getMinColWidth();
      var maxColWidth = this.gridOptionsWrapper.getMaxColWidth();
      if (this.colDef.minWidth != null) {
        this.minWidth = Math.max(this.colDef.minWidth, 1);
      } else {
        this.minWidth = minColWidth;
      }
      if (this.colDef.maxWidth != null) {
        this.maxWidth = this.colDef.maxWidth;
      } else {
        this.maxWidth = maxColWidth;
      }
    };
    Column2.prototype.resetActualWidth = function(source) {
      if (source === void 0) {
        source = "api";
      }
      var initialWidth = this.columnUtils.calculateColInitialWidth(this.colDef);
      this.setActualWidth(initialWidth, source, true);
    };
    Column2.prototype.isEmptyGroup = function() {
      return false;
    };
    Column2.prototype.isRowGroupDisplayed = function(colId) {
      if (missing(this.colDef) || missing(this.colDef.showRowGroup)) {
        return false;
      }
      var showingAllGroups = this.colDef.showRowGroup === true;
      var showingThisGroup = this.colDef.showRowGroup === colId;
      return showingAllGroups || showingThisGroup;
    };
    Column2.prototype.isPrimary = function() {
      return this.primary;
    };
    Column2.prototype.isFilterAllowed = function() {
      var filterDefined = !!this.colDef.filter || !!this.colDef.filterFramework;
      return this.primary && filterDefined;
    };
    Column2.prototype.isFieldContainsDots = function() {
      return this.fieldContainsDots;
    };
    Column2.prototype.isTooltipFieldContainsDots = function() {
      return this.tooltipFieldContainsDots;
    };
    Column2.prototype.validate = function() {
      var colDefAny = this.colDef;
      function warnOnce(msg, key, obj) {
        doOnce(function() {
          if (obj) {
            console.warn(msg, obj);
          } else {
            doOnce(function() {
              return console.warn(msg);
            }, key);
          }
        }, key);
      }
      var usingCSRM = this.gridOptionsWrapper.isRowModelDefault();
      if (usingCSRM && !ModuleRegistry.isRegistered(exports2.ModuleNames.RowGroupingModule)) {
        var rowGroupingItems = ["enableRowGroup", "rowGroup", "rowGroupIndex", "enablePivot", "enableValue", "pivot", "pivotIndex", "aggFunc"];
        rowGroupingItems.forEach(function(item) {
          if (exists(colDefAny[item])) {
            if (ModuleRegistry.isPackageBased()) {
              warnOnce("AG Grid: " + item + " is only valid in ag-grid-enterprise, your column definition should not have " + item, "ColumnRowGroupingMissing" + item);
            } else {
              warnOnce("AG Grid: " + item + " is only valid with AG Grid Enterprise Module " + exports2.ModuleNames.RowGroupingModule + " - your column definition should not have " + item, "ColumnRowGroupingMissing" + item);
            }
          }
        });
      }
      if (!ModuleRegistry.isRegistered(exports2.ModuleNames.RichSelectModule)) {
        if (this.colDef.cellEditor === "agRichSelect") {
          if (ModuleRegistry.isPackageBased()) {
            warnOnce("AG Grid: " + this.colDef.cellEditor + " can only be used with ag-grid-enterprise", "ColumnRichSelectMissing");
          } else {
            warnOnce("AG Grid: " + this.colDef.cellEditor + " can only be used with AG Grid Enterprise Module " + exports2.ModuleNames.RichSelectModule, "ColumnRichSelectMissing");
          }
        }
      }
      if (this.gridOptionsWrapper.isTreeData()) {
        var itemsNotAllowedWithTreeData = ["rowGroup", "rowGroupIndex", "pivot", "pivotIndex"];
        itemsNotAllowedWithTreeData.forEach(function(item) {
          if (exists(colDefAny[item])) {
            warnOnce("AG Grid: " + item + " is not possible when doing tree data, your column definition should not have " + item, "TreeDataCannotRowGroup");
          }
        });
      }
      if (exists(this.colDef.width) && typeof this.colDef.width !== "number") {
        warnOnce("AG Grid: colDef.width should be a number, not " + typeof this.colDef.width, "ColumnCheck_asdfawef");
      }
      if (colDefAny.pinnedRowCellRenderer) {
        warnOnce("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column", "colDef.pinnedRowCellRenderer-deprecated");
      }
      if (colDefAny.pinnedRowCellRendererParams) {
        warnOnce("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column", "colDef.pinnedRowCellRenderer-deprecated");
      }
      if (colDefAny.pinnedRowCellRendererFramework) {
        warnOnce("AG Grid: pinnedRowCellRenderer no longer exists, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue. See https://www.ag-grid.com/javascript-grid/cell-rendering/#many-renderers-one-column", "colDef.pinnedRowCellRenderer-deprecated");
      }
      if (colDefAny.pinnedRowValueGetter) {
        warnOnce("AG Grid: pinnedRowCellRenderer is deprecated, use cellRendererSelector if you want a different Cell Renderer for pinned rows. Check params.node.rowPinned. This was an unfortunate (but necessary) change we had to do to allow future plans we have of re-skinng the data grid in frameworks such as React, Angular and Vue.", "colDef.pinnedRowCellRenderer-deprecated");
      }
    };
    Column2.prototype.addEventListener = function(eventType, listener) {
      this.eventService.addEventListener(eventType, listener);
    };
    Column2.prototype.removeEventListener = function(eventType, listener) {
      this.eventService.removeEventListener(eventType, listener);
    };
    Column2.prototype.createColumnFunctionCallbackParams = function(rowNode) {
      return {
        node: rowNode,
        data: rowNode.data,
        column: this,
        colDef: this.colDef,
        context: this.gridOptionsWrapper.getContext(),
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi()
      };
    };
    Column2.prototype.isSuppressNavigable = function(rowNode) {
      if (typeof this.colDef.suppressNavigable === "boolean") {
        return this.colDef.suppressNavigable;
      }
      if (typeof this.colDef.suppressNavigable === "function") {
        var params2 = this.createColumnFunctionCallbackParams(rowNode);
        var userFunc = this.colDef.suppressNavigable;
        return userFunc(params2);
      }
      return false;
    };
    Column2.prototype.isCellEditable = function(rowNode) {
      if (rowNode.group && !this.gridOptionsWrapper.isEnableGroupEdit()) {
        return false;
      }
      return this.isColumnFunc(rowNode, this.colDef.editable);
    };
    Column2.prototype.isSuppressFillHandle = function() {
      return !!this.colDef.suppressFillHandle;
    };
    Column2.prototype.isRowDrag = function(rowNode) {
      return this.isColumnFunc(rowNode, this.colDef.rowDrag);
    };
    Column2.prototype.isDndSource = function(rowNode) {
      return this.isColumnFunc(rowNode, this.colDef.dndSource);
    };
    Column2.prototype.isCellCheckboxSelection = function(rowNode) {
      return this.isColumnFunc(rowNode, this.colDef.checkboxSelection);
    };
    Column2.prototype.isSuppressPaste = function(rowNode) {
      return this.isColumnFunc(rowNode, this.colDef ? this.colDef.suppressPaste : null);
    };
    Column2.prototype.isResizable = function() {
      return this.colDef.resizable === true;
    };
    Column2.prototype.isColumnFunc = function(rowNode, value) {
      if (typeof value === "boolean") {
        return value;
      }
      if (typeof value === "function") {
        var params2 = this.createColumnFunctionCallbackParams(rowNode);
        var editableFunc = value;
        return editableFunc(params2);
      }
      return false;
    };
    Column2.prototype.setMoving = function(moving, source) {
      if (source === void 0) {
        source = "api";
      }
      this.moving = moving;
      this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_MOVING_CHANGED, source));
    };
    Column2.prototype.createColumnEvent = function(type, source) {
      return {
        api: this.gridApi,
        columnApi: this.columnApi,
        type,
        column: this,
        columns: [this],
        source
      };
    };
    Column2.prototype.isMoving = function() {
      return this.moving;
    };
    Column2.prototype.getSort = function() {
      return this.sort;
    };
    Column2.prototype.setSort = function(sort, source) {
      if (source === void 0) {
        source = "api";
      }
      if (this.sort !== sort) {
        this.sort = sort;
        this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_SORT_CHANGED, source));
      }
    };
    Column2.prototype.setMenuVisible = function(visible, source) {
      if (source === void 0) {
        source = "api";
      }
      if (this.menuVisible !== visible) {
        this.menuVisible = visible;
        this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_MENU_VISIBLE_CHANGED, source));
      }
    };
    Column2.prototype.isMenuVisible = function() {
      return this.menuVisible;
    };
    Column2.prototype.isSortAscending = function() {
      return this.sort === Constants.SORT_ASC;
    };
    Column2.prototype.isSortDescending = function() {
      return this.sort === Constants.SORT_DESC;
    };
    Column2.prototype.isSortNone = function() {
      return missing(this.sort);
    };
    Column2.prototype.isSorting = function() {
      return exists(this.sort);
    };
    Column2.prototype.getSortIndex = function() {
      return this.sortIndex;
    };
    Column2.prototype.setSortIndex = function(sortOrder) {
      this.sortIndex = sortOrder;
    };
    Column2.prototype.setAggFunc = function(aggFunc) {
      this.aggFunc = aggFunc;
    };
    Column2.prototype.getAggFunc = function() {
      return this.aggFunc;
    };
    Column2.prototype.getLeft = function() {
      return this.left;
    };
    Column2.prototype.getOldLeft = function() {
      return this.oldLeft;
    };
    Column2.prototype.getRight = function() {
      return this.left + this.actualWidth;
    };
    Column2.prototype.setLeft = function(left, source) {
      if (source === void 0) {
        source = "api";
      }
      this.oldLeft = this.left;
      if (this.left !== left) {
        this.left = left;
        this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_LEFT_CHANGED, source));
      }
    };
    Column2.prototype.isFilterActive = function() {
      return this.filterActive;
    };
    Column2.prototype.setFilterActive = function(active2, source, additionalEventAttributes) {
      if (source === void 0) {
        source = "api";
      }
      if (this.filterActive !== active2) {
        this.filterActive = active2;
        this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_FILTER_ACTIVE_CHANGED, source));
      }
      var filterChangedEvent = this.createColumnEvent(Column2.EVENT_FILTER_CHANGED, source);
      if (additionalEventAttributes) {
        mergeDeep(filterChangedEvent, additionalEventAttributes);
      }
      this.eventService.dispatchEvent(filterChangedEvent);
    };
    Column2.prototype.setPinned = function(pinned) {
      if (pinned === true || pinned === Constants.PINNED_LEFT) {
        this.pinned = Constants.PINNED_LEFT;
      } else if (pinned === Constants.PINNED_RIGHT) {
        this.pinned = Constants.PINNED_RIGHT;
      } else {
        this.pinned = null;
      }
    };
    Column2.prototype.setFirstRightPinned = function(firstRightPinned, source) {
      if (source === void 0) {
        source = "api";
      }
      if (this.firstRightPinned !== firstRightPinned) {
        this.firstRightPinned = firstRightPinned;
        this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_FIRST_RIGHT_PINNED_CHANGED, source));
      }
    };
    Column2.prototype.setLastLeftPinned = function(lastLeftPinned, source) {
      if (source === void 0) {
        source = "api";
      }
      if (this.lastLeftPinned !== lastLeftPinned) {
        this.lastLeftPinned = lastLeftPinned;
        this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_LAST_LEFT_PINNED_CHANGED, source));
      }
    };
    Column2.prototype.isFirstRightPinned = function() {
      return this.firstRightPinned;
    };
    Column2.prototype.isLastLeftPinned = function() {
      return this.lastLeftPinned;
    };
    Column2.prototype.isPinned = function() {
      return this.pinned === Constants.PINNED_LEFT || this.pinned === Constants.PINNED_RIGHT;
    };
    Column2.prototype.isPinnedLeft = function() {
      return this.pinned === Constants.PINNED_LEFT;
    };
    Column2.prototype.isPinnedRight = function() {
      return this.pinned === Constants.PINNED_RIGHT;
    };
    Column2.prototype.getPinned = function() {
      return this.pinned;
    };
    Column2.prototype.setVisible = function(visible, source) {
      if (source === void 0) {
        source = "api";
      }
      var newValue = visible === true;
      if (this.visible !== newValue) {
        this.visible = newValue;
        this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_VISIBLE_CHANGED, source));
      }
    };
    Column2.prototype.isVisible = function() {
      return this.visible;
    };
    Column2.prototype.getColDef = function() {
      return this.colDef;
    };
    Column2.prototype.getColumnGroupShow = function() {
      return this.colDef.columnGroupShow;
    };
    Column2.prototype.getColId = function() {
      return this.colId;
    };
    Column2.prototype.getId = function() {
      return this.getColId();
    };
    Column2.prototype.getUniqueId = function() {
      return this.getId();
    };
    Column2.prototype.getDefinition = function() {
      return this.colDef;
    };
    Column2.prototype.getActualWidth = function() {
      return this.actualWidth;
    };
    Column2.prototype.createBaseColDefParams = function(rowNode) {
      var params2 = {
        node: rowNode,
        data: rowNode.data,
        colDef: this.colDef,
        column: this,
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        context: this.gridOptionsWrapper.getContext()
      };
      return params2;
    };
    Column2.prototype.getColSpan = function(rowNode) {
      if (missing(this.colDef.colSpan)) {
        return 1;
      }
      var params2 = this.createBaseColDefParams(rowNode);
      var colSpan = this.colDef.colSpan(params2);
      return Math.max(colSpan, 1);
    };
    Column2.prototype.getRowSpan = function(rowNode) {
      if (missing(this.colDef.rowSpan)) {
        return 1;
      }
      var params2 = this.createBaseColDefParams(rowNode);
      var rowSpan = this.colDef.rowSpan(params2);
      return Math.max(rowSpan, 1);
    };
    Column2.prototype.setActualWidth = function(actualWidth, source, silent) {
      if (source === void 0) {
        source = "api";
      }
      if (silent === void 0) {
        silent = false;
      }
      if (this.minWidth != null) {
        actualWidth = Math.max(actualWidth, this.minWidth);
      }
      if (this.maxWidth != null) {
        actualWidth = Math.min(actualWidth, this.maxWidth);
      }
      if (this.actualWidth !== actualWidth) {
        this.actualWidth = actualWidth;
        if (this.flex && source !== "flex" && source !== "gridInitializing") {
          this.flex = null;
        }
        if (!silent) {
          this.fireColumnWidthChangedEvent(source);
        }
      }
    };
    Column2.prototype.fireColumnWidthChangedEvent = function(source) {
      this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_WIDTH_CHANGED, source));
    };
    Column2.prototype.isGreaterThanMax = function(width) {
      if (this.maxWidth != null) {
        return width > this.maxWidth;
      }
      return false;
    };
    Column2.prototype.getMinWidth = function() {
      return this.minWidth;
    };
    Column2.prototype.getMaxWidth = function() {
      return this.maxWidth;
    };
    Column2.prototype.getFlex = function() {
      return this.flex || 0;
    };
    Column2.prototype.setFlex = function(flex) {
      if (this.flex !== flex) {
        this.flex = flex;
      }
    };
    Column2.prototype.setMinimum = function(source) {
      if (source === void 0) {
        source = "api";
      }
      if (exists(this.minWidth)) {
        this.setActualWidth(this.minWidth, source);
      }
    };
    Column2.prototype.setRowGroupActive = function(rowGroup, source) {
      if (source === void 0) {
        source = "api";
      }
      if (this.rowGroupActive !== rowGroup) {
        this.rowGroupActive = rowGroup;
        this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_ROW_GROUP_CHANGED, source));
      }
    };
    Column2.prototype.isRowGroupActive = function() {
      return this.rowGroupActive;
    };
    Column2.prototype.setPivotActive = function(pivot, source) {
      if (source === void 0) {
        source = "api";
      }
      if (this.pivotActive !== pivot) {
        this.pivotActive = pivot;
        this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_PIVOT_CHANGED, source));
      }
    };
    Column2.prototype.isPivotActive = function() {
      return this.pivotActive;
    };
    Column2.prototype.isAnyFunctionActive = function() {
      return this.isPivotActive() || this.isRowGroupActive() || this.isValueActive();
    };
    Column2.prototype.isAnyFunctionAllowed = function() {
      return this.isAllowPivot() || this.isAllowRowGroup() || this.isAllowValue();
    };
    Column2.prototype.setValueActive = function(value, source) {
      if (source === void 0) {
        source = "api";
      }
      if (this.aggregationActive !== value) {
        this.aggregationActive = value;
        this.eventService.dispatchEvent(this.createColumnEvent(Column2.EVENT_VALUE_CHANGED, source));
      }
    };
    Column2.prototype.isValueActive = function() {
      return this.aggregationActive;
    };
    Column2.prototype.isAllowPivot = function() {
      return this.colDef.enablePivot === true;
    };
    Column2.prototype.isAllowValue = function() {
      return this.colDef.enableValue === true;
    };
    Column2.prototype.isAllowRowGroup = function() {
      return this.colDef.enableRowGroup === true;
    };
    Column2.prototype.getMenuTabs = function(defaultValues) {
      var menuTabs = this.getColDef().menuTabs;
      if (menuTabs == null) {
        menuTabs = defaultValues;
      }
      return menuTabs;
    };
    Column2.prototype.isLockPosition = function() {
      console.warn("AG Grid: since v21, col.isLockPosition() should not be used, please use col.getColDef().lockPosition instead.");
      return this.colDef ? !!this.colDef.lockPosition : false;
    };
    Column2.prototype.isLockVisible = function() {
      console.warn("AG Grid: since v21, col.isLockVisible() should not be used, please use col.getColDef().lockVisible instead.");
      return this.colDef ? !!this.colDef.lockVisible : false;
    };
    Column2.prototype.isLockPinned = function() {
      console.warn("AG Grid: since v21, col.isLockPinned() should not be used, please use col.getColDef().lockPinned instead.");
      return this.colDef ? !!this.colDef.lockPinned : false;
    };
    Column2.EVENT_MOVING_CHANGED = "movingChanged";
    Column2.EVENT_LEFT_CHANGED = "leftChanged";
    Column2.EVENT_WIDTH_CHANGED = "widthChanged";
    Column2.EVENT_LAST_LEFT_PINNED_CHANGED = "lastLeftPinnedChanged";
    Column2.EVENT_FIRST_RIGHT_PINNED_CHANGED = "firstRightPinnedChanged";
    Column2.EVENT_VISIBLE_CHANGED = "visibleChanged";
    Column2.EVENT_FILTER_CHANGED = "filterChanged";
    Column2.EVENT_FILTER_ACTIVE_CHANGED = "filterActiveChanged";
    Column2.EVENT_SORT_CHANGED = "sortChanged";
    Column2.EVENT_MENU_VISIBLE_CHANGED = "menuVisibleChanged";
    Column2.EVENT_ROW_GROUP_CHANGED = "columnRowGroupChanged";
    Column2.EVENT_PIVOT_CHANGED = "columnPivotChanged";
    Column2.EVENT_VALUE_CHANGED = "columnValueChanged";
    __decorate$1([
      Autowired("gridOptionsWrapper")
    ], Column2.prototype, "gridOptionsWrapper", void 0);
    __decorate$1([
      Autowired("columnUtils")
    ], Column2.prototype, "columnUtils", void 0);
    __decorate$1([
      Autowired("columnApi")
    ], Column2.prototype, "columnApi", void 0);
    __decorate$1([
      Autowired("gridApi")
    ], Column2.prototype, "gridApi", void 0);
    __decorate$1([
      Autowired("context")
    ], Column2.prototype, "context", void 0);
    __decorate$1([
      PostConstruct
    ], Column2.prototype, "initialise", null);
    return Column2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __decorate$2 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ColumnGroup = function() {
    function ColumnGroup2(originalColumnGroup, groupId, instanceId, pinned) {
      this.displayedChildren = [];
      this.localEventService = new EventService();
      this.groupId = groupId;
      this.instanceId = instanceId;
      this.originalColumnGroup = originalColumnGroup;
      this.pinned = pinned;
    }
    ColumnGroup2.createUniqueId = function(groupId, instanceId) {
      return groupId + "_" + instanceId;
    };
    ColumnGroup2.prototype.reset = function() {
      this.parent = null;
      this.children = null;
      this.displayedChildren = null;
    };
    ColumnGroup2.prototype.getParent = function() {
      return this.parent;
    };
    ColumnGroup2.prototype.setParent = function(parent) {
      this.parent = parent;
    };
    ColumnGroup2.prototype.getUniqueId = function() {
      return ColumnGroup2.createUniqueId(this.groupId, this.instanceId);
    };
    ColumnGroup2.prototype.isEmptyGroup = function() {
      return this.displayedChildren.length === 0;
    };
    ColumnGroup2.prototype.isMoving = function() {
      var allLeafColumns = this.getOriginalColumnGroup().getLeafColumns();
      if (!allLeafColumns || allLeafColumns.length === 0) {
        return false;
      }
      return allLeafColumns.every(function(col) {
        return col.isMoving();
      });
    };
    ColumnGroup2.prototype.checkLeft = function() {
      this.displayedChildren.forEach(function(child) {
        if (child instanceof ColumnGroup2) {
          child.checkLeft();
        }
      });
      if (this.displayedChildren.length > 0) {
        if (this.gridOptionsWrapper.isEnableRtl()) {
          var lastChild = last(this.displayedChildren);
          var lastChildLeft = lastChild.getLeft();
          this.setLeft(lastChildLeft);
        } else {
          var firstChildLeft = this.displayedChildren[0].getLeft();
          this.setLeft(firstChildLeft);
        }
      } else {
        this.setLeft(null);
      }
    };
    ColumnGroup2.prototype.getLeft = function() {
      return this.left;
    };
    ColumnGroup2.prototype.getOldLeft = function() {
      return this.oldLeft;
    };
    ColumnGroup2.prototype.setLeft = function(left) {
      this.oldLeft = left;
      if (this.left !== left) {
        this.left = left;
        this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup2.EVENT_LEFT_CHANGED));
      }
    };
    ColumnGroup2.prototype.getPinned = function() {
      return this.pinned;
    };
    ColumnGroup2.prototype.createAgEvent = function(type) {
      return { type };
    };
    ColumnGroup2.prototype.addEventListener = function(eventType, listener) {
      this.localEventService.addEventListener(eventType, listener);
    };
    ColumnGroup2.prototype.removeEventListener = function(eventType, listener) {
      this.localEventService.removeEventListener(eventType, listener);
    };
    ColumnGroup2.prototype.getGroupId = function() {
      return this.groupId;
    };
    ColumnGroup2.prototype.getInstanceId = function() {
      return this.instanceId;
    };
    ColumnGroup2.prototype.isChildInThisGroupDeepSearch = function(wantedChild) {
      var result = false;
      this.children.forEach(function(foundChild) {
        if (wantedChild === foundChild) {
          result = true;
        }
        if (foundChild instanceof ColumnGroup2) {
          if (foundChild.isChildInThisGroupDeepSearch(wantedChild)) {
            result = true;
          }
        }
      });
      return result;
    };
    ColumnGroup2.prototype.getActualWidth = function() {
      var groupActualWidth = 0;
      if (this.displayedChildren) {
        this.displayedChildren.forEach(function(child) {
          groupActualWidth += child.getActualWidth();
        });
      }
      return groupActualWidth;
    };
    ColumnGroup2.prototype.isResizable = function() {
      if (!this.displayedChildren) {
        return false;
      }
      var result = false;
      this.displayedChildren.forEach(function(child) {
        if (child.isResizable()) {
          result = true;
        }
      });
      return result;
    };
    ColumnGroup2.prototype.getMinWidth = function() {
      var result = 0;
      this.displayedChildren.forEach(function(groupChild) {
        result += groupChild.getMinWidth() || 0;
      });
      return result;
    };
    ColumnGroup2.prototype.addChild = function(child) {
      if (!this.children) {
        this.children = [];
      }
      this.children.push(child);
    };
    ColumnGroup2.prototype.getDisplayedChildren = function() {
      return this.displayedChildren;
    };
    ColumnGroup2.prototype.getLeafColumns = function() {
      var result = [];
      this.addLeafColumns(result);
      return result;
    };
    ColumnGroup2.prototype.getDisplayedLeafColumns = function() {
      var result = [];
      this.addDisplayedLeafColumns(result);
      return result;
    };
    ColumnGroup2.prototype.getDefinition = function() {
      return this.originalColumnGroup.getColGroupDef();
    };
    ColumnGroup2.prototype.getColGroupDef = function() {
      return this.originalColumnGroup.getColGroupDef();
    };
    ColumnGroup2.prototype.isPadding = function() {
      return this.originalColumnGroup.isPadding();
    };
    ColumnGroup2.prototype.isExpandable = function() {
      return this.originalColumnGroup.isExpandable();
    };
    ColumnGroup2.prototype.isExpanded = function() {
      return this.originalColumnGroup.isExpanded();
    };
    ColumnGroup2.prototype.setExpanded = function(expanded) {
      this.originalColumnGroup.setExpanded(expanded);
    };
    ColumnGroup2.prototype.addDisplayedLeafColumns = function(leafColumns) {
      this.displayedChildren.forEach(function(child) {
        if (child instanceof Column) {
          leafColumns.push(child);
        } else if (child instanceof ColumnGroup2) {
          child.addDisplayedLeafColumns(leafColumns);
        }
      });
    };
    ColumnGroup2.prototype.addLeafColumns = function(leafColumns) {
      this.children.forEach(function(child) {
        if (child instanceof Column) {
          leafColumns.push(child);
        } else if (child instanceof ColumnGroup2) {
          child.addLeafColumns(leafColumns);
        }
      });
    };
    ColumnGroup2.prototype.getChildren = function() {
      return this.children;
    };
    ColumnGroup2.prototype.getColumnGroupShow = function() {
      return this.originalColumnGroup.getColumnGroupShow();
    };
    ColumnGroup2.prototype.getOriginalColumnGroup = function() {
      return this.originalColumnGroup;
    };
    ColumnGroup2.prototype.getPaddingLevel = function() {
      var parent = this.getParent();
      if (!this.isPadding() || !parent || !parent.isPadding()) {
        return 0;
      }
      return 1 + parent.getPaddingLevel();
    };
    ColumnGroup2.prototype.calculateDisplayedColumns = function() {
      var _this = this;
      this.displayedChildren = [];
      var parentWithExpansion = this;
      while (parentWithExpansion != null && parentWithExpansion.isPadding()) {
        parentWithExpansion = parentWithExpansion.getParent();
      }
      var isExpandable = parentWithExpansion ? parentWithExpansion.originalColumnGroup.isExpandable() : false;
      if (!isExpandable) {
        this.displayedChildren = this.children;
        this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup2.EVENT_DISPLAYED_CHILDREN_CHANGED));
        return;
      }
      this.children.forEach(function(child) {
        var emptyGroup = child instanceof ColumnGroup2 && (!child.displayedChildren || !child.displayedChildren.length);
        if (emptyGroup) {
          return;
        }
        var headerGroupShow = child.getColumnGroupShow();
        switch (headerGroupShow) {
          case ColumnGroup2.HEADER_GROUP_SHOW_OPEN:
            if (parentWithExpansion.originalColumnGroup.isExpanded()) {
              _this.displayedChildren.push(child);
            }
            break;
          case ColumnGroup2.HEADER_GROUP_SHOW_CLOSED:
            if (!parentWithExpansion.originalColumnGroup.isExpanded()) {
              _this.displayedChildren.push(child);
            }
            break;
          default:
            _this.displayedChildren.push(child);
            break;
        }
      });
      this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup2.EVENT_DISPLAYED_CHILDREN_CHANGED));
    };
    ColumnGroup2.HEADER_GROUP_SHOW_OPEN = "open";
    ColumnGroup2.HEADER_GROUP_SHOW_CLOSED = "closed";
    ColumnGroup2.EVENT_LEFT_CHANGED = "leftChanged";
    ColumnGroup2.EVENT_DISPLAYED_CHILDREN_CHANGED = "displayedChildrenChanged";
    __decorate$2([
      Autowired("gridOptionsWrapper")
    ], ColumnGroup2.prototype, "gridOptionsWrapper", void 0);
    return ColumnGroup2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var ProvidedColumnGroup = function() {
    function ProvidedColumnGroup2(colGroupDef, groupId, padding, level) {
      this.localEventService = new EventService();
      this.expandable = false;
      this.colGroupDef = colGroupDef;
      this.groupId = groupId;
      this.expanded = !!colGroupDef && !!colGroupDef.openByDefault;
      this.padding = padding;
      this.level = level;
    }
    ProvidedColumnGroup2.prototype.setOriginalParent = function(originalParent) {
      this.originalParent = originalParent;
    };
    ProvidedColumnGroup2.prototype.getOriginalParent = function() {
      return this.originalParent;
    };
    ProvidedColumnGroup2.prototype.getLevel = function() {
      return this.level;
    };
    ProvidedColumnGroup2.prototype.isVisible = function() {
      if (this.children) {
        return this.children.some(function(child) {
          return child.isVisible();
        });
      }
      return false;
    };
    ProvidedColumnGroup2.prototype.isPadding = function() {
      return this.padding;
    };
    ProvidedColumnGroup2.prototype.setExpanded = function(expanded) {
      this.expanded = expanded === void 0 ? false : expanded;
      var event = {
        type: ProvidedColumnGroup2.EVENT_EXPANDED_CHANGED
      };
      this.localEventService.dispatchEvent(event);
    };
    ProvidedColumnGroup2.prototype.isExpandable = function() {
      return this.expandable;
    };
    ProvidedColumnGroup2.prototype.isExpanded = function() {
      return this.expanded;
    };
    ProvidedColumnGroup2.prototype.getGroupId = function() {
      return this.groupId;
    };
    ProvidedColumnGroup2.prototype.getId = function() {
      return this.getGroupId();
    };
    ProvidedColumnGroup2.prototype.setChildren = function(children2) {
      this.children = children2;
    };
    ProvidedColumnGroup2.prototype.getChildren = function() {
      return this.children;
    };
    ProvidedColumnGroup2.prototype.getColGroupDef = function() {
      return this.colGroupDef;
    };
    ProvidedColumnGroup2.prototype.getLeafColumns = function() {
      var result = [];
      this.addLeafColumns(result);
      return result;
    };
    ProvidedColumnGroup2.prototype.addLeafColumns = function(leafColumns) {
      if (!this.children) {
        return;
      }
      this.children.forEach(function(child) {
        if (child instanceof Column) {
          leafColumns.push(child);
        } else if (child instanceof ProvidedColumnGroup2) {
          child.addLeafColumns(leafColumns);
        }
      });
    };
    ProvidedColumnGroup2.prototype.getColumnGroupShow = function() {
      var colGroupDef = this.colGroupDef;
      if (!colGroupDef) {
        return;
      }
      return colGroupDef.columnGroupShow;
    };
    ProvidedColumnGroup2.prototype.setupExpandable = function() {
      var _this = this;
      this.setExpandable();
      this.getLeafColumns().forEach(function(col) {
        return col.addEventListener(Column.EVENT_VISIBLE_CHANGED, _this.onColumnVisibilityChanged.bind(_this));
      });
    };
    ProvidedColumnGroup2.prototype.setExpandable = function() {
      if (this.isPadding()) {
        return;
      }
      var atLeastOneShowingWhenOpen = false;
      var atLeastOneShowingWhenClosed = false;
      var atLeastOneChangeable = false;
      var children2 = this.findChildrenRemovingPadding();
      for (var i2 = 0, j = children2.length; i2 < j; i2++) {
        var abstractColumn = children2[i2];
        if (!abstractColumn.isVisible()) {
          continue;
        }
        var headerGroupShow = abstractColumn.getColumnGroupShow();
        if (headerGroupShow === ColumnGroup.HEADER_GROUP_SHOW_OPEN) {
          atLeastOneShowingWhenOpen = true;
          atLeastOneChangeable = true;
        } else if (headerGroupShow === ColumnGroup.HEADER_GROUP_SHOW_CLOSED) {
          atLeastOneShowingWhenClosed = true;
          atLeastOneChangeable = true;
        } else {
          atLeastOneShowingWhenOpen = true;
          atLeastOneShowingWhenClosed = true;
        }
      }
      var expandable = atLeastOneShowingWhenOpen && atLeastOneShowingWhenClosed && atLeastOneChangeable;
      if (this.expandable !== expandable) {
        this.expandable = expandable;
        var event_1 = {
          type: ProvidedColumnGroup2.EVENT_EXPANDABLE_CHANGED
        };
        this.localEventService.dispatchEvent(event_1);
      }
    };
    ProvidedColumnGroup2.prototype.findChildrenRemovingPadding = function() {
      var res = [];
      var process2 = function(items) {
        items.forEach(function(item) {
          var skipBecausePadding = item instanceof ProvidedColumnGroup2 && item.isPadding();
          if (skipBecausePadding) {
            process2(item.children);
          } else {
            res.push(item);
          }
        });
      };
      process2(this.children);
      return res;
    };
    ProvidedColumnGroup2.prototype.onColumnVisibilityChanged = function() {
      this.setExpandable();
    };
    ProvidedColumnGroup2.prototype.addEventListener = function(eventType, listener) {
      this.localEventService.addEventListener(eventType, listener);
    };
    ProvidedColumnGroup2.prototype.removeEventListener = function(eventType, listener) {
      this.localEventService.removeEventListener(eventType, listener);
    };
    ProvidedColumnGroup2.EVENT_EXPANDED_CHANGED = "expandedChanged";
    ProvidedColumnGroup2.EVENT_EXPANDABLE_CHANGED = "expandableChanged";
    return ProvidedColumnGroup2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var DefaultColumnTypes = {
    numericColumn: {
      headerClass: "ag-right-aligned-header",
      cellClass: "ag-right-aligned-cell"
    },
    rightAligned: {
      headerClass: "ag-right-aligned-header",
      cellClass: "ag-right-aligned-cell"
    }
  };
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var AG_GRID_STOP_PROPAGATION = "__ag_Grid_Stop_Propagation";
  var PASSIVE_EVENTS = ["touchstart", "touchend", "touchmove", "touchcancel"];
  var supports = {};
  function stopPropagationForAgGrid(event) {
    event[AG_GRID_STOP_PROPAGATION] = true;
  }
  function isStopPropagationForAgGrid(event) {
    return event[AG_GRID_STOP_PROPAGATION] === true;
  }
  var isEventSupported = function() {
    var tags = {
      select: "input",
      change: "input",
      submit: "form",
      reset: "form",
      error: "img",
      load: "img",
      abort: "img"
    };
    var eventChecker = function(eventName) {
      if (typeof supports[eventName] === "boolean") {
        return supports[eventName];
      }
      var el = document.createElement(tags[eventName] || "div");
      eventName = "on" + eventName;
      var isSupported = eventName in el;
      if (!isSupported) {
        el.setAttribute(eventName, "return;");
        isSupported = typeof el[eventName] == "function";
      }
      return supports[eventName] = isSupported;
    };
    return eventChecker;
  }();
  function getCtrlForEvent(gridOptionsWrapper, event, type) {
    var sourceElement = getTarget(event);
    while (sourceElement) {
      var renderedComp = gridOptionsWrapper.getDomData(sourceElement, type);
      if (renderedComp) {
        return renderedComp;
      }
      sourceElement = sourceElement.parentElement;
    }
    return null;
  }
  function addChangeListener(element2, listener) {
    element2.addEventListener("changed", listener);
    element2.addEventListener("paste", listener);
    element2.addEventListener("input", listener);
    element2.addEventListener("keydown", listener);
    element2.addEventListener("keyup", listener);
  }
  function getTarget(event) {
    var eventNoType = event;
    return eventNoType.target || eventNoType.srcElement;
  }
  function isElementInEventPath(element2, event) {
    if (!event || !element2) {
      return false;
    }
    return getEventPath(event).indexOf(element2) >= 0;
  }
  function createEventPath(event) {
    var res = [];
    var pointer = getTarget(event);
    while (pointer) {
      res.push(pointer);
      pointer = pointer.parentElement;
    }
    return res;
  }
  function addAgGridEventPath(event) {
    event.__agGridEventPath = getEventPath(event);
  }
  function getEventPath(event) {
    var eventNoType = event;
    if (eventNoType.deepPath) {
      return eventNoType.deepPath();
    }
    if (eventNoType.path) {
      return eventNoType.path;
    }
    if (eventNoType.composedPath) {
      return eventNoType.composedPath();
    }
    if (eventNoType.__agGridEventPath) {
      return eventNoType.__agGridEventPath;
    }
    return createEventPath(event);
  }
  function addSafePassiveEventListener(frameworkOverrides, eElement, event, listener) {
    var isPassive = includes2(PASSIVE_EVENTS, event);
    var options = isPassive ? { passive: true } : void 0;
    if (frameworkOverrides && frameworkOverrides.addEventListener) {
      frameworkOverrides.addEventListener(eElement, event, listener, options);
    }
  }
  var EventUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    stopPropagationForAgGrid,
    isStopPropagationForAgGrid,
    isEventSupported,
    getCtrlForEvent,
    addChangeListener,
    getTarget,
    isElementInEventPath,
    createEventPath,
    addAgGridEventPath,
    getEventPath,
    addSafePassiveEventListener
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __decorate$3 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var BeanStub = function() {
    function BeanStub2() {
      var _this = this;
      this.destroyFunctions = [];
      this.destroyed = false;
      this.__v_skip = true;
      this.isAlive = function() {
        return !_this.destroyed;
      };
    }
    BeanStub2.prototype.getFrameworkOverrides = function() {
      return this.frameworkOverrides;
    };
    BeanStub2.prototype.getContext = function() {
      return this.context;
    };
    BeanStub2.prototype.destroy = function() {
      this.destroyFunctions.forEach(function(func) {
        return func();
      });
      this.destroyFunctions.length = 0;
      this.destroyed = true;
      this.dispatchEvent({ type: BeanStub2.EVENT_DESTROYED });
    };
    BeanStub2.prototype.addEventListener = function(eventType, listener) {
      if (!this.localEventService) {
        this.localEventService = new EventService();
      }
      this.localEventService.addEventListener(eventType, listener);
    };
    BeanStub2.prototype.removeEventListener = function(eventType, listener) {
      if (this.localEventService) {
        this.localEventService.removeEventListener(eventType, listener);
      }
    };
    BeanStub2.prototype.dispatchEventAsync = function(event) {
      var _this = this;
      window.setTimeout(function() {
        return _this.dispatchEvent(event);
      }, 0);
    };
    BeanStub2.prototype.dispatchEvent = function(event) {
      if (this.localEventService) {
        this.localEventService.dispatchEvent(event);
      }
    };
    BeanStub2.prototype.addManagedListener = function(object, event, listener) {
      var _this = this;
      if (this.destroyed) {
        return;
      }
      if (object instanceof HTMLElement) {
        addSafePassiveEventListener(this.getFrameworkOverrides(), object, event, listener);
      } else {
        object.addEventListener(event, listener);
      }
      var destroyFunc = function() {
        object.removeEventListener(event, listener);
        _this.destroyFunctions = _this.destroyFunctions.filter(function(fn) {
          return fn !== destroyFunc;
        });
        return null;
      };
      this.destroyFunctions.push(destroyFunc);
      return destroyFunc;
    };
    BeanStub2.prototype.addDestroyFunc = function(func) {
      if (this.isAlive()) {
        this.destroyFunctions.push(func);
      } else {
        func();
      }
    };
    BeanStub2.prototype.createManagedBean = function(bean, context) {
      var res = this.createBean(bean, context);
      this.addDestroyFunc(this.destroyBean.bind(this, bean, context));
      return res;
    };
    BeanStub2.prototype.createBean = function(bean, context, afterPreCreateCallback) {
      return (context || this.getContext()).createBean(bean, afterPreCreateCallback);
    };
    BeanStub2.prototype.destroyBean = function(bean, context) {
      return (context || this.getContext()).destroyBean(bean);
    };
    BeanStub2.prototype.destroyBeans = function(beans, context) {
      var _this = this;
      if (beans) {
        forEach(beans, function(bean) {
          return _this.destroyBean(bean, context);
        });
      }
      return [];
    };
    BeanStub2.EVENT_DESTROYED = "destroyed";
    __decorate$3([
      Autowired("frameworkOverrides")
    ], BeanStub2.prototype, "frameworkOverrides", void 0);
    __decorate$3([
      Autowired("context")
    ], BeanStub2.prototype, "context", void 0);
    __decorate$3([
      Autowired("eventService")
    ], BeanStub2.prototype, "eventService", void 0);
    __decorate$3([
      Autowired("gridOptionsWrapper")
    ], BeanStub2.prototype, "gridOptionsWrapper", void 0);
    __decorate$3([
      PreDestroy
    ], BeanStub2.prototype, "destroy", null);
    return BeanStub2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$4 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param$1 = function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  var ColumnFactory = function(_super) {
    __extends(ColumnFactory2, _super);
    function ColumnFactory2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnFactory2.prototype.setBeans = function(loggerFactory) {
      this.logger = loggerFactory.create("ColumnFactory");
    };
    ColumnFactory2.prototype.createColumnTree = function(defs, primaryColumns, existingTree) {
      var columnKeyCreator = new ColumnKeyCreator();
      var _a = this.extractExistingTreeData(existingTree), existingCols = _a.existingCols, existingGroups = _a.existingGroups, existingColKeys = _a.existingColKeys;
      columnKeyCreator.addExistingKeys(existingColKeys);
      var unbalancedTree = this.recursivelyCreateColumns(defs, 0, primaryColumns, existingCols, columnKeyCreator, existingGroups);
      var treeDept = this.findMaxDept(unbalancedTree, 0);
      this.logger.log("Number of levels for grouped columns is " + treeDept);
      var columnTree = this.balanceColumnTree(unbalancedTree, 0, treeDept, columnKeyCreator);
      var deptFirstCallback = function(child, parent) {
        if (child instanceof ProvidedColumnGroup) {
          child.setupExpandable();
        }
        child.setOriginalParent(parent);
      };
      this.columnUtils.depthFirstOriginalTreeSearch(null, columnTree, deptFirstCallback);
      return {
        columnTree,
        treeDept
      };
    };
    ColumnFactory2.prototype.extractExistingTreeData = function(existingTree) {
      var existingCols = [];
      var existingGroups = [];
      var existingColKeys = [];
      if (existingTree) {
        this.columnUtils.depthFirstOriginalTreeSearch(null, existingTree, function(item) {
          if (item instanceof ProvidedColumnGroup) {
            var group = item;
            existingGroups.push(group);
          } else {
            var col = item;
            existingColKeys.push(col.getId());
            existingCols.push(col);
          }
        });
      }
      return { existingCols, existingGroups, existingColKeys };
    };
    ColumnFactory2.prototype.createForAutoGroups = function(autoGroupCols, gridBalancedTree) {
      var _this = this;
      var autoColBalancedTree = [];
      autoGroupCols.forEach(function(col) {
        var fakeTreeItem = _this.createAutoGroupTreeItem(gridBalancedTree, col);
        autoColBalancedTree.push(fakeTreeItem);
      });
      return autoColBalancedTree;
    };
    ColumnFactory2.prototype.createAutoGroupTreeItem = function(balancedColumnTree, column) {
      var dept = this.findDepth(balancedColumnTree);
      var nextChild = column;
      for (var i2 = dept - 1; i2 >= 0; i2--) {
        var autoGroup = new ProvidedColumnGroup(null, "FAKE_PATH_" + column.getId() + "}_" + i2, true, i2);
        this.context.createBean(autoGroup);
        autoGroup.setChildren([nextChild]);
        nextChild.setOriginalParent(autoGroup);
        nextChild = autoGroup;
      }
      return nextChild;
    };
    ColumnFactory2.prototype.findDepth = function(balancedColumnTree) {
      var dept = 0;
      var pointer = balancedColumnTree;
      while (pointer && pointer[0] && pointer[0] instanceof ProvidedColumnGroup) {
        dept++;
        pointer = pointer[0].getChildren();
      }
      return dept;
    };
    ColumnFactory2.prototype.balanceColumnTree = function(unbalancedTree, currentDept, columnDept, columnKeyCreator) {
      var result = [];
      for (var i2 = 0; i2 < unbalancedTree.length; i2++) {
        var child = unbalancedTree[i2];
        if (child instanceof ProvidedColumnGroup) {
          var originalGroup = child;
          var newChildren = this.balanceColumnTree(originalGroup.getChildren(), currentDept + 1, columnDept, columnKeyCreator);
          originalGroup.setChildren(newChildren);
          result.push(originalGroup);
        } else {
          var firstPaddedGroup = void 0;
          var currentPaddedGroup = void 0;
          for (var j = columnDept - 1; j >= currentDept; j--) {
            var newColId = columnKeyCreator.getUniqueKey(null, null);
            var colGroupDefMerged = this.createMergedColGroupDef(null);
            var paddedGroup = new ProvidedColumnGroup(colGroupDefMerged, newColId, true, currentDept);
            this.context.createBean(paddedGroup);
            if (currentPaddedGroup) {
              currentPaddedGroup.setChildren([paddedGroup]);
            }
            currentPaddedGroup = paddedGroup;
            if (!firstPaddedGroup) {
              firstPaddedGroup = currentPaddedGroup;
            }
          }
          if (firstPaddedGroup && currentPaddedGroup) {
            result.push(firstPaddedGroup);
            var hasGroups = unbalancedTree.some(function(leaf) {
              return leaf instanceof ProvidedColumnGroup;
            });
            if (hasGroups) {
              currentPaddedGroup.setChildren([child]);
              continue;
            } else {
              currentPaddedGroup.setChildren(unbalancedTree);
              break;
            }
          }
          result.push(child);
        }
      }
      return result;
    };
    ColumnFactory2.prototype.findMaxDept = function(treeChildren, dept) {
      var maxDeptThisLevel = dept;
      for (var i2 = 0; i2 < treeChildren.length; i2++) {
        var abstractColumn = treeChildren[i2];
        if (abstractColumn instanceof ProvidedColumnGroup) {
          var originalGroup = abstractColumn;
          var newDept = this.findMaxDept(originalGroup.getChildren(), dept + 1);
          if (maxDeptThisLevel < newDept) {
            maxDeptThisLevel = newDept;
          }
        }
      }
      return maxDeptThisLevel;
    };
    ColumnFactory2.prototype.recursivelyCreateColumns = function(defs, level, primaryColumns, existingColsCopy, columnKeyCreator, existingGroups) {
      var _this = this;
      var result = [];
      if (!defs) {
        return result;
      }
      defs.forEach(function(def) {
        var newGroupOrColumn;
        if (_this.isColumnGroup(def)) {
          newGroupOrColumn = _this.createColumnGroup(primaryColumns, def, level, existingColsCopy, columnKeyCreator, existingGroups);
        } else {
          newGroupOrColumn = _this.createColumn(primaryColumns, def, existingColsCopy, columnKeyCreator);
        }
        result.push(newGroupOrColumn);
      });
      return result;
    };
    ColumnFactory2.prototype.createColumnGroup = function(primaryColumns, colGroupDef, level, existingColumns, columnKeyCreator, existingGroups) {
      var colGroupDefMerged = this.createMergedColGroupDef(colGroupDef);
      var groupId = columnKeyCreator.getUniqueKey(colGroupDefMerged.groupId || null, null);
      var originalGroup = new ProvidedColumnGroup(colGroupDefMerged, groupId, false, level);
      this.context.createBean(originalGroup);
      var existingGroup = this.findExistingGroup(colGroupDef, existingGroups);
      if (existingGroup && existingGroup.isExpanded()) {
        originalGroup.setExpanded(true);
      }
      var children2 = this.recursivelyCreateColumns(colGroupDefMerged.children, level + 1, primaryColumns, existingColumns, columnKeyCreator, existingGroups);
      originalGroup.setChildren(children2);
      return originalGroup;
    };
    ColumnFactory2.prototype.createMergedColGroupDef = function(colGroupDef) {
      var colGroupDefMerged = {};
      assign2(colGroupDefMerged, this.gridOptionsWrapper.getDefaultColGroupDef());
      assign2(colGroupDefMerged, colGroupDef);
      this.checkForDeprecatedItems(colGroupDefMerged);
      return colGroupDefMerged;
    };
    ColumnFactory2.prototype.createColumn = function(primaryColumns, colDef, existingColsCopy, columnKeyCreator) {
      var colDefMerged = this.mergeColDefs(colDef);
      this.checkForDeprecatedItems(colDefMerged);
      var column = this.findExistingColumn(colDef, existingColsCopy);
      if (!column) {
        var colId = columnKeyCreator.getUniqueKey(colDefMerged.colId, colDefMerged.field);
        column = new Column(colDefMerged, colDef, colId, primaryColumns);
        this.context.createBean(column);
      } else {
        column.setColDef(colDefMerged, colDef);
        this.applyColumnState(column, colDefMerged);
      }
      return column;
    };
    ColumnFactory2.prototype.applyColumnState = function(column, colDef) {
      var flex = attrToNumber(colDef.flex);
      if (flex !== void 0) {
        column.setFlex(flex);
      }
      var noFlexThisCol = column.getFlex() <= 0;
      if (noFlexThisCol) {
        var width = attrToNumber(colDef.width);
        if (width != null) {
          column.setActualWidth(width);
        } else {
          var widthBeforeUpdate = column.getActualWidth();
          column.setActualWidth(widthBeforeUpdate);
        }
      }
      if (colDef.sort !== void 0) {
        if (colDef.sort == Constants.SORT_ASC || colDef.sort == Constants.SORT_DESC) {
          column.setSort(colDef.sort);
        } else {
          column.setSort(void 0);
        }
      }
      var sortIndex = attrToNumber(colDef.sortIndex);
      if (sortIndex !== void 0) {
        column.setSortIndex(sortIndex);
      }
      var hide = attrToBoolean(colDef.hide);
      if (hide !== void 0) {
        column.setVisible(!hide);
      }
      if (colDef.pinned !== void 0) {
        column.setPinned(colDef.pinned);
      }
    };
    ColumnFactory2.prototype.findExistingColumn = function(newColDef, existingColsCopy) {
      var res = find(existingColsCopy, function(existingCol) {
        var existingColDef = existingCol.getUserProvidedColDef();
        if (!existingColDef) {
          return false;
        }
        var newHasId = newColDef.colId != null;
        var newHasField = newColDef.field != null;
        if (newHasId) {
          return existingCol.getId() === newColDef.colId;
        }
        if (newHasField) {
          return existingColDef.field === newColDef.field;
        }
        if (existingColDef === newColDef) {
          return true;
        }
        return false;
      });
      if (existingColsCopy && res) {
        removeFromArray(existingColsCopy, res);
      }
      return res;
    };
    ColumnFactory2.prototype.findExistingGroup = function(newGroupDef, existingGroups) {
      var res = find(existingGroups, function(existingGroup) {
        var existingDef = existingGroup.getColGroupDef();
        if (!existingDef) {
          return false;
        }
        var newHasId = newGroupDef.groupId != null;
        if (newHasId) {
          return existingGroup.getId() === newGroupDef.groupId;
        }
        return false;
      });
      if (res) {
        removeFromArray(existingGroups, res);
      }
      return res;
    };
    ColumnFactory2.prototype.mergeColDefs = function(colDef) {
      var colDefMerged = {};
      var defaultColDef = this.gridOptionsWrapper.getDefaultColDef();
      mergeDeep(colDefMerged, defaultColDef, true, true);
      var columnType = colDef.type;
      if (!columnType) {
        columnType = defaultColDef && defaultColDef.type;
      }
      if (columnType) {
        this.assignColumnTypes(columnType, colDefMerged);
      }
      mergeDeep(colDefMerged, colDef, true, true);
      return colDefMerged;
    };
    ColumnFactory2.prototype.assignColumnTypes = function(type, colDefMerged) {
      var typeKeys = [];
      if (type instanceof Array) {
        var invalidArray = type.some(function(a) {
          return typeof a !== "string";
        });
        if (invalidArray) {
          console.warn("ag-grid: if colDef.type is supplied an array it should be of type 'string[]'");
        } else {
          typeKeys = type;
        }
      } else if (typeof type === "string") {
        typeKeys = type.split(",");
      } else {
        console.warn("ag-grid: colDef.type should be of type 'string' | 'string[]'");
        return;
      }
      var allColumnTypes = assign2({}, DefaultColumnTypes);
      var userTypes = this.gridOptionsWrapper.getColumnTypes() || {};
      iterateObject(userTypes, function(key, value) {
        if (key in allColumnTypes) {
          console.warn("AG Grid: the column type '" + key + "' is a default column type and cannot be overridden.");
        } else {
          allColumnTypes[key] = value;
        }
      });
      typeKeys.forEach(function(t) {
        var typeColDef = allColumnTypes[t.trim()];
        if (typeColDef) {
          mergeDeep(colDefMerged, typeColDef, true, true);
        } else {
          console.warn("ag-grid: colDef.type '" + t + "' does not correspond to defined gridOptions.columnTypes");
        }
      });
    };
    ColumnFactory2.prototype.checkForDeprecatedItems = function(colDef) {
      if (colDef) {
        var colDefNoType = colDef;
        if (colDefNoType.group !== void 0) {
          console.warn("ag-grid: colDef.group is invalid, please check documentation on how to do grouping as it changed in version 3");
        }
        if (colDefNoType.headerGroup !== void 0) {
          console.warn("ag-grid: colDef.headerGroup is invalid, please check documentation on how to do grouping as it changed in version 3");
        }
        if (colDefNoType.headerGroupShow !== void 0) {
          console.warn("ag-grid: colDef.headerGroupShow is invalid, should be columnGroupShow, please check documentation on how to do grouping as it changed in version 3");
        }
        if (colDefNoType.suppressRowGroup !== void 0) {
          console.warn("ag-grid: colDef.suppressRowGroup is deprecated, please use colDef.type instead");
        }
        if (colDefNoType.suppressAggregation !== void 0) {
          console.warn("ag-grid: colDef.suppressAggregation is deprecated, please use colDef.type instead");
        }
        if (colDefNoType.suppressRowGroup || colDefNoType.suppressAggregation) {
          console.warn("ag-grid: colDef.suppressAggregation and colDef.suppressRowGroup are deprecated, use allowRowGroup, allowPivot and allowValue instead");
        }
        if (colDefNoType.displayName) {
          console.warn("ag-grid: Found displayName " + colDefNoType.displayName + ", please use headerName instead, displayName is deprecated.");
          colDefNoType.headerName = colDefNoType.displayName;
        }
      }
    };
    ColumnFactory2.prototype.isColumnGroup = function(abstractColDef) {
      return abstractColDef.children !== void 0;
    };
    __decorate$4([
      Autowired("columnUtils")
    ], ColumnFactory2.prototype, "columnUtils", void 0);
    __decorate$4([
      __param$1(0, Qualifier("loggerFactory"))
    ], ColumnFactory2.prototype, "setBeans", null);
    ColumnFactory2 = __decorate$4([
      Bean("columnFactory")
    ], ColumnFactory2);
    return ColumnFactory2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var Events = function() {
    function Events2() {
    }
    Events2.EVENT_COLUMN_EVERYTHING_CHANGED = "columnEverythingChanged";
    Events2.EVENT_NEW_COLUMNS_LOADED = "newColumnsLoaded";
    Events2.EVENT_COLUMN_PIVOT_MODE_CHANGED = "columnPivotModeChanged";
    Events2.EVENT_COLUMN_ROW_GROUP_CHANGED = "columnRowGroupChanged";
    Events2.EVENT_EXPAND_COLLAPSE_ALL = "expandOrCollapseAll";
    Events2.EVENT_COLUMN_PIVOT_CHANGED = "columnPivotChanged";
    Events2.EVENT_GRID_COLUMNS_CHANGED = "gridColumnsChanged";
    Events2.EVENT_COLUMN_VALUE_CHANGED = "columnValueChanged";
    Events2.EVENT_COLUMN_MOVED = "columnMoved";
    Events2.EVENT_COLUMN_VISIBLE = "columnVisible";
    Events2.EVENT_COLUMN_PINNED = "columnPinned";
    Events2.EVENT_COLUMN_GROUP_OPENED = "columnGroupOpened";
    Events2.EVENT_COLUMN_RESIZED = "columnResized";
    Events2.EVENT_DISPLAYED_COLUMNS_CHANGED = "displayedColumnsChanged";
    Events2.EVENT_VIRTUAL_COLUMNS_CHANGED = "virtualColumnsChanged";
    Events2.EVENT_ASYNC_TRANSACTIONS_FLUSHED = "asyncTransactionsFlushed";
    Events2.EVENT_ROW_GROUP_OPENED = "rowGroupOpened";
    Events2.EVENT_ROW_DATA_CHANGED = "rowDataChanged";
    Events2.EVENT_ROW_DATA_UPDATED = "rowDataUpdated";
    Events2.EVENT_PINNED_ROW_DATA_CHANGED = "pinnedRowDataChanged";
    Events2.EVENT_RANGE_SELECTION_CHANGED = "rangeSelectionChanged";
    Events2.EVENT_CHART_CREATED = "chartCreated";
    Events2.EVENT_CHART_RANGE_SELECTION_CHANGED = "chartRangeSelectionChanged";
    Events2.EVENT_CHART_OPTIONS_CHANGED = "chartOptionsChanged";
    Events2.EVENT_CHART_DESTROYED = "chartDestroyed";
    Events2.EVENT_TOOL_PANEL_VISIBLE_CHANGED = "toolPanelVisibleChanged";
    Events2.EVENT_COLUMN_PANEL_ITEM_DRAG_START = "columnPanelItemDragStart";
    Events2.EVENT_COLUMN_PANEL_ITEM_DRAG_END = "columnPanelItemDragEnd";
    Events2.EVENT_MODEL_UPDATED = "modelUpdated";
    Events2.EVENT_PASTE_START = "pasteStart";
    Events2.EVENT_PASTE_END = "pasteEnd";
    Events2.EVENT_FILL_START = "fillStart";
    Events2.EVENT_FILL_END = "fillEnd";
    Events2.EVENT_CELL_CLICKED = "cellClicked";
    Events2.EVENT_CELL_DOUBLE_CLICKED = "cellDoubleClicked";
    Events2.EVENT_CELL_MOUSE_DOWN = "cellMouseDown";
    Events2.EVENT_CELL_CONTEXT_MENU = "cellContextMenu";
    Events2.EVENT_CELL_VALUE_CHANGED = "cellValueChanged";
    Events2.EVENT_ROW_VALUE_CHANGED = "rowValueChanged";
    Events2.EVENT_CELL_FOCUSED = "cellFocused";
    Events2.EVENT_ROW_SELECTED = "rowSelected";
    Events2.EVENT_SELECTION_CHANGED = "selectionChanged";
    Events2.EVENT_CELL_KEY_DOWN = "cellKeyDown";
    Events2.EVENT_CELL_KEY_PRESS = "cellKeyPress";
    Events2.EVENT_CELL_MOUSE_OVER = "cellMouseOver";
    Events2.EVENT_CELL_MOUSE_OUT = "cellMouseOut";
    Events2.EVENT_FILTER_CHANGED = "filterChanged";
    Events2.EVENT_FILTER_MODIFIED = "filterModified";
    Events2.EVENT_FILTER_OPENED = "filterOpened";
    Events2.EVENT_SORT_CHANGED = "sortChanged";
    Events2.EVENT_VIRTUAL_ROW_REMOVED = "virtualRowRemoved";
    Events2.EVENT_ROW_CLICKED = "rowClicked";
    Events2.EVENT_ROW_DOUBLE_CLICKED = "rowDoubleClicked";
    Events2.EVENT_GRID_READY = "gridReady";
    Events2.EVENT_GRID_SIZE_CHANGED = "gridSizeChanged";
    Events2.EVENT_VIEWPORT_CHANGED = "viewportChanged";
    Events2.EVENT_SCROLLBAR_WIDTH_CHANGED = "scrollbarWidthChanged";
    Events2.EVENT_FIRST_DATA_RENDERED = "firstDataRendered";
    Events2.EVENT_DRAG_STARTED = "dragStarted";
    Events2.EVENT_DRAG_STOPPED = "dragStopped";
    Events2.EVENT_CHECKBOX_CHANGED = "checkboxChanged";
    Events2.EVENT_ROW_EDITING_STARTED = "rowEditingStarted";
    Events2.EVENT_ROW_EDITING_STOPPED = "rowEditingStopped";
    Events2.EVENT_CELL_EDITING_STARTED = "cellEditingStarted";
    Events2.EVENT_CELL_EDITING_STOPPED = "cellEditingStopped";
    Events2.EVENT_BODY_SCROLL = "bodyScroll";
    Events2.EVENT_BODY_SCROLL_END = "bodyScrollEnd";
    Events2.EVENT_HEIGHT_SCALE_CHANGED = "heightScaleChanged";
    Events2.EVENT_PAGINATION_CHANGED = "paginationChanged";
    Events2.EVENT_COMPONENT_STATE_CHANGED = "componentStateChanged";
    Events2.EVENT_BODY_HEIGHT_CHANGED = "bodyHeightChanged";
    Events2.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED = "displayedColumnsWidthChanged";
    Events2.EVENT_SCROLL_VISIBILITY_CHANGED = "scrollVisibilityChanged";
    Events2.EVENT_COLUMN_HOVER_CHANGED = "columnHoverChanged";
    Events2.EVENT_FLASH_CELLS = "flashCells";
    Events2.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED = "paginationPixelOffsetChanged";
    Events2.EVENT_DISPLAYED_ROWS_CHANGED = "displayedRowsChanged";
    Events2.EVENT_LEFT_PINNED_WIDTH_CHANGED = "leftPinnedWidthChanged";
    Events2.EVENT_RIGHT_PINNED_WIDTH_CHANGED = "rightPinnedWidthChanged";
    Events2.EVENT_ROW_CONTAINER_HEIGHT_CHANGED = "rowContainerHeightChanged";
    Events2.EVENT_ROW_DRAG_ENTER = "rowDragEnter";
    Events2.EVENT_ROW_DRAG_MOVE = "rowDragMove";
    Events2.EVENT_ROW_DRAG_LEAVE = "rowDragLeave";
    Events2.EVENT_ROW_DRAG_END = "rowDragEnd";
    Events2.EVENT_POPUP_TO_FRONT = "popupToFront";
    Events2.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST = "columnRowGroupChangeRequest";
    Events2.EVENT_COLUMN_PIVOT_CHANGE_REQUEST = "columnPivotChangeRequest";
    Events2.EVENT_COLUMN_VALUE_CHANGE_REQUEST = "columnValueChangeRequest";
    Events2.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST = "columnAggFuncChangeRequest";
    Events2.EVENT_KEYBOARD_FOCUS = "keyboardFocus";
    Events2.EVENT_MOUSE_FOCUS = "mouseFocus";
    Events2.EVENT_STORE_UPDATED = "storeUpdated";
    return Events2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var GroupInstanceIdCreator = function() {
    function GroupInstanceIdCreator2() {
      this.existingIds = {};
    }
    GroupInstanceIdCreator2.prototype.getInstanceIdForKey = function(key) {
      var lastResult = this.existingIds[key];
      var result;
      if (typeof lastResult !== "number") {
        result = 0;
      } else {
        result = lastResult + 1;
      }
      this.existingIds[key] = result;
      return result;
    };
    return GroupInstanceIdCreator2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var reUnescapedHtml = /[&<>"']/g;
  var HTML_ESCAPES = {
    "&": "&amp;",
    "<": "&lt;",
    ">": "&gt;",
    '"': "&quot;",
    "'": "&#39;"
  };
  function utf8_encode(s) {
    var stringFromCharCode = String.fromCharCode;
    function ucs2decode(string) {
      var output = [];
      if (!string) {
        return [];
      }
      var len2 = string.length;
      var counter = 0;
      var value;
      var extra;
      while (counter < len2) {
        value = string.charCodeAt(counter++);
        if (value >= 55296 && value <= 56319 && counter < len2) {
          extra = string.charCodeAt(counter++);
          if ((extra & 64512) == 56320) {
            output.push(((value & 1023) << 10) + (extra & 1023) + 65536);
          } else {
            output.push(value);
            counter--;
          }
        } else {
          output.push(value);
        }
      }
      return output;
    }
    function checkScalarValue(point) {
      if (point >= 55296 && point <= 57343) {
        throw Error("Lone surrogate U+" + point.toString(16).toUpperCase() + " is not a scalar value");
      }
    }
    function createByte(point, shift) {
      return stringFromCharCode(point >> shift & 63 | 128);
    }
    function encodeCodePoint(point) {
      if (point >= 0 && point <= 31 && point !== 10) {
        var convertedCode = point.toString(16).toUpperCase();
        var paddedCode = padStart(convertedCode, 4, "0");
        return "_x" + paddedCode + "_";
      }
      if ((point & 4294967168) == 0) {
        return stringFromCharCode(point);
      }
      var symbol = "";
      if ((point & 4294965248) == 0) {
        symbol = stringFromCharCode(point >> 6 & 31 | 192);
      } else if ((point & 4294901760) == 0) {
        checkScalarValue(point);
        symbol = stringFromCharCode(point >> 12 & 15 | 224);
        symbol += createByte(point, 6);
      } else if ((point & 4292870144) == 0) {
        symbol = stringFromCharCode(point >> 18 & 7 | 240);
        symbol += createByte(point, 12);
        symbol += createByte(point, 6);
      }
      symbol += stringFromCharCode(point & 63 | 128);
      return symbol;
    }
    var codePoints = ucs2decode(s);
    var length = codePoints.length;
    var index = -1;
    var codePoint;
    var byteString = "";
    while (++index < length) {
      codePoint = codePoints[index];
      byteString += encodeCodePoint(codePoint);
    }
    return byteString;
  }
  function stringRepeat(str, len2) {
    len2 = Math.floor(len2);
    if (str.length === 0 || len2 === 0) {
      return "";
    }
    var maxCount = str.length * len2;
    len2 = Math.floor(Math.log(len2) / Math.log(2));
    while (len2) {
      str += str;
      len2--;
    }
    str += str.substring(0, maxCount - str.length);
    return str;
  }
  function padStart(str, totalLength, padStr) {
    if (str.length > totalLength) {
      return str;
    }
    totalLength -= str.length;
    if (totalLength > padStr.length) {
      padStr += stringRepeat(padStr, totalLength / padStr.length);
    }
    return padStr.slice(0, totalLength) + str;
  }
  function camelCaseToHyphen(str) {
    if (str === null || str === void 0) {
      return null;
    }
    return str.replace(/([A-Z])/g, function(g) {
      return "-" + g[0].toLowerCase();
    });
  }
  function hyphenToCamelCase(str) {
    if (str === null || str === void 0) {
      return null;
    }
    return str.replace(/-([a-z])/g, function(g) {
      return g[1].toUpperCase();
    });
  }
  function capitalise(str) {
    return str[0].toUpperCase() + str.substr(1).toLowerCase();
  }
  function escapeString(toEscape) {
    return toEscape == null ? null : toEscape.toString().toString().replace(reUnescapedHtml, function(chr) {
      return HTML_ESCAPES[chr];
    });
  }
  function camelCaseToHumanText(camelCase) {
    if (!camelCase || camelCase == null) {
      return null;
    }
    var rex = /([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;
    var words = camelCase.replace(rex, "$1$4 $2$3$5").replace(".", " ").split(" ");
    return words.map(function(word) {
      return word.substring(0, 1).toUpperCase() + (word.length > 1 ? word.substring(1, word.length) : "");
    }).join(" ");
  }
  function startsWith2(str, matchStart) {
    if (str === matchStart) {
      return true;
    }
    return str != null && str.slice(0, matchStart.length) === matchStart;
  }
  var StringUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    utf8_encode,
    stringRepeat,
    padStart,
    camelCaseToHyphen,
    hyphenToCamelCase,
    capitalise,
    escapeString,
    camelCaseToHumanText,
    startsWith: startsWith2
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function convertToMap(arr) {
    var map2 = new Map();
    arr.forEach(function(pair) {
      return map2.set(pair[0], pair[1]);
    });
    return map2;
  }
  function mapById(arr, callback) {
    var map2 = new Map();
    arr.forEach(function(item) {
      return map2.set(callback(item), item);
    });
    return map2;
  }
  function keys2(map2) {
    var arr = [];
    map2.forEach(function(_2, key) {
      return arr.push(key);
    });
    return arr;
  }
  var MapUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    convertToMap,
    mapById,
    keys: keys2
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$5 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param$2 = function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  var __spreadArrays = function() {
    for (var s = 0, i2 = 0, il = arguments.length; i2 < il; i2++)
      s += arguments[i2].length;
    for (var r = Array(s), k = 0, i2 = 0; i2 < il; i2++)
      for (var a = arguments[i2], j = 0, jl = a.length; j < jl; j++, k++)
        r[k] = a[j];
    return r;
  };
  var ColumnModel = function(_super) {
    __extends$1(ColumnModel2, _super);
    function ColumnModel2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.primaryHeaderRowCount = 0;
      _this.secondaryHeaderRowCount = 0;
      _this.secondaryColumnsPresent = false;
      _this.gridHeaderRowCount = 0;
      _this.displayedColumnsLeft = [];
      _this.displayedColumnsRight = [];
      _this.displayedColumnsCenter = [];
      _this.displayedColumns = [];
      _this.displayedColumnsAndGroupsMap = {};
      _this.viewportColumns = [];
      _this.viewportColumnsCenter = [];
      _this.autoHeightActiveAtLeastOnce = false;
      _this.rowGroupColumns = [];
      _this.valueColumns = [];
      _this.pivotColumns = [];
      _this.ready = false;
      _this.autoGroupsNeedBuilding = false;
      _this.forceRecreateAutoGroups = false;
      _this.pivotMode = false;
      _this.bodyWidth = 0;
      _this.leftWidth = 0;
      _this.rightWidth = 0;
      _this.bodyWidthDirty = true;
      _this.colDefVersion = 0;
      _this.flexColsCalculatedAtLestOnce = false;
      return _this;
    }
    ColumnModel2.prototype.init = function() {
      this.suppressColumnVirtualisation = this.gridOptionsWrapper.isSuppressColumnVirtualisation();
      var pivotMode = this.gridOptionsWrapper.isPivotMode();
      if (this.isPivotSettingAllowed(pivotMode)) {
        this.pivotMode = pivotMode;
      }
      this.usingTreeData = this.gridOptionsWrapper.isTreeData();
      this.addManagedListener(this.gridOptionsWrapper, "autoGroupColumnDef", this.onAutoGroupColumnDefChanged.bind(this));
    };
    ColumnModel2.prototype.onAutoGroupColumnDefChanged = function() {
      this.autoGroupsNeedBuilding = true;
      this.forceRecreateAutoGroups = true;
      this.updateGridColumns();
      this.updateDisplayedColumns("gridOptionsChanged");
    };
    ColumnModel2.prototype.getColDefVersion = function() {
      return this.colDefVersion;
    };
    ColumnModel2.prototype.setColumnDefs = function(columnDefs, source) {
      var _this = this;
      if (source === void 0) {
        source = "api";
      }
      var colsPreviouslyExisted = !!this.columnDefs;
      this.colDefVersion++;
      var raiseEventsFunc = this.compareColumnStatesAndRaiseEvents(source);
      this.columnDefs = columnDefs;
      this.valueCache.expire();
      this.autoGroupsNeedBuilding = true;
      var oldPrimaryColumns = this.primaryColumns;
      var oldPrimaryTree = this.primaryColumnTree;
      var balancedTreeResult = this.columnFactory.createColumnTree(columnDefs, true, oldPrimaryTree);
      this.primaryColumnTree = balancedTreeResult.columnTree;
      this.primaryHeaderRowCount = balancedTreeResult.treeDept + 1;
      this.primaryColumns = this.getColumnsFromTree(this.primaryColumnTree);
      this.primaryColumnsMap = {};
      this.primaryColumns.forEach(function(col) {
        return _this.primaryColumnsMap[col.getId()] = col;
      });
      this.extractRowGroupColumns(source, oldPrimaryColumns);
      this.extractPivotColumns(source, oldPrimaryColumns);
      this.extractValueColumns(source, oldPrimaryColumns);
      this.ready = true;
      this.updateGridColumns();
      if (colsPreviouslyExisted && this.gridColsArePrimary && !this.gridOptionsWrapper.isMaintainColumnOrder()) {
        this.orderGridColumnsLikePrimary();
      }
      this.updateDisplayedColumns(source);
      this.checkViewportColumns();
      this.dispatchEverythingChanged(source);
      raiseEventsFunc();
      this.dispatchNewColumnsLoaded();
    };
    ColumnModel2.prototype.dispatchNewColumnsLoaded = function() {
      var newColumnsLoadedEvent = {
        type: Events.EVENT_NEW_COLUMNS_LOADED,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.eventService.dispatchEvent(newColumnsLoadedEvent);
    };
    ColumnModel2.prototype.dispatchEverythingChanged = function(source) {
      if (source === void 0) {
        source = "api";
      }
      var eventEverythingChanged = {
        type: Events.EVENT_COLUMN_EVERYTHING_CHANGED,
        api: this.gridApi,
        columnApi: this.columnApi,
        source
      };
      this.eventService.dispatchEvent(eventEverythingChanged);
    };
    ColumnModel2.prototype.orderGridColumnsLikePrimary = function() {
      var _this = this;
      this.gridColumns.sort(function(colA, colB) {
        var primaryIndexA = _this.primaryColumns.indexOf(colA);
        var primaryIndexB = _this.primaryColumns.indexOf(colB);
        var indexAPresent = primaryIndexA >= 0;
        var indexBPresent = primaryIndexB >= 0;
        if (indexAPresent && indexBPresent) {
          return primaryIndexA - primaryIndexB;
        }
        if (indexAPresent) {
          return 1;
        }
        if (indexBPresent) {
          return -1;
        }
        var gridIndexA = _this.gridColumns.indexOf(colA);
        var gridIndexB = _this.gridColumns.indexOf(colB);
        return gridIndexA - gridIndexB;
      });
    };
    ColumnModel2.prototype.getAllDisplayedAutoHeightCols = function() {
      return this.displayedAutoHeightCols;
    };
    ColumnModel2.prototype.setViewport = function() {
      if (this.gridOptionsWrapper.isEnableRtl()) {
        this.viewportLeft = this.bodyWidth - this.scrollPosition - this.scrollWidth;
        this.viewportRight = this.bodyWidth - this.scrollPosition;
      } else {
        this.viewportLeft = this.scrollPosition;
        this.viewportRight = this.scrollWidth + this.scrollPosition;
      }
    };
    ColumnModel2.prototype.getDisplayedColumnsStartingAt = function(column) {
      var currentColumn = column;
      var columns = [];
      while (currentColumn != null) {
        columns.push(currentColumn);
        currentColumn = this.getDisplayedColAfter(currentColumn);
      }
      return columns;
    };
    ColumnModel2.prototype.checkViewportColumns = function() {
      if (this.displayedColumnsCenter == null) {
        return;
      }
      var hashBefore = this.viewportColumns.map(function(column) {
        return column.getId();
      }).join("#");
      this.extractViewport();
      var hashAfter = this.viewportColumns.map(function(column) {
        return column.getId();
      }).join("#");
      if (hashBefore !== hashAfter) {
        var event_1 = {
          type: Events.EVENT_VIRTUAL_COLUMNS_CHANGED,
          api: this.gridApi,
          columnApi: this.columnApi
        };
        this.eventService.dispatchEvent(event_1);
      }
    };
    ColumnModel2.prototype.setViewportPosition = function(scrollWidth, scrollPosition) {
      if (scrollWidth !== this.scrollWidth || scrollPosition !== this.scrollPosition || this.bodyWidthDirty) {
        this.scrollWidth = scrollWidth;
        this.scrollPosition = scrollPosition;
        this.bodyWidthDirty = true;
        this.setViewport();
        if (this.ready) {
          this.checkViewportColumns();
        }
      }
    };
    ColumnModel2.prototype.isPivotMode = function() {
      return this.pivotMode;
    };
    ColumnModel2.prototype.isPivotSettingAllowed = function(pivot) {
      if (pivot && this.gridOptionsWrapper.isTreeData()) {
        console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'");
        return false;
      }
      return true;
    };
    ColumnModel2.prototype.setPivotMode = function(pivotMode, source) {
      if (source === void 0) {
        source = "api";
      }
      if (pivotMode === this.pivotMode || !this.isPivotSettingAllowed(this.pivotMode)) {
        return;
      }
      this.pivotMode = pivotMode;
      this.autoGroupsNeedBuilding = true;
      this.updateGridColumns();
      this.updateDisplayedColumns(source);
      var event = {
        type: Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.eventService.dispatchEvent(event);
    };
    ColumnModel2.prototype.getSecondaryPivotColumn = function(pivotKeys, valueColKey) {
      if (!this.secondaryColumnsPresent || !this.secondaryColumns) {
        return null;
      }
      var valueColumnToFind = this.getPrimaryColumn(valueColKey);
      var foundColumn = null;
      this.secondaryColumns.forEach(function(column) {
        var thisPivotKeys = column.getColDef().pivotKeys;
        var pivotValueColumn = column.getColDef().pivotValueColumn;
        var pivotKeyMatches = areEqual(thisPivotKeys, pivotKeys);
        var pivotValueMatches = pivotValueColumn === valueColumnToFind;
        if (pivotKeyMatches && pivotValueMatches) {
          foundColumn = column;
        }
      });
      return foundColumn;
    };
    ColumnModel2.prototype.setBeans = function(loggerFactory) {
      this.logger = loggerFactory.create("columnModel");
    };
    ColumnModel2.prototype.setFirstRightAndLastLeftPinned = function(source) {
      var lastLeft;
      var firstRight;
      if (this.gridOptionsWrapper.isEnableRtl()) {
        lastLeft = this.displayedColumnsLeft ? this.displayedColumnsLeft[0] : null;
        firstRight = this.displayedColumnsRight ? last(this.displayedColumnsRight) : null;
      } else {
        lastLeft = this.displayedColumnsLeft ? last(this.displayedColumnsLeft) : null;
        firstRight = this.displayedColumnsRight ? this.displayedColumnsRight[0] : null;
      }
      this.gridColumns.forEach(function(column) {
        column.setLastLeftPinned(column === lastLeft, source);
        column.setFirstRightPinned(column === firstRight, source);
      });
    };
    ColumnModel2.prototype.autoSizeColumns = function(keys3, skipHeader, source) {
      var _this = this;
      if (source === void 0) {
        source = "api";
      }
      this.animationFrameService.flushAllFrames();
      var columnsAutosized = [];
      var changesThisTimeAround = -1;
      if (skipHeader == null) {
        skipHeader = this.gridOptionsWrapper.isSkipHeaderOnAutoSize();
      }
      while (changesThisTimeAround !== 0) {
        changesThisTimeAround = 0;
        this.actionOnGridColumns(keys3, function(column) {
          if (columnsAutosized.indexOf(column) >= 0) {
            return false;
          }
          var preferredWidth = _this.autoWidthCalculator.getPreferredWidthForColumn(column, skipHeader);
          if (preferredWidth > 0) {
            var newWidth = _this.normaliseColumnWidth(column, preferredWidth);
            column.setActualWidth(newWidth, source);
            columnsAutosized.push(column);
            changesThisTimeAround++;
          }
          return true;
        }, source);
      }
      this.fireColumnResizedEvent(columnsAutosized, true, "autosizeColumns");
    };
    ColumnModel2.prototype.fireColumnResizedEvent = function(columns, finished2, source, flexColumns) {
      if (flexColumns === void 0) {
        flexColumns = null;
      }
      if (columns && columns.length) {
        var event_2 = {
          type: Events.EVENT_COLUMN_RESIZED,
          columns,
          column: columns.length === 1 ? columns[0] : null,
          flexColumns,
          finished: finished2,
          api: this.gridApi,
          columnApi: this.columnApi,
          source
        };
        this.eventService.dispatchEvent(event_2);
      }
    };
    ColumnModel2.prototype.autoSizeColumn = function(key, skipHeader, source) {
      if (source === void 0) {
        source = "api";
      }
      if (key) {
        this.autoSizeColumns([key], skipHeader, source);
      }
    };
    ColumnModel2.prototype.autoSizeAllColumns = function(skipHeader, source) {
      if (source === void 0) {
        source = "api";
      }
      var allDisplayedColumns = this.getAllDisplayedColumns();
      this.autoSizeColumns(allDisplayedColumns, skipHeader, source);
    };
    ColumnModel2.prototype.getColumnsFromTree = function(rootColumns) {
      var result = [];
      var recursiveFindColumns = function(childColumns) {
        for (var i2 = 0; i2 < childColumns.length; i2++) {
          var child = childColumns[i2];
          if (child instanceof Column) {
            result.push(child);
          } else if (child instanceof ProvidedColumnGroup) {
            recursiveFindColumns(child.getChildren());
          }
        }
      };
      recursiveFindColumns(rootColumns);
      return result;
    };
    ColumnModel2.prototype.getAllDisplayedTrees = function() {
      if (this.displayedTreeLeft && this.displayedTreeRight && this.displayedTreeCentre) {
        return this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight);
      }
      return null;
    };
    ColumnModel2.prototype.getPrimaryColumnTree = function() {
      return this.primaryColumnTree;
    };
    ColumnModel2.prototype.getHeaderRowCount = function() {
      return this.gridHeaderRowCount;
    };
    ColumnModel2.prototype.getDisplayedTreeLeft = function() {
      return this.displayedTreeLeft;
    };
    ColumnModel2.prototype.getDisplayedTreeRight = function() {
      return this.displayedTreeRight;
    };
    ColumnModel2.prototype.getDisplayedTreeCentre = function() {
      return this.displayedTreeCentre;
    };
    ColumnModel2.prototype.isColumnDisplayed = function(column) {
      return this.getAllDisplayedColumns().indexOf(column) >= 0;
    };
    ColumnModel2.prototype.getAllDisplayedColumns = function() {
      return this.displayedColumns;
    };
    ColumnModel2.prototype.getViewportColumns = function() {
      return this.viewportColumns;
    };
    ColumnModel2.prototype.getDisplayedLeftColumnsForRow = function(rowNode) {
      if (!this.colSpanActive) {
        return this.displayedColumnsLeft;
      }
      return this.getDisplayedColumnsForRow(rowNode, this.displayedColumnsLeft);
    };
    ColumnModel2.prototype.getDisplayedRightColumnsForRow = function(rowNode) {
      if (!this.colSpanActive) {
        return this.displayedColumnsRight;
      }
      return this.getDisplayedColumnsForRow(rowNode, this.displayedColumnsRight);
    };
    ColumnModel2.prototype.getDisplayedColumnsForRow = function(rowNode, displayedColumns, filterCallback, emptySpaceBeforeColumn) {
      var result = [];
      var lastConsideredCol = null;
      var _loop_1 = function(i3) {
        var col = displayedColumns[i3];
        var maxAllowedColSpan = displayedColumns.length - i3;
        var colSpan = Math.min(col.getColSpan(rowNode), maxAllowedColSpan);
        var columnsToCheckFilter = [col];
        if (colSpan > 1) {
          var colsToRemove = colSpan - 1;
          for (var j = 1; j <= colsToRemove; j++) {
            columnsToCheckFilter.push(displayedColumns[i3 + j]);
          }
          i3 += colsToRemove;
        }
        var filterPasses;
        if (filterCallback) {
          filterPasses = false;
          columnsToCheckFilter.forEach(function(colForFilter) {
            if (filterCallback(colForFilter)) {
              filterPasses = true;
            }
          });
        } else {
          filterPasses = true;
        }
        if (filterPasses) {
          if (result.length === 0 && lastConsideredCol) {
            var gapBeforeColumn = emptySpaceBeforeColumn ? emptySpaceBeforeColumn(col) : false;
            if (gapBeforeColumn) {
              result.push(lastConsideredCol);
            }
          }
          result.push(col);
        }
        lastConsideredCol = col;
        out_i_1 = i3;
      };
      var out_i_1;
      for (var i2 = 0; i2 < displayedColumns.length; i2++) {
        _loop_1(i2);
        i2 = out_i_1;
      }
      return result;
    };
    ColumnModel2.prototype.getViewportCenterColumnsForRow = function(rowNode) {
      var _this = this;
      if (!this.colSpanActive) {
        return this.viewportColumnsCenter;
      }
      var emptySpaceBeforeColumn = function(col) {
        var left = col.getLeft();
        return exists(left) && left > _this.viewportLeft;
      };
      var filterCallback = this.suppressColumnVirtualisation ? null : this.isColumnInViewport.bind(this);
      return this.getDisplayedColumnsForRow(rowNode, this.displayedColumnsCenter, filterCallback, emptySpaceBeforeColumn);
    };
    ColumnModel2.prototype.getAriaColumnIndex = function(col) {
      return this.getAllGridColumns().indexOf(col) + 1;
    };
    ColumnModel2.prototype.isColumnInViewport = function(col) {
      if (col.getColDef().autoHeight) {
        return true;
      }
      var columnLeft = col.getLeft() || 0;
      var columnRight = columnLeft + col.getActualWidth();
      var leftBounds = this.viewportLeft - 200;
      var rightBounds = this.viewportRight + 200;
      var columnToMuchLeft = columnLeft < leftBounds && columnRight < leftBounds;
      var columnToMuchRight = columnLeft > rightBounds && columnRight > rightBounds;
      return !columnToMuchLeft && !columnToMuchRight;
    };
    ColumnModel2.prototype.getDisplayedColumnsLeftWidth = function() {
      return this.getWidthOfColsInList(this.displayedColumnsLeft);
    };
    ColumnModel2.prototype.getDisplayedColumnsRightWidth = function() {
      return this.getWidthOfColsInList(this.displayedColumnsRight);
    };
    ColumnModel2.prototype.updatePrimaryColumnList = function(keys3, masterList, actionIsAdd, columnCallback, eventType, source) {
      var _this = this;
      if (source === void 0) {
        source = "api";
      }
      if (!keys3 || missingOrEmpty(keys3)) {
        return;
      }
      var atLeastOne = false;
      keys3.forEach(function(key) {
        var columnToAdd = _this.getPrimaryColumn(key);
        if (!columnToAdd) {
          return;
        }
        if (actionIsAdd) {
          if (masterList.indexOf(columnToAdd) >= 0) {
            return;
          }
          masterList.push(columnToAdd);
        } else {
          if (masterList.indexOf(columnToAdd) < 0) {
            return;
          }
          removeFromArray(masterList, columnToAdd);
        }
        columnCallback(columnToAdd);
        atLeastOne = true;
      });
      if (!atLeastOne) {
        return;
      }
      if (this.autoGroupsNeedBuilding) {
        this.updateGridColumns();
      }
      this.updateDisplayedColumns(source);
      var event = {
        type: eventType,
        columns: masterList,
        column: masterList.length === 1 ? masterList[0] : null,
        api: this.gridApi,
        columnApi: this.columnApi,
        source
      };
      this.eventService.dispatchEvent(event);
    };
    ColumnModel2.prototype.setRowGroupColumns = function(colKeys, source) {
      if (source === void 0) {
        source = "api";
      }
      this.autoGroupsNeedBuilding = true;
      this.setPrimaryColumnList(colKeys, this.rowGroupColumns, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.setRowGroupActive.bind(this), source);
    };
    ColumnModel2.prototype.setRowGroupActive = function(active2, column, source) {
      if (active2 === column.isRowGroupActive()) {
        return;
      }
      column.setRowGroupActive(active2, source);
      if (!active2 && !this.gridOptionsWrapper.isSuppressMakeColumnVisibleAfterUnGroup()) {
        column.setVisible(true, source);
      }
    };
    ColumnModel2.prototype.addRowGroupColumn = function(key, source) {
      if (source === void 0) {
        source = "api";
      }
      if (key) {
        this.addRowGroupColumns([key], source);
      }
    };
    ColumnModel2.prototype.addRowGroupColumns = function(keys3, source) {
      if (source === void 0) {
        source = "api";
      }
      this.autoGroupsNeedBuilding = true;
      this.updatePrimaryColumnList(keys3, this.rowGroupColumns, true, this.setRowGroupActive.bind(this, true), Events.EVENT_COLUMN_ROW_GROUP_CHANGED, source);
    };
    ColumnModel2.prototype.removeRowGroupColumns = function(keys3, source) {
      if (source === void 0) {
        source = "api";
      }
      this.autoGroupsNeedBuilding = true;
      this.updatePrimaryColumnList(keys3, this.rowGroupColumns, false, this.setRowGroupActive.bind(this, false), Events.EVENT_COLUMN_ROW_GROUP_CHANGED, source);
    };
    ColumnModel2.prototype.removeRowGroupColumn = function(key, source) {
      if (source === void 0) {
        source = "api";
      }
      if (key) {
        this.removeRowGroupColumns([key], source);
      }
    };
    ColumnModel2.prototype.addPivotColumns = function(keys3, source) {
      if (source === void 0) {
        source = "api";
      }
      this.updatePrimaryColumnList(keys3, this.pivotColumns, true, function(column) {
        return column.setPivotActive(true, source);
      }, Events.EVENT_COLUMN_PIVOT_CHANGED, source);
    };
    ColumnModel2.prototype.setPivotColumns = function(colKeys, source) {
      if (source === void 0) {
        source = "api";
      }
      this.setPrimaryColumnList(colKeys, this.pivotColumns, Events.EVENT_COLUMN_PIVOT_CHANGED, function(added, column) {
        column.setPivotActive(added, source);
      }, source);
    };
    ColumnModel2.prototype.addPivotColumn = function(key, source) {
      if (source === void 0) {
        source = "api";
      }
      this.addPivotColumns([key], source);
    };
    ColumnModel2.prototype.removePivotColumns = function(keys3, source) {
      if (source === void 0) {
        source = "api";
      }
      this.updatePrimaryColumnList(keys3, this.pivotColumns, false, function(column) {
        return column.setPivotActive(false, source);
      }, Events.EVENT_COLUMN_PIVOT_CHANGED, source);
    };
    ColumnModel2.prototype.removePivotColumn = function(key, source) {
      if (source === void 0) {
        source = "api";
      }
      this.removePivotColumns([key], source);
    };
    ColumnModel2.prototype.setPrimaryColumnList = function(colKeys, masterList, eventName, columnCallback, source) {
      var _this = this;
      masterList.length = 0;
      if (exists(colKeys)) {
        colKeys.forEach(function(key) {
          var column = _this.getPrimaryColumn(key);
          if (column) {
            masterList.push(column);
          }
        });
      }
      this.primaryColumns.forEach(function(column) {
        var added = masterList.indexOf(column) >= 0;
        columnCallback(added, column);
      });
      if (this.autoGroupsNeedBuilding) {
        this.updateGridColumns();
      }
      this.updateDisplayedColumns(source);
      this.fireColumnEvent(eventName, masterList, source);
    };
    ColumnModel2.prototype.setValueColumns = function(colKeys, source) {
      if (source === void 0) {
        source = "api";
      }
      this.setPrimaryColumnList(colKeys, this.valueColumns, Events.EVENT_COLUMN_VALUE_CHANGED, this.setValueActive.bind(this), source);
    };
    ColumnModel2.prototype.setValueActive = function(active2, column, source) {
      if (active2 === column.isValueActive()) {
        return;
      }
      column.setValueActive(active2, source);
      if (active2 && !column.getAggFunc()) {
        var initialAggFunc = this.aggFuncService.getDefaultAggFunc(column);
        column.setAggFunc(initialAggFunc);
      }
    };
    ColumnModel2.prototype.addValueColumns = function(keys3, source) {
      if (source === void 0) {
        source = "api";
      }
      this.updatePrimaryColumnList(keys3, this.valueColumns, true, this.setValueActive.bind(this, true), Events.EVENT_COLUMN_VALUE_CHANGED, source);
    };
    ColumnModel2.prototype.addValueColumn = function(colKey, source) {
      if (source === void 0) {
        source = "api";
      }
      if (colKey) {
        this.addValueColumns([colKey], source);
      }
    };
    ColumnModel2.prototype.removeValueColumn = function(colKey, source) {
      if (source === void 0) {
        source = "api";
      }
      this.removeValueColumns([colKey], source);
    };
    ColumnModel2.prototype.removeValueColumns = function(keys3, source) {
      if (source === void 0) {
        source = "api";
      }
      this.updatePrimaryColumnList(keys3, this.valueColumns, false, this.setValueActive.bind(this, false), Events.EVENT_COLUMN_VALUE_CHANGED, source);
    };
    ColumnModel2.prototype.normaliseColumnWidth = function(column, newWidth) {
      var minWidth = column.getMinWidth();
      if (exists(minWidth) && newWidth < minWidth) {
        newWidth = minWidth;
      }
      var maxWidth = column.getMaxWidth();
      if (exists(maxWidth) && column.isGreaterThanMax(newWidth)) {
        newWidth = maxWidth;
      }
      return newWidth;
    };
    ColumnModel2.prototype.getPrimaryOrGridColumn = function(key) {
      var column = this.getPrimaryColumn(key);
      return column || this.getGridColumn(key);
    };
    ColumnModel2.prototype.setColumnWidths = function(columnWidths, shiftKey, finished2, source) {
      var _this = this;
      if (source === void 0) {
        source = "api";
      }
      var sets = [];
      columnWidths.forEach(function(columnWidth) {
        var col = _this.getPrimaryOrGridColumn(columnWidth.key);
        if (!col) {
          return;
        }
        sets.push({
          width: columnWidth.newWidth,
          ratios: [1],
          columns: [col]
        });
        var defaultIsShift = _this.gridOptionsWrapper.getColResizeDefault() === "shift";
        if (defaultIsShift) {
          shiftKey = !shiftKey;
        }
        if (shiftKey) {
          var otherCol = _this.getDisplayedColAfter(col);
          if (!otherCol) {
            return;
          }
          var widthDiff = col.getActualWidth() - columnWidth.newWidth;
          var otherColWidth = otherCol.getActualWidth() + widthDiff;
          sets.push({
            width: otherColWidth,
            ratios: [1],
            columns: [otherCol]
          });
        }
      });
      if (sets.length === 0) {
        return;
      }
      this.resizeColumnSets(sets, finished2, source);
    };
    ColumnModel2.prototype.checkMinAndMaxWidthsForSet = function(columnResizeSet) {
      var columns = columnResizeSet.columns, width = columnResizeSet.width;
      var minWidthAccumulated = 0;
      var maxWidthAccumulated = 0;
      var maxWidthActive = true;
      columns.forEach(function(col) {
        var minWidth = col.getMinWidth();
        minWidthAccumulated += minWidth || 0;
        var maxWidth = col.getMaxWidth();
        if (exists(maxWidth) && maxWidth > 0) {
          maxWidthAccumulated += maxWidth;
        } else {
          maxWidthActive = false;
        }
      });
      var minWidthPasses = width >= minWidthAccumulated;
      var maxWidthPasses = !maxWidthActive || width <= maxWidthAccumulated;
      return minWidthPasses && maxWidthPasses;
    };
    ColumnModel2.prototype.resizeColumnSets = function(resizeSets, finished2, source) {
      var _this = this;
      var passMinMaxCheck = !resizeSets || resizeSets.every(function(columnResizeSet) {
        return _this.checkMinAndMaxWidthsForSet(columnResizeSet);
      });
      if (!passMinMaxCheck) {
        if (finished2) {
          var columns = resizeSets && resizeSets.length > 0 ? resizeSets[0].columns : null;
          this.fireColumnResizedEvent(columns, finished2, source);
        }
        return;
      }
      var changedCols = [];
      var allResizedCols = [];
      resizeSets.forEach(function(set6) {
        var width = set6.width, columns2 = set6.columns, ratios = set6.ratios;
        var newWidths = {};
        var finishedCols = {};
        columns2.forEach(function(col) {
          return allResizedCols.push(col);
        });
        var finishedColsGrew = true;
        var loopCount = 0;
        var _loop_2 = function() {
          loopCount++;
          if (loopCount > 1e3) {
            console.error("AG Grid: infinite loop in resizeColumnSets");
            return "break";
          }
          finishedColsGrew = false;
          var subsetCols = [];
          var subsetRatioTotal = 0;
          var pixelsToDistribute = width;
          columns2.forEach(function(col, index) {
            var thisColFinished = finishedCols[col.getId()];
            if (thisColFinished) {
              pixelsToDistribute -= newWidths[col.getId()];
            } else {
              subsetCols.push(col);
              var ratioThisCol = ratios[index];
              subsetRatioTotal += ratioThisCol;
            }
          });
          var ratioScale = 1 / subsetRatioTotal;
          subsetCols.forEach(function(col, index) {
            var lastCol = index === subsetCols.length - 1;
            var colNewWidth;
            if (lastCol) {
              colNewWidth = pixelsToDistribute;
            } else {
              colNewWidth = Math.round(ratios[index] * width * ratioScale);
              pixelsToDistribute -= colNewWidth;
            }
            var minWidth = col.getMinWidth();
            var maxWidth = col.getMaxWidth();
            if (exists(minWidth) && colNewWidth < minWidth) {
              colNewWidth = minWidth;
              finishedCols[col.getId()] = true;
              finishedColsGrew = true;
            } else if (exists(maxWidth) && maxWidth > 0 && colNewWidth > maxWidth) {
              colNewWidth = maxWidth;
              finishedCols[col.getId()] = true;
              finishedColsGrew = true;
            }
            newWidths[col.getId()] = colNewWidth;
          });
        };
        while (finishedColsGrew) {
          var state_1 = _loop_2();
          if (state_1 === "break")
            break;
        }
        columns2.forEach(function(col) {
          var newWidth = newWidths[col.getId()];
          if (col.getActualWidth() !== newWidth) {
            col.setActualWidth(newWidth, source);
            changedCols.push(col);
          }
        });
      });
      var atLeastOneColChanged = changedCols.length > 0;
      var flexedCols = this.refreshFlexedColumns({ resizingCols: allResizedCols, skipSetLeft: true });
      if (atLeastOneColChanged) {
        this.setLeftValues(source);
        this.updateBodyWidths();
        this.checkViewportColumns();
      }
      var colsForEvent = allResizedCols.concat(flexedCols);
      if (atLeastOneColChanged || finished2) {
        this.fireColumnResizedEvent(colsForEvent, finished2, source, flexedCols);
      }
    };
    ColumnModel2.prototype.setColumnAggFunc = function(key, aggFunc, source) {
      if (source === void 0) {
        source = "api";
      }
      if (!key) {
        return;
      }
      var column = this.getPrimaryColumn(key);
      if (!column) {
        return;
      }
      column.setAggFunc(aggFunc);
      this.fireColumnEvent(Events.EVENT_COLUMN_VALUE_CHANGED, [column], source);
    };
    ColumnModel2.prototype.fireColumnEvent = function(type, columns, source) {
      var event = {
        type,
        columns,
        column: columns && columns.length == 1 ? columns[0] : null,
        api: this.gridApi,
        columnApi: this.columnApi,
        source
      };
      this.eventService.dispatchEvent(event);
    };
    ColumnModel2.prototype.moveRowGroupColumn = function(fromIndex, toIndex, source) {
      if (source === void 0) {
        source = "api";
      }
      var column = this.rowGroupColumns[fromIndex];
      this.rowGroupColumns.splice(fromIndex, 1);
      this.rowGroupColumns.splice(toIndex, 0, column);
      var event = {
        type: Events.EVENT_COLUMN_ROW_GROUP_CHANGED,
        columns: this.rowGroupColumns,
        column: this.rowGroupColumns.length === 1 ? this.rowGroupColumns[0] : null,
        api: this.gridApi,
        columnApi: this.columnApi,
        source
      };
      this.eventService.dispatchEvent(event);
    };
    ColumnModel2.prototype.moveColumns = function(columnsToMoveKeys, toIndex, source) {
      if (source === void 0) {
        source = "api";
      }
      this.columnAnimationService.start();
      if (toIndex > this.gridColumns.length - columnsToMoveKeys.length) {
        console.warn("AG Grid: tried to insert columns in invalid location, toIndex = " + toIndex);
        console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");
        return;
      }
      var columnsToMove = this.getGridColumns(columnsToMoveKeys);
      var failedRules = !this.doesMovePassRules(columnsToMove, toIndex);
      if (failedRules) {
        return;
      }
      moveInArray(this.gridColumns, columnsToMove, toIndex);
      this.updateDisplayedColumns(source);
      var event = {
        type: Events.EVENT_COLUMN_MOVED,
        columns: columnsToMove,
        column: columnsToMove.length === 1 ? columnsToMove[0] : null,
        toIndex,
        api: this.gridApi,
        columnApi: this.columnApi,
        source
      };
      this.eventService.dispatchEvent(event);
      this.columnAnimationService.finish();
    };
    ColumnModel2.prototype.doesMovePassRules = function(columnsToMove, toIndex) {
      var proposedColumnOrder = this.gridColumns.slice();
      moveInArray(proposedColumnOrder, columnsToMove, toIndex);
      if (!this.doesMovePassMarryChildren(proposedColumnOrder)) {
        return false;
      }
      if (!this.doesMovePassLockedPositions(proposedColumnOrder)) {
        return false;
      }
      return true;
    };
    ColumnModel2.prototype.sortColumnsLikeGridColumns = function(cols) {
      var _this = this;
      if (!cols || cols.length <= 1) {
        return;
      }
      var notAllColsInGridColumns = cols.filter(function(c) {
        return _this.gridColumns.indexOf(c) < 0;
      }).length > 0;
      if (notAllColsInGridColumns) {
        return;
      }
      cols.sort(function(a, b) {
        var indexA = _this.gridColumns.indexOf(a);
        var indexB = _this.gridColumns.indexOf(b);
        return indexA - indexB;
      });
    };
    ColumnModel2.prototype.doesMovePassLockedPositions = function(proposedColumnOrder) {
      var foundNonLocked = false;
      var rulePassed = true;
      proposedColumnOrder.forEach(function(col) {
        if (col.getColDef().lockPosition) {
          if (foundNonLocked) {
            rulePassed = false;
          }
        } else {
          foundNonLocked = true;
        }
      });
      return rulePassed;
    };
    ColumnModel2.prototype.doesMovePassMarryChildren = function(allColumnsCopy) {
      var rulePassed = true;
      this.columnUtils.depthFirstOriginalTreeSearch(null, this.gridBalancedTree, function(child) {
        if (!(child instanceof ProvidedColumnGroup)) {
          return;
        }
        var columnGroup = child;
        var colGroupDef = columnGroup.getColGroupDef();
        var marryChildren = colGroupDef && colGroupDef.marryChildren;
        if (!marryChildren) {
          return;
        }
        var newIndexes = [];
        columnGroup.getLeafColumns().forEach(function(col) {
          var newColIndex = allColumnsCopy.indexOf(col);
          newIndexes.push(newColIndex);
        });
        var maxIndex = Math.max.apply(Math, newIndexes);
        var minIndex = Math.min.apply(Math, newIndexes);
        var spread = maxIndex - minIndex;
        var maxSpread = columnGroup.getLeafColumns().length - 1;
        if (spread > maxSpread) {
          rulePassed = false;
        }
      });
      return rulePassed;
    };
    ColumnModel2.prototype.moveColumn = function(key, toIndex, source) {
      if (source === void 0) {
        source = "api";
      }
      this.moveColumns([key], toIndex, source);
    };
    ColumnModel2.prototype.moveColumnByIndex = function(fromIndex, toIndex, source) {
      if (source === void 0) {
        source = "api";
      }
      var column = this.gridColumns[fromIndex];
      this.moveColumn(column, toIndex, source);
    };
    ColumnModel2.prototype.getColumnDefs = function() {
      var _this = this;
      var cols = this.primaryColumns.slice();
      if (this.gridColsArePrimary) {
        cols.sort(function(a, b) {
          return _this.gridColumns.indexOf(a) - _this.gridColumns.indexOf(b);
        });
      } else if (this.lastPrimaryOrder) {
        cols.sort(function(a, b) {
          return _this.lastPrimaryOrder.indexOf(a) - _this.lastPrimaryOrder.indexOf(b);
        });
      }
      return this.columnDefFactory.buildColumnDefs(cols, this.rowGroupColumns, this.pivotColumns);
    };
    ColumnModel2.prototype.getBodyContainerWidth = function() {
      return this.bodyWidth;
    };
    ColumnModel2.prototype.getContainerWidth = function(pinned) {
      switch (pinned) {
        case Constants.PINNED_LEFT:
          return this.leftWidth;
        case Constants.PINNED_RIGHT:
          return this.rightWidth;
        default:
          return this.bodyWidth;
      }
    };
    ColumnModel2.prototype.updateBodyWidths = function() {
      var newBodyWidth = this.getWidthOfColsInList(this.displayedColumnsCenter);
      var newLeftWidth = this.getWidthOfColsInList(this.displayedColumnsLeft);
      var newRightWidth = this.getWidthOfColsInList(this.displayedColumnsRight);
      this.bodyWidthDirty = this.bodyWidth !== newBodyWidth;
      var atLeastOneChanged = this.bodyWidth !== newBodyWidth || this.leftWidth !== newLeftWidth || this.rightWidth !== newRightWidth;
      if (atLeastOneChanged) {
        this.bodyWidth = newBodyWidth;
        this.leftWidth = newLeftWidth;
        this.rightWidth = newRightWidth;
        var event_3 = {
          type: Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,
          api: this.gridApi,
          columnApi: this.columnApi
        };
        this.eventService.dispatchEvent(event_3);
      }
    };
    ColumnModel2.prototype.getValueColumns = function() {
      return this.valueColumns ? this.valueColumns : [];
    };
    ColumnModel2.prototype.getPivotColumns = function() {
      return this.pivotColumns ? this.pivotColumns : [];
    };
    ColumnModel2.prototype.isPivotActive = function() {
      return this.pivotColumns && this.pivotColumns.length > 0 && this.pivotMode;
    };
    ColumnModel2.prototype.getRowGroupColumns = function() {
      return this.rowGroupColumns ? this.rowGroupColumns : [];
    };
    ColumnModel2.prototype.getDisplayedCenterColumns = function() {
      return this.displayedColumnsCenter;
    };
    ColumnModel2.prototype.getDisplayedLeftColumns = function() {
      return this.displayedColumnsLeft;
    };
    ColumnModel2.prototype.getDisplayedRightColumns = function() {
      return this.displayedColumnsRight;
    };
    ColumnModel2.prototype.getDisplayedColumns = function(type) {
      switch (type) {
        case Constants.PINNED_LEFT:
          return this.getDisplayedLeftColumns();
        case Constants.PINNED_RIGHT:
          return this.getDisplayedRightColumns();
        default:
          return this.getDisplayedCenterColumns();
      }
    };
    ColumnModel2.prototype.getAllPrimaryColumns = function() {
      return this.primaryColumns ? this.primaryColumns.slice() : null;
    };
    ColumnModel2.prototype.getSecondaryColumns = function() {
      return this.secondaryColumns ? this.secondaryColumns.slice() : null;
    };
    ColumnModel2.prototype.getAllColumnsForQuickFilter = function() {
      return this.columnsForQuickFilter;
    };
    ColumnModel2.prototype.getAllGridColumns = function() {
      return this.gridColumns;
    };
    ColumnModel2.prototype.isEmpty = function() {
      return missingOrEmpty(this.gridColumns);
    };
    ColumnModel2.prototype.isRowGroupEmpty = function() {
      return missingOrEmpty(this.rowGroupColumns);
    };
    ColumnModel2.prototype.setColumnVisible = function(key, visible, source) {
      if (source === void 0) {
        source = "api";
      }
      this.setColumnsVisible([key], visible, source);
    };
    ColumnModel2.prototype.setColumnsVisible = function(keys3, visible, source) {
      var _this = this;
      if (visible === void 0) {
        visible = false;
      }
      if (source === void 0) {
        source = "api";
      }
      this.columnAnimationService.start();
      this.actionOnGridColumns(keys3, function(column) {
        if (column.isVisible() !== visible) {
          column.setVisible(visible, source);
          return true;
        }
        return false;
      }, source, function() {
        var event = {
          type: Events.EVENT_COLUMN_VISIBLE,
          visible,
          column: null,
          columns: null,
          api: _this.gridApi,
          columnApi: _this.columnApi,
          source
        };
        return event;
      });
      this.columnAnimationService.finish();
    };
    ColumnModel2.prototype.setColumnPinned = function(key, pinned, source) {
      if (source === void 0) {
        source = "api";
      }
      if (key) {
        this.setColumnsPinned([key], pinned, source);
      }
    };
    ColumnModel2.prototype.setColumnsPinned = function(keys3, pinned, source) {
      var _this = this;
      if (source === void 0) {
        source = "api";
      }
      if (this.gridOptionsWrapper.getDomLayout() === "print") {
        console.warn("Changing the column pinning status is not allowed with domLayout='print'");
        return;
      }
      this.columnAnimationService.start();
      var actualPinned;
      if (pinned === true || pinned === Constants.PINNED_LEFT) {
        actualPinned = Constants.PINNED_LEFT;
      } else if (pinned === Constants.PINNED_RIGHT) {
        actualPinned = Constants.PINNED_RIGHT;
      } else {
        actualPinned = null;
      }
      this.actionOnGridColumns(keys3, function(col) {
        if (col.getPinned() !== actualPinned) {
          col.setPinned(actualPinned);
          return true;
        }
        return false;
      }, source, function() {
        var event = {
          type: Events.EVENT_COLUMN_PINNED,
          pinned: actualPinned,
          column: null,
          columns: null,
          api: _this.gridApi,
          columnApi: _this.columnApi,
          source
        };
        return event;
      });
      this.columnAnimationService.finish();
    };
    ColumnModel2.prototype.actionOnGridColumns = function(keys3, action, source, createEvent) {
      var _this = this;
      if (missingOrEmpty(keys3)) {
        return;
      }
      var updatedColumns = [];
      keys3.forEach(function(key) {
        var column = _this.getGridColumn(key);
        if (!column) {
          return;
        }
        var resultOfAction = action(column);
        if (resultOfAction !== false) {
          updatedColumns.push(column);
        }
      });
      if (!updatedColumns.length) {
        return;
      }
      this.updateDisplayedColumns(source);
      if (exists(createEvent) && createEvent) {
        var event_4 = createEvent();
        event_4.columns = updatedColumns;
        event_4.column = updatedColumns.length === 1 ? updatedColumns[0] : null;
        this.eventService.dispatchEvent(event_4);
      }
    };
    ColumnModel2.prototype.getDisplayedColBefore = function(col) {
      var allDisplayedColumns = this.getAllDisplayedColumns();
      var oldIndex = allDisplayedColumns.indexOf(col);
      if (oldIndex > 0) {
        return allDisplayedColumns[oldIndex - 1];
      }
      return null;
    };
    ColumnModel2.prototype.getDisplayedColAfter = function(col) {
      var allDisplayedColumns = this.getAllDisplayedColumns();
      var oldIndex = allDisplayedColumns.indexOf(col);
      if (oldIndex < allDisplayedColumns.length - 1) {
        return allDisplayedColumns[oldIndex + 1];
      }
      return null;
    };
    ColumnModel2.prototype.getDisplayedGroupAfter = function(columnGroup) {
      return this.getDisplayedGroupAtDirection(columnGroup, "After");
    };
    ColumnModel2.prototype.getDisplayedGroupBefore = function(columnGroup) {
      return this.getDisplayedGroupAtDirection(columnGroup, "Before");
    };
    ColumnModel2.prototype.getDisplayedGroupAtDirection = function(columnGroup, direction) {
      var requiredLevel = columnGroup.getOriginalColumnGroup().getLevel() + columnGroup.getPaddingLevel();
      var colGroupLeafColumns = columnGroup.getDisplayedLeafColumns();
      var col = direction === "After" ? last(colGroupLeafColumns) : colGroupLeafColumns[0];
      var getDisplayColMethod = "getDisplayedCol" + direction;
      while (true) {
        var column = this[getDisplayColMethod](col);
        if (!column) {
          return null;
        }
        var groupPointer = this.getColumnGroupAtLevel(column, requiredLevel);
        if (groupPointer !== columnGroup) {
          return groupPointer;
        }
      }
    };
    ColumnModel2.prototype.getColumnGroupAtLevel = function(column, level) {
      var groupPointer = column.getParent();
      var originalGroupLevel;
      var groupPointerLevel;
      while (true) {
        var groupPointerOriginalColumnGroup = groupPointer.getOriginalColumnGroup();
        originalGroupLevel = groupPointerOriginalColumnGroup.getLevel();
        groupPointerLevel = groupPointer.getPaddingLevel();
        if (originalGroupLevel + groupPointerLevel <= level) {
          break;
        }
        groupPointer = groupPointer.getParent();
      }
      return groupPointer;
    };
    ColumnModel2.prototype.isPinningLeft = function() {
      return this.displayedColumnsLeft.length > 0;
    };
    ColumnModel2.prototype.isPinningRight = function() {
      return this.displayedColumnsRight.length > 0;
    };
    ColumnModel2.prototype.getPrimaryAndSecondaryAndAutoColumns = function() {
      var result = this.primaryColumns ? this.primaryColumns.slice(0) : [];
      if (this.groupAutoColumns && exists(this.groupAutoColumns)) {
        this.groupAutoColumns.forEach(function(col) {
          return result.push(col);
        });
      }
      if (this.secondaryColumnsPresent && this.secondaryColumns) {
        this.secondaryColumns.forEach(function(column) {
          return result.push(column);
        });
      }
      return result;
    };
    ColumnModel2.prototype.createStateItemFromColumn = function(column) {
      var rowGroupIndex = column.isRowGroupActive() ? this.rowGroupColumns.indexOf(column) : null;
      var pivotIndex = column.isPivotActive() ? this.pivotColumns.indexOf(column) : null;
      var aggFunc = column.isValueActive() ? column.getAggFunc() : null;
      var sort = column.getSort() != null ? column.getSort() : null;
      var sortIndex = column.getSortIndex() != null ? column.getSortIndex() : null;
      var flex = column.getFlex() != null && column.getFlex() > 0 ? column.getFlex() : null;
      var res = {
        colId: column.getColId(),
        width: column.getActualWidth(),
        hide: !column.isVisible(),
        pinned: column.getPinned(),
        sort,
        sortIndex,
        aggFunc,
        rowGroup: column.isRowGroupActive(),
        rowGroupIndex,
        pivot: column.isPivotActive(),
        pivotIndex,
        flex
      };
      return res;
    };
    ColumnModel2.prototype.getColumnState = function() {
      if (missing(this.primaryColumns) || !this.isAlive()) {
        return [];
      }
      var colsForState = this.getPrimaryAndSecondaryAndAutoColumns();
      var res = colsForState.map(this.createStateItemFromColumn.bind(this));
      if (!this.pivotMode) {
        this.orderColumnStateList(res);
      }
      return res;
    };
    ColumnModel2.prototype.getPrimaryAndAutoGroupCols = function() {
      if (!this.groupAutoColumns) {
        return this.primaryColumns;
      } else {
        return __spreadArrays(this.primaryColumns, this.groupAutoColumns);
      }
    };
    ColumnModel2.prototype.orderColumnStateList = function(columnStateList) {
      var gridColumnIdMap = convertToMap(this.gridColumns.map(function(col, index) {
        return [col.getColId(), index];
      }));
      columnStateList.sort(function(itemA, itemB) {
        var posA = gridColumnIdMap.has(itemA.colId) ? gridColumnIdMap.get(itemA.colId) : -1;
        var posB = gridColumnIdMap.has(itemB.colId) ? gridColumnIdMap.get(itemB.colId) : -1;
        return posA - posB;
      });
    };
    ColumnModel2.prototype.resetColumnState = function(source) {
      if (source === void 0) {
        source = "api";
      }
      var primaryColumns = this.getColumnsFromTree(this.primaryColumnTree);
      var columnStates = [];
      var letRowGroupIndex = 1e3;
      var letPivotIndex = 1e3;
      var colsToProcess = [];
      if (this.groupAutoColumns) {
        colsToProcess = colsToProcess.concat(this.groupAutoColumns);
      }
      if (primaryColumns) {
        colsToProcess = colsToProcess.concat(primaryColumns);
      }
      colsToProcess.forEach(function(column) {
        var getValueOrNull = function(a, b) {
          return a != null ? a : b != null ? b : null;
        };
        var colDef = column.getColDef();
        var sort = getValueOrNull(colDef.sort, colDef.initialSort);
        var sortIndex = getValueOrNull(colDef.sortIndex, colDef.initialSortIndex);
        var hide = getValueOrNull(colDef.hide, colDef.initialHide);
        var pinned = getValueOrNull(colDef.pinned, colDef.initialPinned);
        var width = getValueOrNull(colDef.width, colDef.initialWidth);
        var flex = getValueOrNull(colDef.flex, colDef.initialFlex);
        var rowGroupIndex = getValueOrNull(colDef.rowGroupIndex, colDef.initialRowGroupIndex);
        var rowGroup = getValueOrNull(colDef.rowGroup, colDef.initialRowGroup);
        if (rowGroupIndex == null && (rowGroup == null || rowGroup == false)) {
          rowGroupIndex = null;
          rowGroup = null;
        }
        var pivotIndex = getValueOrNull(colDef.pivotIndex, colDef.initialPivotIndex);
        var pivot = getValueOrNull(colDef.pivot, colDef.initialPivot);
        if (pivotIndex == null && (pivot == null || pivot == false)) {
          pivotIndex = null;
          pivot = null;
        }
        var aggFunc = getValueOrNull(colDef.aggFunc, colDef.initialAggFunc);
        var stateItem = {
          colId: column.getColId(),
          sort,
          sortIndex,
          hide,
          pinned,
          width,
          flex,
          rowGroup,
          rowGroupIndex,
          pivot,
          pivotIndex,
          aggFunc
        };
        if (missing(rowGroupIndex) && rowGroup) {
          stateItem.rowGroupIndex = letRowGroupIndex++;
        }
        if (missing(pivotIndex) && pivot) {
          stateItem.pivotIndex = letPivotIndex++;
        }
        columnStates.push(stateItem);
      });
      this.applyColumnState({ state: columnStates, applyOrder: true }, source);
    };
    ColumnModel2.prototype.applyColumnState = function(params2, source) {
      var _this = this;
      if (source === void 0) {
        source = "api";
      }
      if (missingOrEmpty(this.primaryColumns)) {
        return false;
      }
      if (params2 && params2.state && !params2.state.forEach) {
        console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.");
        return false;
      }
      this.columnAnimationService.start();
      var raiseEventsFunc = this.compareColumnStatesAndRaiseEvents(source);
      this.autoGroupsNeedBuilding = true;
      var columnsWithNoState = this.primaryColumns.slice();
      var success = true;
      var rowGroupIndexes = {};
      var pivotIndexes = {};
      var autoGroupColumnStates = [];
      var previousRowGroupCols = this.rowGroupColumns.slice();
      var previousPivotCols = this.pivotColumns.slice();
      if (params2.state) {
        params2.state.forEach(function(state2) {
          var groupAutoColumnId = Constants.GROUP_AUTO_COLUMN_ID;
          var colId = state2.colId || "";
          var isAutoGroupColumn = startsWith2(colId, groupAutoColumnId);
          if (isAutoGroupColumn) {
            autoGroupColumnStates.push(state2);
            return;
          }
          var column = _this.getPrimaryColumn(colId);
          if (!column) {
            success = false;
          } else {
            _this.syncColumnWithStateItem(column, state2, params2.defaultState, rowGroupIndexes, pivotIndexes, false, source);
            removeFromArray(columnsWithNoState, column);
          }
        });
      }
      var applyDefaultsFunc = function(col) {
        return _this.syncColumnWithStateItem(col, null, params2.defaultState, rowGroupIndexes, pivotIndexes, false, source);
      };
      columnsWithNoState.forEach(applyDefaultsFunc);
      var comparator = function(indexes, oldList, colA, colB) {
        var indexA = indexes[colA.getId()];
        var indexB = indexes[colB.getId()];
        var aHasIndex = indexA != null;
        var bHasIndex = indexB != null;
        if (aHasIndex && bHasIndex) {
          return indexA - indexB;
        }
        if (aHasIndex) {
          return -1;
        }
        if (bHasIndex) {
          return 1;
        }
        var oldIndexA = oldList.indexOf(colA);
        var oldIndexB = oldList.indexOf(colB);
        var aHasOldIndex = oldIndexA >= 0;
        var bHasOldIndex = oldIndexB >= 0;
        if (aHasOldIndex && bHasOldIndex) {
          return oldIndexA - oldIndexB;
        }
        if (aHasOldIndex) {
          return -1;
        }
        return 1;
      };
      this.rowGroupColumns.sort(comparator.bind(this, rowGroupIndexes, previousRowGroupCols));
      this.pivotColumns.sort(comparator.bind(this, pivotIndexes, previousPivotCols));
      this.updateGridColumns();
      var autoGroupColsCopy = this.groupAutoColumns ? this.groupAutoColumns.slice() : [];
      autoGroupColumnStates.forEach(function(stateItem) {
        var autoCol = _this.getAutoColumn(stateItem.colId);
        removeFromArray(autoGroupColsCopy, autoCol);
        _this.syncColumnWithStateItem(autoCol, stateItem, params2.defaultState, null, null, true, source);
      });
      autoGroupColsCopy.forEach(applyDefaultsFunc);
      this.applyOrderAfterApplyState(params2);
      this.updateDisplayedColumns(source);
      this.dispatchEverythingChanged(source);
      raiseEventsFunc();
      this.columnAnimationService.finish();
      return success;
    };
    ColumnModel2.prototype.applyOrderAfterApplyState = function(params2) {
      if (!this.gridColsArePrimary || !params2.applyOrder || !params2.state) {
        return;
      }
      var newOrder = [];
      var processedColIds = {};
      var gridColumnsMap = {};
      this.gridColumns.forEach(function(col) {
        return gridColumnsMap[col.getId()] = col;
      });
      params2.state.forEach(function(item) {
        if (!item.colId || processedColIds[item.colId]) {
          return;
        }
        var col = gridColumnsMap[item.colId];
        if (col) {
          newOrder.push(col);
          processedColIds[item.colId] = true;
        }
      });
      this.gridColumns.forEach(function(col) {
        if (!processedColIds[col.getColId()]) {
          newOrder.push(col);
        }
      });
      newOrder = this.putFixedColumnsFirst(newOrder);
      if (!this.doesMovePassMarryChildren(newOrder)) {
        console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");
        return;
      }
      this.gridColumns = newOrder;
    };
    ColumnModel2.prototype.compareColumnStatesAndRaiseEvents = function(source) {
      var _this = this;
      var colsPreviouslyExisted = !!this.columnDefs;
      if (!colsPreviouslyExisted) {
        return function() {
        };
      }
      var startState = {
        rowGroupColumns: this.rowGroupColumns.slice(),
        pivotColumns: this.pivotColumns.slice(),
        valueColumns: this.valueColumns.slice()
      };
      var columnStateBefore = this.getColumnState();
      var columnStateBeforeMap = {};
      columnStateBefore.forEach(function(col) {
        columnStateBeforeMap[col.colId] = col;
      });
      return function() {
        if (_this.gridOptionsWrapper.isSuppressColumnStateEvents()) {
          return;
        }
        var colsForState = _this.getPrimaryAndAutoGroupCols();
        var raiseWhenListsDifferent = function(eventType, colsBefore, colsAfter, idMapper) {
          var beforeList = colsBefore.map(idMapper);
          var afterList = colsAfter.map(idMapper);
          var unchanged = areEqual(beforeList, afterList);
          if (unchanged) {
            return;
          }
          var event = {
            type: eventType,
            columns: colsAfter,
            column: colsAfter.length === 1 ? colsAfter[0] : null,
            api: _this.gridApi,
            columnApi: _this.columnApi,
            source
          };
          _this.eventService.dispatchEvent(event);
        };
        var getChangedColumns = function(changedPredicate) {
          var changedColumns = [];
          colsForState.forEach(function(column) {
            var colStateBefore = columnStateBeforeMap[column.getColId()];
            if (colStateBefore && changedPredicate(colStateBefore, column)) {
              changedColumns.push(column);
            }
          });
          return changedColumns;
        };
        var columnIdMapper = function(c) {
          return c.getColId();
        };
        raiseWhenListsDifferent(Events.EVENT_COLUMN_ROW_GROUP_CHANGED, startState.rowGroupColumns, _this.rowGroupColumns, columnIdMapper);
        raiseWhenListsDifferent(Events.EVENT_COLUMN_PIVOT_CHANGED, startState.pivotColumns, _this.pivotColumns, columnIdMapper);
        var valueChangePredicate = function(cs, c) {
          var oldActive = cs.aggFunc != null;
          var activeChanged = oldActive != c.isValueActive();
          var aggFuncChanged = oldActive && cs.aggFunc != c.getAggFunc();
          return activeChanged || aggFuncChanged;
        };
        var changedValues = getChangedColumns(valueChangePredicate);
        if (changedValues.length > 0) {
          _this.fireColumnEvent(Events.EVENT_COLUMN_VALUE_CHANGED, _this.valueColumns, source);
        }
        var resizeChangePredicate = function(cs, c) {
          return cs.width != c.getActualWidth();
        };
        _this.fireColumnResizedEvent(getChangedColumns(resizeChangePredicate), true, source);
        var pinnedChangePredicate = function(cs, c) {
          return cs.pinned != c.getPinned();
        };
        _this.raiseColumnPinnedEvent(getChangedColumns(pinnedChangePredicate), source);
        var visibilityChangePredicate = function(cs, c) {
          return cs.hide == c.isVisible();
        };
        _this.raiseColumnVisibleEvent(getChangedColumns(visibilityChangePredicate), source);
        var sortChangePredicate = function(cs, c) {
          return cs.sort != c.getSort() || cs.sortIndex != c.getSortIndex();
        };
        if (getChangedColumns(sortChangePredicate).length > 0) {
          _this.sortController.dispatchSortChangedEvents();
        }
        _this.raiseColumnMovedEvent(columnStateBefore, source);
      };
    };
    ColumnModel2.prototype.raiseColumnPinnedEvent = function(changedColumns, source) {
      if (!changedColumns.length) {
        return;
      }
      var column = changedColumns.length === 1 ? changedColumns[0] : null;
      var pinned = this.getCommonValue(changedColumns, function(col) {
        return col.getPinned();
      });
      var event = {
        type: Events.EVENT_COLUMN_PINNED,
        pinned: pinned != null ? pinned : null,
        columns: changedColumns,
        column,
        api: this.gridApi,
        columnApi: this.columnApi,
        source
      };
      this.eventService.dispatchEvent(event);
    };
    ColumnModel2.prototype.getCommonValue = function(cols, valueGetter) {
      if (!cols || cols.length == 0) {
        return void 0;
      }
      var firstValue = valueGetter(cols[0]);
      for (var i2 = 1; i2 < cols.length; i2++) {
        if (firstValue !== valueGetter(cols[i2])) {
          return void 0;
        }
      }
      return firstValue;
    };
    ColumnModel2.prototype.raiseColumnVisibleEvent = function(changedColumns, source) {
      if (!changedColumns.length) {
        return;
      }
      var column = changedColumns.length === 1 ? changedColumns[0] : null;
      var visible = this.getCommonValue(changedColumns, function(col) {
        return col.isVisible();
      });
      var event = {
        type: Events.EVENT_COLUMN_VISIBLE,
        visible,
        columns: changedColumns,
        column,
        api: this.gridApi,
        columnApi: this.columnApi,
        source
      };
      this.eventService.dispatchEvent(event);
    };
    ColumnModel2.prototype.raiseColumnMovedEvent = function(colStateBefore, source) {
      var _this = this;
      var colStateAfter = this.getColumnState();
      var colStateAfterMapped = {};
      colStateAfter.forEach(function(s) {
        return colStateAfterMapped[s.colId] = s;
      });
      var colsIntersectIds = {};
      colStateBefore.forEach(function(s) {
        if (colStateAfterMapped[s.colId]) {
          colsIntersectIds[s.colId] = true;
        }
      });
      var beforeFiltered = filter(colStateBefore, function(c) {
        return colsIntersectIds[c.colId];
      });
      var afterFiltered = filter(colStateAfter, function(c) {
        return colsIntersectIds[c.colId];
      });
      var movedColumns = [];
      afterFiltered.forEach(function(csAfter, index) {
        var csBefore = beforeFiltered && beforeFiltered[index];
        if (csBefore && csBefore.colId !== csAfter.colId) {
          var gridCol = _this.getGridColumn(csBefore.colId);
          if (gridCol) {
            movedColumns.push(gridCol);
          }
        }
      });
      if (!movedColumns.length) {
        return;
      }
      var event = {
        type: Events.EVENT_COLUMN_MOVED,
        columns: movedColumns,
        column: null,
        api: this.gridApi,
        columnApi: this.columnApi,
        source
      };
      this.eventService.dispatchEvent(event);
    };
    ColumnModel2.prototype.syncColumnWithStateItem = function(column, stateItem, defaultState, rowGroupIndexes, pivotIndexes, autoCol, source) {
      if (!column) {
        return;
      }
      var getValue = function(key1, key2) {
        var stateAny = stateItem;
        var defaultAny = defaultState;
        var obj = { value1: void 0, value2: void 0 };
        var calculated = false;
        if (stateAny) {
          if (stateAny[key1] !== void 0) {
            obj.value1 = stateAny[key1];
            calculated = true;
          }
          if (exists(key2) && stateAny[key2] !== void 0) {
            obj.value2 = stateAny[key2];
            calculated = true;
          }
        }
        if (!calculated && defaultAny) {
          if (defaultAny[key1] !== void 0) {
            obj.value1 = defaultAny[key1];
          }
          if (exists(key2) && defaultAny[key2] !== void 0) {
            obj.value2 = defaultAny[key2];
          }
        }
        return obj;
      };
      var hide = getValue("hide").value1;
      if (hide !== void 0) {
        column.setVisible(!hide, source);
      }
      var pinned = getValue("pinned").value1;
      if (pinned !== void 0) {
        column.setPinned(pinned);
      }
      var minColWidth = this.gridOptionsWrapper.getMinColWidth();
      var flex = getValue("flex").value1;
      if (flex !== void 0) {
        column.setFlex(flex);
      }
      var noFlexThisCol = column.getFlex() <= 0;
      if (noFlexThisCol) {
        var width = getValue("width").value1;
        if (width != null) {
          if (minColWidth && width >= minColWidth) {
            column.setActualWidth(width, source);
          }
        }
      }
      var sort = getValue("sort").value1;
      if (sort !== void 0) {
        if (sort === Constants.SORT_DESC || sort === Constants.SORT_ASC) {
          column.setSort(sort);
        } else {
          column.setSort(void 0);
        }
      }
      var sortIndex = getValue("sortIndex").value1;
      if (sortIndex !== void 0) {
        column.setSortIndex(sortIndex);
      }
      if (autoCol) {
        return;
      }
      var aggFunc = getValue("aggFunc").value1;
      if (aggFunc !== void 0) {
        if (typeof aggFunc === "string") {
          column.setAggFunc(aggFunc);
          if (!column.isValueActive()) {
            column.setValueActive(true, source);
            this.valueColumns.push(column);
          }
        } else {
          if (exists(aggFunc)) {
            console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.");
          }
          if (column.isValueActive()) {
            column.setValueActive(false, source);
            removeFromArray(this.valueColumns, column);
          }
        }
      }
      var _a = getValue("rowGroup", "rowGroupIndex"), rowGroup = _a.value1, rowGroupIndex = _a.value2;
      if (rowGroup !== void 0 || rowGroupIndex !== void 0) {
        if (typeof rowGroupIndex === "number" || rowGroup) {
          if (!column.isRowGroupActive()) {
            column.setRowGroupActive(true, source);
            this.rowGroupColumns.push(column);
          }
          if (rowGroupIndexes && typeof rowGroupIndex === "number") {
            rowGroupIndexes[column.getId()] = rowGroupIndex;
          }
        } else {
          if (column.isRowGroupActive()) {
            column.setRowGroupActive(false, source);
            removeFromArray(this.rowGroupColumns, column);
          }
        }
      }
      var _b = getValue("pivot", "pivotIndex"), pivot = _b.value1, pivotIndex = _b.value2;
      if (pivot !== void 0 || pivotIndex !== void 0) {
        if (typeof pivotIndex === "number" || pivot) {
          if (!column.isPivotActive()) {
            column.setPivotActive(true, source);
            this.pivotColumns.push(column);
          }
          if (pivotIndexes && typeof pivotIndex === "number") {
            pivotIndexes[column.getId()] = pivotIndex;
          }
        } else {
          if (column.isPivotActive()) {
            column.setPivotActive(false, source);
            removeFromArray(this.pivotColumns, column);
          }
        }
      }
    };
    ColumnModel2.prototype.getGridColumns = function(keys3) {
      return this.getColumns(keys3, this.getGridColumn.bind(this));
    };
    ColumnModel2.prototype.getColumns = function(keys3, columnLookupCallback) {
      var foundColumns = [];
      if (keys3) {
        keys3.forEach(function(key) {
          var column = columnLookupCallback(key);
          if (column) {
            foundColumns.push(column);
          }
        });
      }
      return foundColumns;
    };
    ColumnModel2.prototype.getColumnWithValidation = function(key) {
      if (key == null) {
        return null;
      }
      var column = this.getGridColumn(key);
      if (!column) {
        console.warn("AG Grid: could not find column " + key);
      }
      return column;
    };
    ColumnModel2.prototype.getPrimaryColumn = function(key) {
      return this.getColumn(key, this.primaryColumns, this.primaryColumnsMap);
    };
    ColumnModel2.prototype.getGridColumn = function(key) {
      return this.getColumn(key, this.gridColumns, this.gridColumnsMap);
    };
    ColumnModel2.prototype.getColumn = function(key, columnList, columnMap) {
      if (!key) {
        return null;
      }
      if (typeof key == "string" && columnMap[key]) {
        return columnMap[key];
      }
      for (var i2 = 0; i2 < columnList.length; i2++) {
        if (this.columnsMatch(columnList[i2], key)) {
          return columnList[i2];
        }
      }
      return this.getAutoColumn(key);
    };
    ColumnModel2.prototype.getAutoColumn = function(key) {
      var _this = this;
      if (!this.groupAutoColumns || !exists(this.groupAutoColumns) || missing(this.groupAutoColumns)) {
        return null;
      }
      return find(this.groupAutoColumns, function(groupCol) {
        return _this.columnsMatch(groupCol, key);
      });
    };
    ColumnModel2.prototype.columnsMatch = function(column, key) {
      var columnMatches = column === key;
      var colDefMatches = column.getColDef() === key;
      var idMatches = column.getColId() == key;
      return columnMatches || colDefMatches || idMatches;
    };
    ColumnModel2.prototype.getDisplayNameForColumn = function(column, location, includeAggFunc) {
      if (includeAggFunc === void 0) {
        includeAggFunc = false;
      }
      if (!column) {
        return null;
      }
      var headerName = this.getHeaderName(column.getColDef(), column, null, null, location);
      if (includeAggFunc) {
        return this.wrapHeaderNameWithAggFunc(column, headerName);
      }
      return headerName;
    };
    ColumnModel2.prototype.getDisplayNameForOriginalColumnGroup = function(columnGroup, originalColumnGroup, location) {
      var colGroupDef = originalColumnGroup ? originalColumnGroup.getColGroupDef() : null;
      if (colGroupDef) {
        return this.getHeaderName(colGroupDef, null, columnGroup, originalColumnGroup, location);
      }
      return null;
    };
    ColumnModel2.prototype.getDisplayNameForColumnGroup = function(columnGroup, location) {
      return this.getDisplayNameForOriginalColumnGroup(columnGroup, columnGroup.getOriginalColumnGroup(), location);
    };
    ColumnModel2.prototype.getHeaderName = function(colDef, column, columnGroup, originalColumnGroup, location) {
      var headerValueGetter = colDef.headerValueGetter;
      if (headerValueGetter) {
        var params2 = {
          colDef,
          column,
          columnGroup,
          originalColumnGroup,
          location,
          api: this.gridOptionsWrapper.getApi(),
          context: this.gridOptionsWrapper.getContext()
        };
        if (typeof headerValueGetter === "function") {
          return headerValueGetter(params2);
        } else if (typeof headerValueGetter === "string") {
          return this.expressionService.evaluate(headerValueGetter, params2);
        }
        console.warn("ag-grid: headerValueGetter must be a function or a string");
        return "";
      } else if (colDef.headerName != null) {
        return colDef.headerName;
      } else if (colDef.field) {
        return camelCaseToHumanText(colDef.field);
      }
      return "";
    };
    ColumnModel2.prototype.wrapHeaderNameWithAggFunc = function(column, headerName) {
      if (this.gridOptionsWrapper.isSuppressAggFuncInHeader()) {
        return headerName;
      }
      var pivotValueColumn = column.getColDef().pivotValueColumn;
      var pivotActiveOnThisColumn = exists(pivotValueColumn);
      var aggFunc = null;
      var aggFuncFound;
      if (pivotActiveOnThisColumn) {
        aggFunc = pivotValueColumn ? pivotValueColumn.getAggFunc() : null;
        aggFuncFound = true;
      } else {
        var measureActive = column.isValueActive();
        var aggregationPresent = this.pivotMode || !this.isRowGroupEmpty();
        if (measureActive && aggregationPresent) {
          aggFunc = column.getAggFunc();
          aggFuncFound = true;
        } else {
          aggFuncFound = false;
        }
      }
      if (aggFuncFound) {
        var aggFuncString = typeof aggFunc === "string" ? aggFunc : "func";
        var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();
        var aggFuncStringTranslated = localeTextFunc(aggFuncString, aggFuncString);
        return aggFuncStringTranslated + "(" + headerName + ")";
      }
      return headerName;
    };
    ColumnModel2.prototype.getColumnGroup = function(colId, instanceId) {
      if (!colId) {
        return null;
      }
      if (colId instanceof ColumnGroup) {
        return colId;
      }
      var allColumnGroups = this.getAllDisplayedTrees();
      var checkInstanceId = typeof instanceId === "number";
      var result = null;
      this.columnUtils.depthFirstAllColumnTreeSearch(allColumnGroups, function(child) {
        if (child instanceof ColumnGroup) {
          var columnGroup = child;
          var matched = void 0;
          if (checkInstanceId) {
            matched = colId === columnGroup.getGroupId() && instanceId === columnGroup.getInstanceId();
          } else {
            matched = colId === columnGroup.getGroupId();
          }
          if (matched) {
            result = columnGroup;
          }
        }
      });
      return result;
    };
    ColumnModel2.prototype.isReady = function() {
      return this.ready;
    };
    ColumnModel2.prototype.extractValueColumns = function(source, oldPrimaryColumns) {
      this.valueColumns = this.extractColumns(oldPrimaryColumns, this.valueColumns, function(col, flag) {
        return col.setValueActive(flag, source);
      }, function() {
        return void 0;
      }, function() {
        return void 0;
      }, function(colDef) {
        var aggFunc = colDef.aggFunc;
        if (aggFunc === null || aggFunc === "") {
          return null;
        }
        if (aggFunc === void 0) {
          return;
        }
        return !!aggFunc;
      }, function(colDef) {
        return colDef.initialAggFunc != null && colDef.initialAggFunc != "";
      });
      this.valueColumns.forEach(function(col) {
        var colDef = col.getColDef();
        if (colDef.aggFunc != null && colDef.aggFunc != "") {
          col.setAggFunc(colDef.aggFunc);
        } else {
          if (!col.getAggFunc()) {
            col.setAggFunc(colDef.initialAggFunc);
          }
        }
      });
    };
    ColumnModel2.prototype.extractRowGroupColumns = function(source, oldPrimaryColumns) {
      this.rowGroupColumns = this.extractColumns(oldPrimaryColumns, this.rowGroupColumns, function(col, flag) {
        return col.setRowGroupActive(flag, source);
      }, function(colDef) {
        return colDef.rowGroupIndex;
      }, function(colDef) {
        return colDef.initialRowGroupIndex;
      }, function(colDef) {
        return colDef.rowGroup;
      }, function(colDef) {
        return colDef.initialRowGroup;
      });
    };
    ColumnModel2.prototype.extractColumns = function(oldPrimaryColumns, previousCols, setFlagFunc, getIndexFunc, getInitialIndexFunc, getValueFunc, getInitialValueFunc) {
      if (oldPrimaryColumns === void 0) {
        oldPrimaryColumns = [];
      }
      if (previousCols === void 0) {
        previousCols = [];
      }
      var colsWithIndex = [];
      var colsWithValue = [];
      this.primaryColumns.forEach(function(col) {
        var colIsNew = oldPrimaryColumns.indexOf(col) < 0;
        var colDef = col.getColDef();
        var value = attrToBoolean(getValueFunc(colDef));
        var initialValue = attrToBoolean(getInitialValueFunc(colDef));
        var index = attrToNumber(getIndexFunc(colDef));
        var initialIndex = attrToNumber(getInitialIndexFunc(colDef));
        var include;
        var valuePresent = value !== void 0;
        var indexPresent = index !== void 0;
        var initialValuePresent = initialValue !== void 0;
        var initialIndexPresent = initialIndex !== void 0;
        if (valuePresent) {
          include = value;
        } else if (indexPresent) {
          if (index === null) {
            include = false;
          } else {
            include = index >= 0;
          }
        } else {
          if (colIsNew) {
            if (initialValuePresent) {
              include = initialValue;
            } else if (initialIndexPresent) {
              include = initialIndex != null && initialIndex >= 0;
            } else {
              include = false;
            }
          } else {
            include = previousCols.indexOf(col) >= 0;
          }
        }
        if (include) {
          var useIndex = colIsNew ? index != null || initialIndex != null : index != null;
          useIndex ? colsWithIndex.push(col) : colsWithValue.push(col);
        }
      });
      var getIndexForCol = function(col) {
        var index = getIndexFunc(col.getColDef());
        var defaultIndex = getInitialIndexFunc(col.getColDef());
        return index != null ? index : defaultIndex;
      };
      colsWithIndex.sort(function(colA, colB) {
        var indexA = getIndexForCol(colA);
        var indexB = getIndexForCol(colB);
        if (indexA === indexB) {
          return 0;
        }
        if (indexA < indexB) {
          return -1;
        }
        return 1;
      });
      var res = [].concat(colsWithIndex);
      previousCols.forEach(function(col) {
        if (colsWithValue.indexOf(col) >= 0) {
          res.push(col);
        }
      });
      colsWithValue.forEach(function(col) {
        if (res.indexOf(col) < 0) {
          res.push(col);
        }
      });
      previousCols.forEach(function(col) {
        if (res.indexOf(col) < 0) {
          setFlagFunc(col, false);
        }
      });
      res.forEach(function(col) {
        if (previousCols.indexOf(col) < 0) {
          setFlagFunc(col, true);
        }
      });
      return res;
    };
    ColumnModel2.prototype.extractPivotColumns = function(source, oldPrimaryColumns) {
      this.pivotColumns = this.extractColumns(oldPrimaryColumns, this.pivotColumns, function(col, flag) {
        return col.setPivotActive(flag, source);
      }, function(colDef) {
        return colDef.pivotIndex;
      }, function(colDef) {
        return colDef.initialPivotIndex;
      }, function(colDef) {
        return colDef.pivot;
      }, function(colDef) {
        return colDef.initialPivot;
      });
    };
    ColumnModel2.prototype.resetColumnGroupState = function(source) {
      if (source === void 0) {
        source = "api";
      }
      var stateItems = [];
      this.columnUtils.depthFirstOriginalTreeSearch(null, this.primaryColumnTree, function(child) {
        if (child instanceof ProvidedColumnGroup) {
          var colGroupDef = child.getColGroupDef();
          var groupState = {
            groupId: child.getGroupId(),
            open: !colGroupDef ? void 0 : colGroupDef.openByDefault
          };
          stateItems.push(groupState);
        }
      });
      this.setColumnGroupState(stateItems, source);
    };
    ColumnModel2.prototype.getColumnGroupState = function() {
      var columnGroupState = [];
      this.columnUtils.depthFirstOriginalTreeSearch(null, this.gridBalancedTree, function(node) {
        if (node instanceof ProvidedColumnGroup) {
          var originalColumnGroup = node;
          columnGroupState.push({
            groupId: originalColumnGroup.getGroupId(),
            open: originalColumnGroup.isExpanded()
          });
        }
      });
      return columnGroupState;
    };
    ColumnModel2.prototype.setColumnGroupState = function(stateItems, source) {
      var _this = this;
      if (source === void 0) {
        source = "api";
      }
      this.columnAnimationService.start();
      var impactedGroups = [];
      stateItems.forEach(function(stateItem) {
        var groupKey = stateItem.groupId;
        var newValue = stateItem.open;
        var originalColumnGroup = _this.getOriginalColumnGroup(groupKey);
        if (!originalColumnGroup) {
          return;
        }
        if (originalColumnGroup.isExpanded() === newValue) {
          return;
        }
        _this.logger.log("columnGroupOpened(" + originalColumnGroup.getGroupId() + "," + newValue + ")");
        originalColumnGroup.setExpanded(newValue);
        impactedGroups.push(originalColumnGroup);
      });
      this.updateGroupsAndDisplayedColumns(source);
      this.setFirstRightAndLastLeftPinned(source);
      impactedGroups.forEach(function(originalColumnGroup) {
        var event = {
          type: Events.EVENT_COLUMN_GROUP_OPENED,
          columnGroup: originalColumnGroup,
          api: _this.gridApi,
          columnApi: _this.columnApi
        };
        _this.eventService.dispatchEvent(event);
      });
      this.columnAnimationService.finish();
    };
    ColumnModel2.prototype.setColumnGroupOpened = function(key, newValue, source) {
      if (source === void 0) {
        source = "api";
      }
      var keyAsString;
      if (key instanceof ProvidedColumnGroup) {
        keyAsString = key.getId();
      } else {
        keyAsString = key || "";
      }
      this.setColumnGroupState([{ groupId: keyAsString, open: newValue }], source);
    };
    ColumnModel2.prototype.getOriginalColumnGroup = function(key) {
      if (key instanceof ProvidedColumnGroup) {
        return key;
      }
      if (typeof key !== "string") {
        console.error("AG Grid: group key must be a string");
      }
      var res = null;
      this.columnUtils.depthFirstOriginalTreeSearch(null, this.gridBalancedTree, function(node) {
        if (node instanceof ProvidedColumnGroup) {
          var originalColumnGroup = node;
          if (originalColumnGroup.getId() === key) {
            res = originalColumnGroup;
          }
        }
      });
      return res;
    };
    ColumnModel2.prototype.calculateColumnsForDisplay = function() {
      var _this = this;
      var columnsForDisplay;
      if (this.pivotMode && !this.secondaryColumnsPresent) {
        columnsForDisplay = this.gridColumns.filter(function(column) {
          var isAutoGroupCol = _this.groupAutoColumns && includes2(_this.groupAutoColumns, column);
          var isValueCol = _this.valueColumns && includes2(_this.valueColumns, column);
          return isAutoGroupCol || isValueCol;
        });
      } else {
        columnsForDisplay = this.gridColumns.filter(function(column) {
          var isAutoGroupCol = _this.groupAutoColumns && includes2(_this.groupAutoColumns, column);
          return isAutoGroupCol || column.isVisible();
        });
      }
      return columnsForDisplay;
    };
    ColumnModel2.prototype.checkColSpanActiveInCols = function(columns) {
      var result = false;
      columns.forEach(function(col) {
        if (exists(col.getColDef().colSpan)) {
          result = true;
        }
      });
      return result;
    };
    ColumnModel2.prototype.calculateColumnsForGroupDisplay = function() {
      var _this = this;
      this.groupDisplayColumns = [];
      var checkFunc = function(col) {
        var colDef = col.getColDef();
        if (colDef && exists(colDef.showRowGroup)) {
          _this.groupDisplayColumns.push(col);
        }
      };
      this.gridColumns.forEach(checkFunc);
      if (this.groupAutoColumns) {
        this.groupAutoColumns.forEach(checkFunc);
      }
    };
    ColumnModel2.prototype.getGroupDisplayColumns = function() {
      return this.groupDisplayColumns;
    };
    ColumnModel2.prototype.updateDisplayedColumns = function(source) {
      var columnsForDisplay = this.calculateColumnsForDisplay();
      this.buildDisplayedTrees(columnsForDisplay);
      this.calculateColumnsForGroupDisplay();
      this.updateGroupsAndDisplayedColumns(source);
      this.setFirstRightAndLastLeftPinned(source);
    };
    ColumnModel2.prototype.isSecondaryColumnsPresent = function() {
      return this.secondaryColumnsPresent;
    };
    ColumnModel2.prototype.setSecondaryColumns = function(colDefs, source) {
      if (source === void 0) {
        source = "api";
      }
      var newColsPresent = colDefs && colDefs.length > 0;
      if (!newColsPresent && !this.secondaryColumnsPresent) {
        return;
      }
      if (newColsPresent) {
        this.processSecondaryColumnDefinitions(colDefs);
        var balancedTreeResult = this.columnFactory.createColumnTree(colDefs, false);
        this.secondaryBalancedTree = balancedTreeResult.columnTree;
        this.secondaryHeaderRowCount = balancedTreeResult.treeDept + 1;
        this.secondaryColumns = this.getColumnsFromTree(this.secondaryBalancedTree);
        this.secondaryColumnsPresent = true;
      } else {
        this.secondaryBalancedTree = null;
        this.secondaryHeaderRowCount = -1;
        this.secondaryColumns = null;
        this.secondaryColumnsPresent = false;
      }
      this.updateGridColumns();
      this.updateDisplayedColumns(source);
    };
    ColumnModel2.prototype.processSecondaryColumnDefinitions = function(colDefs) {
      var columnCallback = this.gridOptionsWrapper.getProcessSecondaryColDefFunc();
      var groupCallback = this.gridOptionsWrapper.getProcessSecondaryColGroupDefFunc();
      if (!columnCallback && !groupCallback) {
        return void 0;
      }
      var searchForColDefs = function(colDefs2) {
        colDefs2.forEach(function(abstractColDef) {
          var isGroup = exists(abstractColDef.children);
          if (isGroup) {
            var colGroupDef = abstractColDef;
            if (groupCallback) {
              groupCallback(colGroupDef);
            }
            searchForColDefs(colGroupDef.children);
          } else {
            var colDef = abstractColDef;
            if (columnCallback) {
              columnCallback(colDef);
            }
          }
        });
      };
      if (colDefs) {
        searchForColDefs(colDefs);
      }
    };
    ColumnModel2.prototype.updateGridColumns = function() {
      var _this = this;
      if (this.gridColsArePrimary) {
        this.lastPrimaryOrder = this.gridColumns;
      }
      if (this.secondaryColumns && this.secondaryBalancedTree) {
        this.gridBalancedTree = this.secondaryBalancedTree.slice();
        this.gridHeaderRowCount = this.secondaryHeaderRowCount;
        this.gridColumns = this.secondaryColumns.slice();
        this.gridColsArePrimary = false;
      } else {
        this.gridBalancedTree = this.primaryColumnTree.slice();
        this.gridHeaderRowCount = this.primaryHeaderRowCount;
        this.gridColumns = this.primaryColumns.slice();
        this.gridColsArePrimary = true;
        this.orderGridColsLikeLastPrimary();
      }
      this.addAutoGroupToGridColumns();
      this.gridColumns = this.putFixedColumnsFirst(this.gridColumns);
      this.setupQuickFilterColumns();
      this.clearDisplayedAndViewportColumns();
      this.colSpanActive = this.checkColSpanActiveInCols(this.gridColumns);
      this.gridColumnsMap = {};
      this.gridColumns.forEach(function(col) {
        return _this.gridColumnsMap[col.getId()] = col;
      });
      this.setAutoHeightActive();
      var event = {
        type: Events.EVENT_GRID_COLUMNS_CHANGED,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.eventService.dispatchEvent(event);
    };
    ColumnModel2.prototype.setAutoHeightActive = function() {
      this.autoHeightActive = this.gridColumns.filter(function(col) {
        return col.getColDef().autoHeight;
      }).length > 0;
      if (this.autoHeightActive) {
        this.autoHeightActiveAtLeastOnce = true;
        var rowModelType = this.rowModel.getType();
        var supportedRowModel = rowModelType === Constants.ROW_MODEL_TYPE_CLIENT_SIDE || rowModelType === Constants.ROW_MODEL_TYPE_SERVER_SIDE;
        if (!supportedRowModel) {
          var message_1 = "AG Grid - autoHeight columns only work with Client Side Row Model and Server Side Row Model.";
          doOnce(function() {
            return console.warn(message_1);
          }, "autoHeightActive.wrongRowModel");
        }
      }
    };
    ColumnModel2.prototype.orderGridColsLikeLastPrimary = function() {
      if (missing(this.lastPrimaryOrder)) {
        return;
      }
      var lastPrimaryOrderMapped = convertToMap(this.lastPrimaryOrder.map(function(col, index) {
        return [col, index];
      }));
      var noColsFound = true;
      this.gridColumns.forEach(function(col) {
        if (lastPrimaryOrderMapped.has(col)) {
          noColsFound = false;
        }
      });
      if (noColsFound) {
        return;
      }
      var gridColsMap = convertToMap(this.gridColumns.map(function(col) {
        return [col, true];
      }));
      var oldColsOrdered = this.lastPrimaryOrder.filter(function(col) {
        return gridColsMap.has(col);
      });
      var oldColsMap = convertToMap(oldColsOrdered.map(function(col) {
        return [col, true];
      }));
      var newColsOrdered = this.gridColumns.filter(function(col) {
        return !oldColsMap.has(col);
      });
      var newGridColumns = oldColsOrdered.slice();
      newColsOrdered.forEach(function(newCol) {
        var parent = newCol.getOriginalParent();
        if (!parent) {
          newGridColumns.push(newCol);
          return;
        }
        var siblings = [];
        while (!siblings.length && parent) {
          var leafCols = parent.getLeafColumns();
          leafCols.forEach(function(leafCol) {
            var presentInNewGriColumns = newGridColumns.indexOf(leafCol) >= 0;
            var noYetInSiblings = siblings.indexOf(leafCol) < 0;
            if (presentInNewGriColumns && noYetInSiblings) {
              siblings.push(leafCol);
            }
          });
          parent = parent.getOriginalParent();
        }
        if (!siblings.length) {
          newGridColumns.push(newCol);
          return;
        }
        var indexes = siblings.map(function(col) {
          return newGridColumns.indexOf(col);
        });
        var lastIndex = Math.max.apply(Math, indexes);
        insertIntoArray(newGridColumns, newCol, lastIndex + 1);
      });
      this.gridColumns = newGridColumns;
    };
    ColumnModel2.prototype.isPrimaryColumnGroupsPresent = function() {
      return this.primaryHeaderRowCount > 1;
    };
    ColumnModel2.prototype.setupQuickFilterColumns = function() {
      if (this.groupAutoColumns) {
        this.columnsForQuickFilter = this.primaryColumns.concat(this.groupAutoColumns);
      } else {
        this.columnsForQuickFilter = this.primaryColumns;
      }
    };
    ColumnModel2.prototype.putFixedColumnsFirst = function(cols) {
      var locked = cols.filter(function(c) {
        return c.getColDef().lockPosition;
      });
      var unlocked = cols.filter(function(c) {
        return !c.getColDef().lockPosition;
      });
      return locked.concat(unlocked);
    };
    ColumnModel2.prototype.addAutoGroupToGridColumns = function() {
      this.createGroupAutoColumnsIfNeeded();
      if (missing(this.groupAutoColumns)) {
        return;
      }
      this.gridColumns = this.groupAutoColumns ? this.groupAutoColumns.concat(this.gridColumns) : this.gridColumns;
      var autoColBalancedTree = this.columnFactory.createForAutoGroups(this.groupAutoColumns, this.gridBalancedTree);
      this.gridBalancedTree = autoColBalancedTree.concat(this.gridBalancedTree);
    };
    ColumnModel2.prototype.clearDisplayedAndViewportColumns = function() {
      this.displayedTreeLeft = [];
      this.displayedTreeRight = [];
      this.displayedTreeCentre = [];
      this.viewportRowLeft = {};
      this.viewportRowRight = {};
      this.viewportRowCenter = {};
      this.displayedColumnsLeft = [];
      this.displayedColumnsRight = [];
      this.displayedColumnsCenter = [];
      this.displayedColumns = [];
      this.viewportColumns = [];
    };
    ColumnModel2.prototype.updateGroupsAndDisplayedColumns = function(source) {
      this.updateOpenClosedVisibilityInColumnGroups();
      this.deriveDisplayedColumns(source);
      this.refreshFlexedColumns();
      this.extractViewport();
      this.updateBodyWidths();
      var event = {
        type: Events.EVENT_DISPLAYED_COLUMNS_CHANGED,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.eventService.dispatchEvent(event);
    };
    ColumnModel2.prototype.deriveDisplayedColumns = function(source) {
      this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft, this.displayedColumnsLeft);
      this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre, this.displayedColumnsCenter);
      this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight, this.displayedColumnsRight);
      this.joinDisplayedColumns();
      this.setLeftValues(source);
      this.displayedAutoHeightCols = this.displayedColumns.filter(function(col) {
        return col.getColDef().autoHeight;
      });
    };
    ColumnModel2.prototype.isAutoRowHeightActive = function() {
      return this.autoHeightActive;
    };
    ColumnModel2.prototype.wasAutoRowHeightEverActive = function() {
      return this.autoHeightActiveAtLeastOnce;
    };
    ColumnModel2.prototype.joinDisplayedColumns = function() {
      if (this.gridOptionsWrapper.isEnableRtl()) {
        this.displayedColumns = this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft);
      } else {
        this.displayedColumns = this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight);
      }
    };
    ColumnModel2.prototype.setLeftValues = function(source) {
      this.setLeftValuesOfColumns(source);
      this.setLeftValuesOfGroups();
    };
    ColumnModel2.prototype.setLeftValuesOfColumns = function(source) {
      var _this = this;
      var allColumns = this.primaryColumns.slice(0);
      var doingRtl = this.gridOptionsWrapper.isEnableRtl();
      [
        this.displayedColumnsLeft,
        this.displayedColumnsRight,
        this.displayedColumnsCenter
      ].forEach(function(columns) {
        if (doingRtl) {
          var left_1 = _this.getWidthOfColsInList(columns);
          columns.forEach(function(column) {
            left_1 -= column.getActualWidth();
            column.setLeft(left_1, source);
          });
        } else {
          var left_2 = 0;
          columns.forEach(function(column) {
            column.setLeft(left_2, source);
            left_2 += column.getActualWidth();
          });
        }
        removeAllFromArray(allColumns, columns);
      });
      allColumns.forEach(function(column) {
        column.setLeft(null, source);
      });
    };
    ColumnModel2.prototype.setLeftValuesOfGroups = function() {
      [
        this.displayedTreeLeft,
        this.displayedTreeRight,
        this.displayedTreeCentre
      ].forEach(function(columns) {
        columns.forEach(function(column) {
          if (column instanceof ColumnGroup) {
            var columnGroup = column;
            columnGroup.checkLeft();
          }
        });
      });
    };
    ColumnModel2.prototype.derivedDisplayedColumnsFromDisplayedTree = function(tree, columns) {
      columns.length = 0;
      this.columnUtils.depthFirstDisplayedColumnTreeSearch(tree, function(child) {
        if (child instanceof Column) {
          columns.push(child);
        }
      });
    };
    ColumnModel2.prototype.extractViewportColumns = function() {
      if (this.suppressColumnVirtualisation) {
        this.viewportColumnsCenter = this.displayedColumnsCenter;
      } else {
        this.viewportColumnsCenter = this.filterOutColumnsWithinViewport();
      }
      this.viewportColumns = this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight);
    };
    ColumnModel2.prototype.getVirtualHeaderGroupRow = function(type, dept) {
      var result;
      switch (type) {
        case Constants.PINNED_LEFT:
          result = this.viewportRowLeft[dept];
          break;
        case Constants.PINNED_RIGHT:
          result = this.viewportRowRight[dept];
          break;
        default:
          result = this.viewportRowCenter[dept];
          break;
      }
      if (missing(result)) {
        result = [];
      }
      return result;
    };
    ColumnModel2.prototype.extractViewportRows = function() {
      this.viewportRowLeft = {};
      this.viewportRowRight = {};
      this.viewportRowCenter = {};
      var virtualColIds = {};
      this.viewportColumns.forEach(function(col) {
        return virtualColIds[col.getId()] = true;
      });
      var testGroup = function(children2, result, dept) {
        var returnValue = false;
        for (var i2 = 0; i2 < children2.length; i2++) {
          var child = children2[i2];
          var addThisItem = false;
          if (child instanceof Column) {
            addThisItem = virtualColIds[child.getId()] === true;
          } else {
            var columnGroup = child;
            var displayedChildren = columnGroup.getDisplayedChildren();
            if (displayedChildren) {
              addThisItem = testGroup(displayedChildren, result, dept + 1);
            }
          }
          if (addThisItem) {
            returnValue = true;
            if (!result[dept]) {
              result[dept] = [];
            }
            result[dept].push(child);
          }
        }
        return returnValue;
      };
      testGroup(this.displayedTreeLeft, this.viewportRowLeft, 0);
      testGroup(this.displayedTreeRight, this.viewportRowRight, 0);
      testGroup(this.displayedTreeCentre, this.viewportRowCenter, 0);
    };
    ColumnModel2.prototype.extractViewport = function() {
      this.extractViewportColumns();
      this.extractViewportRows();
    };
    ColumnModel2.prototype.filterOutColumnsWithinViewport = function() {
      return this.displayedColumnsCenter.filter(this.isColumnInViewport.bind(this));
    };
    ColumnModel2.prototype.refreshFlexedColumns = function(params2) {
      var _this = this;
      if (params2 === void 0) {
        params2 = {};
      }
      var source = params2.source ? params2.source : "flex";
      if (params2.viewportWidth != null) {
        this.flexViewportWidth = params2.viewportWidth;
      }
      if (!this.flexViewportWidth) {
        return [];
      }
      var flexAfterDisplayIndex = -1;
      if (params2.resizingCols) {
        params2.resizingCols.forEach(function(col2) {
          var indexOfCol = _this.displayedColumnsCenter.indexOf(col2);
          if (flexAfterDisplayIndex < indexOfCol) {
            flexAfterDisplayIndex = indexOfCol;
          }
        });
      }
      var isColFlex = function(col2) {
        var afterResizingCols = _this.displayedColumnsCenter.indexOf(col2) > flexAfterDisplayIndex;
        return col2.getFlex() && afterResizingCols;
      };
      var knownWidthColumns = this.displayedColumnsCenter.filter(function(col2) {
        return !isColFlex(col2);
      });
      var flexingColumns = this.displayedColumnsCenter.filter(function(col2) {
        return isColFlex(col2);
      });
      var changedColumns = [];
      if (!flexingColumns.length) {
        return [];
      }
      var flexingColumnSizes = [];
      var spaceForFlexingColumns;
      outer:
        while (true) {
          var totalFlex = flexingColumns.reduce(function(count, col2) {
            return count + col2.getFlex();
          }, 0);
          spaceForFlexingColumns = this.flexViewportWidth - this.getWidthOfColsInList(knownWidthColumns);
          for (var i2 = 0; i2 < flexingColumns.length; i2++) {
            var col = flexingColumns[i2];
            var widthByFlexRule = spaceForFlexingColumns * col.getFlex() / totalFlex;
            var constrainedWidth = 0;
            var minWidth = col.getMinWidth();
            var maxWidth = col.getMaxWidth();
            if (exists(minWidth) && widthByFlexRule < minWidth) {
              constrainedWidth = minWidth;
            } else if (exists(maxWidth) && widthByFlexRule > maxWidth) {
              constrainedWidth = maxWidth;
            }
            if (constrainedWidth) {
              col.setActualWidth(constrainedWidth, source);
              removeFromArray(flexingColumns, col);
              changedColumns.push(col);
              knownWidthColumns.push(col);
              continue outer;
            }
            flexingColumnSizes[i2] = Math.round(widthByFlexRule);
          }
          break;
        }
      var remainingSpace = spaceForFlexingColumns;
      flexingColumns.forEach(function(col2, i3) {
        col2.setActualWidth(Math.min(flexingColumnSizes[i3], remainingSpace), source);
        changedColumns.push(col2);
        remainingSpace -= flexingColumnSizes[i3];
      });
      if (!params2.skipSetLeft) {
        this.setLeftValues(source);
      }
      if (params2.updateBodyWidths) {
        this.updateBodyWidths();
      }
      if (params2.fireResizedEvent) {
        this.fireColumnResizedEvent(changedColumns, true, source, flexingColumns);
      }
      if (!this.flexColsCalculatedAtLestOnce) {
        if (this.gridOptionsWrapper.isRowModelDefault()) {
          this.rowModel.resetRowHeights();
        }
        this.flexColsCalculatedAtLestOnce = true;
      }
      return flexingColumns;
    };
    ColumnModel2.prototype.sizeColumnsToFit = function(gridWidth, source, silent) {
      if (source === void 0) {
        source = "sizeColumnsToFit";
      }
      var allDisplayedColumns = this.getAllDisplayedColumns();
      if (gridWidth <= 0 || !allDisplayedColumns.length) {
        return;
      }
      var colsToSpread = [];
      var colsToNotSpread = [];
      allDisplayedColumns.forEach(function(column2) {
        if (column2.getColDef().suppressSizeToFit === true) {
          colsToNotSpread.push(column2);
        } else {
          colsToSpread.push(column2);
        }
      });
      var colsToFireEventFor = colsToSpread.slice(0);
      var finishedResizing = false;
      var moveToNotSpread = function(column2) {
        removeFromArray(colsToSpread, column2);
        colsToNotSpread.push(column2);
      };
      colsToSpread.forEach(function(column2) {
        return column2.resetActualWidth(source);
      });
      while (!finishedResizing) {
        finishedResizing = true;
        var availablePixels = gridWidth - this.getWidthOfColsInList(colsToNotSpread);
        if (availablePixels <= 0) {
          colsToSpread.forEach(function(column2) {
            column2.setMinimum(source);
          });
        } else {
          var scale = availablePixels / this.getWidthOfColsInList(colsToSpread);
          var pixelsForLastCol = availablePixels;
          for (var i2 = colsToSpread.length - 1; i2 >= 0; i2--) {
            var column = colsToSpread[i2];
            var minWidth = column.getMinWidth();
            var maxWidth = column.getMaxWidth();
            var newWidth = Math.round(column.getActualWidth() * scale);
            if (exists(minWidth) && newWidth < minWidth) {
              newWidth = minWidth;
              moveToNotSpread(column);
              finishedResizing = false;
            } else if (exists(maxWidth) && column.isGreaterThanMax(newWidth)) {
              newWidth = maxWidth;
              moveToNotSpread(column);
              finishedResizing = false;
            } else if (i2 === 0) {
              newWidth = pixelsForLastCol;
            }
            column.setActualWidth(newWidth, source, true);
            pixelsForLastCol -= newWidth;
          }
        }
      }
      colsToFireEventFor.forEach(function(col) {
        col.fireColumnWidthChangedEvent(source);
      });
      this.setLeftValues(source);
      this.updateBodyWidths();
      if (silent) {
        return;
      }
      this.fireColumnResizedEvent(colsToFireEventFor, true, source);
    };
    ColumnModel2.prototype.buildDisplayedTrees = function(visibleColumns) {
      var leftVisibleColumns = [];
      var rightVisibleColumns = [];
      var centerVisibleColumns = [];
      visibleColumns.forEach(function(column) {
        switch (column.getPinned()) {
          case "left":
            leftVisibleColumns.push(column);
            break;
          case "right":
            rightVisibleColumns.push(column);
            break;
          default:
            centerVisibleColumns.push(column);
            break;
        }
      });
      var groupInstanceIdCreator = new GroupInstanceIdCreator();
      this.displayedTreeLeft = this.displayedGroupCreator.createDisplayedGroups(leftVisibleColumns, this.gridBalancedTree, groupInstanceIdCreator, Constants.PINNED_LEFT, this.displayedTreeLeft);
      this.displayedTreeRight = this.displayedGroupCreator.createDisplayedGroups(rightVisibleColumns, this.gridBalancedTree, groupInstanceIdCreator, Constants.PINNED_RIGHT, this.displayedTreeRight);
      this.displayedTreeCentre = this.displayedGroupCreator.createDisplayedGroups(centerVisibleColumns, this.gridBalancedTree, groupInstanceIdCreator, null, this.displayedTreeCentre);
      this.updateDisplayedMap();
    };
    ColumnModel2.prototype.updateDisplayedMap = function() {
      var _this = this;
      this.displayedColumnsAndGroupsMap = {};
      var func = function(child) {
        _this.displayedColumnsAndGroupsMap[child.getUniqueId()] = child;
      };
      this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre, func);
      this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft, func);
      this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight, func);
    };
    ColumnModel2.prototype.isDisplayed = function(item) {
      var fromMap = this.displayedColumnsAndGroupsMap[item.getUniqueId()];
      return fromMap === item;
    };
    ColumnModel2.prototype.updateOpenClosedVisibilityInColumnGroups = function() {
      var allColumnGroups = this.getAllDisplayedTrees();
      this.columnUtils.depthFirstAllColumnTreeSearch(allColumnGroups, function(child) {
        if (child instanceof ColumnGroup) {
          var columnGroup = child;
          columnGroup.calculateDisplayedColumns();
        }
      });
    };
    ColumnModel2.prototype.getGroupAutoColumns = function() {
      return this.groupAutoColumns;
    };
    ColumnModel2.prototype.createGroupAutoColumnsIfNeeded = function() {
      if (!this.autoGroupsNeedBuilding) {
        return;
      }
      this.autoGroupsNeedBuilding = false;
      var groupFullWidthRow = this.gridOptionsWrapper.isGroupUseEntireRow(this.pivotMode);
      var suppressAutoColumn = this.pivotMode ? this.gridOptionsWrapper.isPivotSuppressAutoColumn() : this.gridOptionsWrapper.isGroupSuppressAutoColumn();
      var groupingActive = this.rowGroupColumns.length > 0 || this.usingTreeData;
      var needAutoColumns = groupingActive && !suppressAutoColumn && !groupFullWidthRow;
      if (needAutoColumns) {
        var newAutoGroupCols = this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);
        var autoColsDifferent = !this.autoColsEqual(newAutoGroupCols, this.groupAutoColumns);
        if (autoColsDifferent || this.forceRecreateAutoGroups) {
          this.groupAutoColumns = newAutoGroupCols;
        }
      } else {
        this.groupAutoColumns = null;
      }
    };
    ColumnModel2.prototype.autoColsEqual = function(colsA, colsB) {
      return areEqual(colsA, colsB, function(a, b) {
        return a.getColId() === b.getColId();
      });
    };
    ColumnModel2.prototype.getWidthOfColsInList = function(columnList) {
      return columnList.reduce(function(width, col) {
        return width + col.getActualWidth();
      }, 0);
    };
    ColumnModel2.prototype.getGridBalancedTree = function() {
      return this.gridBalancedTree;
    };
    ColumnModel2.prototype.hasFloatingFilters = function() {
      if (!this.gridColumns) {
        return false;
      }
      var res = this.gridColumns.some(function(col) {
        return col.getColDef().floatingFilter;
      });
      return res;
    };
    ColumnModel2.prototype.getFirstDisplayedColumn = function() {
      var isRtl = this.gridOptionsWrapper.isEnableRtl();
      var queryOrder = [
        "getDisplayedLeftColumns",
        "getDisplayedCenterColumns",
        "getDisplayedRightColumns"
      ];
      if (isRtl) {
        queryOrder.reverse();
      }
      for (var i2 = 0; i2 < queryOrder.length; i2++) {
        var container = this[queryOrder[i2]]();
        if (container.length) {
          return isRtl ? last(container) : container[0];
        }
      }
      return null;
    };
    __decorate$5([
      Autowired("expressionService")
    ], ColumnModel2.prototype, "expressionService", void 0);
    __decorate$5([
      Autowired("columnFactory")
    ], ColumnModel2.prototype, "columnFactory", void 0);
    __decorate$5([
      Autowired("displayedGroupCreator")
    ], ColumnModel2.prototype, "displayedGroupCreator", void 0);
    __decorate$5([
      Autowired("autoWidthCalculator")
    ], ColumnModel2.prototype, "autoWidthCalculator", void 0);
    __decorate$5([
      Autowired("columnUtils")
    ], ColumnModel2.prototype, "columnUtils", void 0);
    __decorate$5([
      Autowired("columnAnimationService")
    ], ColumnModel2.prototype, "columnAnimationService", void 0);
    __decorate$5([
      Autowired("autoGroupColService")
    ], ColumnModel2.prototype, "autoGroupColService", void 0);
    __decorate$5([
      Optional("aggFuncService")
    ], ColumnModel2.prototype, "aggFuncService", void 0);
    __decorate$5([
      Optional("valueCache")
    ], ColumnModel2.prototype, "valueCache", void 0);
    __decorate$5([
      Optional("animationFrameService")
    ], ColumnModel2.prototype, "animationFrameService", void 0);
    __decorate$5([
      Autowired("rowModel")
    ], ColumnModel2.prototype, "rowModel", void 0);
    __decorate$5([
      Autowired("columnApi")
    ], ColumnModel2.prototype, "columnApi", void 0);
    __decorate$5([
      Autowired("gridApi")
    ], ColumnModel2.prototype, "gridApi", void 0);
    __decorate$5([
      Autowired("sortController")
    ], ColumnModel2.prototype, "sortController", void 0);
    __decorate$5([
      Autowired("columnDefFactory")
    ], ColumnModel2.prototype, "columnDefFactory", void 0);
    __decorate$5([
      PostConstruct
    ], ColumnModel2.prototype, "init", null);
    __decorate$5([
      __param$2(0, Qualifier("loggerFactory"))
    ], ColumnModel2.prototype, "setBeans", null);
    ColumnModel2 = __decorate$5([
      Bean("columnModel")
    ], ColumnModel2);
    return ColumnModel2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function padStartWidthZeros(value, totalStringSize) {
    return padStart(value.toString(), totalStringSize, "0");
  }
  function createArrayOfNumbers(first, last2) {
    var result = [];
    for (var i2 = first; i2 <= last2; i2++) {
      result.push(i2);
    }
    return result;
  }
  function isNumeric(value) {
    return value !== "" && !isNaN(parseFloat(value)) && isFinite(value);
  }
  function getMaxSafeInteger() {
    return Number.MAX_SAFE_INTEGER || 9007199254740991;
  }
  function cleanNumber(value) {
    if (typeof value === "string") {
      value = parseInt(value, 10);
    }
    if (typeof value === "number") {
      return Math.floor(value);
    }
    return null;
  }
  function decToHex(number, bytes) {
    var hex = "";
    for (var i2 = 0; i2 < bytes; i2++) {
      hex += String.fromCharCode(number & 255);
      number >>>= 8;
    }
    return hex;
  }
  function formatNumberTwoDecimalPlacesAndCommas(value) {
    if (typeof value !== "number") {
      return "";
    }
    return formatNumberCommas(Math.round(value * 100) / 100);
  }
  function formatNumberCommas(value) {
    if (typeof value !== "number") {
      return "";
    }
    return value.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,");
  }
  function sum(values2) {
    return values2 == null ? null : values2.reduce(function(total, value) {
      return total + value;
    }, 0);
  }
  var NumberUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    padStartWidthZeros,
    createArrayOfNumbers,
    isNumeric,
    getMaxSafeInteger,
    cleanNumber,
    decToHex,
    formatNumberTwoDecimalPlacesAndCommas,
    formatNumberCommas,
    sum
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$6 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ColumnUtils = function(_super) {
    __extends$2(ColumnUtils2, _super);
    function ColumnUtils2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnUtils2.prototype.calculateColInitialWidth = function(colDef) {
      var optionsWrapper = this.gridOptionsWrapper;
      var minColWidth = colDef.minWidth != null ? colDef.minWidth : optionsWrapper.getMinColWidth();
      var maxColWidth = colDef.maxWidth != null ? colDef.maxWidth : optionsWrapper.getMaxColWidth() || getMaxSafeInteger();
      var width;
      var colDefWidth = attrToNumber(colDef.width);
      var colDefInitialWidth = attrToNumber(colDef.initialWidth);
      if (colDefWidth != null) {
        width = colDefWidth;
      } else if (colDefInitialWidth != null) {
        width = colDefInitialWidth;
      } else {
        width = optionsWrapper.getColWidth();
      }
      return Math.max(Math.min(width, maxColWidth), minColWidth);
    };
    ColumnUtils2.prototype.getOriginalPathForColumn = function(column, originalBalancedTree) {
      var result = [];
      var found = false;
      var recursePath = function(balancedColumnTree, dept) {
        for (var i2 = 0; i2 < balancedColumnTree.length; i2++) {
          if (found) {
            return;
          }
          var node = balancedColumnTree[i2];
          if (node instanceof ProvidedColumnGroup) {
            var nextNode = node;
            recursePath(nextNode.getChildren(), dept + 1);
            result[dept] = node;
          } else if (node === column) {
            found = true;
          }
        }
      };
      recursePath(originalBalancedTree, 0);
      return found ? result : null;
    };
    ColumnUtils2.prototype.depthFirstOriginalTreeSearch = function(parent, tree, callback) {
      var _this = this;
      if (!tree) {
        return;
      }
      tree.forEach(function(child) {
        if (child instanceof ProvidedColumnGroup) {
          _this.depthFirstOriginalTreeSearch(child, child.getChildren(), callback);
        }
        callback(child, parent);
      });
    };
    ColumnUtils2.prototype.depthFirstAllColumnTreeSearch = function(tree, callback) {
      var _this = this;
      if (!tree) {
        return;
      }
      tree.forEach(function(child) {
        if (child instanceof ColumnGroup) {
          _this.depthFirstAllColumnTreeSearch(child.getChildren(), callback);
        }
        callback(child);
      });
    };
    ColumnUtils2.prototype.depthFirstDisplayedColumnTreeSearch = function(tree, callback) {
      var _this = this;
      if (!tree) {
        return;
      }
      tree.forEach(function(child) {
        if (child instanceof ColumnGroup) {
          _this.depthFirstDisplayedColumnTreeSearch(child.getDisplayedChildren(), callback);
        }
        callback(child);
      });
    };
    ColumnUtils2 = __decorate$6([
      Bean("columnUtils")
    ], ColumnUtils2);
    return ColumnUtils2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$3 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$7 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var DisplayedGroupCreator = function(_super) {
    __extends$3(DisplayedGroupCreator2, _super);
    function DisplayedGroupCreator2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    DisplayedGroupCreator2.prototype.createDisplayedGroups = function(sortedVisibleColumns, balancedColumnTree, groupInstanceIdCreator, pinned, oldDisplayedGroups) {
      var _this = this;
      var result = [];
      var previousRealPath;
      var previousOriginalPath;
      var oldColumnsMapped = this.mapOldGroupsById(oldDisplayedGroups);
      sortedVisibleColumns.forEach(function(currentColumn) {
        var currentOriginalPath = _this.getOriginalPathForColumn(balancedColumnTree, currentColumn);
        var currentRealPath = [];
        var firstColumn = !previousOriginalPath;
        for (var i2 = 0; i2 < currentOriginalPath.length; i2++) {
          if (firstColumn || currentOriginalPath[i2] !== previousOriginalPath[i2]) {
            var newGroup = _this.createColumnGroup(currentOriginalPath[i2], groupInstanceIdCreator, oldColumnsMapped, pinned);
            currentRealPath[i2] = newGroup;
            if (i2 == 0) {
              result.push(newGroup);
            } else {
              currentRealPath[i2 - 1].addChild(newGroup);
            }
          } else {
            currentRealPath[i2] = previousRealPath[i2];
          }
        }
        var noColumnGroups = currentRealPath.length === 0;
        if (noColumnGroups) {
          result.push(currentColumn);
        } else {
          var leafGroup = last(currentRealPath);
          leafGroup.addChild(currentColumn);
        }
        previousRealPath = currentRealPath;
        previousOriginalPath = currentOriginalPath;
      });
      this.setupParentsIntoColumns(result, null);
      return result;
    };
    DisplayedGroupCreator2.prototype.createColumnGroup = function(originalGroup, groupInstanceIdCreator, oldColumnsMapped, pinned) {
      var groupId = originalGroup.getGroupId();
      var instanceId = groupInstanceIdCreator.getInstanceIdForKey(groupId);
      var uniqueId = ColumnGroup.createUniqueId(groupId, instanceId);
      var columnGroup = oldColumnsMapped[uniqueId];
      if (columnGroup && columnGroup.getOriginalColumnGroup() !== originalGroup) {
        columnGroup = null;
      }
      if (exists(columnGroup)) {
        columnGroup.reset();
      } else {
        columnGroup = new ColumnGroup(originalGroup, groupId, instanceId, pinned);
        this.context.createBean(columnGroup);
      }
      return columnGroup;
    };
    DisplayedGroupCreator2.prototype.mapOldGroupsById = function(displayedGroups) {
      var result = {};
      var recursive = function(columnsOrGroups) {
        columnsOrGroups.forEach(function(columnOrGroup) {
          if (columnOrGroup instanceof ColumnGroup) {
            var columnGroup = columnOrGroup;
            result[columnOrGroup.getUniqueId()] = columnGroup;
            recursive(columnGroup.getChildren());
          }
        });
      };
      if (displayedGroups) {
        recursive(displayedGroups);
      }
      return result;
    };
    DisplayedGroupCreator2.prototype.setupParentsIntoColumns = function(columnsOrGroups, parent) {
      var _this = this;
      columnsOrGroups.forEach(function(columnsOrGroup) {
        columnsOrGroup.setParent(parent);
        if (columnsOrGroup instanceof ColumnGroup) {
          var columnGroup = columnsOrGroup;
          _this.setupParentsIntoColumns(columnGroup.getChildren(), columnGroup);
        }
      });
    };
    DisplayedGroupCreator2.prototype.getOriginalPathForColumn = function(balancedColumnTree, column) {
      var result = [];
      var found = false;
      var recursePath = function(columnTree, dept) {
        for (var i2 = 0; i2 < columnTree.length; i2++) {
          if (found) {
            return;
          }
          var node = columnTree[i2];
          if (node instanceof ProvidedColumnGroup) {
            var nextNode = node;
            recursePath(nextNode.getChildren(), dept + 1);
            result[dept] = node;
          } else if (node === column) {
            found = true;
          }
        }
      };
      recursePath(balancedColumnTree, 0);
      if (found) {
        return result;
      }
      console.warn("could not get path");
      return null;
    };
    DisplayedGroupCreator2 = __decorate$7([
      Bean("displayedGroupCreator")
    ], DisplayedGroupCreator2);
    return DisplayedGroupCreator2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __spreadArrays$1 = function() {
    for (var s = 0, i2 = 0, il = arguments.length; i2 < il; i2++)
      s += arguments[i2].length;
    for (var r = Array(s), k = 0, i2 = 0; i2 < il; i2++)
      for (var a = arguments[i2], j = 0, jl = a.length; j < jl; j++, k++)
        r[k] = a[j];
    return r;
  };
  var PropertyKeys = function() {
    function PropertyKeys2() {
    }
    PropertyKeys2.STRING_PROPERTIES = [
      "sortingOrder",
      "rowClass",
      "rowSelection",
      "overlayLoadingTemplate",
      "overlayNoRowsTemplate",
      "quickFilterText",
      "rowModelType",
      "editType",
      "domLayout",
      "clipboardDeliminator",
      "rowGroupPanelShow",
      "multiSortKey",
      "pivotColumnGroupTotals",
      "pivotRowTotals",
      "pivotPanelShow",
      "fillHandleDirection",
      "serverSideStoreType",
      "groupDisplayType",
      "treeDataDisplayType"
    ];
    PropertyKeys2.OBJECT_PROPERTIES = [
      "components",
      "frameworkComponents",
      "rowStyle",
      "context",
      "autoGroupColumnDef",
      "localeText",
      "icons",
      "datasource",
      "serverSideDatasource",
      "viewportDatasource",
      "groupRowRendererParams",
      "aggFuncs",
      "fullWidthCellRendererParams",
      "defaultColGroupDef",
      "defaultColDef",
      "defaultExportParams",
      "defaultCsvExportParams",
      "defaultExcelExportParams",
      "columnTypes",
      "rowClassRules",
      "detailCellRendererParams",
      "loadingCellRendererParams",
      "loadingOverlayComponentParams",
      "noRowsOverlayComponentParams",
      "popupParent",
      "colResizeDefault",
      "statusBar",
      "sideBar",
      "chartThemeOverrides",
      "customChartThemes"
    ];
    PropertyKeys2.ARRAY_PROPERTIES = [
      "alignedGrids",
      "rowData",
      "columnDefs",
      "excelStyles",
      "pinnedTopRowData",
      "pinnedBottomRowData",
      "chartThemes"
    ];
    PropertyKeys2.NUMBER_PROPERTIES = [
      "rowHeight",
      "detailRowHeight",
      "rowBuffer",
      "colWidth",
      "headerHeight",
      "groupHeaderHeight",
      "floatingFiltersHeight",
      "pivotHeaderHeight",
      "pivotGroupHeaderHeight",
      "groupDefaultExpanded",
      "minColWidth",
      "maxColWidth",
      "viewportRowModelPageSize",
      "viewportRowModelBufferSize",
      "autoSizePadding",
      "maxBlocksInCache",
      "maxConcurrentDatasourceRequests",
      "tooltipShowDelay",
      "cacheOverflowSize",
      "paginationPageSize",
      "cacheBlockSize",
      "infiniteInitialRowCount",
      "scrollbarWidth",
      "batchUpdateWaitMillis",
      "asyncTransactionWaitMillis",
      "blockLoadDebounceMillis",
      "keepDetailRowsCount",
      "undoRedoCellEditingLimit",
      "cellFlashDelay",
      "cellFadeDelay",
      "tabIndex"
    ];
    PropertyKeys2.BOOLEAN_PROPERTIES = [
      "suppressMakeColumnVisibleAfterUnGroup",
      "suppressRowClickSelection",
      "suppressCellSelection",
      "suppressHorizontalScroll",
      "alwaysShowHorizontalScroll",
      "alwaysShowVerticalScroll",
      "debug",
      "enableBrowserTooltips",
      "enableCellExpressions",
      "angularCompileRows",
      "angularCompileFilters",
      "groupSuppressAutoColumn",
      "groupSelectsChildren",
      "groupIncludeFooter",
      "groupIncludeTotalFooter",
      "groupUseEntireRow",
      "groupSuppressBlankHeader",
      "suppressMenuHide",
      "suppressRowDeselection",
      "unSortIcon",
      "suppressMultiSort",
      "singleClickEdit",
      "suppressLoadingOverlay",
      "suppressNoRowsOverlay",
      "suppressAutoSize",
      "skipHeaderOnAutoSize",
      "suppressParentsInRowNodes",
      "suppressColumnMoveAnimation",
      "suppressMovableColumns",
      "suppressFieldDotNotation",
      "enableRangeSelection",
      "enableRangeHandle",
      "enableFillHandle",
      "suppressClearOnFillReduction",
      "deltaSort",
      "suppressTouch",
      "suppressAsyncEvents",
      "allowContextMenuWithControlKey",
      "suppressContextMenu",
      "rememberGroupStateWhenNewData",
      "enableCellChangeFlash",
      "suppressDragLeaveHidesColumns",
      "suppressMiddleClickScrolls",
      "suppressPreventDefaultOnMouseWheel",
      "suppressCopyRowsToClipboard",
      "copyHeadersToClipboard",
      "pivotMode",
      "suppressAggFuncInHeader",
      "suppressColumnVirtualisation",
      "suppressAggAtRootLevel",
      "suppressFocusAfterRefresh",
      "functionsPassive",
      "functionsReadOnly",
      "animateRows",
      "groupSelectsFiltered",
      "groupRemoveSingleChildren",
      "groupRemoveLowestSingleChildren",
      "enableRtl",
      "suppressClickEdit",
      "rowDragEntireRow",
      "rowDragManaged",
      "suppressRowDrag",
      "suppressMoveWhenRowDragging",
      "rowDragMultiRow",
      "enableGroupEdit",
      "embedFullWidthRows",
      "deprecatedEmbedFullWidthRows",
      "suppressPaginationPanel",
      "floatingFilter",
      "groupHideOpenParents",
      "groupMultiAutoColumn",
      "pagination",
      "stopEditingWhenGridLosesFocus",
      "paginationAutoPageSize",
      "suppressScrollOnNewData",
      "suppressScrollWhenPopupsAreOpen",
      "purgeClosedRowNodes",
      "cacheQuickFilter",
      "deltaRowDataMode",
      "ensureDomOrder",
      "accentedSort",
      "suppressChangeDetection",
      "valueCache",
      "valueCacheNeverExpires",
      "aggregateOnlyChangedColumns",
      "suppressAnimationFrame",
      "suppressExcelExport",
      "suppressCsvExport",
      "treeData",
      "masterDetail",
      "suppressMultiRangeSelection",
      "enterMovesDownAfterEdit",
      "enterMovesDown",
      "suppressPropertyNamesCheck",
      "rowMultiSelectWithClick",
      "suppressEnterpriseResetOnNewColumns",
      "enableOldSetFilterModel",
      "suppressRowHoverHighlight",
      "suppressRowTransform",
      "suppressClipboardPaste",
      "suppressLastEmptyLineOnPaste",
      "serverSideSortingAlwaysResets",
      "suppressSetColumnStateEvents",
      "suppressColumnStateEvents",
      "enableCharts",
      "deltaColumnMode",
      "suppressMaintainUnsortedOrder",
      "enableCellTextSelection",
      "suppressBrowserResizeObserver",
      "suppressMaxRenderedRowRestriction",
      "excludeChildrenWhenTreeDataFiltering",
      "tooltipMouseTrack",
      "keepDetailRows",
      "paginateChildRows",
      "preventDefaultOnContextMenu",
      "undoRedoCellEditing",
      "allowDragFromColumnsToolPanel",
      "immutableData",
      "immutableColumns",
      "pivotSuppressAutoColumn",
      "suppressExpandablePivotGroups",
      "applyColumnDefOrder",
      "debounceVerticalScrollbar",
      "detailRowAutoHeight",
      "serverSideFilteringAlwaysResets",
      "suppressAggFilteredOnly",
      "showOpenedGroup",
      "suppressClipboardApi",
      "suppressModelUpdateAfterUpdateTransaction",
      "stopEditingWhenCellsLoseFocus",
      "maintainColumnOrder",
      "groupMaintainOrder",
      "columnHoverHighlight",
      "allowProcessChartOptions"
    ];
    PropertyKeys2.FUNCTION_PROPERTIES = [
      "localeTextFunc",
      "groupRowInnerRenderer",
      "groupRowInnerRendererFramework",
      "groupRowRenderer",
      "groupRowRendererFramework",
      "isExternalFilterPresent",
      "getRowHeight",
      "doesExternalFilterPass",
      "getRowClass",
      "getRowStyle",
      "getContextMenuItems",
      "getMainMenuItems",
      "processRowPostCreate",
      "processCellForClipboard",
      "groupRowAggNodes",
      "getRowNodeId",
      "isFullWidthCell",
      "fullWidthCellRenderer",
      "fullWidthCellRendererFramework",
      "processSecondaryColDef",
      "processSecondaryColGroupDef",
      "getBusinessKeyForNode",
      "sendToClipboard",
      "navigateToNextHeader",
      "tabToNextHeader",
      "navigateToNextCell",
      "tabToNextCell",
      "processCellFromClipboard",
      "getDocument",
      "postProcessPopup",
      "getChildCount",
      "getDataPath",
      "loadingCellRenderer",
      "loadingCellRendererFramework",
      "loadingOverlayComponent",
      "loadingOverlayComponentFramework",
      "noRowsOverlayComponent",
      "noRowsOverlayComponentFramework",
      "detailCellRenderer",
      "detailCellRendererFramework",
      "isRowMaster",
      "isRowSelectable",
      "postSort",
      "processHeaderForClipboard",
      "paginationNumberFormatter",
      "processDataFromClipboard",
      "getServerSideGroupKey",
      "isServerSideGroup",
      "suppressKeyboardEvent",
      "createChartContainer",
      "processChartOptions",
      "getChartToolbarItems",
      "fillOperation",
      "isApplyServerSideTransaction",
      "getServerSideStoreParams",
      "isServerSideGroupOpenByDefault",
      "isGroupOpenByDefault",
      "defaultGroupSortComparator",
      "defaultGroupOrderComparator",
      "loadingCellRendererSelector"
    ];
    PropertyKeys2.ALL_PROPERTIES = __spreadArrays$1(PropertyKeys2.ARRAY_PROPERTIES, PropertyKeys2.OBJECT_PROPERTIES, PropertyKeys2.STRING_PROPERTIES, PropertyKeys2.NUMBER_PROPERTIES, PropertyKeys2.FUNCTION_PROPERTIES, PropertyKeys2.BOOLEAN_PROPERTIES);
    PropertyKeys2.FRAMEWORK_PROPERTIES = [
      "__ob__",
      "__v_skip",
      "__metadata__",
      "mappedColumnProperties",
      "hasChildColumns",
      "toColDef",
      "createColDefFromGridColumn"
    ];
    return PropertyKeys2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __assign = function() {
    __assign = Object.assign || function(t) {
      for (var s, i2 = 1, n = arguments.length; i2 < n; i2++) {
        s = arguments[i2];
        for (var p2 in s)
          if (Object.prototype.hasOwnProperty.call(s, p2))
            t[p2] = s[p2];
      }
      return t;
    };
    return __assign.apply(this, arguments);
  };
  var __spreadArrays$2 = function() {
    for (var s = 0, i2 = 0, il = arguments.length; i2 < il; i2++)
      s += arguments[i2].length;
    for (var r = Array(s), k = 0, i2 = 0; i2 < il; i2++)
      for (var a = arguments[i2], j = 0, jl = a.length; j < jl; j++, k++)
        r[k] = a[j];
    return r;
  };
  var ComponentUtil = function() {
    function ComponentUtil2() {
    }
    ComponentUtil2.getEventCallbacks = function() {
      if (!ComponentUtil2.EVENT_CALLBACKS) {
        ComponentUtil2.EVENT_CALLBACKS = ComponentUtil2.EVENTS.map(function(event) {
          return ComponentUtil2.getCallbackForEvent(event);
        });
      }
      return ComponentUtil2.EVENT_CALLBACKS;
    };
    ComponentUtil2.copyAttributesToGridOptions = function(gridOptions, component, skipEventDeprecationCheck) {
      if (typeof gridOptions !== "object") {
        gridOptions = {};
      }
      var pGridOptions = gridOptions;
      var keyExists = function(key) {
        return typeof component[key] !== "undefined";
      };
      __spreadArrays$2(ComponentUtil2.ARRAY_PROPERTIES, ComponentUtil2.STRING_PROPERTIES, ComponentUtil2.OBJECT_PROPERTIES, ComponentUtil2.FUNCTION_PROPERTIES, ComponentUtil2.getEventCallbacks()).filter(keyExists).forEach(function(key) {
        return pGridOptions[key] = component[key];
      });
      ComponentUtil2.BOOLEAN_PROPERTIES.filter(keyExists).forEach(function(key) {
        return pGridOptions[key] = ComponentUtil2.toBoolean(component[key]);
      });
      ComponentUtil2.NUMBER_PROPERTIES.filter(keyExists).forEach(function(key) {
        return pGridOptions[key] = ComponentUtil2.toNumber(component[key]);
      });
      return gridOptions;
    };
    ComponentUtil2.getCallbackForEvent = function(eventName) {
      if (!eventName || eventName.length < 2) {
        return eventName;
      }
      return "on" + eventName[0].toUpperCase() + eventName.substr(1);
    };
    ComponentUtil2.processOnChange = function(changes, gridOptions, api2, columnApi) {
      if (!changes) {
        return;
      }
      var changesToApply = __assign({}, changes);
      var pGridOptions = gridOptions;
      var keyExists = function(key) {
        return changesToApply[key];
      };
      __spreadArrays$2(ComponentUtil2.ARRAY_PROPERTIES, ComponentUtil2.OBJECT_PROPERTIES, ComponentUtil2.STRING_PROPERTIES, ComponentUtil2.getEventCallbacks()).filter(keyExists).forEach(function(key) {
        return pGridOptions[key] = changesToApply[key].currentValue;
      });
      ComponentUtil2.BOOLEAN_PROPERTIES.filter(keyExists).forEach(function(key) {
        return pGridOptions[key] = ComponentUtil2.toBoolean(changesToApply[key].currentValue);
      });
      ComponentUtil2.NUMBER_PROPERTIES.filter(keyExists).forEach(function(key) {
        return pGridOptions[key] = ComponentUtil2.toNumber(changesToApply[key].currentValue);
      });
      if (changesToApply.enableCellTextSelection) {
        api2.setEnableCellTextSelection(ComponentUtil2.toBoolean(changesToApply.enableCellTextSelection.currentValue));
        delete changesToApply.enableCellTextSelection;
      }
      if (changesToApply.quickFilterText) {
        api2.setQuickFilter(changesToApply.quickFilterText.currentValue);
        delete changesToApply.quickFilterText;
      }
      if (changesToApply.autoGroupColumnDef) {
        api2.setAutoGroupColumnDef(changesToApply.autoGroupColumnDef.currentValue, "gridOptionsChanged");
        delete changesToApply.autoGroupColumnDef;
      }
      if (changesToApply.columnDefs) {
        api2.setColumnDefs(changesToApply.columnDefs.currentValue, "gridOptionsChanged");
        delete changesToApply.columnDefs;
      }
      if (changesToApply.paginationPageSize) {
        api2.paginationSetPageSize(ComponentUtil2.toNumber(changesToApply.paginationPageSize.currentValue));
        delete changesToApply.paginationPageSize;
      }
      if (changesToApply.pivotMode) {
        columnApi.setPivotMode(ComponentUtil2.toBoolean(changesToApply.pivotMode.currentValue));
        delete changesToApply.pivotMode;
      }
      if (changesToApply.groupRemoveSingleChildren) {
        api2.setGroupRemoveSingleChildren(ComponentUtil2.toBoolean(changesToApply.groupRemoveSingleChildren.currentValue));
        delete changesToApply.groupRemoveSingleChildren;
      }
      if (changesToApply.suppressRowDrag) {
        api2.setSuppressRowDrag(ComponentUtil2.toBoolean(changesToApply.suppressRowDrag.currentValue));
        delete changesToApply.suppressRowDrag;
      }
      if (changesToApply.suppressMoveWhenRowDragging) {
        api2.setSuppressMoveWhenRowDragging(ComponentUtil2.toBoolean(changesToApply.suppressMoveWhenRowDragging.currentValue));
        delete changesToApply.suppressMoveWhenRowDragging;
      }
      if (changesToApply.suppressRowClickSelection) {
        api2.setSuppressRowClickSelection(ComponentUtil2.toBoolean(changesToApply.suppressRowClickSelection.currentValue));
        delete changesToApply.suppressRowClickSelection;
      }
      if (changesToApply.suppressClipboardPaste) {
        api2.setSuppressClipboardPaste(ComponentUtil2.toBoolean(changesToApply.suppressClipboardPaste.currentValue));
        delete changesToApply.suppressClipboardPaste;
      }
      if (changesToApply.headerHeight) {
        api2.setHeaderHeight(ComponentUtil2.toNumber(changesToApply.headerHeight.currentValue));
        delete changesToApply.headerHeight;
      }
      var dynamicApi = api2;
      Object.keys(changesToApply).forEach(function(property) {
        var setterName = "set" + property.charAt(0).toUpperCase() + property.substring(1);
        if (dynamicApi[setterName]) {
          dynamicApi[setterName](changes[property].currentValue);
        }
      });
      var event = {
        type: Events.EVENT_COMPONENT_STATE_CHANGED,
        api: gridOptions.api,
        columnApi: gridOptions.columnApi
      };
      iterateObject(changes, function(key, value) {
        event[key] = value;
      });
      api2.dispatchEvent(event);
    };
    ComponentUtil2.toBoolean = function(value) {
      if (typeof value === "boolean") {
        return value;
      }
      if (typeof value === "string") {
        return value.toUpperCase() === "TRUE" || value == "";
      }
      return false;
    };
    ComponentUtil2.toNumber = function(value) {
      if (typeof value === "number") {
        return value;
      }
      if (typeof value === "string") {
        return Number(value);
      }
    };
    ComponentUtil2.EVENTS = [];
    ComponentUtil2.PUBLIC_EVENTS = [];
    ComponentUtil2.EXCLUDED_INTERNAL_EVENTS = [];
    ComponentUtil2.STRING_PROPERTIES = PropertyKeys.STRING_PROPERTIES;
    ComponentUtil2.OBJECT_PROPERTIES = PropertyKeys.OBJECT_PROPERTIES;
    ComponentUtil2.ARRAY_PROPERTIES = PropertyKeys.ARRAY_PROPERTIES;
    ComponentUtil2.NUMBER_PROPERTIES = PropertyKeys.NUMBER_PROPERTIES;
    ComponentUtil2.BOOLEAN_PROPERTIES = PropertyKeys.BOOLEAN_PROPERTIES;
    ComponentUtil2.FUNCTION_PROPERTIES = PropertyKeys.FUNCTION_PROPERTIES;
    ComponentUtil2.ALL_PROPERTIES = PropertyKeys.ALL_PROPERTIES;
    return ComponentUtil2;
  }();
  ComponentUtil.EVENTS = values(Events);
  ComponentUtil.EXCLUDED_INTERNAL_EVENTS = [
    Events.EVENT_SCROLLBAR_WIDTH_CHANGED,
    Events.EVENT_CHECKBOX_CHANGED,
    Events.EVENT_HEIGHT_SCALE_CHANGED,
    Events.EVENT_BODY_HEIGHT_CHANGED,
    Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,
    Events.EVENT_SCROLL_VISIBILITY_CHANGED,
    Events.EVENT_COLUMN_HOVER_CHANGED,
    Events.EVENT_FLASH_CELLS,
    Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,
    Events.EVENT_DISPLAYED_ROWS_CHANGED,
    Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,
    Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,
    Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,
    Events.EVENT_POPUP_TO_FRONT,
    Events.EVENT_KEYBOARD_FOCUS,
    Events.EVENT_MOUSE_FOCUS,
    Events.EVENT_STORE_UPDATED,
    Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,
    Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END,
    Events.EVENT_FILL_START,
    Events.EVENT_FILL_END
  ];
  ComponentUtil.PUBLIC_EVENTS = ComponentUtil.EVENTS.filter(function(e) {
    return !includes2(ComponentUtil.EXCLUDED_INTERNAL_EVENTS, e);
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$4 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$8 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AgStackComponentsRegistry = function(_super) {
    __extends$4(AgStackComponentsRegistry2, _super);
    function AgStackComponentsRegistry2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.componentsMappedByName = {};
      return _this;
    }
    AgStackComponentsRegistry2.prototype.setupComponents = function(components) {
      var _this = this;
      if (components) {
        components.forEach(function(componentMeta) {
          return _this.addComponent(componentMeta);
        });
      }
    };
    AgStackComponentsRegistry2.prototype.addComponent = function(componentMeta) {
      var classEscaped = componentMeta.componentName.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase();
      var classUpperCase = classEscaped.toUpperCase();
      this.componentsMappedByName[classUpperCase] = componentMeta.componentClass;
    };
    AgStackComponentsRegistry2.prototype.getComponentClass = function(htmlTag) {
      return this.componentsMappedByName[htmlTag];
    };
    AgStackComponentsRegistry2 = __decorate$8([
      Bean("agStackComponentsRegistry")
    ], AgStackComponentsRegistry2);
    return AgStackComponentsRegistry2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __spreadArrays$3 = function() {
    for (var s = 0, i2 = 0, il = arguments.length; i2 < il; i2++)
      s += arguments[i2].length;
    for (var r = Array(s), k = 0, i2 = 0; i2 < il; i2++)
      for (var a = arguments[i2], j = 0, jl = a.length; j < jl; j++, k++)
        r[k] = a[j];
    return r;
  };
  var ColDefUtil = function() {
    function ColDefUtil2() {
    }
    ColDefUtil2.STRING_PROPERTIES = [
      "headerName",
      "columnGroupShow",
      "headerClass",
      "toolPanelClass",
      "headerValueGetter",
      "pivotKeys",
      "groupId",
      "colId",
      "sort",
      "initialSort",
      "field",
      "type",
      "tooltipComponent",
      "tooltipField",
      "headerTooltip",
      "cellClass",
      "showRowGroup",
      "template",
      "templateUrl",
      "filter",
      "initialAggFunc",
      "aggFunc",
      "cellRenderer",
      "cellEditor",
      "pinned",
      "initialPinned",
      "chartDataType",
      "cellEditorPopupPosition"
    ];
    ColDefUtil2.OBJECT_PROPERTIES = [
      "headerGroupComponent",
      "headerGroupComponentFramework",
      "headerGroupComponentParams",
      "cellStyle",
      "cellRendererParams",
      "cellEditorFramework",
      "cellEditorParams",
      "pinnedRowCellRendererFramework",
      "pinnedRowCellRendererParams",
      "filterFramework",
      "filterParams",
      "pivotValueColumn",
      "headerComponent",
      "headerComponentFramework",
      "headerComponentParams",
      "floatingFilterComponent",
      "floatingFilterComponentParams",
      "floatingFilterComponentFramework",
      "tooltipComponent",
      "tooltipComponentParams",
      "tooltipComponentFramework",
      "refData",
      "columnsMenuParams"
    ];
    ColDefUtil2.ARRAY_PROPERTIES = [
      "children",
      "sortingOrder",
      "allowedAggFuncs",
      "menuTabs",
      "pivotTotalColumnIds",
      "cellClassRules",
      "icons"
    ];
    ColDefUtil2.NUMBER_PROPERTIES = [
      "sortedAt",
      "sortIndex",
      "initialSortIndex",
      "flex",
      "initialFlex",
      "width",
      "initialWidth",
      "minWidth",
      "maxWidth",
      "rowGroupIndex",
      "initialRowGroupIndex",
      "pivotIndex",
      "initialPivotIndex"
    ];
    ColDefUtil2.BOOLEAN_PROPERTIES = [
      "suppressCellFlash",
      "suppressColumnsToolPanel",
      "suppressFiltersToolPanel",
      "openByDefault",
      "marryChildren",
      "hide",
      "initialHide",
      "rowGroup",
      "initialRowGroup",
      "pivot",
      "initialPivot",
      "checkboxSelection",
      "headerCheckboxSelection",
      "headerCheckboxSelectionFilteredOnly",
      "suppressMenu",
      "suppressMovable",
      "lockPosition",
      "lockVisible",
      "lockPinned",
      "unSortIcon",
      "suppressSizeToFit",
      "suppressAutoSize",
      "enableRowGroup",
      "enablePivot",
      "enableValue",
      "editable",
      "suppressPaste",
      "suppressNavigable",
      "enableCellChangeFlash",
      "rowDrag",
      "dndSource",
      "autoHeight",
      "wrapText",
      "sortable",
      "resizable",
      "singleClickEdit",
      "floatingFilter",
      "cellEditorPopup",
      "suppressFillHandle"
    ];
    ColDefUtil2.FUNCTION_PROPERTIES = [
      "dndSourceOnRowDrag",
      "valueGetter",
      "valueSetter",
      "filterValueGetter",
      "keyCreator",
      "cellRenderer",
      "cellRendererFramework",
      "pinnedRowCellRenderer",
      "valueFormatter",
      "pinnedRowValueFormatter",
      "valueParser",
      "comparator",
      "equals",
      "pivotComparator",
      "suppressKeyboardEvent",
      "suppressHeaderKeyboardEvent",
      "colSpan",
      "rowSpan",
      "getQuickFilterText",
      "newValueHandler",
      "onCellValueChanged",
      "onCellClicked",
      "onCellDoubleClicked",
      "onCellContextMenu",
      "rowDragText",
      "tooltipValueGetter",
      "tooltipComponent",
      "tooltipComponentFramework",
      "cellRendererSelector",
      "cellEditorSelector"
    ];
    ColDefUtil2.ALL_PROPERTIES = __spreadArrays$3(ColDefUtil2.ARRAY_PROPERTIES, ColDefUtil2.OBJECT_PROPERTIES, ColDefUtil2.STRING_PROPERTIES, ColDefUtil2.NUMBER_PROPERTIES, ColDefUtil2.FUNCTION_PROPERTIES, ColDefUtil2.BOOLEAN_PROPERTIES);
    ColDefUtil2.FRAMEWORK_PROPERTIES = [
      "__ob__",
      "__v_skip",
      "__metadata__",
      "mappedColumnProperties",
      "hasChildColumns",
      "toColDef",
      "createColDefFromGridColumn"
    ];
    return ColDefUtil2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function QuerySelector(selector) {
    return querySelectorFunc.bind(this, selector, void 0);
  }
  function RefSelector(ref) {
    return querySelectorFunc.bind(this, "[ref=" + ref + "]", ref);
  }
  function querySelectorFunc(selector, refSelector, classPrototype, methodOrAttributeName, index) {
    if (selector === null) {
      console.error("AG Grid: QuerySelector selector should not be null");
      return;
    }
    if (typeof index === "number") {
      console.error("AG Grid: QuerySelector should be on an attribute");
      return;
    }
    addToObjectProps(classPrototype, "querySelectors", {
      attributeName: methodOrAttributeName,
      querySelector: selector,
      refSelector
    });
  }
  function addToObjectProps(target, key, value) {
    var props = getOrCreateProps$1(target, getFunctionName(target.constructor));
    if (!props[key]) {
      props[key] = [];
    }
    props[key].push(value);
  }
  function getOrCreateProps$1(target, instanceName) {
    if (!target.__agComponentMetaData) {
      target.__agComponentMetaData = {};
    }
    if (!target.__agComponentMetaData[instanceName]) {
      target.__agComponentMetaData[instanceName] = {};
    }
    return target.__agComponentMetaData[instanceName];
  }
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var DateCompWrapper = function() {
    function DateCompWrapper2(context, userComponentFactory, dateComponentParams, eParent) {
      var _this = this;
      this.alive = true;
      this.context = context;
      userComponentFactory.newDateComponent(dateComponentParams).then(function(dateComp) {
        if (!_this.alive) {
          context.destroyBean(dateComp);
          return;
        }
        _this.dateComp = dateComp;
        if (!dateComp) {
          return;
        }
        eParent.appendChild(dateComp.getGui());
        if (dateComp.afterGuiAttached) {
          dateComp.afterGuiAttached();
        }
        if (_this.tempValue) {
          dateComp.setDate(_this.tempValue);
        }
      });
    }
    DateCompWrapper2.prototype.destroy = function() {
      this.alive = false;
      this.dateComp = this.context.destroyBean(this.dateComp);
    };
    DateCompWrapper2.prototype.getDate = function() {
      return this.dateComp ? this.dateComp.getDate() : this.tempValue;
    };
    DateCompWrapper2.prototype.setDate = function(value) {
      if (this.dateComp) {
        this.dateComp.setDate(value);
      } else {
        this.tempValue = value;
      }
    };
    DateCompWrapper2.prototype.setInputPlaceholder = function(placeholder) {
      if (this.dateComp && this.dateComp.setInputPlaceholder) {
        this.dateComp.setInputPlaceholder(placeholder);
      }
    };
    DateCompWrapper2.prototype.setInputAriaLabel = function(label) {
      if (this.dateComp && this.dateComp.setInputAriaLabel) {
        this.dateComp.setInputAriaLabel(label);
      }
    };
    DateCompWrapper2.prototype.afterGuiAttached = function(params2) {
      if (this.dateComp && typeof this.dateComp.afterGuiAttached === "function") {
        this.dateComp.afterGuiAttached(params2);
      }
    };
    return DateCompWrapper2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var OptionsFactory = function() {
    function OptionsFactory2() {
      this.customFilterOptions = {};
    }
    OptionsFactory2.prototype.init = function(params2, defaultOptions) {
      this.filterOptions = params2.filterOptions || defaultOptions;
      this.mapCustomOptions();
      this.selectDefaultItem(params2);
    };
    OptionsFactory2.prototype.getFilterOptions = function() {
      return this.filterOptions;
    };
    OptionsFactory2.prototype.mapCustomOptions = function() {
      var _this = this;
      if (!this.filterOptions) {
        return;
      }
      this.filterOptions.forEach(function(filterOption) {
        if (typeof filterOption === "string") {
          return;
        }
        var requiredProperties = ["displayKey", "displayName", "test"];
        if (every(requiredProperties, function(key) {
          if (!filterOption[key]) {
            console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain a '" + key + "'");
            return false;
          }
          return true;
        })) {
          _this.customFilterOptions[filterOption.displayKey] = filterOption;
        }
      });
    };
    OptionsFactory2.prototype.selectDefaultItem = function(params2) {
      if (params2.defaultOption) {
        this.defaultOption = params2.defaultOption;
      } else if (this.filterOptions.length >= 1) {
        var firstFilterOption = this.filterOptions[0];
        if (typeof firstFilterOption === "string") {
          this.defaultOption = firstFilterOption;
        } else if (firstFilterOption.displayKey) {
          this.defaultOption = firstFilterOption.displayKey;
        } else {
          console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'");
        }
      } else {
        console.warn("AG Grid: no filter options for filter");
      }
    };
    OptionsFactory2.prototype.getDefaultOption = function() {
      return this.defaultOption;
    };
    OptionsFactory2.prototype.getCustomOption = function(name) {
      return this.customFilterOptions[name];
    };
    return OptionsFactory2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var isSafari;
  var isIE;
  var isEdge;
  var isChrome;
  var isFirefox;
  var isIOS;
  var invisibleScrollbar;
  var browserScrollbarWidth;
  function isBrowserIE() {
    if (isIE === void 0) {
      isIE = !!document.documentMode;
    }
    return isIE;
  }
  function isBrowserEdge() {
    if (isEdge === void 0) {
      isEdge = !isBrowserIE() && !!window.StyleMedia;
    }
    return isEdge;
  }
  function isBrowserSafari() {
    if (isSafari === void 0) {
      isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
    }
    return isSafari;
  }
  function isBrowserChrome() {
    if (isChrome === void 0) {
      var win = window;
      isChrome = !!win.chrome && (!!win.chrome.webstore || !!win.chrome.runtime) || /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
    }
    return isChrome;
  }
  function isBrowserFirefox() {
    if (isFirefox === void 0) {
      var win = window;
      isFirefox = typeof win.InstallTrigger !== "undefined";
    }
    return isFirefox;
  }
  function isIOSUserAgent() {
    if (isIOS === void 0) {
      isIOS = (/iPad|iPhone|iPod/.test(navigator.platform) || navigator.platform === "MacIntel" && navigator.maxTouchPoints > 1) && !window.MSStream;
    }
    return isIOS;
  }
  function getTabIndex(el) {
    if (!el) {
      return null;
    }
    var numberTabIndex = el.tabIndex;
    var tabIndex = el.getAttribute("tabIndex");
    if (isBrowserIE() && numberTabIndex === 0 && tabIndex === null) {
      var map2 = {
        a: true,
        body: true,
        button: true,
        frame: true,
        iframe: true,
        img: true,
        input: true,
        isindex: true,
        object: true,
        select: true,
        textarea: true
      };
      return map2[el.nodeName.toLowerCase()] === true ? "0" : null;
    }
    if (numberTabIndex === -1 && (tabIndex === null || tabIndex === "" && !isBrowserFirefox())) {
      return null;
    }
    return numberTabIndex.toString();
  }
  function getMaxDivHeight() {
    if (!document.body) {
      return -1;
    }
    var res = 1e6;
    var testUpTo = navigator.userAgent.toLowerCase().match(/firefox/) ? 6e6 : 1e9;
    var div = document.createElement("div");
    document.body.appendChild(div);
    while (true) {
      var test = res * 2;
      div.style.height = test + "px";
      if (test > testUpTo || div.clientHeight !== test) {
        break;
      } else {
        res = test;
      }
    }
    document.body.removeChild(div);
    return res;
  }
  function getScrollbarWidth() {
    if (browserScrollbarWidth == null) {
      initScrollbarWidthAndVisibility();
    }
    return browserScrollbarWidth;
  }
  function initScrollbarWidthAndVisibility() {
    var body = document.body;
    var div = document.createElement("div");
    div.style.width = div.style.height = "100px";
    div.style.opacity = "0";
    div.style.overflow = "scroll";
    div.style.msOverflowStyle = "scrollbar";
    div.style.position = "absolute";
    body.appendChild(div);
    var width = div.offsetWidth - div.clientWidth;
    if (width === 0 && div.clientWidth === 0) {
      width = null;
    }
    if (div.parentNode) {
      div.parentNode.removeChild(div);
    }
    if (width != null) {
      browserScrollbarWidth = width;
      invisibleScrollbar = width === 0;
    }
  }
  function isInvisibleScrollbar() {
    if (invisibleScrollbar == null) {
      initScrollbarWidthAndVisibility();
    }
    return invisibleScrollbar;
  }
  function hasOverflowScrolling() {
    var prefixes = ["webkit", "moz", "o", "ms"];
    var div = document.createElement("div");
    var body = document.getElementsByTagName("body")[0];
    var found = false;
    var p2;
    body.appendChild(div);
    div.setAttribute("style", prefixes.map(function(prefix) {
      return "-" + prefix + "-overflow-scrolling: touch";
    }).concat("overflow-scrolling: touch").join(";"));
    var computedStyle = window.getComputedStyle(div);
    if (computedStyle.overflowScrolling === "touch") {
      found = true;
    }
    if (!found) {
      for (var _i = 0, prefixes_1 = prefixes; _i < prefixes_1.length; _i++) {
        p2 = prefixes_1[_i];
        if (computedStyle[p2 + "OverflowScrolling"] === "touch") {
          found = true;
          break;
        }
      }
    }
    if (div.parentNode) {
      div.parentNode.removeChild(div);
    }
    return found;
  }
  function getBodyWidth() {
    if (document.body) {
      return document.body.clientWidth;
    }
    if (window.innerHeight) {
      return window.innerWidth;
    }
    if (document.documentElement && document.documentElement.clientWidth) {
      return document.documentElement.clientWidth;
    }
    return -1;
  }
  function getBodyHeight() {
    if (document.body) {
      return document.body.clientHeight;
    }
    if (window.innerHeight) {
      return window.innerHeight;
    }
    if (document.documentElement && document.documentElement.clientHeight) {
      return document.documentElement.clientHeight;
    }
    return -1;
  }
  var BrowserUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    isBrowserIE,
    isBrowserEdge,
    isBrowserSafari,
    isBrowserChrome,
    isBrowserFirefox,
    isIOSUserAgent,
    getTabIndex,
    getMaxDivHeight,
    getScrollbarWidth,
    isInvisibleScrollbar,
    hasOverflowScrolling,
    getBodyWidth,
    getBodyHeight
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var rtlNegativeScroll;
  function addCssClass(element2, className) {
    if (!element2 || !className || className.length === 0) {
      return;
    }
    if (className.indexOf(" ") >= 0) {
      className.split(" ").forEach(function(value) {
        return addCssClass(element2, value);
      });
      return;
    }
    if (element2.classList) {
      element2.classList.add(className);
    } else if (element2.className && element2.className.length > 0) {
      var cssClasses = element2.className.split(" ");
      if (cssClasses.indexOf(className) < 0) {
        cssClasses.push(className);
        element2.setAttribute("class", cssClasses.join(" "));
      }
    } else {
      element2.setAttribute("class", className);
    }
    return element2;
  }
  function removeCssClass(element2, className) {
    if (!element2 || !className || className.length === 0) {
      return;
    }
    if (className.indexOf(" ") >= 0) {
      className.split(" ").forEach(function(value) {
        return removeCssClass(element2, value);
      });
      return;
    }
    if (element2.classList) {
      element2.classList.remove(className);
    } else if (element2.className && element2.className.length > 0) {
      var newClassName = element2.className.split(" ").filter(function(c) {
        return c !== className;
      }).join(" ");
      element2.setAttribute("class", newClassName);
    }
  }
  function addOrRemoveCssClass(element2, className, addOrRemove) {
    if (addOrRemove) {
      addCssClass(element2, className);
    } else {
      removeCssClass(element2, className);
    }
  }
  function radioCssClass(element2, elementClass, otherElementClass) {
    var parent = element2.parentElement;
    var sibling = parent && parent.firstChild;
    while (sibling) {
      if (elementClass) {
        addOrRemoveCssClass(sibling, elementClass, sibling === element2);
      }
      if (otherElementClass) {
        addOrRemoveCssClass(sibling, otherElementClass, sibling !== element2);
      }
      sibling = sibling.nextSibling;
    }
  }
  function containsClass(element2, className) {
    if (element2.classList) {
      return element2.classList.contains(className);
    }
    if (element2.className) {
      var onlyClass = element2.className === className;
      var contains = element2.className.indexOf(" " + className + " ") >= 0;
      var startsWithClass = element2.className.indexOf(className + " ") === 0;
      var endsWithClass = element2.className.lastIndexOf(" " + className) === element2.className.length - className.length - 1;
      return onlyClass || contains || startsWithClass || endsWithClass;
    }
    return false;
  }
  function isFocusableFormField(element2) {
    var matches = Element.prototype.matches || Element.prototype.msMatchesSelector;
    var isFocusable = matches.call(element2, Constants.INPUT_SELECTOR);
    var isNotFocusable = matches.call(element2, Constants.FOCUSABLE_EXCLUDE);
    var isElementVisible = isVisible(element2);
    var focusable = isFocusable && !isNotFocusable && isElementVisible;
    return focusable;
  }
  function setDisplayed(element2, displayed) {
    addOrRemoveCssClass(element2, "ag-hidden", !displayed);
  }
  function setVisible(element2, visible) {
    addOrRemoveCssClass(element2, "ag-invisible", !visible);
  }
  function setDisabled(element2, disabled) {
    var attributeName = "disabled";
    var addOrRemoveDisabledAttribute = disabled ? function(e) {
      return e.setAttribute(attributeName, "");
    } : function(e) {
      return e.removeAttribute(attributeName);
    };
    addOrRemoveDisabledAttribute(element2);
    nodeListForEach(element2.querySelectorAll("input"), function(input) {
      return addOrRemoveDisabledAttribute(input);
    });
  }
  function isElementChildOfClass(element2, cls, maxNest) {
    var counter = 0;
    while (element2) {
      if (containsClass(element2, cls)) {
        return true;
      }
      element2 = element2.parentElement;
      if (maxNest && ++counter > maxNest) {
        break;
      }
    }
    return false;
  }
  function getElementSize(el) {
    var _a = window.getComputedStyle(el), height = _a.height, width = _a.width, paddingTop = _a.paddingTop, paddingRight = _a.paddingRight, paddingBottom = _a.paddingBottom, paddingLeft = _a.paddingLeft, marginTop = _a.marginTop, marginRight = _a.marginRight, marginBottom = _a.marginBottom, marginLeft = _a.marginLeft, boxSizing = _a.boxSizing;
    return {
      height: parseFloat(height),
      width: parseFloat(width),
      paddingTop: parseFloat(paddingTop),
      paddingRight: parseFloat(paddingRight),
      paddingBottom: parseFloat(paddingBottom),
      paddingLeft: parseFloat(paddingLeft),
      marginTop: parseFloat(marginTop),
      marginRight: parseFloat(marginRight),
      marginBottom: parseFloat(marginBottom),
      marginLeft: parseFloat(marginLeft),
      boxSizing
    };
  }
  function getInnerHeight(el) {
    var size = getElementSize(el);
    if (size.boxSizing === "border-box") {
      return size.height - size.paddingTop - size.paddingBottom;
    }
    return size.height;
  }
  function getInnerWidth(el) {
    var size = getElementSize(el);
    if (size.boxSizing === "border-box") {
      return size.width - size.paddingLeft - size.paddingRight;
    }
    return size.width;
  }
  function getAbsoluteHeight(el) {
    var size = getElementSize(el);
    var marginRight = size.marginBottom + size.marginTop;
    return Math.ceil(el.offsetHeight + marginRight);
  }
  function getAbsoluteWidth(el) {
    var size = getElementSize(el);
    var marginWidth = size.marginLeft + size.marginRight;
    return Math.ceil(el.offsetWidth + marginWidth);
  }
  function isRtlNegativeScroll() {
    if (typeof rtlNegativeScroll === "boolean") {
      return rtlNegativeScroll;
    }
    var template = document.createElement("div");
    template.style.direction = "rtl";
    template.style.width = "1px";
    template.style.height = "1px";
    template.style.position = "fixed";
    template.style.top = "0px";
    template.style.overflow = "hidden";
    template.dir = "rtl";
    template.innerHTML = '<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>';
    document.body.appendChild(template);
    template.scrollLeft = 1;
    rtlNegativeScroll = Math.floor(template.scrollLeft) === 0;
    document.body.removeChild(template);
    return rtlNegativeScroll;
  }
  function getScrollLeft(element2, rtl) {
    var scrollLeft = element2.scrollLeft;
    if (rtl) {
      scrollLeft = Math.abs(scrollLeft);
      if (isBrowserChrome() && !isRtlNegativeScroll()) {
        scrollLeft = element2.scrollWidth - element2.clientWidth - scrollLeft;
      }
    }
    return scrollLeft;
  }
  function setScrollLeft(element2, value, rtl) {
    if (rtl) {
      if (isRtlNegativeScroll()) {
        value *= -1;
      } else if (isBrowserSafari() || isBrowserChrome()) {
        value = element2.scrollWidth - element2.clientWidth - value;
      }
    }
    element2.scrollLeft = value;
  }
  function clearElement(el) {
    while (el && el.firstChild) {
      el.removeChild(el.firstChild);
    }
  }
  function removeElement(parent, cssSelector) {
    removeFromParent(parent.querySelector(cssSelector));
  }
  function removeFromParent(node) {
    if (node && node.parentNode) {
      node.parentNode.removeChild(node);
    }
  }
  function isVisible(element2) {
    return element2.offsetParent !== null;
  }
  function loadTemplate(template) {
    var tempDiv = document.createElement("div");
    tempDiv.innerHTML = (template || "").trim();
    return tempDiv.firstChild;
  }
  function appendHtml(eContainer, htmlTemplate) {
    if (eContainer.lastChild) {
      eContainer.insertAdjacentHTML("afterbegin", htmlTemplate);
    } else {
      eContainer.innerHTML = htmlTemplate;
    }
  }
  function getElementAttribute(element2, attributeName) {
    if (element2.attributes && element2.attributes[attributeName]) {
      var attribute = element2.attributes[attributeName];
      return attribute.value;
    }
    return null;
  }
  function offsetHeight(element2) {
    return element2 && element2.clientHeight ? element2.clientHeight : 0;
  }
  function offsetWidth(element2) {
    return element2 && element2.clientWidth ? element2.clientWidth : 0;
  }
  function ensureDomOrder(eContainer, eChild, eChildBefore) {
    if (eChildBefore && eChildBefore.nextSibling === eChild) {
      return;
    }
    if (eChildBefore) {
      if (eChildBefore.nextSibling) {
        eContainer.insertBefore(eChild, eChildBefore.nextSibling);
      } else {
        eContainer.appendChild(eChild);
      }
    } else {
      if (eContainer.firstChild && eContainer.firstChild !== eChild) {
        eContainer.insertAdjacentElement("afterbegin", eChild);
      }
    }
  }
  function setDomChildOrder(eContainer, orderedChildren) {
    for (var i2 = 0; i2 < orderedChildren.length; i2++) {
      var correctCellAtIndex = orderedChildren[i2];
      var actualCellAtIndex = eContainer.children[i2];
      if (actualCellAtIndex !== correctCellAtIndex) {
        eContainer.insertBefore(correctCellAtIndex, actualCellAtIndex);
      }
    }
  }
  function insertWithDomOrder(eContainer, eToInsert, eChildBefore) {
    if (eChildBefore) {
      eChildBefore.insertAdjacentElement("afterend", eToInsert);
    } else {
      if (eContainer.firstChild) {
        eContainer.insertAdjacentElement("afterbegin", eToInsert);
      } else {
        eContainer.appendChild(eToInsert);
      }
    }
  }
  function prependDC(parent, documentFragment) {
    if (exists(parent.firstChild)) {
      parent.insertBefore(documentFragment, parent.firstChild);
    } else {
      parent.appendChild(documentFragment);
    }
  }
  function addStylesToElement(eElement, styles) {
    if (!styles) {
      return;
    }
    Object.keys(styles).forEach(function(key) {
      var keyCamelCase = hyphenToCamelCase(key);
      if (keyCamelCase) {
        eElement.style[keyCamelCase] = styles[key];
      }
    });
  }
  function isHorizontalScrollShowing(element2) {
    return element2.clientWidth < element2.scrollWidth;
  }
  function isVerticalScrollShowing(element2) {
    return element2.clientHeight < element2.scrollHeight;
  }
  function setElementWidth(element2, width) {
    if (width === "flex") {
      element2.style.removeProperty("width");
      element2.style.removeProperty("minWidth");
      element2.style.removeProperty("maxWidth");
      element2.style.flex = "1 1 auto";
    } else {
      setFixedWidth(element2, width);
    }
  }
  function setFixedWidth(element2, width) {
    width = formatSize(width);
    element2.style.width = width.toString();
    element2.style.maxWidth = width.toString();
    element2.style.minWidth = width.toString();
  }
  function setElementHeight(element2, height) {
    if (height === "flex") {
      element2.style.removeProperty("height");
      element2.style.removeProperty("minHeight");
      element2.style.removeProperty("maxHeight");
      element2.style.flex = "1 1 auto";
    } else {
      setFixedHeight(element2, height);
    }
  }
  function setFixedHeight(element2, height) {
    height = formatSize(height);
    element2.style.height = height.toString();
    element2.style.maxHeight = height.toString();
    element2.style.minHeight = height.toString();
  }
  function formatSize(size) {
    if (typeof size === "number") {
      return size + "px";
    }
    return size;
  }
  function isNode(o) {
    return typeof Node === "function" ? o instanceof Node : o && typeof o === "object" && typeof o.nodeType === "number" && typeof o.nodeName === "string";
  }
  function isElement(o) {
    return typeof HTMLElement === "function" ? o instanceof HTMLElement : o && isNonNullObject(o) && o.nodeType === 1 && typeof o.nodeName === "string";
  }
  function isNodeOrElement(o) {
    return isNode(o) || isElement(o);
  }
  function copyNodeList(nodeList) {
    if (nodeList == null) {
      return [];
    }
    var result = [];
    nodeListForEach(nodeList, function(node) {
      return result.push(node);
    });
    return result;
  }
  function iterateNamedNodeMap(map2, callback) {
    if (!map2) {
      return;
    }
    for (var i2 = 0; i2 < map2.length; i2++) {
      var attr2 = map2[i2];
      callback(attr2.name, attr2.value);
    }
  }
  function setCheckboxState(eCheckbox, state2) {
    if (typeof state2 === "boolean") {
      eCheckbox.checked = state2;
      eCheckbox.indeterminate = false;
    } else {
      eCheckbox.indeterminate = true;
    }
  }
  function addOrRemoveAttribute(element2, name, value) {
    if (value == null) {
      element2.removeAttribute(name);
    } else {
      element2.setAttribute(name, value.toString());
    }
  }
  function nodeListForEach(nodeList, action) {
    if (nodeList == null) {
      return;
    }
    for (var i2 = 0; i2 < nodeList.length; i2++) {
      action(nodeList[i2]);
    }
  }
  var DomUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    addCssClass,
    removeCssClass,
    addOrRemoveCssClass,
    radioCssClass,
    containsClass,
    isFocusableFormField,
    setDisplayed,
    setVisible,
    setDisabled,
    isElementChildOfClass,
    getElementSize,
    getInnerHeight,
    getInnerWidth,
    getAbsoluteHeight,
    getAbsoluteWidth,
    isRtlNegativeScroll,
    getScrollLeft,
    setScrollLeft,
    clearElement,
    removeElement,
    removeFromParent,
    isVisible,
    loadTemplate,
    appendHtml,
    getElementAttribute,
    offsetHeight,
    offsetWidth,
    ensureDomOrder,
    setDomChildOrder,
    insertWithDomOrder,
    prependDC,
    addStylesToElement,
    isHorizontalScrollShowing,
    isVerticalScrollShowing,
    setElementWidth,
    setFixedWidth,
    setElementHeight,
    setFixedHeight,
    formatSize,
    isNode,
    isElement,
    isNodeOrElement,
    copyNodeList,
    iterateNamedNodeMap,
    setCheckboxState,
    addOrRemoveAttribute,
    nodeListForEach
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var DEFAULT_FILTER_LOCALE_TEXT = {
    applyFilter: "Apply",
    clearFilter: "Clear",
    resetFilter: "Reset",
    cancelFilter: "Cancel",
    textFilter: "Text Filter",
    numberFilter: "Number Filter",
    dateFilter: "Date Filter",
    setFilter: "Set Filter",
    filterOoo: "Filter...",
    empty: "Choose One",
    equals: "Equals",
    notEqual: "Not equal",
    lessThan: "Less than",
    greaterThan: "Greater than",
    inRange: "In range",
    inRangeStart: "From",
    inRangeEnd: "To",
    lessThanOrEqual: "Less than or equals",
    greaterThanOrEqual: "Greater than or equals",
    contains: "Contains",
    notContains: "Not contains",
    startsWith: "Starts with",
    endsWith: "Ends with",
    andCondition: "AND",
    orCondition: "OR",
    dateFormatOoo: "yyyy-mm-dd"
  };
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var KeyCode = function() {
    function KeyCode2() {
    }
    KeyCode2.BACKSPACE = 8;
    KeyCode2.TAB = 9;
    KeyCode2.ENTER = 13;
    KeyCode2.SHIFT = 16;
    KeyCode2.ESCAPE = 27;
    KeyCode2.SPACE = 32;
    KeyCode2.LEFT = 37;
    KeyCode2.UP = 38;
    KeyCode2.RIGHT = 39;
    KeyCode2.DOWN = 40;
    KeyCode2.DELETE = 46;
    KeyCode2.A = 65;
    KeyCode2.C = 67;
    KeyCode2.V = 86;
    KeyCode2.D = 68;
    KeyCode2.Z = 90;
    KeyCode2.Y = 89;
    KeyCode2.F2 = 113;
    KeyCode2.PAGE_UP = 33;
    KeyCode2.PAGE_DOWN = 34;
    KeyCode2.PAGE_HOME = 36;
    KeyCode2.PAGE_END = 35;
    return KeyCode2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$5 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __assign$1 = function() {
    __assign$1 = Object.assign || function(t) {
      for (var s, i2 = 1, n = arguments.length; i2 < n; i2++) {
        s = arguments[i2];
        for (var p2 in s)
          if (Object.prototype.hasOwnProperty.call(s, p2))
            t[p2] = s[p2];
      }
      return t;
    };
    return __assign$1.apply(this, arguments);
  };
  var __decorate$9 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ManagedFocusFeature = function(_super) {
    __extends$5(ManagedFocusFeature2, _super);
    function ManagedFocusFeature2(eFocusableElement, callbacks) {
      if (callbacks === void 0) {
        callbacks = {};
      }
      var _this = _super.call(this) || this;
      _this.eFocusableElement = eFocusableElement;
      _this.callbacks = callbacks;
      _this.callbacks = __assign$1({ shouldStopEventPropagation: function() {
        return false;
      }, onTabKeyDown: function(e) {
        if (e.defaultPrevented) {
          return;
        }
        var nextRoot = _this.focusService.findNextFocusableElement(_this.eFocusableElement, false, e.shiftKey);
        if (!nextRoot) {
          return;
        }
        nextRoot.focus();
        e.preventDefault();
      } }, callbacks);
      return _this;
    }
    ManagedFocusFeature2.prototype.postConstruct = function() {
      addCssClass(this.eFocusableElement, ManagedFocusFeature2.FOCUS_MANAGED_CLASS);
      this.addKeyDownListeners(this.eFocusableElement);
      if (this.callbacks.onFocusIn) {
        this.addManagedListener(this.eFocusableElement, "focusin", this.callbacks.onFocusIn);
      }
      if (this.callbacks.onFocusOut) {
        this.addManagedListener(this.eFocusableElement, "focusout", this.callbacks.onFocusOut);
      }
    };
    ManagedFocusFeature2.prototype.addKeyDownListeners = function(eGui) {
      var _this = this;
      this.addManagedListener(eGui, "keydown", function(e) {
        if (e.defaultPrevented || isStopPropagationForAgGrid(e)) {
          return;
        }
        if (_this.callbacks.shouldStopEventPropagation(e)) {
          stopPropagationForAgGrid(e);
          return;
        }
        if (e.keyCode === KeyCode.TAB) {
          _this.callbacks.onTabKeyDown(e);
        } else if (_this.callbacks.handleKeyDown) {
          _this.callbacks.handleKeyDown(e);
        }
      });
    };
    ManagedFocusFeature2.FOCUS_MANAGED_CLASS = "ag-focus-managed";
    __decorate$9([
      Autowired("focusService")
    ], ManagedFocusFeature2.prototype, "focusService", void 0);
    __decorate$9([
      PostConstruct
    ], ManagedFocusFeature2.prototype, "postConstruct", null);
    return ManagedFocusFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function convertToSet(list) {
    var set6 = new Set();
    list.forEach(function(x) {
      return set6.add(x);
    });
    return set6;
  }
  var SetUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    convertToSet
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var Color = function() {
    function Color2(r, g, b, a) {
      if (a === void 0) {
        a = 1;
      }
      this.r = Math.min(1, Math.max(0, r || 0));
      this.g = Math.min(1, Math.max(0, g || 0));
      this.b = Math.min(1, Math.max(0, b || 0));
      this.a = Math.min(1, Math.max(0, a || 0));
    }
    Color2.fromString = function(str) {
      if (str.indexOf("#") >= 0) {
        return Color2.fromHexString(str);
      }
      var hex = Color2.nameToHex[str];
      if (hex) {
        return Color2.fromHexString(hex);
      }
      if (str.indexOf("rgb") >= 0) {
        return Color2.fromRgbaString(str);
      }
      throw new Error("Invalid color string: '" + str + "'");
    };
    Color2.parseHex = function(input) {
      input = input.replace(/ /g, "").slice(1);
      var parts;
      switch (input.length) {
        case 6:
        case 8:
          parts = [];
          for (var i2 = 0; i2 < input.length; i2 += 2) {
            parts.push(parseInt("" + input[i2] + input[i2 + 1], 16));
          }
          break;
        case 3:
        case 4:
          parts = input.split("").map(function(p2) {
            return parseInt(p2, 16);
          }).map(function(p2) {
            return p2 + p2 * 16;
          });
          break;
      }
      if (parts.length >= 3) {
        if (parts.every(function(p2) {
          return p2 >= 0;
        })) {
          if (parts.length === 3) {
            parts.push(255);
          }
          return parts;
        }
      }
    };
    Color2.fromHexString = function(str) {
      var values2 = Color2.parseHex(str);
      if (values2) {
        var r = values2[0], g = values2[1], b = values2[2], a = values2[3];
        return new Color2(r / 255, g / 255, b / 255, a / 255);
      }
      throw new Error("Malformed hexadecimal color string: '" + str + "'");
    };
    Color2.stringToRgba = function(str) {
      var _a = [NaN, NaN], po = _a[0], pc = _a[1];
      for (var i2 = 0; i2 < str.length; i2++) {
        var c = str[i2];
        if (!po && c === "(") {
          po = i2;
        } else if (c === ")") {
          pc = i2;
          break;
        }
      }
      var contents = po && pc && str.substring(po + 1, pc);
      if (!contents) {
        return;
      }
      var parts = contents.split(",");
      var rgba = [];
      for (var i2 = 0; i2 < parts.length; i2++) {
        var part = parts[i2];
        var value = parseFloat(part);
        if (isNaN(value)) {
          return;
        }
        if (part.indexOf("%") >= 0) {
          value = Math.max(0, Math.min(100, value));
          value /= 100;
        } else {
          if (i2 === 3) {
            value = Math.max(0, Math.min(1, value));
          } else {
            value = Math.max(0, Math.min(255, value));
            value /= 255;
          }
        }
        rgba.push(value);
      }
      return rgba;
    };
    Color2.fromRgbaString = function(str) {
      var rgba = Color2.stringToRgba(str);
      if (rgba) {
        if (rgba.length === 3) {
          return new Color2(rgba[0], rgba[1], rgba[2]);
        } else if (rgba.length === 4) {
          return new Color2(rgba[0], rgba[1], rgba[2], rgba[3]);
        }
      }
      throw new Error("Malformed rgb/rgba color string: '" + str + "'");
    };
    Color2.fromArray = function(arr) {
      if (arr.length === 4) {
        return new Color2(arr[0], arr[1], arr[2], arr[3]);
      }
      if (arr.length === 3) {
        return new Color2(arr[0], arr[1], arr[2]);
      }
      throw new Error("The given array should contain 3 or 4 color components (numbers).");
    };
    Color2.fromHSB = function(h, s, b, alpha) {
      if (alpha === void 0) {
        alpha = 1;
      }
      var rgb = Color2.HSBtoRGB(h, s, b);
      return new Color2(rgb[0], rgb[1], rgb[2], alpha);
    };
    Color2.padHex = function(str) {
      return str.length === 1 ? "0" + str : str;
    };
    Color2.prototype.toHexString = function() {
      var hex = "#" + Color2.padHex(Math.round(this.r * 255).toString(16)) + Color2.padHex(Math.round(this.g * 255).toString(16)) + Color2.padHex(Math.round(this.b * 255).toString(16));
      if (this.a < 1) {
        hex += Color2.padHex(Math.round(this.a * 255).toString(16));
      }
      return hex;
    };
    Color2.prototype.toRgbaString = function(fractionDigits) {
      if (fractionDigits === void 0) {
        fractionDigits = 3;
      }
      var components = [
        Math.round(this.r * 255),
        Math.round(this.g * 255),
        Math.round(this.b * 255)
      ];
      var k = Math.pow(10, fractionDigits);
      if (this.a !== 1) {
        components.push(Math.round(this.a * k) / k);
        return "rgba(" + components.join(", ") + ")";
      }
      return "rgb(" + components.join(", ") + ")";
    };
    Color2.prototype.toString = function() {
      if (this.a === 1) {
        return this.toHexString();
      }
      return this.toRgbaString();
    };
    Color2.prototype.toHSB = function() {
      return Color2.RGBtoHSB(this.r, this.g, this.b);
    };
    Color2.RGBtoHSB = function(r, g, b) {
      var min = Math.min(r, g, b);
      var max = Math.max(r, g, b);
      var S = max !== 0 ? (max - min) / max : 0;
      var H = NaN;
      if (min !== max) {
        var delta = max - min;
        var rc = (max - r) / delta;
        var gc = (max - g) / delta;
        var bc = (max - b) / delta;
        if (r === max) {
          H = bc - gc;
        } else if (g === max) {
          H = 2 + rc - bc;
        } else {
          H = 4 + gc - rc;
        }
        H /= 6;
        if (H < 0) {
          H = H + 1;
        }
      }
      return [H * 360, S, max];
    };
    Color2.HSBtoRGB = function(H, S, B) {
      if (isNaN(H)) {
        H = 0;
      }
      H = (H % 360 + 360) % 360 / 360;
      var r = 0;
      var g = 0;
      var b = 0;
      if (S === 0) {
        r = g = b = B;
      } else {
        var h = (H - Math.floor(H)) * 6;
        var f = h - Math.floor(h);
        var p2 = B * (1 - S);
        var q = B * (1 - S * f);
        var t = B * (1 - S * (1 - f));
        switch (h >> 0) {
          case 0:
            r = B;
            g = t;
            b = p2;
            break;
          case 1:
            r = q;
            g = B;
            b = p2;
            break;
          case 2:
            r = p2;
            g = B;
            b = t;
            break;
          case 3:
            r = p2;
            g = q;
            b = B;
            break;
          case 4:
            r = t;
            g = p2;
            b = B;
            break;
          case 5:
            r = B;
            g = p2;
            b = q;
            break;
        }
      }
      return [r, g, b];
    };
    Color2.prototype.derive = function(hueShift, saturationFactor, brightnessFactor, opacityFactor) {
      var hsb = Color2.RGBtoHSB(this.r, this.g, this.b);
      var b = hsb[2];
      if (b == 0 && brightnessFactor > 1) {
        b = 0.05;
      }
      var h = ((hsb[0] + hueShift) % 360 + 360) % 360;
      var s = Math.max(Math.min(hsb[1] * saturationFactor, 1), 0);
      b = Math.max(Math.min(b * brightnessFactor, 1), 0);
      var a = Math.max(Math.min(this.a * opacityFactor, 1), 0);
      var rgba = Color2.HSBtoRGB(h, s, b);
      rgba.push(a);
      return Color2.fromArray(rgba);
    };
    Color2.prototype.brighter = function() {
      return this.derive(0, 1, 1 / 0.7, 1);
    };
    Color2.prototype.darker = function() {
      return this.derive(0, 1, 0.7, 1);
    };
    Color2.nameToHex = Object.freeze({
      aliceblue: "#F0F8FF",
      antiquewhite: "#FAEBD7",
      aqua: "#00FFFF",
      aquamarine: "#7FFFD4",
      azure: "#F0FFFF",
      beige: "#F5F5DC",
      bisque: "#FFE4C4",
      black: "#000000",
      blanchedalmond: "#FFEBCD",
      blue: "#0000FF",
      blueviolet: "#8A2BE2",
      brown: "#A52A2A",
      burlywood: "#DEB887",
      cadetblue: "#5F9EA0",
      chartreuse: "#7FFF00",
      chocolate: "#D2691E",
      coral: "#FF7F50",
      cornflowerblue: "#6495ED",
      cornsilk: "#FFF8DC",
      crimson: "#DC143C",
      cyan: "#00FFFF",
      darkblue: "#00008B",
      darkcyan: "#008B8B",
      darkgoldenrod: "#B8860B",
      darkgray: "#A9A9A9",
      darkgreen: "#006400",
      darkgrey: "#A9A9A9",
      darkkhaki: "#BDB76B",
      darkmagenta: "#8B008B",
      darkolivegreen: "#556B2F",
      darkorange: "#FF8C00",
      darkorchid: "#9932CC",
      darkred: "#8B0000",
      darksalmon: "#E9967A",
      darkseagreen: "#8FBC8F",
      darkslateblue: "#483D8B",
      darkslategray: "#2F4F4F",
      darkslategrey: "#2F4F4F",
      darkturquoise: "#00CED1",
      darkviolet: "#9400D3",
      deeppink: "#FF1493",
      deepskyblue: "#00BFFF",
      dimgray: "#696969",
      dimgrey: "#696969",
      dodgerblue: "#1E90FF",
      firebrick: "#B22222",
      floralwhite: "#FFFAF0",
      forestgreen: "#228B22",
      fuchsia: "#FF00FF",
      gainsboro: "#DCDCDC",
      ghostwhite: "#F8F8FF",
      gold: "#FFD700",
      goldenrod: "#DAA520",
      gray: "#808080",
      green: "#008000",
      greenyellow: "#ADFF2F",
      grey: "#808080",
      honeydew: "#F0FFF0",
      hotpink: "#FF69B4",
      indianred: "#CD5C5C",
      indigo: "#4B0082",
      ivory: "#FFFFF0",
      khaki: "#F0E68C",
      lavender: "#E6E6FA",
      lavenderblush: "#FFF0F5",
      lawngreen: "#7CFC00",
      lemonchiffon: "#FFFACD",
      lightblue: "#ADD8E6",
      lightcoral: "#F08080",
      lightcyan: "#E0FFFF",
      lightgoldenrodyellow: "#FAFAD2",
      lightgray: "#D3D3D3",
      lightgreen: "#90EE90",
      lightgrey: "#D3D3D3",
      lightpink: "#FFB6C1",
      lightsalmon: "#FFA07A",
      lightseagreen: "#20B2AA",
      lightskyblue: "#87CEFA",
      lightslategray: "#778899",
      lightslategrey: "#778899",
      lightsteelblue: "#B0C4DE",
      lightyellow: "#FFFFE0",
      lime: "#00FF00",
      limegreen: "#32CD32",
      linen: "#FAF0E6",
      magenta: "#FF00FF",
      maroon: "#800000",
      mediumaquamarine: "#66CDAA",
      mediumblue: "#0000CD",
      mediumorchid: "#BA55D3",
      mediumpurple: "#9370DB",
      mediumseagreen: "#3CB371",
      mediumslateblue: "#7B68EE",
      mediumspringgreen: "#00FA9A",
      mediumturquoise: "#48D1CC",
      mediumvioletred: "#C71585",
      midnightblue: "#191970",
      mintcream: "#F5FFFA",
      mistyrose: "#FFE4E1",
      moccasin: "#FFE4B5",
      navajowhite: "#FFDEAD",
      navy: "#000080",
      oldlace: "#FDF5E6",
      olive: "#808000",
      olivedrab: "#6B8E23",
      orange: "#FFA500",
      orangered: "#FF4500",
      orchid: "#DA70D6",
      palegoldenrod: "#EEE8AA",
      palegreen: "#98FB98",
      paleturquoise: "#AFEEEE",
      palevioletred: "#DB7093",
      papayawhip: "#FFEFD5",
      peachpuff: "#FFDAB9",
      peru: "#CD853F",
      pink: "#FFC0CB",
      plum: "#DDA0DD",
      powderblue: "#B0E0E6",
      purple: "#800080",
      rebeccapurple: "#663399",
      red: "#FF0000",
      rosybrown: "#BC8F8F",
      royalblue: "#4169E1",
      saddlebrown: "#8B4513",
      salmon: "#FA8072",
      sandybrown: "#F4A460",
      seagreen: "#2E8B57",
      seashell: "#FFF5EE",
      sienna: "#A0522D",
      silver: "#C0C0C0",
      skyblue: "#87CEEB",
      slateblue: "#6A5ACD",
      slategray: "#708090",
      slategrey: "#708090",
      snow: "#FFFAFA",
      springgreen: "#00FF7F",
      steelblue: "#4682B4",
      tan: "#D2B48C",
      teal: "#008080",
      thistle: "#D8BFD8",
      tomato: "#FF6347",
      turquoise: "#40E0D0",
      violet: "#EE82EE",
      wheat: "#F5DEB3",
      white: "#FFFFFF",
      whitesmoke: "#F5F5F5",
      yellow: "#FFFF00",
      yellowgreen: "#9ACD32"
    });
    return Color2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function stringToArray(strData, delimiter) {
    if (delimiter === void 0) {
      delimiter = ",";
    }
    var data = [];
    var isNewline = function(char) {
      return char === "\r" || char === "\n";
    };
    var insideQuotedField = false;
    if (strData === "") {
      return [[""]];
    }
    var _loop_1 = function(row2, column2, position2) {
      var previousChar = strData[position2 - 1];
      var currentChar = strData[position2];
      var nextChar = strData[position2 + 1];
      var ensureDataExists = function() {
        if (!data[row2]) {
          data[row2] = [];
        }
        if (!data[row2][column2]) {
          data[row2][column2] = "";
        }
      };
      ensureDataExists();
      if (currentChar === '"') {
        if (insideQuotedField) {
          if (nextChar === '"') {
            data[row2][column2] += '"';
            position2++;
          } else {
            insideQuotedField = false;
          }
          return out_row_1 = row2, out_column_1 = column2, out_position_1 = position2, "continue";
        } else if (previousChar === void 0 || previousChar === delimiter || isNewline(previousChar)) {
          insideQuotedField = true;
          return out_row_1 = row2, out_column_1 = column2, out_position_1 = position2, "continue";
        }
      }
      if (!insideQuotedField) {
        if (currentChar === delimiter) {
          column2++;
          ensureDataExists();
          return out_row_1 = row2, out_column_1 = column2, out_position_1 = position2, "continue";
        } else if (isNewline(currentChar)) {
          column2 = 0;
          row2++;
          ensureDataExists();
          if (currentChar === "\r" && nextChar === "\n") {
            position2++;
          }
          return out_row_1 = row2, out_column_1 = column2, out_position_1 = position2, "continue";
        }
      }
      data[row2][column2] += currentChar;
      out_row_1 = row2;
      out_column_1 = column2;
      out_position_1 = position2;
    };
    var out_row_1, out_column_1, out_position_1;
    for (var row = 0, column = 0, position = 0; position < strData.length; position++) {
      _loop_1(row, column, position);
      row = out_row_1;
      column = out_column_1;
      position = out_position_1;
    }
    return data;
  }
  var CsvUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    stringToArray
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function getNameOfClass(theClass) {
    var funcNameRegex = /function (.{1,})\(/;
    var funcAsString = theClass.toString();
    var results = funcNameRegex.exec(funcAsString);
    return results && results.length > 1 ? results[1] : "";
  }
  function findLineByLeastSquares(values2) {
    var len2 = values2.length;
    var maxDecimals = 0;
    if (len2 <= 1) {
      return values2;
    }
    for (var i2 = 0; i2 < values2.length; i2++) {
      var value = values2[i2];
      var splitExponent = value.toString().split("e-");
      if (splitExponent.length > 1) {
        maxDecimals = Math.max(maxDecimals, parseInt(splitExponent[1], 10));
        continue;
      }
      if (Math.floor(value) === value) {
        continue;
      }
      maxDecimals = Math.max(maxDecimals, value.toString().split(".")[1].length);
    }
    var sum_x = 0;
    var sum_y = 0;
    var sum_xy = 0;
    var sum_xx = 0;
    var y = 0;
    for (var x = 0; x < len2; x++) {
      y = values2[x];
      sum_x += x;
      sum_y += y;
      sum_xx += x * x;
      sum_xy += x * y;
    }
    var m = (len2 * sum_xy - sum_x * sum_y) / (len2 * sum_xx - sum_x * sum_x);
    var b = sum_y / len2 - m * sum_x / len2;
    var result = [];
    for (var x = 0; x <= len2; x++) {
      result.push(parseFloat((x * m + b).toFixed(maxDecimals)));
    }
    return result;
  }
  function cssStyleObjectToMarkup(stylesToUse) {
    if (!stylesToUse) {
      return "";
    }
    var resParts = [];
    iterateObject(stylesToUse, function(styleKey, styleValue) {
      var styleKeyDashed = camelCaseToHyphen(styleKey);
      resParts.push(styleKeyDashed + ": " + styleValue + ";");
    });
    return resParts.join(" ");
  }
  function message(msg) {
    var eMessage = document.createElement("div");
    var eBox = document.querySelector("#__ag__message");
    eMessage.innerHTML = msg;
    if (!eBox) {
      var template = '<div id="__ag__message" style="display: inline-block; position: absolute; top: 0px; left: 0px; color: white; background-color: black; z-index: 20; padding: 2px; border: 1px solid darkred; height: 200px; overflow-y: auto;"></div>';
      eBox = loadTemplate(template);
      if (document.body) {
        document.body.appendChild(eBox);
      }
    }
    eBox.insertBefore(eMessage, eBox.children[0]);
  }
  function bindCellRendererToHtmlElement(cellRendererPromise, eTarget) {
    cellRendererPromise.then(function(cellRenderer) {
      var gui = cellRenderer.getGui();
      if (gui != null) {
        if (typeof gui === "object") {
          eTarget.appendChild(gui);
        } else {
          eTarget.innerHTML = gui;
        }
      }
    });
  }
  var GeneralUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    getNameOfClass,
    findLineByLeastSquares,
    cssStyleObjectToMarkup,
    message,
    bindCellRendererToHtmlElement
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function setAriaAttribute(element2, attribute, value) {
    element2.setAttribute(ariaAttributeName(attribute), value.toString());
  }
  function removeAriaAttribute(element2, attribute) {
    element2.removeAttribute(ariaAttributeName(attribute));
  }
  function ariaAttributeName(attribute) {
    return "aria-" + attribute;
  }
  function setAriaRole(element2, role) {
    if (role) {
      element2.setAttribute("role", role);
    } else {
      element2.removeAttribute("role");
    }
  }
  function getAriaSortState(column) {
    var sort;
    if (column.isSortAscending()) {
      sort = "ascending";
    } else if (column.isSortDescending()) {
      sort = "descending";
    } else {
      sort = "none";
    }
    return sort;
  }
  function getAriaLevel(element2) {
    return parseInt(element2.getAttribute("aria-level"), 10);
  }
  function getAriaPosInSet(element2) {
    return parseInt(element2.getAttribute("aria-posinset"), 10);
  }
  function getAriaDescribedBy(element2) {
    return element2.getAttribute("aria-describedby") || "";
  }
  function setAriaLabel(element2, label) {
    var key = "label";
    if (label) {
      setAriaAttribute(element2, key, label);
    } else {
      removeAriaAttribute(element2, key);
    }
  }
  function setAriaLabelledBy(element2, labelledBy) {
    var key = "labelledby";
    if (labelledBy) {
      setAriaAttribute(element2, key, labelledBy);
    } else {
      removeAriaAttribute(element2, key);
    }
  }
  function setAriaDescribedBy(element2, describedby) {
    var key = "describedby";
    if (describedby) {
      setAriaAttribute(element2, key, describedby);
    } else {
      removeAriaAttribute(element2, key);
    }
  }
  function setAriaLevel(element2, level) {
    setAriaAttribute(element2, "level", level);
  }
  function setAriaDisabled(element2, disabled) {
    setAriaAttribute(element2, "disabled", disabled);
  }
  function setAriaExpanded(element2, expanded) {
    setAriaAttribute(element2, "expanded", expanded);
  }
  function removeAriaExpanded(element2) {
    removeAriaAttribute(element2, "expanded");
  }
  function setAriaSetSize(element2, setsize) {
    setAriaAttribute(element2, "setsize", setsize);
  }
  function setAriaPosInSet(element2, position) {
    setAriaAttribute(element2, "posinset", position);
  }
  function setAriaMultiSelectable(element2, multiSelectable) {
    setAriaAttribute(element2, "multiselectable", multiSelectable);
  }
  function setAriaRowCount(element2, rowCount) {
    setAriaAttribute(element2, "rowcount", rowCount);
  }
  function setAriaRowIndex(element2, rowIndex) {
    setAriaAttribute(element2, "rowindex", rowIndex);
  }
  function setAriaColCount(element2, colCount) {
    setAriaAttribute(element2, "colcount", colCount);
  }
  function setAriaColIndex(element2, colIndex) {
    setAriaAttribute(element2, "colindex", colIndex);
  }
  function setAriaColSpan(element2, colSpan) {
    setAriaAttribute(element2, "colspan", colSpan);
  }
  function setAriaSort(element2, sort) {
    setAriaAttribute(element2, "sort", sort);
  }
  function removeAriaSort(element2) {
    removeAriaAttribute(element2, "sort");
  }
  function setAriaSelected(element2, selected) {
    var attributeName = "selected";
    if (selected) {
      setAriaAttribute(element2, attributeName, selected);
    } else {
      removeAriaAttribute(element2, attributeName);
    }
  }
  function setAriaChecked(element2, checked) {
    setAriaAttribute(element2, "checked", checked === void 0 ? "mixed" : checked);
  }
  var AriaUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    setAriaRole,
    getAriaSortState,
    getAriaLevel,
    getAriaPosInSet,
    getAriaDescribedBy,
    setAriaLabel,
    setAriaLabelledBy,
    setAriaDescribedBy,
    setAriaLevel,
    setAriaDisabled,
    setAriaExpanded,
    removeAriaExpanded,
    setAriaSetSize,
    setAriaPosInSet,
    setAriaMultiSelectable,
    setAriaRowCount,
    setAriaRowIndex,
    setAriaColCount,
    setAriaColIndex,
    setAriaColSpan,
    setAriaSort,
    removeAriaSort,
    setAriaSelected,
    setAriaChecked
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function serialiseDate(date, includeTime, separator) {
    if (includeTime === void 0) {
      includeTime = true;
    }
    if (separator === void 0) {
      separator = "-";
    }
    if (!date) {
      return null;
    }
    var serialised = [date.getFullYear(), date.getMonth() + 1, date.getDate()].map(function(part) {
      return padStartWidthZeros(part, 2);
    }).join(separator);
    if (includeTime) {
      serialised += " " + [date.getHours(), date.getMinutes(), date.getSeconds()].map(function(part) {
        return padStartWidthZeros(part, 2);
      }).join(":");
    }
    return serialised;
  }
  function parseDateTimeFromString(value) {
    if (!value) {
      return null;
    }
    var _a = value.split(" "), dateStr = _a[0], timeStr = _a[1];
    if (!dateStr) {
      return null;
    }
    var fields = dateStr.split("-").map(function(f) {
      return parseInt(f, 10);
    });
    if (fields.filter(function(f) {
      return !isNaN(f);
    }).length !== 3) {
      return null;
    }
    var year = fields[0], month = fields[1], day = fields[2];
    var date = new Date(year, month - 1, day);
    if (date.getFullYear() !== year || date.getMonth() !== month - 1 || date.getDate() !== day) {
      return null;
    }
    if (!timeStr || timeStr === "00:00:00") {
      return date;
    }
    var _b = timeStr.split(":").map(function(part) {
      return parseInt(part, 10);
    }), hours = _b[0], minutes = _b[1], seconds = _b[2];
    if (hours >= 0 && hours < 24) {
      date.setHours(hours);
    }
    if (minutes >= 0 && minutes < 60) {
      date.setMinutes(minutes);
    }
    if (seconds >= 0 && seconds < 60) {
      date.setSeconds(seconds);
    }
    return date;
  }
  var DateUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    serialiseDate,
    parseDateTimeFromString
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function fuzzyCheckStrings(inputValues, validValues, allSuggestions) {
    var fuzzyMatches = {};
    var invalidInputs = inputValues.filter(function(inputValue) {
      return !validValues.some(function(validValue) {
        return validValue === inputValue;
      });
    });
    if (invalidInputs.length > 0) {
      invalidInputs.forEach(function(invalidInput) {
        return fuzzyMatches[invalidInput] = fuzzySuggestions(invalidInput, allSuggestions);
      });
    }
    return fuzzyMatches;
  }
  function fuzzySuggestions(inputValue, allSuggestions, hideIrrelevant, weighted) {
    var search = weighted ? string_weighted_distances : string_distances;
    var thisSuggestions = allSuggestions.map(function(text2) {
      return {
        value: text2,
        relevance: search(inputValue.toLowerCase(), text2.toLocaleLowerCase())
      };
    });
    thisSuggestions.sort(function(a, b) {
      return b.relevance - a.relevance;
    });
    if (hideIrrelevant) {
      thisSuggestions = thisSuggestions.filter(function(suggestion) {
        return suggestion.relevance !== 0;
      });
    }
    return thisSuggestions.map(function(suggestion) {
      return suggestion.value;
    });
  }
  function get_bigrams(from2) {
    var s = from2.toLowerCase();
    var v2 = new Array(s.length - 1);
    var i2;
    var j;
    var ref;
    for (i2 = j = 0, ref = v2.length; j <= ref; i2 = j += 1) {
      v2[i2] = s.slice(i2, i2 + 2);
    }
    return v2;
  }
  function string_distances(str1, str2) {
    if (str1.length === 0 && str2.length === 0) {
      return 0;
    }
    var pairs1 = get_bigrams(str1);
    var pairs2 = get_bigrams(str2);
    var union = pairs1.length + pairs2.length;
    var hit_count = 0;
    var j;
    var len2;
    for (j = 0, len2 = pairs1.length; j < len2; j++) {
      var x = pairs1[j];
      var k = void 0;
      var len1 = void 0;
      for (k = 0, len1 = pairs2.length; k < len1; k++) {
        var y = pairs2[k];
        if (x === y) {
          hit_count++;
        }
      }
    }
    return hit_count > 0 ? 2 * hit_count / union : 0;
  }
  function string_weighted_distances(str1, str2) {
    var a = str1.replace(/\s/g, "");
    var b = str2.replace(/\s/g, "");
    var weight = 0;
    var lastIndex = 0;
    for (var i2 = 0; i2 < a.length; i2++) {
      var idx = b.indexOf(a[i2], lastIndex);
      if (idx === -1) {
        continue;
      }
      lastIndex = idx;
      weight += 100 - lastIndex * 100 / 1e4 * 100;
    }
    return weight;
  }
  var FuzzyMatchUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    fuzzyCheckStrings,
    fuzzySuggestions,
    get_bigrams,
    string_distances,
    string_weighted_distances
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var iconNameClassMap = {
    columnGroupOpened: "expanded",
    columnGroupClosed: "contracted",
    columnSelectClosed: "tree-closed",
    columnSelectOpen: "tree-open",
    columnSelectIndeterminate: "tree-indeterminate",
    columnMovePin: "pin",
    columnMoveHide: "eye-slash",
    columnMoveMove: "arrows",
    columnMoveLeft: "left",
    columnMoveRight: "right",
    columnMoveGroup: "group",
    columnMoveValue: "aggregation",
    columnMovePivot: "pivot",
    dropNotAllowed: "not-allowed",
    groupContracted: "tree-closed",
    groupExpanded: "tree-open",
    chart: "chart",
    close: "cross",
    cancel: "cancel",
    check: "tick",
    first: "first",
    previous: "previous",
    next: "next",
    last: "last",
    linked: "linked",
    unlinked: "unlinked",
    colorPicker: "color-picker",
    groupLoading: "loading",
    menu: "menu",
    filter: "filter",
    columns: "columns",
    maximize: "maximize",
    minimize: "minimize",
    menuPin: "pin",
    menuValue: "aggregation",
    menuAddRowGroup: "group",
    menuRemoveRowGroup: "group",
    clipboardCopy: "copy",
    clipboardPaste: "paste",
    pivotPanel: "pivot",
    rowGroupPanel: "group",
    valuePanel: "aggregation",
    columnDrag: "grip",
    rowDrag: "grip",
    save: "save",
    csvExport: "csv",
    excelExport: "excel",
    smallDown: "small-down",
    smallLeft: "small-left",
    smallRight: "small-right",
    smallUp: "small-up",
    sortAscending: "asc",
    sortDescending: "desc",
    sortUnSort: "none"
  };
  function createIcon(iconName, gridOptionsWrapper, column) {
    var iconContents = createIconNoSpan(iconName, gridOptionsWrapper, column);
    if (iconContents && iconContents.className.indexOf("ag-icon") > -1) {
      return iconContents;
    }
    var eResult = document.createElement("span");
    eResult.appendChild(iconContents);
    return eResult;
  }
  function createIconNoSpan(iconName, gridOptionsWrapper, column, forceCreate) {
    var userProvidedIcon = null;
    var icons = column && column.getColDef().icons;
    if (icons) {
      userProvidedIcon = icons[iconName];
    }
    if (gridOptionsWrapper && !userProvidedIcon) {
      var optionsIcons = gridOptionsWrapper.getIcons();
      if (optionsIcons) {
        userProvidedIcon = optionsIcons[iconName];
      }
    }
    if (userProvidedIcon) {
      var rendererResult = void 0;
      if (typeof userProvidedIcon === "function") {
        rendererResult = userProvidedIcon();
      } else if (typeof userProvidedIcon === "string") {
        rendererResult = userProvidedIcon;
      } else {
        throw new Error("icon from grid options needs to be a string or a function");
      }
      if (typeof rendererResult === "string") {
        return loadTemplate(rendererResult);
      }
      if (isNodeOrElement(rendererResult)) {
        return rendererResult;
      }
      console.warn("AG Grid: iconRenderer should return back a string or a dom object");
    } else {
      var span = document.createElement("span");
      var cssClass = iconNameClassMap[iconName];
      if (!cssClass) {
        if (!forceCreate) {
          console.warn("AG Grid: Did not find icon " + iconName);
          cssClass = "";
        } else {
          cssClass = iconName;
        }
      }
      span.setAttribute("class", "ag-icon ag-icon-" + cssClass);
      span.setAttribute("unselectable", "on");
      setAriaRole(span, "presentation");
      return span;
    }
  }
  var IconUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    iconNameClassMap,
    createIcon,
    createIconNoSpan
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var NUMPAD_DEL_NUMLOCK_ON_KEY = "Del";
  var NUMPAD_DEL_NUMLOCK_ON_CHARCODE = 46;
  function isKeyPressed(event, keyToCheck) {
    return (event.which || event.keyCode) === keyToCheck;
  }
  function isEventFromPrintableCharacter(event) {
    if (event.altKey || event.ctrlKey || event.metaKey) {
      return false;
    }
    var printableCharacter = event.key.length === 1;
    var numpadDelWithNumlockOnForEdgeOrIe = isNumpadDelWithNumlockOnForEdgeOrIe(event);
    return printableCharacter || numpadDelWithNumlockOnForEdgeOrIe;
  }
  function isUserSuppressingKeyboardEvent(gridOptionsWrapper, keyboardEvent, rowNode, column, editing) {
    var gridOptionsFunc = gridOptionsWrapper.getSuppressKeyboardEventFunc();
    var colDefFunc = column ? column.getColDef().suppressKeyboardEvent : void 0;
    if (!gridOptionsFunc && !colDefFunc) {
      return false;
    }
    var params2 = {
      event: keyboardEvent,
      editing,
      column,
      api: gridOptionsWrapper.getApi(),
      node: rowNode,
      data: rowNode.data,
      colDef: column.getColDef(),
      context: gridOptionsWrapper.getContext(),
      columnApi: gridOptionsWrapper.getColumnApi()
    };
    if (colDefFunc) {
      var colDefFuncResult = colDefFunc(params2);
      if (colDefFuncResult) {
        return true;
      }
    }
    if (gridOptionsFunc) {
      return gridOptionsFunc(params2);
    }
    return false;
  }
  function isUserSuppressingHeaderKeyboardEvent(gridOptionsWrapper, keyboardEvent, headerRowIndex, column) {
    var colDef = column.getDefinition();
    var colDefFunc = colDef && colDef.suppressHeaderKeyboardEvent;
    if (!exists(colDefFunc)) {
      return false;
    }
    var params2 = {
      api: gridOptionsWrapper.getApi(),
      columnApi: gridOptionsWrapper.getColumnApi(),
      context: gridOptionsWrapper.getContext(),
      colDef,
      column,
      headerRowIndex,
      event: keyboardEvent
    };
    return !!colDefFunc(params2);
  }
  function isNumpadDelWithNumlockOnForEdgeOrIe(event) {
    return (isBrowserEdge() || isBrowserIE()) && event.key === NUMPAD_DEL_NUMLOCK_ON_KEY && event.charCode === NUMPAD_DEL_NUMLOCK_ON_CHARCODE;
  }
  var KeyboardUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    isKeyPressed,
    isEventFromPrintableCharacter,
    isUserSuppressingKeyboardEvent,
    isUserSuppressingHeaderKeyboardEvent
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function normalizeWheel(event) {
    var PIXEL_STEP = 10;
    var LINE_HEIGHT = 40;
    var PAGE_HEIGHT = 800;
    var sX = 0;
    var sY = 0;
    var pX = 0;
    var pY = 0;
    if ("detail" in event) {
      sY = event.detail;
    }
    if ("wheelDelta" in event) {
      sY = -event.wheelDelta / 120;
    }
    if ("wheelDeltaY" in event) {
      sY = -event.wheelDeltaY / 120;
    }
    if ("wheelDeltaX" in event) {
      sX = -event.wheelDeltaX / 120;
    }
    if ("axis" in event && event.axis === event.HORIZONTAL_AXIS) {
      sX = sY;
      sY = 0;
    }
    pX = sX * PIXEL_STEP;
    pY = sY * PIXEL_STEP;
    if ("deltaY" in event) {
      pY = event.deltaY;
    }
    if ("deltaX" in event) {
      pX = event.deltaX;
    }
    if ((pX || pY) && event.deltaMode) {
      if (event.deltaMode == 1) {
        pX *= LINE_HEIGHT;
        pY *= LINE_HEIGHT;
      } else {
        pX *= PAGE_HEIGHT;
        pY *= PAGE_HEIGHT;
      }
    }
    if (pX && !sX) {
      sX = pX < 1 ? -1 : 1;
    }
    if (pY && !sY) {
      sY = pY < 1 ? -1 : 1;
    }
    return {
      spinX: sX,
      spinY: sY,
      pixelX: pX,
      pixelY: pY
    };
  }
  function isLeftClick(mouseEvent) {
    if ("buttons" in mouseEvent) {
      return mouseEvent.buttons == 1;
    }
    var button = mouseEvent.which || mouseEvent.button;
    return button == 1;
  }
  function areEventsNear(e1, e2, pixelCount) {
    if (pixelCount === 0) {
      return false;
    }
    var diffX = Math.abs(e1.clientX - e2.clientX);
    var diffY = Math.abs(e1.clientY - e2.clientY);
    return Math.max(diffX, diffY) <= pixelCount;
  }
  var MouseUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    normalizeWheel,
    isLeftClick,
    areEventsNear
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function sortRowNodesByOrder(rowNodes, rowNodeOrder) {
    if (!rowNodes) {
      return;
    }
    var comparator = function(nodeA, nodeB) {
      var positionA = rowNodeOrder[nodeA.id];
      var positionB = rowNodeOrder[nodeB.id];
      var aHasIndex = positionA !== void 0;
      var bHasIndex = positionB !== void 0;
      var bothNodesAreUserNodes = aHasIndex && bHasIndex;
      var bothNodesAreFillerNodes = !aHasIndex && !bHasIndex;
      if (bothNodesAreUserNodes) {
        return positionA - positionB;
      }
      if (bothNodesAreFillerNodes) {
        return nodeA.__objectId - nodeB.__objectId;
      }
      if (aHasIndex) {
        return 1;
      }
      return -1;
    };
    var rowNodeA;
    var rowNodeB;
    var atLeastOneOutOfOrder = false;
    for (var i2 = 0; i2 < rowNodes.length - 1; i2++) {
      rowNodeA = rowNodes[i2];
      rowNodeB = rowNodes[i2 + 1];
      if (comparator(rowNodeA, rowNodeB) > 0) {
        atLeastOneOutOfOrder = true;
        break;
      }
    }
    if (atLeastOneOutOfOrder) {
      rowNodes.sort(comparator);
    }
  }
  function traverseNodesWithKey(nodes, callback) {
    var keyParts = [];
    recursiveSearchNodes(nodes);
    function recursiveSearchNodes(currentNodes) {
      if (!currentNodes) {
        return;
      }
      currentNodes.forEach(function(node) {
        if (node.group || node.hasChildren()) {
          keyParts.push(node.key);
          var key = keyParts.join("|");
          callback(node, key);
          recursiveSearchNodes(node.childrenAfterGroup);
          keyParts.pop();
        }
      });
    }
  }
  var RowNodeUtils = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    sortRowNodesByOrder,
    traverseNodesWithKey
  });
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __assign$2 = function() {
    __assign$2 = Object.assign || function(t) {
      for (var s, i2 = 1, n = arguments.length; i2 < n; i2++) {
        s = arguments[i2];
        for (var p2 in s)
          if (Object.prototype.hasOwnProperty.call(s, p2))
            t[p2] = s[p2];
      }
      return t;
    };
    return __assign$2.apply(this, arguments);
  };
  var utils = __assign$2(__assign$2(__assign$2(__assign$2(__assign$2(__assign$2(__assign$2(__assign$2(__assign$2(__assign$2(__assign$2(__assign$2(__assign$2(__assign$2(__assign$2(__assign$2(__assign$2(__assign$2(__assign$2(__assign$2({}, GeneralUtils), AriaUtils), ArrayUtils), BrowserUtils), CsvUtils), DateUtils), DomUtils), EventUtils), FunctionUtils), FuzzyMatchUtils), GenericUtils), IconUtils), KeyboardUtils), MapUtils), MouseUtils), NumberUtils), ObjectUtils), RowNodeUtils), SetUtils), StringUtils);
  var _ = utils;
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var NumberSequence = function() {
    function NumberSequence2(initValue, step) {
      if (initValue === void 0) {
        initValue = 0;
      }
      if (step === void 0) {
        step = 1;
      }
      this.nextValue = initValue;
      this.step = step;
    }
    NumberSequence2.prototype.next = function() {
      var valToReturn = this.nextValue;
      this.nextValue += this.step;
      return valToReturn;
    };
    NumberSequence2.prototype.peek = function() {
      return this.nextValue;
    };
    NumberSequence2.prototype.skip = function(count) {
      this.nextValue += count;
    };
    return NumberSequence2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  (function(AgPromiseStatus) {
    AgPromiseStatus[AgPromiseStatus["IN_PROGRESS"] = 0] = "IN_PROGRESS";
    AgPromiseStatus[AgPromiseStatus["RESOLVED"] = 1] = "RESOLVED";
  })(exports2.AgPromiseStatus || (exports2.AgPromiseStatus = {}));
  var AgPromise = function() {
    function AgPromise2(callback) {
      var _this = this;
      this.status = exports2.AgPromiseStatus.IN_PROGRESS;
      this.resolution = null;
      this.waiters = [];
      callback(function(value) {
        return _this.onDone(value);
      }, function(params2) {
        return _this.onReject(params2);
      });
    }
    AgPromise2.all = function(promises) {
      return new AgPromise2(function(resolve) {
        var remainingToResolve = promises.length;
        var combinedValues = new Array(remainingToResolve);
        forEach(promises, function(promise2, index) {
          promise2.then(function(value) {
            combinedValues[index] = value;
            remainingToResolve--;
            if (remainingToResolve === 0) {
              resolve(combinedValues);
            }
          });
        });
      });
    };
    AgPromise2.resolve = function(value) {
      if (value === void 0) {
        value = null;
      }
      return new AgPromise2(function(resolve) {
        return resolve(value);
      });
    };
    AgPromise2.prototype.then = function(func) {
      var _this = this;
      return new AgPromise2(function(resolve) {
        if (_this.status === exports2.AgPromiseStatus.RESOLVED) {
          resolve(func(_this.resolution));
        } else {
          _this.waiters.push(function(value) {
            return resolve(func(value));
          });
        }
      });
    };
    AgPromise2.prototype.resolveNow = function(ifNotResolvedValue, ifResolved) {
      return this.status === exports2.AgPromiseStatus.RESOLVED ? ifResolved(this.resolution) : ifNotResolvedValue;
    };
    AgPromise2.prototype.onDone = function(value) {
      this.status = exports2.AgPromiseStatus.RESOLVED;
      this.resolution = value;
      forEach(this.waiters, function(waiter) {
        return waiter(value);
      });
    };
    AgPromise2.prototype.onReject = function(params2) {
      console.warn("TBI");
    };
    return AgPromise2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var Timer = function() {
    function Timer2() {
      this.timestamp = new Date().getTime();
    }
    Timer2.prototype.print = function(msg) {
      var duration = new Date().getTime() - this.timestamp;
      console.info(msg + " = " + duration);
      this.timestamp = new Date().getTime();
    };
    return Timer2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$6 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __assign$3 = function() {
    __assign$3 = Object.assign || function(t) {
      for (var s, i2 = 1, n = arguments.length; i2 < n; i2++) {
        s = arguments[i2];
        for (var p2 in s)
          if (Object.prototype.hasOwnProperty.call(s, p2))
            t[p2] = s[p2];
      }
      return t;
    };
    return __assign$3.apply(this, arguments);
  };
  var __decorate$a = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var TooltipStates;
  (function(TooltipStates2) {
    TooltipStates2[TooltipStates2["NOTHING"] = 0] = "NOTHING";
    TooltipStates2[TooltipStates2["WAITING_TO_SHOW"] = 1] = "WAITING_TO_SHOW";
    TooltipStates2[TooltipStates2["SHOWING"] = 2] = "SHOWING";
  })(TooltipStates || (TooltipStates = {}));
  var CustomTooltipFeature = function(_super) {
    __extends$6(CustomTooltipFeature2, _super);
    function CustomTooltipFeature2(parentComp) {
      var _this = _super.call(this) || this;
      _this.DEFAULT_HIDE_TOOLTIP_TIMEOUT = 1e4;
      _this.SHOW_QUICK_TOOLTIP_DIFF = 1e3;
      _this.FADE_OUT_TOOLTIP_TIMEOUT = 1e3;
      _this.state = TooltipStates.NOTHING;
      _this.tooltipInstanceCount = 0;
      _this.tooltipMouseTrack = false;
      _this.parentComp = parentComp;
      return _this;
    }
    CustomTooltipFeature2.prototype.postConstruct = function() {
      this.tooltipShowDelay = this.gridOptionsWrapper.getTooltipShowDelay() || 2e3;
      this.tooltipMouseTrack = this.gridOptionsWrapper.isTooltipMouseTrack();
      var el = this.parentComp.getGui();
      this.addManagedListener(el, "mouseenter", this.onMouseEnter.bind(this));
      this.addManagedListener(el, "mouseleave", this.onMouseLeave.bind(this));
      this.addManagedListener(el, "mousemove", this.onMouseMove.bind(this));
      this.addManagedListener(el, "mousedown", this.onMouseDown.bind(this));
      this.addManagedListener(el, "keydown", this.onKeyDown.bind(this));
    };
    CustomTooltipFeature2.prototype.destroy = function() {
      this.setToDoNothing();
      _super.prototype.destroy.call(this);
    };
    CustomTooltipFeature2.prototype.onMouseEnter = function(e) {
      if (this.state != TooltipStates.NOTHING) {
        return;
      }
      var delay = this.isLastTooltipHiddenRecently() ? 200 : this.tooltipShowDelay;
      this.showTooltipTimeoutId = window.setTimeout(this.showTooltip.bind(this), delay);
      this.lastMouseEvent = e;
      this.state = TooltipStates.WAITING_TO_SHOW;
    };
    CustomTooltipFeature2.prototype.onMouseLeave = function() {
      this.setToDoNothing();
    };
    CustomTooltipFeature2.prototype.onKeyDown = function() {
      this.setToDoNothing();
    };
    CustomTooltipFeature2.prototype.setToDoNothing = function() {
      if (this.state === TooltipStates.SHOWING) {
        this.hideTooltip();
      }
      this.clearTimeouts();
      this.state = TooltipStates.NOTHING;
    };
    CustomTooltipFeature2.prototype.onMouseMove = function(e) {
      this.lastMouseEvent = e;
      if (this.tooltipMouseTrack && this.state === TooltipStates.SHOWING && this.tooltipComp) {
        this.positionTooltipUnderLastMouseEvent();
      }
    };
    CustomTooltipFeature2.prototype.onMouseDown = function() {
      this.setToDoNothing();
    };
    CustomTooltipFeature2.prototype.hideTooltip = function() {
      if (this.tooltipComp) {
        this.destroyTooltipComp();
        CustomTooltipFeature2.lastTooltipHideTime = new Date().getTime();
      }
      this.state = TooltipStates.NOTHING;
    };
    CustomTooltipFeature2.prototype.destroyTooltipComp = function() {
      var _this = this;
      addCssClass(this.tooltipComp.getGui(), "ag-tooltip-hiding");
      var tooltipPopupDestroyFunc = this.tooltipPopupDestroyFunc;
      var tooltipComp = this.tooltipComp;
      window.setTimeout(function() {
        tooltipPopupDestroyFunc();
        _this.getContext().destroyBean(tooltipComp);
      }, this.FADE_OUT_TOOLTIP_TIMEOUT);
      this.tooltipPopupDestroyFunc = void 0;
      this.tooltipComp = void 0;
    };
    CustomTooltipFeature2.prototype.isLastTooltipHiddenRecently = function() {
      var now2 = new Date().getTime();
      var then = CustomTooltipFeature2.lastTooltipHideTime;
      return now2 - then < this.SHOW_QUICK_TOOLTIP_DIFF;
    };
    CustomTooltipFeature2.prototype.showTooltip = function() {
      var params2 = __assign$3({ api: this.gridApi, columnApi: this.columnApi, context: this.gridOptionsWrapper.getContext() }, this.parentComp.getTooltipParams());
      if (!exists(params2.value)) {
        this.setToDoNothing();
        return;
      }
      this.state = TooltipStates.SHOWING;
      this.tooltipInstanceCount++;
      var callback = this.newTooltipComponentCallback.bind(this, this.tooltipInstanceCount);
      this.userComponentFactory.newTooltipComponent(params2).then(callback);
    };
    CustomTooltipFeature2.prototype.newTooltipComponentCallback = function(tooltipInstanceCopy, tooltipComp) {
      var compNoLongerNeeded = this.state !== TooltipStates.SHOWING || this.tooltipInstanceCount !== tooltipInstanceCopy;
      if (compNoLongerNeeded) {
        this.getContext().destroyBean(tooltipComp);
        return;
      }
      var eGui = tooltipComp.getGui();
      this.tooltipComp = tooltipComp;
      if (!containsClass(eGui, "ag-tooltip")) {
        addCssClass(eGui, "ag-tooltip-custom");
      }
      var translate = this.gridOptionsWrapper.getLocaleTextFunc();
      var addPopupRes = this.popupService.addPopup({
        eChild: eGui,
        ariaLabel: translate("ariaLabelTooltip", "Tooltip")
      });
      if (addPopupRes) {
        this.tooltipPopupDestroyFunc = addPopupRes.hideFunc;
      }
      this.positionTooltipUnderLastMouseEvent();
      this.hideTooltipTimeoutId = window.setTimeout(this.hideTooltip.bind(this), this.DEFAULT_HIDE_TOOLTIP_TIMEOUT);
    };
    CustomTooltipFeature2.prototype.positionTooltipUnderLastMouseEvent = function() {
      this.popupService.positionPopupUnderMouseEvent({
        type: "tooltip",
        mouseEvent: this.lastMouseEvent,
        ePopup: this.tooltipComp.getGui(),
        nudgeY: 18
      });
    };
    CustomTooltipFeature2.prototype.clearTimeouts = function() {
      if (this.showTooltipTimeoutId) {
        window.clearTimeout(this.showTooltipTimeoutId);
        this.showTooltipTimeoutId = void 0;
      }
      if (this.hideTooltipTimeoutId) {
        window.clearTimeout(this.hideTooltipTimeoutId);
        this.hideTooltipTimeoutId = void 0;
      }
    };
    __decorate$a([
      Autowired("popupService")
    ], CustomTooltipFeature2.prototype, "popupService", void 0);
    __decorate$a([
      Autowired("userComponentFactory")
    ], CustomTooltipFeature2.prototype, "userComponentFactory", void 0);
    __decorate$a([
      Autowired("columnApi")
    ], CustomTooltipFeature2.prototype, "columnApi", void 0);
    __decorate$a([
      Autowired("gridApi")
    ], CustomTooltipFeature2.prototype, "gridApi", void 0);
    __decorate$a([
      PostConstruct
    ], CustomTooltipFeature2.prototype, "postConstruct", null);
    return CustomTooltipFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$7 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$b = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var compIdSequence = new NumberSequence();
  var Component = function(_super) {
    __extends$7(Component2, _super);
    function Component2(template) {
      var _this = _super.call(this) || this;
      _this.displayed = true;
      _this.visible = true;
      _this.compId = compIdSequence.next();
      _this.cssClassStates = {};
      if (template) {
        _this.setTemplate(template);
      }
      return _this;
    }
    Component2.prototype.preConstructOnComponent = function() {
      this.usingBrowserTooltips = this.gridOptionsWrapper.isEnableBrowserTooltips();
    };
    Component2.prototype.getCompId = function() {
      return this.compId;
    };
    Component2.prototype.getTooltipParams = function() {
      return {
        value: this.tooltipText,
        location: "UNKNOWN"
      };
    };
    Component2.prototype.setTooltip = function(newTooltipText) {
      var _this = this;
      var removeTooltip = function() {
        if (_this.usingBrowserTooltips) {
          _this.getGui().removeAttribute("title");
        } else {
          _this.tooltipFeature = _this.destroyBean(_this.tooltipFeature);
        }
      };
      var addTooltip = function() {
        if (_this.usingBrowserTooltips) {
          _this.getGui().setAttribute("title", _this.tooltipText);
        } else {
          _this.tooltipFeature = _this.createBean(new CustomTooltipFeature(_this));
        }
      };
      if (this.tooltipText != newTooltipText) {
        if (this.tooltipText) {
          removeTooltip();
        }
        if (newTooltipText != null) {
          this.tooltipText = newTooltipText;
          if (this.tooltipText) {
            addTooltip();
          }
        }
      }
    };
    Component2.prototype.createChildComponentsFromTags = function(parentNode, paramsMap) {
      var _this = this;
      var childNodeList = copyNodeList(parentNode.childNodes);
      forEach(childNodeList, function(childNode) {
        if (!(childNode instanceof HTMLElement)) {
          return;
        }
        var childComp = _this.createComponentFromElement(childNode, function(childComp2) {
          var childGui = childComp2.getGui();
          if (childGui) {
            _this.copyAttributesFromNode(childNode, childComp2.getGui());
          }
        }, paramsMap);
        if (childComp) {
          if (childComp.addItems && childNode.children.length) {
            _this.createChildComponentsFromTags(childNode, paramsMap);
            var items = Array.prototype.slice.call(childNode.children);
            childComp.addItems(items);
          }
          _this.swapComponentForNode(childComp, parentNode, childNode);
        } else if (childNode.childNodes) {
          _this.createChildComponentsFromTags(childNode, paramsMap);
        }
      });
    };
    Component2.prototype.createComponentFromElement = function(element2, afterPreCreateCallback, paramsMap) {
      var key = element2.nodeName;
      var componentParams = paramsMap ? paramsMap[element2.getAttribute("ref")] : void 0;
      var ComponentClass = this.agStackComponentsRegistry.getComponentClass(key);
      if (ComponentClass) {
        Component2.elementGettingCreated = element2;
        var newComponent = new ComponentClass(componentParams);
        newComponent.setParentComponent(this);
        this.createBean(newComponent, null, afterPreCreateCallback);
        return newComponent;
      }
      return null;
    };
    Component2.prototype.copyAttributesFromNode = function(source, dest) {
      iterateNamedNodeMap(source.attributes, function(name, value) {
        return dest.setAttribute(name, value);
      });
    };
    Component2.prototype.swapComponentForNode = function(newComponent, parentNode, childNode) {
      var eComponent = newComponent.getGui();
      parentNode.replaceChild(eComponent, childNode);
      parentNode.insertBefore(document.createComment(childNode.nodeName), eComponent);
      this.addDestroyFunc(this.destroyBean.bind(this, newComponent));
      this.swapInComponentForQuerySelectors(newComponent, childNode);
    };
    Component2.prototype.swapInComponentForQuerySelectors = function(newComponent, childNode) {
      var thisNoType = this;
      this.iterateOverQuerySelectors(function(querySelector) {
        if (thisNoType[querySelector.attributeName] === childNode) {
          thisNoType[querySelector.attributeName] = newComponent;
        }
      });
    };
    Component2.prototype.iterateOverQuerySelectors = function(action) {
      var thisPrototype = Object.getPrototypeOf(this);
      while (thisPrototype != null) {
        var metaData = thisPrototype.__agComponentMetaData;
        var currentProtoName = getFunctionName(thisPrototype.constructor);
        if (metaData && metaData[currentProtoName] && metaData[currentProtoName].querySelectors) {
          forEach(metaData[currentProtoName].querySelectors, function(querySelector) {
            return action(querySelector);
          });
        }
        thisPrototype = Object.getPrototypeOf(thisPrototype);
      }
    };
    Component2.prototype.setTemplate = function(template, paramsMap) {
      var eGui = loadTemplate(template);
      this.setTemplateFromElement(eGui, paramsMap);
    };
    Component2.prototype.setTemplateFromElement = function(element2, paramsMap) {
      this.eGui = element2;
      this.eGui.__agComponent = this;
      this.wireQuerySelectors();
      if (!!this.getContext()) {
        this.createChildComponentsFromTags(this.getGui(), paramsMap);
      }
    };
    Component2.prototype.createChildComponentsPreConstruct = function() {
      if (!!this.getGui()) {
        this.createChildComponentsFromTags(this.getGui());
      }
    };
    Component2.prototype.wireQuerySelectors = function() {
      var _this = this;
      if (!this.eGui) {
        return;
      }
      var thisNoType = this;
      this.iterateOverQuerySelectors(function(querySelector) {
        var setResult = function(result) {
          return thisNoType[querySelector.attributeName] = result;
        };
        var topLevelRefMatch = querySelector.refSelector && _this.eGui.getAttribute("ref") === querySelector.refSelector;
        if (topLevelRefMatch) {
          setResult(_this.eGui);
        } else {
          var resultOfQuery = _this.eGui.querySelector(querySelector.querySelector);
          if (resultOfQuery) {
            setResult(resultOfQuery.__agComponent || resultOfQuery);
          }
        }
      });
    };
    Component2.prototype.getGui = function() {
      return this.eGui;
    };
    Component2.prototype.getFocusableElement = function() {
      return this.eGui;
    };
    Component2.prototype.setParentComponent = function(component) {
      this.parentComponent = component;
    };
    Component2.prototype.getParentComponent = function() {
      return this.parentComponent;
    };
    Component2.prototype.setGui = function(eGui) {
      this.eGui = eGui;
    };
    Component2.prototype.queryForHtmlElement = function(cssSelector) {
      return this.eGui.querySelector(cssSelector);
    };
    Component2.prototype.queryForHtmlInputElement = function(cssSelector) {
      return this.eGui.querySelector(cssSelector);
    };
    Component2.prototype.appendChild = function(newChild, container) {
      if (!container) {
        container = this.eGui;
      }
      if (newChild == null) {
        return;
      }
      if (isNodeOrElement(newChild)) {
        container.appendChild(newChild);
      } else {
        var childComponent = newChild;
        container.appendChild(childComponent.getGui());
        this.addDestroyFunc(this.destroyBean.bind(this, childComponent));
      }
    };
    Component2.prototype.isDisplayed = function() {
      return this.displayed;
    };
    Component2.prototype.setVisible = function(visible) {
      if (visible !== this.visible) {
        this.visible = visible;
        setVisible(this.eGui, visible);
      }
    };
    Component2.prototype.setDisplayed = function(displayed) {
      if (displayed !== this.displayed) {
        this.displayed = displayed;
        setDisplayed(this.eGui, displayed);
        var event_1 = {
          type: Component2.EVENT_DISPLAYED_CHANGED,
          visible: this.displayed
        };
        this.dispatchEvent(event_1);
      }
    };
    Component2.prototype.destroy = function() {
      if (this.tooltipFeature) {
        this.tooltipFeature = this.destroyBean(this.tooltipFeature);
      }
      _super.prototype.destroy.call(this);
    };
    Component2.prototype.addGuiEventListener = function(event, listener) {
      var _this = this;
      this.eGui.addEventListener(event, listener);
      this.addDestroyFunc(function() {
        return _this.eGui.removeEventListener(event, listener);
      });
    };
    Component2.prototype.addCssClass = function(className) {
      var updateNeeded = this.cssClassStates[className] !== true;
      if (updateNeeded) {
        addCssClass(this.eGui, className);
        this.cssClassStates[className] = true;
      }
    };
    Component2.prototype.removeCssClass = function(className) {
      var updateNeeded = this.cssClassStates[className] !== false;
      if (updateNeeded) {
        removeCssClass(this.eGui, className);
        this.cssClassStates[className] = false;
      }
    };
    Component2.prototype.addOrRemoveCssClass = function(className, addOrRemove) {
      var updateNeeded = this.cssClassStates[className] !== addOrRemove;
      if (updateNeeded) {
        addOrRemoveCssClass(this.eGui, className, addOrRemove);
        this.cssClassStates[className] = addOrRemove;
      }
    };
    Component2.prototype.getAttribute = function(key) {
      var eGui = this.eGui;
      return eGui ? eGui.getAttribute(key) : null;
    };
    Component2.prototype.getRefElement = function(refName) {
      return this.queryForHtmlElement('[ref="' + refName + '"]');
    };
    Component2.EVENT_DISPLAYED_CHANGED = "displayedChanged";
    __decorate$b([
      Autowired("agStackComponentsRegistry")
    ], Component2.prototype, "agStackComponentsRegistry", void 0);
    __decorate$b([
      PreConstruct
    ], Component2.prototype, "preConstructOnComponent", null);
    __decorate$b([
      PreConstruct
    ], Component2.prototype, "createChildComponentsPreConstruct", null);
    return Component2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$8 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$c = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ProvidedFilter = function(_super) {
    __extends$8(ProvidedFilter2, _super);
    function ProvidedFilter2(filterNameKey) {
      var _this = _super.call(this) || this;
      _this.filterNameKey = filterNameKey;
      _this.applyActive = false;
      _this.hidePopup = null;
      _this.appliedModel = null;
      return _this;
    }
    ProvidedFilter2.prototype.postConstruct = function() {
      this.resetTemplate();
      this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(), {
        handleKeyDown: this.handleKeyDown.bind(this)
      }));
    };
    ProvidedFilter2.prototype.handleKeyDown = function(e) {
    };
    ProvidedFilter2.prototype.getFilterTitle = function() {
      return this.translate(this.filterNameKey);
    };
    ProvidedFilter2.prototype.onFilterChanged = function() {
      console.warn("AG Grid: you should not call onFilterChanged() directly on the filter, please call\n        gridApi.onFilterChanged() instead. onFilterChanged is not part of the exposed filter interface (it was\n        a method that existed on an old version of the filters that was not intended for public use.");
      this.providedFilterParams.filterChangedCallback();
    };
    ProvidedFilter2.prototype.isFilterActive = function() {
      return !!this.appliedModel;
    };
    ProvidedFilter2.prototype.resetTemplate = function(paramsMap) {
      var templateString = '\n            <div class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-' + this.getCssIdentifier() + '-body-wrapper">\n                    ' + this.createBodyTemplate() + "\n                </div>\n            </div>";
      this.setTemplate(templateString, paramsMap);
    };
    ProvidedFilter2.prototype.init = function(params2) {
      var _this = this;
      this.setParams(params2);
      this.resetUiToDefaults(true).then(function() {
        _this.updateUiVisibility();
        _this.setupOnBtApplyDebounce();
      });
    };
    ProvidedFilter2.prototype.setParams = function(params2) {
      ProvidedFilter2.checkForDeprecatedParams(params2);
      this.providedFilterParams = params2;
      if (params2.newRowsAction === "keep") {
        this.newRowsActionKeep = true;
      } else if (params2.newRowsAction === "clear") {
        this.newRowsActionKeep = false;
      } else {
        var modelsForKeep = [Constants.ROW_MODEL_TYPE_SERVER_SIDE, Constants.ROW_MODEL_TYPE_INFINITE];
        this.newRowsActionKeep = modelsForKeep.indexOf(this.rowModel.getType()) >= 0;
      }
      this.applyActive = ProvidedFilter2.isUseApplyButton(params2);
      this.createButtonPanel();
    };
    ProvidedFilter2.prototype.createButtonPanel = function() {
      var _this = this;
      var buttons = this.providedFilterParams.buttons;
      if (!buttons || buttons.length < 1) {
        return;
      }
      var eButtonsPanel = document.createElement("div");
      addCssClass(eButtonsPanel, "ag-filter-apply-panel");
      var addButton = function(type) {
        var text2;
        var clickListener;
        switch (type) {
          case "apply":
            text2 = _this.translate("applyFilter");
            clickListener = function(e) {
              return _this.onBtApply(false, false, e);
            };
            break;
          case "clear":
            text2 = _this.translate("clearFilter");
            clickListener = function() {
              return _this.onBtClear();
            };
            break;
          case "reset":
            text2 = _this.translate("resetFilter");
            clickListener = function() {
              return _this.onBtReset();
            };
            break;
          case "cancel":
            text2 = _this.translate("cancelFilter");
            clickListener = function(e) {
              _this.onBtCancel(e);
            };
            break;
          default:
            console.warn("Unknown button type specified");
            return;
        }
        var button = loadTemplate('<button\n                    type="button"\n                    ref="' + type + 'FilterButton"\n                    class="ag-standard-button ag-filter-apply-panel-button"\n                >' + text2 + "\n                </button>");
        eButtonsPanel.appendChild(button);
        _this.addManagedListener(button, "click", clickListener);
      };
      convertToSet(buttons).forEach(function(type) {
        return addButton(type);
      });
      this.getGui().appendChild(eButtonsPanel);
    };
    ProvidedFilter2.checkForDeprecatedParams = function(params2) {
      var buttons = params2.buttons || [];
      if (buttons.length > 0) {
        return;
      }
      var applyButton = params2.applyButton, resetButton = params2.resetButton, clearButton = params2.clearButton;
      if (clearButton) {
        console.warn("AG Grid: as of AG Grid v23.2, filterParams.clearButton is deprecated. Please use filterParams.buttons instead");
        buttons.push("clear");
      }
      if (resetButton) {
        console.warn("AG Grid: as of AG Grid v23.2, filterParams.resetButton is deprecated. Please use filterParams.buttons instead");
        buttons.push("reset");
      }
      if (applyButton) {
        console.warn("AG Grid: as of AG Grid v23.2, filterParams.applyButton is deprecated. Please use filterParams.buttons instead");
        buttons.push("apply");
      }
      if (params2.apply) {
        console.warn("AG Grid: as of AG Grid v21, filterParams.apply is deprecated. Please use filterParams.buttons instead");
        buttons.push("apply");
      }
      params2.buttons = buttons;
    };
    ProvidedFilter2.prototype.getDefaultDebounceMs = function() {
      return 0;
    };
    ProvidedFilter2.prototype.setupOnBtApplyDebounce = function() {
      var debounceMs = ProvidedFilter2.getDebounceMs(this.providedFilterParams, this.getDefaultDebounceMs());
      this.onBtApplyDebounce = debounce(this.onBtApply.bind(this), debounceMs);
    };
    ProvidedFilter2.prototype.getModel = function() {
      return this.appliedModel;
    };
    ProvidedFilter2.prototype.setModel = function(model) {
      var _this = this;
      var promise2 = model ? this.setModelIntoUi(model) : this.resetUiToDefaults();
      return promise2.then(function() {
        _this.updateUiVisibility();
        _this.applyModel();
      });
    };
    ProvidedFilter2.prototype.onBtCancel = function(e) {
      var _this = this;
      var currentModel = this.getModel();
      var afterAppliedFunc = function() {
        _this.onUiChanged(false, "prevent");
        if (_this.providedFilterParams.closeOnApply) {
          _this.close(e);
        }
      };
      if (currentModel != null) {
        this.setModelIntoUi(currentModel).then(afterAppliedFunc);
      } else {
        this.resetUiToDefaults().then(afterAppliedFunc);
      }
    };
    ProvidedFilter2.prototype.onBtClear = function() {
      var _this = this;
      this.resetUiToDefaults().then(function() {
        return _this.onUiChanged();
      });
    };
    ProvidedFilter2.prototype.onBtReset = function() {
      this.onBtClear();
      this.onBtApply();
    };
    ProvidedFilter2.prototype.applyModel = function() {
      var newModel = this.getModelFromUi();
      if (!this.isModelValid(newModel)) {
        return false;
      }
      var previousModel = this.appliedModel;
      this.appliedModel = newModel;
      return !this.areModelsEqual(previousModel, newModel);
    };
    ProvidedFilter2.prototype.isModelValid = function(model) {
      return true;
    };
    ProvidedFilter2.prototype.onBtApply = function(afterFloatingFilter, afterDataChange, e) {
      if (afterFloatingFilter === void 0) {
        afterFloatingFilter = false;
      }
      if (afterDataChange === void 0) {
        afterDataChange = false;
      }
      if (this.applyModel()) {
        this.providedFilterParams.filterChangedCallback({ afterFloatingFilter, afterDataChange });
      }
      var closeOnApply = this.providedFilterParams.closeOnApply;
      if (closeOnApply && this.applyActive && !afterFloatingFilter && !afterDataChange) {
        this.close(e);
      }
    };
    ProvidedFilter2.prototype.onNewRowsLoaded = function() {
      var _this = this;
      if (!this.newRowsActionKeep) {
        this.resetUiToDefaults().then(function() {
          return _this.appliedModel = null;
        });
      }
    };
    ProvidedFilter2.prototype.close = function(e) {
      if (!this.hidePopup) {
        return;
      }
      var keyboardEvent = e;
      var key = keyboardEvent && keyboardEvent.key;
      var params2;
      if (key === "Enter" || key === "Space") {
        params2 = { keyboardEvent };
      }
      this.hidePopup(params2);
      this.hidePopup = null;
    };
    ProvidedFilter2.prototype.isNewRowsActionKeep = function() {
      return this.newRowsActionKeep;
    };
    ProvidedFilter2.prototype.onUiChanged = function(fromFloatingFilter, apply) {
      if (fromFloatingFilter === void 0) {
        fromFloatingFilter = false;
      }
      this.updateUiVisibility();
      this.providedFilterParams.filterModifiedCallback();
      if (this.applyActive) {
        var isValid = this.isModelValid(this.getModelFromUi());
        setDisabled(this.getRefElement("applyFilterButton"), !isValid);
      }
      if (fromFloatingFilter && !apply || apply === "immediately") {
        this.onBtApply(fromFloatingFilter);
      } else if (!this.applyActive && !apply || apply === "debounce") {
        this.onBtApplyDebounce();
      }
    };
    ProvidedFilter2.prototype.afterGuiAttached = function(params2) {
      if (params2 == null) {
        return;
      }
      this.hidePopup = params2.hidePopup;
    };
    ProvidedFilter2.getDebounceMs = function(params2, debounceDefault) {
      if (ProvidedFilter2.isUseApplyButton(params2)) {
        if (params2.debounceMs != null) {
          console.warn("AG Grid: debounceMs is ignored when apply button is present");
        }
        return 0;
      }
      return params2.debounceMs != null ? params2.debounceMs : debounceDefault;
    };
    ProvidedFilter2.isUseApplyButton = function(params2) {
      ProvidedFilter2.checkForDeprecatedParams(params2);
      return !!params2.buttons && params2.buttons.indexOf("apply") >= 0;
    };
    ProvidedFilter2.prototype.destroy = function() {
      this.hidePopup = null;
      _super.prototype.destroy.call(this);
    };
    ProvidedFilter2.prototype.translate = function(key) {
      var translate = this.gridOptionsWrapper.getLocaleTextFunc();
      return translate(key, DEFAULT_FILTER_LOCALE_TEXT[key]);
    };
    __decorate$c([
      Autowired("rowModel")
    ], ProvidedFilter2.prototype, "rowModel", void 0);
    __decorate$c([
      PostConstruct
    ], ProvidedFilter2.prototype, "postConstruct", null);
    return ProvidedFilter2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$9 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$d = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ConditionPosition;
  (function(ConditionPosition2) {
    ConditionPosition2[ConditionPosition2["One"] = 0] = "One";
    ConditionPosition2[ConditionPosition2["Two"] = 1] = "Two";
  })(ConditionPosition || (ConditionPosition = {}));
  var SimpleFilter = function(_super) {
    __extends$9(SimpleFilter2, _super);
    function SimpleFilter2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    SimpleFilter2.prototype.showValueFrom = function(type) {
      return !this.doesFilterHaveHiddenInput(type) && type !== SimpleFilter2.EMPTY;
    };
    SimpleFilter2.prototype.showValueTo = function(type) {
      return type === SimpleFilter2.IN_RANGE;
    };
    SimpleFilter2.prototype.onFloatingFilterChanged = function(type, value) {
      this.setTypeFromFloatingFilter(type);
      this.setValueFromFloatingFilter(value);
      this.onUiChanged(true);
    };
    SimpleFilter2.prototype.setTypeFromFloatingFilter = function(type) {
      this.eType1.setValue(type);
      this.eType2.setValue(this.optionsFactory.getDefaultOption());
      (this.isDefaultOperator("AND") ? this.eJoinOperatorAnd : this.eJoinOperatorOr).setValue(true);
    };
    SimpleFilter2.prototype.getModelFromUi = function() {
      if (!this.isConditionUiComplete(ConditionPosition.One)) {
        return null;
      }
      if (this.isAllowTwoConditions() && this.isConditionUiComplete(ConditionPosition.Two)) {
        return {
          filterType: this.getFilterType(),
          operator: this.getJoinOperator(),
          condition1: this.createCondition(ConditionPosition.One),
          condition2: this.createCondition(ConditionPosition.Two)
        };
      }
      return this.createCondition(ConditionPosition.One);
    };
    SimpleFilter2.prototype.getCondition1Type = function() {
      return this.eType1.getValue();
    };
    SimpleFilter2.prototype.getCondition2Type = function() {
      return this.eType2.getValue();
    };
    SimpleFilter2.prototype.getJoinOperator = function() {
      return this.eJoinOperatorOr.getValue() === true ? "OR" : "AND";
    };
    SimpleFilter2.prototype.areModelsEqual = function(a, b) {
      if (!a && !b) {
        return true;
      }
      if (!a && b || a && !b) {
        return false;
      }
      var aIsSimple = !a.operator;
      var bIsSimple = !b.operator;
      var oneSimpleOneCombined = !aIsSimple && bIsSimple || aIsSimple && !bIsSimple;
      if (oneSimpleOneCombined) {
        return false;
      }
      var res;
      if (aIsSimple) {
        var aSimple = a;
        var bSimple = b;
        res = this.areSimpleModelsEqual(aSimple, bSimple);
      } else {
        var aCombined = a;
        var bCombined = b;
        res = aCombined.operator === bCombined.operator && this.areSimpleModelsEqual(aCombined.condition1, bCombined.condition1) && this.areSimpleModelsEqual(aCombined.condition2, bCombined.condition2);
      }
      return res;
    };
    SimpleFilter2.prototype.setModelIntoUi = function(model) {
      var isCombined = model.operator;
      if (isCombined) {
        var combinedModel = model;
        var orChecked = combinedModel.operator === "OR";
        this.eJoinOperatorAnd.setValue(!orChecked);
        this.eJoinOperatorOr.setValue(orChecked);
        this.eType1.setValue(combinedModel.condition1.type);
        this.eType2.setValue(combinedModel.condition2.type);
        this.setConditionIntoUi(combinedModel.condition1, ConditionPosition.One);
        this.setConditionIntoUi(combinedModel.condition2, ConditionPosition.Two);
      } else {
        var simpleModel = model;
        this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND"));
        this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR"));
        this.eType1.setValue(simpleModel.type);
        this.eType2.setValue(this.optionsFactory.getDefaultOption());
        this.setConditionIntoUi(simpleModel, ConditionPosition.One);
        this.setConditionIntoUi(null, ConditionPosition.Two);
      }
      return AgPromise.resolve();
    };
    SimpleFilter2.prototype.doesFilterPass = function(params2) {
      var _this = this;
      var model = this.getModel();
      if (model == null) {
        return true;
      }
      var operator = model.operator;
      var models = [];
      if (operator) {
        var combinedModel = model;
        models.push(combinedModel.condition1, combinedModel.condition2);
      } else {
        models.push(model);
      }
      var combineFunction = operator && operator === "OR" ? some : every;
      return combineFunction(models, function(m) {
        return _this.individualConditionPasses(params2, m);
      });
    };
    SimpleFilter2.prototype.setParams = function(params2) {
      _super.prototype.setParams.call(this, params2);
      this.optionsFactory = new OptionsFactory();
      this.optionsFactory.init(params2, this.getDefaultFilterOptions());
      this.allowTwoConditions = !params2.suppressAndOrCondition;
      this.alwaysShowBothConditions = !!params2.alwaysShowBothConditions;
      this.defaultJoinOperator = this.getDefaultJoinOperator(params2.defaultJoinOperator);
      this.putOptionsIntoDropdown();
      this.addChangedListeners();
    };
    SimpleFilter2.prototype.getDefaultJoinOperator = function(defaultJoinOperator) {
      return includes2(["AND", "OR"], defaultJoinOperator) ? defaultJoinOperator : "AND";
    };
    SimpleFilter2.prototype.putOptionsIntoDropdown = function() {
      var _this = this;
      var filterOptions = this.optionsFactory.getFilterOptions();
      forEach(filterOptions, function(option) {
        var value;
        var text2;
        if (typeof option === "string") {
          value = option;
          text2 = _this.translate(value);
        } else {
          value = option.displayKey;
          var customOption = _this.optionsFactory.getCustomOption(value);
          text2 = customOption ? _this.gridOptionsWrapper.getLocaleTextFunc()(customOption.displayKey, customOption.displayName) : _this.translate(value);
        }
        var createOption = function() {
          return { value, text: text2 };
        };
        _this.eType1.addOption(createOption());
        _this.eType2.addOption(createOption());
      });
      var readOnly = filterOptions.length <= 1;
      this.eType1.setDisabled(readOnly);
      this.eType2.setDisabled(readOnly);
    };
    SimpleFilter2.prototype.isAllowTwoConditions = function() {
      return this.allowTwoConditions;
    };
    SimpleFilter2.prototype.createBodyTemplate = function() {
      return '\n            <ag-select class="ag-filter-select" ref="eOptions1"></ag-select>\n            ' + this.createValueTemplate(ConditionPosition.One) + '\n            <div class="ag-filter-condition" ref="eJoinOperatorPanel">\n               <ag-radio-button ref="eJoinOperatorAnd" class="ag-filter-condition-operator ag-filter-condition-operator-and"></ag-radio-button>\n               <ag-radio-button ref="eJoinOperatorOr" class="ag-filter-condition-operator ag-filter-condition-operator-or"></ag-radio-button>\n            </div>\n            <ag-select class="ag-filter-select" ref="eOptions2"></ag-select>\n            ' + this.createValueTemplate(ConditionPosition.Two);
    };
    SimpleFilter2.prototype.getCssIdentifier = function() {
      return "simple-filter";
    };
    SimpleFilter2.prototype.updateUiVisibility = function() {
      var isCondition2Enabled = this.isCondition2Enabled();
      if (this.alwaysShowBothConditions) {
        this.eJoinOperatorAnd.setDisabled(!isCondition2Enabled);
        this.eJoinOperatorOr.setDisabled(!isCondition2Enabled);
        this.eType2.setDisabled(!isCondition2Enabled);
        setDisabled(this.eCondition2Body, !isCondition2Enabled);
      } else {
        setDisplayed(this.eJoinOperatorPanel, isCondition2Enabled);
        setDisplayed(this.eType2.getGui(), isCondition2Enabled);
        setDisplayed(this.eCondition2Body, isCondition2Enabled);
      }
    };
    SimpleFilter2.prototype.isCondition2Enabled = function() {
      return this.allowTwoConditions && this.isConditionUiComplete(ConditionPosition.One);
    };
    SimpleFilter2.prototype.resetUiToDefaults = function(silent) {
      var translate = this.gridOptionsWrapper.getLocaleTextFunc();
      var filteringLabel = translate("ariaFilteringOperator", "Filtering operator");
      var uniqueGroupId = "ag-simple-filter-and-or-" + this.getCompId();
      var defaultOption = this.optionsFactory.getDefaultOption();
      this.eType1.setValue(defaultOption, silent).setAriaLabel(filteringLabel);
      this.eType2.setValue(defaultOption, silent).setAriaLabel(filteringLabel);
      this.eJoinOperatorAnd.setValue(this.isDefaultOperator("AND"), silent).setName(uniqueGroupId).setLabel(this.translate("andCondition"));
      this.eJoinOperatorOr.setValue(this.isDefaultOperator("OR"), silent).setName(uniqueGroupId).setLabel(this.translate("orCondition"));
      return AgPromise.resolve();
    };
    SimpleFilter2.prototype.isDefaultOperator = function(operator) {
      return operator === this.defaultJoinOperator;
    };
    SimpleFilter2.prototype.addChangedListeners = function() {
      var _this = this;
      var listener = function() {
        return _this.onUiChanged();
      };
      this.eType1.onValueChange(listener);
      this.eType2.onValueChange(listener);
      this.eJoinOperatorOr.onValueChange(listener);
      this.eJoinOperatorAnd.onValueChange(listener);
    };
    SimpleFilter2.prototype.doesFilterHaveHiddenInput = function(filterType) {
      var customFilterOption = this.optionsFactory.getCustomOption(filterType);
      return customFilterOption && customFilterOption.hideFilterInput;
    };
    SimpleFilter2.EMPTY = "empty";
    SimpleFilter2.EQUALS = "equals";
    SimpleFilter2.NOT_EQUAL = "notEqual";
    SimpleFilter2.LESS_THAN = "lessThan";
    SimpleFilter2.LESS_THAN_OR_EQUAL = "lessThanOrEqual";
    SimpleFilter2.GREATER_THAN = "greaterThan";
    SimpleFilter2.GREATER_THAN_OR_EQUAL = "greaterThanOrEqual";
    SimpleFilter2.IN_RANGE = "inRange";
    SimpleFilter2.CONTAINS = "contains";
    SimpleFilter2.NOT_CONTAINS = "notContains";
    SimpleFilter2.STARTS_WITH = "startsWith";
    SimpleFilter2.ENDS_WITH = "endsWith";
    __decorate$d([
      RefSelector("eOptions1")
    ], SimpleFilter2.prototype, "eType1", void 0);
    __decorate$d([
      RefSelector("eOptions2")
    ], SimpleFilter2.prototype, "eType2", void 0);
    __decorate$d([
      RefSelector("eJoinOperatorPanel")
    ], SimpleFilter2.prototype, "eJoinOperatorPanel", void 0);
    __decorate$d([
      RefSelector("eJoinOperatorAnd")
    ], SimpleFilter2.prototype, "eJoinOperatorAnd", void 0);
    __decorate$d([
      RefSelector("eJoinOperatorOr")
    ], SimpleFilter2.prototype, "eJoinOperatorOr", void 0);
    __decorate$d([
      RefSelector("eCondition1Body")
    ], SimpleFilter2.prototype, "eCondition1Body", void 0);
    __decorate$d([
      RefSelector("eCondition2Body")
    ], SimpleFilter2.prototype, "eCondition2Body", void 0);
    return SimpleFilter2;
  }(ProvidedFilter);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$a = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var ScalarFilter = function(_super) {
    __extends$a(ScalarFilter2, _super);
    function ScalarFilter2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ScalarFilter2.prototype.setParams = function(params2) {
      _super.prototype.setParams.call(this, params2);
      this.scalarFilterParams = params2;
      this.checkDeprecatedParams();
    };
    ScalarFilter2.prototype.checkDeprecatedParams = function() {
      if (this.scalarFilterParams.nullComparator) {
        console.warn("AG Grid: Since v21.0, the property filterParams.nullComparator is deprecated. Please use filterParams.includeBlanksInEquals, filterParams.includeBlanksInLessThan and filterParams.includeBlanksInGreaterThan instead.");
        this.scalarFilterParams.includeBlanksInEquals = this.scalarFilterParams.nullComparator.equals;
        this.scalarFilterParams.includeBlanksInLessThan = this.scalarFilterParams.nullComparator.lessThan;
        this.scalarFilterParams.includeBlanksInGreaterThan = this.scalarFilterParams.nullComparator.greaterThan;
      }
    };
    ScalarFilter2.prototype.individualConditionPasses = function(params2, filterModel) {
      var cellValue = this.scalarFilterParams.valueGetter(params2.node);
      var range = this.mapRangeFromModel(filterModel);
      var filterValue = range.from;
      var filterValueTo = range.to;
      var filterType = filterModel.type;
      var customFilterOption = this.optionsFactory.getCustomOption(filterType);
      if (customFilterOption) {
        if (filterValue != null || customFilterOption.hideFilterInput) {
          return customFilterOption.test(filterValue, cellValue);
        }
      }
      if (cellValue == null) {
        switch (filterType) {
          case ScalarFilter2.EQUALS:
          case ScalarFilter2.NOT_EQUAL:
            if (this.scalarFilterParams.includeBlanksInEquals) {
              return true;
            }
            break;
          case ScalarFilter2.GREATER_THAN:
          case ScalarFilter2.GREATER_THAN_OR_EQUAL:
            if (this.scalarFilterParams.includeBlanksInGreaterThan) {
              return true;
            }
            break;
          case ScalarFilter2.LESS_THAN:
          case ScalarFilter2.LESS_THAN_OR_EQUAL:
            if (this.scalarFilterParams.includeBlanksInLessThan) {
              return true;
            }
            break;
          case ScalarFilter2.IN_RANGE:
            if (this.scalarFilterParams.includeBlanksInRange) {
              return true;
            }
            break;
        }
        return false;
      }
      var comparator = this.comparator();
      var compareResult = comparator(filterValue, cellValue);
      switch (filterType) {
        case ScalarFilter2.EQUALS:
          return compareResult === 0;
        case ScalarFilter2.NOT_EQUAL:
          return compareResult !== 0;
        case ScalarFilter2.GREATER_THAN:
          return compareResult > 0;
        case ScalarFilter2.GREATER_THAN_OR_EQUAL:
          return compareResult >= 0;
        case ScalarFilter2.LESS_THAN:
          return compareResult < 0;
        case ScalarFilter2.LESS_THAN_OR_EQUAL:
          return compareResult <= 0;
        case ScalarFilter2.IN_RANGE: {
          var compareToResult = comparator(filterValueTo, cellValue);
          return this.scalarFilterParams.inRangeInclusive ? compareResult >= 0 && compareToResult <= 0 : compareResult > 0 && compareToResult < 0;
        }
        default:
          console.warn('AG Grid: Unexpected type of filter "' + filterType + '", it looks like the filter was configured with incorrect Filter Options');
          return true;
      }
    };
    return ScalarFilter2;
  }(SimpleFilter);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$b = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$e = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var DateFilter = function(_super) {
    __extends$b(DateFilter2, _super);
    function DateFilter2() {
      return _super.call(this, "dateFilter") || this;
    }
    DateFilter2.prototype.afterGuiAttached = function(params2) {
      _super.prototype.afterGuiAttached.call(this, params2);
      this.dateCondition1FromComp.afterGuiAttached(params2);
    };
    DateFilter2.prototype.mapRangeFromModel = function(filterModel) {
      return {
        from: parseDateTimeFromString(filterModel.dateFrom),
        to: parseDateTimeFromString(filterModel.dateTo)
      };
    };
    DateFilter2.prototype.setValueFromFloatingFilter = function(value) {
      this.dateCondition1FromComp.setDate(value == null ? null : parseDateTimeFromString(value));
      this.dateCondition1ToComp.setDate(null);
      this.dateCondition2FromComp.setDate(null);
      this.dateCondition2ToComp.setDate(null);
    };
    DateFilter2.prototype.setConditionIntoUi = function(model, position) {
      var _a = model ? [parseDateTimeFromString(model.dateFrom), parseDateTimeFromString(model.dateTo)] : [null, null], dateFrom = _a[0], dateTo = _a[1];
      var _b = this.getFromToComponents(position), compFrom = _b[0], compTo = _b[1];
      compFrom.setDate(dateFrom);
      compTo.setDate(dateTo);
    };
    DateFilter2.prototype.resetUiToDefaults = function(silent) {
      var _this = this;
      return _super.prototype.resetUiToDefaults.call(this, silent).then(function() {
        _this.dateCondition1FromComp.setDate(null);
        _this.dateCondition1ToComp.setDate(null);
        _this.dateCondition2FromComp.setDate(null);
        _this.dateCondition2ToComp.setDate(null);
      });
    };
    DateFilter2.prototype.comparator = function() {
      return this.dateFilterParams.comparator ? this.dateFilterParams.comparator : this.defaultComparator.bind(this);
    };
    DateFilter2.prototype.defaultComparator = function(filterDate, cellValue) {
      var cellAsDate = cellValue;
      if (cellValue == null || cellAsDate < filterDate) {
        return -1;
      }
      if (cellAsDate > filterDate) {
        return 1;
      }
      return 0;
    };
    DateFilter2.prototype.setParams = function(params2) {
      _super.prototype.setParams.call(this, params2);
      this.dateFilterParams = params2;
      this.createDateComponents();
    };
    DateFilter2.prototype.createDateComponents = function() {
      var _this = this;
      var createDateCompWrapper = function(element2) {
        return new DateCompWrapper(_this.getContext(), _this.userComponentFactory, {
          onDateChanged: function() {
            return _this.onUiChanged();
          },
          filterParams: _this.dateFilterParams
        }, element2);
      };
      this.dateCondition1FromComp = createDateCompWrapper(this.eCondition1PanelFrom);
      this.dateCondition1ToComp = createDateCompWrapper(this.eCondition1PanelTo);
      this.dateCondition2FromComp = createDateCompWrapper(this.eCondition2PanelFrom);
      this.dateCondition2ToComp = createDateCompWrapper(this.eCondition2PanelTo);
      this.addDestroyFunc(function() {
        _this.dateCondition1FromComp.destroy();
        _this.dateCondition1ToComp.destroy();
        _this.dateCondition2FromComp.destroy();
        _this.dateCondition2ToComp.destroy();
      });
    };
    DateFilter2.prototype.getDefaultFilterOptions = function() {
      return DateFilter2.DEFAULT_FILTER_OPTIONS;
    };
    DateFilter2.prototype.createValueTemplate = function(position) {
      var pos = position === ConditionPosition.One ? "1" : "2";
      return '\n            <div class="ag-filter-body" ref="eCondition' + pos + 'Body">\n                <div class="ag-filter-from ag-filter-date-from" ref="eCondition' + pos + 'PanelFrom"></div>\n                <div class="ag-filter-to ag-filter-date-to" ref="eCondition' + pos + 'PanelTo"></div>\n            </div>';
    };
    DateFilter2.prototype.isConditionUiComplete = function(position) {
      var positionOne = position === ConditionPosition.One;
      var option = positionOne ? this.getCondition1Type() : this.getCondition2Type();
      if (option === SimpleFilter.EMPTY) {
        return false;
      }
      if (this.doesFilterHaveHiddenInput(option)) {
        return true;
      }
      var _a = this.getFromToComponents(position), compFrom = _a[0], compTo = _a[1];
      var minValidYear = this.dateFilterParams.minValidYear == null ? 1e3 : this.dateFilterParams.minValidYear;
      var isValidDate = function(value) {
        return value != null && value.getUTCFullYear() > minValidYear;
      };
      return isValidDate(compFrom.getDate()) && (!this.showValueTo(option) || isValidDate(compTo.getDate()));
    };
    DateFilter2.prototype.areSimpleModelsEqual = function(aSimple, bSimple) {
      return aSimple.dateFrom === bSimple.dateFrom && aSimple.dateTo === bSimple.dateTo && aSimple.type === bSimple.type;
    };
    DateFilter2.prototype.getFilterType = function() {
      return "date";
    };
    DateFilter2.prototype.createCondition = function(position) {
      var positionOne = position === ConditionPosition.One;
      var type = positionOne ? this.getCondition1Type() : this.getCondition2Type();
      var _a = this.getFromToComponents(position), compFrom = _a[0], compTo = _a[1];
      return {
        dateFrom: serialiseDate(compFrom.getDate()),
        dateTo: serialiseDate(compTo.getDate()),
        type,
        filterType: this.getFilterType()
      };
    };
    DateFilter2.prototype.resetPlaceholder = function() {
      var globalTranslate = this.gridOptionsWrapper.getLocaleTextFunc();
      var placeholder = this.translate("dateFormatOoo");
      var ariaLabel = globalTranslate("ariaFilterValue", "Filter Value");
      this.dateCondition1FromComp.setInputPlaceholder(placeholder);
      this.dateCondition1FromComp.setInputAriaLabel(ariaLabel);
      this.dateCondition1ToComp.setInputPlaceholder(placeholder);
      this.dateCondition1ToComp.setInputAriaLabel(ariaLabel);
      this.dateCondition2FromComp.setInputPlaceholder(placeholder);
      this.dateCondition2FromComp.setInputAriaLabel(ariaLabel);
      this.dateCondition2ToComp.setInputPlaceholder(placeholder);
      this.dateCondition2ToComp.setInputAriaLabel(ariaLabel);
    };
    DateFilter2.prototype.updateUiVisibility = function() {
      _super.prototype.updateUiVisibility.call(this);
      this.resetPlaceholder();
      var condition1Type = this.getCondition1Type();
      setDisplayed(this.eCondition1PanelFrom, this.showValueFrom(condition1Type));
      setDisplayed(this.eCondition1PanelTo, this.showValueTo(condition1Type));
      var condition2Type = this.getCondition2Type();
      setDisplayed(this.eCondition2PanelFrom, this.showValueFrom(condition2Type));
      setDisplayed(this.eCondition2PanelTo, this.showValueTo(condition2Type));
    };
    DateFilter2.prototype.getFromToComponents = function(position) {
      return position === ConditionPosition.One ? [this.dateCondition1FromComp, this.dateCondition1ToComp] : [this.dateCondition2FromComp, this.dateCondition2ToComp];
    };
    DateFilter2.DEFAULT_FILTER_OPTIONS = [
      ScalarFilter.EQUALS,
      ScalarFilter.GREATER_THAN,
      ScalarFilter.LESS_THAN,
      ScalarFilter.NOT_EQUAL,
      ScalarFilter.IN_RANGE
    ];
    __decorate$e([
      RefSelector("eCondition1PanelFrom")
    ], DateFilter2.prototype, "eCondition1PanelFrom", void 0);
    __decorate$e([
      RefSelector("eCondition1PanelTo")
    ], DateFilter2.prototype, "eCondition1PanelTo", void 0);
    __decorate$e([
      RefSelector("eCondition2PanelFrom")
    ], DateFilter2.prototype, "eCondition2PanelFrom", void 0);
    __decorate$e([
      RefSelector("eCondition2PanelTo")
    ], DateFilter2.prototype, "eCondition2PanelTo", void 0);
    __decorate$e([
      Autowired("userComponentFactory")
    ], DateFilter2.prototype, "userComponentFactory", void 0);
    return DateFilter2;
  }(ScalarFilter);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$c = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var SimpleFloatingFilter = function(_super) {
    __extends$c(SimpleFloatingFilter2, _super);
    function SimpleFloatingFilter2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    SimpleFloatingFilter2.prototype.getDefaultDebounceMs = function() {
      return 0;
    };
    SimpleFloatingFilter2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
    };
    SimpleFloatingFilter2.prototype.getTextFromModel = function(model) {
      if (!model) {
        return null;
      }
      var isCombined = model.operator;
      if (isCombined) {
        var combinedModel = model;
        var con1Str = this.conditionToString(combinedModel.condition1);
        var con2Str = this.conditionToString(combinedModel.condition2);
        return con1Str + " " + combinedModel.operator + " " + con2Str;
      } else {
        var condition = model;
        var customOption = this.optionsFactory.getCustomOption(condition.type);
        if (customOption && customOption.hideFilterInput) {
          this.gridOptionsWrapper.getLocaleTextFunc()(customOption.displayKey, customOption.displayName);
          return customOption.displayName;
        }
        return this.conditionToString(condition);
      }
    };
    SimpleFloatingFilter2.prototype.isEventFromFloatingFilter = function(event) {
      return event && event.afterFloatingFilter;
    };
    SimpleFloatingFilter2.prototype.getLastType = function() {
      return this.lastType;
    };
    SimpleFloatingFilter2.prototype.setLastTypeFromModel = function(model) {
      if (!model) {
        this.lastType = this.optionsFactory.getDefaultOption();
        return;
      }
      var isCombined = model.operator;
      var condition;
      if (isCombined) {
        var combinedModel = model;
        condition = combinedModel.condition1;
      } else {
        condition = model;
      }
      this.lastType = condition.type;
    };
    SimpleFloatingFilter2.prototype.canWeEditAfterModelFromParentFilter = function(model) {
      if (!model) {
        return this.isTypeEditable(this.lastType);
      }
      var isCombined = model.operator;
      if (isCombined) {
        return false;
      }
      var simpleModel = model;
      return this.isTypeEditable(simpleModel.type);
    };
    SimpleFloatingFilter2.prototype.init = function(params2) {
      this.optionsFactory = new OptionsFactory();
      this.optionsFactory.init(params2.filterParams, this.getDefaultFilterOptions());
      this.lastType = this.optionsFactory.getDefaultOption();
      var editable = this.isTypeEditable(this.lastType);
      this.setEditable(editable);
    };
    SimpleFloatingFilter2.prototype.doesFilterHaveHiddenInput = function(filterType) {
      var customFilterOption = this.optionsFactory.getCustomOption(filterType);
      return customFilterOption && customFilterOption.hideFilterInput;
    };
    SimpleFloatingFilter2.prototype.isTypeEditable = function(type) {
      return !!type && !this.doesFilterHaveHiddenInput(type) && type !== SimpleFilter.IN_RANGE && type !== SimpleFilter.EMPTY;
    };
    return SimpleFloatingFilter2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$d = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$f = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var DateFloatingFilter = function(_super) {
    __extends$d(DateFloatingFilter2, _super);
    function DateFloatingFilter2() {
      return _super.call(this, '\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>\n                <div ref="eDateWrapper" style="display: flex;"></div>\n            </div>') || this;
    }
    DateFloatingFilter2.prototype.getDefaultFilterOptions = function() {
      return DateFilter.DEFAULT_FILTER_OPTIONS;
    };
    DateFloatingFilter2.prototype.conditionToString = function(condition) {
      var type = condition.type;
      var dateFrom = parseDateTimeFromString(condition.dateFrom);
      if (type === SimpleFilter.IN_RANGE) {
        var dateTo = parseDateTimeFromString(condition.dateTo);
        return serialiseDate(dateFrom, false) + "-" + serialiseDate(dateTo, false);
      }
      return dateFrom == null ? "" + type : "" + serialiseDate(dateFrom, false);
    };
    DateFloatingFilter2.prototype.init = function(params2) {
      _super.prototype.init.call(this, params2);
      this.params = params2;
      this.createDateComponent();
      var translate = this.gridOptionsWrapper.getLocaleTextFunc();
      this.eReadOnlyText.setDisabled(true).setInputAriaLabel(translate("ariaDateFilterInput", "Date Filter Input"));
    };
    DateFloatingFilter2.prototype.setEditable = function(editable) {
      setDisplayed(this.eDateWrapper, editable);
      setDisplayed(this.eReadOnlyText.getGui(), !editable);
    };
    DateFloatingFilter2.prototype.onParentModelChanged = function(model, event) {
      if (this.isEventFromFloatingFilter(event)) {
        return;
      }
      _super.prototype.setLastTypeFromModel.call(this, model);
      var allowEditing = this.canWeEditAfterModelFromParentFilter(model);
      this.setEditable(allowEditing);
      if (allowEditing) {
        if (model) {
          var dateModel = model;
          this.dateComp.setDate(parseDateTimeFromString(dateModel.dateFrom));
        } else {
          this.dateComp.setDate(null);
        }
        this.eReadOnlyText.setValue("");
      } else {
        this.eReadOnlyText.setValue(this.getTextFromModel(model));
        this.dateComp.setDate(null);
      }
    };
    DateFloatingFilter2.prototype.onDateChanged = function() {
      var _this = this;
      var filterValueDate = this.dateComp.getDate();
      var filterValueText = serialiseDate(filterValueDate);
      this.params.parentFilterInstance(function(filterInstance) {
        if (filterInstance) {
          var simpleFilter = filterInstance;
          simpleFilter.onFloatingFilterChanged(_this.getLastType(), filterValueText);
        }
      });
    };
    DateFloatingFilter2.prototype.createDateComponent = function() {
      var _this = this;
      var debounceMs = ProvidedFilter.getDebounceMs(this.params.filterParams, this.getDefaultDebounceMs());
      var dateComponentParams = {
        onDateChanged: debounce(this.onDateChanged.bind(this), debounceMs),
        filterParams: this.params.column.getColDef().filterParams
      };
      this.dateComp = new DateCompWrapper(this.getContext(), this.userComponentFactory, dateComponentParams, this.eDateWrapper);
      this.addDestroyFunc(function() {
        return _this.dateComp.destroy();
      });
    };
    __decorate$f([
      Autowired("userComponentFactory")
    ], DateFloatingFilter2.prototype, "userComponentFactory", void 0);
    __decorate$f([
      RefSelector("eReadOnlyText")
    ], DateFloatingFilter2.prototype, "eReadOnlyText", void 0);
    __decorate$f([
      RefSelector("eDateWrapper")
    ], DateFloatingFilter2.prototype, "eDateWrapper", void 0);
    return DateFloatingFilter2;
  }(SimpleFloatingFilter);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$e = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$g = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var DefaultDateComponent = function(_super) {
    __extends$e(DefaultDateComponent2, _super);
    function DefaultDateComponent2() {
      return _super.call(this, '\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>\n            </div>') || this;
    }
    DefaultDateComponent2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
    };
    DefaultDateComponent2.prototype.init = function(params2) {
      var inputElement = this.eDateInput.getInputElement();
      if (this.shouldUseBrowserDatePicker(params2)) {
        if (isBrowserIE()) {
          console.warn("ag-grid: browserDatePicker is specified to true, but it is not supported in IE 11; reverting to text date picker");
        } else {
          inputElement.type = "date";
        }
      }
      this.addManagedListener(inputElement, "mousedown", function() {
        return inputElement.focus();
      });
      this.addManagedListener(this.eDateInput.getInputElement(), "input", function(e) {
        if (e.target !== document.activeElement) {
          return;
        }
        params2.onDateChanged();
      });
    };
    DefaultDateComponent2.prototype.getDate = function() {
      return parseDateTimeFromString(this.eDateInput.getValue());
    };
    DefaultDateComponent2.prototype.setDate = function(date) {
      this.eDateInput.setValue(serialiseDate(date, false));
    };
    DefaultDateComponent2.prototype.setInputPlaceholder = function(placeholder) {
      this.eDateInput.setInputPlaceholder(placeholder);
    };
    DefaultDateComponent2.prototype.afterGuiAttached = function(params2) {
      if (!params2 || !params2.suppressFocus) {
        this.eDateInput.getInputElement().focus();
      }
    };
    DefaultDateComponent2.prototype.shouldUseBrowserDatePicker = function(params2) {
      if (params2.filterParams && params2.filterParams.browserDatePicker != null) {
        return params2.filterParams.browserDatePicker;
      }
      return isBrowserChrome() || isBrowserFirefox();
    };
    __decorate$g([
      RefSelector("eDateInput")
    ], DefaultDateComponent2.prototype, "eDateInput", void 0);
    return DefaultDateComponent2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$f = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$h = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var NumberFilter = function(_super) {
    __extends$f(NumberFilter2, _super);
    function NumberFilter2() {
      return _super.call(this, "numberFilter") || this;
    }
    NumberFilter2.prototype.mapRangeFromModel = function(filterModel) {
      return {
        from: filterModel.filter,
        to: filterModel.filterTo
      };
    };
    NumberFilter2.prototype.getDefaultDebounceMs = function() {
      return 500;
    };
    NumberFilter2.prototype.resetUiToDefaults = function(silent) {
      var _this = this;
      return _super.prototype.resetUiToDefaults.call(this, silent).then(function() {
        var fields = [_this.eValueFrom1, _this.eValueFrom2, _this.eValueTo1, _this.eValueTo2];
        fields.forEach(function(field) {
          return field.setValue(null, silent);
        });
        _this.resetPlaceholder();
      });
    };
    NumberFilter2.prototype.setConditionIntoUi = function(model, position) {
      var positionOne = position === ConditionPosition.One;
      var eValueFrom = positionOne ? this.eValueFrom1 : this.eValueFrom2;
      var eValueTo = positionOne ? this.eValueTo1 : this.eValueTo2;
      eValueFrom.setValue(model ? "" + model.filter : null);
      eValueTo.setValue(model ? "" + model.filterTo : null);
    };
    NumberFilter2.prototype.setValueFromFloatingFilter = function(value) {
      this.eValueFrom1.setValue(value);
      this.eValueTo1.setValue(null);
      this.eValueFrom2.setValue(null);
      this.eValueTo2.setValue(null);
    };
    NumberFilter2.prototype.comparator = function() {
      return function(left, right) {
        if (left === right) {
          return 0;
        }
        return left < right ? 1 : -1;
      };
    };
    NumberFilter2.prototype.setParams = function(params2) {
      this.numberFilterParams = params2;
      var allowedCharPattern = this.getAllowedCharPattern();
      if (allowedCharPattern) {
        var config2 = { allowedCharPattern };
        this.resetTemplate({
          eValueFrom1: config2,
          eValueTo1: config2,
          eValueFrom2: config2,
          eValueTo2: config2
        });
      }
      _super.prototype.setParams.call(this, params2);
      this.addValueChangedListeners();
    };
    NumberFilter2.prototype.addValueChangedListeners = function() {
      var _this = this;
      var listener = function() {
        return _this.onUiChanged();
      };
      this.eValueFrom1.onValueChange(listener);
      this.eValueTo1.onValueChange(listener);
      this.eValueFrom2.onValueChange(listener);
      this.eValueTo2.onValueChange(listener);
    };
    NumberFilter2.prototype.resetPlaceholder = function() {
      var globalTranslate = this.gridOptionsWrapper.getLocaleTextFunc();
      var isRange1 = this.showValueTo(this.getCondition1Type());
      var isRange2 = this.showValueTo(this.getCondition2Type());
      this.eValueFrom1.setInputPlaceholder(this.translate(isRange1 ? "inRangeStart" : "filterOoo"));
      this.eValueFrom1.setInputAriaLabel(isRange1 ? globalTranslate("ariaFilterFromValue", "Filter from value") : globalTranslate("ariaFilterValue", "Filter Value"));
      this.eValueTo1.setInputPlaceholder(this.translate("inRangeEnd"));
      this.eValueTo1.setInputAriaLabel(globalTranslate("ariaFilterToValue", "Filter to Value"));
      this.eValueFrom2.setInputPlaceholder(this.translate(isRange2 ? "inRangeStart" : "filterOoo"));
      this.eValueFrom2.setInputAriaLabel(isRange2 ? globalTranslate("ariaFilterFromValue", "Filter from value") : globalTranslate("ariaFilterValue", "Filter Value"));
      this.eValueTo2.setInputPlaceholder(this.translate("inRangeEnd"));
      this.eValueTo2.setInputAriaLabel(globalTranslate("ariaFilterToValue", "Filter to Value"));
    };
    NumberFilter2.prototype.afterGuiAttached = function(params2) {
      _super.prototype.afterGuiAttached.call(this, params2);
      this.resetPlaceholder();
      if (!params2 || !params2.suppressFocus) {
        this.eValueFrom1.getInputElement().focus();
      }
    };
    NumberFilter2.prototype.getDefaultFilterOptions = function() {
      return NumberFilter2.DEFAULT_FILTER_OPTIONS;
    };
    NumberFilter2.prototype.createValueTemplate = function(position) {
      var pos = position === ConditionPosition.One ? "1" : "2";
      var allowedCharPattern = this.getAllowedCharPattern();
      var agElementTag = allowedCharPattern ? "ag-input-text-field" : "ag-input-number-field";
      return '\n            <div class="ag-filter-body" ref="eCondition' + pos + 'Body" role="presentation">\n                <' + agElementTag + ' class="ag-filter-from ag-filter-filter" ref="eValueFrom' + pos + '"></' + agElementTag + ">\n                <" + agElementTag + ' class="ag-filter-to ag-filter-filter" ref="eValueTo' + pos + '"></' + agElementTag + ">\n            </div>";
    };
    NumberFilter2.prototype.isConditionUiComplete = function(position) {
      var positionOne = position === ConditionPosition.One;
      var option = positionOne ? this.getCondition1Type() : this.getCondition2Type();
      if (option === SimpleFilter.EMPTY) {
        return false;
      }
      if (this.doesFilterHaveHiddenInput(option)) {
        return true;
      }
      var eValue = positionOne ? this.eValueFrom1 : this.eValueFrom2;
      var eValueTo = positionOne ? this.eValueTo1 : this.eValueTo2;
      var value = this.stringToFloat(eValue.getValue());
      return value != null && (!this.showValueTo(option) || this.stringToFloat(eValueTo.getValue()) != null);
    };
    NumberFilter2.prototype.areSimpleModelsEqual = function(aSimple, bSimple) {
      return aSimple.filter === bSimple.filter && aSimple.filterTo === bSimple.filterTo && aSimple.type === bSimple.type;
    };
    NumberFilter2.prototype.getFilterType = function() {
      return "number";
    };
    NumberFilter2.prototype.stringToFloat = function(value) {
      if (typeof value === "number") {
        return value;
      }
      var filterText = makeNull(value);
      if (filterText != null && filterText.trim() === "") {
        filterText = null;
      }
      if (this.numberFilterParams.numberParser) {
        return this.numberFilterParams.numberParser(filterText);
      }
      return filterText == null || filterText.trim() === "-" ? null : parseFloat(filterText);
    };
    NumberFilter2.prototype.createCondition = function(position) {
      var positionOne = position === ConditionPosition.One;
      var type = positionOne ? this.getCondition1Type() : this.getCondition2Type();
      var eValue = positionOne ? this.eValueFrom1 : this.eValueFrom2;
      var value = this.stringToFloat(eValue.getValue());
      var model = {
        filterType: this.getFilterType(),
        type
      };
      if (!this.doesFilterHaveHiddenInput(type)) {
        model.filter = value;
        if (this.showValueTo(type)) {
          var eValueTo = positionOne ? this.eValueTo1 : this.eValueTo2;
          var valueTo = this.stringToFloat(eValueTo.getValue());
          model.filterTo = valueTo;
        }
      }
      return model;
    };
    NumberFilter2.prototype.updateUiVisibility = function() {
      _super.prototype.updateUiVisibility.call(this);
      this.resetPlaceholder();
      var condition1Type = this.getCondition1Type();
      var condition2Type = this.getCondition2Type();
      setDisplayed(this.eValueFrom1.getGui(), this.showValueFrom(condition1Type));
      setDisplayed(this.eValueTo1.getGui(), this.showValueTo(condition1Type));
      setDisplayed(this.eValueFrom2.getGui(), this.showValueFrom(condition2Type));
      setDisplayed(this.eValueTo2.getGui(), this.showValueTo(condition2Type));
    };
    NumberFilter2.prototype.getAllowedCharPattern = function() {
      var allowedCharPattern = (this.numberFilterParams || {}).allowedCharPattern;
      if (allowedCharPattern) {
        return allowedCharPattern;
      }
      if (!isBrowserChrome() && !isBrowserEdge()) {
        return "\\d\\-\\.";
      }
      return null;
    };
    NumberFilter2.DEFAULT_FILTER_OPTIONS = [
      ScalarFilter.EQUALS,
      ScalarFilter.NOT_EQUAL,
      ScalarFilter.LESS_THAN,
      ScalarFilter.LESS_THAN_OR_EQUAL,
      ScalarFilter.GREATER_THAN,
      ScalarFilter.GREATER_THAN_OR_EQUAL,
      ScalarFilter.IN_RANGE
    ];
    __decorate$h([
      RefSelector("eValueFrom1")
    ], NumberFilter2.prototype, "eValueFrom1", void 0);
    __decorate$h([
      RefSelector("eValueTo1")
    ], NumberFilter2.prototype, "eValueTo1", void 0);
    __decorate$h([
      RefSelector("eValueFrom2")
    ], NumberFilter2.prototype, "eValueFrom2", void 0);
    __decorate$h([
      RefSelector("eValueTo2")
    ], NumberFilter2.prototype, "eValueTo2", void 0);
    return NumberFilter2;
  }(ScalarFilter);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$g = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$i = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var TextFilter = function(_super) {
    __extends$g(TextFilter2, _super);
    function TextFilter2() {
      return _super.call(this, "textFilter") || this;
    }
    TextFilter2.trimInput = function(value) {
      var trimmedInput = value && value.trim();
      return trimmedInput === "" ? value : trimmedInput;
    };
    TextFilter2.prototype.getDefaultDebounceMs = function() {
      return 500;
    };
    TextFilter2.prototype.getCleanValue = function(inputField) {
      var value = makeNull(inputField.getValue());
      return this.textFilterParams.trimInput ? TextFilter2.trimInput(value) : value;
    };
    TextFilter2.prototype.addValueChangedListeners = function() {
      var _this = this;
      var listener = function() {
        return _this.onUiChanged();
      };
      this.eValue1.onValueChange(listener);
      this.eValue2.onValueChange(listener);
    };
    TextFilter2.prototype.setParams = function(params2) {
      _super.prototype.setParams.call(this, params2);
      this.textFilterParams = params2;
      this.comparator = this.textFilterParams.textCustomComparator || TextFilter2.DEFAULT_COMPARATOR;
      this.formatter = this.textFilterParams.textFormatter || (this.textFilterParams.caseSensitive ? TextFilter2.DEFAULT_FORMATTER : TextFilter2.DEFAULT_LOWERCASE_FORMATTER);
      this.addValueChangedListeners();
    };
    TextFilter2.prototype.setConditionIntoUi = function(model, position) {
      var positionOne = position === ConditionPosition.One;
      var eValue = positionOne ? this.eValue1 : this.eValue2;
      eValue.setValue(model ? model.filter : null);
    };
    TextFilter2.prototype.createCondition = function(position) {
      var positionOne = position === ConditionPosition.One;
      var type = positionOne ? this.getCondition1Type() : this.getCondition2Type();
      var eValue = positionOne ? this.eValue1 : this.eValue2;
      var value = this.getCleanValue(eValue);
      eValue.setValue(value, true);
      var model = {
        filterType: this.getFilterType(),
        type
      };
      if (!this.doesFilterHaveHiddenInput(type)) {
        model.filter = value;
      }
      return model;
    };
    TextFilter2.prototype.getFilterType = function() {
      return "text";
    };
    TextFilter2.prototype.areSimpleModelsEqual = function(aSimple, bSimple) {
      return aSimple.filter === bSimple.filter && aSimple.type === bSimple.type;
    };
    TextFilter2.prototype.resetUiToDefaults = function(silent) {
      var _this = this;
      return _super.prototype.resetUiToDefaults.call(this, silent).then(function() {
        _this.forEachInput(function(field) {
          return field.setValue(null, silent);
        });
        _this.resetPlaceholder();
      });
    };
    TextFilter2.prototype.resetPlaceholder = function() {
      var globalTranslate = this.gridOptionsWrapper.getLocaleTextFunc();
      var placeholder = this.translate("filterOoo");
      this.forEachInput(function(field) {
        field.setInputPlaceholder(placeholder);
        field.setInputAriaLabel(globalTranslate("ariaFilterValue", "Filter Value"));
      });
    };
    TextFilter2.prototype.forEachInput = function(action) {
      forEach([this.eValue1, this.eValue2], action);
    };
    TextFilter2.prototype.setValueFromFloatingFilter = function(value) {
      this.eValue1.setValue(value);
      this.eValue2.setValue(null);
    };
    TextFilter2.prototype.getDefaultFilterOptions = function() {
      return TextFilter2.DEFAULT_FILTER_OPTIONS;
    };
    TextFilter2.prototype.createValueTemplate = function(position) {
      var pos = position === ConditionPosition.One ? "1" : "2";
      return '\n            <div class="ag-filter-body" ref="eCondition' + pos + 'Body" role="presentation">\n                <ag-input-text-field class="ag-filter-filter" ref="eValue' + pos + '"></ag-input-text-field>\n            </div>';
    };
    TextFilter2.prototype.updateUiVisibility = function() {
      _super.prototype.updateUiVisibility.call(this);
      setDisplayed(this.eCondition1Body, this.showValueFrom(this.getCondition1Type()));
      setDisplayed(this.eCondition2Body, this.isCondition2Enabled() && this.showValueFrom(this.getCondition2Type()));
    };
    TextFilter2.prototype.afterGuiAttached = function(params2) {
      _super.prototype.afterGuiAttached.call(this, params2);
      this.resetPlaceholder();
      if (!params2 || !params2.suppressFocus) {
        this.eValue1.getInputElement().focus();
      }
    };
    TextFilter2.prototype.isConditionUiComplete = function(position) {
      var positionOne = position === ConditionPosition.One;
      var option = positionOne ? this.getCondition1Type() : this.getCondition2Type();
      if (option === SimpleFilter.EMPTY) {
        return false;
      }
      if (this.doesFilterHaveHiddenInput(option)) {
        return true;
      }
      return this.getCleanValue(positionOne ? this.eValue1 : this.eValue2) != null;
    };
    TextFilter2.prototype.individualConditionPasses = function(params2, filterModel) {
      var filterText = filterModel.filter;
      var filterOption = filterModel.type;
      var cellValue = this.textFilterParams.valueGetter(params2.node);
      var cellValueFormatted = this.formatter(cellValue);
      var customFilterOption = this.optionsFactory.getCustomOption(filterOption);
      if (customFilterOption) {
        if (filterText != null || customFilterOption.hideFilterInput) {
          return customFilterOption.test(filterText, cellValueFormatted);
        }
      }
      if (cellValue == null) {
        return filterOption === SimpleFilter.NOT_EQUAL || filterOption === SimpleFilter.NOT_CONTAINS;
      }
      var filterTextFormatted = this.formatter(filterText);
      return this.comparator(filterOption, cellValueFormatted, filterTextFormatted);
    };
    TextFilter2.DEFAULT_FILTER_OPTIONS = [
      SimpleFilter.CONTAINS,
      SimpleFilter.NOT_CONTAINS,
      SimpleFilter.EQUALS,
      SimpleFilter.NOT_EQUAL,
      SimpleFilter.STARTS_WITH,
      SimpleFilter.ENDS_WITH
    ];
    TextFilter2.DEFAULT_FORMATTER = function(from2) {
      return from2;
    };
    TextFilter2.DEFAULT_LOWERCASE_FORMATTER = function(from2) {
      return from2 == null ? null : from2.toString().toLowerCase();
    };
    TextFilter2.DEFAULT_COMPARATOR = function(filter2, value, filterText) {
      switch (filter2) {
        case TextFilter2.CONTAINS:
          return value.indexOf(filterText) >= 0;
        case TextFilter2.NOT_CONTAINS:
          return value.indexOf(filterText) < 0;
        case TextFilter2.EQUALS:
          return value === filterText;
        case TextFilter2.NOT_EQUAL:
          return value != filterText;
        case TextFilter2.STARTS_WITH:
          return value.indexOf(filterText) === 0;
        case TextFilter2.ENDS_WITH:
          var index = value.lastIndexOf(filterText);
          return index >= 0 && index === value.length - filterText.length;
        default:
          console.warn('AG Grid: Unexpected type of filter "' + filter2 + '", it looks like the filter was configured with incorrect Filter Options');
          return false;
      }
    };
    __decorate$i([
      RefSelector("eValue1")
    ], TextFilter2.prototype, "eValue1", void 0);
    __decorate$i([
      RefSelector("eValue2")
    ], TextFilter2.prototype, "eValue2", void 0);
    return TextFilter2;
  }(SimpleFilter);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$h = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$j = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var TextInputFloatingFilter = function(_super) {
    __extends$h(TextInputFloatingFilter2, _super);
    function TextInputFloatingFilter2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    TextInputFloatingFilter2.prototype.postConstruct = function() {
      this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterInput"></ag-input-text-field>\n            </div>');
    };
    TextInputFloatingFilter2.prototype.getDefaultDebounceMs = function() {
      return 500;
    };
    TextInputFloatingFilter2.prototype.onParentModelChanged = function(model, event) {
      if (this.isEventFromFloatingFilter(event)) {
        return;
      }
      this.setLastTypeFromModel(model);
      this.eFloatingFilterInput.setValue(this.getTextFromModel(model));
      this.setEditable(this.canWeEditAfterModelFromParentFilter(model));
    };
    TextInputFloatingFilter2.prototype.init = function(params2) {
      _super.prototype.init.call(this, params2);
      this.params = params2;
      this.applyActive = ProvidedFilter.isUseApplyButton(this.params.filterParams);
      var debounceMs = ProvidedFilter.getDebounceMs(this.params.filterParams, this.getDefaultDebounceMs());
      var toDebounce = debounce(this.syncUpWithParentFilter.bind(this), debounceMs);
      var filterGui = this.eFloatingFilterInput.getGui();
      this.addManagedListener(filterGui, "input", toDebounce);
      this.addManagedListener(filterGui, "keypress", toDebounce);
      this.addManagedListener(filterGui, "keydown", toDebounce);
      var columnDef = params2.column.getDefinition();
      if (columnDef.filterParams && columnDef.filterParams.filterOptions && columnDef.filterParams.filterOptions.length === 1 && columnDef.filterParams.filterOptions[0] === "inRange") {
        this.eFloatingFilterInput.setDisabled(true);
      }
      var displayName = this.columnModel.getDisplayNameForColumn(params2.column, "header", true);
      var translate = this.gridOptionsWrapper.getLocaleTextFunc();
      this.eFloatingFilterInput.setInputAriaLabel(displayName + " " + translate("ariaFilterInput", "Filter Input"));
    };
    TextInputFloatingFilter2.prototype.syncUpWithParentFilter = function(e) {
      var _this = this;
      var enterKeyPressed = isKeyPressed(e, KeyCode.ENTER);
      if (this.applyActive && !enterKeyPressed) {
        return;
      }
      var value = this.eFloatingFilterInput.getValue();
      if (this.params.filterParams.trimInput) {
        value = TextFilter.trimInput(value);
        this.eFloatingFilterInput.setValue(value, true);
      }
      this.params.parentFilterInstance(function(filterInstance) {
        if (filterInstance) {
          var simpleFilter = filterInstance;
          simpleFilter.onFloatingFilterChanged(_this.getLastType(), value);
        }
      });
    };
    TextInputFloatingFilter2.prototype.setEditable = function(editable) {
      this.eFloatingFilterInput.setDisabled(!editable);
    };
    __decorate$j([
      Autowired("columnModel")
    ], TextInputFloatingFilter2.prototype, "columnModel", void 0);
    __decorate$j([
      RefSelector("eFloatingFilterInput")
    ], TextInputFloatingFilter2.prototype, "eFloatingFilterInput", void 0);
    __decorate$j([
      PostConstruct
    ], TextInputFloatingFilter2.prototype, "postConstruct", null);
    return TextInputFloatingFilter2;
  }(SimpleFloatingFilter);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$i = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var NumberFloatingFilter = function(_super) {
    __extends$i(NumberFloatingFilter2, _super);
    function NumberFloatingFilter2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    NumberFloatingFilter2.prototype.getDefaultFilterOptions = function() {
      return NumberFilter.DEFAULT_FILTER_OPTIONS;
    };
    NumberFloatingFilter2.prototype.conditionToString = function(condition) {
      var isRange = condition.type == SimpleFilter.IN_RANGE;
      if (isRange) {
        return condition.filter + "-" + condition.filterTo;
      }
      if (condition.filter != null) {
        return "" + condition.filter;
      }
      return "" + condition.type;
    };
    return NumberFloatingFilter2;
  }(TextInputFloatingFilter);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$j = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var TextFloatingFilter = function(_super) {
    __extends$j(TextFloatingFilter2, _super);
    function TextFloatingFilter2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    TextFloatingFilter2.prototype.conditionToString = function(condition) {
      if (condition.filter != null) {
        return "" + condition.filter;
      } else {
        return "" + condition.type;
      }
    };
    TextFloatingFilter2.prototype.getDefaultFilterOptions = function() {
      return TextFilter.DEFAULT_FILTER_OPTIONS;
    };
    return TextFloatingFilter2;
  }(TextInputFloatingFilter);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var TouchListener = function() {
    function TouchListener2(eElement, preventMouseClick) {
      var _this = this;
      if (preventMouseClick === void 0) {
        preventMouseClick = false;
      }
      this.destroyFuncs = [];
      this.touching = false;
      this.eventService = new EventService();
      this.eElement = eElement;
      this.preventMouseClick = preventMouseClick;
      var startListener = this.onTouchStart.bind(this);
      var moveListener = this.onTouchMove.bind(this);
      var endListener = this.onTouchEnd.bind(this);
      this.eElement.addEventListener("touchstart", startListener, { passive: true });
      this.eElement.addEventListener("touchmove", moveListener, { passive: true });
      this.eElement.addEventListener("touchend", endListener, { passive: false });
      this.destroyFuncs.push(function() {
        _this.eElement.removeEventListener("touchstart", startListener, { passive: true });
        _this.eElement.removeEventListener("touchmove", moveListener, { passive: true });
        _this.eElement.removeEventListener("touchend", endListener, { passive: false });
      });
    }
    TouchListener2.prototype.getActiveTouch = function(touchList) {
      for (var i2 = 0; i2 < touchList.length; i2++) {
        var matches = touchList[i2].identifier === this.touchStart.identifier;
        if (matches) {
          return touchList[i2];
        }
      }
      return null;
    };
    TouchListener2.prototype.addEventListener = function(eventType, listener) {
      this.eventService.addEventListener(eventType, listener);
    };
    TouchListener2.prototype.removeEventListener = function(eventType, listener) {
      this.eventService.removeEventListener(eventType, listener);
    };
    TouchListener2.prototype.onTouchStart = function(touchEvent) {
      var _this = this;
      if (this.touching) {
        return;
      }
      this.touchStart = touchEvent.touches[0];
      this.touching = true;
      this.moved = false;
      var touchStartCopy = this.touchStart;
      window.setTimeout(function() {
        var touchesMatch = _this.touchStart === touchStartCopy;
        if (_this.touching && touchesMatch && !_this.moved) {
          _this.moved = true;
          var event_1 = {
            type: TouchListener2.EVENT_LONG_TAP,
            touchStart: _this.touchStart,
            touchEvent
          };
          _this.eventService.dispatchEvent(event_1);
        }
      }, 500);
    };
    TouchListener2.prototype.onTouchMove = function(touchEvent) {
      if (!this.touching) {
        return;
      }
      var touch = this.getActiveTouch(touchEvent.touches);
      if (!touch) {
        return;
      }
      var eventIsFarAway = !areEventsNear(touch, this.touchStart, 4);
      if (eventIsFarAway) {
        this.moved = true;
      }
    };
    TouchListener2.prototype.onTouchEnd = function(touchEvent) {
      if (!this.touching) {
        return;
      }
      if (!this.moved) {
        var event_2 = {
          type: TouchListener2.EVENT_TAP,
          touchStart: this.touchStart
        };
        this.eventService.dispatchEvent(event_2);
        this.checkForDoubleTap();
      }
      if (this.preventMouseClick) {
        touchEvent.preventDefault();
      }
      this.touching = false;
    };
    TouchListener2.prototype.checkForDoubleTap = function() {
      var now2 = new Date().getTime();
      if (this.lastTapTime && this.lastTapTime > 0) {
        var interval = now2 - this.lastTapTime;
        if (interval > TouchListener2.DOUBLE_TAP_MILLIS) {
          var event_3 = {
            type: TouchListener2.EVENT_DOUBLE_TAP,
            touchStart: this.touchStart
          };
          this.eventService.dispatchEvent(event_3);
          this.lastTapTime = null;
        } else {
          this.lastTapTime = now2;
        }
      } else {
        this.lastTapTime = now2;
      }
    };
    TouchListener2.prototype.destroy = function() {
      this.destroyFuncs.forEach(function(func) {
        return func();
      });
    };
    TouchListener2.EVENT_TAP = "tap";
    TouchListener2.EVENT_DOUBLE_TAP = "doubleTap";
    TouchListener2.EVENT_LONG_TAP = "longTap";
    TouchListener2.DOUBLE_TAP_MILLIS = 500;
    return TouchListener2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$k = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$k = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var HeaderComp = function(_super) {
    __extends$k(HeaderComp2, _super);
    function HeaderComp2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.lastMovingChanged = 0;
      return _this;
    }
    HeaderComp2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
    };
    HeaderComp2.prototype.refresh = function(params2) {
      this.params = params2;
      if (this.workOutTemplate() != this.currentTemplate) {
        return false;
      }
      if (this.workOutShowMenu() != this.currentShowMenu) {
        return false;
      }
      if (this.workOutSort() != this.currentSort) {
        return false;
      }
      this.setDisplayName(params2);
      return true;
    };
    HeaderComp2.prototype.workOutTemplate = function() {
      var template = firstExistingValue(this.params.template, HeaderComp2.TEMPLATE);
      template = template && template.trim ? template.trim() : template;
      return template;
    };
    HeaderComp2.prototype.init = function(params2) {
      this.params = params2;
      this.currentTemplate = this.workOutTemplate();
      this.setTemplate(this.currentTemplate);
      this.setupTap();
      this.setupIcons(params2.column);
      this.setMenu();
      this.setupSort();
      this.setupFilterIcon();
      this.setDisplayName(params2);
    };
    HeaderComp2.prototype.setDisplayName = function(params2) {
      if (this.currentDisplayName != params2.displayName) {
        this.currentDisplayName = params2.displayName;
        var displayNameSanitised = escapeString(this.currentDisplayName);
        if (this.eText) {
          this.eText.innerHTML = displayNameSanitised;
        }
      }
    };
    HeaderComp2.prototype.setupIcons = function(column) {
      this.addInIcon("sortAscending", this.eSortAsc, column);
      this.addInIcon("sortDescending", this.eSortDesc, column);
      this.addInIcon("sortUnSort", this.eSortNone, column);
      this.addInIcon("menu", this.eMenu, column);
      this.addInIcon("filter", this.eFilter, column);
    };
    HeaderComp2.prototype.addInIcon = function(iconName, eParent, column) {
      if (eParent == null) {
        return;
      }
      var eIcon = createIconNoSpan(iconName, this.gridOptionsWrapper, column);
      if (eIcon) {
        eParent.appendChild(eIcon);
      }
    };
    HeaderComp2.prototype.setupTap = function() {
      var _this = this;
      var options = this.gridOptionsWrapper;
      if (options.isSuppressTouch()) {
        return;
      }
      var touchListener = new TouchListener(this.getGui(), true);
      var suppressMenuHide = options.isSuppressMenuHide();
      var tapMenuButton = suppressMenuHide && exists(this.eMenu);
      var menuTouchListener = tapMenuButton ? new TouchListener(this.eMenu, true) : touchListener;
      if (this.params.enableMenu) {
        var eventType = tapMenuButton ? "EVENT_TAP" : "EVENT_LONG_TAP";
        var showMenuFn = function(event) {
          options.getApi().showColumnMenuAfterMouseClick(_this.params.column, event.touchStart);
        };
        this.addManagedListener(menuTouchListener, TouchListener[eventType], showMenuFn);
      }
      if (this.params.enableSorting) {
        var tapListener = function(event) {
          var target = event.touchStart.target;
          if (suppressMenuHide && _this.eMenu.contains(target)) {
            return;
          }
          _this.sortController.progressSort(_this.params.column, false, "uiColumnSorted");
        };
        this.addManagedListener(touchListener, TouchListener.EVENT_TAP, tapListener);
      }
      this.addDestroyFunc(function() {
        return touchListener.destroy();
      });
      if (tapMenuButton) {
        this.addDestroyFunc(function() {
          return menuTouchListener.destroy();
        });
      }
    };
    HeaderComp2.prototype.workOutShowMenu = function() {
      var menuHides = !this.gridOptionsWrapper.isSuppressMenuHide();
      var onIpadAndMenuHides = isIOSUserAgent() && menuHides;
      var showMenu = this.params.enableMenu && !onIpadAndMenuHides;
      return showMenu;
    };
    HeaderComp2.prototype.setMenu = function() {
      var _this = this;
      if (!this.eMenu) {
        return;
      }
      this.currentShowMenu = this.workOutShowMenu();
      if (!this.currentShowMenu) {
        removeFromParent(this.eMenu);
        return;
      }
      var suppressMenuHide = this.gridOptionsWrapper.isSuppressMenuHide();
      this.addManagedListener(this.eMenu, "click", function() {
        return _this.showMenu(_this.eMenu);
      });
      addOrRemoveCssClass(this.eMenu, "ag-header-menu-always-show", suppressMenuHide);
    };
    HeaderComp2.prototype.showMenu = function(eventSource) {
      if (!eventSource) {
        eventSource = this.eMenu;
      }
      this.menuFactory.showMenuAfterButtonClick(this.params.column, eventSource, "columnMenu");
    };
    HeaderComp2.prototype.removeSortIcons = function() {
      removeFromParent(this.eSortAsc);
      removeFromParent(this.eSortDesc);
      removeFromParent(this.eSortNone);
      removeFromParent(this.eSortOrder);
    };
    HeaderComp2.prototype.workOutSort = function() {
      return this.params.enableSorting;
    };
    HeaderComp2.prototype.setupSort = function() {
      var _this = this;
      this.currentSort = this.params.enableSorting;
      if (!this.currentSort) {
        this.removeSortIcons();
        return;
      }
      var sortUsingCtrl = this.gridOptionsWrapper.isMultiSortKeyCtrl();
      this.addManagedListener(this.params.column, Column.EVENT_MOVING_CHANGED, function() {
        _this.lastMovingChanged = new Date().getTime();
      });
      if (this.eLabel) {
        this.addManagedListener(this.eLabel, "click", function(event) {
          var moving = _this.params.column.isMoving();
          var nowTime = new Date().getTime();
          var movedRecently = nowTime - _this.lastMovingChanged < 50;
          var columnMoving = moving || movedRecently;
          if (!columnMoving) {
            var multiSort = sortUsingCtrl ? event.ctrlKey || event.metaKey : event.shiftKey;
            _this.params.progressSort(multiSort);
          }
        });
      }
      this.addManagedListener(this.params.column, Column.EVENT_SORT_CHANGED, this.onSortChanged.bind(this));
      this.onSortChanged();
      this.addManagedListener(this.eventService, Events.EVENT_SORT_CHANGED, this.setMultiSortOrder.bind(this));
      this.setMultiSortOrder();
    };
    HeaderComp2.prototype.onSortChanged = function() {
      addOrRemoveCssClass(this.getGui(), "ag-header-cell-sorted-asc", this.params.column.isSortAscending());
      addOrRemoveCssClass(this.getGui(), "ag-header-cell-sorted-desc", this.params.column.isSortDescending());
      addOrRemoveCssClass(this.getGui(), "ag-header-cell-sorted-none", this.params.column.isSortNone());
      if (this.eSortAsc) {
        addOrRemoveCssClass(this.eSortAsc, "ag-hidden", !this.params.column.isSortAscending());
      }
      if (this.eSortDesc) {
        addOrRemoveCssClass(this.eSortDesc, "ag-hidden", !this.params.column.isSortDescending());
      }
      if (this.eSortNone) {
        var alwaysHideNoSort = !this.params.column.getColDef().unSortIcon && !this.gridOptionsWrapper.isUnSortIcon();
        addOrRemoveCssClass(this.eSortNone, "ag-hidden", alwaysHideNoSort || !this.params.column.isSortNone());
      }
    };
    HeaderComp2.prototype.setMultiSortOrder = function() {
      if (!this.eSortOrder) {
        return;
      }
      var col = this.params.column;
      var allColumnsWithSorting = this.sortController.getColumnsWithSortingOrdered();
      var indexThisCol = allColumnsWithSorting.indexOf(col);
      var moreThanOneColSorting = allColumnsWithSorting.length > 1;
      var showIndex = col.isSorting() && moreThanOneColSorting;
      setDisplayed(this.eSortOrder, showIndex);
      if (indexThisCol >= 0) {
        this.eSortOrder.innerHTML = (indexThisCol + 1).toString();
      } else {
        clearElement(this.eSortOrder);
      }
    };
    HeaderComp2.prototype.setupFilterIcon = function() {
      if (!this.eFilter) {
        return;
      }
      this.addManagedListener(this.params.column, Column.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));
      this.onFilterChanged();
    };
    HeaderComp2.prototype.onFilterChanged = function() {
      var filterPresent = this.params.column.isFilterActive();
      addOrRemoveCssClass(this.eFilter, "ag-hidden", !filterPresent);
    };
    HeaderComp2.TEMPLATE = '<div class="ag-cell-label-container" role="presentation">\n            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n            <div ref="eLabel" class="ag-header-cell-label" role="presentation" unselectable="on">\n                <span ref="eText" class="ag-header-cell-text" unselectable="on"></span>\n                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n                <span ref="eSortOrder" class="ag-header-icon ag-header-label-icon ag-sort-order" aria-hidden="true"></span>\n                <span ref="eSortAsc" class="ag-header-icon ag-header-label-icon ag-sort-ascending-icon" aria-hidden="true"></span>\n                <span ref="eSortDesc" class="ag-header-icon ag-header-label-icon ag-sort-descending-icon" aria-hidden="true"></span>\n                <span ref="eSortNone" class="ag-header-icon ag-header-label-icon ag-sort-none-icon" aria-hidden="true"></span>\n            </div>\n        </div>';
    __decorate$k([
      Autowired("sortController")
    ], HeaderComp2.prototype, "sortController", void 0);
    __decorate$k([
      Autowired("menuFactory")
    ], HeaderComp2.prototype, "menuFactory", void 0);
    __decorate$k([
      RefSelector("eFilter")
    ], HeaderComp2.prototype, "eFilter", void 0);
    __decorate$k([
      RefSelector("eSortAsc")
    ], HeaderComp2.prototype, "eSortAsc", void 0);
    __decorate$k([
      RefSelector("eSortDesc")
    ], HeaderComp2.prototype, "eSortDesc", void 0);
    __decorate$k([
      RefSelector("eSortNone")
    ], HeaderComp2.prototype, "eSortNone", void 0);
    __decorate$k([
      RefSelector("eSortOrder")
    ], HeaderComp2.prototype, "eSortOrder", void 0);
    __decorate$k([
      RefSelector("eMenu")
    ], HeaderComp2.prototype, "eMenu", void 0);
    __decorate$k([
      RefSelector("eLabel")
    ], HeaderComp2.prototype, "eLabel", void 0);
    __decorate$k([
      RefSelector("eText")
    ], HeaderComp2.prototype, "eText", void 0);
    return HeaderComp2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$l = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$l = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var HeaderGroupComp = function(_super) {
    __extends$l(HeaderGroupComp2, _super);
    function HeaderGroupComp2() {
      return _super.call(this, HeaderGroupComp2.TEMPLATE) || this;
    }
    HeaderGroupComp2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
    };
    HeaderGroupComp2.prototype.init = function(params2) {
      this.params = params2;
      this.checkWarnings();
      this.setupLabel();
      this.addGroupExpandIcon();
      this.setupExpandIcons();
    };
    HeaderGroupComp2.prototype.checkWarnings = function() {
      var paramsAny = this.params;
      if (paramsAny.template) {
        var message_1 = "A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)";
        doOnce(function() {
          return console.warn(message_1);
        }, "HeaderGroupComp.templateNotSupported");
      }
    };
    HeaderGroupComp2.prototype.setupExpandIcons = function() {
      var _this = this;
      this.addInIcon("columnGroupOpened", "agOpened");
      this.addInIcon("columnGroupClosed", "agClosed");
      var expandAction = function(event) {
        if (isStopPropagationForAgGrid(event)) {
          return;
        }
        var newExpandedValue = !_this.params.columnGroup.isExpanded();
        _this.columnModel.setColumnGroupOpened(_this.params.columnGroup.getOriginalColumnGroup(), newExpandedValue, "uiColumnExpanded");
      };
      this.addTouchAndClickListeners(this.eCloseIcon, expandAction);
      this.addTouchAndClickListeners(this.eOpenIcon, expandAction);
      var stopPropagationAction = function(event) {
        stopPropagationForAgGrid(event);
      };
      this.addManagedListener(this.eCloseIcon, "dblclick", stopPropagationAction);
      this.addManagedListener(this.eOpenIcon, "dblclick", stopPropagationAction);
      this.addManagedListener(this.getGui(), "dblclick", expandAction);
      this.updateIconVisibility();
      var originalColumnGroup = this.params.columnGroup.getOriginalColumnGroup();
      this.addManagedListener(originalColumnGroup, ProvidedColumnGroup.EVENT_EXPANDED_CHANGED, this.updateIconVisibility.bind(this));
      this.addManagedListener(originalColumnGroup, ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED, this.updateIconVisibility.bind(this));
    };
    HeaderGroupComp2.prototype.addTouchAndClickListeners = function(eElement, action) {
      var touchListener = new TouchListener(eElement, true);
      this.addManagedListener(touchListener, TouchListener.EVENT_TAP, action);
      this.addDestroyFunc(function() {
        return touchListener.destroy();
      });
      this.addManagedListener(eElement, "click", action);
    };
    HeaderGroupComp2.prototype.updateIconVisibility = function() {
      var columnGroup = this.params.columnGroup;
      if (columnGroup.isExpandable()) {
        var expanded = this.params.columnGroup.isExpanded();
        setDisplayed(this.eOpenIcon, expanded);
        setDisplayed(this.eCloseIcon, !expanded);
      } else {
        setDisplayed(this.eOpenIcon, false);
        setDisplayed(this.eCloseIcon, false);
      }
    };
    HeaderGroupComp2.prototype.addInIcon = function(iconName, refName) {
      var eIcon = createIconNoSpan(iconName, this.gridOptionsWrapper, null);
      if (eIcon) {
        this.getRefElement(refName).appendChild(eIcon);
      }
    };
    HeaderGroupComp2.prototype.addGroupExpandIcon = function() {
      if (!this.params.columnGroup.isExpandable()) {
        setDisplayed(this.eOpenIcon, false);
        setDisplayed(this.eCloseIcon, false);
        return;
      }
    };
    HeaderGroupComp2.prototype.setupLabel = function() {
      var displayName = this.params.displayName;
      if (exists(displayName)) {
        var displayNameSanitised = escapeString(displayName);
        this.getRefElement("agLabel").innerHTML = displayNameSanitised;
      }
    };
    HeaderGroupComp2.TEMPLATE = '<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">\n            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>';
    __decorate$l([
      Autowired("columnModel")
    ], HeaderGroupComp2.prototype, "columnModel", void 0);
    __decorate$l([
      RefSelector("agOpened")
    ], HeaderGroupComp2.prototype, "eOpenIcon", void 0);
    __decorate$l([
      RefSelector("agClosed")
    ], HeaderGroupComp2.prototype, "eCloseIcon", void 0);
    return HeaderGroupComp2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$m = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var PopupComponent = function(_super) {
    __extends$m(PopupComponent2, _super);
    function PopupComponent2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    PopupComponent2.prototype.isPopup = function() {
      return true;
    };
    PopupComponent2.prototype.setParentComponent = function(container) {
      addCssClass(container.getGui(), "ag-has-popup");
      _super.prototype.setParentComponent.call(this, container);
    };
    PopupComponent2.prototype.destroy = function() {
      var parentComp = this.parentComponent;
      var hasParent = parentComp && parentComp.isAlive();
      if (hasParent) {
        removeCssClass(parentComp.getGui(), "ag-has-popup");
      }
      _super.prototype.destroy.call(this);
    };
    return PopupComponent2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$n = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$m = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var LargeTextCellEditor = function(_super) {
    __extends$n(LargeTextCellEditor2, _super);
    function LargeTextCellEditor2() {
      return _super.call(this, LargeTextCellEditor2.TEMPLATE) || this;
    }
    LargeTextCellEditor2.prototype.init = function(params2) {
      this.params = params2;
      this.focusAfterAttached = params2.cellStartedEdit;
      this.eTextArea.setMaxLength(params2.maxLength || 200).setCols(params2.cols || 60).setRows(params2.rows || 10);
      if (exists(params2.value)) {
        this.eTextArea.setValue(params2.value.toString(), true);
      }
      this.addGuiEventListener("keydown", this.onKeyDown.bind(this));
    };
    LargeTextCellEditor2.prototype.onKeyDown = function(event) {
      var key = event.which || event.keyCode;
      if (key === KeyCode.LEFT || key === KeyCode.UP || key === KeyCode.RIGHT || key === KeyCode.DOWN || event.shiftKey && key === KeyCode.ENTER) {
        event.stopPropagation();
      }
    };
    LargeTextCellEditor2.prototype.afterGuiAttached = function() {
      var translate = this.gridOptionsWrapper.getLocaleTextFunc();
      this.eTextArea.setInputAriaLabel(translate("ariaInputEditor", "Input Editor"));
      if (this.focusAfterAttached) {
        this.eTextArea.getFocusableElement().focus();
      }
    };
    LargeTextCellEditor2.prototype.getValue = function() {
      return this.params.parseValue(this.eTextArea.getValue());
    };
    LargeTextCellEditor2.TEMPLATE = '<div class="ag-large-text" tabindex="0">\n            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>';
    __decorate$m([
      RefSelector("eTextArea")
    ], LargeTextCellEditor2.prototype, "eTextArea", void 0);
    return LargeTextCellEditor2;
  }(PopupComponent);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$o = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$n = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var SelectCellEditor = function(_super) {
    __extends$o(SelectCellEditor2, _super);
    function SelectCellEditor2() {
      var _this = _super.call(this, '<div class="ag-cell-edit-wrapper"><ag-select class="ag-cell-editor" ref="eSelect"></ag-select></div>') || this;
      _this.startedByEnter = false;
      return _this;
    }
    SelectCellEditor2.prototype.init = function(params2) {
      var _this = this;
      this.focusAfterAttached = params2.cellStartedEdit;
      if (missing(params2.values)) {
        console.warn("AG Grid: no values found for select cellEditor");
        return;
      }
      this.startedByEnter = params2.keyPress === KeyCode.ENTER;
      var hasValue = false;
      params2.values.forEach(function(value) {
        var option = { value };
        var valueFormatted = _this.valueFormatterService.formatValue(params2.column, null, null, value);
        var valueFormattedExits = valueFormatted !== null && valueFormatted !== void 0;
        option.text = valueFormattedExits ? valueFormatted : value;
        _this.eSelect.addOption(option);
        hasValue = hasValue || params2.value === value;
      });
      if (hasValue) {
        this.eSelect.setValue(params2.value, true);
      } else if (params2.values.length) {
        this.eSelect.setValue(params2.values[0], true);
      }
      if (!this.gridOptionsWrapper.isFullRowEdit()) {
        this.eSelect.onValueChange(function() {
          return params2.stopEditing();
        });
      }
    };
    SelectCellEditor2.prototype.afterGuiAttached = function() {
      if (this.focusAfterAttached) {
        this.eSelect.getFocusableElement().focus();
      }
      if (this.startedByEnter) {
        this.eSelect.showPicker();
      }
    };
    SelectCellEditor2.prototype.focusIn = function() {
      this.eSelect.getFocusableElement().focus();
    };
    SelectCellEditor2.prototype.getValue = function() {
      return this.eSelect.getValue();
    };
    SelectCellEditor2.prototype.isPopup = function() {
      return false;
    };
    __decorate$n([
      Autowired("valueFormatterService")
    ], SelectCellEditor2.prototype, "valueFormatterService", void 0);
    __decorate$n([
      RefSelector("eSelect")
    ], SelectCellEditor2.prototype, "eSelect", void 0);
    return SelectCellEditor2;
  }(PopupComponent);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$p = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var PopupSelectCellEditor = function(_super) {
    __extends$p(PopupSelectCellEditor2, _super);
    function PopupSelectCellEditor2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    PopupSelectCellEditor2.prototype.isPopup = function() {
      return true;
    };
    return PopupSelectCellEditor2;
  }(SelectCellEditor);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$q = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$o = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var TextCellEditor = function(_super) {
    __extends$q(TextCellEditor2, _super);
    function TextCellEditor2() {
      return _super.call(this, TextCellEditor2.TEMPLATE) || this;
    }
    TextCellEditor2.prototype.init = function(params2) {
      this.params = params2;
      var eInput = this.eInput;
      var startValue;
      if (params2.cellStartedEdit) {
        this.focusAfterAttached = true;
        if (params2.keyPress === KeyCode.BACKSPACE || params2.keyPress === KeyCode.DELETE) {
          startValue = "";
        } else if (params2.charPress) {
          startValue = params2.charPress;
        } else {
          startValue = this.getStartValue(params2);
          if (params2.keyPress !== KeyCode.F2) {
            this.highlightAllOnFocus = true;
          }
        }
      } else {
        this.focusAfterAttached = false;
        startValue = this.getStartValue(params2);
      }
      if (startValue != null) {
        eInput.setValue(startValue, true);
      }
      this.addManagedListener(eInput.getGui(), "keydown", function(event) {
        var keyCode = event.keyCode;
        if (keyCode === KeyCode.PAGE_UP || keyCode === KeyCode.PAGE_DOWN) {
          event.preventDefault();
        }
      });
    };
    TextCellEditor2.prototype.afterGuiAttached = function() {
      var translate = this.gridOptionsWrapper.getLocaleTextFunc();
      var eInput = this.eInput;
      eInput.setInputAriaLabel(translate("ariaInputEditor", "Input Editor"));
      if (!this.focusAfterAttached) {
        return;
      }
      if (!isBrowserSafari()) {
        eInput.getFocusableElement().focus();
      }
      var inputEl = eInput.getInputElement();
      if (this.highlightAllOnFocus) {
        inputEl.select();
      } else {
        var value = eInput.getValue();
        var len2 = exists(value) && value.length || 0;
        if (len2) {
          inputEl.setSelectionRange(len2, len2);
        }
      }
    };
    TextCellEditor2.prototype.focusIn = function() {
      var eInput = this.eInput;
      var focusEl = eInput.getFocusableElement();
      var inputEl = eInput.getInputElement();
      focusEl.focus();
      inputEl.select();
    };
    TextCellEditor2.prototype.focusOut = function() {
      var inputEl = this.eInput.getInputElement();
      if (isBrowserIE()) {
        inputEl.setSelectionRange(0, 0);
      }
    };
    TextCellEditor2.prototype.getValue = function() {
      var eInput = this.eInput;
      return this.params.parseValue(eInput.getValue());
    };
    TextCellEditor2.prototype.getStartValue = function(params2) {
      var formatValue = params2.useFormatter || params2.column.getColDef().refData;
      return formatValue ? params2.formatValue(params2.value) : params2.value;
    };
    TextCellEditor2.prototype.isPopup = function() {
      return false;
    };
    TextCellEditor2.TEMPLATE = '<div class="ag-cell-edit-wrapper"><ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field></div>';
    __decorate$o([
      RefSelector("eInput")
    ], TextCellEditor2.prototype, "eInput", void 0);
    return TextCellEditor2;
  }(PopupComponent);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$r = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var PopupTextCellEditor = function(_super) {
    __extends$r(PopupTextCellEditor2, _super);
    function PopupTextCellEditor2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    PopupTextCellEditor2.prototype.isPopup = function() {
      return true;
    };
    return PopupTextCellEditor2;
  }(TextCellEditor);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$s = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$p = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ARROW_UP = "\u2191";
  var ARROW_DOWN = "\u2193";
  var AnimateShowChangeCellRenderer = function(_super) {
    __extends$s(AnimateShowChangeCellRenderer2, _super);
    function AnimateShowChangeCellRenderer2() {
      var _this = _super.call(this, AnimateShowChangeCellRenderer2.TEMPLATE) || this;
      _this.refreshCount = 0;
      return _this;
    }
    AnimateShowChangeCellRenderer2.prototype.init = function(params2) {
      this.eValue = this.queryForHtmlElement(".ag-value-change-value");
      this.eDelta = this.queryForHtmlElement(".ag-value-change-delta");
      this.refresh(params2);
    };
    AnimateShowChangeCellRenderer2.prototype.showDelta = function(params2, delta) {
      var absDelta = Math.abs(delta);
      var valueFormatted = params2.formatValue(absDelta);
      var valueToUse = exists(valueFormatted) ? valueFormatted : absDelta;
      var deltaUp = delta >= 0;
      if (deltaUp) {
        this.eDelta.innerHTML = ARROW_UP + valueToUse;
      } else {
        this.eDelta.innerHTML = ARROW_DOWN + valueToUse;
      }
      addOrRemoveCssClass(this.eDelta, "ag-value-change-delta-up", deltaUp);
      addOrRemoveCssClass(this.eDelta, "ag-value-change-delta-down", !deltaUp);
    };
    AnimateShowChangeCellRenderer2.prototype.setTimerToRemoveDelta = function() {
      var _this = this;
      this.refreshCount++;
      var refreshCountCopy = this.refreshCount;
      window.setTimeout(function() {
        if (refreshCountCopy === _this.refreshCount) {
          _this.hideDeltaValue();
        }
      }, 2e3);
    };
    AnimateShowChangeCellRenderer2.prototype.hideDeltaValue = function() {
      removeCssClass(this.eValue, "ag-value-change-value-highlight");
      clearElement(this.eDelta);
    };
    AnimateShowChangeCellRenderer2.prototype.refresh = function(params2) {
      var value = params2.value;
      if (value === this.lastValue) {
        return false;
      }
      if (exists(params2.valueFormatted)) {
        this.eValue.innerHTML = params2.valueFormatted;
      } else if (exists(params2.value)) {
        this.eValue.innerHTML = value;
      } else {
        clearElement(this.eValue);
      }
      if (this.filterManager.isSuppressFlashingCellsBecauseFiltering()) {
        return false;
      }
      if (typeof value === "number" && typeof this.lastValue === "number") {
        var delta = value - this.lastValue;
        this.showDelta(params2, delta);
      }
      if (this.lastValue) {
        addCssClass(this.eValue, "ag-value-change-value-highlight");
      }
      this.setTimerToRemoveDelta();
      this.lastValue = value;
      return true;
    };
    AnimateShowChangeCellRenderer2.TEMPLATE = '<span><span class="ag-value-change-delta"></span><span class="ag-value-change-value"></span></span>';
    __decorate$p([
      Autowired("filterManager")
    ], AnimateShowChangeCellRenderer2.prototype, "filterManager", void 0);
    return AnimateShowChangeCellRenderer2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$t = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$q = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AnimateSlideCellRenderer = function(_super) {
    __extends$t(AnimateSlideCellRenderer2, _super);
    function AnimateSlideCellRenderer2() {
      var _this = _super.call(this, AnimateSlideCellRenderer2.TEMPLATE) || this;
      _this.refreshCount = 0;
      _this.eCurrent = _this.queryForHtmlElement(".ag-value-slide-current");
      return _this;
    }
    AnimateSlideCellRenderer2.prototype.init = function(params2) {
      this.refresh(params2);
    };
    AnimateSlideCellRenderer2.prototype.addSlideAnimation = function() {
      var _this = this;
      this.refreshCount++;
      var refreshCountCopy = this.refreshCount;
      if (this.ePrevious) {
        this.getGui().removeChild(this.ePrevious);
      }
      this.ePrevious = loadTemplate('<span class="ag-value-slide-previous ag-value-slide-out"></span>');
      this.ePrevious.innerHTML = this.eCurrent.innerHTML;
      this.getGui().insertBefore(this.ePrevious, this.eCurrent);
      window.setTimeout(function() {
        if (refreshCountCopy !== _this.refreshCount) {
          return;
        }
        addCssClass(_this.ePrevious, "ag-value-slide-out-end");
      }, 50);
      window.setTimeout(function() {
        if (refreshCountCopy !== _this.refreshCount) {
          return;
        }
        _this.getGui().removeChild(_this.ePrevious);
        _this.ePrevious = null;
      }, 3e3);
    };
    AnimateSlideCellRenderer2.prototype.refresh = function(params2) {
      var value = params2.value;
      if (missing(value)) {
        value = "";
      }
      if (value === this.lastValue) {
        return false;
      }
      if (this.filterManager.isSuppressFlashingCellsBecauseFiltering()) {
        return false;
      }
      this.addSlideAnimation();
      this.lastValue = value;
      if (exists(params2.valueFormatted)) {
        this.eCurrent.innerHTML = params2.valueFormatted;
      } else if (exists(params2.value)) {
        this.eCurrent.innerHTML = value;
      } else {
        clearElement(this.eCurrent);
      }
      return true;
    };
    AnimateSlideCellRenderer2.TEMPLATE = '<span>\n            <span class="ag-value-slide-current"></span>\n        </span>';
    __decorate$q([
      Autowired("filterManager")
    ], AnimateSlideCellRenderer2.prototype, "filterManager", void 0);
    return AnimateSlideCellRenderer2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  (function(RowHighlightPosition) {
    RowHighlightPosition[RowHighlightPosition["Above"] = 0] = "Above";
    RowHighlightPosition[RowHighlightPosition["Below"] = 1] = "Below";
  })(exports2.RowHighlightPosition || (exports2.RowHighlightPosition = {}));
  var RowNode = function() {
    function RowNode2(beans) {
      this.rowIndex = null;
      this.key = null;
      this.childrenMapped = {};
      this.displayed = false;
      this.rowTop = null;
      this.oldRowTop = null;
      this.selectable = true;
      this.__objectId = RowNode2.OBJECT_ID_SEQUENCE++;
      this.__autoHeights = {};
      this.alreadyRendered = false;
      this.highlighted = null;
      this.selected = false;
      this.beans = beans;
    }
    RowNode2.prototype.setData = function(data) {
      this.setDataCommon(data, false);
    };
    RowNode2.prototype.updateData = function(data) {
      this.setDataCommon(data, true);
    };
    RowNode2.prototype.setDataCommon = function(data, update2) {
      var oldData = this.data;
      this.data = data;
      this.beans.valueCache.onDataChanged();
      this.updateDataOnDetailNode();
      this.checkRowSelectable();
      var event = this.createDataChangedEvent(data, oldData, update2);
      this.dispatchLocalEvent(event);
    };
    RowNode2.prototype.updateDataOnDetailNode = function() {
      if (this.detailNode) {
        this.detailNode.data = this.data;
      }
    };
    RowNode2.prototype.createDataChangedEvent = function(newData, oldData, update2) {
      return {
        type: RowNode2.EVENT_DATA_CHANGED,
        node: this,
        oldData,
        newData,
        update: update2
      };
    };
    RowNode2.prototype.createLocalRowEvent = function(type) {
      return {
        type,
        node: this
      };
    };
    RowNode2.prototype.getRowIndexString = function() {
      if (this.rowPinned === Constants.PINNED_TOP) {
        return "t-" + this.rowIndex;
      }
      if (this.rowPinned === Constants.PINNED_BOTTOM) {
        return "b-" + this.rowIndex;
      }
      return this.rowIndex.toString();
    };
    RowNode2.prototype.createDaemonNode = function() {
      var oldNode = new RowNode2(this.beans);
      oldNode.id = this.id;
      oldNode.data = this.data;
      oldNode.daemon = true;
      oldNode.selected = this.selected;
      oldNode.level = this.level;
      return oldNode;
    };
    RowNode2.prototype.setDataAndId = function(data, id) {
      var oldNode = exists(this.id) ? this.createDaemonNode() : null;
      var oldData = this.data;
      this.data = data;
      this.updateDataOnDetailNode();
      this.setId(id);
      this.beans.selectionService.syncInRowNode(this, oldNode);
      this.checkRowSelectable();
      var event = this.createDataChangedEvent(data, oldData, false);
      this.dispatchLocalEvent(event);
    };
    RowNode2.prototype.checkRowSelectable = function() {
      var isRowSelectableFunc = this.beans.gridOptionsWrapper.getIsRowSelectableFunc();
      this.setRowSelectable(isRowSelectableFunc ? isRowSelectableFunc(this) : true);
    };
    RowNode2.prototype.setRowSelectable = function(newVal) {
      if (this.selectable !== newVal) {
        this.selectable = newVal;
        if (this.eventService) {
          this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_SELECTABLE_CHANGED));
        }
      }
    };
    RowNode2.prototype.setId = function(id) {
      var getRowNodeId = this.beans.gridOptionsWrapper.getRowNodeIdFunc();
      if (getRowNodeId) {
        if (this.data) {
          this.id = getRowNodeId(this.data);
          if (this.id && typeof this.id === "string" && startsWith2(this.id, RowNode2.ID_PREFIX_ROW_GROUP)) {
            console.error("AG Grid: Row ID's cannot start with " + RowNode2.ID_PREFIX_ROW_GROUP + ", this is a reserved prefix for AG Grid's row grouping feature.");
          }
          if (this.id && typeof this.id !== "string") {
            this.id = "" + this.id;
          }
        } else {
          this.id = void 0;
        }
      } else {
        this.id = id;
      }
    };
    RowNode2.prototype.isPixelInRange = function(pixel) {
      if (!exists(this.rowTop) || !exists(this.rowHeight)) {
        return false;
      }
      return pixel >= this.rowTop && pixel < this.rowTop + this.rowHeight;
    };
    RowNode2.prototype.setFirstChild = function(firstChild) {
      if (this.firstChild === firstChild) {
        return;
      }
      this.firstChild = firstChild;
      if (this.eventService) {
        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_FIRST_CHILD_CHANGED));
      }
    };
    RowNode2.prototype.setLastChild = function(lastChild) {
      if (this.lastChild === lastChild) {
        return;
      }
      this.lastChild = lastChild;
      if (this.eventService) {
        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_LAST_CHILD_CHANGED));
      }
    };
    RowNode2.prototype.setChildIndex = function(childIndex) {
      if (this.childIndex === childIndex) {
        return;
      }
      this.childIndex = childIndex;
      if (this.eventService) {
        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_CHILD_INDEX_CHANGED));
      }
    };
    RowNode2.prototype.setRowTop = function(rowTop) {
      this.oldRowTop = this.rowTop;
      if (this.rowTop === rowTop) {
        return;
      }
      this.rowTop = rowTop;
      if (this.eventService) {
        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_TOP_CHANGED));
      }
      this.setDisplayed(rowTop !== null);
    };
    RowNode2.prototype.clearRowTopAndRowIndex = function() {
      this.oldRowTop = null;
      this.setRowTop(null);
      this.setRowIndex(null);
    };
    RowNode2.prototype.setDisplayed = function(displayed) {
      if (this.displayed === displayed) {
        return;
      }
      this.displayed = displayed;
      if (this.eventService) {
        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_DISPLAYED_CHANGED));
      }
    };
    RowNode2.prototype.setDragging = function(dragging) {
      if (this.dragging === dragging) {
        return;
      }
      this.dragging = dragging;
      if (this.eventService) {
        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_DRAGGING_CHANGED));
      }
    };
    RowNode2.prototype.setHighlighted = function(highlighted) {
      if (highlighted === this.highlighted) {
        return;
      }
      this.highlighted = highlighted;
      if (this.eventService) {
        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_HIGHLIGHT_CHANGED));
      }
    };
    RowNode2.prototype.setAllChildrenCount = function(allChildrenCount) {
      if (this.allChildrenCount === allChildrenCount) {
        return;
      }
      this.allChildrenCount = allChildrenCount;
      if (this.eventService) {
        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_ALL_CHILDREN_COUNT_CHANGED));
      }
    };
    RowNode2.prototype.setMaster = function(master) {
      if (this.master === master) {
        return;
      }
      if (this.master && !master) {
        this.expanded = false;
      }
      this.master = master;
      if (this.eventService) {
        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_MASTER_CHANGED));
      }
    };
    RowNode2.prototype.setRowHeight = function(rowHeight, estimated) {
      if (estimated === void 0) {
        estimated = false;
      }
      this.rowHeight = rowHeight;
      this.rowHeightEstimated = estimated;
      if (this.eventService) {
        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_HEIGHT_CHANGED));
      }
    };
    RowNode2.prototype.setRowAutoHeight = function(cellHeight, column) {
      if (!this.__autoHeights) {
        this.__autoHeights = {};
      }
      var autoHeights = this.__autoHeights;
      autoHeights[column.getId()] = cellHeight;
      if (cellHeight != null) {
        if (this.checkAutoHeightsDebounced == null) {
          this.checkAutoHeightsDebounced = debounce(this.checkAutoHeights.bind(this), 1);
        }
        this.checkAutoHeightsDebounced();
      }
    };
    RowNode2.prototype.checkAutoHeights = function() {
      var notAllPresent = false;
      var nonePresent = true;
      var newRowHeight = 0;
      var autoHeights = this.__autoHeights;
      if (autoHeights == null) {
        return;
      }
      var displayedAutoHeightCols = this.beans.columnModel.getAllDisplayedAutoHeightCols();
      displayedAutoHeightCols.forEach(function(col) {
        var cellHeight = autoHeights[col.getId()];
        if (cellHeight == null) {
          notAllPresent = true;
          return;
        }
        nonePresent = false;
        if (cellHeight > newRowHeight) {
          newRowHeight = cellHeight;
        }
      });
      if (notAllPresent) {
        return;
      }
      if (nonePresent || newRowHeight < 10) {
        newRowHeight = this.beans.gridOptionsWrapper.getRowHeightForNode(this).height;
      }
      if (newRowHeight == this.rowHeight) {
        return;
      }
      this.setRowHeight(newRowHeight);
      var rowModel = this.beans.rowModel;
      rowModel.onRowHeightChanged && rowModel.onRowHeightChanged();
    };
    RowNode2.prototype.setRowIndex = function(rowIndex) {
      if (this.rowIndex === rowIndex) {
        return;
      }
      this.rowIndex = rowIndex;
      if (this.eventService) {
        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_ROW_INDEX_CHANGED));
      }
    };
    RowNode2.prototype.setUiLevel = function(uiLevel) {
      if (this.uiLevel === uiLevel) {
        return;
      }
      this.uiLevel = uiLevel;
      if (this.eventService) {
        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_UI_LEVEL_CHANGED));
      }
    };
    RowNode2.prototype.setExpanded = function(expanded) {
      if (this.expanded === expanded) {
        return;
      }
      this.expanded = expanded;
      if (this.eventService) {
        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_EXPANDED_CHANGED));
      }
      var event = assign2({}, this.createGlobalRowEvent(Events.EVENT_ROW_GROUP_OPENED), {
        expanded
      });
      this.beans.rowNodeEventThrottle.dispatchExpanded(event);
      if (this.beans.gridOptionsWrapper.isGroupIncludeFooter()) {
        this.beans.rowRenderer.refreshCells({ rowNodes: [this] });
      }
    };
    RowNode2.prototype.createGlobalRowEvent = function(type) {
      return {
        type,
        node: this,
        data: this.data,
        rowIndex: this.rowIndex,
        rowPinned: this.rowPinned,
        context: this.beans.gridOptionsWrapper.getContext(),
        api: this.beans.gridOptionsWrapper.getApi(),
        columnApi: this.beans.gridOptionsWrapper.getColumnApi()
      };
    };
    RowNode2.prototype.dispatchLocalEvent = function(event) {
      if (this.eventService) {
        this.eventService.dispatchEvent(event);
      }
    };
    RowNode2.prototype.setDataValue = function(colKey, newValue, eventSource) {
      var column = this.beans.columnModel.getPrimaryColumn(colKey);
      var oldValue = this.beans.valueService.getValue(column, this);
      this.beans.valueService.setValue(this, column, newValue, eventSource);
      this.dispatchCellChangedEvent(column, newValue, oldValue);
    };
    RowNode2.prototype.setGroupValue = function(colKey, newValue) {
      var column = this.beans.columnModel.getGridColumn(colKey);
      if (missing(this.groupData)) {
        this.groupData = {};
      }
      var columnId = column.getColId();
      var oldValue = this.groupData[columnId];
      if (oldValue === newValue) {
        return;
      }
      this.groupData[columnId] = newValue;
      this.dispatchCellChangedEvent(column, newValue, oldValue);
    };
    RowNode2.prototype.setAggData = function(newAggData) {
      var _this = this;
      var colIds = getAllKeysInObjects([this.aggData, newAggData]);
      var oldAggData = this.aggData;
      this.aggData = newAggData;
      if (this.eventService) {
        colIds.forEach(function(colId) {
          var column = _this.beans.columnModel.getGridColumn(colId);
          var value = _this.aggData ? _this.aggData[colId] : void 0;
          var oldValue = oldAggData ? oldAggData[colId] : void 0;
          _this.dispatchCellChangedEvent(column, value, oldValue);
        });
      }
    };
    RowNode2.prototype.updateHasChildren = function() {
      var newValue = this.group && !this.footer || this.childrenAfterGroup && this.childrenAfterGroup.length > 0;
      if (newValue !== this.__hasChildren) {
        this.__hasChildren = !!newValue;
        if (this.eventService) {
          this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_HAS_CHILDREN_CHANGED));
        }
      }
    };
    RowNode2.prototype.hasChildren = function() {
      if (this.__hasChildren == null) {
        this.updateHasChildren();
      }
      return this.__hasChildren;
    };
    RowNode2.prototype.isEmptyRowGroupNode = function() {
      return this.group && missingOrEmpty(this.childrenAfterGroup);
    };
    RowNode2.prototype.dispatchCellChangedEvent = function(column, newValue, oldValue) {
      var cellChangedEvent = {
        type: RowNode2.EVENT_CELL_CHANGED,
        node: this,
        column,
        newValue,
        oldValue
      };
      this.dispatchLocalEvent(cellChangedEvent);
    };
    RowNode2.prototype.resetQuickFilterAggregateText = function() {
      this.quickFilterAggregateText = null;
    };
    RowNode2.prototype.isExpandable = function() {
      return this.hasChildren() && !this.footer || this.master ? true : false;
    };
    RowNode2.prototype.isSelected = function() {
      if (this.footer) {
        return this.sibling.isSelected();
      }
      return this.selected;
    };
    RowNode2.prototype.depthFirstSearch = function(callback) {
      if (this.childrenAfterGroup) {
        this.childrenAfterGroup.forEach(function(child) {
          return child.depthFirstSearch(callback);
        });
      }
      callback(this);
    };
    RowNode2.prototype.calculateSelectedFromChildren = function() {
      var atLeastOneSelected = false;
      var atLeastOneDeSelected = false;
      var atLeastOneMixed = false;
      var newSelectedValue;
      if (this.childrenAfterGroup) {
        for (var i2 = 0; i2 < this.childrenAfterGroup.length; i2++) {
          var child = this.childrenAfterGroup[i2];
          if (!child.selectable) {
            continue;
          }
          var childState = child.isSelected();
          switch (childState) {
            case true:
              atLeastOneSelected = true;
              break;
            case false:
              atLeastOneDeSelected = true;
              break;
            default:
              atLeastOneMixed = true;
              break;
          }
        }
      }
      if (atLeastOneMixed) {
        newSelectedValue = void 0;
      } else if (atLeastOneSelected && !atLeastOneDeSelected) {
        newSelectedValue = true;
      } else if (!atLeastOneSelected && atLeastOneDeSelected) {
        newSelectedValue = false;
      } else {
        newSelectedValue = void 0;
      }
      this.selectThisNode(newSelectedValue);
    };
    RowNode2.prototype.setSelectedInitialValue = function(selected) {
      this.selected = selected;
    };
    RowNode2.prototype.setSelected = function(newValue, clearSelection, suppressFinishActions) {
      if (clearSelection === void 0) {
        clearSelection = false;
      }
      if (suppressFinishActions === void 0) {
        suppressFinishActions = false;
      }
      this.setSelectedParams({
        newValue,
        clearSelection,
        suppressFinishActions,
        rangeSelect: false
      });
    };
    RowNode2.prototype.isRowPinned = function() {
      return this.rowPinned === Constants.PINNED_TOP || this.rowPinned === Constants.PINNED_BOTTOM;
    };
    RowNode2.prototype.setSelectedParams = function(params2) {
      var groupSelectsChildren = this.beans.gridOptionsWrapper.isGroupSelectsChildren();
      var newValue = params2.newValue === true;
      var clearSelection = params2.clearSelection === true;
      var suppressFinishActions = params2.suppressFinishActions === true;
      var rangeSelect = params2.rangeSelect === true;
      var groupSelectsFiltered = groupSelectsChildren && params2.groupSelectsFiltered === true;
      if (this.id === void 0) {
        console.warn("AG Grid: cannot select node until id for node is known");
        return 0;
      }
      if (this.rowPinned) {
        console.warn("AG Grid: cannot select pinned rows");
        return 0;
      }
      if (this.footer) {
        return this.sibling.setSelectedParams(params2);
      }
      if (rangeSelect && this.beans.selectionService.getLastSelectedNode()) {
        var newRowClicked = this.beans.selectionService.getLastSelectedNode() !== this;
        var allowMultiSelect = this.beans.gridOptionsWrapper.isRowSelectionMulti();
        if (newRowClicked && allowMultiSelect) {
          var nodesChanged = this.doRowRangeSelection(params2.newValue);
          this.beans.selectionService.setLastSelectedNode(this);
          return nodesChanged;
        }
      }
      var updatedCount = 0;
      var skipThisNode = groupSelectsFiltered && this.group;
      if (!skipThisNode) {
        var thisNodeWasSelected = this.selectThisNode(newValue);
        if (thisNodeWasSelected) {
          updatedCount++;
        }
      }
      if (groupSelectsChildren && this.group) {
        updatedCount += this.selectChildNodes(newValue, groupSelectsFiltered);
      }
      if (!suppressFinishActions) {
        var clearOtherNodes = newValue && (clearSelection || !this.beans.gridOptionsWrapper.isRowSelectionMulti());
        if (clearOtherNodes) {
          updatedCount += this.beans.selectionService.clearOtherNodes(this);
        }
        if (updatedCount > 0) {
          this.beans.selectionService.updateGroupsFromChildrenSelections();
          var event_1 = {
            type: Events.EVENT_SELECTION_CHANGED,
            api: this.beans.gridApi,
            columnApi: this.beans.columnApi
          };
          this.beans.eventService.dispatchEvent(event_1);
        }
        if (newValue) {
          this.beans.selectionService.setLastSelectedNode(this);
        }
      }
      return updatedCount;
    };
    RowNode2.prototype.doRowRangeSelection = function(value) {
      var _this = this;
      if (value === void 0) {
        value = true;
      }
      var groupsSelectChildren = this.beans.gridOptionsWrapper.isGroupSelectsChildren();
      var lastSelectedNode = this.beans.selectionService.getLastSelectedNode();
      var nodesToSelect = this.beans.rowModel.getNodesInRangeForSelection(this, lastSelectedNode);
      var updatedCount = 0;
      nodesToSelect.forEach(function(rowNode) {
        if (rowNode.group && groupsSelectChildren || value === false && _this === rowNode) {
          return;
        }
        var nodeWasSelected = rowNode.selectThisNode(value);
        if (nodeWasSelected) {
          updatedCount++;
        }
      });
      this.beans.selectionService.updateGroupsFromChildrenSelections();
      var event = {
        type: Events.EVENT_SELECTION_CHANGED,
        api: this.beans.gridApi,
        columnApi: this.beans.columnApi
      };
      this.beans.eventService.dispatchEvent(event);
      return updatedCount;
    };
    RowNode2.prototype.isParentOfNode = function(potentialParent) {
      var parentNode = this.parent;
      while (parentNode) {
        if (parentNode === potentialParent) {
          return true;
        }
        parentNode = parentNode.parent;
      }
      return false;
    };
    RowNode2.prototype.selectThisNode = function(newValue) {
      var selectionNotAllowed = !this.selectable && newValue;
      var selectionNotChanged = this.selected === newValue;
      if (selectionNotAllowed || selectionNotChanged) {
        return false;
      }
      this.selected = newValue;
      if (this.eventService) {
        this.dispatchLocalEvent(this.createLocalRowEvent(RowNode2.EVENT_ROW_SELECTED));
      }
      var event = this.createGlobalRowEvent(Events.EVENT_ROW_SELECTED);
      this.beans.eventService.dispatchEvent(event);
      return true;
    };
    RowNode2.prototype.selectChildNodes = function(newValue, groupSelectsFiltered) {
      var children2 = groupSelectsFiltered ? this.childrenAfterFilter : this.childrenAfterGroup;
      if (missing(children2)) {
        return 0;
      }
      var updatedCount = 0;
      for (var i2 = 0; i2 < children2.length; i2++) {
        updatedCount += children2[i2].setSelectedParams({
          newValue,
          clearSelection: false,
          suppressFinishActions: true,
          groupSelectsFiltered
        });
      }
      return updatedCount;
    };
    RowNode2.prototype.addEventListener = function(eventType, listener) {
      if (!this.eventService) {
        this.eventService = new EventService();
      }
      this.eventService.addEventListener(eventType, listener);
    };
    RowNode2.prototype.removeEventListener = function(eventType, listener) {
      if (!this.eventService) {
        return;
      }
      this.eventService.removeEventListener(eventType, listener);
      if (this.eventService.noRegisteredListenersExist()) {
        this.eventService = null;
      }
    };
    RowNode2.prototype.onMouseEnter = function() {
      this.dispatchLocalEvent(this.createLocalRowEvent(RowNode2.EVENT_MOUSE_ENTER));
    };
    RowNode2.prototype.onMouseLeave = function() {
      this.dispatchLocalEvent(this.createLocalRowEvent(RowNode2.EVENT_MOUSE_LEAVE));
    };
    RowNode2.prototype.getFirstChildOfFirstChild = function(rowGroupColumn) {
      var currentRowNode = this;
      var isCandidate = true;
      var foundFirstChildPath = false;
      var nodeToSwapIn = null;
      while (isCandidate && !foundFirstChildPath) {
        var parentRowNode = currentRowNode.parent;
        var firstChild = exists(parentRowNode) && currentRowNode.firstChild;
        if (firstChild) {
          if (parentRowNode.rowGroupColumn === rowGroupColumn) {
            foundFirstChildPath = true;
            nodeToSwapIn = parentRowNode;
          }
        } else {
          isCandidate = false;
        }
        currentRowNode = parentRowNode;
      }
      return foundFirstChildPath ? nodeToSwapIn : null;
    };
    RowNode2.prototype.isFullWidthCell = function() {
      var isFullWidthCellFunc = this.beans.gridOptionsWrapper.getIsFullWidthCellFunc();
      return isFullWidthCellFunc ? isFullWidthCellFunc(this) : false;
    };
    RowNode2.prototype.getRoute = function() {
      if (this.key == null) {
        return;
      }
      var res = [];
      var pointer = this;
      while (pointer.key != null) {
        res.push(pointer.key);
        pointer = pointer.parent;
      }
      return res.reverse();
    };
    RowNode2.ID_PREFIX_ROW_GROUP = "row-group-";
    RowNode2.ID_PREFIX_TOP_PINNED = "t-";
    RowNode2.ID_PREFIX_BOTTOM_PINNED = "b-";
    RowNode2.OBJECT_ID_SEQUENCE = 0;
    RowNode2.EVENT_ROW_SELECTED = "rowSelected";
    RowNode2.EVENT_DATA_CHANGED = "dataChanged";
    RowNode2.EVENT_CELL_CHANGED = "cellChanged";
    RowNode2.EVENT_ALL_CHILDREN_COUNT_CHANGED = "allChildrenCountChanged";
    RowNode2.EVENT_MASTER_CHANGED = "masterChanged";
    RowNode2.EVENT_MOUSE_ENTER = "mouseEnter";
    RowNode2.EVENT_MOUSE_LEAVE = "mouseLeave";
    RowNode2.EVENT_HEIGHT_CHANGED = "heightChanged";
    RowNode2.EVENT_TOP_CHANGED = "topChanged";
    RowNode2.EVENT_DISPLAYED_CHANGED = "displayedChanged";
    RowNode2.EVENT_FIRST_CHILD_CHANGED = "firstChildChanged";
    RowNode2.EVENT_LAST_CHILD_CHANGED = "lastChildChanged";
    RowNode2.EVENT_CHILD_INDEX_CHANGED = "childIndexChanged";
    RowNode2.EVENT_ROW_INDEX_CHANGED = "rowIndexChanged";
    RowNode2.EVENT_EXPANDED_CHANGED = "expandedChanged";
    RowNode2.EVENT_HAS_CHILDREN_CHANGED = "hasChildrenChanged";
    RowNode2.EVENT_SELECTABLE_CHANGED = "selectableChanged";
    RowNode2.EVENT_UI_LEVEL_CHANGED = "uiLevelChanged";
    RowNode2.EVENT_HIGHLIGHT_CHANGED = "rowHighlightChanged";
    RowNode2.EVENT_DRAGGING_CHANGED = "draggingChanged";
    return RowNode2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$u = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$r = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var CheckboxSelectionComponent = function(_super) {
    __extends$u(CheckboxSelectionComponent2, _super);
    function CheckboxSelectionComponent2() {
      return _super.call(this, '\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>') || this;
    }
    CheckboxSelectionComponent2.prototype.postConstruct = function() {
      this.eCheckbox.setPassive(true);
    };
    CheckboxSelectionComponent2.prototype.getCheckboxId = function() {
      return this.eCheckbox.getInputElement().id;
    };
    CheckboxSelectionComponent2.prototype.onDataChanged = function() {
      this.onSelectionChanged();
    };
    CheckboxSelectionComponent2.prototype.onSelectableChanged = function() {
      this.showOrHideSelect();
    };
    CheckboxSelectionComponent2.prototype.onSelectionChanged = function() {
      var translate = this.gridOptionsWrapper.getLocaleTextFunc();
      var state2 = this.rowNode.isSelected();
      var stateName = state2 === void 0 ? translate("ariaIndeterminate", "indeterminate") : state2 === true ? translate("ariaChecked", "checked") : translate("ariaUnchecked", "unchecked");
      var ariaLabel = translate("ariaRowToggleSelection", "Press Space to toggle row selection");
      this.eCheckbox.setValue(state2, true);
      this.eCheckbox.setInputAriaLabel(ariaLabel + " (" + stateName + ")");
    };
    CheckboxSelectionComponent2.prototype.onCheckedClicked = function(event) {
      var groupSelectsFiltered = this.gridOptionsWrapper.isGroupSelectsFiltered();
      var updatedCount = this.rowNode.setSelectedParams({ newValue: false, rangeSelect: event.shiftKey, groupSelectsFiltered });
      return updatedCount;
    };
    CheckboxSelectionComponent2.prototype.onUncheckedClicked = function(event) {
      var groupSelectsFiltered = this.gridOptionsWrapper.isGroupSelectsFiltered();
      var updatedCount = this.rowNode.setSelectedParams({ newValue: true, rangeSelect: event.shiftKey, groupSelectsFiltered });
      return updatedCount;
    };
    CheckboxSelectionComponent2.prototype.init = function(params2) {
      var _this = this;
      this.rowNode = params2.rowNode;
      this.column = params2.column;
      this.onSelectionChanged();
      this.addGuiEventListener("click", function(event) {
        return stopPropagationForAgGrid(event);
      });
      this.addGuiEventListener("dblclick", function(event) {
        return stopPropagationForAgGrid(event);
      });
      this.addManagedListener(this.eCheckbox.getInputElement(), "click", function(event) {
        var isSelected = _this.eCheckbox.getValue();
        var previousValue = _this.eCheckbox.getPreviousValue();
        if (previousValue === void 0) {
          var result = _this.onUncheckedClicked(event || {});
          if (result === 0) {
            _this.onCheckedClicked(event);
          }
        } else if (isSelected) {
          _this.onCheckedClicked(event);
        } else {
          _this.onUncheckedClicked(event || {});
        }
      });
      this.addManagedListener(this.rowNode, RowNode.EVENT_ROW_SELECTED, this.onSelectionChanged.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_DATA_CHANGED, this.onDataChanged.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_SELECTABLE_CHANGED, this.onSelectableChanged.bind(this));
      var isRowSelectableFunc = this.gridOptionsWrapper.getIsRowSelectableFunc();
      var checkboxVisibleIsDynamic = isRowSelectableFunc || this.checkboxCallbackExists();
      if (checkboxVisibleIsDynamic) {
        var showOrHideSelectListener = this.showOrHideSelect.bind(this);
        this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, showOrHideSelectListener);
        this.addManagedListener(this.rowNode, RowNode.EVENT_DATA_CHANGED, showOrHideSelectListener);
        this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, showOrHideSelectListener);
        this.showOrHideSelect();
      }
      this.eCheckbox.getInputElement().setAttribute("tabindex", "-1");
    };
    CheckboxSelectionComponent2.prototype.showOrHideSelect = function() {
      var selectable = this.rowNode.selectable;
      if (selectable && this.checkboxCallbackExists()) {
        selectable = this.column.isCellCheckboxSelection(this.rowNode);
      }
      this.setVisible(selectable);
    };
    CheckboxSelectionComponent2.prototype.checkboxCallbackExists = function() {
      var colDef = this.column ? this.column.getColDef() : null;
      return !!colDef && typeof colDef.checkboxSelection === "function";
    };
    __decorate$r([
      RefSelector("eCheckbox")
    ], CheckboxSelectionComponent2.prototype, "eCheckbox", void 0);
    __decorate$r([
      PostConstruct
    ], CheckboxSelectionComponent2.prototype, "postConstruct", null);
    return CheckboxSelectionComponent2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$v = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$s = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  (function(DragSourceType) {
    DragSourceType[DragSourceType["ToolPanel"] = 0] = "ToolPanel";
    DragSourceType[DragSourceType["HeaderCell"] = 1] = "HeaderCell";
    DragSourceType[DragSourceType["RowDrag"] = 2] = "RowDrag";
    DragSourceType[DragSourceType["ChartPanel"] = 3] = "ChartPanel";
  })(exports2.DragSourceType || (exports2.DragSourceType = {}));
  (function(VerticalDirection) {
    VerticalDirection[VerticalDirection["Up"] = 0] = "Up";
    VerticalDirection[VerticalDirection["Down"] = 1] = "Down";
  })(exports2.VerticalDirection || (exports2.VerticalDirection = {}));
  (function(HorizontalDirection) {
    HorizontalDirection[HorizontalDirection["Left"] = 0] = "Left";
    HorizontalDirection[HorizontalDirection["Right"] = 1] = "Right";
  })(exports2.HorizontalDirection || (exports2.HorizontalDirection = {}));
  var DragAndDropService = function(_super) {
    __extends$v(DragAndDropService2, _super);
    function DragAndDropService2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.dragSourceAndParamsList = [];
      _this.dropTargets = [];
      return _this;
    }
    DragAndDropService_1 = DragAndDropService2;
    DragAndDropService2.prototype.init = function() {
      this.ePinnedIcon = createIcon("columnMovePin", this.gridOptionsWrapper, null);
      this.eHideIcon = createIcon("columnMoveHide", this.gridOptionsWrapper, null);
      this.eMoveIcon = createIcon("columnMoveMove", this.gridOptionsWrapper, null);
      this.eLeftIcon = createIcon("columnMoveLeft", this.gridOptionsWrapper, null);
      this.eRightIcon = createIcon("columnMoveRight", this.gridOptionsWrapper, null);
      this.eGroupIcon = createIcon("columnMoveGroup", this.gridOptionsWrapper, null);
      this.eAggregateIcon = createIcon("columnMoveValue", this.gridOptionsWrapper, null);
      this.ePivotIcon = createIcon("columnMovePivot", this.gridOptionsWrapper, null);
      this.eDropNotAllowedIcon = createIcon("dropNotAllowed", this.gridOptionsWrapper, null);
    };
    DragAndDropService2.prototype.addDragSource = function(dragSource, allowTouch) {
      if (allowTouch === void 0) {
        allowTouch = false;
      }
      var params2 = {
        eElement: dragSource.eElement,
        dragStartPixels: dragSource.dragStartPixels,
        onDragStart: this.onDragStart.bind(this, dragSource),
        onDragStop: this.onDragStop.bind(this),
        onDragging: this.onDragging.bind(this)
      };
      this.dragSourceAndParamsList.push({ params: params2, dragSource });
      this.dragService.addDragSource(params2, allowTouch);
    };
    DragAndDropService2.prototype.removeDragSource = function(dragSource) {
      var sourceAndParams = find(this.dragSourceAndParamsList, function(item) {
        return item.dragSource === dragSource;
      });
      if (sourceAndParams) {
        this.dragService.removeDragSource(sourceAndParams.params);
        removeFromArray(this.dragSourceAndParamsList, sourceAndParams);
      }
    };
    DragAndDropService2.prototype.clearDragSourceParamsList = function() {
      var _this = this;
      this.dragSourceAndParamsList.forEach(function(sourceAndParams) {
        return _this.dragService.removeDragSource(sourceAndParams.params);
      });
      this.dragSourceAndParamsList.length = 0;
    };
    DragAndDropService2.prototype.nudge = function() {
      if (this.dragging) {
        this.onDragging(this.eventLastTime, true);
      }
    };
    DragAndDropService2.prototype.onDragStart = function(dragSource, mouseEvent) {
      this.dragging = true;
      this.dragSource = dragSource;
      this.eventLastTime = mouseEvent;
      this.dragItem = this.dragSource.getDragItem();
      this.lastDropTarget = this.dragSource.dragSourceDropTarget;
      if (this.dragSource.onDragStarted) {
        this.dragSource.onDragStarted();
      }
      this.createGhost();
    };
    DragAndDropService2.prototype.onDragStop = function(mouseEvent) {
      this.eventLastTime = null;
      this.dragging = false;
      if (this.dragSource.onDragStopped) {
        this.dragSource.onDragStopped();
      }
      if (this.lastDropTarget && this.lastDropTarget.onDragStop) {
        var draggingEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, null, null, false);
        this.lastDropTarget.onDragStop(draggingEvent);
      }
      this.lastDropTarget = null;
      this.dragItem = null;
      this.removeGhost();
    };
    DragAndDropService2.prototype.onDragging = function(mouseEvent, fromNudge) {
      var _this = this;
      var hDirection = this.getHorizontalDirection(mouseEvent);
      var vDirection = this.getVerticalDirection(mouseEvent);
      this.eventLastTime = mouseEvent;
      this.positionGhost(mouseEvent);
      var validDropTargets = this.dropTargets.filter(function(target) {
        return _this.isMouseOnDropTarget(mouseEvent, target);
      });
      var len2 = validDropTargets.length;
      var dropTarget = null;
      if (len2 > 0) {
        dropTarget = len2 === 1 ? validDropTargets[0] : validDropTargets.reduce(function(prevTarget, currTarget) {
          if (!prevTarget) {
            return currTarget;
          }
          var prevContainer = prevTarget.getContainer();
          var currContainer = currTarget.getContainer();
          if (prevContainer.contains(currContainer)) {
            return currTarget;
          }
          return prevTarget;
        });
      }
      if (dropTarget !== this.lastDropTarget) {
        this.leaveLastTargetIfExists(mouseEvent, hDirection, vDirection, fromNudge);
        this.enterDragTargetIfExists(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);
        this.lastDropTarget = dropTarget;
      } else if (dropTarget && dropTarget.onDragging) {
        var draggingEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);
        dropTarget.onDragging(draggingEvent);
      }
    };
    DragAndDropService2.prototype.enterDragTargetIfExists = function(dropTarget, mouseEvent, hDirection, vDirection, fromNudge) {
      if (!dropTarget) {
        return;
      }
      if (dropTarget.onDragEnter) {
        var dragEnterEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);
        dropTarget.onDragEnter(dragEnterEvent);
      }
      this.setGhostIcon(dropTarget.getIconName ? dropTarget.getIconName() : null);
    };
    DragAndDropService2.prototype.leaveLastTargetIfExists = function(mouseEvent, hDirection, vDirection, fromNudge) {
      if (!this.lastDropTarget) {
        return;
      }
      if (this.lastDropTarget.onDragLeave) {
        var dragLeaveEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, hDirection, vDirection, fromNudge);
        this.lastDropTarget.onDragLeave(dragLeaveEvent);
      }
      this.setGhostIcon(null);
    };
    DragAndDropService2.prototype.getAllContainersFromDropTarget = function(dropTarget) {
      var secondaryContainers = dropTarget.getSecondaryContainers ? dropTarget.getSecondaryContainers() : null;
      var containers = [[dropTarget.getContainer()]];
      return secondaryContainers ? containers.concat(secondaryContainers) : containers;
    };
    DragAndDropService2.prototype.allContainersIntersect = function(mouseEvent, containers) {
      for (var _i = 0, containers_1 = containers; _i < containers_1.length; _i++) {
        var container = containers_1[_i];
        var rect = container.getBoundingClientRect();
        if (rect.width === 0 || rect.height === 0) {
          return false;
        }
        var horizontalFit = mouseEvent.clientX >= rect.left && mouseEvent.clientX < rect.right;
        var verticalFit = mouseEvent.clientY >= rect.top && mouseEvent.clientY < rect.bottom;
        if (!horizontalFit || !verticalFit) {
          return false;
        }
      }
      return true;
    };
    DragAndDropService2.prototype.isMouseOnDropTarget = function(mouseEvent, dropTarget) {
      var allContainersFromDropTarget = this.getAllContainersFromDropTarget(dropTarget);
      var mouseOverTarget = false;
      for (var _i = 0, allContainersFromDropTarget_1 = allContainersFromDropTarget; _i < allContainersFromDropTarget_1.length; _i++) {
        var currentContainers = allContainersFromDropTarget_1[_i];
        if (this.allContainersIntersect(mouseEvent, currentContainers)) {
          mouseOverTarget = true;
          break;
        }
      }
      return mouseOverTarget && dropTarget.isInterestedIn(this.dragSource.type);
    };
    DragAndDropService2.prototype.addDropTarget = function(dropTarget) {
      this.dropTargets.push(dropTarget);
    };
    DragAndDropService2.prototype.removeDropTarget = function(dropTarget) {
      this.dropTargets = this.dropTargets.filter(function(target) {
        return target.getContainer() !== dropTarget.getContainer();
      });
    };
    DragAndDropService2.prototype.hasExternalDropZones = function() {
      return this.dropTargets.some(function(zones) {
        return zones.external;
      });
    };
    DragAndDropService2.prototype.findExternalZone = function(params2) {
      var externalTargets = this.dropTargets.filter(function(target) {
        return target.external;
      });
      return find(externalTargets, function(zone) {
        return zone.getContainer() === params2.getContainer();
      });
    };
    DragAndDropService2.prototype.getHorizontalDirection = function(event) {
      var clientX = this.eventLastTime && this.eventLastTime.clientX;
      var eClientX = event.clientX;
      if (clientX === eClientX) {
        return null;
      }
      return clientX > eClientX ? exports2.HorizontalDirection.Left : exports2.HorizontalDirection.Right;
    };
    DragAndDropService2.prototype.getVerticalDirection = function(event) {
      var clientY = this.eventLastTime && this.eventLastTime.clientY;
      var eClientY = event.clientY;
      if (clientY === eClientY) {
        return null;
      }
      return clientY > eClientY ? exports2.VerticalDirection.Up : exports2.VerticalDirection.Down;
    };
    DragAndDropService2.prototype.createDropTargetEvent = function(dropTarget, event, hDirection, vDirection, fromNudge) {
      var dropZoneTarget = dropTarget.getContainer();
      var rect = dropZoneTarget.getBoundingClientRect();
      var _a = this, api2 = _a.gridApi, columnApi = _a.columnApi, dragItem = _a.dragItem, dragSource = _a.dragSource;
      var x = event.clientX - rect.left;
      var y = event.clientY - rect.top;
      return { event, x, y, vDirection, hDirection, dragSource, fromNudge, dragItem, api: api2, columnApi, dropZoneTarget };
    };
    DragAndDropService2.prototype.positionGhost = function(event) {
      var ghost = this.eGhost;
      if (!ghost) {
        return;
      }
      var ghostRect = ghost.getBoundingClientRect();
      var ghostHeight = ghostRect.height;
      var browserWidth = getBodyWidth() - 2;
      var browserHeight = getBodyHeight() - 2;
      var top = event.pageY - ghostHeight / 2;
      var left = event.pageX - 10;
      var usrDocument = this.gridOptionsWrapper.getDocument();
      var windowScrollY = window.pageYOffset || usrDocument.documentElement.scrollTop;
      var windowScrollX = window.pageXOffset || usrDocument.documentElement.scrollLeft;
      if (browserWidth > 0 && left + ghost.clientWidth > browserWidth + windowScrollX) {
        left = browserWidth + windowScrollX - ghost.clientWidth;
      }
      if (left < 0) {
        left = 0;
      }
      if (browserHeight > 0 && top + ghost.clientHeight > browserHeight + windowScrollY) {
        top = browserHeight + windowScrollY - ghost.clientHeight;
      }
      if (top < 0) {
        top = 0;
      }
      ghost.style.left = left + "px";
      ghost.style.top = top + "px";
    };
    DragAndDropService2.prototype.removeGhost = function() {
      if (this.eGhost && this.eGhostParent) {
        this.eGhostParent.removeChild(this.eGhost);
      }
      this.eGhost = null;
    };
    DragAndDropService2.prototype.createGhost = function() {
      this.eGhost = loadTemplate(DragAndDropService_1.GHOST_TEMPLATE);
      var theme = this.environment.getTheme().theme;
      if (theme) {
        addCssClass(this.eGhost, theme);
      }
      this.eGhostIcon = this.eGhost.querySelector(".ag-dnd-ghost-icon");
      this.setGhostIcon(null);
      var eText = this.eGhost.querySelector(".ag-dnd-ghost-label");
      var dragItemName = this.dragSource.dragItemName;
      if (isFunction(dragItemName)) {
        dragItemName = dragItemName();
      }
      eText.innerHTML = escapeString(dragItemName) || "";
      this.eGhost.style.height = "25px";
      this.eGhost.style.top = "20px";
      this.eGhost.style.left = "20px";
      var usrDocument = this.gridOptionsWrapper.getDocument();
      var targetEl = usrDocument.fullscreenElement || usrDocument.querySelector("body");
      this.eGhostParent = targetEl;
      if (!this.eGhostParent) {
        console.warn("AG Grid: could not find document body, it is needed for dragging columns");
      } else {
        this.eGhostParent.appendChild(this.eGhost);
      }
    };
    DragAndDropService2.prototype.setGhostIcon = function(iconName, shake2) {
      if (shake2 === void 0) {
        shake2 = false;
      }
      clearElement(this.eGhostIcon);
      var eIcon = null;
      if (!iconName) {
        iconName = this.dragSource.defaultIconName || DragAndDropService_1.ICON_NOT_ALLOWED;
      }
      switch (iconName) {
        case DragAndDropService_1.ICON_PINNED:
          eIcon = this.ePinnedIcon;
          break;
        case DragAndDropService_1.ICON_MOVE:
          eIcon = this.eMoveIcon;
          break;
        case DragAndDropService_1.ICON_LEFT:
          eIcon = this.eLeftIcon;
          break;
        case DragAndDropService_1.ICON_RIGHT:
          eIcon = this.eRightIcon;
          break;
        case DragAndDropService_1.ICON_GROUP:
          eIcon = this.eGroupIcon;
          break;
        case DragAndDropService_1.ICON_AGGREGATE:
          eIcon = this.eAggregateIcon;
          break;
        case DragAndDropService_1.ICON_PIVOT:
          eIcon = this.ePivotIcon;
          break;
        case DragAndDropService_1.ICON_NOT_ALLOWED:
          eIcon = this.eDropNotAllowedIcon;
          break;
        case DragAndDropService_1.ICON_HIDE:
          eIcon = this.eHideIcon;
          break;
      }
      addOrRemoveCssClass(this.eGhostIcon, "ag-shake-left-to-right", shake2);
      if (eIcon === this.eHideIcon && this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns()) {
        return;
      }
      if (eIcon) {
        this.eGhostIcon.appendChild(eIcon);
      }
    };
    var DragAndDropService_1;
    DragAndDropService2.ICON_PINNED = "pinned";
    DragAndDropService2.ICON_MOVE = "move";
    DragAndDropService2.ICON_LEFT = "left";
    DragAndDropService2.ICON_RIGHT = "right";
    DragAndDropService2.ICON_GROUP = "group";
    DragAndDropService2.ICON_AGGREGATE = "aggregate";
    DragAndDropService2.ICON_PIVOT = "pivot";
    DragAndDropService2.ICON_NOT_ALLOWED = "notAllowed";
    DragAndDropService2.ICON_HIDE = "hide";
    DragAndDropService2.GHOST_TEMPLATE = '<div class="ag-dnd-ghost ag-unselectable">\n            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n            <div class="ag-dnd-ghost-label"></div>\n        </div>';
    __decorate$s([
      Autowired("dragService")
    ], DragAndDropService2.prototype, "dragService", void 0);
    __decorate$s([
      Autowired("environment")
    ], DragAndDropService2.prototype, "environment", void 0);
    __decorate$s([
      Autowired("columnApi")
    ], DragAndDropService2.prototype, "columnApi", void 0);
    __decorate$s([
      Autowired("gridApi")
    ], DragAndDropService2.prototype, "gridApi", void 0);
    __decorate$s([
      PostConstruct
    ], DragAndDropService2.prototype, "init", null);
    __decorate$s([
      PreDestroy
    ], DragAndDropService2.prototype, "clearDragSourceParamsList", null);
    DragAndDropService2 = DragAndDropService_1 = __decorate$s([
      Bean("dragAndDropService")
    ], DragAndDropService2);
    return DragAndDropService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$w = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$t = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var RowDragComp = function(_super) {
    __extends$w(RowDragComp2, _super);
    function RowDragComp2(cellValueFn, rowNode, column, customGui, dragStartPixels, suppressVisibilityChange) {
      var _this = _super.call(this) || this;
      _this.cellValueFn = cellValueFn;
      _this.rowNode = rowNode;
      _this.column = column;
      _this.customGui = customGui;
      _this.dragStartPixels = dragStartPixels;
      _this.suppressVisibilityChange = suppressVisibilityChange;
      _this.dragSource = null;
      return _this;
    }
    RowDragComp2.prototype.isCustomGui = function() {
      return this.customGui != null;
    };
    RowDragComp2.prototype.postConstruct = function() {
      if (!this.customGui) {
        this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>');
        this.getGui().appendChild(createIconNoSpan("rowDrag", this.beans.gridOptionsWrapper, null));
        this.addDragSource();
      } else {
        this.setDragElement(this.customGui, this.dragStartPixels);
      }
      this.checkCompatibility();
      if (!this.suppressVisibilityChange) {
        var strategy = this.beans.gridOptionsWrapper.isRowDragManaged() ? new ManagedVisibilityStrategy(this, this.beans, this.rowNode, this.column) : new NonManagedVisibilityStrategy(this, this.beans, this.rowNode, this.column);
        this.createManagedBean(strategy, this.beans.context);
      }
    };
    RowDragComp2.prototype.setDragElement = function(dragElement, dragStartPixels) {
      this.setTemplateFromElement(dragElement);
      this.addDragSource(dragStartPixels);
    };
    RowDragComp2.prototype.getSelectedCount = function() {
      var isRowDragMultiRow = this.beans.gridOptionsWrapper.isRowDragMultiRow();
      if (!isRowDragMultiRow) {
        return 1;
      }
      var selection = this.beans.selectionService.getSelectedNodes();
      return selection.indexOf(this.rowNode) !== -1 ? selection.length : 1;
    };
    RowDragComp2.prototype.checkCompatibility = function() {
      var managed = this.beans.gridOptionsWrapper.isRowDragManaged();
      var treeData = this.beans.gridOptionsWrapper.isTreeData();
      if (treeData && managed) {
        doOnce(function() {
          return console.warn("AG Grid: If using row drag with tree data, you cannot have rowDragManaged=true");
        }, "RowDragComp.managedAndTreeData");
      }
    };
    RowDragComp2.prototype.addDragSource = function(dragStartPixels) {
      var _this = this;
      if (dragStartPixels === void 0) {
        dragStartPixels = 4;
      }
      if (this.dragSource) {
        this.removeDragSource();
      }
      var dragItem = {
        rowNode: this.rowNode,
        columns: this.column ? [this.column] : void 0,
        defaultTextValue: this.cellValueFn()
      };
      var rowDragText = this.column && this.column.getColDef().rowDragText;
      this.dragSource = {
        type: exports2.DragSourceType.RowDrag,
        eElement: this.getGui(),
        dragItemName: function() {
          var dragItemCount = _this.getSelectedCount();
          if (rowDragText) {
            return rowDragText(dragItem, dragItemCount);
          }
          return dragItemCount === 1 ? _this.cellValueFn() : dragItemCount + " rows";
        },
        getDragItem: function() {
          return dragItem;
        },
        dragStartPixels,
        dragSourceDomDataKey: this.beans.gridOptionsWrapper.getDomDataKey()
      };
      this.addMouseDownListenerIfNeeded();
      this.beans.dragAndDropService.addDragSource(this.dragSource, true);
    };
    RowDragComp2.prototype.addMouseDownListenerIfNeeded = function() {
      var _this = this;
      if (this.customGui || !this.column || !this.gridOptionsWrapper.isEnableCellTextSelect()) {
        return;
      }
      this.addManagedListener(this.getGui(), "mousedown", function(e) {
        e.preventDefault();
        _this.beans.focusService.setFocusedCell(_this.rowNode.rowIndex, _this.column, _this.rowNode.rowPinned, true);
      });
    };
    RowDragComp2.prototype.removeDragSource = function() {
      if (this.dragSource) {
        this.beans.dragAndDropService.removeDragSource(this.dragSource);
      }
      this.dragSource = null;
    };
    __decorate$t([
      Autowired("beans")
    ], RowDragComp2.prototype, "beans", void 0);
    __decorate$t([
      PostConstruct
    ], RowDragComp2.prototype, "postConstruct", null);
    __decorate$t([
      PreDestroy
    ], RowDragComp2.prototype, "removeDragSource", null);
    return RowDragComp2;
  }(Component);
  var VisibilityStrategy = function(_super) {
    __extends$w(VisibilityStrategy2, _super);
    function VisibilityStrategy2(parent, rowNode, column) {
      var _this = _super.call(this) || this;
      _this.parent = parent;
      _this.rowNode = rowNode;
      _this.column = column;
      return _this;
    }
    VisibilityStrategy2.prototype.setDisplayedOrVisible = function(neverDisplayed) {
      if (neverDisplayed) {
        this.parent.setDisplayed(false);
      } else {
        var shown = true;
        var isShownSometimes = false;
        if (this.column) {
          shown = this.column.isRowDrag(this.rowNode) || this.parent.isCustomGui();
          isShownSometimes = isFunction(this.column.getColDef().rowDrag);
        }
        if (isShownSometimes) {
          this.parent.setDisplayed(true);
          this.parent.setVisible(shown);
        } else {
          this.parent.setDisplayed(shown);
          this.parent.setVisible(true);
        }
      }
    };
    return VisibilityStrategy2;
  }(BeanStub);
  var NonManagedVisibilityStrategy = function(_super) {
    __extends$w(NonManagedVisibilityStrategy2, _super);
    function NonManagedVisibilityStrategy2(parent, beans, rowNode, column) {
      var _this = _super.call(this, parent, rowNode, column) || this;
      _this.beans = beans;
      return _this;
    }
    NonManagedVisibilityStrategy2.prototype.postConstruct = function() {
      this.addManagedListener(this.beans.gridOptionsWrapper, "suppressRowDrag", this.onSuppressRowDrag.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_DATA_CHANGED, this.workOutVisibility.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, this.workOutVisibility.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, this.workOutVisibility.bind(this));
      this.addManagedListener(this.beans.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.workOutVisibility.bind(this));
      this.workOutVisibility();
    };
    NonManagedVisibilityStrategy2.prototype.onSuppressRowDrag = function() {
      this.workOutVisibility();
    };
    NonManagedVisibilityStrategy2.prototype.workOutVisibility = function() {
      var neverDisplayed = this.beans.gridOptionsWrapper.isSuppressRowDrag();
      this.setDisplayedOrVisible(neverDisplayed);
    };
    __decorate$t([
      PostConstruct
    ], NonManagedVisibilityStrategy2.prototype, "postConstruct", null);
    return NonManagedVisibilityStrategy2;
  }(VisibilityStrategy);
  var ManagedVisibilityStrategy = function(_super) {
    __extends$w(ManagedVisibilityStrategy2, _super);
    function ManagedVisibilityStrategy2(parent, beans, rowNode, column) {
      var _this = _super.call(this, parent, rowNode, column) || this;
      _this.beans = beans;
      return _this;
    }
    ManagedVisibilityStrategy2.prototype.postConstruct = function() {
      this.addManagedListener(this.beans.eventService, Events.EVENT_SORT_CHANGED, this.workOutVisibility.bind(this));
      this.addManagedListener(this.beans.eventService, Events.EVENT_FILTER_CHANGED, this.workOutVisibility.bind(this));
      this.addManagedListener(this.beans.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.workOutVisibility.bind(this));
      this.addManagedListener(this.beans.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.workOutVisibility.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_DATA_CHANGED, this.workOutVisibility.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, this.workOutVisibility.bind(this));
      this.addManagedListener(this.beans.gridOptionsWrapper, "suppressRowDrag", this.onSuppressRowDrag.bind(this));
      this.workOutVisibility();
    };
    ManagedVisibilityStrategy2.prototype.onSuppressRowDrag = function() {
      this.workOutVisibility();
    };
    ManagedVisibilityStrategy2.prototype.workOutVisibility = function() {
      var gridBodyCon = this.beans.ctrlsService.getGridBodyCtrl();
      var rowDragFeature = gridBodyCon.getRowDragFeature();
      var shouldPreventRowMove = rowDragFeature && rowDragFeature.shouldPreventRowMove();
      var suppressRowDrag = this.beans.gridOptionsWrapper.isSuppressRowDrag();
      var hasExternalDropZones = this.beans.dragAndDropService.hasExternalDropZones();
      var neverDisplayed = shouldPreventRowMove && !hasExternalDropZones || suppressRowDrag;
      this.setDisplayedOrVisible(neverDisplayed);
    };
    __decorate$t([
      PostConstruct
    ], ManagedVisibilityStrategy2.prototype, "postConstruct", null);
    return ManagedVisibilityStrategy2;
  }(VisibilityStrategy);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$x = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __assign$4 = function() {
    __assign$4 = Object.assign || function(t) {
      for (var s, i2 = 1, n = arguments.length; i2 < n; i2++) {
        s = arguments[i2];
        for (var p2 in s)
          if (Object.prototype.hasOwnProperty.call(s, p2))
            t[p2] = s[p2];
      }
      return t;
    };
    return __assign$4.apply(this, arguments);
  };
  var __decorate$u = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var GroupCellRendererCtrl = function(_super) {
    __extends$x(GroupCellRendererCtrl2, _super);
    function GroupCellRendererCtrl2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    GroupCellRendererCtrl2.prototype.init = function(comp, eGui, eCheckbox, eExpanded, eContracted, compClass, params2) {
      this.params = params2;
      this.eGui = eGui;
      this.eCheckbox = eCheckbox;
      this.eExpanded = eExpanded;
      this.eContracted = eContracted;
      this.comp = comp;
      this.compClass = compClass;
      var topLevelFooter = this.isTopLevelFooter();
      var embeddedRowMismatch = this.isEmbeddedRowMismatch();
      var nullValue = params2.value == null;
      var skipCell = false;
      if (this.gridOptionsWrapper.isGroupIncludeFooter() && this.gridOptionsWrapper.isGroupHideOpenParents()) {
        var node = params2.node;
        if (node.footer) {
          var showRowGroup = params2.colDef && params2.colDef.showRowGroup;
          var rowGroupColumnId = node.rowGroupColumn && node.rowGroupColumn.getColId();
          skipCell = showRowGroup !== rowGroupColumnId;
        }
      }
      this.cellIsBlank = topLevelFooter ? false : embeddedRowMismatch || nullValue || skipCell;
      if (this.cellIsBlank) {
        return;
      }
      this.setupShowingValueForOpenedParent();
      this.findDisplayedGroupNode();
      this.addFullWidthRowDraggerIfNeeded();
      this.addExpandAndContract();
      this.addCheckboxIfNeeded();
      this.addValueElement();
      this.setupIndent();
    };
    GroupCellRendererCtrl2.prototype.isTopLevelFooter = function() {
      if (!this.gridOptionsWrapper.isGroupIncludeTotalFooter()) {
        return false;
      }
      if (this.params.value != null || this.params.node.level != -1) {
        return false;
      }
      var colDef = this.params.colDef;
      var doingFullWidth = colDef == null;
      if (doingFullWidth) {
        return true;
      }
      if (colDef.showRowGroup === true) {
        return true;
      }
      var rowGroupCols = this.columnModel.getRowGroupColumns();
      if (!rowGroupCols || rowGroupCols.length === 0) {
        return true;
      }
      var firstRowGroupCol = rowGroupCols[0];
      return firstRowGroupCol.getId() === colDef.showRowGroup;
    };
    GroupCellRendererCtrl2.prototype.isEmbeddedRowMismatch = function() {
      if (!this.params.fullWidth || !this.gridOptionsWrapper.isEmbedFullWidthRows()) {
        return false;
      }
      var pinnedLeftCell = this.params.pinned === Constants.PINNED_LEFT;
      var pinnedRightCell = this.params.pinned === Constants.PINNED_RIGHT;
      var bodyCell = !pinnedLeftCell && !pinnedRightCell;
      if (this.gridOptionsWrapper.isEnableRtl()) {
        if (this.columnModel.isPinningLeft()) {
          return !pinnedRightCell;
        }
        return !bodyCell;
      }
      if (this.columnModel.isPinningLeft()) {
        return !pinnedLeftCell;
      }
      return !bodyCell;
    };
    GroupCellRendererCtrl2.prototype.findDisplayedGroupNode = function() {
      var column = this.params.column;
      var rowNode = this.params.node;
      if (this.showingValueForOpenedParent) {
        var pointer = rowNode.parent;
        while (pointer != null) {
          if (pointer.rowGroupColumn && column.isRowGroupDisplayed(pointer.rowGroupColumn.getId())) {
            this.displayedGroupNode = pointer;
            break;
          }
          pointer = pointer.parent;
        }
      }
      if (missing(this.displayedGroupNode)) {
        this.displayedGroupNode = rowNode;
      }
    };
    GroupCellRendererCtrl2.prototype.setupShowingValueForOpenedParent = function() {
      var rowNode = this.params.node;
      var column = this.params.column;
      if (!this.gridOptionsWrapper.isGroupHideOpenParents()) {
        this.showingValueForOpenedParent = false;
        return;
      }
      if (!rowNode.groupData) {
        this.showingValueForOpenedParent = false;
        return;
      }
      var showingGroupNode = rowNode.rowGroupColumn != null;
      if (showingGroupNode) {
        var keyOfGroupingColumn = rowNode.rowGroupColumn.getId();
        var configuredToShowThisGroupLevel = column.isRowGroupDisplayed(keyOfGroupingColumn);
        if (configuredToShowThisGroupLevel) {
          this.showingValueForOpenedParent = false;
          return;
        }
      }
      var valPresent = rowNode.groupData[column.getId()] != null;
      this.showingValueForOpenedParent = valPresent;
    };
    GroupCellRendererCtrl2.prototype.addValueElement = function() {
      if (this.displayedGroupNode.footer) {
        this.addFooterValue();
      } else {
        this.addGroupValue();
        this.addChildCount();
      }
    };
    GroupCellRendererCtrl2.prototype.addGroupValue = function() {
      var paramsAdjusted = this.adjustParamsWithDetailsFromRelatedColumn();
      var innerCompDetails = this.getInnerCompDetails(paramsAdjusted);
      var valueFormatted = paramsAdjusted.valueFormatted, value = paramsAdjusted.value;
      var valueWhenNoRenderer = valueFormatted != null ? valueFormatted : value;
      this.comp.setInnerRenderer(innerCompDetails, valueWhenNoRenderer);
    };
    GroupCellRendererCtrl2.prototype.adjustParamsWithDetailsFromRelatedColumn = function() {
      var relatedColumn = this.displayedGroupNode.rowGroupColumn;
      var column = this.params.column;
      if (!relatedColumn) {
        return this.params;
      }
      var notFullWidth = column != null;
      if (notFullWidth) {
        var showingThisRowGroup = column.isRowGroupDisplayed(relatedColumn.getId());
        if (!showingThisRowGroup) {
          return this.params;
        }
      }
      var params2 = this.params;
      var _a = this.params, value = _a.value, scope = _a.scope, node = _a.node;
      var valueFormatted = this.valueFormatterService.formatValue(relatedColumn, node, scope, value);
      var paramsAdjusted = __assign$4(__assign$4({}, params2), { valueFormatted });
      return paramsAdjusted;
    };
    GroupCellRendererCtrl2.prototype.addFooterValue = function() {
      var footerValueGetter = this.params.footerValueGetter;
      var footerValue = "";
      if (footerValueGetter) {
        var paramsClone = cloneObject(this.params);
        paramsClone.value = this.params.value;
        if (typeof footerValueGetter === "function") {
          footerValue = footerValueGetter(paramsClone);
        } else if (typeof footerValueGetter === "string") {
          footerValue = this.expressionService.evaluate(footerValueGetter, paramsClone);
        } else {
          console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)");
        }
      } else {
        footerValue = "Total " + (this.params.value != null ? this.params.value : "");
      }
      var innerCompDetails = this.getInnerCompDetails(this.params);
      this.comp.setInnerRenderer(innerCompDetails, footerValue);
    };
    GroupCellRendererCtrl2.prototype.getInnerCompDetails = function(params2) {
      var _this = this;
      if (params2.fullWidth) {
        return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptions.groupRowRendererParams, params2);
      }
      var innerCompDetails = this.userComponentFactory.getInnerRendererDetails(params2, params2);
      var isGroupRowRenderer = function(details) {
        return details && details.componentClass == _this.compClass;
      };
      if (innerCompDetails && !isGroupRowRenderer(innerCompDetails)) {
        return innerCompDetails;
      }
      var relatedColumn = this.displayedGroupNode.rowGroupColumn;
      var relatedColDef = relatedColumn ? relatedColumn.getColDef() : void 0;
      if (!relatedColDef) {
        return;
      }
      var relatedCompDetails = this.userComponentFactory.getCellRendererDetails(relatedColDef, params2);
      if (relatedCompDetails && !isGroupRowRenderer(relatedCompDetails)) {
        return relatedCompDetails;
      }
      if (isGroupRowRenderer(relatedCompDetails) && relatedColDef.cellRendererParams && relatedColDef.cellRendererParams.innerRenderer) {
        var res = this.userComponentFactory.getInnerRendererDetails(relatedColDef.cellRendererParams, params2);
        return res;
      }
    };
    GroupCellRendererCtrl2.prototype.addChildCount = function() {
      if (this.params.suppressCount) {
        return;
      }
      this.addManagedListener(this.displayedGroupNode, RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED, this.updateChildCount.bind(this));
      this.updateChildCount();
    };
    GroupCellRendererCtrl2.prototype.updateChildCount = function() {
      var allChildrenCount = this.displayedGroupNode.allChildrenCount;
      var showingGroupForThisNode = this.isShowRowGroupForThisRow();
      var showCount = showingGroupForThisNode && allChildrenCount != null && allChildrenCount >= 0;
      var countString = showCount ? "(" + allChildrenCount + ")" : "";
      this.comp.setChildCount(countString);
    };
    GroupCellRendererCtrl2.prototype.isShowRowGroupForThisRow = function() {
      if (this.gridOptionsWrapper.isTreeData()) {
        return true;
      }
      var rowGroupColumn = this.displayedGroupNode.rowGroupColumn;
      if (!rowGroupColumn) {
        return false;
      }
      var column = this.params.column;
      var thisColumnIsInterested = column == null || column.isRowGroupDisplayed(rowGroupColumn.getId());
      return thisColumnIsInterested;
    };
    GroupCellRendererCtrl2.prototype.addExpandAndContract = function() {
      var params2 = this.params;
      var eExpandedIcon = createIconNoSpan("groupExpanded", this.gridOptionsWrapper, null);
      var eContractedIcon = createIconNoSpan("groupContracted", this.gridOptionsWrapper, null);
      if (eExpandedIcon) {
        this.eExpanded.appendChild(eExpandedIcon);
      }
      if (eContractedIcon) {
        this.eContracted.appendChild(eContractedIcon);
      }
      var eGroupCell = params2.eGridCell;
      if (!this.gridOptionsWrapper.isEnableGroupEdit() && this.isExpandable() && !params2.suppressDoubleClickExpand) {
        this.addManagedListener(eGroupCell, "dblclick", this.onCellDblClicked.bind(this));
      }
      this.addManagedListener(this.eExpanded, "click", this.onExpandClicked.bind(this));
      this.addManagedListener(this.eContracted, "click", this.onExpandClicked.bind(this));
      this.addManagedListener(eGroupCell, "keydown", this.onKeyDown.bind(this));
      this.addManagedListener(params2.node, RowNode.EVENT_EXPANDED_CHANGED, this.showExpandAndContractIcons.bind(this));
      this.showExpandAndContractIcons();
      var expandableChangedListener = this.onRowNodeIsExpandableChanged.bind(this);
      this.addManagedListener(this.displayedGroupNode, RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED, expandableChangedListener);
      this.addManagedListener(this.displayedGroupNode, RowNode.EVENT_MASTER_CHANGED, expandableChangedListener);
      this.addManagedListener(this.displayedGroupNode, RowNode.EVENT_HAS_CHILDREN_CHANGED, expandableChangedListener);
    };
    GroupCellRendererCtrl2.prototype.onExpandClicked = function(mouseEvent) {
      if (isStopPropagationForAgGrid(mouseEvent)) {
        return;
      }
      stopPropagationForAgGrid(mouseEvent);
      this.onExpandOrContract();
    };
    GroupCellRendererCtrl2.prototype.onExpandOrContract = function() {
      var rowNode = this.displayedGroupNode;
      var nextExpandState = !rowNode.expanded;
      rowNode.setExpanded(nextExpandState);
    };
    GroupCellRendererCtrl2.prototype.isExpandable = function() {
      if (this.showingValueForOpenedParent) {
        return true;
      }
      var rowNode = this.displayedGroupNode;
      var reducedLeafNode = this.columnModel.isPivotMode() && rowNode.leafGroup;
      var expandableGroup = rowNode.isExpandable() && !rowNode.footer && !reducedLeafNode;
      if (!expandableGroup) {
        return false;
      }
      var column = this.params.column;
      var displayingForOneColumnOnly = column != null && typeof column.getColDef().showRowGroup === "string";
      if (displayingForOneColumnOnly) {
        var showing = this.isShowRowGroupForThisRow();
        return showing;
      }
      return true;
    };
    GroupCellRendererCtrl2.prototype.showExpandAndContractIcons = function() {
      var _a = this, params2 = _a.params, displayedGroup = _a.displayedGroupNode, columnModel = _a.columnModel;
      var node = params2.node;
      var isExpandable = this.isExpandable();
      if (isExpandable) {
        var expanded = this.showingValueForOpenedParent ? true : node.expanded;
        this.comp.setExpandedDisplayed(expanded);
        this.comp.setContractedDisplayed(!expanded);
      } else {
        this.comp.setExpandedDisplayed(false);
        this.comp.setContractedDisplayed(false);
      }
      var pivotMode = columnModel.isPivotMode();
      var pivotModeAndLeafGroup = pivotMode && displayedGroup.leafGroup;
      var addExpandableCss = isExpandable && !pivotModeAndLeafGroup;
      var isTotalFooterNode = node.footer && node.level === -1;
      this.comp.addOrRemoveCssClass("ag-cell-expandable", addExpandableCss);
      this.comp.addOrRemoveCssClass("ag-row-group", addExpandableCss);
      if (pivotMode) {
        this.comp.addOrRemoveCssClass("ag-pivot-leaf-group", pivotModeAndLeafGroup);
      } else if (!isTotalFooterNode) {
        this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent", !addExpandableCss);
      }
    };
    GroupCellRendererCtrl2.prototype.onRowNodeIsExpandableChanged = function() {
      this.showExpandAndContractIcons();
      this.setIndent();
    };
    GroupCellRendererCtrl2.prototype.setupIndent = function() {
      var node = this.params.node;
      var suppressPadding = this.params.suppressPadding;
      if (!suppressPadding) {
        this.addManagedListener(node, RowNode.EVENT_UI_LEVEL_CHANGED, this.setIndent.bind(this));
        this.setIndent();
      }
    };
    GroupCellRendererCtrl2.prototype.setIndent = function() {
      if (this.gridOptionsWrapper.isGroupHideOpenParents()) {
        return;
      }
      var params2 = this.params;
      var rowNode = params2.node;
      var fullWithRow = !!params2.colDef;
      var treeData = this.gridOptionsWrapper.isTreeData();
      var manyDimensionThisColumn = !fullWithRow || treeData || params2.colDef.showRowGroup === true;
      var paddingCount = manyDimensionThisColumn ? rowNode.uiLevel : 0;
      var userProvidedPaddingPixelsTheDeprecatedWay = params2.padding >= 0;
      if (userProvidedPaddingPixelsTheDeprecatedWay) {
        doOnce(function() {
          return console.warn("AG Grid: cellRendererParams.padding no longer works, it was deprecated in since v14.2 and removed in v26, configuring padding for groupCellRenderer should be done with Sass variables and themes. Please see the AG Grid documentation page for Themes, in particular the property $row-group-indent-size.");
        }, "groupCellRenderer->doDeprecatedWay");
      }
      if (this.indentClass) {
        this.comp.addOrRemoveCssClass(this.indentClass, false);
      }
      this.indentClass = "ag-row-group-indent-" + paddingCount;
      this.comp.addOrRemoveCssClass(this.indentClass, true);
    };
    GroupCellRendererCtrl2.prototype.addFullWidthRowDraggerIfNeeded = function() {
      var _this = this;
      if (!this.params.fullWidth || !this.params.rowDrag) {
        return;
      }
      var rowDragComp = new RowDragComp(function() {
        return _this.params.value;
      }, this.params.node);
      this.createManagedBean(rowDragComp, this.context);
      this.eGui.insertAdjacentElement("afterbegin", rowDragComp.getGui());
    };
    GroupCellRendererCtrl2.prototype.isUserWantsSelected = function() {
      var paramsCheckbox = this.params.checkbox;
      if (typeof paramsCheckbox === "function") {
        return paramsCheckbox(this.params);
      }
      return paramsCheckbox === true;
    };
    GroupCellRendererCtrl2.prototype.addCheckboxIfNeeded = function() {
      var _this = this;
      var rowNode = this.displayedGroupNode;
      var checkboxNeeded = this.isUserWantsSelected() && !rowNode.footer && !rowNode.rowPinned && !rowNode.detail;
      if (checkboxNeeded) {
        var cbSelectionComponent_1 = new CheckboxSelectionComponent();
        this.getContext().createBean(cbSelectionComponent_1);
        cbSelectionComponent_1.init({ rowNode, column: this.params.column });
        this.eCheckbox.appendChild(cbSelectionComponent_1.getGui());
        this.addDestroyFunc(function() {
          return _this.getContext().destroyBean(cbSelectionComponent_1);
        });
      }
      this.comp.setCheckboxVisible(checkboxNeeded);
    };
    GroupCellRendererCtrl2.prototype.onKeyDown = function(event) {
      var enterKeyPressed = isKeyPressed(event, KeyCode.ENTER);
      if (!enterKeyPressed || this.params.suppressEnterExpand) {
        return;
      }
      var cellEditable = this.params.column && this.params.column.isCellEditable(this.params.node);
      if (cellEditable) {
        return;
      }
      this.onExpandOrContract();
    };
    GroupCellRendererCtrl2.prototype.onCellDblClicked = function(mouseEvent) {
      if (isStopPropagationForAgGrid(mouseEvent)) {
        return;
      }
      var targetIsExpandIcon = isElementInEventPath(this.eExpanded, mouseEvent) || isElementInEventPath(this.eContracted, mouseEvent);
      if (!targetIsExpandIcon) {
        this.onExpandOrContract();
      }
    };
    __decorate$u([
      Autowired("expressionService")
    ], GroupCellRendererCtrl2.prototype, "expressionService", void 0);
    __decorate$u([
      Autowired("valueFormatterService")
    ], GroupCellRendererCtrl2.prototype, "valueFormatterService", void 0);
    __decorate$u([
      Autowired("columnModel")
    ], GroupCellRendererCtrl2.prototype, "columnModel", void 0);
    __decorate$u([
      Autowired("userComponentFactory")
    ], GroupCellRendererCtrl2.prototype, "userComponentFactory", void 0);
    __decorate$u([
      Autowired("gridOptions")
    ], GroupCellRendererCtrl2.prototype, "gridOptions", void 0);
    return GroupCellRendererCtrl2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$y = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$v = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var GroupCellRenderer = function(_super) {
    __extends$y(GroupCellRenderer2, _super);
    function GroupCellRenderer2() {
      return _super.call(this, GroupCellRenderer2.TEMPLATE) || this;
    }
    GroupCellRenderer2.prototype.init = function(params2) {
      var _this = this;
      var compProxy = {
        setInnerRenderer: function(compDetails, valueToDisplay) {
          return _this.setRenderDetails(compDetails, valueToDisplay);
        },
        setChildCount: function(count) {
          return _this.eChildCount.innerHTML = count;
        },
        addOrRemoveCssClass: function(cssClass, value) {
          return _this.addOrRemoveCssClass(cssClass, value);
        },
        setContractedDisplayed: function(expanded) {
          return setDisplayed(_this.eContracted, expanded);
        },
        setExpandedDisplayed: function(expanded) {
          return setDisplayed(_this.eExpanded, expanded);
        },
        setCheckboxVisible: function(visible) {
          return addOrRemoveCssClass(_this.eCheckbox, "ag-invisible", !visible);
        }
      };
      var ctrl = this.createManagedBean(new GroupCellRendererCtrl());
      ctrl.init(compProxy, this.getGui(), this.eCheckbox, this.eExpanded, this.eContracted, this.constructor, params2);
    };
    GroupCellRenderer2.prototype.setRenderDetails = function(compDetails, valueToDisplay) {
      var _this = this;
      if (compDetails) {
        var componentPromise = this.userComponentFactory.createInstanceFromCompDetails(compDetails);
        if (!componentPromise) {
          return;
        }
        componentPromise.then(function(comp) {
          if (!comp) {
            return;
          }
          var destroyComp = function() {
            return _this.context.destroyBean(comp);
          };
          if (_this.isAlive()) {
            _this.eValue.appendChild(comp.getGui());
            _this.addDestroyFunc(destroyComp);
          } else {
            destroyComp();
          }
        });
      } else {
        this.eValue.innerText = valueToDisplay;
      }
    };
    GroupCellRenderer2.prototype.destroy = function() {
      this.getContext().destroyBean(this.innerCellRenderer);
      _super.prototype.destroy.call(this);
    };
    GroupCellRenderer2.prototype.refresh = function() {
      return false;
    };
    GroupCellRenderer2.TEMPLATE = '<span class="ag-cell-wrapper">\n            <span class="ag-group-expanded" ref="eExpanded"></span>\n            <span class="ag-group-contracted" ref="eContracted"></span>\n            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>\n            <span class="ag-group-value" ref="eValue"></span>\n            <span class="ag-group-child-count" ref="eChildCount"></span>\n        </span>';
    __decorate$v([
      Autowired("userComponentFactory")
    ], GroupCellRenderer2.prototype, "userComponentFactory", void 0);
    __decorate$v([
      RefSelector("eExpanded")
    ], GroupCellRenderer2.prototype, "eExpanded", void 0);
    __decorate$v([
      RefSelector("eContracted")
    ], GroupCellRenderer2.prototype, "eContracted", void 0);
    __decorate$v([
      RefSelector("eCheckbox")
    ], GroupCellRenderer2.prototype, "eCheckbox", void 0);
    __decorate$v([
      RefSelector("eValue")
    ], GroupCellRenderer2.prototype, "eValue", void 0);
    __decorate$v([
      RefSelector("eChildCount")
    ], GroupCellRenderer2.prototype, "eChildCount", void 0);
    return GroupCellRenderer2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$z = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$w = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var LoadingCellRenderer = function(_super) {
    __extends$z(LoadingCellRenderer2, _super);
    function LoadingCellRenderer2() {
      return _super.call(this, LoadingCellRenderer2.TEMPLATE) || this;
    }
    LoadingCellRenderer2.prototype.init = function(params2) {
      params2.node.failedLoad ? this.setupFailed() : this.setupLoading();
    };
    LoadingCellRenderer2.prototype.setupFailed = function() {
      this.eLoadingText.innerText = "ERR";
    };
    LoadingCellRenderer2.prototype.setupLoading = function() {
      var eLoadingIcon = createIconNoSpan("groupLoading", this.gridOptionsWrapper, null);
      if (eLoadingIcon) {
        this.eLoadingIcon.appendChild(eLoadingIcon);
      }
      var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();
      this.eLoadingText.innerText = localeTextFunc("loadingOoo", "Loading");
    };
    LoadingCellRenderer2.prototype.refresh = function(params2) {
      return false;
    };
    LoadingCellRenderer2.TEMPLATE = '<div class="ag-loading">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>';
    __decorate$w([
      RefSelector("eLoadingIcon")
    ], LoadingCellRenderer2.prototype, "eLoadingIcon", void 0);
    __decorate$w([
      RefSelector("eLoadingText")
    ], LoadingCellRenderer2.prototype, "eLoadingText", void 0);
    return LoadingCellRenderer2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$A = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var LoadingOverlayComponent = function(_super) {
    __extends$A(LoadingOverlayComponent2, _super);
    function LoadingOverlayComponent2() {
      return _super.call(this) || this;
    }
    LoadingOverlayComponent2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
    };
    LoadingOverlayComponent2.prototype.init = function(params2) {
      var template = this.gridOptionsWrapper.getOverlayLoadingTemplate() ? this.gridOptionsWrapper.getOverlayLoadingTemplate() : LoadingOverlayComponent2.DEFAULT_LOADING_OVERLAY_TEMPLATE;
      var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();
      var localisedTemplate = template.replace("[LOADING...]", localeTextFunc("loadingOoo", "Loading..."));
      this.setTemplate(localisedTemplate);
    };
    LoadingOverlayComponent2.DEFAULT_LOADING_OVERLAY_TEMPLATE = '<span class="ag-overlay-loading-center">[LOADING...]</span>';
    return LoadingOverlayComponent2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$B = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var NoRowsOverlayComponent = function(_super) {
    __extends$B(NoRowsOverlayComponent2, _super);
    function NoRowsOverlayComponent2() {
      return _super.call(this) || this;
    }
    NoRowsOverlayComponent2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
    };
    NoRowsOverlayComponent2.prototype.init = function(params2) {
      var template = this.gridOptionsWrapper.getOverlayNoRowsTemplate() ? this.gridOptionsWrapper.getOverlayNoRowsTemplate() : NoRowsOverlayComponent2.DEFAULT_NO_ROWS_TEMPLATE;
      var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();
      var localisedTemplate = template.replace("[NO_ROWS_TO_SHOW]", localeTextFunc("noRowsToShow", "No Rows To Show"));
      this.setTemplate(localisedTemplate);
    };
    NoRowsOverlayComponent2.DEFAULT_NO_ROWS_TEMPLATE = '<span class="ag-overlay-no-rows-center">[NO_ROWS_TO_SHOW]</span>';
    return NoRowsOverlayComponent2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$C = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var TooltipComponent = function(_super) {
    __extends$C(TooltipComponent2, _super);
    function TooltipComponent2() {
      return _super.call(this, '<div class="ag-tooltip"></div>') || this;
    }
    TooltipComponent2.prototype.init = function(params2) {
      var value = params2.value;
      this.getGui().innerHTML = escapeString(value);
    };
    return TooltipComponent2;
  }(PopupComponent);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$D = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$x = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var UserComponentRegistry = function(_super) {
    __extends$D(UserComponentRegistry2, _super);
    function UserComponentRegistry2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.agGridDefaults = {
        agDateInput: DefaultDateComponent,
        agColumnHeader: HeaderComp,
        agColumnGroupHeader: HeaderGroupComp,
        agTextColumnFloatingFilter: TextFloatingFilter,
        agNumberColumnFloatingFilter: NumberFloatingFilter,
        agDateColumnFloatingFilter: DateFloatingFilter,
        agAnimateShowChangeCellRenderer: AnimateShowChangeCellRenderer,
        agAnimateSlideCellRenderer: AnimateSlideCellRenderer,
        agGroupCellRenderer: GroupCellRenderer,
        agGroupRowRenderer: GroupCellRenderer,
        agLoadingCellRenderer: LoadingCellRenderer,
        agCellEditor: TextCellEditor,
        agTextCellEditor: TextCellEditor,
        agSelectCellEditor: SelectCellEditor,
        agPopupTextCellEditor: PopupTextCellEditor,
        agPopupSelectCellEditor: PopupSelectCellEditor,
        agLargeTextCellEditor: LargeTextCellEditor,
        agTextColumnFilter: TextFilter,
        agNumberColumnFilter: NumberFilter,
        agDateColumnFilter: DateFilter,
        agLoadingOverlay: LoadingOverlayComponent,
        agNoRowsOverlay: NoRowsOverlayComponent,
        agTooltipComponent: TooltipComponent
      };
      _this.agDeprecatedNames = {
        set: {
          newComponentName: "agSetColumnFilter",
          propertyHolder: "filter"
        },
        text: {
          newComponentName: "agTextColumnFilter",
          propertyHolder: "filter"
        },
        number: {
          newComponentName: "agNumberColumnFilter",
          propertyHolder: "filter"
        },
        date: {
          newComponentName: "agDateColumnFilter",
          propertyHolder: "filter"
        },
        group: {
          newComponentName: "agGroupCellRenderer",
          propertyHolder: "cellRenderer"
        },
        animateShowChange: {
          newComponentName: "agAnimateShowChangeCellRenderer",
          propertyHolder: "cellRenderer"
        },
        animateSlide: {
          newComponentName: "agAnimateSlideCellRenderer",
          propertyHolder: "cellRenderer"
        },
        select: {
          newComponentName: "agSelectCellEditor",
          propertyHolder: "cellEditor"
        },
        largeText: {
          newComponentName: "agLargeTextCellEditor",
          propertyHolder: "cellEditor"
        },
        popupSelect: {
          newComponentName: "agPopupSelectCellEditor",
          propertyHolder: "cellEditor"
        },
        popupText: {
          newComponentName: "agPopupTextCellEditor",
          propertyHolder: "cellEditor"
        },
        richSelect: {
          newComponentName: "agRichSelectCellEditor",
          propertyHolder: "cellEditor"
        },
        headerComponent: {
          newComponentName: "agColumnHeader",
          propertyHolder: "headerComponent"
        }
      };
      _this.jsComponents = {};
      _this.frameworkComponents = {};
      return _this;
    }
    UserComponentRegistry2.prototype.init = function() {
      var _this = this;
      if (this.gridOptions.components != null) {
        iterateObject(this.gridOptions.components, function(key, component) {
          return _this.registerComponent(key, component);
        });
      }
      if (this.gridOptions.frameworkComponents != null) {
        iterateObject(this.gridOptions.frameworkComponents, function(key, component) {
          return _this.registerFwComponent(key, component);
        });
      }
    };
    UserComponentRegistry2.prototype.registerDefaultComponent = function(rawName, component) {
      var name = this.translateIfDeprecated(rawName);
      if (this.agGridDefaults[name]) {
        console.error("Trying to overwrite a default component. You should call registerComponent");
        return;
      }
      this.agGridDefaults[name] = component;
    };
    UserComponentRegistry2.prototype.registerComponent = function(rawName, component) {
      var name = this.translateIfDeprecated(rawName);
      if (this.frameworkComponents[name]) {
        console.error("Trying to register a component that you have already registered for frameworks: " + name);
        return;
      }
      this.jsComponents[name] = component;
    };
    UserComponentRegistry2.prototype.registerFwComponent = function(rawName, component) {
      var name = this.translateIfDeprecated(rawName);
      if (this.jsComponents[name]) {
        console.error("Trying to register a component that you have already registered for plain javascript: " + name);
        return;
      }
      this.frameworkComponents[name] = component;
    };
    UserComponentRegistry2.prototype.retrieve = function(rawName) {
      var name = this.translateIfDeprecated(rawName);
      var frameworkComponent = this.frameworkComponents[name] || this.getFrameworkOverrides().frameworkComponent(name);
      if (frameworkComponent) {
        return {
          componentFromFramework: true,
          component: frameworkComponent
        };
      }
      var jsComponent = this.jsComponents[name];
      if (jsComponent) {
        return {
          componentFromFramework: false,
          component: jsComponent
        };
      }
      var defaultComponent = this.agGridDefaults[name];
      if (defaultComponent) {
        return {
          componentFromFramework: false,
          component: defaultComponent
        };
      }
      if (Object.keys(this.agGridDefaults).indexOf(name) < 0) {
        console.warn("AG Grid: Looking for component [" + name + "] but it wasn't found.");
      }
      return null;
    };
    UserComponentRegistry2.prototype.translateIfDeprecated = function(raw) {
      var deprecatedInfo = this.agDeprecatedNames[raw];
      if (deprecatedInfo != null) {
        doOnce(function() {
          console.warn("ag-grid. Since v15.0 component names have been renamed to be namespaced. You should rename " + deprecatedInfo.propertyHolder + ":" + raw + " to " + deprecatedInfo.propertyHolder + ":" + deprecatedInfo.newComponentName);
        }, "DEPRECATE_COMPONENT_" + raw);
        return deprecatedInfo.newComponentName;
      }
      return raw;
    };
    __decorate$x([
      Autowired("gridOptions")
    ], UserComponentRegistry2.prototype, "gridOptions", void 0);
    __decorate$x([
      PostConstruct
    ], UserComponentRegistry2.prototype, "init", null);
    UserComponentRegistry2 = __decorate$x([
      Bean("userComponentRegistry")
    ], UserComponentRegistry2);
    return UserComponentRegistry2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var DateComponent = {
    propertyName: "dateComponent",
    isCellRenderer: function() {
      return false;
    }
  };
  var HeaderComponent = {
    propertyName: "headerComponent",
    isCellRenderer: function() {
      return false;
    }
  };
  var HeaderGroupComponent = {
    propertyName: "headerGroupComponent",
    isCellRenderer: function() {
      return false;
    }
  };
  var CellRendererComponent = {
    propertyName: "cellRenderer",
    isCellRenderer: function() {
      return true;
    }
  };
  var CellEditorComponent = {
    propertyName: "cellEditor",
    isCellRenderer: function() {
      return false;
    }
  };
  var InnerRendererComponent = {
    propertyName: "innerRenderer",
    isCellRenderer: function() {
      return true;
    }
  };
  var LoadingOverlayComponent$1 = {
    propertyName: "loadingOverlayComponent",
    isCellRenderer: function() {
      return false;
    }
  };
  var NoRowsOverlayComponent$1 = {
    propertyName: "noRowsOverlayComponent",
    isCellRenderer: function() {
      return false;
    }
  };
  var TooltipComponent$1 = {
    propertyName: "tooltipComponent",
    isCellRenderer: function() {
      return false;
    }
  };
  var FilterComponent = {
    propertyName: "filter",
    isCellRenderer: function() {
      return false;
    }
  };
  var FloatingFilterComponent = {
    propertyName: "floatingFilterComponent",
    isCellRenderer: function() {
      return false;
    }
  };
  var ToolPanelComponent = {
    propertyName: "toolPanel",
    isCellRenderer: function() {
      return false;
    }
  };
  var StatusPanelComponent = {
    propertyName: "statusPanel",
    isCellRenderer: function() {
      return false;
    }
  };
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$E = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __assign$5 = function() {
    __assign$5 = Object.assign || function(t) {
      for (var s, i2 = 1, n = arguments.length; i2 < n; i2++) {
        s = arguments[i2];
        for (var p2 in s)
          if (Object.prototype.hasOwnProperty.call(s, p2))
            t[p2] = s[p2];
      }
      return t;
    };
    return __assign$5.apply(this, arguments);
  };
  var __decorate$y = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var UserComponentFactory = function(_super) {
    __extends$E(UserComponentFactory2, _super);
    function UserComponentFactory2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    UserComponentFactory2.prototype.getHeaderCompDetails = function(colDef, params2) {
      return this.getCompDetails(colDef, HeaderComponent, "agColumnHeader", params2);
    };
    UserComponentFactory2.prototype.getHeaderGroupCompDetails = function(params2) {
      var colGroupDef = params2.columnGroup.getColGroupDef();
      return this.getCompDetails(colGroupDef, HeaderGroupComponent, "agColumnGroupHeader", params2);
    };
    UserComponentFactory2.prototype.getFullWidthCellRendererDetails = function(params2, cellRendererType, cellRendererName) {
      return this.getCompDetails(this.gridOptions, { propertyName: cellRendererType, isCellRenderer: function() {
        return true;
      } }, cellRendererName, params2);
    };
    UserComponentFactory2.prototype.getInnerRendererDetails = function(def, params2) {
      return this.getCompDetails(def, InnerRendererComponent, null, params2);
    };
    UserComponentFactory2.prototype.getFullWidthGroupRowInnerCellRenderer = function(def, params2) {
      return this.getCompDetails(def, InnerRendererComponent, null, params2);
    };
    UserComponentFactory2.prototype.getCellRendererDetails = function(def, params2) {
      return this.getCompDetails(def, CellRendererComponent, null, params2);
    };
    UserComponentFactory2.prototype.getCellEditorDetails = function(def, params2) {
      return this.getCompDetails(def, CellEditorComponent, "agCellEditor", params2, true);
    };
    UserComponentFactory2.prototype.newCellRenderer = function(def, params2) {
      return this.lookupAndCreateComponent(def, params2, CellRendererComponent, null, true);
    };
    UserComponentFactory2.prototype.newDateComponent = function(params2) {
      return this.lookupAndCreateComponent(this.gridOptions, params2, DateComponent, "agDateInput");
    };
    UserComponentFactory2.prototype.newLoadingOverlayComponent = function(params2) {
      return this.lookupAndCreateComponent(this.gridOptions, params2, LoadingOverlayComponent$1, "agLoadingOverlay");
    };
    UserComponentFactory2.prototype.newNoRowsOverlayComponent = function(params2) {
      return this.lookupAndCreateComponent(this.gridOptions, params2, NoRowsOverlayComponent$1, "agNoRowsOverlay");
    };
    UserComponentFactory2.prototype.newTooltipComponent = function(params2) {
      return this.lookupAndCreateComponent(params2.colDef, params2, TooltipComponent$1, "agTooltipComponent");
    };
    UserComponentFactory2.prototype.newFilterComponent = function(def, params2, defaultFilter) {
      return this.lookupAndCreateComponent(def, params2, FilterComponent, defaultFilter, false);
    };
    UserComponentFactory2.prototype.newSetFilterCellRenderer = function(def, params2) {
      return this.lookupAndCreateComponent(def, params2, CellRendererComponent, null, true);
    };
    UserComponentFactory2.prototype.newFloatingFilterComponent = function(def, params2, defaultFloatingFilter) {
      return this.lookupAndCreateComponent(def, params2, FloatingFilterComponent, defaultFloatingFilter, true);
    };
    UserComponentFactory2.prototype.newToolPanelComponent = function(toolPanelDef, params2) {
      return this.lookupAndCreateComponent(toolPanelDef, params2, ToolPanelComponent);
    };
    UserComponentFactory2.prototype.newStatusPanelComponent = function(def, params2) {
      return this.lookupAndCreateComponent(def, params2, StatusPanelComponent);
    };
    UserComponentFactory2.prototype.lookupComponent = function(defObject, type, params2, defaultComponentName) {
      var _this = this;
      if (params2 === void 0) {
        params2 = null;
      }
      var propertyName = type.propertyName;
      var paramsFromSelector;
      var comp;
      var frameworkComp;
      if (defObject) {
        var defObjectAny = defObject;
        var selectorFunc = defObjectAny[propertyName + "Selector"];
        var selectorRes = selectorFunc ? selectorFunc(params2) : null;
        if (selectorRes) {
          comp = selectorRes.component;
          frameworkComp = selectorRes.frameworkComponent;
          paramsFromSelector = selectorRes.params;
        } else {
          comp = defObjectAny[propertyName];
          frameworkComp = defObjectAny[propertyName + "Framework"];
        }
        if (comp === true) {
          comp = void 0;
        }
      }
      var lookupFromRegistry = function(key) {
        var item = _this.userComponentRegistry.retrieve(key);
        if (item) {
          comp = !item.componentFromFramework ? item.component : void 0;
          frameworkComp = item.componentFromFramework ? item.component : void 0;
        } else {
          comp = void 0;
          frameworkComp = void 0;
        }
      };
      if (typeof comp === "string") {
        lookupFromRegistry(comp);
      }
      if (comp == null && frameworkComp == null && defaultComponentName != null) {
        lookupFromRegistry(defaultComponentName);
      }
      if (comp && !this.agComponentUtils.doesImplementIComponent(comp)) {
        comp = this.agComponentUtils.adaptFunction(propertyName, comp);
      }
      if (!comp && !frameworkComp) {
        return null;
      }
      return {
        componentFromFramework: comp == null,
        componentClass: comp ? comp : frameworkComp,
        params: paramsFromSelector,
        type
      };
    };
    UserComponentFactory2.prototype.createInstanceFromCompDetails = function(compDetails, defaultComponentName) {
      if (!compDetails) {
        return null;
      }
      var params2 = compDetails.params, componentClass = compDetails.componentClass, componentFromFramework = compDetails.componentFromFramework;
      var instance2 = this.createComponentInstance(compDetails.type, defaultComponentName, componentClass, componentFromFramework);
      if (!instance2) {
        return null;
      }
      this.addReactHacks(params2);
      var deferredInit = this.initComponent(instance2, params2);
      if (deferredInit == null) {
        return AgPromise.resolve(instance2);
      }
      return deferredInit.then(function() {
        return instance2;
      });
    };
    UserComponentFactory2.prototype.createUserComponentFromConcreteClass = function(CompClass, agGridParams) {
      var internalComponent = new CompClass();
      this.initComponent(internalComponent, agGridParams);
      return internalComponent;
    };
    UserComponentFactory2.prototype.mergeParamsWithApplicationProvidedParams = function(definitionObject, propertyName, paramsFromGrid, paramsFromSelector) {
      if (paramsFromSelector === void 0) {
        paramsFromSelector = null;
      }
      var params2 = {};
      mergeDeep(params2, paramsFromGrid);
      var userParams = definitionObject ? definitionObject[propertyName + "Params"] : null;
      if (userParams != null) {
        if (typeof userParams === "function") {
          var userParamsFromFunc = userParams(paramsFromGrid);
          mergeDeep(params2, userParamsFromFunc);
        } else if (typeof userParams === "object") {
          mergeDeep(params2, userParams);
        }
      }
      mergeDeep(params2, paramsFromSelector);
      return params2;
    };
    UserComponentFactory2.prototype.getCompDetails = function(defObject, type, defaultName, params2, mandatory) {
      if (mandatory === void 0) {
        mandatory = false;
      }
      var propName = type.propertyName;
      var compDetails = this.lookupComponent(defObject, type, params2, defaultName);
      if (!compDetails || !compDetails.componentClass) {
        if (mandatory) {
          this.logComponentMissing(defObject, propName);
        }
        return void 0;
      }
      var paramsMerged = this.mergeParamsWithApplicationProvidedParams(defObject, propName, params2, compDetails.params);
      return __assign$5(__assign$5({}, compDetails), { params: paramsMerged });
    };
    UserComponentFactory2.prototype.lookupAndCreateComponent = function(def, paramsFromGrid, componentType, defaultComponentName, optional) {
      if (optional === void 0) {
        optional = false;
      }
      var compDetails = this.getCompDetails(def, componentType, defaultComponentName, paramsFromGrid, !optional);
      if (!compDetails) {
        return null;
      }
      return this.createInstanceFromCompDetails(compDetails, defaultComponentName);
    };
    UserComponentFactory2.prototype.addReactHacks = function(params2) {
      var agGridReact = this.context.getBean("agGridReact");
      if (agGridReact) {
        params2.agGridReact = cloneObject(agGridReact);
      }
      var frameworkComponentWrapper = this.context.getBean("frameworkComponentWrapper");
      if (frameworkComponentWrapper) {
        params2.frameworkComponentWrapper = frameworkComponentWrapper;
      }
    };
    UserComponentFactory2.prototype.logComponentMissing = function(holder, propertyName, defaultComponentName) {
      var overrideName = holder ? holder[propertyName] : defaultComponentName;
      var nameToReport = overrideName ? overrideName : defaultComponentName;
      console.error("Could not find component " + nameToReport + ", did you forget to configure this component?");
    };
    UserComponentFactory2.prototype.createComponentInstance = function(componentType, defaultComponentName, component, componentFromFramework) {
      var propertyName = componentType.propertyName;
      var jsComponent = !componentFromFramework;
      if (jsComponent) {
        return new component();
      }
      if (!this.frameworkComponentWrapper) {
        console.warn("AG Grid - Because you are using our new React UI (property reactUi=true), it is not possible to use a React Component for " + componentType.propertyName + ". This is work in progress and we plan to support this soon. In the meantime, please either set reactUi=false, or replace this component with one written in JavaScript.");
        return null;
      }
      var FrameworkComponentRaw = component;
      var thisComponentConfig = this.componentMetadataProvider.retrieve(propertyName);
      return this.frameworkComponentWrapper.wrap(FrameworkComponentRaw, thisComponentConfig.mandatoryMethodList, thisComponentConfig.optionalMethodList, componentType, defaultComponentName);
    };
    UserComponentFactory2.prototype.initComponent = function(component, params2) {
      this.context.createBean(component);
      if (component.init == null) {
        return;
      }
      return component.init(params2);
    };
    __decorate$y([
      Autowired("gridOptions")
    ], UserComponentFactory2.prototype, "gridOptions", void 0);
    __decorate$y([
      Autowired("agComponentUtils")
    ], UserComponentFactory2.prototype, "agComponentUtils", void 0);
    __decorate$y([
      Autowired("componentMetadataProvider")
    ], UserComponentFactory2.prototype, "componentMetadataProvider", void 0);
    __decorate$y([
      Autowired("userComponentRegistry")
    ], UserComponentFactory2.prototype, "userComponentRegistry", void 0);
    __decorate$y([
      Optional("frameworkComponentWrapper")
    ], UserComponentFactory2.prototype, "frameworkComponentWrapper", void 0);
    UserComponentFactory2 = __decorate$y([
      Bean("userComponentFactory")
    ], UserComponentFactory2);
    return UserComponentFactory2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var SideBarDefParser = function() {
    function SideBarDefParser2() {
    }
    SideBarDefParser2.parse = function(toParse) {
      if (!toParse) {
        return null;
      }
      if (toParse === true) {
        return {
          toolPanels: [
            SideBarDefParser2.DEFAULT_COLUMN_COMP,
            SideBarDefParser2.DEFAULT_FILTER_COMP
          ],
          defaultToolPanel: "columns"
        };
      }
      if (typeof toParse === "string") {
        return SideBarDefParser2.parse([toParse]);
      }
      if (Array.isArray(toParse)) {
        var comps_1 = [];
        toParse.forEach(function(key) {
          var lookupResult = SideBarDefParser2.DEFAULT_BY_KEY[key];
          if (!lookupResult) {
            console.warn("ag-grid: the key " + key + " is not a valid key for specifying a tool panel, valid keys are: " + Object.keys(SideBarDefParser2.DEFAULT_BY_KEY).join(","));
            return;
          }
          comps_1.push(lookupResult);
        });
        if (comps_1.length === 0) {
          return null;
        }
        return {
          toolPanels: comps_1,
          defaultToolPanel: comps_1[0].id
        };
      }
      var result = {
        toolPanels: SideBarDefParser2.parseComponents(toParse.toolPanels),
        defaultToolPanel: toParse.defaultToolPanel,
        hiddenByDefault: toParse.hiddenByDefault,
        position: toParse.position
      };
      return result;
    };
    SideBarDefParser2.parseComponents = function(from2) {
      var result = [];
      if (!from2) {
        return result;
      }
      from2.forEach(function(it) {
        var toAdd = null;
        if (typeof it === "string") {
          var lookupResult = SideBarDefParser2.DEFAULT_BY_KEY[it];
          if (!lookupResult) {
            console.warn("ag-grid: the key " + it + " is not a valid key for specifying a tool panel, valid keys are: " + Object.keys(SideBarDefParser2.DEFAULT_BY_KEY).join(","));
            return;
          }
          toAdd = lookupResult;
        } else {
          toAdd = it;
        }
        result.push(toAdd);
      });
      return result;
    };
    SideBarDefParser2.DEFAULT_COLUMN_COMP = {
      id: "columns",
      labelDefault: "Columns",
      labelKey: "columns",
      iconKey: "columns",
      toolPanel: "agColumnsToolPanel"
    };
    SideBarDefParser2.DEFAULT_FILTER_COMP = {
      id: "filters",
      labelDefault: "Filters",
      labelKey: "filters",
      iconKey: "filter",
      toolPanel: "agFiltersToolPanel"
    };
    SideBarDefParser2.DEFAULT_BY_KEY = {
      columns: SideBarDefParser2.DEFAULT_COLUMN_COMP,
      filters: SideBarDefParser2.DEFAULT_FILTER_COMP
    };
    return SideBarDefParser2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __decorate$z = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param$3 = function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  var __spreadArrays$4 = function() {
    for (var s = 0, i2 = 0, il = arguments.length; i2 < il; i2++)
      s += arguments[i2].length;
    for (var r = Array(s), k = 0, i2 = 0; i2 < il; i2++)
      for (var a = arguments[i2], j = 0, jl = a.length; j < jl; j++, k++)
        r[k] = a[j];
    return r;
  };
  var DEFAULT_ROW_HEIGHT = 25;
  var DEFAULT_DETAIL_ROW_HEIGHT = 300;
  var DEFAULT_VIEWPORT_ROW_MODEL_PAGE_SIZE = 5;
  var DEFAULT_VIEWPORT_ROW_MODEL_BUFFER_SIZE = 5;
  var DEFAULT_KEEP_DETAIL_ROW_COUNT = 10;
  function isTrue(value) {
    return value === true || value === "true";
  }
  function toNumber(value) {
    if (typeof value == "number") {
      return value;
    }
    if (typeof value == "string") {
      return parseInt(value, 10);
    }
  }
  function zeroOrGreater(value, defaultValue) {
    if (value >= 0) {
      return value;
    }
    return defaultValue;
  }
  function oneOrGreater(value, defaultValue) {
    var valueNumber = parseInt(value, 10);
    if (isNumeric(valueNumber) && valueNumber > 0) {
      return valueNumber;
    }
    return defaultValue;
  }
  var GridOptionsWrapper = function() {
    function GridOptionsWrapper2() {
      this.propertyEventService = new EventService();
      this.domDataKey = "__AG_" + Math.random().toString();
      this.destroyed = false;
    }
    GridOptionsWrapper_1 = GridOptionsWrapper2;
    GridOptionsWrapper2.prototype.agWire = function(gridApi, columnApi) {
      this.gridOptions.api = gridApi;
      this.gridOptions.columnApi = columnApi;
      this.checkForDeprecated();
      this.checkForViolations();
    };
    GridOptionsWrapper2.prototype.destroy = function() {
      this.gridOptions.api = null;
      this.gridOptions.columnApi = null;
      this.destroyed = true;
    };
    GridOptionsWrapper2.prototype.init = function() {
      var _this = this;
      if (this.gridOptions.suppressPropertyNamesCheck !== true) {
        this.checkGridOptionsProperties();
        this.checkColumnDefProperties();
      }
      if (this.gridOptions.sideBar != null) {
        this.gridOptions.sideBar = SideBarDefParser.parse(this.gridOptions.sideBar);
      }
      var async = this.useAsyncEvents();
      this.eventService.addGlobalListener(this.globalEventHandler.bind(this), async);
      if (this.isGroupSelectsChildren() && this.isSuppressParentsInRowNodes()) {
        console.warn("AG Grid: 'groupSelectsChildren' does not work with 'suppressParentsInRowNodes', this selection method needs the part in rowNode to work");
      }
      if (this.isGroupSelectsChildren()) {
        if (!this.isRowSelectionMulti()) {
          console.warn("AG Grid: rowSelection must be 'multiple' for groupSelectsChildren to make sense");
        }
        if (this.isRowModelServerSide()) {
          console.warn("AG Grid: group selects children is NOT support for Server Side Row Model. This is because the rows are lazy loaded, so selecting a group is not possible asthe grid has no way of knowing what the children are.");
        }
      }
      if (this.isGroupRemoveSingleChildren() && this.isGroupHideOpenParents()) {
        console.warn("AG Grid: groupRemoveSingleChildren and groupHideOpenParents do not work with each other, you need to pick one. And don't ask us how to us these together on our support forum either you will get the same answer!");
      }
      if (this.isRowModelServerSide()) {
        var msg = function(prop) {
          return "AG Grid: '" + prop + "' is not supported on the Server-Side Row Model";
        };
        if (exists(this.gridOptions.groupDefaultExpanded)) {
          console.warn(msg("groupDefaultExpanded"));
        }
        if (exists(this.gridOptions.groupDefaultExpanded)) {
          console.warn(msg("groupIncludeFooter"));
        }
        if (exists(this.gridOptions.groupDefaultExpanded)) {
          console.warn(msg("groupIncludeTotalFooter"));
        }
      }
      if (this.isEnableRangeSelection()) {
        ModuleRegistry.assertRegistered(exports2.ModuleNames.RangeSelectionModule, "enableRangeSelection");
      }
      if (!this.isEnableRangeSelection() && (this.isEnableRangeHandle() || this.isEnableFillHandle())) {
        console.warn("AG Grid: 'enableRangeHandle' and 'enableFillHandle' will not work unless 'enableRangeSelection' is set to true");
      }
      var warnOfDeprecaredIcon = function(name) {
        if (_this.gridOptions.icons && _this.gridOptions.icons[name]) {
          console.warn("gridOptions.icons." + name + " is no longer supported. For information on how to style checkboxes and radio buttons, see https://www.ag-grid.com/javascript-grid-icons/");
        }
      };
      warnOfDeprecaredIcon("radioButtonOff");
      warnOfDeprecaredIcon("radioButtonOn");
      warnOfDeprecaredIcon("checkboxChecked");
      warnOfDeprecaredIcon("checkboxUnchecked");
      warnOfDeprecaredIcon("checkboxIndeterminate");
      this.getScrollbarWidth();
    };
    GridOptionsWrapper2.prototype.checkColumnDefProperties = function() {
      var _this = this;
      if (this.gridOptions.columnDefs == null) {
        return;
      }
      this.gridOptions.columnDefs.forEach(function(colDef) {
        var userProperties = Object.getOwnPropertyNames(colDef);
        var validProperties = __spreadArrays$4(ColDefUtil.ALL_PROPERTIES, ColDefUtil.FRAMEWORK_PROPERTIES);
        _this.checkProperties(userProperties, validProperties, validProperties, "colDef", "https://www.ag-grid.com/javascript-grid-column-properties/");
      });
    };
    GridOptionsWrapper2.prototype.checkGridOptionsProperties = function() {
      var userProperties = Object.getOwnPropertyNames(this.gridOptions);
      var validProperties = __spreadArrays$4(PropertyKeys.ALL_PROPERTIES, PropertyKeys.FRAMEWORK_PROPERTIES, values(Events).map(function(event) {
        return ComponentUtil.getCallbackForEvent(event);
      }));
      var validPropertiesAndExceptions = __spreadArrays$4(validProperties, ["api", "columnApi"]);
      this.checkProperties(userProperties, validPropertiesAndExceptions, validProperties, "gridOptions", "https://www.ag-grid.com/javascript-grid-properties/");
    };
    GridOptionsWrapper2.prototype.checkProperties = function(userProperties, validPropertiesAndExceptions, validProperties, containerName, docsUrl) {
      var invalidProperties = fuzzyCheckStrings(userProperties, validPropertiesAndExceptions, validProperties);
      iterateObject(invalidProperties, function(key, value) {
        console.warn("ag-grid: invalid " + containerName + " property '" + key + "' did you mean any of these: " + value.slice(0, 8).join(", "));
      });
      if (Object.keys(invalidProperties).length > 0) {
        console.warn("ag-grid: to see all the valid " + containerName + " properties please check: " + docsUrl);
      }
    };
    GridOptionsWrapper2.prototype.getDomDataKey = function() {
      return this.domDataKey;
    };
    GridOptionsWrapper2.prototype.getDomData = function(element2, key) {
      var domData = element2[this.getDomDataKey()];
      return domData ? domData[key] : void 0;
    };
    GridOptionsWrapper2.prototype.setDomData = function(element2, key, value) {
      var domDataKey = this.getDomDataKey();
      var domData = element2[domDataKey];
      if (missing(domData)) {
        domData = {};
        element2[domDataKey] = domData;
      }
      domData[key] = value;
    };
    GridOptionsWrapper2.prototype.isRowSelection = function() {
      return this.gridOptions.rowSelection === "single" || this.gridOptions.rowSelection === "multiple";
    };
    GridOptionsWrapper2.prototype.isSuppressRowDeselection = function() {
      return isTrue(this.gridOptions.suppressRowDeselection);
    };
    GridOptionsWrapper2.prototype.isRowSelectionMulti = function() {
      return this.gridOptions.rowSelection === "multiple";
    };
    GridOptionsWrapper2.prototype.isRowMultiSelectWithClick = function() {
      return isTrue(this.gridOptions.rowMultiSelectWithClick);
    };
    GridOptionsWrapper2.prototype.getContext = function() {
      return this.gridOptions.context;
    };
    GridOptionsWrapper2.prototype.isPivotMode = function() {
      return isTrue(this.gridOptions.pivotMode);
    };
    GridOptionsWrapper2.prototype.isSuppressExpandablePivotGroups = function() {
      return isTrue(this.gridOptions.suppressExpandablePivotGroups);
    };
    GridOptionsWrapper2.prototype.getPivotColumnGroupTotals = function() {
      return this.gridOptions.pivotColumnGroupTotals;
    };
    GridOptionsWrapper2.prototype.getPivotRowTotals = function() {
      return this.gridOptions.pivotRowTotals;
    };
    GridOptionsWrapper2.prototype.isRowModelInfinite = function() {
      return this.gridOptions.rowModelType === Constants.ROW_MODEL_TYPE_INFINITE;
    };
    GridOptionsWrapper2.prototype.isRowModelViewport = function() {
      return this.gridOptions.rowModelType === Constants.ROW_MODEL_TYPE_VIEWPORT;
    };
    GridOptionsWrapper2.prototype.isRowModelServerSide = function() {
      return this.gridOptions.rowModelType === Constants.ROW_MODEL_TYPE_SERVER_SIDE;
    };
    GridOptionsWrapper2.prototype.isRowModelDefault = function() {
      return missing(this.gridOptions.rowModelType) || this.gridOptions.rowModelType === Constants.ROW_MODEL_TYPE_CLIENT_SIDE;
    };
    GridOptionsWrapper2.prototype.isFullRowEdit = function() {
      return this.gridOptions.editType === "fullRow";
    };
    GridOptionsWrapper2.prototype.isSuppressFocusAfterRefresh = function() {
      return isTrue(this.gridOptions.suppressFocusAfterRefresh);
    };
    GridOptionsWrapper2.prototype.isSuppressBrowserResizeObserver = function() {
      return isTrue(this.gridOptions.suppressBrowserResizeObserver);
    };
    GridOptionsWrapper2.prototype.isSuppressMaintainUnsortedOrder = function() {
      return isTrue(this.gridOptions.suppressMaintainUnsortedOrder);
    };
    GridOptionsWrapper2.prototype.isSuppressClearOnFillReduction = function() {
      return isTrue(this.gridOptions.suppressClearOnFillReduction);
    };
    GridOptionsWrapper2.prototype.isShowToolPanel = function() {
      return isTrue(this.gridOptions.sideBar && Array.isArray(this.getSideBar().toolPanels));
    };
    GridOptionsWrapper2.prototype.getSideBar = function() {
      return this.gridOptions.sideBar;
    };
    GridOptionsWrapper2.prototype.isSuppressTouch = function() {
      return isTrue(this.gridOptions.suppressTouch);
    };
    GridOptionsWrapper2.prototype.isMaintainColumnOrder = function() {
      return isTrue(this.gridOptions.maintainColumnOrder);
    };
    GridOptionsWrapper2.prototype.isSuppressRowTransform = function() {
      return isTrue(this.gridOptions.suppressRowTransform);
    };
    GridOptionsWrapper2.prototype.isSuppressColumnStateEvents = function() {
      return isTrue(this.gridOptions.suppressColumnStateEvents);
    };
    GridOptionsWrapper2.prototype.isAllowDragFromColumnsToolPanel = function() {
      return isTrue(this.gridOptions.allowDragFromColumnsToolPanel);
    };
    GridOptionsWrapper2.prototype.useAsyncEvents = function() {
      return !isTrue(this.gridOptions.suppressAsyncEvents);
    };
    GridOptionsWrapper2.prototype.isEnableCellChangeFlash = function() {
      return isTrue(this.gridOptions.enableCellChangeFlash);
    };
    GridOptionsWrapper2.prototype.getCellFlashDelay = function() {
      return this.gridOptions.cellFlashDelay || 500;
    };
    GridOptionsWrapper2.prototype.getCellFadeDelay = function() {
      return this.gridOptions.cellFadeDelay || 1e3;
    };
    GridOptionsWrapper2.prototype.isGroupSelectsChildren = function() {
      var result = isTrue(this.gridOptions.groupSelectsChildren);
      if (result && this.isTreeData()) {
        console.warn("AG Grid: groupSelectsChildren does not work with tree data");
        return false;
      }
      return result;
    };
    GridOptionsWrapper2.prototype.isSuppressRowHoverHighlight = function() {
      return isTrue(this.gridOptions.suppressRowHoverHighlight);
    };
    GridOptionsWrapper2.prototype.isColumnHoverHighlight = function() {
      return isTrue(this.gridOptions.columnHoverHighlight);
    };
    GridOptionsWrapper2.prototype.isGroupSelectsFiltered = function() {
      return isTrue(this.gridOptions.groupSelectsFiltered);
    };
    GridOptionsWrapper2.prototype.isGroupHideOpenParents = function() {
      return isTrue(this.gridOptions.groupHideOpenParents);
    };
    GridOptionsWrapper2.prototype.isGroupMaintainOrder = function() {
      return isTrue(this.gridOptions.groupMaintainOrder);
    };
    GridOptionsWrapper2.prototype.getAutoGroupColumnDef = function() {
      return this.gridOptions.autoGroupColumnDef;
    };
    GridOptionsWrapper2.prototype.isGroupMultiAutoColumn = function() {
      if (this.gridOptions.groupDisplayType) {
        return this.matchesGroupDisplayType("multipleColumns", this.gridOptions.groupDisplayType);
      }
      return isTrue(this.gridOptions.groupHideOpenParents);
    };
    GridOptionsWrapper2.prototype.isGroupUseEntireRow = function(pivotMode) {
      if (pivotMode) {
        return false;
      }
      return this.gridOptions.groupDisplayType ? this.matchesGroupDisplayType("groupRows", this.gridOptions.groupDisplayType) : false;
    };
    GridOptionsWrapper2.prototype.isGroupSuppressAutoColumn = function() {
      var isCustomRowGroups = this.gridOptions.groupDisplayType ? this.matchesGroupDisplayType("custom", this.gridOptions.groupDisplayType) : false;
      if (isCustomRowGroups) {
        return true;
      }
      return this.gridOptions.treeDataDisplayType ? this.matchesTreeDataDisplayType("custom", this.gridOptions.treeDataDisplayType) : false;
    };
    GridOptionsWrapper2.prototype.isGroupRemoveSingleChildren = function() {
      return isTrue(this.gridOptions.groupRemoveSingleChildren);
    };
    GridOptionsWrapper2.prototype.isGroupRemoveLowestSingleChildren = function() {
      return isTrue(this.gridOptions.groupRemoveLowestSingleChildren);
    };
    GridOptionsWrapper2.prototype.isGroupIncludeFooter = function() {
      return isTrue(this.gridOptions.groupIncludeFooter);
    };
    GridOptionsWrapper2.prototype.isGroupIncludeTotalFooter = function() {
      return isTrue(this.gridOptions.groupIncludeTotalFooter);
    };
    GridOptionsWrapper2.prototype.isGroupSuppressBlankHeader = function() {
      return isTrue(this.gridOptions.groupSuppressBlankHeader);
    };
    GridOptionsWrapper2.prototype.isSuppressRowClickSelection = function() {
      return isTrue(this.gridOptions.suppressRowClickSelection);
    };
    GridOptionsWrapper2.prototype.isSuppressCellSelection = function() {
      return isTrue(this.gridOptions.suppressCellSelection);
    };
    GridOptionsWrapper2.prototype.isSuppressMultiSort = function() {
      return isTrue(this.gridOptions.suppressMultiSort);
    };
    GridOptionsWrapper2.prototype.isMultiSortKeyCtrl = function() {
      return this.gridOptions.multiSortKey === "ctrl";
    };
    GridOptionsWrapper2.prototype.isPivotSuppressAutoColumn = function() {
      return isTrue(this.gridOptions.pivotSuppressAutoColumn);
    };
    GridOptionsWrapper2.prototype.isSuppressDragLeaveHidesColumns = function() {
      return isTrue(this.gridOptions.suppressDragLeaveHidesColumns);
    };
    GridOptionsWrapper2.prototype.isSuppressScrollOnNewData = function() {
      return isTrue(this.gridOptions.suppressScrollOnNewData);
    };
    GridOptionsWrapper2.prototype.isSuppressScrollWhenPopupsAreOpen = function() {
      return isTrue(this.gridOptions.suppressScrollWhenPopupsAreOpen);
    };
    GridOptionsWrapper2.prototype.isRowDragEntireRow = function() {
      return isTrue(this.gridOptions.rowDragEntireRow);
    };
    GridOptionsWrapper2.prototype.isSuppressRowDrag = function() {
      return isTrue(this.gridOptions.suppressRowDrag);
    };
    GridOptionsWrapper2.prototype.isRowDragManaged = function() {
      return isTrue(this.gridOptions.rowDragManaged);
    };
    GridOptionsWrapper2.prototype.isSuppressMoveWhenRowDragging = function() {
      return isTrue(this.gridOptions.suppressMoveWhenRowDragging);
    };
    GridOptionsWrapper2.prototype.isRowDragMultiRow = function() {
      return isTrue(this.gridOptions.rowDragMultiRow);
    };
    GridOptionsWrapper2.prototype.getDomLayout = function() {
      var domLayout = this.gridOptions.domLayout || Constants.DOM_LAYOUT_NORMAL;
      var validLayouts = [
        Constants.DOM_LAYOUT_PRINT,
        Constants.DOM_LAYOUT_AUTO_HEIGHT,
        Constants.DOM_LAYOUT_NORMAL
      ];
      if (validLayouts.indexOf(domLayout) === -1) {
        doOnce(function() {
          return console.warn("AG Grid: " + domLayout + " is not valid for DOM Layout, valid values are " + Constants.DOM_LAYOUT_NORMAL + ", " + Constants.DOM_LAYOUT_AUTO_HEIGHT + " and " + Constants.DOM_LAYOUT_PRINT);
        }, "warn about dom layout values");
        return Constants.DOM_LAYOUT_NORMAL;
      }
      return domLayout;
    };
    GridOptionsWrapper2.prototype.isSuppressHorizontalScroll = function() {
      return isTrue(this.gridOptions.suppressHorizontalScroll);
    };
    GridOptionsWrapper2.prototype.isSuppressMaxRenderedRowRestriction = function() {
      return isTrue(this.gridOptions.suppressMaxRenderedRowRestriction);
    };
    GridOptionsWrapper2.prototype.isExcludeChildrenWhenTreeDataFiltering = function() {
      return isTrue(this.gridOptions.excludeChildrenWhenTreeDataFiltering);
    };
    GridOptionsWrapper2.prototype.isAlwaysShowHorizontalScroll = function() {
      return isTrue(this.gridOptions.alwaysShowHorizontalScroll);
    };
    GridOptionsWrapper2.prototype.isAlwaysShowVerticalScroll = function() {
      return isTrue(this.gridOptions.alwaysShowVerticalScroll);
    };
    GridOptionsWrapper2.prototype.isDebounceVerticalScrollbar = function() {
      return isTrue(this.gridOptions.debounceVerticalScrollbar);
    };
    GridOptionsWrapper2.prototype.isSuppressLoadingOverlay = function() {
      return isTrue(this.gridOptions.suppressLoadingOverlay);
    };
    GridOptionsWrapper2.prototype.isSuppressNoRowsOverlay = function() {
      return isTrue(this.gridOptions.suppressNoRowsOverlay);
    };
    GridOptionsWrapper2.prototype.isSuppressFieldDotNotation = function() {
      return isTrue(this.gridOptions.suppressFieldDotNotation);
    };
    GridOptionsWrapper2.prototype.getPinnedTopRowData = function() {
      return this.gridOptions.pinnedTopRowData;
    };
    GridOptionsWrapper2.prototype.getPinnedBottomRowData = function() {
      return this.gridOptions.pinnedBottomRowData;
    };
    GridOptionsWrapper2.prototype.isFunctionsPassive = function() {
      return isTrue(this.gridOptions.functionsPassive);
    };
    GridOptionsWrapper2.prototype.isSuppressChangeDetection = function() {
      return isTrue(this.gridOptions.suppressChangeDetection);
    };
    GridOptionsWrapper2.prototype.isSuppressAnimationFrame = function() {
      return isTrue(this.gridOptions.suppressAnimationFrame);
    };
    GridOptionsWrapper2.prototype.getQuickFilterText = function() {
      return this.gridOptions.quickFilterText;
    };
    GridOptionsWrapper2.prototype.isCacheQuickFilter = function() {
      return isTrue(this.gridOptions.cacheQuickFilter);
    };
    GridOptionsWrapper2.prototype.isUnSortIcon = function() {
      return isTrue(this.gridOptions.unSortIcon);
    };
    GridOptionsWrapper2.prototype.isSuppressMenuHide = function() {
      return isTrue(this.gridOptions.suppressMenuHide);
    };
    GridOptionsWrapper2.prototype.isEnterMovesDownAfterEdit = function() {
      return isTrue(this.gridOptions.enterMovesDownAfterEdit);
    };
    GridOptionsWrapper2.prototype.isEnterMovesDown = function() {
      return isTrue(this.gridOptions.enterMovesDown);
    };
    GridOptionsWrapper2.prototype.isUndoRedoCellEditing = function() {
      return isTrue(this.gridOptions.undoRedoCellEditing);
    };
    GridOptionsWrapper2.prototype.getUndoRedoCellEditingLimit = function() {
      return toNumber(this.gridOptions.undoRedoCellEditingLimit);
    };
    GridOptionsWrapper2.prototype.getRowStyle = function() {
      return this.gridOptions.rowStyle;
    };
    GridOptionsWrapper2.prototype.getRowClass = function() {
      return this.gridOptions.rowClass;
    };
    GridOptionsWrapper2.prototype.getRowStyleFunc = function() {
      return this.gridOptions.getRowStyle;
    };
    GridOptionsWrapper2.prototype.getRowClassFunc = function() {
      return this.gridOptions.getRowClass;
    };
    GridOptionsWrapper2.prototype.rowClassRules = function() {
      return this.gridOptions.rowClassRules;
    };
    GridOptionsWrapper2.prototype.getServerSideStoreType = function() {
      return this.gridOptions.serverSideStoreType;
    };
    GridOptionsWrapper2.prototype.getServerSideStoreParamsFunc = function() {
      return this.gridOptions.getServerSideStoreParams;
    };
    GridOptionsWrapper2.prototype.getCreateChartContainerFunc = function() {
      return this.gridOptions.createChartContainer;
    };
    GridOptionsWrapper2.prototype.getPopupParent = function() {
      return this.gridOptions.popupParent;
    };
    GridOptionsWrapper2.prototype.getBlockLoadDebounceMillis = function() {
      return this.gridOptions.blockLoadDebounceMillis;
    };
    GridOptionsWrapper2.prototype.getPostProcessPopupFunc = function() {
      return this.gridOptions.postProcessPopup;
    };
    GridOptionsWrapper2.prototype.getPaginationNumberFormatterFunc = function() {
      return this.gridOptions.paginationNumberFormatter;
    };
    GridOptionsWrapper2.prototype.getChildCountFunc = function() {
      return this.gridOptions.getChildCount;
    };
    GridOptionsWrapper2.prototype.getIsApplyServerSideTransactionFunc = function() {
      return this.gridOptions.isApplyServerSideTransaction;
    };
    GridOptionsWrapper2.prototype.getDefaultGroupOrderComparator = function() {
      return this.gridOptions.defaultGroupOrderComparator;
    };
    GridOptionsWrapper2.prototype.getIsFullWidthCellFunc = function() {
      return this.gridOptions.isFullWidthCell;
    };
    GridOptionsWrapper2.prototype.getFullWidthCellRendererParams = function() {
      return this.gridOptions.fullWidthCellRendererParams;
    };
    GridOptionsWrapper2.prototype.isEmbedFullWidthRows = function() {
      return isTrue(this.gridOptions.embedFullWidthRows) || isTrue(this.gridOptions.deprecatedEmbedFullWidthRows);
    };
    GridOptionsWrapper2.prototype.isDetailRowAutoHeight = function() {
      return isTrue(this.gridOptions.detailRowAutoHeight);
    };
    GridOptionsWrapper2.prototype.getSuppressKeyboardEventFunc = function() {
      return this.gridOptions.suppressKeyboardEvent;
    };
    GridOptionsWrapper2.prototype.getBusinessKeyForNodeFunc = function() {
      return this.gridOptions.getBusinessKeyForNode;
    };
    GridOptionsWrapper2.prototype.getApi = function() {
      return this.gridOptions.api;
    };
    GridOptionsWrapper2.prototype.getColumnApi = function() {
      return this.gridOptions.columnApi;
    };
    GridOptionsWrapper2.prototype.isImmutableData = function() {
      return isTrue(this.gridOptions.immutableData);
    };
    GridOptionsWrapper2.prototype.isEnsureDomOrder = function() {
      return isTrue(this.gridOptions.ensureDomOrder);
    };
    GridOptionsWrapper2.prototype.isEnableCharts = function() {
      if (isTrue(this.gridOptions.enableCharts)) {
        return ModuleRegistry.assertRegistered(exports2.ModuleNames.GridChartsModule, "enableCharts");
      }
      return false;
    };
    GridOptionsWrapper2.prototype.getColResizeDefault = function() {
      return this.gridOptions.colResizeDefault;
    };
    GridOptionsWrapper2.prototype.isSingleClickEdit = function() {
      return isTrue(this.gridOptions.singleClickEdit);
    };
    GridOptionsWrapper2.prototype.isSuppressClickEdit = function() {
      return isTrue(this.gridOptions.suppressClickEdit);
    };
    GridOptionsWrapper2.prototype.isStopEditingWhenCellsLoseFocus = function() {
      return isTrue(this.gridOptions.stopEditingWhenCellsLoseFocus);
    };
    GridOptionsWrapper2.prototype.getGroupDefaultExpanded = function() {
      return this.gridOptions.groupDefaultExpanded;
    };
    GridOptionsWrapper2.prototype.getMaxConcurrentDatasourceRequests = function() {
      return this.gridOptions.maxConcurrentDatasourceRequests;
    };
    GridOptionsWrapper2.prototype.getMaxBlocksInCache = function() {
      return this.gridOptions.maxBlocksInCache;
    };
    GridOptionsWrapper2.prototype.getCacheOverflowSize = function() {
      return this.gridOptions.cacheOverflowSize;
    };
    GridOptionsWrapper2.prototype.getPaginationPageSize = function() {
      return toNumber(this.gridOptions.paginationPageSize);
    };
    GridOptionsWrapper2.prototype.isPaginateChildRows = function() {
      var shouldPaginate = this.isGroupRemoveSingleChildren() || this.isGroupRemoveLowestSingleChildren();
      if (shouldPaginate) {
        return true;
      }
      return isTrue(this.gridOptions.paginateChildRows);
    };
    GridOptionsWrapper2.prototype.getCacheBlockSize = function() {
      return oneOrGreater(this.gridOptions.cacheBlockSize);
    };
    GridOptionsWrapper2.prototype.getInfiniteInitialRowCount = function() {
      return this.gridOptions.infiniteInitialRowCount;
    };
    GridOptionsWrapper2.prototype.isPurgeClosedRowNodes = function() {
      return isTrue(this.gridOptions.purgeClosedRowNodes);
    };
    GridOptionsWrapper2.prototype.isSuppressPaginationPanel = function() {
      return isTrue(this.gridOptions.suppressPaginationPanel);
    };
    GridOptionsWrapper2.prototype.getRowData = function() {
      return this.gridOptions.rowData;
    };
    GridOptionsWrapper2.prototype.isEnableRtl = function() {
      return isTrue(this.gridOptions.enableRtl);
    };
    GridOptionsWrapper2.prototype.getRowGroupPanelShow = function() {
      return this.gridOptions.rowGroupPanelShow;
    };
    GridOptionsWrapper2.prototype.getPivotPanelShow = function() {
      return this.gridOptions.pivotPanelShow;
    };
    GridOptionsWrapper2.prototype.isAngularCompileRows = function() {
      return isTrue(this.gridOptions.angularCompileRows);
    };
    GridOptionsWrapper2.prototype.isAngularCompileFilters = function() {
      return isTrue(this.gridOptions.angularCompileFilters);
    };
    GridOptionsWrapper2.prototype.isDebug = function() {
      return isTrue(this.gridOptions.debug);
    };
    GridOptionsWrapper2.prototype.getColumnDefs = function() {
      return this.gridOptions.columnDefs;
    };
    GridOptionsWrapper2.prototype.getColumnTypes = function() {
      return this.gridOptions.columnTypes;
    };
    GridOptionsWrapper2.prototype.getDatasource = function() {
      return this.gridOptions.datasource;
    };
    GridOptionsWrapper2.prototype.getViewportDatasource = function() {
      return this.gridOptions.viewportDatasource;
    };
    GridOptionsWrapper2.prototype.getServerSideDatasource = function() {
      return this.gridOptions.serverSideDatasource;
    };
    GridOptionsWrapper2.prototype.isAccentedSort = function() {
      return isTrue(this.gridOptions.accentedSort);
    };
    GridOptionsWrapper2.prototype.isEnableBrowserTooltips = function() {
      return isTrue(this.gridOptions.enableBrowserTooltips);
    };
    GridOptionsWrapper2.prototype.isEnableCellExpressions = function() {
      return isTrue(this.gridOptions.enableCellExpressions);
    };
    GridOptionsWrapper2.prototype.isEnableGroupEdit = function() {
      return isTrue(this.gridOptions.enableGroupEdit);
    };
    GridOptionsWrapper2.prototype.isSuppressMiddleClickScrolls = function() {
      return isTrue(this.gridOptions.suppressMiddleClickScrolls);
    };
    GridOptionsWrapper2.prototype.isPreventDefaultOnContextMenu = function() {
      return isTrue(this.gridOptions.preventDefaultOnContextMenu);
    };
    GridOptionsWrapper2.prototype.isSuppressPreventDefaultOnMouseWheel = function() {
      return isTrue(this.gridOptions.suppressPreventDefaultOnMouseWheel);
    };
    GridOptionsWrapper2.prototype.isSuppressColumnVirtualisation = function() {
      return isTrue(this.gridOptions.suppressColumnVirtualisation);
    };
    GridOptionsWrapper2.prototype.isSuppressContextMenu = function() {
      return isTrue(this.gridOptions.suppressContextMenu);
    };
    GridOptionsWrapper2.prototype.isAllowContextMenuWithControlKey = function() {
      return isTrue(this.gridOptions.allowContextMenuWithControlKey);
    };
    GridOptionsWrapper2.prototype.isSuppressCopyRowsToClipboard = function() {
      return isTrue(this.gridOptions.suppressCopyRowsToClipboard);
    };
    GridOptionsWrapper2.prototype.isCopyHeadersToClipboard = function() {
      return isTrue(this.gridOptions.copyHeadersToClipboard);
    };
    GridOptionsWrapper2.prototype.isSuppressClipboardPaste = function() {
      return isTrue(this.gridOptions.suppressClipboardPaste);
    };
    GridOptionsWrapper2.prototype.isSuppressLastEmptyLineOnPaste = function() {
      return isTrue(this.gridOptions.suppressLastEmptyLineOnPaste);
    };
    GridOptionsWrapper2.prototype.isPagination = function() {
      return isTrue(this.gridOptions.pagination);
    };
    GridOptionsWrapper2.prototype.isSuppressEnterpriseResetOnNewColumns = function() {
      return isTrue(this.gridOptions.suppressEnterpriseResetOnNewColumns);
    };
    GridOptionsWrapper2.prototype.getProcessDataFromClipboardFunc = function() {
      return this.gridOptions.processDataFromClipboard;
    };
    GridOptionsWrapper2.prototype.getAsyncTransactionWaitMillis = function() {
      return exists(this.gridOptions.asyncTransactionWaitMillis) ? this.gridOptions.asyncTransactionWaitMillis : Constants.BATCH_WAIT_MILLIS;
    };
    GridOptionsWrapper2.prototype.isSuppressMovableColumns = function() {
      return isTrue(this.gridOptions.suppressMovableColumns);
    };
    GridOptionsWrapper2.prototype.isAnimateRows = function() {
      if (this.isEnsureDomOrder()) {
        return false;
      }
      return isTrue(this.gridOptions.animateRows);
    };
    GridOptionsWrapper2.prototype.isSuppressColumnMoveAnimation = function() {
      return isTrue(this.gridOptions.suppressColumnMoveAnimation);
    };
    GridOptionsWrapper2.prototype.isSuppressAggFuncInHeader = function() {
      return isTrue(this.gridOptions.suppressAggFuncInHeader);
    };
    GridOptionsWrapper2.prototype.isSuppressAggAtRootLevel = function() {
      return isTrue(this.gridOptions.suppressAggAtRootLevel);
    };
    GridOptionsWrapper2.prototype.isSuppressAggFilteredOnly = function() {
      return isTrue(this.gridOptions.suppressAggFilteredOnly);
    };
    GridOptionsWrapper2.prototype.isShowOpenedGroup = function() {
      return isTrue(this.gridOptions.showOpenedGroup);
    };
    GridOptionsWrapper2.prototype.isEnableRangeSelection = function() {
      return ModuleRegistry.isRegistered(exports2.ModuleNames.RangeSelectionModule) && isTrue(this.gridOptions.enableRangeSelection);
    };
    GridOptionsWrapper2.prototype.isEnableRangeHandle = function() {
      return isTrue(this.gridOptions.enableRangeHandle);
    };
    GridOptionsWrapper2.prototype.isEnableFillHandle = function() {
      return isTrue(this.gridOptions.enableFillHandle);
    };
    GridOptionsWrapper2.prototype.getFillHandleDirection = function() {
      var direction = this.gridOptions.fillHandleDirection;
      if (!direction) {
        return "xy";
      }
      if (direction !== "x" && direction !== "y" && direction !== "xy") {
        doOnce(function() {
          return console.warn("AG Grid: valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'.");
        }, "warn invalid fill direction");
        return "xy";
      }
      return direction;
    };
    GridOptionsWrapper2.prototype.getFillOperation = function() {
      return this.gridOptions.fillOperation;
    };
    GridOptionsWrapper2.prototype.isSuppressMultiRangeSelection = function() {
      return isTrue(this.gridOptions.suppressMultiRangeSelection);
    };
    GridOptionsWrapper2.prototype.isPaginationAutoPageSize = function() {
      return isTrue(this.gridOptions.paginationAutoPageSize);
    };
    GridOptionsWrapper2.prototype.isRememberGroupStateWhenNewData = function() {
      return isTrue(this.gridOptions.rememberGroupStateWhenNewData);
    };
    GridOptionsWrapper2.prototype.getIcons = function() {
      return this.gridOptions.icons;
    };
    GridOptionsWrapper2.prototype.getAggFuncs = function() {
      return this.gridOptions.aggFuncs;
    };
    GridOptionsWrapper2.prototype.getSortingOrder = function() {
      return this.gridOptions.sortingOrder;
    };
    GridOptionsWrapper2.prototype.getAlignedGrids = function() {
      return this.gridOptions.alignedGrids;
    };
    GridOptionsWrapper2.prototype.isMasterDetail = function() {
      var masterDetail = isTrue(this.gridOptions.masterDetail);
      if (masterDetail) {
        return ModuleRegistry.assertRegistered(exports2.ModuleNames.MasterDetailModule, "masterDetail");
      } else {
        return false;
      }
    };
    GridOptionsWrapper2.prototype.isKeepDetailRows = function() {
      return isTrue(this.gridOptions.keepDetailRows);
    };
    GridOptionsWrapper2.prototype.getKeepDetailRowsCount = function() {
      var keepDetailRowsCount = this.gridOptions.keepDetailRowsCount;
      if (exists(keepDetailRowsCount) && keepDetailRowsCount > 0) {
        return this.gridOptions.keepDetailRowsCount;
      }
      return DEFAULT_KEEP_DETAIL_ROW_COUNT;
    };
    GridOptionsWrapper2.prototype.getIsRowMasterFunc = function() {
      return this.gridOptions.isRowMaster;
    };
    GridOptionsWrapper2.prototype.getIsRowSelectableFunc = function() {
      return this.gridOptions.isRowSelectable;
    };
    GridOptionsWrapper2.prototype.getGroupRowRendererParams = function() {
      return this.gridOptions.groupRowRendererParams;
    };
    GridOptionsWrapper2.prototype.getOverlayLoadingTemplate = function() {
      return this.gridOptions.overlayLoadingTemplate;
    };
    GridOptionsWrapper2.prototype.getOverlayNoRowsTemplate = function() {
      return this.gridOptions.overlayNoRowsTemplate;
    };
    GridOptionsWrapper2.prototype.isSuppressAutoSize = function() {
      return isTrue(this.gridOptions.suppressAutoSize);
    };
    GridOptionsWrapper2.prototype.isEnableCellTextSelection = function() {
      return isTrue(this.gridOptions.enableCellTextSelection);
    };
    GridOptionsWrapper2.prototype.isSuppressParentsInRowNodes = function() {
      return isTrue(this.gridOptions.suppressParentsInRowNodes);
    };
    GridOptionsWrapper2.prototype.isSuppressClipboardApi = function() {
      return isTrue(this.gridOptions.suppressClipboardApi);
    };
    GridOptionsWrapper2.prototype.isFunctionsReadOnly = function() {
      return isTrue(this.gridOptions.functionsReadOnly);
    };
    GridOptionsWrapper2.prototype.isFloatingFilter = function() {
      return this.gridOptions.floatingFilter;
    };
    GridOptionsWrapper2.prototype.isEnableCellTextSelect = function() {
      return isTrue(this.gridOptions.enableCellTextSelection);
    };
    GridOptionsWrapper2.prototype.isEnableOldSetFilterModel = function() {
      return isTrue(this.gridOptions.enableOldSetFilterModel);
    };
    GridOptionsWrapper2.prototype.getDefaultColDef = function() {
      return this.gridOptions.defaultColDef;
    };
    GridOptionsWrapper2.prototype.getDefaultColGroupDef = function() {
      return this.gridOptions.defaultColGroupDef;
    };
    GridOptionsWrapper2.prototype.getDefaultExportParams = function(type) {
      if (this.gridOptions.defaultExportParams) {
        console.warn("AG Grid: Since v25.2 `defaultExportParams`  has been replaced by `default" + capitalise(type) + "ExportParams`'");
        if (type === "csv") {
          return this.gridOptions.defaultExportParams;
        }
        return this.gridOptions.defaultExportParams;
      }
      if (type === "csv" && this.gridOptions.defaultCsvExportParams) {
        return this.gridOptions.defaultCsvExportParams;
      }
      if (type === "excel" && this.gridOptions.defaultExcelExportParams) {
        return this.gridOptions.defaultExcelExportParams;
      }
    };
    GridOptionsWrapper2.prototype.isSuppressCsvExport = function() {
      return isTrue(this.gridOptions.suppressCsvExport);
    };
    GridOptionsWrapper2.prototype.isAllowShowChangeAfterFilter = function() {
      return isTrue(this.gridOptions.allowShowChangeAfterFilter);
    };
    GridOptionsWrapper2.prototype.isSuppressExcelExport = function() {
      return isTrue(this.gridOptions.suppressExcelExport);
    };
    GridOptionsWrapper2.prototype.isSuppressMakeColumnVisibleAfterUnGroup = function() {
      return isTrue(this.gridOptions.suppressMakeColumnVisibleAfterUnGroup);
    };
    GridOptionsWrapper2.prototype.getDataPathFunc = function() {
      return this.gridOptions.getDataPath;
    };
    GridOptionsWrapper2.prototype.getIsServerSideGroupFunc = function() {
      return this.gridOptions.isServerSideGroup;
    };
    GridOptionsWrapper2.prototype.getIsServerSideGroupOpenByDefaultFunc = function() {
      return this.gridOptions.isServerSideGroupOpenByDefault;
    };
    GridOptionsWrapper2.prototype.getIsGroupOpenByDefaultFunc = function() {
      return this.gridOptions.isGroupOpenByDefault;
    };
    GridOptionsWrapper2.prototype.getServerSideGroupKeyFunc = function() {
      return this.gridOptions.getServerSideGroupKey;
    };
    GridOptionsWrapper2.prototype.getGroupRowAggNodesFunc = function() {
      return this.gridOptions.groupRowAggNodes;
    };
    GridOptionsWrapper2.prototype.getContextMenuItemsFunc = function() {
      return this.gridOptions.getContextMenuItems;
    };
    GridOptionsWrapper2.prototype.getMainMenuItemsFunc = function() {
      return this.gridOptions.getMainMenuItems;
    };
    GridOptionsWrapper2.prototype.getRowNodeIdFunc = function() {
      return this.gridOptions.getRowNodeId;
    };
    GridOptionsWrapper2.prototype.getNavigateToNextHeaderFunc = function() {
      return this.gridOptions.navigateToNextHeader;
    };
    GridOptionsWrapper2.prototype.getTabToNextHeaderFunc = function() {
      return this.gridOptions.tabToNextHeader;
    };
    GridOptionsWrapper2.prototype.getNavigateToNextCellFunc = function() {
      return this.gridOptions.navigateToNextCell;
    };
    GridOptionsWrapper2.prototype.getTabToNextCellFunc = function() {
      return this.gridOptions.tabToNextCell;
    };
    GridOptionsWrapper2.prototype.getGridTabIndex = function() {
      return (this.gridOptions.tabIndex || 0).toString();
    };
    GridOptionsWrapper2.prototype.isTreeData = function() {
      var usingTreeData = isTrue(this.gridOptions.treeData);
      if (usingTreeData) {
        return ModuleRegistry.assertRegistered(exports2.ModuleNames.RowGroupingModule, "Tree Data");
      }
      return false;
    };
    GridOptionsWrapper2.prototype.isValueCache = function() {
      return isTrue(this.gridOptions.valueCache);
    };
    GridOptionsWrapper2.prototype.isValueCacheNeverExpires = function() {
      return isTrue(this.gridOptions.valueCacheNeverExpires);
    };
    GridOptionsWrapper2.prototype.isDeltaSort = function() {
      return isTrue(this.gridOptions.deltaSort);
    };
    GridOptionsWrapper2.prototype.isAggregateOnlyChangedColumns = function() {
      return isTrue(this.gridOptions.aggregateOnlyChangedColumns);
    };
    GridOptionsWrapper2.prototype.getProcessSecondaryColDefFunc = function() {
      return this.gridOptions.processSecondaryColDef;
    };
    GridOptionsWrapper2.prototype.getProcessSecondaryColGroupDefFunc = function() {
      return this.gridOptions.processSecondaryColGroupDef;
    };
    GridOptionsWrapper2.prototype.getSendToClipboardFunc = function() {
      return this.gridOptions.sendToClipboard;
    };
    GridOptionsWrapper2.prototype.getProcessRowPostCreateFunc = function() {
      return this.gridOptions.processRowPostCreate;
    };
    GridOptionsWrapper2.prototype.getProcessCellForClipboardFunc = function() {
      return this.gridOptions.processCellForClipboard;
    };
    GridOptionsWrapper2.prototype.getProcessHeaderForClipboardFunc = function() {
      return this.gridOptions.processHeaderForClipboard;
    };
    GridOptionsWrapper2.prototype.getProcessCellFromClipboardFunc = function() {
      return this.gridOptions.processCellFromClipboard;
    };
    GridOptionsWrapper2.prototype.getViewportRowModelPageSize = function() {
      return oneOrGreater(this.gridOptions.viewportRowModelPageSize, DEFAULT_VIEWPORT_ROW_MODEL_PAGE_SIZE);
    };
    GridOptionsWrapper2.prototype.getViewportRowModelBufferSize = function() {
      return zeroOrGreater(this.gridOptions.viewportRowModelBufferSize, DEFAULT_VIEWPORT_ROW_MODEL_BUFFER_SIZE);
    };
    GridOptionsWrapper2.prototype.isServerSideSortingAlwaysResets = function() {
      return isTrue(this.gridOptions.serverSideSortingAlwaysResets);
    };
    GridOptionsWrapper2.prototype.isServerSideFilteringAlwaysResets = function() {
      return isTrue(this.gridOptions.serverSideFilteringAlwaysResets);
    };
    GridOptionsWrapper2.prototype.getPostSortFunc = function() {
      return this.gridOptions.postSort;
    };
    GridOptionsWrapper2.prototype.getChartToolbarItemsFunc = function() {
      return this.gridOptions.getChartToolbarItems;
    };
    GridOptionsWrapper2.prototype.getChartThemeOverrides = function() {
      return this.gridOptions.chartThemeOverrides;
    };
    GridOptionsWrapper2.prototype.getCustomChartThemes = function() {
      return this.gridOptions.customChartThemes;
    };
    GridOptionsWrapper2.prototype.getChartThemes = function() {
      return this.gridOptions.chartThemes || ["ag-default", "ag-material", "ag-pastel", "ag-vivid", "ag-solar"];
    };
    GridOptionsWrapper2.prototype.getAllowProcessChartOptions = function() {
      return this.gridOptions.allowProcessChartOptions;
    };
    GridOptionsWrapper2.prototype.getProcessChartOptionsFunc = function() {
      return this.gridOptions.processChartOptions;
    };
    GridOptionsWrapper2.prototype.getClipboardDeliminator = function() {
      return exists(this.gridOptions.clipboardDeliminator) ? this.gridOptions.clipboardDeliminator : "	";
    };
    GridOptionsWrapper2.prototype.setProperty = function(key, value, force) {
      if (force === void 0) {
        force = false;
      }
      var gridOptionsNoType = this.gridOptions;
      var previousValue = gridOptionsNoType[key];
      if (force || previousValue !== value) {
        gridOptionsNoType[key] = value;
        var event_1 = {
          type: key,
          currentValue: value,
          previousValue
        };
        this.propertyEventService.dispatchEvent(event_1);
      }
    };
    GridOptionsWrapper2.prototype.addEventListener = function(key, listener) {
      this.propertyEventService.addEventListener(key, listener);
    };
    GridOptionsWrapper2.prototype.removeEventListener = function(key, listener) {
      this.propertyEventService.removeEventListener(key, listener);
    };
    GridOptionsWrapper2.prototype.isSkipHeaderOnAutoSize = function() {
      return !!this.gridOptions.skipHeaderOnAutoSize;
    };
    GridOptionsWrapper2.prototype.getAutoSizePadding = function() {
      var value = this.gridOptions.autoSizePadding;
      return value != null && value >= 0 ? value : 20;
    };
    GridOptionsWrapper2.prototype.getHeaderHeight = function() {
      if (typeof this.gridOptions.headerHeight === "number") {
        return this.gridOptions.headerHeight;
      }
      return this.getFromTheme(25, "headerHeight");
    };
    GridOptionsWrapper2.prototype.getFloatingFiltersHeight = function() {
      if (typeof this.gridOptions.floatingFiltersHeight === "number") {
        return this.gridOptions.floatingFiltersHeight;
      }
      return this.getFromTheme(25, "headerHeight");
    };
    GridOptionsWrapper2.prototype.getGroupHeaderHeight = function() {
      if (typeof this.gridOptions.groupHeaderHeight === "number") {
        return this.gridOptions.groupHeaderHeight;
      }
      return this.getHeaderHeight();
    };
    GridOptionsWrapper2.prototype.getPivotHeaderHeight = function() {
      if (typeof this.gridOptions.pivotHeaderHeight === "number") {
        return this.gridOptions.pivotHeaderHeight;
      }
      return this.getHeaderHeight();
    };
    GridOptionsWrapper2.prototype.getPivotGroupHeaderHeight = function() {
      if (typeof this.gridOptions.pivotGroupHeaderHeight === "number") {
        return this.gridOptions.pivotGroupHeaderHeight;
      }
      return this.getGroupHeaderHeight();
    };
    GridOptionsWrapper2.prototype.isExternalFilterPresent = function() {
      if (typeof this.gridOptions.isExternalFilterPresent === "function") {
        return this.gridOptions.isExternalFilterPresent();
      }
      return false;
    };
    GridOptionsWrapper2.prototype.doesExternalFilterPass = function(node) {
      if (typeof this.gridOptions.doesExternalFilterPass === "function") {
        return this.gridOptions.doesExternalFilterPass(node);
      }
      return false;
    };
    GridOptionsWrapper2.prototype.getTooltipShowDelay = function() {
      var tooltipShowDelay = this.gridOptions.tooltipShowDelay;
      if (exists(tooltipShowDelay)) {
        if (tooltipShowDelay < 0) {
          console.warn("ag-grid: tooltipShowDelay should not be lower than 0");
        }
        return Math.max(200, tooltipShowDelay);
      }
      return null;
    };
    GridOptionsWrapper2.prototype.isTooltipMouseTrack = function() {
      return isTrue(this.gridOptions.tooltipMouseTrack);
    };
    GridOptionsWrapper2.prototype.isSuppressModelUpdateAfterUpdateTransaction = function() {
      return isTrue(this.gridOptions.suppressModelUpdateAfterUpdateTransaction);
    };
    GridOptionsWrapper2.prototype.getDocument = function() {
      var result = null;
      if (this.gridOptions.getDocument && exists(this.gridOptions.getDocument)) {
        result = this.gridOptions.getDocument();
      }
      if (result && exists(result)) {
        return result;
      }
      return document;
    };
    GridOptionsWrapper2.prototype.getMinColWidth = function() {
      var minColWidth = this.gridOptions.minColWidth;
      if (exists(minColWidth) && minColWidth > GridOptionsWrapper_1.MIN_COL_WIDTH) {
        return this.gridOptions.minColWidth;
      }
      var measuredMin = this.getFromTheme(null, "headerCellMinWidth");
      return exists(measuredMin) ? Math.max(measuredMin, GridOptionsWrapper_1.MIN_COL_WIDTH) : GridOptionsWrapper_1.MIN_COL_WIDTH;
    };
    GridOptionsWrapper2.prototype.getMaxColWidth = function() {
      if (this.gridOptions.maxColWidth && this.gridOptions.maxColWidth > GridOptionsWrapper_1.MIN_COL_WIDTH) {
        return this.gridOptions.maxColWidth;
      }
      return null;
    };
    GridOptionsWrapper2.prototype.getColWidth = function() {
      if (typeof this.gridOptions.colWidth !== "number" || this.gridOptions.colWidth < GridOptionsWrapper_1.MIN_COL_WIDTH) {
        return 200;
      }
      return this.gridOptions.colWidth;
    };
    GridOptionsWrapper2.prototype.getRowBuffer = function() {
      var rowBuffer = this.gridOptions.rowBuffer;
      if (typeof rowBuffer === "number") {
        if (rowBuffer < 0) {
          doOnce(function() {
            return console.warn("AG Grid: rowBuffer should not be negative");
          }, "warn rowBuffer negative");
          this.gridOptions.rowBuffer = rowBuffer = 0;
        }
      } else {
        rowBuffer = Constants.ROW_BUFFER_SIZE;
      }
      return rowBuffer;
    };
    GridOptionsWrapper2.prototype.getRowBufferInPixels = function() {
      var rowsToBuffer = this.getRowBuffer();
      var defaultRowHeight = this.getRowHeightAsNumber();
      return rowsToBuffer * defaultRowHeight;
    };
    GridOptionsWrapper2.prototype.getScrollbarWidth = function() {
      if (this.scrollbarWidth == null) {
        var useGridOptions = typeof this.gridOptions.scrollbarWidth === "number" && this.gridOptions.scrollbarWidth >= 0;
        var scrollbarWidth = useGridOptions ? this.gridOptions.scrollbarWidth : getScrollbarWidth();
        if (scrollbarWidth != null) {
          this.scrollbarWidth = scrollbarWidth;
          this.eventService.dispatchEvent({
            type: Events.EVENT_SCROLLBAR_WIDTH_CHANGED
          });
        }
      }
      return this.scrollbarWidth;
    };
    GridOptionsWrapper2.prototype.checkForDeprecated = function() {
      var options = this.gridOptions;
      if (options.deprecatedEmbedFullWidthRows) {
        console.warn("AG Grid: since v21.2, deprecatedEmbedFullWidthRows has been replaced with embedFullWidthRows.");
      }
      if (options.enableOldSetFilterModel) {
        console.warn("AG Grid: since v22.x, enableOldSetFilterModel is deprecated. Please move to the new Set Filter Model as the old one may not be supported in v23 onwards.");
      }
      if (options.floatingFilter) {
        console.warn("AG Grid: since v23.1, floatingFilter on the gridOptions is deprecated. Please use floatingFilter on the colDef instead.");
        if (!options.defaultColDef) {
          options.defaultColDef = {};
        }
        if (options.defaultColDef.floatingFilter == null) {
          options.defaultColDef.floatingFilter = true;
        }
      }
      if (options.rowDeselection) {
        console.warn("AG Grid: since v24.x, rowDeselection is deprecated and the behaviour is true by default. Please use `suppressRowDeselection` to prevent rows from being deselected.");
      }
      if (options.enableMultiRowDragging) {
        options.rowDragMultiRow = true;
        delete options.enableMultiRowDragging;
        console.warn("AG Grid: since v26.1, `enableMultiRowDragging` is deprecated. Please use `rowDragMultiRow`.");
      }
      var checkRenamedProperty = function(oldProp, newProp, version) {
        if (options[oldProp] != null) {
          console.warn("ag-grid: since version " + version + ", '" + oldProp + "' is deprecated / renamed, please use the new property name '" + newProp + "' instead.");
          if (options[newProp] == null) {
            options[newProp] = options[oldProp];
          }
        }
      };
      checkRenamedProperty("batchUpdateWaitMillis", "asyncTransactionWaitMillis", "23.1.x");
      checkRenamedProperty("deltaRowDataMode", "immutableData", "23.1.x");
      if (options.immutableColumns || options.deltaColumnMode) {
        console.warn("AG Grid: since v24.0, immutableColumns and deltaColumnMode properties are gone. The grid now works like this as default. To keep column order maintained, set grid property applyColumnDefOrder=true");
      }
      checkRenamedProperty("suppressSetColumnStateEvents", "suppressColumnStateEvents", "24.0.x");
      if (options.groupRowInnerRenderer || options.groupRowInnerRendererParams || options.groupRowInnerRendererFramework) {
        console.warn("AG Grid: since v24.0, grid properties groupRowInnerRenderer, groupRowInnerRendererFramework and groupRowInnerRendererParams are no longer used.");
        console.warn("  Instead use the grid properties groupRowRendererParams.innerRenderer, groupRowRendererParams.innerRendererFramework and groupRowRendererParams.innerRendererParams.");
        console.warn("  For example instead of this:");
        console.warn('    groupRowInnerRenderer: "myRenderer"');
        console.warn("    groupRowInnerRendererParams: {x: a}");
        console.warn("  Replace with this:");
        console.warn("    groupRowRendererParams: {");
        console.warn('      innerRenderer: "myRenderer",');
        console.warn("      innerRendererParams: {x: a}");
        console.warn("    }");
        console.warn("  We have copied the properties over for you. However to stop this error message, please change your application code.");
        if (!options.groupRowRendererParams) {
          options.groupRowRendererParams = {};
        }
        var params2 = options.groupRowRendererParams;
        if (options.groupRowInnerRenderer) {
          params2.innerRenderer = options.groupRowInnerRenderer;
        }
        if (options.groupRowInnerRendererParams) {
          params2.innerRendererParams = options.groupRowInnerRendererParams;
        }
        if (options.groupRowInnerRendererFramework) {
          params2.innerRendererFramework = options.groupRowInnerRendererFramework;
        }
      }
      if (options.rememberGroupStateWhenNewData) {
        console.warn("AG Grid: since v24.0, grid property rememberGroupStateWhenNewData is deprecated. This feature was provided before Transaction Updates worked (which keep group state). Now that transaction updates are possible and they keep group state, this feature is no longer needed.");
      }
      if (options.detailCellRendererParams && options.detailCellRendererParams.autoHeight) {
        console.warn("AG Grid: since v24.1, grid property detailCellRendererParams.autoHeight is replaced with grid property detailRowAutoHeight. This allows this feature to work when you provide a custom DetailCellRenderer");
        options.detailRowAutoHeight = true;
      }
      if (options.suppressKeyboardEvent) {
        console.warn("AG Grid: since v24.1 suppressKeyboardEvent in the gridOptions has been deprecated and will be removed in\n                 future versions of AG Grid. If you need this to be set for every column use the defaultColDef property.");
      }
      if (options.suppressEnterpriseResetOnNewColumns) {
        console.warn("AG Grid: since v25, grid property suppressEnterpriseResetOnNewColumns is deprecated. This was a temporary property to allow changing columns in Server Side Row Model without triggering a reload. Now that it is possible to dynamically change columns in the grid, this is no longer needed.");
      }
      if (options.suppressColumnStateEvents) {
        console.warn('AG Grid: since v25, grid property suppressColumnStateEvents no longer works due to a refactor that we did. It should be possible to achieve similar using event.source, which would be "api" if the event was due to setting column state via the API');
      }
      if (options.defaultExportParams) {
        console.warn("AG Grid: since v25.2, the grid property `defaultExportParams` has been replaced by `defaultCsvExportParams` and `defaultExcelExportParams`.");
      }
      if (options.stopEditingWhenGridLosesFocus) {
        console.warn("AG Grid: since v25.2.2, the grid property `stopEditingWhenGridLosesFocus` has been replaced by `stopEditingWhenCellsLoseFocus`.");
        options.stopEditingWhenCellsLoseFocus = true;
      }
      if (options.applyColumnDefOrder) {
        console.warn("AG Grid: since v26.0, the grid property `applyColumnDefOrder` is no longer needed, as this is the default behaviour. To turn this behaviour off, set maintainColumnOrder=true");
      }
      if (options.groupMultiAutoColumn) {
        console.warn("AG Grid: since v26.0, the grid property `groupMultiAutoColumn` has been replaced by `groupDisplayType = 'multipleColumns'`");
        options.groupDisplayType = "multipleColumns";
      }
      if (options.groupUseEntireRow) {
        console.warn("AG Grid: since v26.0, the grid property `groupUseEntireRow` has been replaced by `groupDisplayType = 'groupRows'`");
        options.groupDisplayType = "groupRows";
      }
      if (options.groupSuppressAutoColumn) {
        var propName = options.treeData ? "treeDataDisplayType" : "groupDisplayType";
        console.warn("AG Grid: since v26.0, the grid property `groupSuppressAutoColumn` has been replaced by `" + propName + " = 'custom'`");
        options.groupDisplayType = "custom";
      }
      if (options.defaultGroupSortComparator) {
        console.warn("AG Grid: since v26.0, the grid property `defaultGroupSortComparator` has been replaced by `defaultGroupOrderComparator`");
        options.defaultGroupOrderComparator = options.defaultGroupSortComparator;
      }
      if (options.colWidth) {
        console.warn("AG Grid: since v26.1, the grid property `colWidth` is deprecated and should be set via `defaultColDef.width`.");
      }
      if (options.minColWidth) {
        console.warn("AG Grid: since v26.1, the grid property `minColWidth` is deprecated and should be set via `defaultColDef.minWidth`.");
      }
      if (options.maxColWidth) {
        console.warn("AG Grid: since v26.1, the grid property `maxColWidth` is deprecated and should be set via `defaultColDef.maxWidth`.");
      }
    };
    GridOptionsWrapper2.prototype.checkForViolations = function() {
      if (this.isTreeData()) {
        this.treeDataViolations();
      }
    };
    GridOptionsWrapper2.prototype.treeDataViolations = function() {
      if (this.isRowModelDefault()) {
        if (missing(this.getDataPathFunc())) {
          console.warn("AG Grid: property usingTreeData=true with rowModel=clientSide, but you did not provide getDataPath function, please provide getDataPath function if using tree data.");
        }
      }
      if (this.isRowModelServerSide()) {
        if (missing(this.getIsServerSideGroupFunc())) {
          console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide isServerSideGroup function, please provide isServerSideGroup function if using tree data.");
        }
        if (missing(this.getServerSideGroupKeyFunc())) {
          console.warn("AG Grid: property usingTreeData=true with rowModel=serverSide, but you did not provide getServerSideGroupKey function, please provide getServerSideGroupKey function if using tree data.");
        }
      }
    };
    GridOptionsWrapper2.prototype.getLocaleTextFunc = function() {
      if (this.gridOptions.localeTextFunc) {
        return this.gridOptions.localeTextFunc;
      }
      var localeText = this.gridOptions.localeText;
      return function(key, defaultValue) {
        return localeText && localeText[key] ? localeText[key] : defaultValue;
      };
    };
    GridOptionsWrapper2.prototype.globalEventHandler = function(eventName, event) {
      if (this.destroyed) {
        return;
      }
      var callbackMethodName = ComponentUtil.getCallbackForEvent(eventName);
      if (typeof this.gridOptions[callbackMethodName] === "function") {
        this.gridOptions[callbackMethodName](event);
      }
    };
    GridOptionsWrapper2.prototype.getRowHeightAsNumber = function() {
      if (!this.gridOptions.rowHeight || missing(this.gridOptions.rowHeight)) {
        return this.getDefaultRowHeight();
      }
      if (this.gridOptions.rowHeight && this.isNumeric(this.gridOptions.rowHeight)) {
        return this.gridOptions.rowHeight;
      }
      console.warn("AG Grid row height must be a number if not using standard row model");
      return this.getDefaultRowHeight();
    };
    GridOptionsWrapper2.prototype.getRowHeightForNode = function(rowNode, allowEstimate, defaultRowHeight) {
      if (allowEstimate === void 0) {
        allowEstimate = false;
      }
      if (defaultRowHeight == null) {
        defaultRowHeight = this.getDefaultRowHeight();
      }
      if (typeof this.gridOptions.getRowHeight === "function") {
        if (allowEstimate) {
          return { height: this.getDefaultRowHeight(), estimated: true };
        }
        var params2 = {
          node: rowNode,
          data: rowNode.data,
          api: this.gridOptions.api,
          context: this.gridOptions.context
        };
        var height = this.gridOptions.getRowHeight(params2);
        if (this.isNumeric(height)) {
          if (height === 0) {
            doOnce(function() {
              return console.warn("AG Grid: The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.");
            }, "invalidRowHeight");
          }
          return { height: Math.max(1, height), estimated: false };
        }
      }
      if (rowNode.detail && this.isMasterDetail()) {
        if (this.isNumeric(this.gridOptions.detailRowHeight)) {
          return { height: this.gridOptions.detailRowHeight, estimated: false };
        }
        return { height: DEFAULT_DETAIL_ROW_HEIGHT, estimated: false };
      }
      var rowHeight = this.gridOptions.rowHeight && this.isNumeric(this.gridOptions.rowHeight) ? this.gridOptions.rowHeight : defaultRowHeight;
      return { height: rowHeight, estimated: false };
    };
    GridOptionsWrapper2.prototype.isDynamicRowHeight = function() {
      return typeof this.gridOptions.getRowHeight === "function";
    };
    GridOptionsWrapper2.prototype.getListItemHeight = function() {
      return this.getFromTheme(20, "listItemHeight");
    };
    GridOptionsWrapper2.prototype.chartMenuPanelWidth = function() {
      return this.environment.chartMenuPanelWidth();
    };
    GridOptionsWrapper2.prototype.isNumeric = function(value) {
      return !isNaN(value) && typeof value === "number" && isFinite(value);
    };
    GridOptionsWrapper2.prototype.getFromTheme = function(defaultValue, sassVariableName) {
      var theme = this.environment.getTheme().theme;
      if (theme && theme.indexOf("ag-theme") === 0) {
        return this.environment.getSassVariable(theme, sassVariableName);
      }
      return defaultValue;
    };
    GridOptionsWrapper2.prototype.getDefaultRowHeight = function() {
      return this.getFromTheme(DEFAULT_ROW_HEIGHT, "rowHeight");
    };
    GridOptionsWrapper2.prototype.matchesGroupDisplayType = function(toMatch, supplied) {
      var groupDisplayTypeValues = ["groupRows", "multipleColumns", "custom", "singleColumn"];
      if (groupDisplayTypeValues.indexOf(supplied) < 0) {
        console.warn("AG Grid: '" + supplied + "' is not a valid groupDisplayType value - possible values are: '" + groupDisplayTypeValues.join("', '") + "'");
        return false;
      }
      return supplied === toMatch;
    };
    GridOptionsWrapper2.prototype.matchesTreeDataDisplayType = function(toMatch, supplied) {
      var treeDataDisplayTypeValues = ["auto", "custom"];
      if (treeDataDisplayTypeValues.indexOf(supplied) < 0) {
        console.warn("AG Grid: '" + supplied + "' is not a valid treeDataDisplayType value - possible values are: '" + treeDataDisplayTypeValues.join("', '") + "'");
        return false;
      }
      return supplied === toMatch;
    };
    var GridOptionsWrapper_1;
    GridOptionsWrapper2.MIN_COL_WIDTH = 10;
    GridOptionsWrapper2.PROP_HEADER_HEIGHT = "headerHeight";
    GridOptionsWrapper2.PROP_GROUP_REMOVE_SINGLE_CHILDREN = "groupRemoveSingleChildren";
    GridOptionsWrapper2.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN = "groupRemoveLowestSingleChildren";
    GridOptionsWrapper2.PROP_PIVOT_HEADER_HEIGHT = "pivotHeaderHeight";
    GridOptionsWrapper2.PROP_SUPPRESS_CLIPBOARD_PASTE = "suppressClipboardPaste";
    GridOptionsWrapper2.PROP_GROUP_HEADER_HEIGHT = "groupHeaderHeight";
    GridOptionsWrapper2.PROP_PIVOT_GROUP_HEADER_HEIGHT = "pivotGroupHeaderHeight";
    GridOptionsWrapper2.PROP_NAVIGATE_TO_NEXT_CELL = "navigateToNextCell";
    GridOptionsWrapper2.PROP_TAB_TO_NEXT_CELL = "tabToNextCell";
    GridOptionsWrapper2.PROP_NAVIGATE_TO_NEXT_HEADER = "navigateToNextHeader";
    GridOptionsWrapper2.PROP_TAB_TO_NEXT_HEADER = "tabToNextHeader";
    GridOptionsWrapper2.PROP_IS_EXTERNAL_FILTER_PRESENT = "isExternalFilterPresentFunc";
    GridOptionsWrapper2.PROP_DOES_EXTERNAL_FILTER_PASS = "doesExternalFilterPass";
    GridOptionsWrapper2.PROP_FLOATING_FILTERS_HEIGHT = "floatingFiltersHeight";
    GridOptionsWrapper2.PROP_SUPPRESS_ROW_CLICK_SELECTION = "suppressRowClickSelection";
    GridOptionsWrapper2.PROP_SUPPRESS_ROW_DRAG = "suppressRowDrag";
    GridOptionsWrapper2.PROP_SUPPRESS_MOVE_WHEN_ROW_DRAG = "suppressMoveWhenRowDragging";
    GridOptionsWrapper2.PROP_GET_ROW_CLASS = "getRowClass";
    GridOptionsWrapper2.PROP_GET_ROW_STYLE = "getRowStyle";
    GridOptionsWrapper2.PROP_GET_ROW_HEIGHT = "getRowHeight";
    GridOptionsWrapper2.PROP_POPUP_PARENT = "popupParent";
    GridOptionsWrapper2.PROP_DOM_LAYOUT = "domLayout";
    GridOptionsWrapper2.PROP_FILL_HANDLE_DIRECTION = "fillHandleDirection";
    GridOptionsWrapper2.PROP_GROUP_ROW_AGG_NODES = "groupRowAggNodes";
    GridOptionsWrapper2.PROP_GET_BUSINESS_KEY_FOR_NODE = "getBusinessKeyForNode";
    GridOptionsWrapper2.PROP_GET_CHILD_COUNT = "getChildCount";
    GridOptionsWrapper2.PROP_PROCESS_ROW_POST_CREATE = "processRowPostCreate";
    GridOptionsWrapper2.PROP_GET_ROW_NODE_ID = "getRowNodeId";
    GridOptionsWrapper2.PROP_IS_FULL_WIDTH_CELL = "isFullWidthCell";
    GridOptionsWrapper2.PROP_IS_ROW_SELECTABLE = "isRowSelectable";
    GridOptionsWrapper2.PROP_IS_ROW_MASTER = "isRowMaster";
    GridOptionsWrapper2.PROP_POST_SORT = "postSort";
    GridOptionsWrapper2.PROP_GET_DOCUMENT = "getDocument";
    GridOptionsWrapper2.PROP_POST_PROCESS_POPUP = "postProcessPopup";
    GridOptionsWrapper2.PROP_DEFAULT_GROUP_ORDER_COMPARATOR = "defaultGroupOrderComparator";
    GridOptionsWrapper2.PROP_PAGINATION_NUMBER_FORMATTER = "paginationNumberFormatter";
    GridOptionsWrapper2.PROP_GET_CONTEXT_MENU_ITEMS = "getContextMenuItems";
    GridOptionsWrapper2.PROP_GET_MAIN_MENU_ITEMS = "getMainMenuItems";
    GridOptionsWrapper2.PROP_PROCESS_CELL_FOR_CLIPBOARD = "processCellForClipboard";
    GridOptionsWrapper2.PROP_PROCESS_CELL_FROM_CLIPBOARD = "processCellFromClipboard";
    GridOptionsWrapper2.PROP_SEND_TO_CLIPBOARD = "sendToClipboard";
    GridOptionsWrapper2.PROP_PROCESS_TO_SECONDARY_COLDEF = "processSecondaryColDef";
    GridOptionsWrapper2.PROP_PROCESS_SECONDARY_COL_GROUP_DEF = "processSecondaryColGroupDef";
    GridOptionsWrapper2.PROP_PROCESS_CHART_OPTIONS = "processChartOptions";
    GridOptionsWrapper2.PROP_GET_CHART_TOOLBAR_ITEMS = "getChartToolbarItems";
    GridOptionsWrapper2.PROP_GET_SERVER_SIDE_STORE_PARAMS = "getServerSideStoreParams";
    GridOptionsWrapper2.PROP_IS_SERVER_SIDE_GROUPS_OPEN_BY_DEFAULT = "isServerSideGroupOpenByDefault";
    GridOptionsWrapper2.PROP_IS_APPLY_SERVER_SIDE_TRANSACTION = "isApplyServerSideTransaction";
    GridOptionsWrapper2.PROP_IS_SERVER_SIDE_GROUP = "isServerSideGroup";
    GridOptionsWrapper2.PROP_GET_SERVER_SIDE_GROUP_KEY = "getServerSideGroupKey";
    __decorate$z([
      Autowired("gridOptions")
    ], GridOptionsWrapper2.prototype, "gridOptions", void 0);
    __decorate$z([
      Autowired("eventService")
    ], GridOptionsWrapper2.prototype, "eventService", void 0);
    __decorate$z([
      Autowired("environment")
    ], GridOptionsWrapper2.prototype, "environment", void 0);
    __decorate$z([
      __param$3(0, Qualifier("gridApi")),
      __param$3(1, Qualifier("columnApi"))
    ], GridOptionsWrapper2.prototype, "agWire", null);
    __decorate$z([
      PreDestroy
    ], GridOptionsWrapper2.prototype, "destroy", null);
    __decorate$z([
      PostConstruct
    ], GridOptionsWrapper2.prototype, "init", null);
    GridOptionsWrapper2 = GridOptionsWrapper_1 = __decorate$z([
      Bean("gridOptionsWrapper")
    ], GridOptionsWrapper2);
    return GridOptionsWrapper2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var ChangedPath = function() {
    function ChangedPath2(keepingColumns, rootNode) {
      this.active = true;
      this.nodeIdsToColumns = {};
      this.mapToItems = {};
      this.keepingColumns = keepingColumns;
      this.pathRoot = {
        rowNode: rootNode,
        children: null
      };
      this.mapToItems[rootNode.id] = this.pathRoot;
    }
    ChangedPath2.prototype.setInactive = function() {
      this.active = false;
    };
    ChangedPath2.prototype.isActive = function() {
      return this.active;
    };
    ChangedPath2.prototype.depthFirstSearchChangedPath = function(pathItem, callback) {
      if (pathItem.children) {
        for (var i2 = 0; i2 < pathItem.children.length; i2++) {
          this.depthFirstSearchChangedPath(pathItem.children[i2], callback);
        }
      }
      callback(pathItem.rowNode);
    };
    ChangedPath2.prototype.depthFirstSearchEverything = function(rowNode, callback, traverseEverything) {
      if (rowNode.childrenAfterGroup) {
        for (var i2 = 0; i2 < rowNode.childrenAfterGroup.length; i2++) {
          var childNode = rowNode.childrenAfterGroup[i2];
          if (childNode.childrenAfterGroup) {
            this.depthFirstSearchEverything(rowNode.childrenAfterGroup[i2], callback, traverseEverything);
          } else if (traverseEverything) {
            callback(childNode);
          }
        }
      }
      callback(rowNode);
    };
    ChangedPath2.prototype.forEachChangedNodeDepthFirst = function(callback, traverseLeafNodes) {
      if (traverseLeafNodes === void 0) {
        traverseLeafNodes = false;
      }
      if (this.active) {
        this.depthFirstSearchChangedPath(this.pathRoot, callback);
      } else {
        this.depthFirstSearchEverything(this.pathRoot.rowNode, callback, traverseLeafNodes);
      }
    };
    ChangedPath2.prototype.executeFromRootNode = function(callback) {
      callback(this.pathRoot.rowNode);
    };
    ChangedPath2.prototype.createPathItems = function(rowNode) {
      var pointer = rowNode;
      var newEntryCount = 0;
      while (!this.mapToItems[pointer.id]) {
        var newEntry = {
          rowNode: pointer,
          children: null
        };
        this.mapToItems[pointer.id] = newEntry;
        newEntryCount++;
        pointer = pointer.parent;
      }
      return newEntryCount;
    };
    ChangedPath2.prototype.populateColumnsMap = function(rowNode, columns) {
      var _this = this;
      if (!this.keepingColumns || !columns) {
        return;
      }
      var pointer = rowNode;
      while (pointer) {
        if (!this.nodeIdsToColumns[pointer.id]) {
          this.nodeIdsToColumns[pointer.id] = {};
        }
        columns.forEach(function(col) {
          return _this.nodeIdsToColumns[pointer.id][col.getId()] = true;
        });
        pointer = pointer.parent;
      }
    };
    ChangedPath2.prototype.linkPathItems = function(rowNode, newEntryCount) {
      var pointer = rowNode;
      for (var i2 = 0; i2 < newEntryCount; i2++) {
        var thisItem = this.mapToItems[pointer.id];
        var parentItem = this.mapToItems[pointer.parent.id];
        if (!parentItem.children) {
          parentItem.children = [];
        }
        parentItem.children.push(thisItem);
        pointer = pointer.parent;
      }
    };
    ChangedPath2.prototype.addParentNode = function(rowNode, columns) {
      if (!rowNode || rowNode.isRowPinned()) {
        return;
      }
      var newEntryCount = this.createPathItems(rowNode);
      this.linkPathItems(rowNode, newEntryCount);
      this.populateColumnsMap(rowNode, columns);
    };
    ChangedPath2.prototype.canSkip = function(rowNode) {
      return this.active && !this.mapToItems[rowNode.id];
    };
    ChangedPath2.prototype.getValueColumnsForNode = function(rowNode, valueColumns) {
      if (!this.keepingColumns) {
        return valueColumns;
      }
      var colsForThisNode = this.nodeIdsToColumns[rowNode.id];
      var result = valueColumns.filter(function(col) {
        return colsForThisNode[col.getId()];
      });
      return result;
    };
    ChangedPath2.prototype.getNotValueColumnsForNode = function(rowNode, valueColumns) {
      if (!this.keepingColumns) {
        return null;
      }
      var colsForThisNode = this.nodeIdsToColumns[rowNode.id];
      var result = valueColumns.filter(function(col) {
        return !colsForThisNode[col.getId()];
      });
      return result;
    };
    return ChangedPath2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$F = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$A = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param$4 = function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  var SelectionService = function(_super) {
    __extends$F(SelectionService2, _super);
    function SelectionService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    SelectionService2.prototype.setBeans = function(loggerFactory) {
      this.logger = loggerFactory.create("selectionService");
      this.reset();
      if (this.gridOptionsWrapper.isRowModelDefault()) {
        this.addManagedListener(this.eventService, Events.EVENT_ROW_DATA_CHANGED, this.reset.bind(this));
      }
    };
    SelectionService2.prototype.init = function() {
      this.groupSelectsChildren = this.gridOptionsWrapper.isGroupSelectsChildren();
      this.addManagedListener(this.eventService, Events.EVENT_ROW_SELECTED, this.onRowSelected.bind(this));
    };
    SelectionService2.prototype.setLastSelectedNode = function(rowNode) {
      this.lastSelectedNode = rowNode;
    };
    SelectionService2.prototype.getLastSelectedNode = function() {
      return this.lastSelectedNode;
    };
    SelectionService2.prototype.getSelectedNodes = function() {
      var selectedNodes = [];
      iterateObject(this.selectedNodes, function(key, rowNode) {
        if (rowNode) {
          selectedNodes.push(rowNode);
        }
      });
      return selectedNodes;
    };
    SelectionService2.prototype.getSelectedRows = function() {
      var selectedRows = [];
      iterateObject(this.selectedNodes, function(key, rowNode) {
        if (rowNode && rowNode.data) {
          selectedRows.push(rowNode.data);
        }
      });
      return selectedRows;
    };
    SelectionService2.prototype.removeGroupsFromSelection = function() {
      var _this = this;
      iterateObject(this.selectedNodes, function(key, rowNode) {
        if (rowNode && rowNode.group) {
          _this.selectedNodes[rowNode.id] = void 0;
        }
      });
    };
    SelectionService2.prototype.updateGroupsFromChildrenSelections = function(changedPath) {
      if (!this.gridOptionsWrapper.isGroupSelectsChildren()) {
        return;
      }
      if (this.rowModel.getType() !== Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
        return;
      }
      var clientSideRowModel = this.rowModel;
      var rootNode = clientSideRowModel.getRootNode();
      if (!changedPath) {
        changedPath = new ChangedPath(true, rootNode);
        changedPath.setInactive();
      }
      changedPath.forEachChangedNodeDepthFirst(function(rowNode) {
        if (rowNode !== rootNode) {
          rowNode.calculateSelectedFromChildren();
        }
      });
    };
    SelectionService2.prototype.getNodeForIdIfSelected = function(id) {
      return this.selectedNodes[id];
    };
    SelectionService2.prototype.clearOtherNodes = function(rowNodeToKeepSelected) {
      var _this = this;
      var groupsToRefresh = {};
      var updatedCount = 0;
      iterateObject(this.selectedNodes, function(key, otherRowNode) {
        if (otherRowNode && otherRowNode.id !== rowNodeToKeepSelected.id) {
          var rowNode = _this.selectedNodes[otherRowNode.id];
          updatedCount += rowNode.setSelectedParams({
            newValue: false,
            clearSelection: false,
            suppressFinishActions: true
          });
          if (_this.groupSelectsChildren && otherRowNode.parent) {
            groupsToRefresh[otherRowNode.parent.id] = otherRowNode.parent;
          }
        }
      });
      iterateObject(groupsToRefresh, function(key, group) {
        group.calculateSelectedFromChildren();
      });
      return updatedCount;
    };
    SelectionService2.prototype.onRowSelected = function(event) {
      var rowNode = event.node;
      if (this.groupSelectsChildren && rowNode.group) {
        return;
      }
      if (rowNode.isSelected()) {
        this.selectedNodes[rowNode.id] = rowNode;
      } else {
        this.selectedNodes[rowNode.id] = void 0;
      }
    };
    SelectionService2.prototype.syncInRowNode = function(rowNode, oldNode) {
      this.syncInOldRowNode(rowNode, oldNode);
      this.syncInNewRowNode(rowNode);
    };
    SelectionService2.prototype.syncInOldRowNode = function(rowNode, oldNode) {
      var oldNodeHasDifferentId = exists(oldNode) && rowNode.id !== oldNode.id;
      if (oldNodeHasDifferentId && oldNode) {
        var id = oldNode.id;
        var oldNodeSelected = this.selectedNodes[id] == rowNode;
        if (oldNodeSelected) {
          this.selectedNodes[oldNode.id] = oldNode;
        }
      }
    };
    SelectionService2.prototype.syncInNewRowNode = function(rowNode) {
      if (exists(this.selectedNodes[rowNode.id])) {
        rowNode.setSelectedInitialValue(true);
        this.selectedNodes[rowNode.id] = rowNode;
      } else {
        rowNode.setSelectedInitialValue(false);
      }
    };
    SelectionService2.prototype.reset = function() {
      this.logger.log("reset");
      this.selectedNodes = {};
      this.lastSelectedNode = null;
    };
    SelectionService2.prototype.getBestCostNodeSelection = function() {
      if (this.rowModel.getType() !== Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
        console.warn("getBestCostNodeSelection is only available when using normal row model");
        return;
      }
      var clientSideRowModel = this.rowModel;
      var topLevelNodes = clientSideRowModel.getTopLevelNodes();
      if (topLevelNodes === null) {
        console.warn("selectAll not available doing rowModel=virtual");
        return;
      }
      var result = [];
      function traverse(nodes) {
        for (var i2 = 0, l = nodes.length; i2 < l; i2++) {
          var node = nodes[i2];
          if (node.isSelected()) {
            result.push(node);
          } else {
            var maybeGroup = node;
            if (maybeGroup.group && maybeGroup.children) {
              traverse(maybeGroup.children);
            }
          }
        }
      }
      traverse(topLevelNodes);
      return result;
    };
    SelectionService2.prototype.setRowModel = function(rowModel) {
      this.rowModel = rowModel;
    };
    SelectionService2.prototype.isEmpty = function() {
      var count = 0;
      iterateObject(this.selectedNodes, function(nodeId, rowNode) {
        if (rowNode) {
          count++;
        }
      });
      return count === 0;
    };
    SelectionService2.prototype.deselectAllRowNodes = function(justFiltered) {
      if (justFiltered === void 0) {
        justFiltered = false;
      }
      var callback = function(rowNode) {
        return rowNode.selectThisNode(false);
      };
      var rowModelClientSide = this.rowModel.getType() === Constants.ROW_MODEL_TYPE_CLIENT_SIDE;
      if (justFiltered) {
        if (!rowModelClientSide) {
          console.error("AG Grid: selecting just filtered only works with In Memory Row Model");
          return;
        }
        var clientSideRowModel = this.rowModel;
        clientSideRowModel.forEachNodeAfterFilter(callback);
      } else {
        iterateObject(this.selectedNodes, function(id, rowNode) {
          if (rowNode) {
            callback(rowNode);
          }
        });
        this.reset();
      }
      if (rowModelClientSide && this.groupSelectsChildren) {
        this.updateGroupsFromChildrenSelections();
      }
      var event = {
        type: Events.EVENT_SELECTION_CHANGED,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.eventService.dispatchEvent(event);
    };
    SelectionService2.prototype.selectAllRowNodes = function(justFiltered) {
      if (justFiltered === void 0) {
        justFiltered = false;
      }
      if (this.rowModel.getType() !== Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
        throw new Error("selectAll only available with normal row model, ie not " + this.rowModel.getType());
      }
      var clientSideRowModel = this.rowModel;
      var callback = function(rowNode) {
        return rowNode.selectThisNode(true);
      };
      if (justFiltered) {
        clientSideRowModel.forEachNodeAfterFilter(callback);
      } else {
        clientSideRowModel.forEachNode(callback);
      }
      if (this.rowModel.getType() === Constants.ROW_MODEL_TYPE_CLIENT_SIDE && this.groupSelectsChildren) {
        this.updateGroupsFromChildrenSelections();
      }
      var event = {
        type: Events.EVENT_SELECTION_CHANGED,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.eventService.dispatchEvent(event);
    };
    SelectionService2.prototype.selectNode = function(rowNode, tryMulti) {
      if (rowNode) {
        rowNode.setSelectedParams({ newValue: true, clearSelection: !tryMulti });
      }
    };
    SelectionService2.prototype.deselectIndex = function(rowIndex) {
      var node = this.rowModel.getRow(rowIndex);
      this.deselectNode(node);
    };
    SelectionService2.prototype.deselectNode = function(rowNode) {
      if (rowNode) {
        rowNode.setSelectedParams({ newValue: false, clearSelection: false });
      }
    };
    SelectionService2.prototype.selectIndex = function(index, tryMulti) {
      var node = this.rowModel.getRow(index);
      this.selectNode(node, tryMulti);
    };
    __decorate$A([
      Autowired("rowModel")
    ], SelectionService2.prototype, "rowModel", void 0);
    __decorate$A([
      Autowired("columnApi")
    ], SelectionService2.prototype, "columnApi", void 0);
    __decorate$A([
      Autowired("gridApi")
    ], SelectionService2.prototype, "gridApi", void 0);
    __decorate$A([
      __param$4(0, Qualifier("loggerFactory"))
    ], SelectionService2.prototype, "setBeans", null);
    __decorate$A([
      PostConstruct
    ], SelectionService2.prototype, "init", null);
    SelectionService2 = __decorate$A([
      Bean("selectionService")
    ], SelectionService2);
    return SelectionService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __decorate$B = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ColumnApi = function() {
    function ColumnApi2() {
    }
    ColumnApi2.prototype.sizeColumnsToFit = function(gridWidth) {
      if (typeof gridWidth === "undefined") {
        console.error("AG Grid: missing parameter to columnApi.sizeColumnsToFit(gridWidth)");
      }
      this.columnModel.sizeColumnsToFit(gridWidth, "api");
    };
    ColumnApi2.prototype.setColumnGroupOpened = function(group, newValue) {
      this.columnModel.setColumnGroupOpened(group, newValue, "api");
    };
    ColumnApi2.prototype.getColumnGroup = function(name, instanceId) {
      return this.columnModel.getColumnGroup(name, instanceId);
    };
    ColumnApi2.prototype.getOriginalColumnGroup = function(name) {
      return this.columnModel.getOriginalColumnGroup(name);
    };
    ColumnApi2.prototype.getDisplayNameForColumn = function(column, location) {
      return this.columnModel.getDisplayNameForColumn(column, location) || "";
    };
    ColumnApi2.prototype.getDisplayNameForColumnGroup = function(columnGroup, location) {
      return this.columnModel.getDisplayNameForColumnGroup(columnGroup, location) || "";
    };
    ColumnApi2.prototype.getColumn = function(key) {
      return this.columnModel.getPrimaryColumn(key);
    };
    ColumnApi2.prototype.applyColumnState = function(params2) {
      return this.columnModel.applyColumnState(params2, "api");
    };
    ColumnApi2.prototype.getColumnState = function() {
      return this.columnModel.getColumnState();
    };
    ColumnApi2.prototype.resetColumnState = function() {
      this.columnModel.resetColumnState("api");
    };
    ColumnApi2.prototype.getColumnGroupState = function() {
      return this.columnModel.getColumnGroupState();
    };
    ColumnApi2.prototype.setColumnGroupState = function(stateItems) {
      this.columnModel.setColumnGroupState(stateItems, "api");
    };
    ColumnApi2.prototype.resetColumnGroupState = function() {
      this.columnModel.resetColumnGroupState("api");
    };
    ColumnApi2.prototype.isPinning = function() {
      return this.columnModel.isPinningLeft() || this.columnModel.isPinningRight();
    };
    ColumnApi2.prototype.isPinningLeft = function() {
      return this.columnModel.isPinningLeft();
    };
    ColumnApi2.prototype.isPinningRight = function() {
      return this.columnModel.isPinningRight();
    };
    ColumnApi2.prototype.getDisplayedColAfter = function(col) {
      return this.columnModel.getDisplayedColAfter(col);
    };
    ColumnApi2.prototype.getDisplayedColBefore = function(col) {
      return this.columnModel.getDisplayedColBefore(col);
    };
    ColumnApi2.prototype.setColumnVisible = function(key, visible) {
      this.columnModel.setColumnVisible(key, visible, "api");
    };
    ColumnApi2.prototype.setColumnsVisible = function(keys3, visible) {
      this.columnModel.setColumnsVisible(keys3, visible, "api");
    };
    ColumnApi2.prototype.setColumnPinned = function(key, pinned) {
      this.columnModel.setColumnPinned(key, pinned, "api");
    };
    ColumnApi2.prototype.setColumnsPinned = function(keys3, pinned) {
      this.columnModel.setColumnsPinned(keys3, pinned, "api");
    };
    ColumnApi2.prototype.getAllColumns = function() {
      return this.columnModel.getAllPrimaryColumns();
    };
    ColumnApi2.prototype.getAllGridColumns = function() {
      return this.columnModel.getAllGridColumns();
    };
    ColumnApi2.prototype.getDisplayedLeftColumns = function() {
      return this.columnModel.getDisplayedLeftColumns();
    };
    ColumnApi2.prototype.getDisplayedCenterColumns = function() {
      return this.columnModel.getDisplayedCenterColumns();
    };
    ColumnApi2.prototype.getDisplayedRightColumns = function() {
      return this.columnModel.getDisplayedRightColumns();
    };
    ColumnApi2.prototype.getAllDisplayedColumns = function() {
      return this.columnModel.getAllDisplayedColumns();
    };
    ColumnApi2.prototype.getAllDisplayedVirtualColumns = function() {
      return this.columnModel.getViewportColumns();
    };
    ColumnApi2.prototype.moveColumn = function(key, toIndex) {
      if (typeof key === "number") {
        console.warn("AG Grid: you are using moveColumn(fromIndex, toIndex) - moveColumn takes a column key and a destination index, not two indexes, to move with indexes use moveColumnByIndex(from,to) instead");
        this.columnModel.moveColumnByIndex(key, toIndex, "api");
      } else {
        this.columnModel.moveColumn(key, toIndex, "api");
      }
    };
    ColumnApi2.prototype.moveColumnByIndex = function(fromIndex, toIndex) {
      this.columnModel.moveColumnByIndex(fromIndex, toIndex, "api");
    };
    ColumnApi2.prototype.moveColumns = function(columnsToMoveKeys, toIndex) {
      this.columnModel.moveColumns(columnsToMoveKeys, toIndex, "api");
    };
    ColumnApi2.prototype.moveRowGroupColumn = function(fromIndex, toIndex) {
      this.columnModel.moveRowGroupColumn(fromIndex, toIndex);
    };
    ColumnApi2.prototype.setColumnAggFunc = function(key, aggFunc) {
      this.columnModel.setColumnAggFunc(key, aggFunc);
    };
    ColumnApi2.prototype.setColumnWidth = function(key, newWidth, finished2, source) {
      if (finished2 === void 0) {
        finished2 = true;
      }
      this.columnModel.setColumnWidths([{ key, newWidth }], false, finished2, source);
    };
    ColumnApi2.prototype.setColumnWidths = function(columnWidths, finished2, source) {
      if (finished2 === void 0) {
        finished2 = true;
      }
      this.columnModel.setColumnWidths(columnWidths, false, finished2, source);
    };
    ColumnApi2.prototype.setPivotMode = function(pivotMode) {
      this.columnModel.setPivotMode(pivotMode);
    };
    ColumnApi2.prototype.isPivotMode = function() {
      return this.columnModel.isPivotMode();
    };
    ColumnApi2.prototype.getSecondaryPivotColumn = function(pivotKeys, valueColKey) {
      return this.columnModel.getSecondaryPivotColumn(pivotKeys, valueColKey);
    };
    ColumnApi2.prototype.setValueColumns = function(colKeys) {
      this.columnModel.setValueColumns(colKeys, "api");
    };
    ColumnApi2.prototype.getValueColumns = function() {
      return this.columnModel.getValueColumns();
    };
    ColumnApi2.prototype.removeValueColumn = function(colKey) {
      this.columnModel.removeValueColumn(colKey, "api");
    };
    ColumnApi2.prototype.removeValueColumns = function(colKeys) {
      this.columnModel.removeValueColumns(colKeys, "api");
    };
    ColumnApi2.prototype.addValueColumn = function(colKey) {
      this.columnModel.addValueColumn(colKey, "api");
    };
    ColumnApi2.prototype.addValueColumns = function(colKeys) {
      this.columnModel.addValueColumns(colKeys, "api");
    };
    ColumnApi2.prototype.setRowGroupColumns = function(colKeys) {
      this.columnModel.setRowGroupColumns(colKeys, "api");
    };
    ColumnApi2.prototype.removeRowGroupColumn = function(colKey) {
      this.columnModel.removeRowGroupColumn(colKey, "api");
    };
    ColumnApi2.prototype.removeRowGroupColumns = function(colKeys) {
      this.columnModel.removeRowGroupColumns(colKeys, "api");
    };
    ColumnApi2.prototype.addRowGroupColumn = function(colKey) {
      this.columnModel.addRowGroupColumn(colKey, "api");
    };
    ColumnApi2.prototype.addRowGroupColumns = function(colKeys) {
      this.columnModel.addRowGroupColumns(colKeys, "api");
    };
    ColumnApi2.prototype.getRowGroupColumns = function() {
      return this.columnModel.getRowGroupColumns();
    };
    ColumnApi2.prototype.setPivotColumns = function(colKeys) {
      this.columnModel.setPivotColumns(colKeys, "api");
    };
    ColumnApi2.prototype.removePivotColumn = function(colKey) {
      this.columnModel.removePivotColumn(colKey, "api");
    };
    ColumnApi2.prototype.removePivotColumns = function(colKeys) {
      this.columnModel.removePivotColumns(colKeys, "api");
    };
    ColumnApi2.prototype.addPivotColumn = function(colKey) {
      this.columnModel.addPivotColumn(colKey, "api");
    };
    ColumnApi2.prototype.addPivotColumns = function(colKeys) {
      this.columnModel.addPivotColumns(colKeys, "api");
    };
    ColumnApi2.prototype.getPivotColumns = function() {
      return this.columnModel.getPivotColumns();
    };
    ColumnApi2.prototype.getLeftDisplayedColumnGroups = function() {
      return this.columnModel.getDisplayedTreeLeft();
    };
    ColumnApi2.prototype.getCenterDisplayedColumnGroups = function() {
      return this.columnModel.getDisplayedTreeCentre();
    };
    ColumnApi2.prototype.getRightDisplayedColumnGroups = function() {
      return this.columnModel.getDisplayedTreeRight();
    };
    ColumnApi2.prototype.getAllDisplayedColumnGroups = function() {
      return this.columnModel.getAllDisplayedTrees();
    };
    ColumnApi2.prototype.autoSizeColumn = function(key, skipHeader) {
      return this.columnModel.autoSizeColumn(key, skipHeader, "api");
    };
    ColumnApi2.prototype.autoSizeColumns = function(keys3, skipHeader) {
      return this.columnModel.autoSizeColumns(keys3, skipHeader, "api");
    };
    ColumnApi2.prototype.autoSizeAllColumns = function(skipHeader) {
      this.columnModel.autoSizeAllColumns(skipHeader, "api");
    };
    ColumnApi2.prototype.setSecondaryColumns = function(colDefs) {
      this.columnModel.setSecondaryColumns(colDefs, "api");
    };
    ColumnApi2.prototype.getSecondaryColumns = function() {
      return this.columnModel.getSecondaryColumns();
    };
    ColumnApi2.prototype.getPrimaryColumns = function() {
      return this.columnModel.getAllPrimaryColumns();
    };
    ColumnApi2.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid = function() {
      setTimeout(_.removeAllReferences.bind(window, this, "Column API"), 100);
    };
    ColumnApi2.prototype.columnGroupOpened = function(group, newValue) {
      console.error("AG Grid: columnGroupOpened no longer exists, use setColumnGroupOpened");
      this.setColumnGroupOpened(group, newValue);
    };
    ColumnApi2.prototype.hideColumns = function(colIds, hide) {
      console.error("AG Grid: hideColumns is deprecated, use setColumnsVisible");
      this.columnModel.setColumnsVisible(colIds, !hide, "api");
    };
    ColumnApi2.prototype.hideColumn = function(colId, hide) {
      console.error("AG Grid: hideColumn is deprecated, use setColumnVisible");
      this.columnModel.setColumnVisible(colId, !hide, "api");
    };
    ColumnApi2.prototype.setState = function(columnState) {
      console.error("AG Grid: setState is deprecated, use setColumnState");
      return this.setColumnState(columnState);
    };
    ColumnApi2.prototype.getState = function() {
      console.error("AG Grid: getState is deprecated, use getColumnState");
      return this.getColumnState();
    };
    ColumnApi2.prototype.resetState = function() {
      console.error("AG Grid: resetState is deprecated, use resetColumnState");
      this.resetColumnState();
    };
    ColumnApi2.prototype.getAggregationColumns = function() {
      console.error("AG Grid: getAggregationColumns is deprecated, use getValueColumns");
      return this.columnModel.getValueColumns();
    };
    ColumnApi2.prototype.removeAggregationColumn = function(colKey) {
      console.error("AG Grid: removeAggregationColumn is deprecated, use removeValueColumn");
      this.columnModel.removeValueColumn(colKey, "api");
    };
    ColumnApi2.prototype.removeAggregationColumns = function(colKeys) {
      console.error("AG Grid: removeAggregationColumns is deprecated, use removeValueColumns");
      this.columnModel.removeValueColumns(colKeys, "api");
    };
    ColumnApi2.prototype.addAggregationColumn = function(colKey) {
      console.error("AG Grid: addAggregationColumn is deprecated, use addValueColumn");
      this.columnModel.addValueColumn(colKey, "api");
    };
    ColumnApi2.prototype.addAggregationColumns = function(colKeys) {
      console.error("AG Grid: addAggregationColumns is deprecated, use addValueColumns");
      this.columnModel.addValueColumns(colKeys, "api");
    };
    ColumnApi2.prototype.setColumnAggFunction = function(column, aggFunc) {
      console.error("AG Grid: setColumnAggFunction is deprecated, use setColumnAggFunc");
      this.columnModel.setColumnAggFunc(column, aggFunc, "api");
    };
    ColumnApi2.prototype.getDisplayNameForCol = function(column) {
      console.error("AG Grid: getDisplayNameForCol is deprecated, use getDisplayNameForColumn");
      return this.getDisplayNameForColumn(column, null);
    };
    ColumnApi2.prototype.setColumnState = function(columnState) {
      console.error("AG Grid: setColumnState is deprecated, use applyColumnState");
      return this.columnModel.applyColumnState({ state: columnState, applyOrder: true }, "api");
    };
    __decorate$B([
      Autowired("columnModel")
    ], ColumnApi2.prototype, "columnModel", void 0);
    __decorate$B([
      PreDestroy
    ], ColumnApi2.prototype, "cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid", null);
    ColumnApi2 = __decorate$B([
      Bean("columnApi")
    ], ColumnApi2);
    return ColumnApi2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  (function(SelectionHandleType) {
    SelectionHandleType[SelectionHandleType["FILL"] = 0] = "FILL";
    SelectionHandleType[SelectionHandleType["RANGE"] = 1] = "RANGE";
  })(exports2.SelectionHandleType || (exports2.SelectionHandleType = {}));
  (function(CellRangeType) {
    CellRangeType[CellRangeType["VALUE"] = 0] = "VALUE";
    CellRangeType[CellRangeType["DIMENSION"] = 1] = "DIMENSION";
  })(exports2.CellRangeType || (exports2.CellRangeType = {}));
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var CSS_CELL_RANGE_SELECTED = "ag-cell-range-selected";
  var CSS_CELL_RANGE_CHART = "ag-cell-range-chart";
  var CSS_CELL_RANGE_SINGLE_CELL = "ag-cell-range-single-cell";
  var CSS_CELL_RANGE_CHART_CATEGORY = "ag-cell-range-chart-category";
  var CSS_CELL_RANGE_HANDLE = "ag-cell-range-handle";
  var CSS_CELL_RANGE_TOP = "ag-cell-range-top";
  var CSS_CELL_RANGE_RIGHT = "ag-cell-range-right";
  var CSS_CELL_RANGE_BOTTOM = "ag-cell-range-bottom";
  var CSS_CELL_RANGE_LEFT = "ag-cell-range-left";
  var CellRangeFeature = function() {
    function CellRangeFeature2(beans, ctrl) {
      this.beans = beans;
      this.cellCtrl = ctrl;
    }
    CellRangeFeature2.prototype.setComp = function(cellComp) {
      this.cellComp = cellComp;
      this.onRangeSelectionChanged();
    };
    CellRangeFeature2.prototype.onRangeSelectionChanged = function() {
      this.rangeCount = this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition());
      this.hasChartRange = this.getHasChartRange();
      this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SELECTED, this.rangeCount !== 0);
      this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SELECTED + "-1", this.rangeCount === 1);
      this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SELECTED + "-2", this.rangeCount === 2);
      this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SELECTED + "-3", this.rangeCount === 3);
      this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SELECTED + "-4", this.rangeCount >= 4);
      this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_CHART, this.hasChartRange);
      this.cellComp.setAriaSelected(this.rangeCount > 0 ? true : void 0);
      this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SINGLE_CELL, this.isSingleCell());
      this.updateRangeBorders();
      this.refreshHandle();
    };
    CellRangeFeature2.prototype.updateRangeBorders = function() {
      var rangeBorders = this.getRangeBorders();
      var isSingleCell = this.isSingleCell();
      var isTop = !isSingleCell && rangeBorders.top;
      var isRight = !isSingleCell && rangeBorders.right;
      var isBottom = !isSingleCell && rangeBorders.bottom;
      var isLeft = !isSingleCell && rangeBorders.left;
      this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_TOP, isTop);
      this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_RIGHT, isRight);
      this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_BOTTOM, isBottom);
      this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_LEFT, isLeft);
    };
    CellRangeFeature2.prototype.isSingleCell = function() {
      var rangeService = this.beans.rangeService;
      return this.rangeCount === 1 && rangeService && !rangeService.isMoreThanOneCell();
    };
    CellRangeFeature2.prototype.getHasChartRange = function() {
      var rangeService = this.beans.rangeService;
      if (!this.rangeCount || !rangeService) {
        return false;
      }
      var cellRanges = rangeService.getCellRanges();
      return cellRanges.length > 0 && cellRanges.every(function(range) {
        return includes2([exports2.CellRangeType.DIMENSION, exports2.CellRangeType.VALUE], range.type);
      });
    };
    CellRangeFeature2.prototype.updateRangeBordersIfRangeCount = function() {
      if (this.rangeCount > 0) {
        this.updateRangeBorders();
        this.refreshHandle();
      }
    };
    CellRangeFeature2.prototype.getRangeBorders = function() {
      var _this = this;
      var isRtl = this.beans.gridOptionsWrapper.isEnableRtl();
      var top = false;
      var right = false;
      var bottom = false;
      var left = false;
      var thisCol = this.cellCtrl.getCellPosition().column;
      var _a = this.beans, rangeService = _a.rangeService, columnModel = _a.columnModel;
      var leftCol;
      var rightCol;
      if (isRtl) {
        leftCol = columnModel.getDisplayedColAfter(thisCol);
        rightCol = columnModel.getDisplayedColBefore(thisCol);
      } else {
        leftCol = columnModel.getDisplayedColBefore(thisCol);
        rightCol = columnModel.getDisplayedColAfter(thisCol);
      }
      var ranges = rangeService.getCellRanges().filter(function(range2) {
        return rangeService.isCellInSpecificRange(_this.cellCtrl.getCellPosition(), range2);
      });
      if (!leftCol) {
        left = true;
      }
      if (!rightCol) {
        right = true;
      }
      for (var i2 = 0; i2 < ranges.length; i2++) {
        if (top && right && bottom && left) {
          break;
        }
        var range = ranges[i2];
        var startRow = rangeService.getRangeStartRow(range);
        var endRow = rangeService.getRangeEndRow(range);
        if (!top && this.beans.rowPositionUtils.sameRow(startRow, this.cellCtrl.getCellPosition())) {
          top = true;
        }
        if (!bottom && this.beans.rowPositionUtils.sameRow(endRow, this.cellCtrl.getCellPosition())) {
          bottom = true;
        }
        if (!left && leftCol && range.columns.indexOf(leftCol) < 0) {
          left = true;
        }
        if (!right && rightCol && range.columns.indexOf(rightCol) < 0) {
          right = true;
        }
      }
      return { top, right, bottom, left };
    };
    CellRangeFeature2.prototype.refreshHandle = function() {
      if (!this.beans.rangeService) {
        return;
      }
      var shouldHaveSelectionHandle = this.shouldHaveSelectionHandle();
      if (this.selectionHandle && !shouldHaveSelectionHandle) {
        this.selectionHandle = this.beans.context.destroyBean(this.selectionHandle);
      }
      if (shouldHaveSelectionHandle) {
        this.addSelectionHandle();
      }
      this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_HANDLE, !!this.selectionHandle);
    };
    CellRangeFeature2.prototype.shouldHaveSelectionHandle = function() {
      var _a = this.beans, gridOptionsWrapper = _a.gridOptionsWrapper, rangeService = _a.rangeService;
      var cellRanges = rangeService.getCellRanges();
      var rangesLen = cellRanges.length;
      if (this.rangeCount < 1 || rangesLen < 1) {
        return false;
      }
      var cellRange = last(cellRanges);
      var cellPosition = this.cellCtrl.getCellPosition();
      var isFillHandleAvailable = gridOptionsWrapper.isEnableFillHandle() && !this.cellCtrl.isSuppressFillHandle();
      var isRangeHandleAvailable = gridOptionsWrapper.isEnableRangeHandle();
      var handleIsAvailable = rangesLen === 1 && !this.cellCtrl.isEditing() && (isFillHandleAvailable || isRangeHandleAvailable);
      if (this.hasChartRange) {
        var hasCategoryRange = cellRanges[0].type === exports2.CellRangeType.DIMENSION;
        var isCategoryCell = hasCategoryRange && rangeService.isCellInSpecificRange(cellPosition, cellRanges[0]);
        this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_CHART_CATEGORY, isCategoryCell);
        handleIsAvailable = cellRange.type === exports2.CellRangeType.VALUE;
      }
      return handleIsAvailable && cellRange.endRow != null && rangeService.isContiguousRange(cellRange) && rangeService.isBottomRightCell(cellRange, cellPosition);
    };
    CellRangeFeature2.prototype.addSelectionHandle = function() {
      var _a = this.beans, gridOptionsWrapper = _a.gridOptionsWrapper, rangeService = _a.rangeService;
      var cellRangeType = last(rangeService.getCellRanges()).type;
      var selectionHandleFill = gridOptionsWrapper.isEnableFillHandle() && missing(cellRangeType);
      var type = selectionHandleFill ? exports2.SelectionHandleType.FILL : exports2.SelectionHandleType.RANGE;
      if (this.selectionHandle && this.selectionHandle.getType() !== type) {
        this.selectionHandle = this.beans.context.destroyBean(this.selectionHandle);
      }
      if (!this.selectionHandle) {
        this.selectionHandle = this.beans.selectionHandleFactory.createSelectionHandle(type);
      }
      this.selectionHandle.refresh(this.cellCtrl);
    };
    CellRangeFeature2.prototype.destroy = function() {
      this.beans.context.destroyBean(this.selectionHandle);
    };
    return CellRangeFeature2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$G = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var CellPositionFeature = function(_super) {
    __extends$G(CellPositionFeature2, _super);
    function CellPositionFeature2(ctrl, beans) {
      var _this = _super.call(this) || this;
      _this.cellCtrl = ctrl;
      _this.beans = beans;
      _this.column = ctrl.getColumn();
      _this.rowNode = ctrl.getRowNode();
      _this.setupColSpan();
      _this.setupRowSpan();
      return _this;
    }
    CellPositionFeature2.prototype.setupRowSpan = function() {
      this.rowSpan = this.column.getRowSpan(this.rowNode);
    };
    CellPositionFeature2.prototype.setComp = function(comp) {
      this.cellComp = comp;
      this.onLeftChanged();
      this.onWidthChanged();
      this.applyRowSpan();
    };
    CellPositionFeature2.prototype.onDisplayColumnsChanged = function() {
      var colsSpanning = this.getColSpanningList();
      if (!areEqual(this.colsSpanning, colsSpanning)) {
        this.colsSpanning = colsSpanning;
        this.onWidthChanged();
        this.onLeftChanged();
      }
    };
    CellPositionFeature2.prototype.setupColSpan = function() {
      if (this.column.getColDef().colSpan == null) {
        return;
      }
      this.colsSpanning = this.getColSpanningList();
      this.addManagedListener(this.beans.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.onDisplayColumnsChanged.bind(this));
      this.addManagedListener(this.beans.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, this.onWidthChanged.bind(this));
    };
    CellPositionFeature2.prototype.onWidthChanged = function() {
      if (!this.cellComp) {
        return;
      }
      var width = this.getCellWidth();
      this.cellComp.setWidth(width + "px");
    };
    CellPositionFeature2.prototype.getCellWidth = function() {
      if (!this.colsSpanning) {
        return this.column.getActualWidth();
      }
      return this.colsSpanning.reduce(function(width, col) {
        return width + col.getActualWidth();
      }, 0);
    };
    CellPositionFeature2.prototype.getColSpanningList = function() {
      var colSpan = this.column.getColSpan(this.rowNode);
      var colsSpanning = [];
      if (colSpan === 1) {
        colsSpanning.push(this.column);
      } else {
        var pointer = this.column;
        var pinned = this.column.getPinned();
        for (var i2 = 0; pointer && i2 < colSpan; i2++) {
          colsSpanning.push(pointer);
          pointer = this.beans.columnModel.getDisplayedColAfter(pointer);
          if (!pointer || missing(pointer)) {
            break;
          }
          if (pinned !== pointer.getPinned()) {
            break;
          }
        }
      }
      return colsSpanning;
    };
    CellPositionFeature2.prototype.onLeftChanged = function() {
      if (!this.cellComp) {
        return;
      }
      var left = this.modifyLeftForPrintLayout(this.getCellLeft());
      this.cellComp.setLeft(left + "px");
    };
    CellPositionFeature2.prototype.getCellLeft = function() {
      var mostLeftCol;
      if (this.beans.gridOptionsWrapper.isEnableRtl() && this.colsSpanning) {
        mostLeftCol = last(this.colsSpanning);
      } else {
        mostLeftCol = this.column;
      }
      return mostLeftCol.getLeft();
    };
    CellPositionFeature2.prototype.modifyLeftForPrintLayout = function(leftPosition) {
      if (!this.cellCtrl.isPrintLayout() || this.column.getPinned() === Constants.PINNED_LEFT) {
        return leftPosition;
      }
      var leftWidth = this.beans.columnModel.getDisplayedColumnsLeftWidth();
      if (this.column.getPinned() === Constants.PINNED_RIGHT) {
        var bodyWidth = this.beans.columnModel.getBodyContainerWidth();
        return leftWidth + bodyWidth + (leftPosition || 0);
      }
      return leftWidth + (leftPosition || 0);
    };
    CellPositionFeature2.prototype.applyRowSpan = function() {
      if (this.rowSpan === 1) {
        return;
      }
      var singleRowHeight = this.beans.gridOptionsWrapper.getRowHeightAsNumber();
      var totalRowHeight = singleRowHeight * this.rowSpan;
      this.cellComp.setHeight(totalRowHeight + "px");
      this.cellComp.setZIndex("1");
    };
    CellPositionFeature2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
    };
    return CellPositionFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$H = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var CellCustomStyleFeature = function(_super) {
    __extends$H(CellCustomStyleFeature2, _super);
    function CellCustomStyleFeature2(ctrl, beans) {
      var _this = _super.call(this) || this;
      _this.cellCtrl = ctrl;
      _this.beans = beans;
      _this.column = ctrl.getColumn();
      _this.rowNode = ctrl.getRowNode();
      return _this;
    }
    CellCustomStyleFeature2.prototype.setComp = function(comp, scope) {
      this.cellComp = comp;
      this.scope = scope;
      this.applyUserStyles();
      this.applyCellClassRules();
      this.applyClassesFromColDef();
    };
    CellCustomStyleFeature2.prototype.applyCellClassRules = function() {
      var _this = this;
      var colDef = this.column.getColDef();
      var cellClassParams = {
        value: this.cellCtrl.getValue(),
        data: this.rowNode.data,
        node: this.rowNode,
        colDef,
        rowIndex: this.rowNode.rowIndex,
        api: this.beans.gridOptionsWrapper.getApi(),
        columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
        $scope: this.scope,
        context: this.beans.gridOptionsWrapper.getContext()
      };
      this.beans.stylingService.processClassRules(colDef.cellClassRules, cellClassParams, function(className) {
        return _this.cellComp.addOrRemoveCssClass(className, true);
      }, function(className) {
        return _this.cellComp.addOrRemoveCssClass(className, false);
      });
    };
    CellCustomStyleFeature2.prototype.applyUserStyles = function() {
      var colDef = this.column.getColDef();
      if (!colDef.cellStyle) {
        return;
      }
      var styles;
      if (typeof colDef.cellStyle === "function") {
        var cellStyleParams = {
          column: this.column,
          value: this.cellCtrl.getValue(),
          colDef,
          data: this.rowNode.data,
          node: this.rowNode,
          rowIndex: this.rowNode.rowIndex,
          $scope: this.scope,
          api: this.beans.gridOptionsWrapper.getApi(),
          columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
          context: this.beans.gridOptionsWrapper.getContext()
        };
        var cellStyleFunc = colDef.cellStyle;
        styles = cellStyleFunc(cellStyleParams);
      } else {
        styles = colDef.cellStyle;
      }
      this.cellComp.setUserStyles(styles);
    };
    CellCustomStyleFeature2.prototype.applyClassesFromColDef = function() {
      var _this = this;
      var colDef = this.column.getColDef();
      var cellClassParams = {
        value: this.cellCtrl.getValue(),
        data: this.rowNode.data,
        node: this.rowNode,
        colDef,
        rowIndex: this.rowNode.rowIndex,
        $scope: this.scope,
        api: this.beans.gridOptionsWrapper.getApi(),
        columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
        context: this.beans.gridOptionsWrapper.getContext()
      };
      this.beans.stylingService.processStaticCellClasses(colDef, cellClassParams, function(className) {
        return _this.cellComp.addOrRemoveCssClass(className, true);
      });
    };
    CellCustomStyleFeature2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
    };
    return CellCustomStyleFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$I = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var TooltipFeature = function(_super) {
    __extends$I(TooltipFeature2, _super);
    function TooltipFeature2(ctrl, beans) {
      var _this = _super.call(this) || this;
      _this.ctrl = ctrl;
      _this.beans = beans;
      return _this;
    }
    TooltipFeature2.prototype.setComp = function(comp) {
      this.comp = comp;
      this.setupTooltip();
    };
    TooltipFeature2.prototype.setupTooltip = function() {
      this.browserTooltips = this.beans.gridOptionsWrapper.isEnableBrowserTooltips();
      this.updateTooltipText();
      if (this.browserTooltips) {
        this.comp.setTitle(this.tooltipSanatised != null ? this.tooltipSanatised : void 0);
      } else {
        this.createTooltipFeatureIfNeeded();
      }
    };
    TooltipFeature2.prototype.updateTooltipText = function() {
      this.tooltip = this.ctrl.getTooltipValue();
      this.tooltipSanatised = escapeString(this.tooltip);
    };
    TooltipFeature2.prototype.createTooltipFeatureIfNeeded = function() {
      var _this = this;
      if (this.genericTooltipFeature != null) {
        return;
      }
      var parent = {
        getTooltipParams: function() {
          return _this.getTooltipParams();
        },
        getGui: function() {
          return _this.ctrl.getGui();
        }
      };
      this.genericTooltipFeature = this.createManagedBean(new CustomTooltipFeature(parent), this.beans.context);
    };
    TooltipFeature2.prototype.refreshToolTip = function() {
      this.updateTooltipText();
      if (this.browserTooltips) {
        this.comp.setTitle(this.tooltipSanatised != null ? this.tooltipSanatised : void 0);
      }
    };
    TooltipFeature2.prototype.getTooltipParams = function() {
      var ctrl = this.ctrl;
      var column = ctrl.getColumn ? ctrl.getColumn() : void 0;
      var colDef = ctrl.getColDef ? ctrl.getColDef() : void 0;
      var rowNode = ctrl.getRowNode ? ctrl.getRowNode() : void 0;
      return {
        location: ctrl.getLocation(),
        colDef,
        column,
        rowIndex: ctrl.getRowIndex ? ctrl.getRowIndex() : void 0,
        node: rowNode,
        data: rowNode ? rowNode.data : void 0,
        value: this.getTooltipText(),
        valueFormatted: ctrl.getValueFormatted ? ctrl.getValueFormatted() : void 0
      };
    };
    TooltipFeature2.prototype.getTooltipText = function() {
      return this.tooltip;
    };
    TooltipFeature2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
    };
    return TooltipFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __decorate$C = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var Beans = function() {
    function Beans2() {
    }
    Beans2.prototype.postConstruct = function() {
      this.doingMasterDetail = this.gridOptionsWrapper.isMasterDetail();
      if (this.gridOptionsWrapper.isRowModelDefault()) {
        this.clientSideRowModel = this.rowModel;
      }
      if (this.gridOptionsWrapper.isRowModelServerSide()) {
        this.serverSideRowModel = this.rowModel;
      }
    };
    __decorate$C([
      Autowired("resizeObserverService")
    ], Beans2.prototype, "resizeObserverService", void 0);
    __decorate$C([
      Autowired("paginationProxy")
    ], Beans2.prototype, "paginationProxy", void 0);
    __decorate$C([
      Autowired("context")
    ], Beans2.prototype, "context", void 0);
    __decorate$C([
      Autowired("columnApi")
    ], Beans2.prototype, "columnApi", void 0);
    __decorate$C([
      Autowired("gridApi")
    ], Beans2.prototype, "gridApi", void 0);
    __decorate$C([
      Autowired("gridOptionsWrapper")
    ], Beans2.prototype, "gridOptionsWrapper", void 0);
    __decorate$C([
      Autowired("expressionService")
    ], Beans2.prototype, "expressionService", void 0);
    __decorate$C([
      Autowired("rowRenderer")
    ], Beans2.prototype, "rowRenderer", void 0);
    __decorate$C([
      Autowired("$compile")
    ], Beans2.prototype, "$compile", void 0);
    __decorate$C([
      Autowired("templateService")
    ], Beans2.prototype, "templateService", void 0);
    __decorate$C([
      Autowired("valueService")
    ], Beans2.prototype, "valueService", void 0);
    __decorate$C([
      Autowired("eventService")
    ], Beans2.prototype, "eventService", void 0);
    __decorate$C([
      Autowired("columnModel")
    ], Beans2.prototype, "columnModel", void 0);
    __decorate$C([
      Autowired("headerNavigationService")
    ], Beans2.prototype, "headerNavigationService", void 0);
    __decorate$C([
      Autowired("navigationService")
    ], Beans2.prototype, "navigationService", void 0);
    __decorate$C([
      Autowired("columnAnimationService")
    ], Beans2.prototype, "columnAnimationService", void 0);
    __decorate$C([
      Optional("rangeService")
    ], Beans2.prototype, "rangeService", void 0);
    __decorate$C([
      Autowired("focusService")
    ], Beans2.prototype, "focusService", void 0);
    __decorate$C([
      Optional("contextMenuFactory")
    ], Beans2.prototype, "contextMenuFactory", void 0);
    __decorate$C([
      Autowired("popupService")
    ], Beans2.prototype, "popupService", void 0);
    __decorate$C([
      Autowired("valueFormatterService")
    ], Beans2.prototype, "valueFormatterService", void 0);
    __decorate$C([
      Autowired("stylingService")
    ], Beans2.prototype, "stylingService", void 0);
    __decorate$C([
      Autowired("columnHoverService")
    ], Beans2.prototype, "columnHoverService", void 0);
    __decorate$C([
      Autowired("userComponentFactory")
    ], Beans2.prototype, "userComponentFactory", void 0);
    __decorate$C([
      Autowired("userComponentRegistry")
    ], Beans2.prototype, "userComponentRegistry", void 0);
    __decorate$C([
      Autowired("animationFrameService")
    ], Beans2.prototype, "animationFrameService", void 0);
    __decorate$C([
      Autowired("dragAndDropService")
    ], Beans2.prototype, "dragAndDropService", void 0);
    __decorate$C([
      Autowired("sortController")
    ], Beans2.prototype, "sortController", void 0);
    __decorate$C([
      Autowired("filterManager")
    ], Beans2.prototype, "filterManager", void 0);
    __decorate$C([
      Autowired("rowContainerHeightService")
    ], Beans2.prototype, "rowContainerHeightService", void 0);
    __decorate$C([
      Autowired("frameworkOverrides")
    ], Beans2.prototype, "frameworkOverrides", void 0);
    __decorate$C([
      Autowired("cellPositionUtils")
    ], Beans2.prototype, "cellPositionUtils", void 0);
    __decorate$C([
      Autowired("rowPositionUtils")
    ], Beans2.prototype, "rowPositionUtils", void 0);
    __decorate$C([
      Autowired("selectionService")
    ], Beans2.prototype, "selectionService", void 0);
    __decorate$C([
      Optional("selectionHandleFactory")
    ], Beans2.prototype, "selectionHandleFactory", void 0);
    __decorate$C([
      Autowired("rowCssClassCalculator")
    ], Beans2.prototype, "rowCssClassCalculator", void 0);
    __decorate$C([
      Autowired("rowModel")
    ], Beans2.prototype, "rowModel", void 0);
    __decorate$C([
      Autowired("ctrlsService")
    ], Beans2.prototype, "ctrlsService", void 0);
    __decorate$C([
      Autowired("ctrlsFactory")
    ], Beans2.prototype, "ctrlsFactory", void 0);
    __decorate$C([
      Autowired("agStackComponentsRegistry")
    ], Beans2.prototype, "agStackComponentsRegistry", void 0);
    __decorate$C([
      Autowired("valueCache")
    ], Beans2.prototype, "valueCache", void 0);
    __decorate$C([
      Autowired("rowNodeEventThrottle")
    ], Beans2.prototype, "rowNodeEventThrottle", void 0);
    __decorate$C([
      PostConstruct
    ], Beans2.prototype, "postConstruct", null);
    Beans2 = __decorate$C([
      Bean("beans")
    ], Beans2);
    return Beans2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$J = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var CellMouseListenerFeature = function(_super) {
    __extends$J(CellMouseListenerFeature2, _super);
    function CellMouseListenerFeature2(ctrl, beans, column) {
      var _this = _super.call(this) || this;
      _this.cellCtrl = ctrl;
      _this.beans = beans;
      _this.column = column;
      return _this;
    }
    CellMouseListenerFeature2.prototype.onMouseEvent = function(eventName, mouseEvent) {
      if (isStopPropagationForAgGrid(mouseEvent)) {
        return;
      }
      switch (eventName) {
        case "click":
          this.onCellClicked(mouseEvent);
          break;
        case "mousedown":
        case "touchstart":
          this.onMouseDown(mouseEvent);
          break;
        case "dblclick":
          this.onCellDoubleClicked(mouseEvent);
          break;
        case "mouseout":
          this.onMouseOut(mouseEvent);
          break;
        case "mouseover":
          this.onMouseOver(mouseEvent);
          break;
      }
    };
    CellMouseListenerFeature2.prototype.onCellClicked = function(mouseEvent) {
      if (this.isDoubleClickOnIPad()) {
        this.onCellDoubleClicked(mouseEvent);
        mouseEvent.preventDefault();
        return;
      }
      var _a = this.beans, eventService = _a.eventService, gridOptionsWrapper = _a.gridOptionsWrapper;
      var cellClickedEvent = this.cellCtrl.createEvent(mouseEvent, Events.EVENT_CELL_CLICKED);
      eventService.dispatchEvent(cellClickedEvent);
      var colDef = this.column.getColDef();
      if (colDef.onCellClicked) {
        window.setTimeout(function() {
          return colDef.onCellClicked(cellClickedEvent);
        }, 0);
      }
      var editOnSingleClick = (gridOptionsWrapper.isSingleClickEdit() || colDef.singleClickEdit) && !gridOptionsWrapper.isSuppressClickEdit();
      if (editOnSingleClick) {
        this.cellCtrl.startRowOrCellEdit();
      }
    };
    CellMouseListenerFeature2.prototype.isDoubleClickOnIPad = function() {
      if (!isIOSUserAgent() || isEventSupported("dblclick")) {
        return false;
      }
      var nowMillis = new Date().getTime();
      var res = nowMillis - this.lastIPadMouseClickEvent < 200;
      this.lastIPadMouseClickEvent = nowMillis;
      return res;
    };
    CellMouseListenerFeature2.prototype.onCellDoubleClicked = function(mouseEvent) {
      var colDef = this.column.getColDef();
      var cellDoubleClickedEvent = this.cellCtrl.createEvent(mouseEvent, Events.EVENT_CELL_DOUBLE_CLICKED);
      this.beans.eventService.dispatchEvent(cellDoubleClickedEvent);
      if (typeof colDef.onCellDoubleClicked === "function") {
        window.setTimeout(function() {
          return colDef.onCellDoubleClicked(cellDoubleClickedEvent);
        }, 0);
      }
      var editOnDoubleClick = !this.beans.gridOptionsWrapper.isSingleClickEdit() && !this.beans.gridOptionsWrapper.isSuppressClickEdit();
      if (editOnDoubleClick) {
        this.cellCtrl.startRowOrCellEdit();
      }
    };
    CellMouseListenerFeature2.prototype.onMouseDown = function(mouseEvent) {
      var ctrlKey = mouseEvent.ctrlKey, metaKey = mouseEvent.metaKey, shiftKey = mouseEvent.shiftKey;
      var target = mouseEvent.target;
      var _a = this.beans, eventService = _a.eventService, rangeService = _a.rangeService;
      if (this.isRightClickInExistingRange(mouseEvent)) {
        return;
      }
      var ranges = rangeService && rangeService.getCellRanges().length != 0;
      if (!shiftKey || !ranges) {
        var forceBrowserFocus = (isBrowserIE() || isBrowserEdge()) && !this.cellCtrl.isEditing() && !isFocusableFormField(target);
        this.cellCtrl.focusCell(forceBrowserFocus);
      }
      if (shiftKey && ranges) {
        mouseEvent.preventDefault();
      }
      if (this.containsWidget(target)) {
        return;
      }
      if (rangeService) {
        var thisCell = this.cellCtrl.getCellPosition();
        if (shiftKey) {
          rangeService.extendLatestRangeToCell(thisCell);
        } else {
          var ctrlKeyPressed = ctrlKey || metaKey;
          rangeService.setRangeToCell(thisCell, ctrlKeyPressed);
        }
      }
      eventService.dispatchEvent(this.cellCtrl.createEvent(mouseEvent, Events.EVENT_CELL_MOUSE_DOWN));
    };
    CellMouseListenerFeature2.prototype.isRightClickInExistingRange = function(mouseEvent) {
      var rangeService = this.beans.rangeService;
      if (rangeService) {
        var cellInRange = rangeService.isCellInAnyRange(this.cellCtrl.getCellPosition());
        if (cellInRange && mouseEvent.button === 2) {
          return true;
        }
      }
      return false;
    };
    CellMouseListenerFeature2.prototype.containsWidget = function(target) {
      return isElementChildOfClass(target, "ag-selection-checkbox", 3);
    };
    CellMouseListenerFeature2.prototype.onMouseOut = function(mouseEvent) {
      if (this.mouseStayingInsideCell(mouseEvent)) {
        return;
      }
      var cellMouseOutEvent = this.cellCtrl.createEvent(mouseEvent, Events.EVENT_CELL_MOUSE_OUT);
      this.beans.eventService.dispatchEvent(cellMouseOutEvent);
      this.beans.columnHoverService.clearMouseOver();
    };
    CellMouseListenerFeature2.prototype.onMouseOver = function(mouseEvent) {
      if (this.mouseStayingInsideCell(mouseEvent)) {
        return;
      }
      var cellMouseOverEvent = this.cellCtrl.createEvent(mouseEvent, Events.EVENT_CELL_MOUSE_OVER);
      this.beans.eventService.dispatchEvent(cellMouseOverEvent);
      this.beans.columnHoverService.setMouseOver([this.column]);
    };
    CellMouseListenerFeature2.prototype.mouseStayingInsideCell = function(e) {
      if (!e.target || !e.relatedTarget) {
        return false;
      }
      var eGui = this.cellCtrl.getGui();
      var cellContainsTarget = eGui.contains(e.target);
      var cellContainsRelatedTarget = eGui.contains(e.relatedTarget);
      return cellContainsTarget && cellContainsRelatedTarget;
    };
    CellMouseListenerFeature2.prototype.destroy = function() {
    };
    return CellMouseListenerFeature2;
  }(Beans);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$K = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var CellKeyboardListenerFeature = function(_super) {
    __extends$K(CellKeyboardListenerFeature2, _super);
    function CellKeyboardListenerFeature2(ctrl, beans, column, rowNode, scope, rowCtrl) {
      var _this = _super.call(this) || this;
      _this.cellCtrl = ctrl;
      _this.beans = beans;
      _this.column = column;
      _this.rowNode = rowNode;
      _this.rowCtrl = rowCtrl;
      return _this;
    }
    CellKeyboardListenerFeature2.prototype.setComp = function(eGui) {
      this.eGui = eGui;
    };
    CellKeyboardListenerFeature2.prototype.onKeyDown = function(event) {
      var key = event.which || event.keyCode;
      switch (key) {
        case KeyCode.ENTER:
          this.onEnterKeyDown(event);
          break;
        case KeyCode.F2:
          this.onF2KeyDown();
          break;
        case KeyCode.ESCAPE:
          this.onEscapeKeyDown();
          break;
        case KeyCode.TAB:
          this.onTabKeyDown(event);
          break;
        case KeyCode.BACKSPACE:
        case KeyCode.DELETE:
          this.onBackspaceOrDeleteKeyPressed(key);
          break;
        case KeyCode.DOWN:
        case KeyCode.UP:
        case KeyCode.RIGHT:
        case KeyCode.LEFT:
          this.onNavigationKeyPressed(event, key);
          break;
      }
    };
    CellKeyboardListenerFeature2.prototype.onNavigationKeyPressed = function(event, key) {
      if (this.cellCtrl.isEditing()) {
        return;
      }
      if (event.shiftKey && this.cellCtrl.isRangeSelectionEnabled()) {
        this.onShiftRangeSelect(key);
      } else {
        this.beans.navigationService.navigateToNextCell(event, key, this.cellCtrl.getCellPosition(), true);
      }
      event.preventDefault();
    };
    CellKeyboardListenerFeature2.prototype.onShiftRangeSelect = function(key) {
      if (!this.beans.rangeService) {
        return;
      }
      var endCell = this.beans.rangeService.extendLatestRangeInDirection(key);
      if (endCell) {
        this.beans.navigationService.ensureCellVisible(endCell);
      }
    };
    CellKeyboardListenerFeature2.prototype.onTabKeyDown = function(event) {
      this.beans.navigationService.onTabKeyDown(this.cellCtrl, event);
    };
    CellKeyboardListenerFeature2.prototype.onBackspaceOrDeleteKeyPressed = function(key) {
      if (!this.cellCtrl.isEditing()) {
        this.cellCtrl.startRowOrCellEdit(key);
      }
    };
    CellKeyboardListenerFeature2.prototype.onEnterKeyDown = function(e) {
      if (this.cellCtrl.isEditing() || this.rowCtrl.isEditing()) {
        this.cellCtrl.stopEditingAndFocus();
      } else {
        if (this.beans.gridOptionsWrapper.isEnterMovesDown()) {
          this.beans.navigationService.navigateToNextCell(null, KeyCode.DOWN, this.cellCtrl.getCellPosition(), false);
        } else {
          this.cellCtrl.startRowOrCellEdit(KeyCode.ENTER);
          if (this.cellCtrl.isEditing()) {
            e.preventDefault();
          }
        }
      }
    };
    CellKeyboardListenerFeature2.prototype.onF2KeyDown = function() {
      if (!this.cellCtrl.isEditing()) {
        this.cellCtrl.startRowOrCellEdit(KeyCode.F2);
      }
    };
    CellKeyboardListenerFeature2.prototype.onEscapeKeyDown = function() {
      if (this.cellCtrl.isEditing()) {
        this.cellCtrl.stopRowOrCellEdit(true);
        this.cellCtrl.focusCell(true);
      }
    };
    CellKeyboardListenerFeature2.prototype.onKeyPress = function(event) {
      var eventTarget = getTarget(event);
      var eventOnChildComponent = eventTarget !== this.eGui;
      if (eventOnChildComponent || this.cellCtrl.isEditing()) {
        return;
      }
      var pressedChar = String.fromCharCode(event.charCode);
      if (pressedChar === " ") {
        this.onSpaceKeyPressed(event);
      } else if (isEventFromPrintableCharacter(event)) {
        this.cellCtrl.startRowOrCellEdit(null, pressedChar);
        event.preventDefault();
      }
    };
    CellKeyboardListenerFeature2.prototype.onSpaceKeyPressed = function(event) {
      var gridOptionsWrapper = this.beans.gridOptionsWrapper;
      if (!this.cellCtrl.isEditing() && gridOptionsWrapper.isRowSelection()) {
        var currentSelection = this.rowNode.isSelected();
        var newSelection = !currentSelection;
        if (newSelection || !gridOptionsWrapper.isSuppressRowDeselection()) {
          var groupSelectsFiltered = this.beans.gridOptionsWrapper.isGroupSelectsFiltered();
          var updatedCount = this.rowNode.setSelectedParams({
            newValue: newSelection,
            rangeSelect: event.shiftKey,
            groupSelectsFiltered
          });
          if (currentSelection === void 0 && updatedCount === 0) {
            this.rowNode.setSelectedParams({
              newValue: false,
              rangeSelect: event.shiftKey,
              groupSelectsFiltered
            });
          }
        }
      }
      event.preventDefault();
    };
    CellKeyboardListenerFeature2.prototype.destroy = function() {
    };
    return CellKeyboardListenerFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$L = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$D = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var DndSourceComp = function(_super) {
    __extends$L(DndSourceComp2, _super);
    function DndSourceComp2(rowNode, column, beans, eCell) {
      var _this = _super.call(this, '<div class="ag-drag-handle ag-row-drag" draggable="true"></div>') || this;
      _this.rowNode = rowNode;
      _this.column = column;
      _this.beans = beans;
      _this.eCell = eCell;
      return _this;
    }
    DndSourceComp2.prototype.postConstruct = function() {
      var eGui = this.getGui();
      eGui.appendChild(createIconNoSpan("rowDrag", this.beans.gridOptionsWrapper, null));
      this.addGuiEventListener("mousedown", function(e) {
        e.stopPropagation();
      });
      this.addDragSource();
      this.checkVisibility();
    };
    DndSourceComp2.prototype.addDragSource = function() {
      this.addGuiEventListener("dragstart", this.onDragStart.bind(this));
    };
    DndSourceComp2.prototype.onDragStart = function(dragEvent) {
      var _this = this;
      var providedOnRowDrag = this.column.getColDef().dndSourceOnRowDrag;
      var isIE2 = isBrowserIE();
      if (!isIE2) {
        dragEvent.dataTransfer.setDragImage(this.eCell, 0, 0);
      }
      var defaultOnRowDrag = function() {
        try {
          var jsonData = JSON.stringify(_this.rowNode.data);
          if (isIE2) {
            dragEvent.dataTransfer.setData("text", jsonData);
          } else {
            dragEvent.dataTransfer.setData("application/json", jsonData);
            dragEvent.dataTransfer.setData("text/plain", jsonData);
          }
        } catch (e) {
        }
      };
      if (providedOnRowDrag) {
        providedOnRowDrag({ rowNode: this.rowNode, dragEvent });
      } else {
        defaultOnRowDrag();
      }
    };
    DndSourceComp2.prototype.checkVisibility = function() {
      var visible = this.column.isDndSource(this.rowNode);
      this.setDisplayed(visible);
    };
    __decorate$D([
      PostConstruct
    ], DndSourceComp2.prototype, "postConstruct", null);
    return DndSourceComp2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$M = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __assign$6 = function() {
    __assign$6 = Object.assign || function(t) {
      for (var s, i2 = 1, n = arguments.length; i2 < n; i2++) {
        s = arguments[i2];
        for (var p2 in s)
          if (Object.prototype.hasOwnProperty.call(s, p2))
            t[p2] = s[p2];
      }
      return t;
    };
    return __assign$6.apply(this, arguments);
  };
  var CSS_CELL = "ag-cell";
  var CSS_NORMAL_HEIGHT = "ag-cell-normal-height";
  var CSS_CELL_FOCUS = "ag-cell-focus";
  var CSS_CELL_FIRST_RIGHT_PINNED = "ag-cell-first-right-pinned";
  var CSS_CELL_LAST_LEFT_PINNED = "ag-cell-last-left-pinned";
  var CSS_CELL_NOT_INLINE_EDITING = "ag-cell-not-inline-editing";
  var CSS_CELL_INLINE_EDITING = "ag-cell-inline-editing";
  var CSS_CELL_POPUP_EDITING = "ag-cell-popup-editing";
  var CSS_COLUMN_HOVER = "ag-column-hover";
  var CSS_CELL_WRAP_TEXT = "ag-cell-wrap-text";
  var instanceIdSequence$1 = 0;
  var CellCtrl = function(_super) {
    __extends$M(CellCtrl2, _super);
    function CellCtrl2(column, rowNode, beans, rowCtrl) {
      var _this = _super.call(this) || this;
      _this.suppressRefreshCell = false;
      _this.column = column;
      _this.rowNode = rowNode;
      _this.beans = beans;
      _this.rowCtrl = rowCtrl;
      _this.instanceId = column.getId() + "-" + instanceIdSequence$1++;
      _this.createCellPosition();
      _this.addFeatures();
      return _this;
    }
    CellCtrl2.prototype.addFeatures = function() {
      var _this = this;
      this.cellPositionFeature = new CellPositionFeature(this, this.beans);
      this.addDestroyFunc(function() {
        return _this.cellPositionFeature.destroy();
      });
      this.cellCustomStyleFeature = new CellCustomStyleFeature(this, this.beans);
      this.addDestroyFunc(function() {
        return _this.cellCustomStyleFeature.destroy();
      });
      this.cellMouseListenerFeature = new CellMouseListenerFeature(this, this.beans, this.column);
      this.addDestroyFunc(function() {
        return _this.cellMouseListenerFeature.destroy();
      });
      this.cellKeyboardListenerFeature = new CellKeyboardListenerFeature(this, this.beans, this.column, this.rowNode, this.scope, this.rowCtrl);
      this.addDestroyFunc(function() {
        return _this.cellKeyboardListenerFeature.destroy();
      });
      var rangeSelectionEnabled = this.beans.rangeService && this.beans.gridOptionsWrapper.isEnableRangeSelection();
      if (rangeSelectionEnabled) {
        this.cellRangeFeature = new CellRangeFeature(this.beans, this);
        this.addDestroyFunc(function() {
          return _this.cellRangeFeature.destroy();
        });
      }
      this.addTooltipFeature();
    };
    CellCtrl2.prototype.addTooltipFeature = function() {
      var _this = this;
      var getTooltipValue = function() {
        var colDef = _this.column.getColDef();
        var data = _this.rowNode.data;
        if (colDef.tooltipField && exists(data)) {
          return getValueUsingField(data, colDef.tooltipField, _this.column.isTooltipFieldContainsDots());
        }
        var valueGetter = colDef.tooltipValueGetter;
        if (valueGetter) {
          return valueGetter({
            location: "cell",
            api: _this.beans.gridOptionsWrapper.getApi(),
            columnApi: _this.beans.gridOptionsWrapper.getColumnApi(),
            context: _this.beans.gridOptionsWrapper.getContext(),
            colDef: _this.column.getColDef(),
            column: _this.column,
            rowIndex: _this.cellPosition.rowIndex,
            node: _this.rowNode,
            data: _this.rowNode.data,
            value: _this.value,
            valueFormatted: _this.valueFormatted
          });
        }
        return null;
      };
      var tooltipCtrl = {
        getColumn: function() {
          return _this.column;
        },
        getColDef: function() {
          return _this.column.getColDef();
        },
        getRowIndex: function() {
          return _this.cellPosition.rowIndex;
        },
        getRowNode: function() {
          return _this.rowNode;
        },
        getGui: function() {
          return _this.getGui();
        },
        getLocation: function() {
          return "cell";
        },
        getTooltipValue,
        getValueFormatted: function() {
          return _this.valueFormatted;
        }
      };
      this.tooltipFeature = new TooltipFeature(tooltipCtrl, this.beans);
      this.addDestroyFunc(function() {
        return _this.tooltipFeature.destroy();
      });
    };
    CellCtrl2.prototype.setComp = function(comp, scope, eGui, printLayout, startEditing) {
      var _this = this;
      this.cellComp = comp;
      this.gow = this.beans.gridOptionsWrapper;
      this.scope = scope;
      this.eGui = eGui;
      this.printLayout = printLayout;
      this.updateAndFormatValue(true);
      this.addDomData();
      this.onCellFocused();
      this.applyStaticCssClasses();
      this.setWrapText();
      this.onFirstRightPinnedChanged();
      this.onLastLeftPinnedChanged();
      this.onColumnHover();
      this.setupControlComps();
      this.setupAriaExpanded();
      var colIdSanitised = escapeString(this.column.getId());
      var ariaColIndex = this.beans.columnModel.getAriaColumnIndex(this.column);
      this.cellComp.setTabIndex(-1);
      this.cellComp.setRole("gridcell");
      this.cellComp.setAriaColIndex(ariaColIndex);
      this.cellComp.setColId(colIdSanitised);
      this.cellComp.setUnselectable(!this.beans.gridOptionsWrapper.isEnableCellTextSelection() ? "on" : null);
      this.cellPositionFeature.setComp(comp);
      this.cellCustomStyleFeature.setComp(comp, scope);
      this.tooltipFeature.setComp(comp);
      this.cellKeyboardListenerFeature.setComp(this.eGui);
      if (this.cellRangeFeature) {
        this.cellRangeFeature.setComp(comp);
      }
      if (startEditing && this.isCellEditable()) {
        this.startEditing();
      } else {
        this.showValue();
      }
      this.addDestroyFunc(function() {
        _this.destroyAutoHeight && _this.destroyAutoHeight();
      });
    };
    CellCtrl2.prototype.setupAutoHeight = function(eParentOfValue) {
      var _this = this;
      if (!this.column.getColDef().autoHeight) {
        return;
      }
      if (this.autoHeightElement == eParentOfValue) {
        return;
      }
      if (this.destroyAutoHeight) {
        this.destroyAutoHeight();
      }
      this.autoHeightElement = eParentOfValue;
      if (!eParentOfValue) {
        return;
      }
      var measureHeight = function(timesCalled) {
        var doc = _this.beans.gridOptionsWrapper.getDocument();
        if (!doc || !doc.contains(eParentOfValue)) {
          if (timesCalled < 5) {
            _this.beans.frameworkOverrides.setTimeout(function() {
              return measureHeight(timesCalled++);
            }, 0);
            return;
          }
        }
        var newHeight = eParentOfValue.offsetHeight;
        _this.rowNode.setRowAutoHeight(newHeight, _this.column);
      };
      var listener = function() {
        measureHeight(0);
      };
      listener();
      var destroyResizeObserver = this.beans.resizeObserverService.observeResize(eParentOfValue, listener);
      this.destroyAutoHeight = function() {
        destroyResizeObserver();
        _this.rowNode.setRowAutoHeight(void 0, _this.column);
      };
    };
    CellCtrl2.prototype.getInstanceId = function() {
      return this.instanceId;
    };
    CellCtrl2.prototype.showValue = function(forceNewCellRendererInstance) {
      if (forceNewCellRendererInstance === void 0) {
        forceNewCellRendererInstance = false;
      }
      var valueToDisplay = this.valueFormatted != null ? this.valueFormatted : this.value;
      var params2 = this.createCellRendererParams();
      var compDetails = this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(), params2);
      this.cellComp.setRenderDetails(compDetails, valueToDisplay, forceNewCellRendererInstance);
      this.refreshHandle();
    };
    CellCtrl2.prototype.setupControlComps = function() {
      var colDef = this.column.getColDef();
      this.includeSelection = this.isIncludeControl(colDef.checkboxSelection);
      this.includeRowDrag = this.isIncludeControl(colDef.rowDrag);
      this.includeDndSource = this.isIncludeControl(colDef.dndSource);
      var forceWrapper = this.beans.gridOptionsWrapper.isEnableCellTextSelection() || this.column.getColDef().autoHeight == true;
      this.cellComp.setIncludeSelection(this.includeSelection);
      this.cellComp.setIncludeDndSource(this.includeDndSource);
      this.cellComp.setIncludeRowDrag(this.includeRowDrag);
      this.cellComp.setForceWrapper(forceWrapper);
    };
    CellCtrl2.prototype.isIncludeControl = function(value) {
      var rowNodePinned = this.rowNode.rowPinned != null;
      var isFunc = typeof value === "function";
      var res = rowNodePinned ? false : isFunc || value === true;
      return res;
    };
    CellCtrl2.prototype.setupAriaExpanded = function() {
      var _this = this;
      var colDef = this.column.getColDef();
      if (!this.rowNode.isExpandable()) {
        return;
      }
      var showRowGroup = colDef.showRowGroup;
      var rowGroupColumn = this.rowNode.rowGroupColumn;
      var showingAllGroups = showRowGroup === true;
      var showingThisGroup = rowGroupColumn && rowGroupColumn.getColId() === showRowGroup;
      var colMatches = showingAllGroups || showingThisGroup;
      if (!colMatches) {
        return;
      }
      var listener = function() {
        _this.cellComp.setAriaExpanded(!!_this.rowNode.expanded);
      };
      this.addManagedListener(this.rowNode, RowNode.EVENT_EXPANDED_CHANGED, listener);
      listener();
    };
    CellCtrl2.prototype.refreshShouldDestroy = function() {
      var colDef = this.column.getColDef();
      var selectionChanged = this.includeSelection != this.isIncludeControl(colDef.checkboxSelection);
      var rowDragChanged = this.includeRowDrag != this.isIncludeControl(colDef.rowDrag);
      var dndSourceChanged = this.includeDndSource != this.isIncludeControl(colDef.dndSource);
      return selectionChanged || rowDragChanged || dndSourceChanged;
    };
    CellCtrl2.prototype.startEditing = function(keyPress, charPress, cellStartedEdit) {
      if (keyPress === void 0) {
        keyPress = null;
      }
      if (charPress === void 0) {
        charPress = null;
      }
      if (cellStartedEdit === void 0) {
        cellStartedEdit = false;
      }
      if (!this.isCellEditable() || this.editing) {
        return;
      }
      var editorParams = this.createCellEditorParams(keyPress, charPress, cellStartedEdit);
      var colDef = this.column.getColDef();
      var compDetails = this.beans.userComponentFactory.getCellEditorDetails(colDef, editorParams);
      var popup = !!colDef.cellEditorPopup;
      var position = colDef.cellEditorPopupPosition;
      this.setEditing(true, popup);
      this.cellComp.setEditDetails(compDetails, popup, position);
      var event = this.createEvent(null, Events.EVENT_CELL_EDITING_STARTED);
      this.beans.eventService.dispatchEvent(event);
    };
    CellCtrl2.prototype.setEditing = function(editing, inPopup) {
      if (inPopup === void 0) {
        inPopup = false;
      }
      if (this.editing === editing) {
        return;
      }
      this.editing = editing;
      this.editingInPopup = inPopup;
      this.setInlineEditingClass();
      if (!editing) {
        this.cellComp.setEditDetails();
      }
    };
    CellCtrl2.prototype.stopRowOrCellEdit = function(cancel) {
      if (cancel === void 0) {
        cancel = false;
      }
      if (this.beans.gridOptionsWrapper.isFullRowEdit()) {
        this.rowCtrl.stopRowEditing(cancel);
      } else {
        this.stopEditing(cancel);
      }
    };
    CellCtrl2.prototype.onPopupEditorClosed = function() {
      if (!this.isEditing()) {
        return;
      }
      this.stopEditingAndFocus();
    };
    CellCtrl2.prototype.takeValueFromCellEditor = function(cancel) {
      var noValueResult = { newValueExists: false };
      if (cancel) {
        return noValueResult;
      }
      var cellEditor = this.cellComp.getCellEditor();
      if (!cellEditor) {
        return noValueResult;
      }
      var userWantsToCancel = cellEditor.isCancelAfterEnd && cellEditor.isCancelAfterEnd();
      if (userWantsToCancel) {
        return noValueResult;
      }
      var newValue = cellEditor.getValue();
      return {
        newValue,
        newValueExists: true
      };
    };
    CellCtrl2.prototype.saveNewValue = function(oldValue, newValue) {
      if (newValue !== oldValue) {
        this.suppressRefreshCell = true;
        this.rowNode.setDataValue(this.column, newValue);
        this.suppressRefreshCell = false;
      }
    };
    CellCtrl2.prototype.stopEditing = function(cancel) {
      if (cancel === void 0) {
        cancel = false;
      }
      if (!this.editing) {
        return;
      }
      var _a = this.takeValueFromCellEditor(cancel), newValue = _a.newValue, newValueExists = _a.newValueExists;
      var oldValue = this.getValueFromValueService();
      if (newValueExists) {
        this.saveNewValue(oldValue, newValue);
      }
      this.setEditing(false);
      this.updateAndFormatValue();
      this.refreshCell({ forceRefresh: true, suppressFlash: true });
      this.dispatchEditingStoppedEvent(oldValue, newValue);
    };
    CellCtrl2.prototype.dispatchEditingStoppedEvent = function(oldValue, newValue) {
      var editingStoppedEvent = __assign$6(__assign$6({}, this.createEvent(null, Events.EVENT_CELL_EDITING_STOPPED)), {
        oldValue,
        newValue
      });
      this.beans.eventService.dispatchEvent(editingStoppedEvent);
    };
    CellCtrl2.prototype.setInlineEditingClass = function() {
      if (!this.isAlive()) {
        return;
      }
      var editingInline = this.editing && !this.editingInPopup;
      var popupEditorShowing = this.editing && this.editingInPopup;
      this.cellComp.addOrRemoveCssClass(CSS_CELL_INLINE_EDITING, editingInline);
      this.cellComp.addOrRemoveCssClass(CSS_CELL_NOT_INLINE_EDITING, !editingInline);
      this.cellComp.addOrRemoveCssClass(CSS_CELL_POPUP_EDITING, popupEditorShowing);
      this.rowCtrl.setInlineEditingCss(this.editing);
    };
    CellCtrl2.prototype.hackSayEditingInPopup = function() {
      if (this.editingInPopup) {
        return;
      }
      this.editingInPopup = true;
      this.setInlineEditingClass();
    };
    CellCtrl2.prototype.createCellEditorParams = function(keyPress, charPress, cellStartedEdit) {
      var res = {
        value: this.getValueFromValueService(),
        keyPress,
        charPress,
        column: this.column,
        colDef: this.column.getColDef(),
        rowIndex: this.getCellPosition().rowIndex,
        node: this.rowNode,
        data: this.rowNode.data,
        api: this.beans.gridOptionsWrapper.getApi(),
        cellStartedEdit,
        columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
        context: this.beans.gridOptionsWrapper.getContext(),
        onKeyDown: this.onKeyDown.bind(this),
        stopEditing: this.stopEditingAndFocus.bind(this),
        eGridCell: this.getGui(),
        parseValue: this.parseValue.bind(this),
        formatValue: this.formatValue.bind(this)
      };
      if (this.scope) {
        res.$scope = this.scope;
      }
      return res;
    };
    CellCtrl2.prototype.createCellRendererParams = function() {
      var _this = this;
      var addRowCompListener = function(eventType, listener) {
        console.warn("AG Grid: since AG Grid v26, params.addRowCompListener() is deprecated. If you need this functionality, please contact AG Grid support and advise why so that we can revert with an appropriate workaround, as we dont have any valid use cases for it. This method was originally provided as a work around to know when cells were destroyed in AG Grid before custom Cell Renderers could be provided.");
        _this.rowCtrl.addEventListener(eventType, listener);
      };
      var res = {
        value: this.value,
        valueFormatted: this.valueFormatted,
        getValue: this.getValueFromValueService.bind(this),
        setValue: function(value) {
          return _this.beans.valueService.setValue(_this.rowNode, _this.column, value);
        },
        formatValue: this.formatValue.bind(this),
        data: this.rowNode.data,
        node: this.rowNode,
        colDef: this.column.getColDef(),
        column: this.column,
        rowIndex: this.getCellPosition().rowIndex,
        api: this.beans.gridOptionsWrapper.getApi(),
        columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
        context: this.beans.gridOptionsWrapper.getContext(),
        refreshCell: this.refreshCell.bind(this),
        eGridCell: this.getGui(),
        eParentOfValue: this.cellComp.getParentOfValue(),
        registerRowDragger: function(rowDraggerElement, dragStartPixels, value, suppressVisibilityChange) {
          return _this.registerRowDragger(rowDraggerElement, dragStartPixels, suppressVisibilityChange);
        },
        addRowCompListener
      };
      if (this.scope) {
        res.$scope = this.scope;
      }
      return res;
    };
    CellCtrl2.prototype.parseValue = function(newValue) {
      var colDef = this.column.getColDef();
      var params2 = {
        node: this.rowNode,
        data: this.rowNode.data,
        oldValue: this.getValue(),
        newValue,
        colDef,
        column: this.column,
        api: this.beans.gridOptionsWrapper.getApi(),
        columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
        context: this.beans.gridOptionsWrapper.getContext()
      };
      var valueParser = colDef.valueParser;
      return exists(valueParser) ? this.beans.expressionService.evaluate(valueParser, params2) : newValue;
    };
    CellCtrl2.prototype.setFocusOutOnEditor = function() {
      if (!this.editing) {
        return;
      }
      var cellEditor = this.cellComp.getCellEditor();
      if (cellEditor && cellEditor.focusOut) {
        cellEditor.focusOut();
      }
    };
    CellCtrl2.prototype.setFocusInOnEditor = function() {
      if (!this.editing) {
        return;
      }
      var cellEditor = this.cellComp.getCellEditor();
      if (cellEditor && cellEditor.focusIn) {
        cellEditor.focusIn();
      } else {
        this.focusCell(true);
      }
    };
    CellCtrl2.prototype.onCellChanged = function(event) {
      var eventImpactsThisCell = event.column === this.column;
      if (eventImpactsThisCell) {
        this.refreshCell({});
      }
    };
    CellCtrl2.prototype.refreshCell = function(params2) {
      if (this.suppressRefreshCell || this.editing) {
        return;
      }
      var colDef = this.column.getColDef();
      var newData = params2 != null && !!params2.newData;
      var suppressFlash = params2 != null && !!params2.suppressFlash || !!colDef.suppressCellFlash;
      var noValueProvided = colDef.field == null && colDef.valueGetter == null && colDef.showRowGroup == null;
      var forceRefresh = params2 && params2.forceRefresh || noValueProvided || newData;
      var valuesDifferent = this.updateAndFormatValue();
      var dataNeedsUpdating = forceRefresh || valuesDifferent;
      if (dataNeedsUpdating) {
        this.showValue(newData);
        var processingFilterChange = this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();
        var flashCell = !suppressFlash && !processingFilterChange && (this.beans.gridOptionsWrapper.isEnableCellChangeFlash() || colDef.enableCellChangeFlash);
        if (flashCell) {
          this.flashCell();
        }
        this.cellCustomStyleFeature.applyUserStyles();
        this.cellCustomStyleFeature.applyClassesFromColDef();
      }
      this.refreshToolTip();
      this.cellCustomStyleFeature.applyCellClassRules();
    };
    CellCtrl2.prototype.stopEditingAndFocus = function(suppressNavigateAfterEdit) {
      if (suppressNavigateAfterEdit === void 0) {
        suppressNavigateAfterEdit = false;
      }
      this.stopRowOrCellEdit();
      this.focusCell(true);
      if (!suppressNavigateAfterEdit) {
        this.navigateAfterEdit();
      }
    };
    CellCtrl2.prototype.navigateAfterEdit = function() {
      var fullRowEdit = this.beans.gridOptionsWrapper.isFullRowEdit();
      if (fullRowEdit) {
        return;
      }
      var enterMovesDownAfterEdit = this.beans.gridOptionsWrapper.isEnterMovesDownAfterEdit();
      if (enterMovesDownAfterEdit) {
        this.beans.navigationService.navigateToNextCell(null, KeyCode.DOWN, this.getCellPosition(), false);
      }
    };
    CellCtrl2.prototype.flashCell = function(delays) {
      var flashDelay = delays && delays.flashDelay;
      var fadeDelay = delays && delays.fadeDelay;
      this.animateCell("data-changed", flashDelay, fadeDelay);
    };
    CellCtrl2.prototype.animateCell = function(cssName, flashDelay, fadeDelay) {
      var _this = this;
      var fullName = "ag-cell-" + cssName;
      var animationFullName = "ag-cell-" + cssName + "-animation";
      var gridOptionsWrapper = this.beans.gridOptionsWrapper;
      if (!flashDelay) {
        flashDelay = gridOptionsWrapper.getCellFlashDelay();
      }
      if (!exists(fadeDelay)) {
        fadeDelay = gridOptionsWrapper.getCellFadeDelay();
      }
      this.cellComp.addOrRemoveCssClass(fullName, true);
      this.cellComp.addOrRemoveCssClass(animationFullName, false);
      window.setTimeout(function() {
        _this.cellComp.addOrRemoveCssClass(fullName, false);
        _this.cellComp.addOrRemoveCssClass(animationFullName, true);
        _this.cellComp.setTransition("background-color " + fadeDelay + "ms");
        window.setTimeout(function() {
          _this.cellComp.addOrRemoveCssClass(animationFullName, false);
          _this.cellComp.setTransition("transition");
        }, fadeDelay);
      }, flashDelay);
    };
    CellCtrl2.prototype.onFlashCells = function(event) {
      var cellId = this.beans.cellPositionUtils.createId(this.getCellPosition());
      var shouldFlash = event.cells[cellId];
      if (shouldFlash) {
        this.animateCell("highlight");
      }
    };
    CellCtrl2.prototype.isCellEditable = function() {
      return this.column.isCellEditable(this.rowNode);
    };
    CellCtrl2.prototype.isSuppressFillHandle = function() {
      return this.column.isSuppressFillHandle();
    };
    CellCtrl2.prototype.formatValue = function(value) {
      var res = this.callValueFormatter(value);
      return res != null ? res : value;
    };
    CellCtrl2.prototype.callValueFormatter = function(value) {
      return this.beans.valueFormatterService.formatValue(this.column, this.rowNode, this.scope, value);
    };
    CellCtrl2.prototype.updateAndFormatValue = function(force) {
      if (force === void 0) {
        force = false;
      }
      var oldValue = this.value;
      var oldValueFormatted = this.valueFormatted;
      this.value = this.getValueFromValueService();
      this.valueFormatted = this.callValueFormatter(this.value);
      var valuesDifferent = force ? true : !this.valuesAreEqual(oldValue, this.value) || this.valueFormatted != oldValueFormatted;
      return valuesDifferent;
    };
    CellCtrl2.prototype.valuesAreEqual = function(val1, val2) {
      var colDef = this.column.getColDef();
      return colDef.equals ? colDef.equals(val1, val2) : val1 === val2;
    };
    CellCtrl2.prototype.getComp = function() {
      return this.cellComp;
    };
    CellCtrl2.prototype.getValueFromValueService = function() {
      var lockedClosedGroup = this.rowNode.leafGroup && this.beans.columnModel.isPivotMode();
      var isOpenGroup = this.rowNode.group && this.rowNode.expanded && !this.rowNode.footer && !lockedClosedGroup;
      var groupFootersEnabled = this.beans.gridOptionsWrapper.isGroupIncludeFooter();
      var groupAlwaysShowAggData = this.beans.gridOptionsWrapper.isGroupSuppressBlankHeader();
      var ignoreAggData = isOpenGroup && groupFootersEnabled && !groupAlwaysShowAggData;
      var value = this.beans.valueService.getValue(this.column, this.rowNode, false, ignoreAggData);
      return value;
    };
    CellCtrl2.prototype.getValue = function() {
      return this.value;
    };
    CellCtrl2.prototype.getValueFormatted = function() {
      return this.valueFormatted;
    };
    CellCtrl2.prototype.addDomData = function() {
      var _this = this;
      var element2 = this.getGui();
      this.beans.gridOptionsWrapper.setDomData(element2, CellCtrl2.DOM_DATA_KEY_CELL_CTRL, this);
      this.addDestroyFunc(function() {
        return _this.beans.gridOptionsWrapper.setDomData(element2, CellCtrl2.DOM_DATA_KEY_CELL_CTRL, null);
      });
    };
    CellCtrl2.prototype.createEvent = function(domEvent, eventType) {
      var event = {
        type: eventType,
        node: this.rowNode,
        data: this.rowNode.data,
        value: this.value,
        column: this.column,
        colDef: this.column.getColDef(),
        context: this.beans.gridOptionsWrapper.getContext(),
        api: this.beans.gridApi,
        columnApi: this.beans.columnApi,
        rowPinned: this.rowNode.rowPinned,
        event: domEvent,
        rowIndex: this.rowNode.rowIndex
      };
      if (this.scope) {
        event.$scope = this.scope;
      }
      return event;
    };
    CellCtrl2.prototype.onKeyPress = function(event) {
      this.cellKeyboardListenerFeature.onKeyPress(event);
    };
    CellCtrl2.prototype.onKeyDown = function(event) {
      this.cellKeyboardListenerFeature.onKeyDown(event);
    };
    CellCtrl2.prototype.onMouseEvent = function(eventName, mouseEvent) {
      this.cellMouseListenerFeature.onMouseEvent(eventName, mouseEvent);
    };
    CellCtrl2.prototype.getGui = function() {
      return this.eGui;
    };
    CellCtrl2.prototype.refreshToolTip = function() {
      this.tooltipFeature.refreshToolTip();
    };
    CellCtrl2.prototype.getColSpanningList = function() {
      return this.cellPositionFeature.getColSpanningList();
    };
    CellCtrl2.prototype.onLeftChanged = function() {
      this.cellPositionFeature.onLeftChanged();
      this.refreshAriaIndex();
    };
    CellCtrl2.prototype.refreshAriaIndex = function() {
      var colIdx = this.beans.columnModel.getAriaColumnIndex(this.column);
      this.cellComp.setAriaColIndex(colIdx);
    };
    CellCtrl2.prototype.isSuppressNavigable = function() {
      return this.column.isSuppressNavigable(this.rowNode);
    };
    CellCtrl2.prototype.onWidthChanged = function() {
      return this.cellPositionFeature.onWidthChanged();
    };
    CellCtrl2.prototype.getColumn = function() {
      return this.column;
    };
    CellCtrl2.prototype.getRowNode = function() {
      return this.rowNode;
    };
    CellCtrl2.prototype.getBeans = function() {
      return this.beans;
    };
    CellCtrl2.prototype.isPrintLayout = function() {
      return this.printLayout;
    };
    CellCtrl2.prototype.appendChild = function(htmlElement) {
      this.eGui.appendChild(htmlElement);
    };
    CellCtrl2.prototype.refreshHandle = function() {
      if (this.editing) {
        return;
      }
      if (this.cellRangeFeature) {
        this.cellRangeFeature.refreshHandle();
      }
    };
    CellCtrl2.prototype.getCellPosition = function() {
      return this.cellPosition;
    };
    CellCtrl2.prototype.isEditing = function() {
      return this.editing;
    };
    CellCtrl2.prototype.startRowOrCellEdit = function(keyPress, charPress) {
      if (this.beans.gridOptionsWrapper.isFullRowEdit()) {
        this.rowCtrl.startRowEditing(keyPress, charPress, this);
      } else {
        this.startEditing(keyPress, charPress, true);
      }
    };
    CellCtrl2.prototype.getRowCtrl = function() {
      return this.rowCtrl;
    };
    CellCtrl2.prototype.getRowPosition = function() {
      return {
        rowIndex: this.cellPosition.rowIndex,
        rowPinned: this.cellPosition.rowPinned
      };
    };
    CellCtrl2.prototype.updateRangeBordersIfRangeCount = function() {
      if (this.cellRangeFeature) {
        this.cellRangeFeature.updateRangeBordersIfRangeCount();
      }
    };
    CellCtrl2.prototype.onRangeSelectionChanged = function() {
      if (this.cellRangeFeature) {
        this.cellRangeFeature.onRangeSelectionChanged();
      }
    };
    CellCtrl2.prototype.isRangeSelectionEnabled = function() {
      return this.cellRangeFeature != null;
    };
    CellCtrl2.prototype.focusCell = function(forceBrowserFocus) {
      if (forceBrowserFocus === void 0) {
        forceBrowserFocus = false;
      }
      this.beans.focusService.setFocusedCell(this.getCellPosition().rowIndex, this.column, this.rowNode.rowPinned, forceBrowserFocus);
    };
    CellCtrl2.prototype.onRowIndexChanged = function() {
      this.createCellPosition();
      this.onCellFocused();
      if (this.cellRangeFeature) {
        this.cellRangeFeature.onRangeSelectionChanged();
      }
    };
    CellCtrl2.prototype.onFirstRightPinnedChanged = function() {
      if (!this.cellComp) {
        return;
      }
      var firstRightPinned = this.column.isFirstRightPinned();
      this.cellComp.addOrRemoveCssClass(CSS_CELL_FIRST_RIGHT_PINNED, firstRightPinned);
    };
    CellCtrl2.prototype.onLastLeftPinnedChanged = function() {
      if (!this.cellComp) {
        return;
      }
      var lastLeftPinned = this.column.isLastLeftPinned();
      this.cellComp.addOrRemoveCssClass(CSS_CELL_LAST_LEFT_PINNED, lastLeftPinned);
    };
    CellCtrl2.prototype.onCellFocused = function(event) {
      if (!this.cellComp) {
        return;
      }
      var cellFocused = this.beans.focusService.isCellFocused(this.cellPosition);
      if (!this.gow.isSuppressCellSelection()) {
        this.cellComp.addOrRemoveCssClass(CSS_CELL_FOCUS, cellFocused);
      }
      if (cellFocused && event && event.forceBrowserFocus) {
        var focusEl = this.cellComp.getFocusableElement();
        focusEl.focus();
        if (!document.activeElement || document.activeElement === document.body) {
          focusEl.focus();
        }
      }
      var fullRowEdit = this.beans.gridOptionsWrapper.isFullRowEdit();
      if (!cellFocused && !fullRowEdit && this.editing) {
        this.stopRowOrCellEdit();
      }
    };
    CellCtrl2.prototype.createCellPosition = function() {
      this.cellPosition = {
        rowIndex: this.rowNode.rowIndex,
        rowPinned: this.rowNode.rowPinned,
        column: this.column
      };
    };
    CellCtrl2.prototype.applyStaticCssClasses = function() {
      this.cellComp.addOrRemoveCssClass(CSS_CELL, true);
      this.cellComp.addOrRemoveCssClass(CSS_CELL_NOT_INLINE_EDITING, true);
      this.cellComp.addOrRemoveCssClass(CSS_NORMAL_HEIGHT, true);
    };
    CellCtrl2.prototype.onColumnHover = function() {
      if (!this.cellComp) {
        return;
      }
      if (!this.beans.gridOptionsWrapper.isColumnHoverHighlight()) {
        return;
      }
      var isHovered = this.beans.columnHoverService.isHovered(this.column);
      this.cellComp.addOrRemoveCssClass(CSS_COLUMN_HOVER, isHovered);
    };
    CellCtrl2.prototype.onNewColumnsLoaded = function() {
      if (!this.cellComp) {
        return;
      }
      this.setWrapText();
      if (!this.editing) {
        this.refreshCell({ forceRefresh: true, suppressFlash: true });
      }
    };
    CellCtrl2.prototype.setWrapText = function() {
      var value = this.column.getColDef().wrapText == true;
      this.cellComp.addOrRemoveCssClass(CSS_CELL_WRAP_TEXT, value);
    };
    CellCtrl2.prototype.dispatchCellContextMenuEvent = function(event) {
      var colDef = this.column.getColDef();
      var cellContextMenuEvent = this.createEvent(event, Events.EVENT_CELL_CONTEXT_MENU);
      this.beans.eventService.dispatchEvent(cellContextMenuEvent);
      if (colDef.onCellContextMenu) {
        window.setTimeout(function() {
          return colDef.onCellContextMenu(cellContextMenuEvent);
        }, 0);
      }
    };
    CellCtrl2.prototype.getCellRenderer = function() {
      return this.cellComp ? this.cellComp.getCellRenderer() : null;
    };
    CellCtrl2.prototype.getCellEditor = function() {
      return this.cellComp ? this.cellComp.getCellEditor() : null;
    };
    CellCtrl2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
    };
    CellCtrl2.prototype.createSelectionCheckbox = function() {
      var cbSelectionComponent = new CheckboxSelectionComponent();
      this.beans.context.createBean(cbSelectionComponent);
      cbSelectionComponent.init({ rowNode: this.rowNode, column: this.column });
      return cbSelectionComponent;
    };
    CellCtrl2.prototype.createDndSource = function() {
      var dndSourceComp = new DndSourceComp(this.rowNode, this.column, this.beans, this.eGui);
      this.beans.context.createBean(dndSourceComp);
      return dndSourceComp;
    };
    CellCtrl2.prototype.registerRowDragger = function(customElement, dragStartPixels, suppressVisibilityChange) {
      var _this = this;
      if (this.customRowDragComp) {
        this.customRowDragComp.setDragElement(customElement, dragStartPixels);
        return;
      }
      var newComp = this.createRowDragComp(customElement, dragStartPixels, suppressVisibilityChange);
      if (newComp) {
        this.customRowDragComp = newComp;
        this.addDestroyFunc(function() {
          return _this.beans.context.destroyBean(newComp);
        });
      }
    };
    CellCtrl2.prototype.createRowDragComp = function(customElement, dragStartPixels, suppressVisibilityChange) {
      var _this = this;
      var pagination = this.beans.gridOptionsWrapper.isPagination();
      var rowDragManaged = this.beans.gridOptionsWrapper.isRowDragManaged();
      var clientSideRowModelActive = this.beans.gridOptionsWrapper.isRowModelDefault();
      if (rowDragManaged) {
        if (!clientSideRowModelActive) {
          doOnce(function() {
            return console.warn("AG Grid: managed row dragging is only allowed in the Client Side Row Model");
          }, "CellComp.addRowDragging");
          return;
        }
        if (pagination) {
          doOnce(function() {
            return console.warn("AG Grid: managed row dragging is not possible when doing pagination");
          }, "CellComp.addRowDragging");
          return;
        }
      }
      var rowDragComp = new RowDragComp(function() {
        return _this.value;
      }, this.rowNode, this.column, customElement, dragStartPixels, suppressVisibilityChange);
      this.beans.context.createBean(rowDragComp);
      return rowDragComp;
    };
    CellCtrl2.DOM_DATA_KEY_CELL_CTRL = "cellCtrl";
    return CellCtrl2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __assign$7 = function() {
    __assign$7 = Object.assign || function(t) {
      for (var s, i2 = 1, n = arguments.length; i2 < n; i2++) {
        s = arguments[i2];
        for (var p2 in s)
          if (Object.prototype.hasOwnProperty.call(s, p2))
            t[p2] = s[p2];
      }
      return t;
    };
    return __assign$7.apply(this, arguments);
  };
  var AngularRowUtils = function() {
    function AngularRowUtils2() {
    }
    AngularRowUtils2.createChildScopeOrNull = function(rowNode, parentScope, gridOptionsWrapper) {
      var isAngularCompileRows = gridOptionsWrapper.isAngularCompileRows();
      if (!isAngularCompileRows) {
        return null;
      }
      var newChildScope = parentScope.$new();
      newChildScope.data = __assign$7({}, rowNode.data);
      newChildScope.rowNode = rowNode;
      newChildScope.context = gridOptionsWrapper.getContext();
      var destroyFunc = function() {
        newChildScope.$destroy();
        newChildScope.data = null;
        newChildScope.rowNode = null;
        newChildScope.context = null;
      };
      return {
        scope: newChildScope,
        scopeDestroyFunc: destroyFunc
      };
    };
    return AngularRowUtils2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$N = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __spreadArrays$5 = function() {
    for (var s = 0, i2 = 0, il = arguments.length; i2 < il; i2++)
      s += arguments[i2].length;
    for (var r = Array(s), k = 0, i2 = 0; i2 < il; i2++)
      for (var a = arguments[i2], j = 0, jl = a.length; j < jl; j++, k++)
        r[k] = a[j];
    return r;
  };
  var RowType;
  (function(RowType2) {
    RowType2["Normal"] = "Normal";
    RowType2["FullWidth"] = "FullWidth";
    RowType2["FullWidthLoading"] = "FullWidthLoading";
    RowType2["FullWidthGroup"] = "FullWidthGroup";
    RowType2["FullWidthDetail"] = "FullWidthDetail";
  })(RowType || (RowType = {}));
  var FullWidthRenderers = convertToMap([
    [RowType.FullWidthLoading, "agLoadingCellRenderer"],
    [RowType.FullWidthGroup, "agGroupRowRenderer"],
    [RowType.FullWidthDetail, "agDetailCellRenderer"]
  ]);
  var FullWidthKeys = convertToMap([
    [RowType.FullWidth, "fullWidthCellRenderer"],
    [RowType.FullWidthLoading, "loadingCellRenderer"],
    [RowType.FullWidthGroup, "groupRowRenderer"],
    [RowType.FullWidthDetail, "detailCellRenderer"]
  ]);
  var instanceIdSequence$2 = 0;
  var RowCtrl = function(_super) {
    __extends$N(RowCtrl2, _super);
    function RowCtrl2(parentScope, rowNode, beans, animateIn, useAnimationFrameForCreate, printLayout) {
      var _this = _super.call(this) || this;
      _this.allRowGuis = [];
      _this.active = true;
      _this.centerCellCtrls = { list: [], map: {} };
      _this.leftCellCtrls = { list: [], map: {} };
      _this.rightCellCtrls = { list: [], map: {} };
      _this.lastMouseDownOnDragger = false;
      _this.updateColumnListsPending = false;
      _this.parentScope = parentScope;
      _this.beans = beans;
      _this.rowNode = rowNode;
      _this.paginationPage = _this.beans.paginationProxy.getCurrentPage();
      _this.useAnimationFrameForCreate = useAnimationFrameForCreate;
      _this.printLayout = printLayout;
      _this.instanceId = rowNode.id + "-" + instanceIdSequence$2++;
      _this.setAnimateFlags(animateIn);
      _this.rowFocused = _this.beans.focusService.isRowFocused(_this.rowNode.rowIndex, _this.rowNode.rowPinned);
      _this.setupAngular1Scope();
      _this.rowLevel = _this.beans.rowCssClassCalculator.calculateRowLevel(_this.rowNode);
      _this.setRowType();
      _this.addListeners();
      _this.setInitialRowTop();
      return _this;
    }
    RowCtrl2.prototype.getBeans = function() {
      return this.beans;
    };
    RowCtrl2.prototype.getInstanceId = function() {
      return this.instanceId;
    };
    RowCtrl2.prototype.setComp = function(rowComp, element2, pinned) {
      var gui = { rowComp, element: element2, pinned };
      this.allRowGuis.push(gui);
      if (pinned === Constants.PINNED_LEFT) {
        this.leftGui = gui;
      } else if (pinned === Constants.PINNED_RIGHT) {
        this.rightGui = gui;
      } else if (this.isFullWidth() && !this.beans.gridOptionsWrapper.isEmbedFullWidthRows()) {
        this.fullWidthGui = gui;
      } else {
        this.centerGui = gui;
      }
      var allNormalPresent = this.leftGui != null && this.rightGui != null && this.centerGui != null;
      var fullWidthPresent = this.fullWidthGui != null;
      if (allNormalPresent || fullWidthPresent) {
        this.initialiseRowComps();
      }
    };
    RowCtrl2.prototype.isCacheable = function() {
      return this.rowType === RowType.FullWidthDetail && this.beans.gridOptionsWrapper.isKeepDetailRows();
    };
    RowCtrl2.prototype.setCached = function(cached) {
      var displayValue = cached ? "none" : void 0;
      this.allRowGuis.forEach(function(rg) {
        return rg.rowComp.setDisplay(displayValue);
      });
    };
    RowCtrl2.prototype.initialiseRowComps = function() {
      var _this = this;
      var gow = this.beans.gridOptionsWrapper;
      this.onRowHeightChanged();
      this.updateRowIndexes();
      this.setFocusedClasses();
      this.setStylesFromGridOptions();
      if (gow.isRowSelection() && this.rowNode.selectable) {
        this.onRowSelected();
      }
      this.updateColumnLists(!this.useAnimationFrameForCreate);
      if (this.slideRowIn) {
        executeNextVMTurn(this.onTopChanged.bind(this));
      }
      if (this.fadeRowIn) {
        executeNextVMTurn(function() {
          _this.allRowGuis.forEach(function(gui) {
            return gui.rowComp.addOrRemoveCssClass("ag-opacity-zero", false);
          });
        });
      }
      var businessKey = this.getRowBusinessKey();
      var rowIdSanitised = escapeString(this.rowNode.id);
      var businessKeySanitised = escapeString(businessKey);
      this.allRowGuis.forEach(function(gui) {
        var comp = gui.rowComp;
        comp.setRole("row");
        var initialRowClasses = _this.getInitialRowClasses(gui.pinned);
        initialRowClasses.forEach(function(name) {
          return comp.addOrRemoveCssClass(name, true);
        });
        if (_this.rowNode.group) {
          comp.setAriaExpanded(_this.rowNode.expanded == true);
        }
        if (rowIdSanitised != null) {
          comp.setRowId(rowIdSanitised);
        }
        if (businessKeySanitised != null) {
          comp.setRowBusinessKey(businessKeySanitised);
        }
        if (_this.isFullWidth()) {
          comp.setTabIndex(-1);
        }
        gow.setDomData(gui.element, RowCtrl2.DOM_DATA_KEY_RENDERED_ROW, _this);
        _this.addDestroyFunc(function() {
          return gow.setDomData(gui.element, RowCtrl2.DOM_DATA_KEY_RENDERED_ROW, null);
        });
        if (_this.useAnimationFrameForCreate) {
          _this.beans.animationFrameService.createTask(_this.addHoverFunctionality.bind(_this, gui.element), _this.rowNode.rowIndex, "createTasksP2");
        } else {
          _this.addHoverFunctionality(gui.element);
        }
        if (_this.isFullWidth()) {
          _this.setupFullWidth(gui);
        }
        if (gow.isRowDragEntireRow()) {
          _this.addRowDraggerToRow(gui);
        }
        _this.beans.animationFrameService.addDestroyTask(function() {
          if (_this.isAlive()) {
            gui.rowComp.addOrRemoveCssClass("ag-after-created", true);
          }
        });
      });
      this.executeProcessRowPostCreateFunc();
    };
    RowCtrl2.prototype.addRowDraggerToRow = function(gui) {
      var gow = this.beans.gridOptionsWrapper;
      if (gow.isEnableRangeSelection()) {
        doOnce(function() {
          console.warn("AG Grid: Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");
        }, "rowDragAndRangeSelectionEnabled");
        return;
      }
      var rowDragComp = new RowDragComp(function() {
        return "1 row";
      }, this.rowNode, void 0, gui.element, void 0, true);
      this.createManagedBean(rowDragComp, this.beans.context);
    };
    RowCtrl2.prototype.getFullWidthCellRendererType = function() {
      return FullWidthKeys.get(this.rowType);
    };
    RowCtrl2.prototype.getFullWidthCellRendererName = function() {
      return FullWidthRenderers.get(this.rowType);
    };
    RowCtrl2.prototype.setupFullWidth = function(gui) {
      var params2 = this.createFullWidthParams(gui.element, gui.pinned);
      var cellRendererType = this.getFullWidthCellRendererType();
      var cellRendererName = this.getFullWidthCellRendererName();
      var compDetails = this.beans.userComponentFactory.getFullWidthCellRendererDetails(params2, cellRendererType, cellRendererName);
      if (compDetails) {
        gui.rowComp.showFullWidth(compDetails);
      } else {
        var masterDetailModuleLoaded = ModuleRegistry.isRegistered(exports2.ModuleNames.MasterDetailModule);
        if (cellRendererName === "agDetailCellRenderer" && !masterDetailModuleLoaded) {
          console.warn("AG Grid: cell renderer agDetailCellRenderer (for master detail) not found. Did you forget to include the master detail module?");
        } else {
          console.error("AG Grid: fullWidthCellRenderer " + cellRendererName + " not found");
        }
      }
    };
    RowCtrl2.prototype.getScope = function() {
      return this.scope;
    };
    RowCtrl2.prototype.isPrintLayout = function() {
      return this.printLayout;
    };
    RowCtrl2.prototype.setupAngular1Scope = function() {
      var scopeResult = AngularRowUtils.createChildScopeOrNull(this.rowNode, this.parentScope, this.beans.gridOptionsWrapper);
      if (scopeResult) {
        this.scope = scopeResult.scope;
        this.addDestroyFunc(scopeResult.scopeDestroyFunc);
      }
    };
    RowCtrl2.prototype.getCellElement = function(column) {
      var cellCtrl = this.getCellCtrl(column);
      return cellCtrl ? cellCtrl.getGui() : null;
    };
    RowCtrl2.prototype.executeProcessRowPostCreateFunc = function() {
      var func = this.beans.gridOptionsWrapper.getProcessRowPostCreateFunc();
      if (!func) {
        return;
      }
      var params2 = {
        eRow: this.centerGui ? this.centerGui.element : void 0,
        ePinnedLeftRow: this.leftGui ? this.leftGui.element : void 0,
        ePinnedRightRow: this.rightGui ? this.rightGui.element : void 0,
        node: this.rowNode,
        api: this.beans.gridOptionsWrapper.getApi(),
        rowIndex: this.rowNode.rowIndex,
        addRenderedRowListener: this.addEventListener.bind(this),
        columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
        context: this.beans.gridOptionsWrapper.getContext()
      };
      func(params2);
    };
    RowCtrl2.prototype.setRowType = function() {
      var isStub = this.rowNode.stub;
      var isFullWidthCell = this.rowNode.isFullWidthCell();
      var isDetailCell = this.beans.doingMasterDetail && this.rowNode.detail;
      var pivotMode = this.beans.columnModel.isPivotMode();
      var isGroupRow = !!this.rowNode.group && !this.rowNode.footer;
      var isFullWidthGroup = isGroupRow && this.beans.gridOptionsWrapper.isGroupUseEntireRow(pivotMode);
      if (isStub) {
        this.rowType = RowType.FullWidthLoading;
      } else if (isDetailCell) {
        this.rowType = RowType.FullWidthDetail;
      } else if (isFullWidthCell) {
        this.rowType = RowType.FullWidth;
      } else if (isFullWidthGroup) {
        this.rowType = RowType.FullWidthGroup;
      } else {
        this.rowType = RowType.Normal;
      }
    };
    RowCtrl2.prototype.updateColumnLists = function(suppressAnimationFrame) {
      var _this = this;
      if (suppressAnimationFrame === void 0) {
        suppressAnimationFrame = false;
      }
      if (this.isFullWidth()) {
        return;
      }
      var noAnimation = suppressAnimationFrame || this.beans.gridOptionsWrapper.isSuppressAnimationFrame() || this.printLayout;
      if (noAnimation) {
        this.updateColumnListsImpl();
        return;
      }
      if (this.updateColumnListsPending) {
        return;
      }
      this.beans.animationFrameService.createTask(function() {
        if (!_this.active) {
          return;
        }
        _this.updateColumnListsImpl();
      }, this.rowNode.rowIndex, "createTasksP1");
      this.updateColumnListsPending = true;
    };
    RowCtrl2.prototype.createCellCtrls = function(prev, cols, pinned) {
      var _this = this;
      if (pinned === void 0) {
        pinned = null;
      }
      var res = {
        list: [],
        map: {}
      };
      var addCell = function(colInstanceId, cellCtrl) {
        res.list.push(cellCtrl);
        res.map[colInstanceId] = cellCtrl;
      };
      cols.forEach(function(col) {
        var colInstanceId = col.getInstanceId();
        var cellCtrl = prev.map[colInstanceId];
        if (!cellCtrl) {
          cellCtrl = new CellCtrl(col, _this.rowNode, _this.beans, _this);
        }
        addCell(colInstanceId, cellCtrl);
      });
      prev.list.forEach(function(prevCellCtrl) {
        var cellInResult = res.map[prevCellCtrl.getColumn().getInstanceId()] != null;
        if (cellInResult) {
          return;
        }
        var keepCell = !_this.isCellEligibleToBeRemoved(prevCellCtrl, pinned);
        if (keepCell) {
          addCell(prevCellCtrl.getColumn().getInstanceId(), prevCellCtrl);
          return;
        }
        prevCellCtrl.destroy();
      });
      return res;
    };
    RowCtrl2.prototype.updateColumnListsImpl = function() {
      var _this = this;
      this.updateColumnListsPending = false;
      var columnModel = this.beans.columnModel;
      if (this.printLayout) {
        this.centerCellCtrls = this.createCellCtrls(this.centerCellCtrls, columnModel.getAllDisplayedColumns());
        this.leftCellCtrls = { list: [], map: {} };
        this.rightCellCtrls = { list: [], map: {} };
      } else {
        var centerCols = columnModel.getViewportCenterColumnsForRow(this.rowNode);
        this.centerCellCtrls = this.createCellCtrls(this.centerCellCtrls, centerCols);
        var leftCols = columnModel.getDisplayedLeftColumnsForRow(this.rowNode);
        this.leftCellCtrls = this.createCellCtrls(this.leftCellCtrls, leftCols, Constants.PINNED_LEFT);
        var rightCols = columnModel.getDisplayedRightColumnsForRow(this.rowNode);
        this.rightCellCtrls = this.createCellCtrls(this.rightCellCtrls, rightCols, Constants.PINNED_RIGHT);
      }
      this.allRowGuis.forEach(function(item) {
        var cellControls = item.pinned === Constants.PINNED_LEFT ? _this.leftCellCtrls : item.pinned === Constants.PINNED_RIGHT ? _this.rightCellCtrls : _this.centerCellCtrls;
        item.rowComp.setCellCtrls(cellControls.list);
      });
    };
    RowCtrl2.prototype.isCellEligibleToBeRemoved = function(cellCtrl, nextContainerPinned) {
      var REMOVE_CELL = true;
      var KEEP_CELL = false;
      var column = cellCtrl.getColumn();
      if (column.getPinned() != nextContainerPinned) {
        return REMOVE_CELL;
      }
      var editing = cellCtrl.isEditing();
      var focused = this.beans.focusService.isCellFocused(cellCtrl.getCellPosition());
      var mightWantToKeepCell = editing || focused;
      if (mightWantToKeepCell) {
        var column_1 = cellCtrl.getColumn();
        var displayedColumns = this.beans.columnModel.getAllDisplayedColumns();
        var cellStillDisplayed = displayedColumns.indexOf(column_1) >= 0;
        return cellStillDisplayed ? KEEP_CELL : REMOVE_CELL;
      }
      return REMOVE_CELL;
    };
    RowCtrl2.prototype.setAnimateFlags = function(animateIn) {
      if (animateIn) {
        var oldRowTopExists = exists(this.rowNode.oldRowTop);
        this.slideRowIn = oldRowTopExists;
        this.fadeRowIn = !oldRowTopExists;
      } else {
        this.slideRowIn = false;
        this.fadeRowIn = false;
      }
    };
    RowCtrl2.prototype.isEditing = function() {
      return this.editingRow;
    };
    RowCtrl2.prototype.stopRowEditing = function(cancel) {
      this.stopEditing(cancel);
    };
    RowCtrl2.prototype.isFullWidth = function() {
      return this.rowType !== RowType.Normal;
    };
    RowCtrl2.prototype.getRowType = function() {
      return this.rowType;
    };
    RowCtrl2.prototype.refreshFullWidth = function() {
      var _this = this;
      var tryRefresh = function(gui, pinned) {
        if (!gui) {
          return true;
        }
        var cellRenderer = gui.rowComp.getFullWidthCellRenderer();
        if (!cellRenderer) {
          return false;
        }
        if (!cellRenderer.refresh) {
          return false;
        }
        var params2 = _this.createFullWidthParams(gui.element, pinned);
        var refreshSucceeded = cellRenderer.refresh(params2);
        return refreshSucceeded;
      };
      var fullWidthSuccess = tryRefresh(this.fullWidthGui, null);
      var centerSuccess = tryRefresh(this.centerGui, null);
      var leftSuccess = tryRefresh(this.leftGui, Constants.PINNED_LEFT);
      var rightSuccess = tryRefresh(this.rightGui, Constants.PINNED_RIGHT);
      var allFullWidthRowsRefreshed = fullWidthSuccess && centerSuccess && leftSuccess && rightSuccess;
      return allFullWidthRowsRefreshed;
    };
    RowCtrl2.prototype.addListeners = function() {
      this.addManagedListener(this.rowNode, RowNode.EVENT_HEIGHT_CHANGED, this.onRowHeightChanged.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_ROW_SELECTED, this.onRowSelected.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_ROW_INDEX_CHANGED, this.onRowIndexChanged.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_TOP_CHANGED, this.onTopChanged.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_EXPANDED_CHANGED, this.updateExpandedCss.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_HAS_CHILDREN_CHANGED, this.updateExpandedCss.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_DATA_CHANGED, this.onRowNodeDataChanged.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, this.onRowNodeCellChanged.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_HIGHLIGHT_CHANGED, this.onRowNodeHighlightChanged.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_DRAGGING_CHANGED, this.onRowNodeDraggingChanged.bind(this));
      this.addManagedListener(this.rowNode, RowNode.EVENT_UI_LEVEL_CHANGED, this.onUiLevelChanged.bind(this));
      var eventService = this.beans.eventService;
      this.addManagedListener(eventService, Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED, this.onPaginationPixelOffsetChanged.bind(this));
      this.addManagedListener(eventService, Events.EVENT_HEIGHT_SCALE_CHANGED, this.onTopChanged.bind(this));
      this.addManagedListener(eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.onDisplayedColumnsChanged.bind(this));
      this.addManagedListener(eventService, Events.EVENT_VIRTUAL_COLUMNS_CHANGED, this.onVirtualColumnsChanged.bind(this));
      this.addManagedListener(eventService, Events.EVENT_CELL_FOCUSED, this.onCellFocusChanged.bind(this));
      this.addManagedListener(eventService, Events.EVENT_PAGINATION_CHANGED, this.onPaginationChanged.bind(this));
      this.addManagedListener(eventService, Events.EVENT_MODEL_UPDATED, this.onModelUpdated.bind(this));
      this.addManagedListener(eventService, Events.EVENT_COLUMN_MOVED, this.onColumnMoved.bind(this));
      this.addListenersForCellComps();
    };
    RowCtrl2.prototype.onColumnMoved = function() {
      this.updateColumnLists();
    };
    RowCtrl2.prototype.addListenersForCellComps = function() {
      var _this = this;
      this.addManagedListener(this.rowNode, RowNode.EVENT_ROW_INDEX_CHANGED, function() {
        _this.getAllCellCtrls().forEach(function(cellCtrl) {
          return cellCtrl.onRowIndexChanged();
        });
      });
      this.addManagedListener(this.rowNode, RowNode.EVENT_CELL_CHANGED, function(event) {
        _this.getAllCellCtrls().forEach(function(cellCtrl) {
          return cellCtrl.onCellChanged(event);
        });
      });
    };
    RowCtrl2.prototype.onRowNodeDataChanged = function(event) {
      this.getAllCellCtrls().forEach(function(cellCtrl) {
        return cellCtrl.refreshCell({
          suppressFlash: !event.update,
          newData: !event.update
        });
      });
      this.onRowSelected();
      this.postProcessCss();
    };
    RowCtrl2.prototype.onRowNodeCellChanged = function() {
      this.postProcessCss();
    };
    RowCtrl2.prototype.postProcessCss = function() {
      this.setStylesFromGridOptions();
      this.postProcessClassesFromGridOptions();
      this.postProcessRowClassRules();
      this.postProcessRowDragging();
    };
    RowCtrl2.prototype.onRowNodeHighlightChanged = function() {
      var highlighted = this.rowNode.highlighted;
      this.allRowGuis.forEach(function(gui) {
        var aboveOn = highlighted === exports2.RowHighlightPosition.Above;
        var belowOn = highlighted === exports2.RowHighlightPosition.Below;
        gui.rowComp.addOrRemoveCssClass("ag-row-highlight-above", aboveOn);
        gui.rowComp.addOrRemoveCssClass("ag-row-highlight-below", belowOn);
      });
    };
    RowCtrl2.prototype.onRowNodeDraggingChanged = function() {
      this.postProcessRowDragging();
    };
    RowCtrl2.prototype.postProcessRowDragging = function() {
      var dragging = this.rowNode.dragging;
      this.allRowGuis.forEach(function(gui) {
        return gui.rowComp.addOrRemoveCssClass("ag-row-dragging", dragging);
      });
    };
    RowCtrl2.prototype.updateExpandedCss = function() {
      var expandable = this.rowNode.isExpandable();
      var expanded = this.rowNode.expanded == true;
      this.allRowGuis.forEach(function(gui) {
        gui.rowComp.addOrRemoveCssClass("ag-row-group", expandable);
        gui.rowComp.addOrRemoveCssClass("ag-row-group-expanded", expandable && expanded);
        gui.rowComp.addOrRemoveCssClass("ag-row-group-contracted", expandable && !expanded);
        gui.rowComp.setAriaExpanded(expandable && expanded);
      });
    };
    RowCtrl2.prototype.onDisplayedColumnsChanged = function() {
      this.updateColumnLists(true);
      if (this.beans.columnModel.wasAutoRowHeightEverActive()) {
        this.rowNode.checkAutoHeights();
      }
    };
    RowCtrl2.prototype.onVirtualColumnsChanged = function() {
      this.updateColumnLists();
    };
    RowCtrl2.prototype.getRowPosition = function() {
      return {
        rowPinned: this.rowNode.rowPinned,
        rowIndex: this.rowNode.rowIndex
      };
    };
    RowCtrl2.prototype.onKeyboardNavigate = function(keyboardEvent) {
      var currentFullWidthComp = find(this.allRowGuis, function(c) {
        return c.element.contains(keyboardEvent.target);
      });
      var currentFullWidthContainer = currentFullWidthComp ? currentFullWidthComp.element : null;
      var isFullWidthContainerFocused = currentFullWidthContainer === keyboardEvent.target;
      if (!isFullWidthContainerFocused) {
        return;
      }
      var node = this.rowNode;
      var lastFocusedCell = this.beans.focusService.getFocusedCell();
      var cellPosition = {
        rowIndex: node.rowIndex,
        rowPinned: node.rowPinned,
        column: lastFocusedCell && lastFocusedCell.column
      };
      this.beans.navigationService.navigateToNextCell(keyboardEvent, keyboardEvent.keyCode, cellPosition, true);
      keyboardEvent.preventDefault();
    };
    RowCtrl2.prototype.onTabKeyDown = function(keyboardEvent) {
      if (keyboardEvent.defaultPrevented || isStopPropagationForAgGrid(keyboardEvent)) {
        return;
      }
      var currentFullWidthComp = find(this.allRowGuis, function(c) {
        return c.element.contains(keyboardEvent.target);
      });
      var currentFullWidthContainer = currentFullWidthComp ? currentFullWidthComp.element : null;
      var isFullWidthContainerFocused = currentFullWidthContainer === keyboardEvent.target;
      var nextEl = null;
      if (!isFullWidthContainerFocused) {
        nextEl = this.beans.focusService.findNextFocusableElement(currentFullWidthContainer, false, keyboardEvent.shiftKey);
      }
      if (this.isFullWidth() && isFullWidthContainerFocused || !nextEl) {
        this.beans.navigationService.onTabKeyDown(this, keyboardEvent);
      }
    };
    RowCtrl2.prototype.onFullWidthRowFocused = function(event) {
      var node = this.rowNode;
      var isFocused = this.isFullWidth() && event.rowIndex === node.rowIndex && event.rowPinned == node.rowPinned;
      var element2 = this.fullWidthGui ? this.fullWidthGui.element : this.centerGui.element;
      addOrRemoveCssClass(element2, "ag-full-width-focus", isFocused);
      if (isFocused) {
        element2.focus({ preventScroll: true });
      }
    };
    RowCtrl2.prototype.refreshCell = function(cellCtrl) {
      this.centerCellCtrls = this.removeCellCtrl(this.centerCellCtrls, cellCtrl);
      this.leftCellCtrls = this.removeCellCtrl(this.leftCellCtrls, cellCtrl);
      this.rightCellCtrls = this.removeCellCtrl(this.rightCellCtrls, cellCtrl);
      this.updateColumnLists();
    };
    RowCtrl2.prototype.removeCellCtrl = function(prev, cellCtrlToRemove) {
      var res = {
        list: [],
        map: {}
      };
      prev.list.forEach(function(cellCtrl) {
        if (cellCtrl === cellCtrlToRemove) {
          return;
        }
        res.list.push(cellCtrl);
        res.map[cellCtrl.getInstanceId()] = cellCtrl;
      });
      return res;
    };
    RowCtrl2.prototype.onMouseEvent = function(eventName, mouseEvent) {
      switch (eventName) {
        case "dblclick":
          this.onRowDblClick(mouseEvent);
          break;
        case "click":
          this.onRowClick(mouseEvent);
          break;
        case "touchstart":
        case "mousedown":
          this.onRowMouseDown(mouseEvent);
          break;
      }
    };
    RowCtrl2.prototype.createRowEvent = function(type, domEvent) {
      return {
        type,
        node: this.rowNode,
        data: this.rowNode.data,
        rowIndex: this.rowNode.rowIndex,
        rowPinned: this.rowNode.rowPinned,
        context: this.beans.gridOptionsWrapper.getContext(),
        api: this.beans.gridOptionsWrapper.getApi(),
        columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
        event: domEvent
      };
    };
    RowCtrl2.prototype.createRowEventWithSource = function(type, domEvent) {
      var event = this.createRowEvent(type, domEvent);
      event.source = this;
      return event;
    };
    RowCtrl2.prototype.onRowDblClick = function(mouseEvent) {
      if (isStopPropagationForAgGrid(mouseEvent)) {
        return;
      }
      var agEvent = this.createRowEventWithSource(Events.EVENT_ROW_DOUBLE_CLICKED, mouseEvent);
      this.beans.eventService.dispatchEvent(agEvent);
    };
    RowCtrl2.prototype.onRowMouseDown = function(mouseEvent) {
      this.lastMouseDownOnDragger = isElementChildOfClass(mouseEvent.target, "ag-row-drag", 3);
      if (!this.isFullWidth()) {
        return;
      }
      var node = this.rowNode;
      var columnModel = this.beans.columnModel;
      this.beans.focusService.setFocusedCell(node.rowIndex, columnModel.getAllDisplayedColumns()[0], node.rowPinned, true);
    };
    RowCtrl2.prototype.onRowClick = function(mouseEvent) {
      var stop = isStopPropagationForAgGrid(mouseEvent) || this.lastMouseDownOnDragger;
      if (stop) {
        return;
      }
      var agEvent = this.createRowEventWithSource(Events.EVENT_ROW_CLICKED, mouseEvent);
      this.beans.eventService.dispatchEvent(agEvent);
      var multiSelectKeyPressed = mouseEvent.ctrlKey || mouseEvent.metaKey;
      var shiftKeyPressed = mouseEvent.shiftKey;
      var groupSelectsChildren = this.beans.gridOptionsWrapper.isGroupSelectsChildren();
      if (groupSelectsChildren && this.rowNode.group || !this.rowNode.selectable || this.rowNode.rowPinned || !this.beans.gridOptionsWrapper.isRowSelection() || this.beans.gridOptionsWrapper.isSuppressRowClickSelection()) {
        return;
      }
      var multiSelectOnClick = this.beans.gridOptionsWrapper.isRowMultiSelectWithClick();
      var rowDeselectionWithCtrl = !this.beans.gridOptionsWrapper.isSuppressRowDeselection();
      if (this.rowNode.isSelected()) {
        if (multiSelectOnClick) {
          this.rowNode.setSelectedParams({ newValue: false });
        } else if (multiSelectKeyPressed) {
          if (rowDeselectionWithCtrl) {
            this.rowNode.setSelectedParams({ newValue: false });
          }
        } else {
          this.rowNode.setSelectedParams({ newValue: !shiftKeyPressed, clearSelection: !shiftKeyPressed, rangeSelect: shiftKeyPressed });
        }
      } else {
        var clearSelection = multiSelectOnClick ? false : !multiSelectKeyPressed;
        this.rowNode.setSelectedParams({ newValue: true, clearSelection, rangeSelect: shiftKeyPressed });
      }
    };
    RowCtrl2.prototype.setupDetailRowAutoHeight = function(eDetailGui) {
      var _this = this;
      if (!this.beans.gridOptionsWrapper.isDetailRowAutoHeight()) {
        return;
      }
      var checkRowSizeFunc = function() {
        var clientHeight = eDetailGui.clientHeight;
        if (clientHeight != null && clientHeight > 0) {
          var updateRowHeightFunc = function() {
            _this.rowNode.setRowHeight(clientHeight);
            if (_this.beans.clientSideRowModel) {
              _this.beans.clientSideRowModel.onRowHeightChanged();
            } else if (_this.beans.serverSideRowModel) {
              _this.beans.serverSideRowModel.onRowHeightChanged();
            }
          };
          _this.beans.frameworkOverrides.setTimeout(updateRowHeightFunc, 0);
        }
      };
      var resizeObserverDestroyFunc = this.beans.resizeObserverService.observeResize(eDetailGui, checkRowSizeFunc);
      this.addDestroyFunc(resizeObserverDestroyFunc);
      checkRowSizeFunc();
    };
    RowCtrl2.prototype.createFullWidthParams = function(eRow, pinned) {
      var _this = this;
      var params2 = {
        fullWidth: true,
        data: this.rowNode.data,
        node: this.rowNode,
        value: this.rowNode.key,
        valueFormatted: this.rowNode.key,
        $scope: this.scope ? this.scope : this.parentScope,
        $compile: this.beans.$compile,
        rowIndex: this.rowNode.rowIndex,
        api: this.beans.gridOptionsWrapper.getApi(),
        columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
        context: this.beans.gridOptionsWrapper.getContext(),
        eGridCell: eRow,
        eParentOfValue: eRow,
        pinned,
        addRenderedRowListener: this.addEventListener.bind(this),
        registerRowDragger: function(rowDraggerElement, dragStartPixels, value, suppressVisibilityChange) {
          return _this.addFullWidthRowDragging(rowDraggerElement, dragStartPixels, value, suppressVisibilityChange);
        }
      };
      return params2;
    };
    RowCtrl2.prototype.addFullWidthRowDragging = function(rowDraggerElement, dragStartPixels, value, suppressVisibilityChange) {
      if (value === void 0) {
        value = "";
      }
      if (!this.isFullWidth()) {
        return;
      }
      var rowDragComp = new RowDragComp(function() {
        return value;
      }, this.rowNode, void 0, rowDraggerElement, dragStartPixels, suppressVisibilityChange);
      this.createManagedBean(rowDragComp, this.beans.context);
    };
    RowCtrl2.prototype.onUiLevelChanged = function() {
      var newLevel = this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);
      if (this.rowLevel != newLevel) {
        var classToAdd_1 = "ag-row-level-" + newLevel;
        var classToRemove_1 = "ag-row-level-" + this.rowLevel;
        this.allRowGuis.forEach(function(gui) {
          gui.rowComp.addOrRemoveCssClass(classToAdd_1, true);
          gui.rowComp.addOrRemoveCssClass(classToRemove_1, false);
        });
      }
      this.rowLevel = newLevel;
    };
    RowCtrl2.prototype.isFirstRowOnPage = function() {
      return this.rowNode.rowIndex === this.beans.paginationProxy.getPageFirstRow();
    };
    RowCtrl2.prototype.isLastRowOnPage = function() {
      return this.rowNode.rowIndex === this.beans.paginationProxy.getPageLastRow();
    };
    RowCtrl2.prototype.onModelUpdated = function() {
      var newFirst = this.isFirstRowOnPage();
      var newLast = this.isLastRowOnPage();
      if (this.firstRowOnPage !== newFirst) {
        this.firstRowOnPage = newFirst;
        this.allRowGuis.forEach(function(gui) {
          return gui.rowComp.addOrRemoveCssClass("ag-row-first", newFirst);
        });
      }
      if (this.lastRowOnPage !== newLast) {
        this.lastRowOnPage = newLast;
        this.allRowGuis.forEach(function(gui) {
          return gui.rowComp.addOrRemoveCssClass("ag-row-last", newLast);
        });
      }
    };
    RowCtrl2.prototype.stopEditing = function(cancel) {
      if (cancel === void 0) {
        cancel = false;
      }
      this.getAllCellCtrls().forEach(function(cellCtrl) {
        return cellCtrl.stopEditing(cancel);
      });
      if (!this.editingRow) {
        return;
      }
      if (!cancel) {
        var event_1 = this.createRowEvent(Events.EVENT_ROW_VALUE_CHANGED);
        this.beans.eventService.dispatchEvent(event_1);
      }
      this.setEditingRow(false);
    };
    RowCtrl2.prototype.setInlineEditingCss = function(editing) {
      this.allRowGuis.forEach(function(gui) {
        gui.rowComp.addOrRemoveCssClass("ag-row-inline-editing", editing);
        gui.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing", !editing);
      });
    };
    RowCtrl2.prototype.setEditingRow = function(value) {
      this.editingRow = value;
      this.allRowGuis.forEach(function(gui) {
        return gui.rowComp.addOrRemoveCssClass("ag-row-editing", value);
      });
      var event = value ? this.createRowEvent(Events.EVENT_ROW_EDITING_STARTED) : this.createRowEvent(Events.EVENT_ROW_EDITING_STOPPED);
      this.beans.eventService.dispatchEvent(event);
    };
    RowCtrl2.prototype.startRowEditing = function(keyPress, charPress, sourceRenderedCell) {
      if (keyPress === void 0) {
        keyPress = null;
      }
      if (charPress === void 0) {
        charPress = null;
      }
      if (sourceRenderedCell === void 0) {
        sourceRenderedCell = null;
      }
      if (this.editingRow) {
        return;
      }
      this.getAllCellCtrls().forEach(function(cellCtrl) {
        var cellStartedEdit = cellCtrl === sourceRenderedCell;
        if (cellStartedEdit) {
          cellCtrl.startEditing(keyPress, charPress, cellStartedEdit);
        } else {
          cellCtrl.startEditing(null, null, cellStartedEdit);
        }
      });
      this.setEditingRow(true);
    };
    RowCtrl2.prototype.getAllCellCtrls = function() {
      var res = __spreadArrays$5(this.centerCellCtrls.list, this.leftCellCtrls.list, this.rightCellCtrls.list);
      return res;
    };
    RowCtrl2.prototype.postProcessClassesFromGridOptions = function() {
      var _this = this;
      var cssClasses = this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode, this.scope);
      if (!cssClasses || !cssClasses.length) {
        return;
      }
      cssClasses.forEach(function(classStr) {
        _this.allRowGuis.forEach(function(c) {
          return c.rowComp.addOrRemoveCssClass(classStr, true);
        });
      });
    };
    RowCtrl2.prototype.postProcessRowClassRules = function() {
      var _this = this;
      this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode, this.scope, function(className) {
        _this.allRowGuis.forEach(function(gui) {
          return gui.rowComp.addOrRemoveCssClass(className, true);
        });
      }, function(className) {
        _this.allRowGuis.forEach(function(gui) {
          return gui.rowComp.addOrRemoveCssClass(className, false);
        });
      });
    };
    RowCtrl2.prototype.setStylesFromGridOptions = function() {
      var rowStyles = this.processStylesFromGridOptions();
      this.allRowGuis.forEach(function(gui) {
        return gui.rowComp.setUserStyles(rowStyles);
      });
    };
    RowCtrl2.prototype.getRowBusinessKey = function() {
      var businessKeyForNodeFunc = this.beans.gridOptionsWrapper.getBusinessKeyForNodeFunc();
      if (typeof businessKeyForNodeFunc !== "function") {
        return;
      }
      return businessKeyForNodeFunc(this.rowNode);
    };
    RowCtrl2.prototype.getInitialRowClasses = function(pinned) {
      var params2 = {
        rowNode: this.rowNode,
        rowFocused: this.rowFocused,
        fadeRowIn: this.fadeRowIn,
        rowIsEven: this.rowNode.rowIndex % 2 === 0,
        rowLevel: this.rowLevel,
        fullWidthRow: this.isFullWidth(),
        firstRowOnPage: this.isFirstRowOnPage(),
        lastRowOnPage: this.isLastRowOnPage(),
        printLayout: this.printLayout,
        expandable: this.rowNode.isExpandable(),
        scope: this.scope,
        pinned
      };
      return this.beans.rowCssClassCalculator.getInitialRowClasses(params2);
    };
    RowCtrl2.prototype.processStylesFromGridOptions = function() {
      var rowStyle = this.beans.gridOptionsWrapper.getRowStyle();
      if (rowStyle && typeof rowStyle === "function") {
        console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");
        return;
      }
      var rowStyleFunc = this.beans.gridOptionsWrapper.getRowStyleFunc();
      var rowStyleFuncResult;
      if (rowStyleFunc) {
        var params2 = {
          data: this.rowNode.data,
          node: this.rowNode,
          rowIndex: this.rowNode.rowIndex,
          $scope: this.scope,
          api: this.beans.gridOptionsWrapper.getApi(),
          columnApi: this.beans.gridOptionsWrapper.getColumnApi(),
          context: this.beans.gridOptionsWrapper.getContext()
        };
        rowStyleFuncResult = rowStyleFunc(params2);
      }
      return assign2({}, rowStyle, rowStyleFuncResult);
    };
    RowCtrl2.prototype.onRowSelected = function() {
      var _this = this;
      var selected = this.rowNode.isSelected();
      this.allRowGuis.forEach(function(gui) {
        gui.rowComp.setAriaSelected(selected ? true : void 0);
        gui.rowComp.addOrRemoveCssClass("ag-row-selected", selected);
        gui.rowComp.setAriaLabel(_this.createAriaLabel());
      });
    };
    RowCtrl2.prototype.createAriaLabel = function() {
      var selected = this.rowNode.isSelected();
      if (selected && this.beans.gridOptionsWrapper.isSuppressRowDeselection()) {
        return void 0;
      }
      var translate = this.beans.gridOptionsWrapper.getLocaleTextFunc();
      var label = translate(selected ? "ariaRowDeselect" : "ariaRowSelect", "Press SPACE to " + (selected ? "deselect" : "select") + " this row.");
      return label;
    };
    RowCtrl2.prototype.isUseAnimationFrameForCreate = function() {
      return this.useAnimationFrameForCreate;
    };
    RowCtrl2.prototype.addHoverFunctionality = function(eRow) {
      var _this = this;
      if (!this.active) {
        return;
      }
      this.addManagedListener(eRow, "mouseenter", function() {
        return _this.rowNode.onMouseEnter();
      });
      this.addManagedListener(eRow, "mouseleave", function() {
        return _this.rowNode.onMouseLeave();
      });
      this.addManagedListener(this.rowNode, RowNode.EVENT_MOUSE_ENTER, function() {
        if (!_this.beans.gridOptionsWrapper.isSuppressRowHoverHighlight()) {
          addCssClass(eRow, "ag-row-hover");
        }
      });
      this.addManagedListener(this.rowNode, RowNode.EVENT_MOUSE_LEAVE, function() {
        removeCssClass(eRow, "ag-row-hover");
      });
    };
    RowCtrl2.prototype.roundRowTopToBounds = function(rowTop) {
      var gridBodyCon = this.beans.ctrlsService.getGridBodyCtrl();
      var range = gridBodyCon.getScrollFeature().getVScrollPosition();
      var minPixel = this.applyPaginationOffset(range.top, true) - 100;
      var maxPixel = this.applyPaginationOffset(range.bottom, true) + 100;
      return Math.min(Math.max(minPixel, rowTop), maxPixel);
    };
    RowCtrl2.prototype.getFrameworkOverrides = function() {
      return this.beans.frameworkOverrides;
    };
    RowCtrl2.prototype.onRowHeightChanged = function() {
      if (exists(this.rowNode.rowHeight)) {
        var heightPx_1 = this.rowNode.rowHeight + "px";
        this.allRowGuis.forEach(function(gui) {
          return gui.rowComp.setHeight(heightPx_1);
        });
      }
    };
    RowCtrl2.prototype.addEventListener = function(eventType, listener) {
      if (eventType === "renderedRowRemoved" || eventType === "rowRemoved") {
        eventType = Events.EVENT_VIRTUAL_ROW_REMOVED;
        console.warn("AG Grid: Since version 11, event renderedRowRemoved is now called " + Events.EVENT_VIRTUAL_ROW_REMOVED);
      }
      _super.prototype.addEventListener.call(this, eventType, listener);
    };
    RowCtrl2.prototype.removeEventListener = function(eventType, listener) {
      if (eventType === "renderedRowRemoved" || eventType === "rowRemoved") {
        eventType = Events.EVENT_VIRTUAL_ROW_REMOVED;
        console.warn("AG Grid: Since version 11, event renderedRowRemoved and rowRemoved is now called " + Events.EVENT_VIRTUAL_ROW_REMOVED);
      }
      _super.prototype.removeEventListener.call(this, eventType, listener);
    };
    RowCtrl2.prototype.destroyFirstPass = function() {
      this.active = false;
      this.setupRemoveAnimation();
      var event = this.createRowEvent(Events.EVENT_VIRTUAL_ROW_REMOVED);
      this.dispatchEvent(event);
      this.beans.eventService.dispatchEvent(event);
      _super.prototype.destroy.call(this);
    };
    RowCtrl2.prototype.setupRemoveAnimation = function() {
      var rowStillVisibleJustNotInViewport = this.rowNode.rowTop != null;
      if (rowStillVisibleJustNotInViewport) {
        var rowTop = this.roundRowTopToBounds(this.rowNode.rowTop);
        this.setRowTop(rowTop);
      } else {
        this.allRowGuis.forEach(function(gui) {
          return gui.rowComp.addOrRemoveCssClass("ag-opacity-zero", true);
        });
      }
    };
    RowCtrl2.prototype.destroySecondPass = function() {
      this.allRowGuis.length = 0;
      var destroyCellCtrls = function(ctrls) {
        ctrls.list.forEach(function(c) {
          return c.destroy();
        });
        return { list: [], map: {} };
      };
      this.centerCellCtrls = destroyCellCtrls(this.centerCellCtrls);
      this.leftCellCtrls = destroyCellCtrls(this.leftCellCtrls);
      this.rightCellCtrls = destroyCellCtrls(this.rightCellCtrls);
    };
    RowCtrl2.prototype.setFocusedClasses = function() {
      var _this = this;
      this.allRowGuis.forEach(function(gui) {
        gui.rowComp.addOrRemoveCssClass("ag-row-focus", _this.rowFocused);
        gui.rowComp.addOrRemoveCssClass("ag-row-no-focus", !_this.rowFocused);
      });
    };
    RowCtrl2.prototype.onCellFocusChanged = function() {
      var rowFocused = this.beans.focusService.isRowFocused(this.rowNode.rowIndex, this.rowNode.rowPinned);
      if (rowFocused !== this.rowFocused) {
        this.rowFocused = rowFocused;
        this.setFocusedClasses();
      }
      if (!rowFocused && this.editingRow) {
        this.stopEditing(false);
      }
    };
    RowCtrl2.prototype.onPaginationChanged = function() {
      var currentPage = this.beans.paginationProxy.getCurrentPage();
      if (this.paginationPage !== currentPage) {
        this.paginationPage = currentPage;
        this.onTopChanged();
      }
    };
    RowCtrl2.prototype.onTopChanged = function() {
      this.setRowTop(this.rowNode.rowTop);
    };
    RowCtrl2.prototype.onPaginationPixelOffsetChanged = function() {
      this.onTopChanged();
    };
    RowCtrl2.prototype.applyPaginationOffset = function(topPx, reverse) {
      if (reverse === void 0) {
        reverse = false;
      }
      if (this.rowNode.isRowPinned()) {
        return topPx;
      }
      var pixelOffset = this.beans.paginationProxy.getPixelOffset();
      var multiplier = reverse ? 1 : -1;
      return topPx + pixelOffset * multiplier;
    };
    RowCtrl2.prototype.setRowTop = function(pixels) {
      if (this.printLayout) {
        return;
      }
      if (exists(pixels)) {
        var afterPaginationPixels = this.applyPaginationOffset(pixels);
        var afterScalingPixels = this.rowNode.isRowPinned() ? afterPaginationPixels : this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels);
        var topPx = afterScalingPixels + "px";
        this.setRowTopStyle(topPx);
      }
    };
    RowCtrl2.prototype.getInitialRowTop = function() {
      return this.initialTop;
    };
    RowCtrl2.prototype.getInitialTransform = function() {
      return this.initialTransform;
    };
    RowCtrl2.prototype.setInitialRowTop = function() {
      if (this.printLayout) {
        return "";
      }
      var pixels = this.slideRowIn ? this.roundRowTopToBounds(this.rowNode.oldRowTop) : this.rowNode.rowTop;
      var afterPaginationPixels = this.applyPaginationOffset(pixels);
      var afterScalingPixels = this.rowNode.isRowPinned() ? afterPaginationPixels : this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels);
      var res = afterScalingPixels + "px";
      var suppressRowTransform = this.beans.gridOptionsWrapper.isSuppressRowTransform();
      if (suppressRowTransform) {
        this.initialTop = res;
      } else {
        this.initialTransform = "translateY(" + res + ")";
      }
    };
    RowCtrl2.prototype.setRowTopStyle = function(topPx) {
      var suppressRowTransform = this.beans.gridOptionsWrapper.isSuppressRowTransform();
      this.allRowGuis.forEach(function(gui) {
        return suppressRowTransform ? gui.rowComp.setTop(topPx) : gui.rowComp.setTransform("translateY(" + topPx + ")");
      });
    };
    RowCtrl2.prototype.getRowNode = function() {
      return this.rowNode;
    };
    RowCtrl2.prototype.getCellCtrl = function(column) {
      var res = null;
      this.getAllCellCtrls().forEach(function(cellCtrl) {
        if (cellCtrl.getColumn() == column) {
          res = cellCtrl;
        }
      });
      if (res != null) {
        return res;
      }
      this.getAllCellCtrls().forEach(function(cellCtrl) {
        if (cellCtrl.getColSpanningList().indexOf(column) >= 0) {
          res = cellCtrl;
        }
      });
      return res;
    };
    RowCtrl2.prototype.onRowIndexChanged = function() {
      if (this.rowNode.rowIndex != null) {
        this.onCellFocusChanged();
        this.updateRowIndexes();
      }
    };
    RowCtrl2.prototype.updateRowIndexes = function() {
      var _this = this;
      var rowIndexStr = this.rowNode.getRowIndexString();
      var headerRowCount = this.beans.headerNavigationService.getHeaderRowCount();
      var rowIsEven = this.rowNode.rowIndex % 2 === 0;
      this.allRowGuis.forEach(function(c) {
        c.rowComp.setRowIndex(rowIndexStr);
        c.rowComp.setAriaRowIndex(headerRowCount + _this.rowNode.rowIndex + 1);
        c.rowComp.addOrRemoveCssClass("ag-row-even", rowIsEven);
        c.rowComp.addOrRemoveCssClass("ag-row-odd", !rowIsEven);
      });
    };
    RowCtrl2.prototype.getPinnedLeftRowElement = function() {
      return this.leftGui ? this.leftGui.element : void 0;
    };
    RowCtrl2.prototype.getPinnedRightRowElement = function() {
      return this.rightGui ? this.rightGui.element : void 0;
    };
    RowCtrl2.prototype.getBodyRowElement = function() {
      return this.centerGui ? this.centerGui.element : void 0;
    };
    RowCtrl2.prototype.getFullWidthRowElement = function() {
      return this.fullWidthGui ? this.fullWidthGui.element : void 0;
    };
    RowCtrl2.DOM_DATA_KEY_RENDERED_ROW = "renderedRow";
    return RowCtrl2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$O = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$E = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __spreadArrays$6 = function() {
    for (var s = 0, i2 = 0, il = arguments.length; i2 < il; i2++)
      s += arguments[i2].length;
    for (var r = Array(s), k = 0, i2 = 0; i2 < il; i2++)
      for (var a = arguments[i2], j = 0, jl = a.length; j < jl; j++, k++)
        r[k] = a[j];
    return r;
  };
  var RowRenderer = function(_super) {
    __extends$O(RowRenderer2, _super);
    function RowRenderer2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.destroyFuncsForColumnListeners = [];
      _this.rowCtrlsByRowIndex = {};
      _this.zombieRowCtrls = {};
      _this.allRowCtrls = [];
      _this.topRowCtrls = [];
      _this.bottomRowCtrls = [];
      _this.refreshInProgress = false;
      return _this;
    }
    RowRenderer2.prototype.postConstruct = function() {
      var _this = this;
      this.ctrlsService.whenReady(function() {
        _this.gridBodyCtrl = _this.ctrlsService.getGridBodyCtrl();
        _this.initialise();
      });
    };
    RowRenderer2.prototype.initialise = function() {
      this.addManagedListener(this.eventService, Events.EVENT_PAGINATION_CHANGED, this.onPageLoaded.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_PINNED_ROW_DATA_CHANGED, this.onPinnedRowDataChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.onDisplayedColumnsChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_BODY_SCROLL, this.redrawAfterScroll.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_BODY_HEIGHT_CHANGED, this.redrawAfterScroll.bind(this));
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, this.onDomLayoutChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.onNewColumnsLoaded.bind(this));
      this.registerCellEventListeners();
      this.initialiseCache();
      this.printLayout = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
      this.embedFullWidthRows = this.printLayout || this.gridOptionsWrapper.isEmbedFullWidthRows();
      this.redrawAfterModelUpdate();
    };
    RowRenderer2.prototype.initialiseCache = function() {
      if (this.gridOptionsWrapper.isKeepDetailRows()) {
        var countProp = this.gridOptionsWrapper.getKeepDetailRowsCount();
        var count = countProp != null ? countProp : 3;
        this.cachedRowCtrls = new RowCtrlCache(count);
      }
    };
    RowRenderer2.prototype.getRowCtrls = function() {
      return this.allRowCtrls;
    };
    RowRenderer2.prototype.updateAllRowCtrls = function() {
      var liveList = getAllValuesInObject(this.rowCtrlsByRowIndex);
      if (this.beans.gridOptionsWrapper.isEnsureDomOrder()) {
        liveList.sort(function(a, b) {
          return a.getRowNode().rowIndex - b.getRowNode.rowIndex;
        });
      }
      var zombieList = getAllValuesInObject(this.zombieRowCtrls);
      var cachedList = this.cachedRowCtrls ? this.cachedRowCtrls.getEntries() : [];
      this.allRowCtrls = __spreadArrays$6(liveList, zombieList, cachedList);
    };
    RowRenderer2.prototype.registerCellEventListeners = function() {
      var _this = this;
      this.addManagedListener(this.eventService, Events.EVENT_CELL_FOCUSED, function(event) {
        _this.getAllCellCtrls().forEach(function(cellCtrl) {
          return cellCtrl.onCellFocused(event);
        });
        _this.getAllRowCtrls().forEach(function(rowCtrl) {
          if (rowCtrl.isFullWidth()) {
            rowCtrl.onFullWidthRowFocused(event);
          }
        });
      });
      this.addManagedListener(this.eventService, Events.EVENT_FLASH_CELLS, function(event) {
        _this.getAllCellCtrls().forEach(function(cellCtrl) {
          return cellCtrl.onFlashCells(event);
        });
      });
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_HOVER_CHANGED, function() {
        _this.getAllCellCtrls().forEach(function(cellCtrl) {
          return cellCtrl.onColumnHover();
        });
      });
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, function() {
        if (_this.printLayout) {
          _this.getAllCellCtrls().forEach(function(cellCtrl) {
            return cellCtrl.onLeftChanged();
          });
        }
      });
      var rangeSelectionEnabled = this.gridOptionsWrapper.isEnableRangeSelection();
      if (rangeSelectionEnabled) {
        this.addManagedListener(this.eventService, Events.EVENT_RANGE_SELECTION_CHANGED, function() {
          _this.getAllCellCtrls().forEach(function(cellCtrl) {
            return cellCtrl.onRangeSelectionChanged();
          });
        });
        this.addManagedListener(this.eventService, Events.EVENT_COLUMN_MOVED, function() {
          _this.getAllCellCtrls().forEach(function(cellCtrl) {
            return cellCtrl.updateRangeBordersIfRangeCount();
          });
        });
        this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PINNED, function() {
          _this.getAllCellCtrls().forEach(function(cellCtrl) {
            return cellCtrl.updateRangeBordersIfRangeCount();
          });
        });
        this.addManagedListener(this.eventService, Events.EVENT_COLUMN_VISIBLE, function() {
          _this.getAllCellCtrls().forEach(function(cellCtrl) {
            return cellCtrl.updateRangeBordersIfRangeCount();
          });
        });
      }
      this.refreshListenersToColumnsForCellComps();
      this.addManagedListener(this.eventService, Events.EVENT_GRID_COLUMNS_CHANGED, this.refreshListenersToColumnsForCellComps.bind(this));
      this.addDestroyFunc(this.removeGridColumnListeners.bind(this));
    };
    RowRenderer2.prototype.removeGridColumnListeners = function() {
      this.destroyFuncsForColumnListeners.forEach(function(func) {
        return func();
      });
      this.destroyFuncsForColumnListeners.length = 0;
    };
    RowRenderer2.prototype.refreshListenersToColumnsForCellComps = function() {
      var _this = this;
      this.removeGridColumnListeners();
      var cols = this.columnModel.getAllGridColumns();
      if (!cols) {
        return;
      }
      cols.forEach(function(col) {
        var forEachCellWithThisCol = function(callback) {
          _this.getAllCellCtrls().forEach(function(cellCtrl) {
            if (cellCtrl.getColumn() === col) {
              callback(cellCtrl);
            }
          });
        };
        var leftChangedListener = function() {
          forEachCellWithThisCol(function(cellCtrl) {
            return cellCtrl.onLeftChanged();
          });
        };
        var widthChangedListener = function() {
          forEachCellWithThisCol(function(cellCtrl) {
            return cellCtrl.onWidthChanged();
          });
        };
        var firstRightPinnedChangedListener = function() {
          forEachCellWithThisCol(function(cellCtrl) {
            return cellCtrl.onFirstRightPinnedChanged();
          });
        };
        var lastLeftPinnedChangedListener = function() {
          forEachCellWithThisCol(function(cellCtrl) {
            return cellCtrl.onLastLeftPinnedChanged();
          });
        };
        col.addEventListener(Column.EVENT_LEFT_CHANGED, leftChangedListener);
        col.addEventListener(Column.EVENT_WIDTH_CHANGED, widthChangedListener);
        col.addEventListener(Column.EVENT_FIRST_RIGHT_PINNED_CHANGED, firstRightPinnedChangedListener);
        col.addEventListener(Column.EVENT_LAST_LEFT_PINNED_CHANGED, lastLeftPinnedChangedListener);
        _this.destroyFuncsForColumnListeners.push(function() {
          col.removeEventListener(Column.EVENT_LEFT_CHANGED, leftChangedListener);
          col.removeEventListener(Column.EVENT_WIDTH_CHANGED, widthChangedListener);
          col.removeEventListener(Column.EVENT_FIRST_RIGHT_PINNED_CHANGED, firstRightPinnedChangedListener);
          col.removeEventListener(Column.EVENT_LAST_LEFT_PINNED_CHANGED, lastLeftPinnedChangedListener);
        });
      });
    };
    RowRenderer2.prototype.onDomLayoutChanged = function() {
      var printLayout = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
      var embedFullWidthRows = printLayout || this.gridOptionsWrapper.isEmbedFullWidthRows();
      var destroyRows = embedFullWidthRows !== this.embedFullWidthRows || this.printLayout !== printLayout;
      this.printLayout = printLayout;
      this.embedFullWidthRows = embedFullWidthRows;
      if (destroyRows) {
        this.redrawAfterModelUpdate();
      }
    };
    RowRenderer2.prototype.datasourceChanged = function() {
      this.firstRenderedRow = 0;
      this.lastRenderedRow = -1;
      var rowIndexesToRemove = Object.keys(this.rowCtrlsByRowIndex);
      this.removeRowCtrls(rowIndexesToRemove);
    };
    RowRenderer2.prototype.onPageLoaded = function(event) {
      var params2 = {
        recycleRows: event.keepRenderedRows,
        animate: event.animate,
        newData: event.newData,
        newPage: event.newPage,
        onlyBody: true
      };
      this.redrawAfterModelUpdate(params2);
    };
    RowRenderer2.prototype.getAllCellsForColumn = function(column) {
      var res = [];
      this.getAllRowCtrls().forEach(function(rowCtrl) {
        var eCell = rowCtrl.getCellElement(column);
        if (eCell) {
          res.push(eCell);
        }
      });
      return res;
    };
    RowRenderer2.prototype.refreshFloatingRowComps = function() {
      this.refreshFloatingRows(this.topRowCtrls, this.pinnedRowModel.getPinnedTopRowData());
      this.refreshFloatingRows(this.bottomRowCtrls, this.pinnedRowModel.getPinnedBottomRowData());
    };
    RowRenderer2.prototype.getTopRowCtrls = function() {
      return this.topRowCtrls;
    };
    RowRenderer2.prototype.getBottomRowCtrls = function() {
      return this.bottomRowCtrls;
    };
    RowRenderer2.prototype.refreshFloatingRows = function(rowComps, rowNodes) {
      var _this = this;
      rowComps.forEach(function(row) {
        row.destroyFirstPass();
        row.destroySecondPass();
      });
      rowComps.length = 0;
      if (!rowNodes) {
        return;
      }
      rowNodes.forEach(function(rowNode) {
        var rowCon = new RowCtrl(_this.$scope, rowNode, _this.beans, false, false, _this.printLayout);
        rowComps.push(rowCon);
      });
    };
    RowRenderer2.prototype.onPinnedRowDataChanged = function() {
      var params2 = {
        recycleRows: true
      };
      this.redrawAfterModelUpdate(params2);
    };
    RowRenderer2.prototype.getRenderedIndexesForRowNodes = function(rowNodes) {
      var result = [];
      if (missing(rowNodes)) {
        return result;
      }
      iterateObject(this.rowCtrlsByRowIndex, function(index, renderedRow) {
        var rowNode = renderedRow.getRowNode();
        if (rowNodes.indexOf(rowNode) >= 0) {
          result.push(index);
        }
      });
      return result;
    };
    RowRenderer2.prototype.redrawRows = function(rowNodes) {
      var partialRefresh = rowNodes != null && rowNodes.length > 0;
      if (partialRefresh) {
        var indexesToRemove = this.getRenderedIndexesForRowNodes(rowNodes);
        this.removeRowCtrls(indexesToRemove);
      }
      this.redrawAfterModelUpdate({
        recycleRows: partialRefresh
      });
    };
    RowRenderer2.prototype.getCellToRestoreFocusToAfterRefresh = function(params2) {
      var focusedCell = params2.suppressKeepFocus ? null : this.focusService.getFocusCellToUseAfterRefresh();
      if (missing(focusedCell)) {
        return null;
      }
      var activeElement = document.activeElement;
      var domData = this.gridOptionsWrapper.getDomData(activeElement, CellCtrl.DOM_DATA_KEY_CELL_CTRL);
      var elementIsNotACellDev = missing(domData);
      return elementIsNotACellDev ? null : focusedCell;
    };
    RowRenderer2.prototype.redrawAfterModelUpdate = function(params2) {
      if (params2 === void 0) {
        params2 = {};
      }
      this.getLockOnRefresh();
      var focusedCell = this.getCellToRestoreFocusToAfterRefresh(params2);
      this.updateContainerHeights();
      this.scrollToTopIfNewData(params2);
      var recycleRows = !this.printLayout && !!params2.recycleRows;
      var animate = params2.animate && this.gridOptionsWrapper.isAnimateRows();
      var rowsToRecycle = recycleRows ? this.recycleRows() : null;
      if (!recycleRows) {
        this.removeAllRowComps();
      }
      var isFocusedCellGettingRecycled = function() {
        if (focusedCell == null || rowsToRecycle == null) {
          return false;
        }
        var res = false;
        iterateObject(rowsToRecycle, function(key, rowComp) {
          var rowNode = rowComp.getRowNode();
          var rowIndexEqual = rowNode.rowIndex == focusedCell.rowIndex;
          var pinnedEqual = rowNode.rowPinned == focusedCell.rowPinned;
          if (rowIndexEqual && pinnedEqual) {
            res = true;
          }
        });
        return res;
      };
      var focusedCellRecycled = isFocusedCellGettingRecycled();
      this.redraw(rowsToRecycle, animate);
      if (!params2.onlyBody) {
        this.refreshFloatingRowComps();
      }
      this.dispatchDisplayedRowsChanged();
      if (!focusedCellRecycled) {
        this.restoreFocusedCell(focusedCell);
      }
      this.releaseLockOnRefresh();
    };
    RowRenderer2.prototype.scrollToTopIfNewData = function(params2) {
      var scrollToTop = params2.newData || params2.newPage;
      var suppressScrollToTop = this.gridOptionsWrapper.isSuppressScrollOnNewData();
      if (scrollToTop && !suppressScrollToTop) {
        this.gridBodyCtrl.getScrollFeature().scrollToTop();
      }
    };
    RowRenderer2.prototype.updateContainerHeights = function() {
      if (this.printLayout) {
        this.rowContainerHeightService.setModelHeight(null);
        return;
      }
      var containerHeight = this.paginationProxy.getCurrentPageHeight();
      if (containerHeight === 0) {
        containerHeight = 1;
      }
      this.rowContainerHeightService.setModelHeight(containerHeight);
    };
    RowRenderer2.prototype.getLockOnRefresh = function() {
      if (this.refreshInProgress) {
        throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.refreshView(), call setTimeout(function() { api.refreshView(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");
      }
      this.refreshInProgress = true;
    };
    RowRenderer2.prototype.releaseLockOnRefresh = function() {
      this.refreshInProgress = false;
    };
    RowRenderer2.prototype.restoreFocusedCell = function(cellPosition) {
      if (cellPosition) {
        this.focusService.setFocusedCell(cellPosition.rowIndex, cellPosition.column, cellPosition.rowPinned, true);
      }
    };
    RowRenderer2.prototype.stopEditing = function(cancel) {
      if (cancel === void 0) {
        cancel = false;
      }
      this.getAllRowCtrls().forEach(function(rowCtrl) {
        rowCtrl.stopEditing(cancel);
      });
    };
    RowRenderer2.prototype.onNewColumnsLoaded = function() {
      this.getAllCellCtrls().forEach(function(cellCtrl) {
        return cellCtrl.onNewColumnsLoaded();
      });
    };
    RowRenderer2.prototype.getAllCellCtrls = function() {
      var res = [];
      this.getAllRowCtrls().forEach(function(rowCtrl) {
        return res = res.concat(rowCtrl.getAllCellCtrls());
      });
      return res;
    };
    RowRenderer2.prototype.getAllRowCtrls = function() {
      var _this = this;
      var res = __spreadArrays$6(this.topRowCtrls, this.bottomRowCtrls);
      Object.keys(this.rowCtrlsByRowIndex).forEach(function(key) {
        return res.push(_this.rowCtrlsByRowIndex[key]);
      });
      return res;
    };
    RowRenderer2.prototype.addRenderedRowListener = function(eventName, rowIndex, callback) {
      var rowComp = this.rowCtrlsByRowIndex[rowIndex];
      if (rowComp) {
        rowComp.addEventListener(eventName, callback);
      }
    };
    RowRenderer2.prototype.flashCells = function(params2) {
      if (params2 === void 0) {
        params2 = {};
      }
      var flashDelay = params2.flashDelay, fadeDelay = params2.fadeDelay;
      this.getCellCtrls(params2.rowNodes, params2.columns).forEach(function(cellCtrl) {
        return cellCtrl.flashCell({ flashDelay, fadeDelay });
      });
    };
    RowRenderer2.prototype.refreshCells = function(params2) {
      if (params2 === void 0) {
        params2 = {};
      }
      var refreshCellParams = {
        forceRefresh: params2.force,
        newData: false,
        suppressFlash: params2.suppressFlash
      };
      this.getCellCtrls(params2.rowNodes, params2.columns).forEach(function(cellCtrl) {
        if (cellCtrl.refreshShouldDestroy()) {
          var rowCtrl = cellCtrl.getRowCtrl();
          if (rowCtrl) {
            rowCtrl.refreshCell(cellCtrl);
          }
        } else {
          cellCtrl.refreshCell(refreshCellParams);
        }
      });
    };
    RowRenderer2.prototype.getCellRendererInstances = function(params2) {
      var res = this.getCellCtrls(params2.rowNodes, params2.columns).map(function(cellCtrl) {
        return cellCtrl.getCellRenderer();
      }).filter(function(renderer) {
        return renderer != null;
      });
      return res;
    };
    RowRenderer2.prototype.getCellEditorInstances = function(params2) {
      var res = [];
      this.getCellCtrls(params2.rowNodes, params2.columns).forEach(function(cellCtrl) {
        var cellEditor = cellCtrl.getCellEditor();
        if (cellEditor) {
          res.push(cellEditor);
        }
      });
      return res;
    };
    RowRenderer2.prototype.getEditingCells = function() {
      var res = [];
      this.getAllCellCtrls().forEach(function(cellCtrl) {
        if (cellCtrl.isEditing()) {
          var cellPosition = cellCtrl.getCellPosition();
          res.push(cellPosition);
        }
      });
      return res;
    };
    RowRenderer2.prototype.getCellCtrls = function(rowNodes, columns) {
      var _this = this;
      var rowIdsMap;
      var res = [];
      if (exists(rowNodes)) {
        rowIdsMap = {
          top: {},
          bottom: {},
          normal: {}
        };
        rowNodes.forEach(function(rowNode) {
          var id = rowNode.id;
          if (rowNode.rowPinned === Constants.PINNED_TOP) {
            rowIdsMap.top[id] = true;
          } else if (rowNode.rowPinned === Constants.PINNED_BOTTOM) {
            rowIdsMap.bottom[id] = true;
          } else {
            rowIdsMap.normal[id] = true;
          }
        });
      }
      var colIdsMap;
      if (exists(columns)) {
        colIdsMap = {};
        columns.forEach(function(colKey) {
          var column = _this.columnModel.getGridColumn(colKey);
          if (exists(column)) {
            colIdsMap[column.getId()] = true;
          }
        });
      }
      var processRow = function(rowComp) {
        var rowNode = rowComp.getRowNode();
        var id = rowNode.id;
        var floating = rowNode.rowPinned;
        if (exists(rowIdsMap)) {
          if (floating === Constants.PINNED_BOTTOM) {
            if (!rowIdsMap.bottom[id]) {
              return;
            }
          } else if (floating === Constants.PINNED_TOP) {
            if (!rowIdsMap.top[id]) {
              return;
            }
          } else {
            if (!rowIdsMap.normal[id]) {
              return;
            }
          }
        }
        rowComp.getAllCellCtrls().forEach(function(cellCtrl) {
          var colId = cellCtrl.getColumn().getId();
          var excludeColFromRefresh = colIdsMap && !colIdsMap[colId];
          if (excludeColFromRefresh) {
            return;
          }
          res.push(cellCtrl);
        });
      };
      iterateObject(this.rowCtrlsByRowIndex, function(index, rowComp) {
        processRow(rowComp);
      });
      if (this.topRowCtrls) {
        this.topRowCtrls.forEach(processRow);
      }
      if (this.bottomRowCtrls) {
        this.bottomRowCtrls.forEach(processRow);
      }
      return res;
    };
    RowRenderer2.prototype.destroy = function() {
      this.removeAllRowComps();
      _super.prototype.destroy.call(this);
    };
    RowRenderer2.prototype.removeAllRowComps = function() {
      var rowIndexesToRemove = Object.keys(this.rowCtrlsByRowIndex);
      this.removeRowCtrls(rowIndexesToRemove);
    };
    RowRenderer2.prototype.recycleRows = function() {
      var stubNodeIndexes = [];
      iterateObject(this.rowCtrlsByRowIndex, function(index, rowComp) {
        var stubNode = rowComp.getRowNode().id == null;
        if (stubNode) {
          stubNodeIndexes.push(index);
        }
      });
      this.removeRowCtrls(stubNodeIndexes);
      var nodesByIdMap = {};
      iterateObject(this.rowCtrlsByRowIndex, function(index, rowComp) {
        var rowNode = rowComp.getRowNode();
        nodesByIdMap[rowNode.id] = rowComp;
      });
      this.rowCtrlsByRowIndex = {};
      return nodesByIdMap;
    };
    RowRenderer2.prototype.removeRowCtrls = function(rowsToRemove) {
      var _this = this;
      rowsToRemove.forEach(function(indexToRemove) {
        var rowCtrl = _this.rowCtrlsByRowIndex[indexToRemove];
        if (rowCtrl) {
          rowCtrl.destroyFirstPass();
          rowCtrl.destroySecondPass();
        }
        delete _this.rowCtrlsByRowIndex[indexToRemove];
      });
    };
    RowRenderer2.prototype.redrawAfterScroll = function() {
      this.getLockOnRefresh();
      this.redraw(null, false, true);
      this.releaseLockOnRefresh();
      this.dispatchDisplayedRowsChanged();
    };
    RowRenderer2.prototype.removeRowCompsNotToDraw = function(indexesToDraw) {
      var indexesToDrawMap = {};
      indexesToDraw.forEach(function(index) {
        return indexesToDrawMap[index] = true;
      });
      var existingIndexes = Object.keys(this.rowCtrlsByRowIndex);
      var indexesNotToDraw = existingIndexes.filter(function(index) {
        return !indexesToDrawMap[index];
      });
      this.removeRowCtrls(indexesNotToDraw);
    };
    RowRenderer2.prototype.calculateIndexesToDraw = function(rowsToRecycle) {
      var _this = this;
      var indexesToDraw = createArrayOfNumbers(this.firstRenderedRow, this.lastRenderedRow);
      var checkRowToDraw = function(indexStr, rowComp) {
        var index = rowComp.getRowNode().rowIndex;
        if (index == null) {
          return;
        }
        if (index < _this.firstRenderedRow || index > _this.lastRenderedRow) {
          if (_this.doNotUnVirtualiseRow(rowComp)) {
            indexesToDraw.push(index);
          }
        }
      };
      iterateObject(this.rowCtrlsByRowIndex, checkRowToDraw);
      iterateObject(rowsToRecycle, checkRowToDraw);
      indexesToDraw.sort(function(a, b) {
        return a - b;
      });
      return indexesToDraw;
    };
    RowRenderer2.prototype.redraw = function(rowsToRecycle, animate, afterScroll) {
      var _this = this;
      if (animate === void 0) {
        animate = false;
      }
      if (afterScroll === void 0) {
        afterScroll = false;
      }
      this.rowContainerHeightService.updateOffset();
      this.workOutFirstAndLastRowsToRender();
      var indexesToDraw = this.calculateIndexesToDraw(rowsToRecycle);
      this.removeRowCompsNotToDraw(indexesToDraw);
      if (this.printLayout) {
        animate = false;
      }
      indexesToDraw.forEach(function(rowIndex) {
        var rowCtrl = _this.createOrUpdateRowCtrl(rowIndex, rowsToRecycle, animate, afterScroll);
        if (exists(rowCtrl))
          ;
      });
      if (rowsToRecycle) {
        var useAnimationFrame = afterScroll && !this.gridOptionsWrapper.isSuppressAnimationFrame() && !this.printLayout;
        if (useAnimationFrame) {
          this.beans.animationFrameService.addDestroyTask(function() {
            _this.destroyRowCtrls(rowsToRecycle, animate);
            _this.updateAllRowCtrls();
            _this.dispatchDisplayedRowsChanged();
          });
        } else {
          this.destroyRowCtrls(rowsToRecycle, animate);
        }
      }
      this.updateAllRowCtrls();
      this.checkAngularCompile();
      this.gridBodyCtrl.updateRowCount();
    };
    RowRenderer2.prototype.dispatchDisplayedRowsChanged = function() {
      var event = { type: Events.EVENT_DISPLAYED_ROWS_CHANGED };
      this.eventService.dispatchEvent(event);
    };
    RowRenderer2.prototype.onDisplayedColumnsChanged = function() {
      var pinningLeft = this.columnModel.isPinningLeft();
      var pinningRight = this.columnModel.isPinningRight();
      var atLeastOneChanged = this.pinningLeft !== pinningLeft || pinningRight !== this.pinningRight;
      if (atLeastOneChanged) {
        this.pinningLeft = pinningLeft;
        this.pinningRight = pinningRight;
        if (this.embedFullWidthRows) {
          this.redrawFullWidthEmbeddedRows();
        }
      }
    };
    RowRenderer2.prototype.redrawFullWidthEmbeddedRows = function() {
      var rowsToRemove = [];
      iterateObject(this.rowCtrlsByRowIndex, function(id, rowComp) {
        if (rowComp.isFullWidth()) {
          var rowIndex = rowComp.getRowNode().rowIndex;
          rowsToRemove.push(rowIndex.toString());
        }
      });
      this.refreshFloatingRowComps();
      this.removeRowCtrls(rowsToRemove);
      this.redrawAfterScroll();
    };
    RowRenderer2.prototype.refreshFullWidthRows = function(rowNodesToRefresh) {
      var rowsToRemove = [];
      var selectivelyRefreshing = !!rowNodesToRefresh;
      var idsToRefresh = selectivelyRefreshing ? {} : void 0;
      if (selectivelyRefreshing && idsToRefresh) {
        rowNodesToRefresh.forEach(function(r) {
          return idsToRefresh[r.id] = true;
        });
      }
      iterateObject(this.rowCtrlsByRowIndex, function(id, rowCtrl) {
        if (!rowCtrl.isFullWidth()) {
          return;
        }
        var rowNode = rowCtrl.getRowNode();
        if (selectivelyRefreshing && idsToRefresh) {
          var parentId = rowNode.level > 0 && rowNode.parent ? rowNode.parent.id : void 0;
          var skipThisNode = !idsToRefresh[rowNode.id] && !idsToRefresh[parentId];
          if (skipThisNode) {
            return;
          }
        }
        var fullWidthRowsRefreshed = rowCtrl.refreshFullWidth();
        if (!fullWidthRowsRefreshed) {
          var rowIndex = rowCtrl.getRowNode().rowIndex;
          rowsToRemove.push(rowIndex.toString());
        }
      });
      this.removeRowCtrls(rowsToRemove);
      this.redrawAfterScroll();
    };
    RowRenderer2.prototype.createOrUpdateRowCtrl = function(rowIndex, rowsToRecycle, animate, afterScroll) {
      var rowNode;
      var rowCon = this.rowCtrlsByRowIndex[rowIndex];
      if (!rowCon) {
        rowNode = this.paginationProxy.getRow(rowIndex);
        if (exists(rowNode) && exists(rowsToRecycle) && rowsToRecycle[rowNode.id] && rowNode.alreadyRendered) {
          rowCon = rowsToRecycle[rowNode.id];
          rowsToRecycle[rowNode.id] = null;
        }
      }
      var creatingNewRowCon = !rowCon;
      if (creatingNewRowCon) {
        if (!rowNode) {
          rowNode = this.paginationProxy.getRow(rowIndex);
        }
        if (exists(rowNode)) {
          rowCon = this.createRowCon(rowNode, animate, afterScroll);
        } else {
          return;
        }
      }
      if (rowNode) {
        rowNode.alreadyRendered = true;
      }
      this.rowCtrlsByRowIndex[rowIndex] = rowCon;
      return rowCon;
    };
    RowRenderer2.prototype.destroyRowCtrls = function(rowCtrlsMap, animate) {
      var _this = this;
      var executeInAWhileFuncs = [];
      iterateObject(rowCtrlsMap, function(nodeId, rowCtrl) {
        if (!rowCtrl) {
          return;
        }
        if (_this.cachedRowCtrls && rowCtrl.isCacheable()) {
          _this.cachedRowCtrls.addRow(rowCtrl);
          return;
        }
        rowCtrl.destroyFirstPass();
        if (animate) {
          _this.zombieRowCtrls[rowCtrl.getInstanceId()] = rowCtrl;
          executeInAWhileFuncs.push(function() {
            rowCtrl.destroySecondPass();
            delete _this.zombieRowCtrls[rowCtrl.getInstanceId()];
          });
        } else {
          rowCtrl.destroySecondPass();
        }
      });
      if (animate) {
        executeInAWhileFuncs.push(function() {
          _this.updateAllRowCtrls();
          _this.dispatchDisplayedRowsChanged();
        });
        executeInAWhile(executeInAWhileFuncs);
      }
    };
    RowRenderer2.prototype.checkAngularCompile = function() {
      var _this = this;
      if (this.gridOptionsWrapper.isAngularCompileRows()) {
        window.setTimeout(function() {
          _this.$scope.$apply();
        }, 0);
      }
    };
    RowRenderer2.prototype.workOutFirstAndLastRowsToRender = function() {
      var _this = this;
      var newFirst;
      var newLast;
      if (!this.paginationProxy.isRowsToRender()) {
        newFirst = 0;
        newLast = -1;
      } else if (this.printLayout) {
        newFirst = this.paginationProxy.getPageFirstRow();
        newLast = this.paginationProxy.getPageLastRow();
      } else {
        var bufferPixels = this.gridOptionsWrapper.getRowBufferInPixels();
        var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
        var rowHeightsChanged = false;
        var firstPixel = void 0;
        var lastPixel = void 0;
        do {
          var paginationOffset = this.paginationProxy.getPixelOffset();
          var _a = this.paginationProxy.getCurrentPagePixelRange(), pageFirstPixel = _a.pageFirstPixel, pageLastPixel = _a.pageLastPixel;
          var divStretchOffset = this.rowContainerHeightService.getDivStretchOffset();
          var bodyVRange = gridBodyCon.getScrollFeature().getVScrollPosition();
          var bodyTopPixel = bodyVRange.top;
          var bodyBottomPixel = bodyVRange.bottom;
          firstPixel = Math.max(bodyTopPixel + paginationOffset - bufferPixels, pageFirstPixel) + divStretchOffset;
          lastPixel = Math.min(bodyBottomPixel + paginationOffset + bufferPixels, pageLastPixel) + divStretchOffset;
          rowHeightsChanged = this.ensureAllRowsInRangeHaveHeightsCalculated(firstPixel, lastPixel);
        } while (rowHeightsChanged);
        var firstRowIndex = this.paginationProxy.getRowIndexAtPixel(firstPixel);
        var lastRowIndex = this.paginationProxy.getRowIndexAtPixel(lastPixel);
        var pageFirstRow = this.paginationProxy.getPageFirstRow();
        var pageLastRow = this.paginationProxy.getPageLastRow();
        if (firstRowIndex < pageFirstRow) {
          firstRowIndex = pageFirstRow;
        }
        if (lastRowIndex > pageLastRow) {
          lastRowIndex = pageLastRow;
        }
        newFirst = firstRowIndex;
        newLast = lastRowIndex;
      }
      var rowLayoutNormal = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_NORMAL;
      var suppressRowCountRestriction = this.gridOptionsWrapper.isSuppressMaxRenderedRowRestriction();
      var rowBufferMaxSize = Math.max(this.gridOptionsWrapper.getRowBuffer(), 500);
      if (rowLayoutNormal && !suppressRowCountRestriction) {
        if (newLast - newFirst > rowBufferMaxSize) {
          newLast = newFirst + rowBufferMaxSize;
        }
      }
      var firstDiffers = newFirst !== this.firstRenderedRow;
      var lastDiffers = newLast !== this.lastRenderedRow;
      if (firstDiffers || lastDiffers) {
        this.firstRenderedRow = newFirst;
        this.lastRenderedRow = newLast;
        var event_1 = {
          type: Events.EVENT_VIEWPORT_CHANGED,
          firstRow: newFirst,
          lastRow: newLast,
          api: this.gridApi,
          columnApi: this.columnApi
        };
        this.eventService.dispatchEvent(event_1);
      }
      if (this.paginationProxy.isRowsToRender()) {
        var event_2 = {
          type: Events.EVENT_FIRST_DATA_RENDERED,
          firstRow: newFirst,
          lastRow: newLast,
          api: this.gridApi,
          columnApi: this.columnApi
        };
        window.setTimeout(function() {
          return _this.eventService.dispatchEventOnce(event_2);
        }, 50);
      }
    };
    RowRenderer2.prototype.ensureAllRowsInRangeHaveHeightsCalculated = function(topPixel, bottomPixel) {
      var res = this.paginationProxy.ensureRowHeightsValid(topPixel, bottomPixel, -1, -1);
      if (res) {
        this.updateContainerHeights();
      }
      return res;
    };
    RowRenderer2.prototype.getFirstVirtualRenderedRow = function() {
      return this.firstRenderedRow;
    };
    RowRenderer2.prototype.getLastVirtualRenderedRow = function() {
      return this.lastRenderedRow;
    };
    RowRenderer2.prototype.doNotUnVirtualiseRow = function(rowComp) {
      var REMOVE_ROW = false;
      var KEEP_ROW = true;
      var rowNode = rowComp.getRowNode();
      var rowHasFocus = this.focusService.isRowNodeFocused(rowNode);
      var rowIsEditing = rowComp.isEditing();
      var rowIsDetail = rowNode.detail;
      var mightWantToKeepRow = rowHasFocus || rowIsEditing || rowIsDetail;
      if (!mightWantToKeepRow) {
        return REMOVE_ROW;
      }
      var rowNodePresent = this.paginationProxy.isRowPresent(rowNode);
      return rowNodePresent ? KEEP_ROW : REMOVE_ROW;
    };
    RowRenderer2.prototype.createRowCon = function(rowNode, animate, afterScroll) {
      var rowCtrlFromCache = this.cachedRowCtrls ? this.cachedRowCtrls.getRow(rowNode) : null;
      if (rowCtrlFromCache) {
        return rowCtrlFromCache;
      }
      var suppressAnimationFrame = this.gridOptionsWrapper.isSuppressAnimationFrame();
      var useAnimationFrameForCreate = afterScroll && !suppressAnimationFrame && !this.printLayout;
      var res = new RowCtrl(this.$scope, rowNode, this.beans, animate, useAnimationFrameForCreate, this.printLayout);
      return res;
    };
    RowRenderer2.prototype.getRenderedNodes = function() {
      var renderedRows = this.rowCtrlsByRowIndex;
      return Object.keys(renderedRows).map(function(key) {
        return renderedRows[key].getRowNode();
      });
    };
    RowRenderer2.prototype.getRowByPosition = function(rowPosition) {
      var rowComponent;
      switch (rowPosition.rowPinned) {
        case Constants.PINNED_TOP:
          rowComponent = this.topRowCtrls[rowPosition.rowIndex];
          break;
        case Constants.PINNED_BOTTOM:
          rowComponent = this.bottomRowCtrls[rowPosition.rowIndex];
          break;
        default:
          rowComponent = this.rowCtrlsByRowIndex[rowPosition.rowIndex];
          break;
      }
      return rowComponent;
    };
    RowRenderer2.prototype.getRowNode = function(gridRow) {
      switch (gridRow.rowPinned) {
        case Constants.PINNED_TOP:
          return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];
        case Constants.PINNED_BOTTOM:
          return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];
        default:
          return this.rowModel.getRow(gridRow.rowIndex);
      }
    };
    RowRenderer2.prototype.isRangeInRenderedViewport = function(startIndex, endIndex) {
      var parentClosed = startIndex == null || endIndex == null;
      if (parentClosed) {
        return false;
      }
      var blockAfterViewport = startIndex > this.lastRenderedRow;
      var blockBeforeViewport = endIndex < this.firstRenderedRow;
      var blockInsideViewport = !blockBeforeViewport && !blockAfterViewport;
      return blockInsideViewport;
    };
    __decorate$E([
      Autowired("paginationProxy")
    ], RowRenderer2.prototype, "paginationProxy", void 0);
    __decorate$E([
      Autowired("columnModel")
    ], RowRenderer2.prototype, "columnModel", void 0);
    __decorate$E([
      Autowired("$scope")
    ], RowRenderer2.prototype, "$scope", void 0);
    __decorate$E([
      Autowired("pinnedRowModel")
    ], RowRenderer2.prototype, "pinnedRowModel", void 0);
    __decorate$E([
      Autowired("rowModel")
    ], RowRenderer2.prototype, "rowModel", void 0);
    __decorate$E([
      Autowired("focusService")
    ], RowRenderer2.prototype, "focusService", void 0);
    __decorate$E([
      Autowired("columnApi")
    ], RowRenderer2.prototype, "columnApi", void 0);
    __decorate$E([
      Autowired("gridApi")
    ], RowRenderer2.prototype, "gridApi", void 0);
    __decorate$E([
      Autowired("beans")
    ], RowRenderer2.prototype, "beans", void 0);
    __decorate$E([
      Autowired("rowContainerHeightService")
    ], RowRenderer2.prototype, "rowContainerHeightService", void 0);
    __decorate$E([
      Optional("ctrlsService")
    ], RowRenderer2.prototype, "ctrlsService", void 0);
    __decorate$E([
      PostConstruct
    ], RowRenderer2.prototype, "postConstruct", null);
    RowRenderer2 = __decorate$E([
      Bean("rowRenderer")
    ], RowRenderer2);
    return RowRenderer2;
  }(BeanStub);
  var RowCtrlCache = function() {
    function RowCtrlCache2(maxCount) {
      this.entriesMap = {};
      this.entriesList = [];
      this.maxCount = maxCount;
    }
    RowCtrlCache2.prototype.toString = function() {
      return this.entriesList.map(function(item) {
        return item.getRowNode().data.name;
      }).join(", ");
    };
    RowCtrlCache2.prototype.addRow = function(rowCtrl) {
      this.entriesMap[rowCtrl.getRowNode().id] = rowCtrl;
      this.entriesList.push(rowCtrl);
      rowCtrl.setCached(true);
      if (this.entriesList.length > this.maxCount) {
        var rowCtrlToDestroy = this.entriesList[0];
        rowCtrlToDestroy.destroyFirstPass();
        rowCtrlToDestroy.destroySecondPass();
        this.removeFromCache(rowCtrlToDestroy);
      }
    };
    RowCtrlCache2.prototype.getRow = function(rowNode) {
      if (rowNode == null || rowNode.id == null) {
        return null;
      }
      var res = this.entriesMap[rowNode.id];
      if (!res) {
        return null;
      }
      this.removeFromCache(res);
      res.setCached(false);
      var rowNodeMismatch = res.getRowNode() != rowNode;
      return rowNodeMismatch ? null : res;
    };
    RowCtrlCache2.prototype.removeFromCache = function(rowCtrl) {
      var rowNodeId = rowCtrl.getRowNode().id;
      delete this.entriesMap[rowNodeId];
      removeFromArray(this.entriesList, rowCtrl);
    };
    RowCtrlCache2.prototype.getEntries = function() {
      return this.entriesList;
    };
    return RowCtrlCache2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$P = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$F = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AbstractHeaderCellComp = function(_super) {
    __extends$P(AbstractHeaderCellComp2, _super);
    function AbstractHeaderCellComp2(template, ctrl) {
      var _this = _super.call(this, template) || this;
      _this.ctrl = ctrl;
      return _this;
    }
    AbstractHeaderCellComp2.prototype.shouldStopEventPropagation = function(e) {
      var _a = this.focusService.getFocusedHeader(), headerRowIndex = _a.headerRowIndex, column = _a.column;
      return isUserSuppressingHeaderKeyboardEvent(this.gridOptionsWrapper, e, headerRowIndex, column);
    };
    AbstractHeaderCellComp2.prototype.getCtrl = function() {
      return this.ctrl;
    };
    __decorate$F([
      Autowired("focusService")
    ], AbstractHeaderCellComp2.prototype, "focusService", void 0);
    return AbstractHeaderCellComp2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$Q = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$G = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var HeaderCellComp = function(_super) {
    __extends$Q(HeaderCellComp2, _super);
    function HeaderCellComp2(ctrl) {
      var _this = _super.call(this, HeaderCellComp2.TEMPLATE, ctrl) || this;
      _this.headerCompVersion = 0;
      _this.column = ctrl.getColumnGroupChild();
      _this.pinned = ctrl.getPinned();
      return _this;
    }
    HeaderCellComp2.prototype.postConstruct = function() {
      var _this = this;
      var eGui = this.getGui();
      var setAttribute = function(name, value, element2) {
        var actualElement = element2 ? element2 : eGui;
        if (value != null && value != "") {
          actualElement.setAttribute(name, value);
        } else {
          actualElement.removeAttribute(name);
        }
      };
      var compProxy = {
        setWidth: function(width) {
          return eGui.style.width = width;
        },
        addOrRemoveCssClass: function(cssClassName, on) {
          return _this.addOrRemoveCssClass(cssClassName, on);
        },
        setAriaSort: function(sort) {
          return sort ? setAriaSort(eGui, sort) : removeAriaSort(eGui);
        },
        setColId: function(id) {
          return setAttribute("col-id", id);
        },
        setTitle: function(title) {
          return setAttribute("title", title);
        },
        setAriaDescribedBy: function(value) {
          return setAriaDescribedBy(eGui, value);
        },
        setUserCompDetails: function(compDetails) {
          return _this.setUserCompDetails(compDetails);
        },
        getUserCompInstance: function() {
          return _this.headerComp;
        }
      };
      this.ctrl.setComp(compProxy, this.getGui(), this.eResize);
      var selectAllGui = this.ctrl.getSelectAllGui();
      this.eResize.insertAdjacentElement("afterend", selectAllGui);
    };
    HeaderCellComp2.prototype.destroyHeaderComp = function() {
      if (this.headerComp) {
        this.getGui().removeChild(this.headerCompGui);
        this.headerComp = this.destroyBean(this.headerComp);
        this.headerCompGui = void 0;
      }
    };
    HeaderCellComp2.prototype.setUserCompDetails = function(compDetails) {
      var _this = this;
      this.headerCompVersion++;
      var versionCopy = this.headerCompVersion;
      this.afterHeaderCompCreated.bind(this, this.headerCompVersion);
      this.userComponentFactory.createInstanceFromCompDetails(compDetails).then(function(comp) {
        _this.afterHeaderCompCreated(versionCopy, comp);
      });
    };
    HeaderCellComp2.prototype.afterHeaderCompCreated = function(version, headerComp) {
      if (version != this.headerCompVersion || !this.isAlive()) {
        this.destroyBean(headerComp);
        return;
      }
      this.destroyHeaderComp();
      this.headerComp = headerComp;
      this.headerCompGui = headerComp.getGui();
      this.getGui().appendChild(this.headerCompGui);
      this.ctrl.setDragSource(this.headerCompGui);
    };
    HeaderCellComp2.TEMPLATE = '<div class="ag-header-cell" role="columnheader" unselectable="on" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>';
    __decorate$G([
      Autowired("userComponentFactory")
    ], HeaderCellComp2.prototype, "userComponentFactory", void 0);
    __decorate$G([
      Autowired("beans")
    ], HeaderCellComp2.prototype, "beans", void 0);
    __decorate$G([
      RefSelector("eResize")
    ], HeaderCellComp2.prototype, "eResize", void 0);
    __decorate$G([
      PostConstruct
    ], HeaderCellComp2.prototype, "postConstruct", null);
    __decorate$G([
      PreDestroy
    ], HeaderCellComp2.prototype, "destroyHeaderComp", null);
    return HeaderCellComp2;
  }(AbstractHeaderCellComp);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$R = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$H = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var HeaderGroupCellComp = function(_super) {
    __extends$R(HeaderGroupCellComp2, _super);
    function HeaderGroupCellComp2(ctrl) {
      return _super.call(this, HeaderGroupCellComp2.TEMPLATE, ctrl) || this;
    }
    HeaderGroupCellComp2.prototype.postConstruct = function() {
      var _this = this;
      var eGui = this.getGui();
      var setAttribute = function(key, value) {
        return value != void 0 ? eGui.setAttribute(key, value) : eGui.removeAttribute(key);
      };
      var compProxy = {
        addOrRemoveCssClass: function(cssClassName, on) {
          return _this.addOrRemoveCssClass(cssClassName, on);
        },
        addOrRemoveResizableCssClass: function(cssClassName, on) {
          return addOrRemoveCssClass(_this.eResize, cssClassName, on);
        },
        setWidth: function(width) {
          return eGui.style.width = width;
        },
        setColId: function(id) {
          return eGui.setAttribute("col-id", id);
        },
        setAriaExpanded: function(expanded) {
          return setAttribute("aria-expanded", expanded);
        },
        setTitle: function(title) {
          return setAttribute("title", title);
        },
        setUserCompDetails: function(details) {
          return _this.setUserCompDetails(details);
        }
      };
      this.ctrl.setComp(compProxy, eGui, this.eResize);
    };
    HeaderGroupCellComp2.prototype.setUserCompDetails = function(details) {
      var _this = this;
      this.userComponentFactory.createInstanceFromCompDetails(details).then(function(comp) {
        return _this.afterHeaderCompCreated(comp);
      });
    };
    HeaderGroupCellComp2.prototype.afterHeaderCompCreated = function(headerGroupComp) {
      var _this = this;
      var destroyFunc = function() {
        return _this.destroyBean(headerGroupComp);
      };
      if (!this.isAlive()) {
        destroyFunc();
        return;
      }
      this.getGui().appendChild(headerGroupComp.getGui());
      this.addDestroyFunc(destroyFunc);
      this.ctrl.setDragSource(headerGroupComp.getGui());
    };
    HeaderGroupCellComp2.TEMPLATE = '<div class="ag-header-group-cell" role="columnheader" tabindex="-1">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>';
    __decorate$H([
      Autowired("userComponentFactory")
    ], HeaderGroupCellComp2.prototype, "userComponentFactory", void 0);
    __decorate$H([
      RefSelector("eResize")
    ], HeaderGroupCellComp2.prototype, "eResize", void 0);
    __decorate$H([
      PostConstruct
    ], HeaderGroupCellComp2.prototype, "postConstruct", null);
    return HeaderGroupCellComp2;
  }(AbstractHeaderCellComp);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var FloatingFilterMapper = function() {
    function FloatingFilterMapper2() {
    }
    FloatingFilterMapper2.getFloatingFilterType = function(filterType) {
      return this.filterToFloatingFilterMapping[filterType];
    };
    FloatingFilterMapper2.filterToFloatingFilterMapping = {
      set: "agSetColumnFloatingFilter",
      agSetColumnFilter: "agSetColumnFloatingFilter",
      multi: "agMultiColumnFloatingFilter",
      agMultiColumnFilter: "agMultiColumnFloatingFilter",
      number: "agNumberColumnFloatingFilter",
      agNumberColumnFilter: "agNumberColumnFloatingFilter",
      date: "agDateColumnFloatingFilter",
      agDateColumnFilter: "agDateColumnFloatingFilter",
      text: "agTextColumnFloatingFilter",
      agTextColumnFilter: "agTextColumnFloatingFilter"
    };
    return FloatingFilterMapper2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$S = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$I = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ReadOnlyFloatingFilter = function(_super) {
    __extends$S(ReadOnlyFloatingFilter2, _super);
    function ReadOnlyFloatingFilter2() {
      return _super.call(this, '\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>') || this;
    }
    ReadOnlyFloatingFilter2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
    };
    ReadOnlyFloatingFilter2.prototype.init = function(params2) {
      this.params = params2;
      var displayName = this.columnModel.getDisplayNameForColumn(params2.column, "header", true);
      var translate = this.gridOptionsWrapper.getLocaleTextFunc();
      this.eFloatingFilterText.setDisabled(true).setInputAriaLabel(displayName + " " + translate("ariaFilterInput", "Filter Input"));
    };
    ReadOnlyFloatingFilter2.prototype.onParentModelChanged = function(parentModel) {
      var _this = this;
      if (!parentModel) {
        this.eFloatingFilterText.setValue("");
        return;
      }
      this.params.parentFilterInstance(function(filterInstance) {
        if (filterInstance.getModelAsString) {
          var modelAsString = filterInstance.getModelAsString(parentModel);
          _this.eFloatingFilterText.setValue(modelAsString);
        }
      });
    };
    __decorate$I([
      RefSelector("eFloatingFilterText")
    ], ReadOnlyFloatingFilter2.prototype, "eFloatingFilterText", void 0);
    __decorate$I([
      Autowired("columnModel")
    ], ReadOnlyFloatingFilter2.prototype, "columnModel", void 0);
    return ReadOnlyFloatingFilter2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$T = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$J = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var SetLeftFeature = function(_super) {
    __extends$T(SetLeftFeature2, _super);
    function SetLeftFeature2(columnOrGroup, eCell, beans, colsSpanning) {
      var _this = _super.call(this) || this;
      _this.columnOrGroup = columnOrGroup;
      _this.eCell = eCell;
      _this.ariaEl = _this.eCell.querySelector("[role=columnheader]") || _this.eCell;
      _this.colsSpanning = colsSpanning;
      _this.beans = beans;
      return _this;
    }
    SetLeftFeature2.prototype.setColsSpanning = function(colsSpanning) {
      this.colsSpanning = colsSpanning;
      this.onLeftChanged();
    };
    SetLeftFeature2.prototype.getColumnOrGroup = function() {
      if (this.beans.gridOptionsWrapper.isEnableRtl() && this.colsSpanning) {
        return last(this.colsSpanning);
      }
      return this.columnOrGroup;
    };
    SetLeftFeature2.prototype.postConstruct = function() {
      this.addManagedListener(this.columnOrGroup, Column.EVENT_LEFT_CHANGED, this.onLeftChanged.bind(this));
      this.setLeftFirstTime();
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, this.onLeftChanged.bind(this));
      this.addManagedListener(this.beans.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, this.onLeftChanged.bind(this));
    };
    SetLeftFeature2.prototype.setLeftFirstTime = function() {
      var suppressMoveAnimation = this.beans.gridOptionsWrapper.isSuppressColumnMoveAnimation();
      var oldLeftExists = exists(this.columnOrGroup.getOldLeft());
      var animateColumnMove = this.beans.columnAnimationService.isActive() && oldLeftExists && !suppressMoveAnimation;
      if (animateColumnMove) {
        this.animateInLeft();
      } else {
        this.onLeftChanged();
      }
    };
    SetLeftFeature2.prototype.animateInLeft = function() {
      var _this = this;
      var colOrGroup = this.getColumnOrGroup();
      var left = colOrGroup.getLeft();
      var oldLeft = colOrGroup.getOldLeft();
      var oldActualLeft = this.modifyLeftForPrintLayout(colOrGroup, oldLeft);
      var actualLeft = this.modifyLeftForPrintLayout(colOrGroup, left);
      this.setLeft(oldActualLeft);
      this.actualLeft = actualLeft;
      this.beans.columnAnimationService.executeNextVMTurn(function() {
        if (_this.actualLeft === actualLeft) {
          _this.setLeft(actualLeft);
        }
      });
    };
    SetLeftFeature2.prototype.onLeftChanged = function() {
      var colOrGroup = this.getColumnOrGroup();
      var left = colOrGroup.getLeft();
      this.actualLeft = this.modifyLeftForPrintLayout(colOrGroup, left);
      this.setLeft(this.actualLeft);
    };
    SetLeftFeature2.prototype.modifyLeftForPrintLayout = function(colOrGroup, leftPosition) {
      var printLayout = this.beans.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
      if (!printLayout) {
        return leftPosition;
      }
      if (colOrGroup.getPinned() === Constants.PINNED_LEFT) {
        return leftPosition;
      }
      var leftWidth = this.beans.columnModel.getDisplayedColumnsLeftWidth();
      if (colOrGroup.getPinned() === Constants.PINNED_RIGHT) {
        var bodyWidth = this.beans.columnModel.getBodyContainerWidth();
        return leftWidth + bodyWidth + leftPosition;
      }
      return leftWidth + leftPosition;
    };
    SetLeftFeature2.prototype.setLeft = function(value) {
      if (exists(value)) {
        this.eCell.style.left = value + "px";
      }
      var indexColumn;
      if (this.columnOrGroup instanceof Column) {
        indexColumn = this.columnOrGroup;
      } else {
        var columnGroup = this.columnOrGroup;
        var children2 = columnGroup.getLeafColumns();
        if (!children2.length) {
          return;
        }
        if (children2.length > 1) {
          setAriaColSpan(this.ariaEl, children2.length);
        }
        indexColumn = children2[0];
      }
      var index = this.beans.columnModel.getAriaColumnIndex(indexColumn);
      setAriaColIndex(this.ariaEl, index);
    };
    __decorate$J([
      PostConstruct
    ], SetLeftFeature2.prototype, "postConstruct", null);
    return SetLeftFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$U = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$K = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var HoverFeature = function(_super) {
    __extends$U(HoverFeature2, _super);
    function HoverFeature2(columns, element2) {
      var _this = _super.call(this) || this;
      _this.columns = columns;
      _this.element = element2;
      return _this;
    }
    HoverFeature2.prototype.postConstruct = function() {
      if (this.gridOptionsWrapper.isColumnHoverHighlight()) {
        this.addMouseHoverListeners();
      }
    };
    HoverFeature2.prototype.addMouseHoverListeners = function() {
      this.addManagedListener(this.element, "mouseout", this.onMouseOut.bind(this));
      this.addManagedListener(this.element, "mouseover", this.onMouseOver.bind(this));
    };
    HoverFeature2.prototype.onMouseOut = function() {
      this.columnHoverService.clearMouseOver();
    };
    HoverFeature2.prototype.onMouseOver = function() {
      this.columnHoverService.setMouseOver(this.columns);
    };
    __decorate$K([
      Autowired("columnHoverService")
    ], HoverFeature2.prototype, "columnHoverService", void 0);
    __decorate$K([
      PostConstruct
    ], HoverFeature2.prototype, "postConstruct", null);
    return HoverFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$V = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$L = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var HeaderFilterCellComp = function(_super) {
    __extends$V(HeaderFilterCellComp2, _super);
    function HeaderFilterCellComp2(ctrl) {
      var _this = _super.call(this, HeaderFilterCellComp2.TEMPLATE, ctrl) || this;
      _this.column = ctrl.getColumnGroupChild();
      _this.pinned = ctrl.getPinned();
      return _this;
    }
    HeaderFilterCellComp2.prototype.postConstruct = function() {
      this.setupFloatingFilter();
      this.setupWidth();
      this.setupLeftPositioning();
      this.setupColumnHover();
      this.createManagedBean(new HoverFeature([this.column], this.getGui()));
      this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(), {
        shouldStopEventPropagation: this.shouldStopEventPropagation.bind(this),
        onTabKeyDown: this.onTabKeyDown.bind(this),
        handleKeyDown: this.handleKeyDown.bind(this),
        onFocusIn: this.onFocusIn.bind(this)
      }));
      this.addManagedListener(this.eButtonShowMainFilter, "click", this.showParentFilter.bind(this));
      var compProxy = {};
      this.ctrl.setComp(compProxy, this.getGui());
    };
    HeaderFilterCellComp2.prototype.getColumn = function() {
      return this.column;
    };
    HeaderFilterCellComp2.prototype.onTabKeyDown = function(e) {
      var activeEl = document.activeElement;
      var eGui = this.getGui();
      var wrapperHasFocus = activeEl === eGui;
      if (wrapperHasFocus) {
        return;
      }
      e.preventDefault();
      var nextFocusableEl = this.focusService.findNextFocusableElement(eGui, null, e.shiftKey);
      if (nextFocusableEl) {
        nextFocusableEl.focus();
      } else {
        eGui.focus();
      }
    };
    HeaderFilterCellComp2.prototype.handleKeyDown = function(e) {
      var activeEl = document.activeElement;
      var eGui = this.getGui();
      var wrapperHasFocus = activeEl === eGui;
      switch (e.keyCode) {
        case KeyCode.UP:
        case KeyCode.DOWN:
          if (!wrapperHasFocus) {
            e.preventDefault();
          }
        case KeyCode.LEFT:
        case KeyCode.RIGHT:
          if (wrapperHasFocus) {
            return;
          }
          e.stopPropagation();
        case KeyCode.ENTER:
          if (wrapperHasFocus) {
            if (this.focusService.focusInto(eGui)) {
              e.preventDefault();
            }
          }
          break;
        case KeyCode.ESCAPE:
          if (!wrapperHasFocus) {
            this.getGui().focus();
          }
      }
    };
    HeaderFilterCellComp2.prototype.onFocusIn = function(e) {
      var eGui = this.getGui();
      if (!eGui.contains(e.relatedTarget)) {
        var rowIndex = this.ctrl.getRowIndex();
        this.beans.focusService.setFocusedHeader(rowIndex, this.getColumn());
      }
    };
    HeaderFilterCellComp2.prototype.setupFloatingFilter = function() {
      var _this = this;
      var colDef = this.column.getColDef();
      if ((!colDef.filter || !colDef.floatingFilter) && (!colDef.filterFramework || !colDef.floatingFilterComponentFramework)) {
        return;
      }
      this.floatingFilterCompPromise = this.getFloatingFilterInstance();
      if (!this.floatingFilterCompPromise) {
        return;
      }
      this.floatingFilterCompPromise.then(function(compInstance) {
        if (compInstance) {
          _this.setupWithFloatingFilter(compInstance);
          _this.setupSyncWithFilter();
        }
      });
    };
    HeaderFilterCellComp2.prototype.setupLeftPositioning = function() {
      var setLeftFeature = new SetLeftFeature(this.column, this.getGui(), this.beans);
      this.createManagedBean(setLeftFeature);
    };
    HeaderFilterCellComp2.prototype.setupSyncWithFilter = function() {
      var _this = this;
      var syncWithFilter = function(filterChangedEvent) {
        _this.onParentModelChanged(_this.currentParentModel(), filterChangedEvent);
      };
      this.addManagedListener(this.column, Column.EVENT_FILTER_CHANGED, syncWithFilter);
      if (this.filterManager.isFilterActive(this.column)) {
        syncWithFilter(null);
      }
    };
    HeaderFilterCellComp2.prototype.showParentFilter = function() {
      var eventSource = this.suppressFilterButton ? this.eFloatingFilterBody : this.eButtonShowMainFilter;
      this.menuFactory.showMenuAfterButtonClick(this.column, eventSource, "floatingFilter", "filterMenuTab", ["filterMenuTab"]);
    };
    HeaderFilterCellComp2.prototype.setupColumnHover = function() {
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_HOVER_CHANGED, this.onColumnHover.bind(this));
      this.onColumnHover();
    };
    HeaderFilterCellComp2.prototype.onColumnHover = function() {
      if (!this.gridOptionsWrapper.isColumnHoverHighlight()) {
        return;
      }
      addOrRemoveCssClass(this.getGui(), "ag-column-hover", this.columnHoverService.isHovered(this.column));
    };
    HeaderFilterCellComp2.prototype.setupWidth = function() {
      this.addManagedListener(this.column, Column.EVENT_WIDTH_CHANGED, this.onColumnWidthChanged.bind(this));
      this.onColumnWidthChanged();
    };
    HeaderFilterCellComp2.prototype.onColumnWidthChanged = function() {
      this.getGui().style.width = this.column.getActualWidth() + "px";
    };
    HeaderFilterCellComp2.prototype.setupWithFloatingFilter = function(floatingFilterComp) {
      var _this = this;
      var disposeFunc = function() {
        _this.getContext().destroyBean(floatingFilterComp);
      };
      if (!this.isAlive()) {
        disposeFunc();
        return;
      }
      this.addDestroyFunc(disposeFunc);
      var floatingFilterCompUi = floatingFilterComp.getGui();
      addOrRemoveCssClass(this.eFloatingFilterBody, "ag-floating-filter-full-body", this.suppressFilterButton);
      addOrRemoveCssClass(this.eFloatingFilterBody, "ag-floating-filter-body", !this.suppressFilterButton);
      setDisplayed(this.eButtonWrapper, !this.suppressFilterButton);
      var eIcon = createIconNoSpan("filter", this.gridOptionsWrapper, this.column);
      this.eButtonShowMainFilter.appendChild(eIcon);
      this.eFloatingFilterBody.appendChild(floatingFilterCompUi);
      if (floatingFilterComp.afterGuiAttached) {
        floatingFilterComp.afterGuiAttached();
      }
    };
    HeaderFilterCellComp2.prototype.parentFilterInstance = function(callback) {
      var filterComponent = this.getFilterComponent();
      if (filterComponent) {
        filterComponent.then(callback);
      }
    };
    HeaderFilterCellComp2.prototype.getFilterComponent = function(createIfDoesNotExist) {
      if (createIfDoesNotExist === void 0) {
        createIfDoesNotExist = true;
      }
      return this.filterManager.getFilterComponent(this.column, "NO_UI", createIfDoesNotExist);
    };
    HeaderFilterCellComp2.getDefaultFloatingFilterType = function(def) {
      if (def == null) {
        return null;
      }
      var defaultFloatingFilterType = null;
      if (typeof def.filter === "string") {
        defaultFloatingFilterType = FloatingFilterMapper.getFloatingFilterType(def.filter);
      } else if (def.filterFramework)
        ;
      else if (def.filter === true) {
        var setFilterModuleLoaded = ModuleRegistry.isRegistered(exports2.ModuleNames.SetFilterModule);
        defaultFloatingFilterType = setFilterModuleLoaded ? "agSetColumnFloatingFilter" : "agTextColumnFloatingFilter";
      }
      return defaultFloatingFilterType;
    };
    HeaderFilterCellComp2.prototype.getFloatingFilterInstance = function() {
      var colDef = this.column.getColDef();
      var defaultFloatingFilterType = HeaderFilterCellComp2.getDefaultFloatingFilterType(colDef);
      var filterParams = this.filterManager.createFilterParams(this.column, colDef);
      var finalFilterParams = this.userComponentFactory.mergeParamsWithApplicationProvidedParams(colDef, "filter", filterParams);
      var params2 = {
        api: this.gridApi,
        column: this.column,
        filterParams: finalFilterParams,
        currentParentModel: this.currentParentModel.bind(this),
        parentFilterInstance: this.parentFilterInstance.bind(this),
        showParentFilter: this.showParentFilter.bind(this),
        onFloatingFilterChanged: this.onFloatingFilterChanged.bind(this),
        suppressFilterButton: false
      };
      this.suppressFilterButton = colDef.floatingFilterComponentParams ? !!colDef.floatingFilterComponentParams.suppressFilterButton : false;
      var promise2 = this.userComponentFactory.newFloatingFilterComponent(colDef, params2, defaultFloatingFilterType);
      if (!promise2) {
        var compInstance = this.userComponentFactory.createUserComponentFromConcreteClass(ReadOnlyFloatingFilter, params2);
        promise2 = AgPromise.resolve(compInstance);
      }
      return promise2;
    };
    HeaderFilterCellComp2.prototype.currentParentModel = function() {
      var filterComponent = this.getFilterComponent(false);
      return filterComponent ? filterComponent.resolveNow(null, function(filter2) {
        return filter2 && filter2.getModel();
      }) : null;
    };
    HeaderFilterCellComp2.prototype.onParentModelChanged = function(model, filterChangedEvent) {
      if (!this.floatingFilterCompPromise) {
        return;
      }
      this.floatingFilterCompPromise.then(function(comp) {
        return comp && comp.onParentModelChanged(model, filterChangedEvent);
      });
    };
    HeaderFilterCellComp2.prototype.onFloatingFilterChanged = function() {
      console.warn("AG Grid: since version 21.x, how floating filters are implemented has changed. Instead of calling params.onFloatingFilterChanged(), get a reference to the main filter via params.parentFilterInstance() and then set a value on the parent filter directly.");
    };
    HeaderFilterCellComp2.TEMPLATE = '<div class="ag-header-cell ag-floating-filter" role="gridcell" tabindex="-1">\n            <div class="ag-floating-filter-full-body" ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">\n                <button type="button" aria-label="Open Filter Menu" class="ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>';
    __decorate$L([
      Autowired("columnHoverService")
    ], HeaderFilterCellComp2.prototype, "columnHoverService", void 0);
    __decorate$L([
      Autowired("userComponentFactory")
    ], HeaderFilterCellComp2.prototype, "userComponentFactory", void 0);
    __decorate$L([
      Autowired("gridApi")
    ], HeaderFilterCellComp2.prototype, "gridApi", void 0);
    __decorate$L([
      Autowired("filterManager")
    ], HeaderFilterCellComp2.prototype, "filterManager", void 0);
    __decorate$L([
      Autowired("menuFactory")
    ], HeaderFilterCellComp2.prototype, "menuFactory", void 0);
    __decorate$L([
      Autowired("beans")
    ], HeaderFilterCellComp2.prototype, "beans", void 0);
    __decorate$L([
      RefSelector("eFloatingFilterBody")
    ], HeaderFilterCellComp2.prototype, "eFloatingFilterBody", void 0);
    __decorate$L([
      RefSelector("eButtonWrapper")
    ], HeaderFilterCellComp2.prototype, "eButtonWrapper", void 0);
    __decorate$L([
      RefSelector("eButtonShowMainFilter")
    ], HeaderFilterCellComp2.prototype, "eButtonShowMainFilter", void 0);
    __decorate$L([
      PostConstruct
    ], HeaderFilterCellComp2.prototype, "postConstruct", null);
    return HeaderFilterCellComp2;
  }(AbstractHeaderCellComp);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$W = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$M = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  (function(HeaderRowType) {
    HeaderRowType["COLUMN_GROUP"] = "group";
    HeaderRowType["COLUMN"] = "column";
    HeaderRowType["FLOATING_FILTER"] = "filter";
  })(exports2.HeaderRowType || (exports2.HeaderRowType = {}));
  var HeaderRowComp = function(_super) {
    __extends$W(HeaderRowComp2, _super);
    function HeaderRowComp2(ctrl) {
      var _this = _super.call(this) || this;
      _this.headerComps = {};
      var extraClass = ctrl.getType() == exports2.HeaderRowType.COLUMN_GROUP ? "ag-header-row-column-group" : ctrl.getType() == exports2.HeaderRowType.FLOATING_FILTER ? "ag-header-row-column-filter" : "ag-header-row-column";
      _this.setTemplate('<div class="ag-header-row ' + extraClass + '" role="row"></div>');
      _this.ctrl = ctrl;
      return _this;
    }
    HeaderRowComp2.prototype.init = function() {
      var _this = this;
      var compProxy = {
        setTransform: function(transform) {
          return _this.getGui().style.transform = transform;
        },
        setHeight: function(height) {
          return _this.getGui().style.height = height;
        },
        setTop: function(top) {
          return _this.getGui().style.top = top;
        },
        setHeaderCtrls: function(ctrls) {
          return _this.setHeaderCtrls(ctrls);
        },
        setWidth: function(width) {
          return _this.getGui().style.width = width;
        },
        setAriaRowIndex: function(rowIndex) {
          return setAriaRowIndex(_this.getGui(), rowIndex);
        }
      };
      this.ctrl.setComp(compProxy);
    };
    HeaderRowComp2.prototype.destroyHeaderCtrls = function() {
      this.setHeaderCtrls([]);
    };
    HeaderRowComp2.prototype.setHeaderCtrls = function(ctrls) {
      var _this = this;
      if (!this.isAlive()) {
        return;
      }
      var oldComps = this.headerComps;
      this.headerComps = {};
      ctrls.forEach(function(ctrl) {
        var id = ctrl.getInstanceId();
        var comp = oldComps[id];
        delete oldComps[id];
        if (comp == null) {
          comp = _this.createHeaderComp(ctrl);
          _this.getGui().appendChild(comp.getGui());
        }
        _this.headerComps[id] = comp;
      });
      iterateObject(oldComps, function(id, comp) {
        _this.getGui().removeChild(comp.getGui());
        _this.destroyBean(comp);
      });
      var ensureDomOrder2 = this.gridOptionsWrapper.isEnsureDomOrder();
      if (ensureDomOrder2) {
        var comps = getAllValuesInObject(this.headerComps);
        comps.sort(function(a, b) {
          var leftA = a.getCtrl().getColumnGroupChild().getLeft();
          var leftB = b.getCtrl().getColumnGroupChild().getLeft();
          return leftA - leftB;
        });
        var elementsInOrder = comps.map(function(c) {
          return c.getGui();
        });
        setDomChildOrder(this.getGui(), elementsInOrder);
      }
    };
    HeaderRowComp2.prototype.createHeaderComp = function(headerCtrl) {
      var result;
      switch (this.ctrl.getType()) {
        case exports2.HeaderRowType.COLUMN_GROUP:
          result = new HeaderGroupCellComp(headerCtrl);
          break;
        case exports2.HeaderRowType.FLOATING_FILTER:
          result = new HeaderFilterCellComp(headerCtrl);
          break;
        default:
          result = new HeaderCellComp(headerCtrl);
          break;
      }
      this.createBean(result);
      result.setParentComponent(this);
      return result;
    };
    __decorate$M([
      PostConstruct
    ], HeaderRowComp2.prototype, "init", null);
    __decorate$M([
      PreDestroy
    ], HeaderRowComp2.prototype, "destroyHeaderCtrls", null);
    return HeaderRowComp2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$X = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$N = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  (function(HeaderNavigationDirection) {
    HeaderNavigationDirection[HeaderNavigationDirection["UP"] = 0] = "UP";
    HeaderNavigationDirection[HeaderNavigationDirection["DOWN"] = 1] = "DOWN";
    HeaderNavigationDirection[HeaderNavigationDirection["LEFT"] = 2] = "LEFT";
    HeaderNavigationDirection[HeaderNavigationDirection["RIGHT"] = 3] = "RIGHT";
  })(exports2.HeaderNavigationDirection || (exports2.HeaderNavigationDirection = {}));
  var HeaderNavigationService = function(_super) {
    __extends$X(HeaderNavigationService2, _super);
    function HeaderNavigationService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    HeaderNavigationService2.prototype.postConstruct = function() {
      var _this = this;
      this.ctrlsService.whenReady(function(p2) {
        _this.gridBodyCon = p2.gridBodyCtrl;
      });
    };
    HeaderNavigationService2.prototype.getHeaderRowCount = function() {
      var centerHeaderContainer = this.ctrlsService.getHeaderRowContainerCtrl();
      return centerHeaderContainer ? centerHeaderContainer.getRowCount() : 0;
    };
    HeaderNavigationService2.prototype.getHeaderRowType = function(rowIndex) {
      var centerHeaderContainer = this.ctrlsService.getHeaderRowContainerCtrl();
      if (centerHeaderContainer) {
        return centerHeaderContainer.getRowType(rowIndex);
      }
    };
    HeaderNavigationService2.prototype.navigateVertically = function(direction, fromHeader, event) {
      if (!fromHeader) {
        fromHeader = this.focusService.getFocusedHeader();
      }
      if (!fromHeader) {
        return false;
      }
      var headerRowIndex = fromHeader.headerRowIndex, column = fromHeader.column;
      var rowLen = this.getHeaderRowCount();
      var isUp = direction === exports2.HeaderNavigationDirection.UP;
      var nextRow = isUp ? headerRowIndex - 1 : headerRowIndex + 1;
      var nextFocusColumn = null;
      var skipColumn = false;
      if (nextRow < 0) {
        nextRow = 0;
        nextFocusColumn = column;
        skipColumn = true;
      }
      if (nextRow >= rowLen) {
        nextRow = -1;
      }
      var currentRowType = this.getHeaderRowType(headerRowIndex);
      if (!skipColumn) {
        if (currentRowType === exports2.HeaderRowType.COLUMN_GROUP) {
          var currentColumn = column;
          nextFocusColumn = isUp ? column.getParent() : currentColumn.getDisplayedChildren()[0];
        } else if (currentRowType === exports2.HeaderRowType.FLOATING_FILTER) {
          nextFocusColumn = column;
        } else {
          var currentColumn = column;
          nextFocusColumn = isUp ? currentColumn.getParent() : currentColumn;
        }
        if (!nextFocusColumn) {
          return false;
        }
      }
      return this.focusService.focusHeaderPosition({ headerRowIndex: nextRow, column: nextFocusColumn }, void 0, false, true, event);
    };
    HeaderNavigationService2.prototype.navigateHorizontally = function(direction, fromTab, event) {
      if (fromTab === void 0) {
        fromTab = false;
      }
      var focusedHeader = this.focusService.getFocusedHeader();
      var isLeft = direction === exports2.HeaderNavigationDirection.LEFT;
      var isRtl = this.gridOptionsWrapper.isEnableRtl();
      var nextHeader;
      var normalisedDirection;
      if (isLeft !== isRtl) {
        normalisedDirection = "Before";
        nextHeader = this.headerPositionUtils.findHeader(focusedHeader, normalisedDirection);
      } else {
        normalisedDirection = "After";
        nextHeader = this.headerPositionUtils.findHeader(focusedHeader, normalisedDirection);
      }
      if (nextHeader) {
        return this.focusService.focusHeaderPosition(nextHeader, normalisedDirection, fromTab, true, event);
      }
      if (!fromTab) {
        return true;
      }
      return this.focusNextHeaderRow(focusedHeader, normalisedDirection, event);
    };
    HeaderNavigationService2.prototype.focusNextHeaderRow = function(focusedHeader, direction, event) {
      var currentIndex = focusedHeader.headerRowIndex;
      var nextPosition = null;
      var nextRowIndex;
      if (direction === "Before") {
        if (currentIndex > 0) {
          nextRowIndex = currentIndex - 1;
          nextPosition = this.headerPositionUtils.findColAtEdgeForHeaderRow(nextRowIndex, "end");
        }
      } else {
        nextRowIndex = currentIndex + 1;
        nextPosition = this.headerPositionUtils.findColAtEdgeForHeaderRow(nextRowIndex, "start");
      }
      return this.focusService.focusHeaderPosition(nextPosition, direction, true, true, event);
    };
    HeaderNavigationService2.prototype.scrollToColumn = function(column, direction) {
      if (direction === void 0) {
        direction = "After";
      }
      if (column.getPinned()) {
        return;
      }
      var columnToScrollTo;
      if (column instanceof ColumnGroup) {
        var columns = column.getDisplayedLeafColumns();
        columnToScrollTo = direction === "Before" ? last(columns) : columns[0];
      } else {
        columnToScrollTo = column;
      }
      this.gridBodyCon.getScrollFeature().ensureColumnVisible(columnToScrollTo);
      this.gridBodyCon.getScrollFeature().horizontallyScrollHeaderCenterAndFloatingCenter();
      this.animationFrameService.flushAllFrames();
    };
    __decorate$N([
      Autowired("focusService")
    ], HeaderNavigationService2.prototype, "focusService", void 0);
    __decorate$N([
      Autowired("headerPositionUtils")
    ], HeaderNavigationService2.prototype, "headerPositionUtils", void 0);
    __decorate$N([
      Autowired("animationFrameService")
    ], HeaderNavigationService2.prototype, "animationFrameService", void 0);
    __decorate$N([
      Autowired("ctrlsService")
    ], HeaderNavigationService2.prototype, "ctrlsService", void 0);
    __decorate$N([
      PostConstruct
    ], HeaderNavigationService2.prototype, "postConstruct", null);
    HeaderNavigationService2 = __decorate$N([
      Bean("headerNavigationService")
    ], HeaderNavigationService2);
    return HeaderNavigationService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$Y = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$O = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var GridHeaderCtrl = function(_super) {
    __extends$Y(GridHeaderCtrl2, _super);
    function GridHeaderCtrl2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    GridHeaderCtrl2.prototype.setComp = function(comp, eGui, eFocusableElement) {
      this.comp = comp;
      this.eGui = eGui;
      this.createManagedBean(new ManagedFocusFeature(eFocusableElement, {
        onTabKeyDown: this.onTabKeyDown.bind(this),
        handleKeyDown: this.handleKeyDown.bind(this),
        onFocusOut: this.onFocusOut.bind(this)
      }));
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.onPivotModeChanged.bind(this));
      this.onPivotModeChanged();
      this.setupHeaderHeight();
      this.ctrlsService.registerGridHeaderCtrl(this);
    };
    GridHeaderCtrl2.prototype.setupHeaderHeight = function() {
      var listener = this.setHeaderHeight.bind(this);
      listener();
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_HEADER_HEIGHT, listener);
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT, listener);
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT, listener);
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT, listener);
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT, listener);
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, listener);
    };
    GridHeaderCtrl2.prototype.setHeaderHeight = function() {
      var _a = this, columnModel = _a.columnModel, gridOptionsWrapper = _a.gridOptionsWrapper;
      var numberOfFloating = 0;
      var headerRowCount = columnModel.getHeaderRowCount();
      var totalHeaderHeight;
      var groupHeight;
      var headerHeight;
      if (columnModel.isPivotMode()) {
        groupHeight = gridOptionsWrapper.getPivotGroupHeaderHeight();
        headerHeight = gridOptionsWrapper.getPivotHeaderHeight();
      } else {
        var hasFloatingFilters = columnModel.hasFloatingFilters();
        if (hasFloatingFilters) {
          headerRowCount++;
          numberOfFloating = 1;
        }
        groupHeight = gridOptionsWrapper.getGroupHeaderHeight();
        headerHeight = gridOptionsWrapper.getHeaderHeight();
      }
      var numberOfNonGroups = 1 + numberOfFloating;
      var numberOfGroups = headerRowCount - numberOfNonGroups;
      totalHeaderHeight = numberOfFloating * gridOptionsWrapper.getFloatingFiltersHeight();
      totalHeaderHeight += numberOfGroups * groupHeight;
      totalHeaderHeight += headerHeight;
      var px = totalHeaderHeight + 1 + "px";
      this.comp.setHeightAndMinHeight(px);
    };
    GridHeaderCtrl2.prototype.onPivotModeChanged = function() {
      var pivotMode = this.columnModel.isPivotMode();
      this.comp.addOrRemoveCssClass("ag-pivot-on", pivotMode);
      this.comp.addOrRemoveCssClass("ag-pivot-off", !pivotMode);
    };
    GridHeaderCtrl2.prototype.onTabKeyDown = function(e) {
      var isRtl = this.gridOptionsWrapper.isEnableRtl();
      var direction = e.shiftKey !== isRtl ? exports2.HeaderNavigationDirection.LEFT : exports2.HeaderNavigationDirection.RIGHT;
      if (this.headerNavigationService.navigateHorizontally(direction, true, e) || this.focusService.focusNextGridCoreContainer(e.shiftKey)) {
        e.preventDefault();
      }
    };
    GridHeaderCtrl2.prototype.handleKeyDown = function(e) {
      var direction = null;
      switch (e.keyCode) {
        case KeyCode.LEFT:
          direction = exports2.HeaderNavigationDirection.LEFT;
        case KeyCode.RIGHT:
          if (!exists(direction)) {
            direction = exports2.HeaderNavigationDirection.RIGHT;
          }
          this.headerNavigationService.navigateHorizontally(direction, false, e);
          break;
        case KeyCode.UP:
          direction = exports2.HeaderNavigationDirection.UP;
        case KeyCode.DOWN:
          if (!exists(direction)) {
            direction = exports2.HeaderNavigationDirection.DOWN;
          }
          if (this.headerNavigationService.navigateVertically(direction, null, e)) {
            e.preventDefault();
          }
          break;
        default:
          return;
      }
    };
    GridHeaderCtrl2.prototype.onFocusOut = function(e) {
      var relatedTarget = e.relatedTarget;
      if (!relatedTarget && this.eGui.contains(document.activeElement)) {
        return;
      }
      if (!this.eGui.contains(relatedTarget)) {
        this.focusService.clearFocusedHeader();
      }
    };
    __decorate$O([
      Autowired("headerNavigationService")
    ], GridHeaderCtrl2.prototype, "headerNavigationService", void 0);
    __decorate$O([
      Autowired("focusService")
    ], GridHeaderCtrl2.prototype, "focusService", void 0);
    __decorate$O([
      Autowired("columnModel")
    ], GridHeaderCtrl2.prototype, "columnModel", void 0);
    __decorate$O([
      Autowired("ctrlsService")
    ], GridHeaderCtrl2.prototype, "ctrlsService", void 0);
    return GridHeaderCtrl2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$Z = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$P = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var CenterWidthFeature = function(_super) {
    __extends$Z(CenterWidthFeature2, _super);
    function CenterWidthFeature2(callback) {
      var _this = _super.call(this) || this;
      _this.callback = callback;
      return _this;
    }
    CenterWidthFeature2.prototype.postConstruct = function() {
      var listener = this.setWidth.bind(this);
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, listener);
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, listener);
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, listener);
      this.setWidth();
    };
    CenterWidthFeature2.prototype.setWidth = function() {
      var columnModel = this.columnModel;
      var printLayout = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
      var centerWidth = columnModel.getBodyContainerWidth();
      var leftWidth = columnModel.getDisplayedColumnsLeftWidth();
      var rightWidth = columnModel.getDisplayedColumnsRightWidth();
      var totalWidth = printLayout ? centerWidth + leftWidth + rightWidth : centerWidth;
      this.callback(totalWidth);
    };
    __decorate$P([
      Autowired("columnModel")
    ], CenterWidthFeature2.prototype, "columnModel", void 0);
    __decorate$P([
      PostConstruct
    ], CenterWidthFeature2.prototype, "postConstruct", null);
    return CenterWidthFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __decorate$Q = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var MoveColumnFeature = function() {
    function MoveColumnFeature2(pinned, eContainer) {
      this.needToMoveLeft = false;
      this.needToMoveRight = false;
      this.pinned = pinned;
      this.eContainer = eContainer;
      this.centerContainer = !exists(pinned);
    }
    MoveColumnFeature2.prototype.init = function() {
      var _this = this;
      this.ctrlsService.whenReady(function() {
        _this.gridBodyCon = _this.ctrlsService.getGridBodyCtrl();
      });
    };
    MoveColumnFeature2.prototype.getIconName = function() {
      return this.pinned ? DragAndDropService.ICON_PINNED : DragAndDropService.ICON_MOVE;
    };
    MoveColumnFeature2.prototype.onDragEnter = function(draggingEvent) {
      var columns = draggingEvent.dragItem.columns;
      var dragCameFromToolPanel = draggingEvent.dragSource.type === exports2.DragSourceType.ToolPanel;
      if (dragCameFromToolPanel) {
        this.setColumnsVisible(columns, true, "uiColumnDragged");
      } else {
        var visibleState_1 = draggingEvent.dragItem.visibleState;
        var visibleColumns = (columns || []).filter(function(column) {
          return visibleState_1[column.getId()];
        });
        this.setColumnsVisible(visibleColumns, true, "uiColumnDragged");
      }
      this.setColumnsPinned(columns, this.pinned, "uiColumnDragged");
      this.onDragging(draggingEvent, true);
    };
    MoveColumnFeature2.prototype.onDragLeave = function(draggingEvent) {
      var hideColumnOnExit = !this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns() && !draggingEvent.fromNudge;
      if (hideColumnOnExit) {
        var dragItem = draggingEvent.dragSource.getDragItem();
        var columns = dragItem.columns;
        this.setColumnsVisible(columns, false, "uiColumnDragged");
      }
      this.ensureIntervalCleared();
    };
    MoveColumnFeature2.prototype.setColumnsVisible = function(columns, visible, source) {
      if (source === void 0) {
        source = "api";
      }
      if (columns) {
        var allowedCols = columns.filter(function(c) {
          return !c.getColDef().lockVisible;
        });
        this.columnModel.setColumnsVisible(allowedCols, visible, source);
      }
    };
    MoveColumnFeature2.prototype.setColumnsPinned = function(columns, pinned, source) {
      if (source === void 0) {
        source = "api";
      }
      if (columns) {
        var allowedCols = columns.filter(function(c) {
          return !c.getColDef().lockPinned;
        });
        this.columnModel.setColumnsPinned(allowedCols, pinned, source);
      }
    };
    MoveColumnFeature2.prototype.onDragStop = function() {
      this.ensureIntervalCleared();
    };
    MoveColumnFeature2.prototype.normaliseX = function(x) {
      if (this.gridOptionsWrapper.isEnableRtl()) {
        var clientWidth = this.eContainer.clientWidth;
        x = clientWidth - x;
      }
      if (this.centerContainer) {
        x += this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft();
      }
      return x;
    };
    MoveColumnFeature2.prototype.checkCenterForScrolling = function(xAdjustedForScroll) {
      if (this.centerContainer) {
        var firstVisiblePixel = this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft();
        var lastVisiblePixel = firstVisiblePixel + this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();
        if (this.gridOptionsWrapper.isEnableRtl()) {
          this.needToMoveRight = xAdjustedForScroll < firstVisiblePixel + 50;
          this.needToMoveLeft = xAdjustedForScroll > lastVisiblePixel - 50;
        } else {
          this.needToMoveLeft = xAdjustedForScroll < firstVisiblePixel + 50;
          this.needToMoveRight = xAdjustedForScroll > lastVisiblePixel - 50;
        }
        if (this.needToMoveLeft || this.needToMoveRight) {
          this.ensureIntervalStarted();
        } else {
          this.ensureIntervalCleared();
        }
      }
    };
    MoveColumnFeature2.prototype.onDragging = function(draggingEvent, fromEnter) {
      var _this = this;
      if (fromEnter === void 0) {
        fromEnter = false;
      }
      this.lastDraggingEvent = draggingEvent;
      if (missing(draggingEvent.hDirection)) {
        return;
      }
      var mouseXNormalised = this.normaliseX(draggingEvent.x);
      if (!fromEnter) {
        this.checkCenterForScrolling(mouseXNormalised);
      }
      var hDirectionNormalised = this.normaliseDirection(draggingEvent.hDirection);
      var dragSourceType = draggingEvent.dragSource.type;
      var columnsToMove = draggingEvent.dragSource.getDragItem().columns;
      columnsToMove = columnsToMove.filter(function(col) {
        if (col.getColDef().lockPinned) {
          return col.getPinned() == _this.pinned;
        }
        return true;
      });
      this.attemptMoveColumns(dragSourceType, columnsToMove, hDirectionNormalised, mouseXNormalised, fromEnter);
    };
    MoveColumnFeature2.prototype.normaliseDirection = function(hDirection) {
      if (this.gridOptionsWrapper.isEnableRtl()) {
        switch (hDirection) {
          case exports2.HorizontalDirection.Left:
            return exports2.HorizontalDirection.Right;
          case exports2.HorizontalDirection.Right:
            return exports2.HorizontalDirection.Left;
          default:
            console.error("AG Grid: Unknown direction " + hDirection);
        }
      } else {
        return hDirection;
      }
    };
    MoveColumnFeature2.prototype.calculateOldIndex = function(movingCols) {
      var gridCols = this.columnModel.getAllGridColumns();
      var indexes = sortNumerically(movingCols.map(function(col) {
        return gridCols.indexOf(col);
      }));
      var firstIndex = indexes[0];
      var lastIndex = last(indexes);
      var spread = lastIndex - firstIndex;
      var gapsExist = spread !== indexes.length - 1;
      return gapsExist ? null : firstIndex;
    };
    MoveColumnFeature2.prototype.attemptMoveColumns = function(dragSourceType, allMovingColumns, hDirection, mouseX, fromEnter) {
      var draggingLeft = hDirection === exports2.HorizontalDirection.Left;
      var draggingRight = hDirection === exports2.HorizontalDirection.Right;
      var allMovingColumnsOrdered = allMovingColumns.slice();
      this.columnModel.sortColumnsLikeGridColumns(allMovingColumnsOrdered);
      var validMoves = this.calculateValidMoves(allMovingColumnsOrdered, draggingRight, mouseX);
      var oldIndex = this.calculateOldIndex(allMovingColumnsOrdered);
      if (validMoves.length === 0) {
        return;
      }
      var firstValidMove = validMoves[0];
      var constrainDirection = oldIndex !== null && !fromEnter;
      if (dragSourceType == exports2.DragSourceType.HeaderCell) {
        constrainDirection = oldIndex !== null;
      }
      if (constrainDirection) {
        if (draggingLeft && firstValidMove >= oldIndex) {
          return;
        }
        if (draggingRight && firstValidMove <= oldIndex) {
          return;
        }
      }
      for (var i2 = 0; i2 < validMoves.length; i2++) {
        var move = validMoves[i2];
        if (!this.columnModel.doesMovePassRules(allMovingColumnsOrdered, move)) {
          continue;
        }
        this.columnModel.moveColumns(allMovingColumnsOrdered, move, "uiColumnDragged");
        return;
      }
    };
    MoveColumnFeature2.prototype.calculateValidMoves = function(movingCols, draggingRight, mouseX) {
      var isMoveBlocked = this.gridOptionsWrapper.isSuppressMovableColumns() || movingCols.some(function(col2) {
        return col2.getColDef().suppressMovable;
      });
      if (isMoveBlocked) {
        return [];
      }
      var allDisplayedCols = this.columnModel.getDisplayedColumns(this.pinned);
      var allGridCols = this.columnModel.getAllGridColumns();
      var movingDisplayedCols = allDisplayedCols.filter(function(col2) {
        return includes2(movingCols, col2);
      });
      var otherDisplayedCols = allDisplayedCols.filter(function(col2) {
        return !includes2(movingCols, col2);
      });
      var otherGridCols = allGridCols.filter(function(col2) {
        return !includes2(movingCols, col2);
      });
      var displayIndex = 0;
      var availableWidth = mouseX;
      if (draggingRight) {
        var widthOfMovingDisplayedCols_1 = 0;
        movingDisplayedCols.forEach(function(col2) {
          return widthOfMovingDisplayedCols_1 += col2.getActualWidth();
        });
        availableWidth -= widthOfMovingDisplayedCols_1;
      }
      if (availableWidth > 0) {
        for (var i2 = 0; i2 < otherDisplayedCols.length; i2++) {
          var col = otherDisplayedCols[i2];
          availableWidth -= col.getActualWidth();
          if (availableWidth < 0) {
            break;
          }
          displayIndex++;
        }
        if (draggingRight) {
          displayIndex++;
        }
      }
      var firstValidMove;
      if (displayIndex > 0) {
        var leftColumn = otherDisplayedCols[displayIndex - 1];
        firstValidMove = otherGridCols.indexOf(leftColumn) + 1;
      } else {
        firstValidMove = otherGridCols.indexOf(otherDisplayedCols[0]);
        if (firstValidMove === -1) {
          firstValidMove = 0;
        }
      }
      var validMoves = [firstValidMove];
      var numberComparator = function(a, b) {
        return a - b;
      };
      if (draggingRight) {
        var pointer = firstValidMove + 1;
        var lastIndex = allGridCols.length - 1;
        while (pointer <= lastIndex) {
          validMoves.push(pointer);
          pointer++;
        }
        validMoves.sort(numberComparator);
      } else {
        var pointer = firstValidMove;
        var lastIndex = allGridCols.length - 1;
        var displacedCol = allGridCols[pointer];
        while (pointer <= lastIndex && this.isColumnHidden(allDisplayedCols, displacedCol)) {
          pointer++;
          validMoves.push(pointer);
          displacedCol = allGridCols[pointer];
        }
        pointer = firstValidMove - 1;
        var firstDisplayIndex = 0;
        while (pointer >= firstDisplayIndex) {
          validMoves.push(pointer);
          pointer--;
        }
        validMoves.sort(numberComparator).reverse();
      }
      return validMoves;
    };
    MoveColumnFeature2.prototype.isColumnHidden = function(displayedColumns, col) {
      return displayedColumns.indexOf(col) < 0;
    };
    MoveColumnFeature2.prototype.ensureIntervalStarted = function() {
      if (!this.movingIntervalId) {
        this.intervalCount = 0;
        this.failedMoveAttempts = 0;
        this.movingIntervalId = window.setInterval(this.moveInterval.bind(this), 100);
        if (this.needToMoveLeft) {
          this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_LEFT, true);
        } else {
          this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_RIGHT, true);
        }
      }
    };
    MoveColumnFeature2.prototype.ensureIntervalCleared = function() {
      if (this.movingIntervalId) {
        window.clearInterval(this.movingIntervalId);
        this.movingIntervalId = null;
        this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_MOVE);
      }
    };
    MoveColumnFeature2.prototype.moveInterval = function() {
      var pixelsToMove;
      this.intervalCount++;
      pixelsToMove = 10 + this.intervalCount * 5;
      if (pixelsToMove > 100) {
        pixelsToMove = 100;
      }
      var pixelsMoved = null;
      var scrollFeature = this.gridBodyCon.getScrollFeature();
      if (this.needToMoveLeft) {
        pixelsMoved = scrollFeature.scrollHorizontally(-pixelsToMove);
      } else if (this.needToMoveRight) {
        pixelsMoved = scrollFeature.scrollHorizontally(pixelsToMove);
      }
      if (pixelsMoved !== 0) {
        this.onDragging(this.lastDraggingEvent);
        this.failedMoveAttempts = 0;
      } else {
        this.failedMoveAttempts++;
        var columns = this.lastDraggingEvent.dragItem.columns;
        var columnsThatCanPin = columns.filter(function(c) {
          return !c.getColDef().lockPinned;
        });
        if (columnsThatCanPin.length > 0) {
          this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_PINNED);
          if (this.failedMoveAttempts > 7) {
            var pinType = this.needToMoveLeft ? Constants.PINNED_LEFT : Constants.PINNED_RIGHT;
            this.setColumnsPinned(columnsThatCanPin, pinType, "uiColumnDragged");
            this.dragAndDropService.nudge();
          }
        }
      }
    };
    __decorate$Q([
      Autowired("columnModel")
    ], MoveColumnFeature2.prototype, "columnModel", void 0);
    __decorate$Q([
      Autowired("dragAndDropService")
    ], MoveColumnFeature2.prototype, "dragAndDropService", void 0);
    __decorate$Q([
      Autowired("gridOptionsWrapper")
    ], MoveColumnFeature2.prototype, "gridOptionsWrapper", void 0);
    __decorate$Q([
      Autowired("ctrlsService")
    ], MoveColumnFeature2.prototype, "ctrlsService", void 0);
    __decorate$Q([
      PostConstruct
    ], MoveColumnFeature2.prototype, "init", null);
    return MoveColumnFeature2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __decorate$R = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var BodyDropPivotTarget = function() {
    function BodyDropPivotTarget2(pinned) {
      this.columnsToAggregate = [];
      this.columnsToGroup = [];
      this.columnsToPivot = [];
      this.pinned = pinned;
    }
    BodyDropPivotTarget2.prototype.onDragEnter = function(draggingEvent) {
      var _this = this;
      this.clearColumnsList();
      if (this.gridOptionsWrapper.isFunctionsReadOnly()) {
        return;
      }
      var dragColumns = draggingEvent.dragItem.columns;
      if (!dragColumns) {
        return;
      }
      dragColumns.forEach(function(column) {
        if (!column.isPrimary()) {
          return;
        }
        if (column.isAnyFunctionActive()) {
          return;
        }
        if (column.isAllowValue()) {
          _this.columnsToAggregate.push(column);
        } else if (column.isAllowRowGroup()) {
          _this.columnsToGroup.push(column);
        } else if (column.isAllowPivot()) {
          _this.columnsToPivot.push(column);
        }
      });
    };
    BodyDropPivotTarget2.prototype.getIconName = function() {
      var totalColumns = this.columnsToAggregate.length + this.columnsToGroup.length + this.columnsToPivot.length;
      if (totalColumns > 0) {
        return this.pinned ? DragAndDropService.ICON_PINNED : DragAndDropService.ICON_MOVE;
      }
      return null;
    };
    BodyDropPivotTarget2.prototype.onDragLeave = function(draggingEvent) {
      this.clearColumnsList();
    };
    BodyDropPivotTarget2.prototype.clearColumnsList = function() {
      this.columnsToAggregate.length = 0;
      this.columnsToGroup.length = 0;
      this.columnsToPivot.length = 0;
    };
    BodyDropPivotTarget2.prototype.onDragging = function(draggingEvent) {
    };
    BodyDropPivotTarget2.prototype.onDragStop = function(draggingEvent) {
      if (this.columnsToAggregate.length > 0) {
        this.columnModel.addValueColumns(this.columnsToAggregate, "toolPanelDragAndDrop");
      }
      if (this.columnsToGroup.length > 0) {
        this.columnModel.addRowGroupColumns(this.columnsToGroup, "toolPanelDragAndDrop");
      }
      if (this.columnsToPivot.length > 0) {
        this.columnModel.addPivotColumns(this.columnsToPivot, "toolPanelDragAndDrop");
      }
    };
    __decorate$R([
      Autowired("columnModel")
    ], BodyDropPivotTarget2.prototype, "columnModel", void 0);
    __decorate$R([
      Autowired("gridOptionsWrapper")
    ], BodyDropPivotTarget2.prototype, "gridOptionsWrapper", void 0);
    return BodyDropPivotTarget2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$_ = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$S = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var BodyDropTarget = function(_super) {
    __extends$_(BodyDropTarget2, _super);
    function BodyDropTarget2(pinned, eContainer) {
      var _this = _super.call(this) || this;
      _this.pinned = pinned;
      _this.eContainer = eContainer;
      return _this;
    }
    BodyDropTarget2.prototype.postConstruct = function() {
      var _this = this;
      this.ctrlsService.whenReady(function(p2) {
        switch (_this.pinned) {
          case Constants.PINNED_LEFT:
            _this.eSecondaryContainers = [
              [p2.gridBodyCtrl.getBodyViewportElement(), p2.leftRowContainerCtrl.getContainerElement()],
              [p2.bottomLeftRowContainerCtrl.getContainerElement()],
              [p2.topLeftRowContainerCtrl.getContainerElement()]
            ];
            break;
          case Constants.PINNED_RIGHT:
            _this.eSecondaryContainers = [
              [p2.gridBodyCtrl.getBodyViewportElement(), p2.rightRowContainerCtrl.getContainerElement()],
              [p2.bottomRightRowContainerCtrl.getContainerElement()],
              [p2.topRightRowContainerCtrl.getContainerElement()]
            ];
            break;
          default:
            _this.eSecondaryContainers = [
              [p2.gridBodyCtrl.getBodyViewportElement(), p2.centerRowContainerCtrl.getViewportElement()],
              [p2.bottomCenterRowContainerCtrl.getViewportElement()],
              [p2.topCenterRowContainerCtrl.getViewportElement()]
            ];
            break;
        }
      });
    };
    BodyDropTarget2.prototype.isInterestedIn = function(type) {
      return type === exports2.DragSourceType.HeaderCell || type === exports2.DragSourceType.ToolPanel && this.gridOptionsWrapper.isAllowDragFromColumnsToolPanel();
    };
    BodyDropTarget2.prototype.getSecondaryContainers = function() {
      return this.eSecondaryContainers;
    };
    BodyDropTarget2.prototype.getContainer = function() {
      return this.eContainer;
    };
    BodyDropTarget2.prototype.init = function() {
      this.moveColumnFeature = this.createManagedBean(new MoveColumnFeature(this.pinned, this.eContainer));
      this.bodyDropPivotTarget = this.createManagedBean(new BodyDropPivotTarget(this.pinned));
      this.dragAndDropService.addDropTarget(this);
    };
    BodyDropTarget2.prototype.getIconName = function() {
      return this.currentDropListener.getIconName();
    };
    BodyDropTarget2.prototype.isDropColumnInPivotMode = function(draggingEvent) {
      return this.columnModel.isPivotMode() && draggingEvent.dragSource.type === exports2.DragSourceType.ToolPanel;
    };
    BodyDropTarget2.prototype.onDragEnter = function(draggingEvent) {
      this.currentDropListener = this.isDropColumnInPivotMode(draggingEvent) ? this.bodyDropPivotTarget : this.moveColumnFeature;
      this.currentDropListener.onDragEnter(draggingEvent);
    };
    BodyDropTarget2.prototype.onDragLeave = function(params2) {
      this.currentDropListener.onDragLeave(params2);
    };
    BodyDropTarget2.prototype.onDragging = function(params2) {
      this.currentDropListener.onDragging(params2);
    };
    BodyDropTarget2.prototype.onDragStop = function(params2) {
      this.currentDropListener.onDragStop(params2);
    };
    __decorate$S([
      Autowired("dragAndDropService")
    ], BodyDropTarget2.prototype, "dragAndDropService", void 0);
    __decorate$S([
      Autowired("columnModel")
    ], BodyDropTarget2.prototype, "columnModel", void 0);
    __decorate$S([
      Autowired("ctrlsService")
    ], BodyDropTarget2.prototype, "ctrlsService", void 0);
    __decorate$S([
      PostConstruct
    ], BodyDropTarget2.prototype, "postConstruct", null);
    __decorate$S([
      PostConstruct
    ], BodyDropTarget2.prototype, "init", null);
    return BodyDropTarget2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$$ = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$T = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var instanceIdSequence$3 = 0;
  var AbstractHeaderCellCtrl = function(_super) {
    __extends$$(AbstractHeaderCellCtrl2, _super);
    function AbstractHeaderCellCtrl2(columnGroupChild, parentRowCtrl) {
      var _this = _super.call(this) || this;
      _this.columnGroupChild = columnGroupChild;
      _this.parentRowCtrl = parentRowCtrl;
      _this.instanceId = columnGroupChild.getUniqueId() + "-" + instanceIdSequence$3++;
      return _this;
    }
    AbstractHeaderCellCtrl2.prototype.shouldStopEventPropagation = function(e) {
      var _a = this.focusService.getFocusedHeader(), headerRowIndex = _a.headerRowIndex, column = _a.column;
      return isUserSuppressingHeaderKeyboardEvent(this.gridOptionsWrapper, e, headerRowIndex, column);
    };
    AbstractHeaderCellCtrl2.prototype.setGui = function(eGui) {
      this.eGui = eGui;
      this.addDomData();
    };
    AbstractHeaderCellCtrl2.prototype.addDomData = function() {
      var _this = this;
      var key = AbstractHeaderCellCtrl2.DOM_DATA_KEY_HEADER_CTRL;
      this.gridOptionsWrapper.setDomData(this.eGui, key, this);
      this.addDestroyFunc(function() {
        return _this.gridOptionsWrapper.setDomData(_this.eGui, key, null);
      });
    };
    AbstractHeaderCellCtrl2.prototype.focus = function() {
      if (!this.eGui) {
        return false;
      }
      this.eGui.focus();
      return true;
    };
    AbstractHeaderCellCtrl2.prototype.getRowIndex = function() {
      return this.parentRowCtrl.getRowIndex();
    };
    AbstractHeaderCellCtrl2.prototype.getParentRowCtrl = function() {
      return this.parentRowCtrl;
    };
    AbstractHeaderCellCtrl2.prototype.getPinned = function() {
      return this.parentRowCtrl.getPinned();
    };
    AbstractHeaderCellCtrl2.prototype.getInstanceId = function() {
      return this.instanceId;
    };
    AbstractHeaderCellCtrl2.prototype.getColumnGroupChild = function() {
      return this.columnGroupChild;
    };
    AbstractHeaderCellCtrl2.DOM_DATA_KEY_HEADER_CTRL = "headerCtrl";
    __decorate$T([
      Autowired("focusService")
    ], AbstractHeaderCellCtrl2.prototype, "focusService", void 0);
    return AbstractHeaderCellCtrl2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$10 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var HeaderFilterCellCtrl = function(_super) {
    __extends$10(HeaderFilterCellCtrl2, _super);
    function HeaderFilterCellCtrl2(column, parentRowCtrl) {
      return _super.call(this, column, parentRowCtrl) || this;
    }
    HeaderFilterCellCtrl2.prototype.setComp = function(comp, eGui) {
      _super.prototype.setGui.call(this, eGui);
    };
    return HeaderFilterCellCtrl2;
  }(AbstractHeaderCellCtrl);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var CssClassApplier = function() {
    function CssClassApplier2() {
    }
    CssClassApplier2.getHeaderClassesFromColDef = function(abstractColDef, gridOptionsWrapper, column, columnGroup) {
      if (missing(abstractColDef)) {
        return [];
      }
      return this.getColumnClassesFromCollDef(abstractColDef.headerClass, abstractColDef, gridOptionsWrapper, column, columnGroup);
    };
    CssClassApplier2.getToolPanelClassesFromColDef = function(abstractColDef, gridOptionsWrapper, column, columnGroup) {
      if (missing(abstractColDef)) {
        return [];
      }
      return this.getColumnClassesFromCollDef(abstractColDef.toolPanelClass, abstractColDef, gridOptionsWrapper, column, columnGroup);
    };
    CssClassApplier2.getColumnClassesFromCollDef = function(classesOrFunc, abstractColDef, gridOptionsWrapper, column, columnGroup) {
      if (missing(classesOrFunc)) {
        return [];
      }
      var classToUse;
      if (typeof classesOrFunc === "function") {
        var params2 = {
          colDef: abstractColDef,
          column,
          columnGroup,
          context: gridOptionsWrapper.getContext(),
          api: gridOptionsWrapper.getApi()
        };
        classToUse = classesOrFunc(params2);
      } else {
        classToUse = classesOrFunc;
      }
      if (typeof classToUse === "string") {
        return [classToUse];
      } else if (Array.isArray(classToUse)) {
        return classToUse;
      } else {
        return [];
      }
    };
    return CssClassApplier2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$11 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$U = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ResizeFeature = function(_super) {
    __extends$11(ResizeFeature2, _super);
    function ResizeFeature2(pinned, column, eResize, comp, ctrl) {
      var _this = _super.call(this) || this;
      _this.pinned = pinned;
      _this.column = column;
      _this.eResize = eResize;
      _this.comp = comp;
      _this.ctrl = ctrl;
      return _this;
    }
    ResizeFeature2.prototype.postConstruct = function() {
      var _this = this;
      var colDef = this.column.getColDef();
      var destroyResizeFuncs = [];
      var canResize;
      var canAutosize;
      var addResize = function() {
        setDisplayed(_this.eResize, canResize);
        if (!canResize) {
          return;
        }
        var finishedWithResizeFunc = _this.horizontalResizeService.addResizeBar({
          eResizeBar: _this.eResize,
          onResizeStart: _this.onResizeStart.bind(_this),
          onResizing: _this.onResizing.bind(_this, false),
          onResizeEnd: _this.onResizing.bind(_this, true)
        });
        destroyResizeFuncs.push(finishedWithResizeFunc);
        if (canAutosize) {
          var skipHeaderOnAutoSize_1 = _this.gridOptionsWrapper.isSkipHeaderOnAutoSize();
          var autoSizeColListener_1 = function() {
            _this.columnModel.autoSizeColumn(_this.column, skipHeaderOnAutoSize_1, "uiColumnResized");
          };
          _this.eResize.addEventListener("dblclick", autoSizeColListener_1);
          var touchListener_1 = new TouchListener(_this.eResize);
          touchListener_1.addEventListener(TouchListener.EVENT_DOUBLE_TAP, autoSizeColListener_1);
          _this.addDestroyFunc(function() {
            _this.eResize.removeEventListener("dblclick", autoSizeColListener_1);
            touchListener_1.removeEventListener(TouchListener.EVENT_DOUBLE_TAP, autoSizeColListener_1);
            touchListener_1.destroy();
          });
        }
      };
      var removeResize = function() {
        destroyResizeFuncs.forEach(function(f) {
          return f();
        });
        destroyResizeFuncs.length = 0;
      };
      var refresh = function() {
        var resize = _this.column.isResizable();
        var autoSize = !_this.gridOptionsWrapper.isSuppressAutoSize() && !colDef.suppressAutoSize;
        var propertyChange = resize !== canResize || autoSize !== canAutosize;
        if (propertyChange) {
          canResize = resize;
          canAutosize = autoSize;
          removeResize();
          addResize();
        }
      };
      refresh();
      this.addDestroyFunc(removeResize);
      this.ctrl.addRefreshFunction(refresh);
    };
    ResizeFeature2.prototype.onResizing = function(finished2, resizeAmount) {
      var resizeAmountNormalised = this.normaliseResizeAmount(resizeAmount);
      var columnWidths = [{ key: this.column, newWidth: this.resizeStartWidth + resizeAmountNormalised }];
      this.columnModel.setColumnWidths(columnWidths, this.resizeWithShiftKey, finished2, "uiColumnDragged");
      if (finished2) {
        this.comp.addOrRemoveCssClass("ag-column-resizing", false);
      }
    };
    ResizeFeature2.prototype.onResizeStart = function(shiftKey) {
      this.resizeStartWidth = this.column.getActualWidth();
      this.resizeWithShiftKey = shiftKey;
      this.comp.addOrRemoveCssClass("ag-column-resizing", true);
    };
    ResizeFeature2.prototype.normaliseResizeAmount = function(dragChange) {
      var result = dragChange;
      var notPinningLeft = this.pinned !== Constants.PINNED_LEFT;
      var pinningRight = this.pinned === Constants.PINNED_RIGHT;
      if (this.gridOptionsWrapper.isEnableRtl()) {
        if (notPinningLeft) {
          result *= -1;
        }
      } else {
        if (pinningRight) {
          result *= -1;
        }
      }
      return result;
    };
    __decorate$U([
      Autowired("horizontalResizeService")
    ], ResizeFeature2.prototype, "horizontalResizeService", void 0);
    __decorate$U([
      Autowired("columnModel")
    ], ResizeFeature2.prototype, "columnModel", void 0);
    __decorate$U([
      PostConstruct
    ], ResizeFeature2.prototype, "postConstruct", null);
    return ResizeFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$12 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$V = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AgAbstractLabel = function(_super) {
    __extends$12(AgAbstractLabel2, _super);
    function AgAbstractLabel2(config2, template) {
      var _this = _super.call(this, template) || this;
      _this.labelSeparator = "";
      _this.labelAlignment = "left";
      _this.label = "";
      _this.config = config2 || {};
      return _this;
    }
    AgAbstractLabel2.prototype.postConstruct = function() {
      addCssClass(this.getGui(), "ag-labeled");
      addCssClass(this.eLabel, "ag-label");
      var _a = this.config, labelSeparator = _a.labelSeparator, label = _a.label, labelWidth = _a.labelWidth, labelAlignment = _a.labelAlignment;
      if (labelSeparator != null) {
        this.setLabelSeparator(labelSeparator);
      }
      if (label != null) {
        this.setLabel(label);
      }
      if (labelWidth != null) {
        this.setLabelWidth(labelWidth);
      }
      this.setLabelAlignment(labelAlignment || this.labelAlignment);
      this.refreshLabel();
    };
    AgAbstractLabel2.prototype.refreshLabel = function() {
      clearElement(this.eLabel);
      if (typeof this.label === "string") {
        this.eLabel.innerText = this.label + this.labelSeparator;
      } else if (this.label) {
        this.eLabel.appendChild(this.label);
      }
      if (this.label === "") {
        addCssClass(this.eLabel, "ag-hidden");
        setAriaRole(this.eLabel, "presentation");
      } else {
        removeCssClass(this.eLabel, "ag-hidden");
        setAriaRole(this.eLabel, null);
      }
    };
    AgAbstractLabel2.prototype.setLabelSeparator = function(labelSeparator) {
      if (this.labelSeparator === labelSeparator) {
        return this;
      }
      this.labelSeparator = labelSeparator;
      if (this.label != null) {
        this.refreshLabel();
      }
      return this;
    };
    AgAbstractLabel2.prototype.getLabelId = function() {
      this.eLabel.id = this.eLabel.id || "ag-" + this.getCompId() + "-label";
      return this.eLabel.id;
    };
    AgAbstractLabel2.prototype.getLabel = function() {
      return this.label;
    };
    AgAbstractLabel2.prototype.setLabel = function(label) {
      if (this.label === label) {
        return this;
      }
      this.label = label;
      this.refreshLabel();
      return this;
    };
    AgAbstractLabel2.prototype.setLabelAlignment = function(alignment) {
      var eGui = this.getGui();
      addOrRemoveCssClass(eGui, "ag-label-align-left", alignment === "left");
      addOrRemoveCssClass(eGui, "ag-label-align-right", alignment === "right");
      addOrRemoveCssClass(eGui, "ag-label-align-top", alignment === "top");
      return this;
    };
    AgAbstractLabel2.prototype.setLabelWidth = function(width) {
      if (this.label == null) {
        return this;
      }
      setElementWidth(this.eLabel, width);
      return this;
    };
    __decorate$V([
      PostConstruct
    ], AgAbstractLabel2.prototype, "postConstruct", null);
    return AgAbstractLabel2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$13 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var AgAbstractField = function(_super) {
    __extends$13(AgAbstractField2, _super);
    function AgAbstractField2(config2, template, className) {
      var _this = _super.call(this, config2, template) || this;
      _this.className = className;
      _this.disabled = false;
      return _this;
    }
    AgAbstractField2.prototype.postConstruct = function() {
      _super.prototype.postConstruct.call(this);
      if (this.className) {
        addCssClass(this.getGui(), this.className);
      }
    };
    AgAbstractField2.prototype.onValueChange = function(callbackFn) {
      var _this = this;
      this.addManagedListener(this, AgAbstractField2.EVENT_CHANGED, function() {
        return callbackFn(_this.getValue());
      });
      return this;
    };
    AgAbstractField2.prototype.getWidth = function() {
      return this.getGui().clientWidth;
    };
    AgAbstractField2.prototype.setWidth = function(width) {
      setFixedWidth(this.getGui(), width);
      return this;
    };
    AgAbstractField2.prototype.getPreviousValue = function() {
      return this.previousValue;
    };
    AgAbstractField2.prototype.getValue = function() {
      return this.value;
    };
    AgAbstractField2.prototype.setValue = function(value, silent) {
      if (this.value === value) {
        return this;
      }
      this.previousValue = this.value;
      this.value = value;
      if (!silent) {
        this.dispatchEvent({ type: AgAbstractField2.EVENT_CHANGED });
      }
      return this;
    };
    AgAbstractField2.prototype.setDisabled = function(disabled) {
      disabled = !!disabled;
      var element2 = this.getGui();
      setDisabled(element2, disabled);
      addOrRemoveCssClass(element2, "ag-disabled", disabled);
      this.disabled = disabled;
      return this;
    };
    AgAbstractField2.prototype.isDisabled = function() {
      return !!this.disabled;
    };
    AgAbstractField2.EVENT_CHANGED = "valueChange";
    return AgAbstractField2;
  }(AgAbstractLabel);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$14 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$W = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AgAbstractInputField = function(_super) {
    __extends$14(AgAbstractInputField2, _super);
    function AgAbstractInputField2(config2, className, inputType, displayFieldTag) {
      if (inputType === void 0) {
        inputType = "text";
      }
      if (displayFieldTag === void 0) {
        displayFieldTag = "input";
      }
      var _this = _super.call(this, config2, '\n            <div role="presentation">\n                <div ref="eLabel" class="ag-input-field-label"></div>\n                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <' + displayFieldTag + ' ref="eInput" class="ag-input-field-input"></' + displayFieldTag + ">\n                </div>\n            </div>", className) || this;
      _this.inputType = inputType;
      _this.displayFieldTag = displayFieldTag;
      return _this;
    }
    AgAbstractInputField2.prototype.postConstruct = function() {
      _super.prototype.postConstruct.call(this);
      this.setInputType();
      addCssClass(this.eLabel, this.className + "-label");
      addCssClass(this.eWrapper, this.className + "-input-wrapper");
      addCssClass(this.eInput, this.className + "-input");
      addCssClass(this.getGui(), "ag-input-field");
      this.eInput.id = this.eInput.id || "ag-" + this.getCompId() + "-input";
      var _a = this.config, width = _a.width, value = _a.value;
      if (width != null) {
        this.setWidth(width);
      }
      if (value != null) {
        this.setValue(value);
      }
      this.addInputListeners();
    };
    AgAbstractInputField2.prototype.refreshLabel = function() {
      if (exists(this.getLabel())) {
        setAriaLabelledBy(this.eInput, this.getLabelId());
      } else {
        this.eInput.removeAttribute("aria-labelledby");
      }
      _super.prototype.refreshLabel.call(this);
    };
    AgAbstractInputField2.prototype.addInputListeners = function() {
      var _this = this;
      this.addManagedListener(this.eInput, "input", function(e) {
        return _this.setValue(e.target.value);
      });
    };
    AgAbstractInputField2.prototype.setInputType = function() {
      if (this.displayFieldTag === "input") {
        this.eInput.setAttribute("type", this.inputType);
      }
    };
    AgAbstractInputField2.prototype.getInputElement = function() {
      return this.eInput;
    };
    AgAbstractInputField2.prototype.setInputWidth = function(width) {
      setElementWidth(this.eWrapper, width);
      return this;
    };
    AgAbstractInputField2.prototype.setInputName = function(name) {
      this.getInputElement().setAttribute("name", name);
      return this;
    };
    AgAbstractInputField2.prototype.getFocusableElement = function() {
      return this.eInput;
    };
    AgAbstractInputField2.prototype.setMaxLength = function(length) {
      var eInput = this.eInput;
      eInput.maxLength = length;
      return this;
    };
    AgAbstractInputField2.prototype.setInputPlaceholder = function(placeholder) {
      addOrRemoveAttribute(this.eInput, "placeholder", placeholder);
      return this;
    };
    AgAbstractInputField2.prototype.setInputAriaLabel = function(label) {
      setAriaLabel(this.eInput, label);
      return this;
    };
    AgAbstractInputField2.prototype.setDisabled = function(disabled) {
      setDisabled(this.eInput, disabled);
      return _super.prototype.setDisabled.call(this, disabled);
    };
    __decorate$W([
      RefSelector("eLabel")
    ], AgAbstractInputField2.prototype, "eLabel", void 0);
    __decorate$W([
      RefSelector("eWrapper")
    ], AgAbstractInputField2.prototype, "eWrapper", void 0);
    __decorate$W([
      RefSelector("eInput")
    ], AgAbstractInputField2.prototype, "eInput", void 0);
    return AgAbstractInputField2;
  }(AgAbstractField);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$15 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var AgCheckbox = function(_super) {
    __extends$15(AgCheckbox2, _super);
    function AgCheckbox2(config2, className, inputType) {
      if (className === void 0) {
        className = "ag-checkbox";
      }
      if (inputType === void 0) {
        inputType = "checkbox";
      }
      var _this = _super.call(this, config2, className, inputType) || this;
      _this.labelAlignment = "right";
      _this.selected = false;
      _this.readOnly = false;
      _this.passive = false;
      return _this;
    }
    AgCheckbox2.prototype.addInputListeners = function() {
      this.addManagedListener(this.eInput, "click", this.onCheckboxClick.bind(this));
      this.addManagedListener(this.eLabel, "click", this.toggle.bind(this));
    };
    AgCheckbox2.prototype.getNextValue = function() {
      return this.selected === void 0 ? true : !this.selected;
    };
    AgCheckbox2.prototype.setPassive = function(passive) {
      this.passive = passive;
    };
    AgCheckbox2.prototype.isReadOnly = function() {
      return this.readOnly;
    };
    AgCheckbox2.prototype.setReadOnly = function(readOnly) {
      addOrRemoveCssClass(this.eWrapper, "ag-disabled", readOnly);
      this.eInput.disabled = readOnly;
      this.readOnly = readOnly;
    };
    AgCheckbox2.prototype.setDisabled = function(disabled) {
      addOrRemoveCssClass(this.eWrapper, "ag-disabled", disabled);
      return _super.prototype.setDisabled.call(this, disabled);
    };
    AgCheckbox2.prototype.toggle = function() {
      var previousValue = this.isSelected();
      var nextValue = this.getNextValue();
      if (this.passive) {
        this.dispatchChange(nextValue, previousValue);
      } else {
        this.setValue(nextValue);
      }
    };
    AgCheckbox2.prototype.getValue = function() {
      return this.isSelected();
    };
    AgCheckbox2.prototype.setValue = function(value, silent) {
      this.refreshSelectedClass(value);
      this.setSelected(value, silent);
      return this;
    };
    AgCheckbox2.prototype.setName = function(name) {
      var input = this.getInputElement();
      input.name = name;
      return this;
    };
    AgCheckbox2.prototype.isSelected = function() {
      return this.selected;
    };
    AgCheckbox2.prototype.setSelected = function(selected, silent) {
      if (this.isSelected() === selected) {
        return;
      }
      this.previousValue = this.isSelected();
      selected = this.selected = typeof selected === "boolean" ? selected : void 0;
      this.eInput.checked = selected;
      this.eInput.indeterminate = selected === void 0;
      if (!silent) {
        this.dispatchChange(this.selected, this.previousValue);
      }
    };
    AgCheckbox2.prototype.dispatchChange = function(selected, previousValue, event) {
      this.dispatchEvent({ type: AgCheckbox2.EVENT_CHANGED, selected, previousValue, event });
      var input = this.getInputElement();
      var checkboxChangedEvent = {
        type: Events.EVENT_CHECKBOX_CHANGED,
        id: input.id,
        name: input.name,
        selected,
        previousValue
      };
      this.eventService.dispatchEvent(checkboxChangedEvent);
    };
    AgCheckbox2.prototype.onCheckboxClick = function(e) {
      if (this.passive) {
        return;
      }
      var previousValue = this.isSelected();
      var selected = this.selected = e.target.checked;
      this.refreshSelectedClass(selected);
      this.dispatchChange(selected, previousValue, e);
    };
    AgCheckbox2.prototype.refreshSelectedClass = function(value) {
      addOrRemoveCssClass(this.eWrapper, "ag-checked", value === true);
      addOrRemoveCssClass(this.eWrapper, "ag-indeterminate", value == null);
    };
    return AgCheckbox2;
  }(AgAbstractInputField);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$16 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$X = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var SelectAllFeature = function(_super) {
    __extends$16(SelectAllFeature2, _super);
    function SelectAllFeature2(column) {
      var _this = _super.call(this) || this;
      _this.cbSelectAllVisible = false;
      _this.processingEventFromCheckbox = false;
      _this.column = column;
      var colDef = column.getColDef();
      _this.filteredOnly = colDef ? !!colDef.headerCheckboxSelectionFilteredOnly : false;
      return _this;
    }
    SelectAllFeature2.prototype.onSpaceKeyPressed = function(e) {
      var checkbox = this.cbSelectAll;
      if (checkbox.isDisplayed() && !checkbox.getGui().contains(document.activeElement)) {
        e.preventDefault();
        checkbox.setValue(!checkbox.getValue());
      }
    };
    SelectAllFeature2.prototype.getCheckboxGui = function() {
      return this.cbSelectAll.getGui();
    };
    SelectAllFeature2.prototype.setComp = function(comp) {
      this.comp = comp;
      this.cbSelectAll = this.createManagedBean(new AgCheckbox());
      this.cbSelectAll.addCssClass("ag-header-select-all");
      setAriaRole(this.cbSelectAll.getGui(), "presentation");
      this.showOrHideSelectAll();
      this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.showOrHideSelectAll.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.showOrHideSelectAll.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_SELECTION_CHANGED, this.onSelectionChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_MODEL_UPDATED, this.onModelChanged.bind(this));
      this.addManagedListener(this.cbSelectAll, AgCheckbox.EVENT_CHANGED, this.onCbSelectAll.bind(this));
      this.cbSelectAll.getInputElement().setAttribute("tabindex", "-1");
      this.refreshSelectAllLabel();
    };
    SelectAllFeature2.prototype.showOrHideSelectAll = function() {
      this.cbSelectAllVisible = this.isCheckboxSelection();
      this.cbSelectAll.setDisplayed(this.cbSelectAllVisible);
      if (this.cbSelectAllVisible) {
        this.checkRightRowModelType();
        this.updateStateOfCheckbox();
      }
      this.refreshHeaderAriaDescribedBy(this.cbSelectAllVisible);
    };
    SelectAllFeature2.prototype.refreshHeaderAriaDescribedBy = function(isSelectAllVisible) {
      var describedBy = isSelectAllVisible ? this.cbSelectAll.getInputElement().id : void 0;
      this.comp.setAriaDescribedBy(describedBy);
    };
    SelectAllFeature2.prototype.onModelChanged = function() {
      if (!this.cbSelectAllVisible) {
        return;
      }
      this.updateStateOfCheckbox();
    };
    SelectAllFeature2.prototype.onSelectionChanged = function() {
      if (!this.cbSelectAllVisible) {
        return;
      }
      this.updateStateOfCheckbox();
    };
    SelectAllFeature2.prototype.getNextCheckboxState = function(selectionCount) {
      if (selectionCount.selected === 0 && selectionCount.notSelected === 0) {
        return false;
      }
      if (selectionCount.selected > 0 && selectionCount.notSelected > 0) {
        return null;
      }
      if (selectionCount.selected > 0) {
        return true;
      }
      return false;
    };
    SelectAllFeature2.prototype.updateStateOfCheckbox = function() {
      if (this.processingEventFromCheckbox) {
        return;
      }
      this.processingEventFromCheckbox = true;
      var selectionCount = this.getSelectionCount();
      var allSelected = this.getNextCheckboxState(selectionCount);
      this.cbSelectAll.setValue(allSelected);
      this.refreshSelectAllLabel();
      this.processingEventFromCheckbox = false;
    };
    SelectAllFeature2.prototype.refreshSelectAllLabel = function() {
      var translate = this.gridOptionsWrapper.getLocaleTextFunc();
      var checked = this.cbSelectAll.getValue();
      var ariaStatus = checked ? translate("ariaChecked", "checked") : translate("ariaUnchecked", "unchecked");
      var ariaLabel = translate("ariaRowSelectAll", "Press Space to toggle all rows selection");
      this.cbSelectAll.setInputAriaLabel(ariaLabel + " (" + ariaStatus + ")");
    };
    SelectAllFeature2.prototype.getSelectionCount = function() {
      var _this = this;
      var selectedCount = 0;
      var notSelectedCount = 0;
      var callback = function(node) {
        if (_this.gridOptionsWrapper.isGroupSelectsChildren() && node.group) {
          return;
        }
        if (node.isSelected()) {
          selectedCount++;
        } else if (!node.selectable)
          ;
        else {
          notSelectedCount++;
        }
      };
      if (this.filteredOnly) {
        this.gridApi.forEachNodeAfterFilter(callback);
      } else {
        this.gridApi.forEachNode(callback);
      }
      return {
        notSelected: notSelectedCount,
        selected: selectedCount
      };
    };
    SelectAllFeature2.prototype.checkRightRowModelType = function() {
      var rowModelType = this.rowModel.getType();
      var rowModelMatches = rowModelType === Constants.ROW_MODEL_TYPE_CLIENT_SIDE;
      if (!rowModelMatches) {
        console.warn("AG Grid: selectAllCheckbox is only available if using normal row model, you are using " + rowModelType);
      }
    };
    SelectAllFeature2.prototype.onCbSelectAll = function() {
      if (this.processingEventFromCheckbox) {
        return;
      }
      if (!this.cbSelectAllVisible) {
        return;
      }
      var value = this.cbSelectAll.getValue();
      if (value) {
        this.selectionService.selectAllRowNodes(this.filteredOnly);
      } else {
        this.selectionService.deselectAllRowNodes(this.filteredOnly);
      }
    };
    SelectAllFeature2.prototype.isCheckboxSelection = function() {
      var result = this.column.getColDef().headerCheckboxSelection;
      if (typeof result === "function") {
        var func = result;
        result = func({
          column: this.column,
          colDef: this.column.getColDef(),
          columnApi: this.columnApi,
          api: this.gridApi
        });
      }
      if (result) {
        if (this.gridOptionsWrapper.isRowModelServerSide()) {
          console.warn("headerCheckboxSelection is not supported for Server Side Row Model");
          return false;
        }
        if (this.gridOptionsWrapper.isRowModelInfinite()) {
          console.warn("headerCheckboxSelection is not supported for Infinite Row Model");
          return false;
        }
        if (this.gridOptionsWrapper.isRowModelViewport()) {
          console.warn("headerCheckboxSelection is not supported for Viewport Row Model");
          return false;
        }
        return true;
      }
      return false;
    };
    __decorate$X([
      Autowired("gridApi")
    ], SelectAllFeature2.prototype, "gridApi", void 0);
    __decorate$X([
      Autowired("columnApi")
    ], SelectAllFeature2.prototype, "columnApi", void 0);
    __decorate$X([
      Autowired("rowModel")
    ], SelectAllFeature2.prototype, "rowModel", void 0);
    __decorate$X([
      Autowired("selectionService")
    ], SelectAllFeature2.prototype, "selectionService", void 0);
    return SelectAllFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$17 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$Y = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var HeaderCellCtrl = function(_super) {
    __extends$17(HeaderCellCtrl2, _super);
    function HeaderCellCtrl2(column, parentRowCtrl) {
      var _this = _super.call(this, column, parentRowCtrl) || this;
      _this.refreshFunctions = [];
      _this.userHeaderClasses = new Set();
      _this.column = column;
      return _this;
    }
    HeaderCellCtrl2.prototype.setComp = function(comp, eGui, eResize) {
      var _this = this;
      _super.prototype.setGui.call(this, eGui);
      this.comp = comp;
      this.colDefVersion = this.columnModel.getColDefVersion();
      this.updateState();
      this.setupWidth();
      this.setupMovingCss();
      this.setupMenuClass();
      this.setupSortableClass();
      this.addColumnHoverListener();
      this.setupFilterCss();
      this.setupColId();
      this.setupClassesFromColDef();
      this.setupTooltip();
      this.addActiveHeaderMouseListeners();
      this.setupSelectAll();
      this.setupUserComp();
      this.createManagedBean(new ResizeFeature(this.getPinned(), this.column, eResize, comp, this));
      this.createManagedBean(new HoverFeature([this.column], eGui));
      this.createManagedBean(new SetLeftFeature(this.column, eGui, this.beans));
      this.createManagedBean(new ManagedFocusFeature(eGui, {
        shouldStopEventPropagation: function(e) {
          return _this.shouldStopEventPropagation(e);
        },
        onTabKeyDown: function() {
          return null;
        },
        handleKeyDown: this.handleKeyDown.bind(this),
        onFocusIn: this.onFocusIn.bind(this),
        onFocusOut: this.onFocusOut.bind(this)
      }));
      this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.onNewColumnsLoaded.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_VALUE_CHANGED, this.onColumnValueChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.onColumnRowGroupChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_CHANGED, this.onColumnPivotChanged.bind(this));
    };
    HeaderCellCtrl2.prototype.setupUserComp = function() {
      var compDetails = this.lookupUserCompDetails();
      this.setCompDetails(compDetails);
    };
    HeaderCellCtrl2.prototype.setCompDetails = function(compDetails) {
      this.userCompDetails = compDetails;
      this.comp.setUserCompDetails(compDetails);
    };
    HeaderCellCtrl2.prototype.lookupUserCompDetails = function() {
      var params2 = this.createParams();
      var colDef = this.column.getColDef();
      return this.userComponentFactory.getHeaderCompDetails(colDef, params2);
    };
    HeaderCellCtrl2.prototype.createParams = function() {
      var _this = this;
      var colDef = this.column.getColDef();
      var params2 = {
        column: this.column,
        displayName: this.displayName,
        enableSorting: colDef.sortable,
        enableMenu: this.menuEnabled,
        showColumnMenu: function(source) {
          _this.gridApi.showColumnMenuAfterButtonClick(_this.column, source);
        },
        progressSort: function(multiSort) {
          _this.sortController.progressSort(_this.column, !!multiSort, "uiColumnSorted");
        },
        setSort: function(sort, multiSort) {
          _this.sortController.setSortForColumn(_this.column, sort, !!multiSort, "uiColumnSorted");
        },
        api: this.gridApi,
        columnApi: this.columnApi,
        context: this.gridOptionsWrapper.getContext(),
        eGridHeader: this.getGui()
      };
      return params2;
    };
    HeaderCellCtrl2.prototype.setupSelectAll = function() {
      this.selectAllFeature = this.createManagedBean(new SelectAllFeature(this.column));
      this.selectAllFeature.setComp(this.comp);
    };
    HeaderCellCtrl2.prototype.getSelectAllGui = function() {
      return this.selectAllFeature.getCheckboxGui();
    };
    HeaderCellCtrl2.prototype.handleKeyDown = function(e) {
      if (e.keyCode === KeyCode.SPACE) {
        this.selectAllFeature.onSpaceKeyPressed(e);
      }
      if (e.keyCode === KeyCode.ENTER) {
        this.onEnterKeyPressed(e);
      }
    };
    HeaderCellCtrl2.prototype.onEnterKeyPressed = function(e) {
      var headerComp = this.comp.getUserCompInstance();
      if (!headerComp) {
        return;
      }
      if (e.ctrlKey || e.metaKey) {
        if (this.menuEnabled && headerComp.showMenu) {
          e.preventDefault();
          headerComp.showMenu();
        }
      } else if (this.sortable) {
        var multiSort = e.shiftKey;
        this.sortController.progressSort(this.column, multiSort, "uiColumnSorted");
      }
    };
    HeaderCellCtrl2.prototype.isMenuEnabled = function() {
      return this.menuEnabled;
    };
    HeaderCellCtrl2.prototype.onFocusIn = function(e) {
      if (!this.getGui().contains(e.relatedTarget)) {
        var rowIndex = this.getRowIndex();
        this.focusService.setFocusedHeader(rowIndex, this.column);
      }
      this.setActiveHeader(true);
    };
    HeaderCellCtrl2.prototype.onFocusOut = function(e) {
      if (this.getGui().contains(e.relatedTarget)) {
        return;
      }
      this.setActiveHeader(false);
    };
    HeaderCellCtrl2.prototype.setupTooltip = function() {
      var _this = this;
      var tooltipCtrl = {
        getColumn: function() {
          return _this.column;
        },
        getColDef: function() {
          return _this.column.getColDef();
        },
        getGui: function() {
          return _this.eGui;
        },
        getLocation: function() {
          return "header";
        },
        getTooltipValue: function() {
          var res = _this.column.getColDef().headerTooltip;
          return res;
        }
      };
      var tooltipFeature = this.createManagedBean(new TooltipFeature(tooltipCtrl, this.beans));
      tooltipFeature.setComp(this.comp);
      this.refreshFunctions.push(function() {
        return tooltipFeature.refreshToolTip();
      });
    };
    HeaderCellCtrl2.prototype.setupClassesFromColDef = function() {
      var _this = this;
      var refreshHeaderClasses = function() {
        var colDef = _this.column.getColDef();
        var goa = _this.gridOptionsWrapper;
        var classes = CssClassApplier.getHeaderClassesFromColDef(colDef, goa, _this.column, null);
        var oldClasses = _this.userHeaderClasses;
        _this.userHeaderClasses = new Set(classes);
        classes.forEach(function(c) {
          if (oldClasses.has(c)) {
            oldClasses.delete(c);
          } else {
            _this.comp.addOrRemoveCssClass(c, true);
          }
        });
        oldClasses.forEach(function(c) {
          return _this.comp.addOrRemoveCssClass(c, false);
        });
      };
      this.refreshFunctions.push(refreshHeaderClasses);
      refreshHeaderClasses();
    };
    HeaderCellCtrl2.prototype.getGui = function() {
      return this.eGui;
    };
    HeaderCellCtrl2.prototype.setDragSource = function(eSource) {
      var _this = this;
      this.dragSourceElement = eSource;
      this.removeDragSource();
      if (!eSource) {
        return;
      }
      if (!this.draggable) {
        return;
      }
      this.moveDragSource = {
        type: exports2.DragSourceType.HeaderCell,
        eElement: eSource,
        defaultIconName: DragAndDropService.ICON_HIDE,
        getDragItem: function() {
          return _this.createDragItem();
        },
        dragItemName: this.displayName,
        onDragStarted: function() {
          return _this.column.setMoving(true, "uiColumnMoved");
        },
        onDragStopped: function() {
          return _this.column.setMoving(false, "uiColumnMoved");
        }
      };
      this.dragAndDropService.addDragSource(this.moveDragSource, true);
    };
    HeaderCellCtrl2.prototype.createDragItem = function() {
      var visibleState = {};
      visibleState[this.column.getId()] = this.column.isVisible();
      return {
        columns: [this.column],
        visibleState
      };
    };
    HeaderCellCtrl2.prototype.removeDragSource = function() {
      if (this.moveDragSource) {
        this.dragAndDropService.removeDragSource(this.moveDragSource);
        this.moveDragSource = void 0;
      }
    };
    HeaderCellCtrl2.prototype.onNewColumnsLoaded = function() {
      var colDefVersionNow = this.columnModel.getColDefVersion();
      if (colDefVersionNow != this.colDefVersion) {
        this.colDefVersion = colDefVersionNow;
        this.refresh();
      }
    };
    HeaderCellCtrl2.prototype.updateState = function() {
      var colDef = this.column.getColDef();
      this.menuEnabled = this.menuFactory.isMenuEnabled(this.column) && !colDef.suppressMenu;
      this.sortable = colDef.sortable;
      this.displayName = this.calculateDisplayName();
      this.draggable = this.workOutDraggable();
    };
    HeaderCellCtrl2.prototype.addRefreshFunction = function(func) {
      this.refreshFunctions.push(func);
    };
    HeaderCellCtrl2.prototype.refresh = function() {
      this.updateState();
      this.refreshHeaderComp();
      this.refreshFunctions.forEach(function(f) {
        return f();
      });
    };
    HeaderCellCtrl2.prototype.refreshHeaderComp = function() {
      var newCompDetails = this.lookupUserCompDetails();
      var compInstance = this.comp.getUserCompInstance();
      var attemptRefresh = compInstance != null && this.userCompDetails.componentClass == newCompDetails.componentClass;
      var headerCompRefreshed = attemptRefresh ? this.attemptHeaderCompRefresh(newCompDetails.params) : false;
      if (headerCompRefreshed) {
        this.setDragSource(this.dragSourceElement);
      } else {
        this.setCompDetails(newCompDetails);
      }
    };
    HeaderCellCtrl2.prototype.attemptHeaderCompRefresh = function(params2) {
      var headerComp = this.comp.getUserCompInstance();
      if (!headerComp) {
        return false;
      }
      if (!headerComp.refresh) {
        return false;
      }
      var res = headerComp.refresh(params2);
      return res;
    };
    HeaderCellCtrl2.prototype.calculateDisplayName = function() {
      return this.columnModel.getDisplayNameForColumn(this.column, "header", true);
    };
    HeaderCellCtrl2.prototype.checkDisplayName = function() {
      if (this.displayName !== this.calculateDisplayName()) {
        this.refresh();
      }
    };
    HeaderCellCtrl2.prototype.workOutDraggable = function() {
      var colDef = this.column.getColDef();
      var isSuppressMovableColumns = this.gridOptionsWrapper.isSuppressMovableColumns();
      var colCanMove = !isSuppressMovableColumns && !colDef.suppressMovable && !colDef.lockPosition;
      return !!colCanMove || !!colDef.enableRowGroup || !!colDef.enablePivot;
    };
    HeaderCellCtrl2.prototype.onColumnRowGroupChanged = function() {
      this.checkDisplayName();
    };
    HeaderCellCtrl2.prototype.onColumnPivotChanged = function() {
      this.checkDisplayName();
    };
    HeaderCellCtrl2.prototype.onColumnValueChanged = function() {
      this.checkDisplayName();
    };
    HeaderCellCtrl2.prototype.setupWidth = function() {
      var _this = this;
      var listener = function() {
        _this.comp.setWidth(_this.column.getActualWidth() + "px");
      };
      this.addManagedListener(this.column, Column.EVENT_WIDTH_CHANGED, listener);
      listener();
    };
    HeaderCellCtrl2.prototype.setupMovingCss = function() {
      var _this = this;
      var listener = function() {
        _this.comp.addOrRemoveCssClass("ag-header-cell-moving", _this.column.isMoving());
      };
      this.addManagedListener(this.column, Column.EVENT_MOVING_CHANGED, listener);
      listener();
    };
    HeaderCellCtrl2.prototype.setupMenuClass = function() {
      var _this = this;
      var listener = function() {
        _this.comp.addOrRemoveCssClass("ag-column-menu-visible", _this.column.isMenuVisible());
      };
      this.addManagedListener(this.column, Column.EVENT_MENU_VISIBLE_CHANGED, listener);
      listener();
    };
    HeaderCellCtrl2.prototype.setupSortableClass = function() {
      var _this = this;
      var updateSortableCssClass = function() {
        _this.comp.addOrRemoveCssClass("ag-header-cell-sortable", !!_this.sortable);
      };
      var updateAriaSort = function() {
        if (_this.sortable) {
          _this.comp.setAriaSort(getAriaSortState(_this.column));
        } else {
          _this.comp.setAriaSort(void 0);
        }
      };
      updateSortableCssClass();
      updateAriaSort();
      this.addRefreshFunction(updateSortableCssClass);
      this.addRefreshFunction(updateAriaSort);
      this.addManagedListener(this.column, Column.EVENT_SORT_CHANGED, updateAriaSort);
    };
    HeaderCellCtrl2.prototype.addColumnHoverListener = function() {
      var _this = this;
      var listener = function() {
        if (!_this.gridOptionsWrapper.isColumnHoverHighlight()) {
          return;
        }
        var isHovered = _this.columnHoverService.isHovered(_this.column);
        _this.comp.addOrRemoveCssClass("ag-column-hover", isHovered);
      };
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_HOVER_CHANGED, listener);
      listener();
    };
    HeaderCellCtrl2.prototype.setupFilterCss = function() {
      var _this = this;
      var listener = function() {
        _this.comp.addOrRemoveCssClass("ag-header-cell-filtered", _this.column.isFilterActive());
      };
      this.addManagedListener(this.column, Column.EVENT_FILTER_ACTIVE_CHANGED, listener);
      listener();
    };
    HeaderCellCtrl2.prototype.setupColId = function() {
      this.comp.setColId(this.column.getColId());
    };
    HeaderCellCtrl2.prototype.addActiveHeaderMouseListeners = function() {
      var _this = this;
      var listener = function(e) {
        return _this.setActiveHeader(e.type === "mouseenter");
      };
      this.addManagedListener(this.getGui(), "mouseenter", listener);
      this.addManagedListener(this.getGui(), "mouseleave", listener);
    };
    HeaderCellCtrl2.prototype.setActiveHeader = function(active2) {
      this.comp.addOrRemoveCssClass("ag-header-active", active2);
    };
    __decorate$Y([
      Autowired("columnModel")
    ], HeaderCellCtrl2.prototype, "columnModel", void 0);
    __decorate$Y([
      Autowired("columnHoverService")
    ], HeaderCellCtrl2.prototype, "columnHoverService", void 0);
    __decorate$Y([
      Autowired("beans")
    ], HeaderCellCtrl2.prototype, "beans", void 0);
    __decorate$Y([
      Autowired("sortController")
    ], HeaderCellCtrl2.prototype, "sortController", void 0);
    __decorate$Y([
      Autowired("menuFactory")
    ], HeaderCellCtrl2.prototype, "menuFactory", void 0);
    __decorate$Y([
      Autowired("dragAndDropService")
    ], HeaderCellCtrl2.prototype, "dragAndDropService", void 0);
    __decorate$Y([
      Autowired("gridApi")
    ], HeaderCellCtrl2.prototype, "gridApi", void 0);
    __decorate$Y([
      Autowired("columnApi")
    ], HeaderCellCtrl2.prototype, "columnApi", void 0);
    __decorate$Y([
      Autowired("userComponentFactory")
    ], HeaderCellCtrl2.prototype, "userComponentFactory", void 0);
    __decorate$Y([
      PreDestroy
    ], HeaderCellCtrl2.prototype, "removeDragSource", null);
    return HeaderCellCtrl2;
  }(AbstractHeaderCellCtrl);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$18 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$Z = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var GroupResizeFeature = function(_super) {
    __extends$18(GroupResizeFeature2, _super);
    function GroupResizeFeature2(comp, eResize, pinned, columnGroup) {
      var _this = _super.call(this) || this;
      _this.eResize = eResize;
      _this.comp = comp;
      _this.pinned = pinned;
      _this.columnGroup = columnGroup;
      return _this;
    }
    GroupResizeFeature2.prototype.postConstruct = function() {
      var _this = this;
      if (!this.columnGroup.isResizable()) {
        this.comp.addOrRemoveResizableCssClass("ag-hidden", true);
        return;
      }
      var finishedWithResizeFunc = this.horizontalResizeService.addResizeBar({
        eResizeBar: this.eResize,
        onResizeStart: this.onResizeStart.bind(this),
        onResizing: this.onResizing.bind(this, false),
        onResizeEnd: this.onResizing.bind(this, true)
      });
      this.addDestroyFunc(finishedWithResizeFunc);
      if (!this.gridOptionsWrapper.isSuppressAutoSize()) {
        var skipHeaderOnAutoSize_1 = this.gridOptionsWrapper.isSkipHeaderOnAutoSize();
        this.eResize.addEventListener("dblclick", function(event) {
          var keys3 = [];
          _this.columnGroup.getDisplayedLeafColumns().forEach(function(column) {
            if (!column.getColDef().suppressAutoSize) {
              keys3.push(column.getColId());
            }
          });
          if (keys3.length > 0) {
            _this.columnModel.autoSizeColumns(keys3, skipHeaderOnAutoSize_1, "uiColumnResized");
          }
        });
      }
    };
    GroupResizeFeature2.prototype.onResizeStart = function(shiftKey) {
      var _this = this;
      var leafCols = this.columnGroup.getDisplayedLeafColumns();
      this.resizeCols = leafCols.filter(function(col) {
        return col.isResizable();
      });
      this.resizeStartWidth = 0;
      this.resizeCols.forEach(function(col) {
        return _this.resizeStartWidth += col.getActualWidth();
      });
      this.resizeRatios = [];
      this.resizeCols.forEach(function(col) {
        return _this.resizeRatios.push(col.getActualWidth() / _this.resizeStartWidth);
      });
      var takeFromGroup = null;
      if (shiftKey) {
        takeFromGroup = this.columnModel.getDisplayedGroupAfter(this.columnGroup);
      }
      if (takeFromGroup) {
        var takeFromLeafCols = takeFromGroup.getDisplayedLeafColumns();
        this.resizeTakeFromCols = takeFromLeafCols.filter(function(col) {
          return col.isResizable();
        });
        this.resizeTakeFromStartWidth = 0;
        this.resizeTakeFromCols.forEach(function(col) {
          return _this.resizeTakeFromStartWidth += col.getActualWidth();
        });
        this.resizeTakeFromRatios = [];
        this.resizeTakeFromCols.forEach(function(col) {
          return _this.resizeTakeFromRatios.push(col.getActualWidth() / _this.resizeTakeFromStartWidth);
        });
      } else {
        this.resizeTakeFromCols = null;
        this.resizeTakeFromStartWidth = null;
        this.resizeTakeFromRatios = null;
      }
      this.comp.addOrRemoveCssClass("ag-column-resizing", true);
    };
    GroupResizeFeature2.prototype.onResizing = function(finished2, resizeAmount) {
      var resizeSets = [];
      var resizeAmountNormalised = this.normaliseDragChange(resizeAmount);
      resizeSets.push({
        columns: this.resizeCols,
        ratios: this.resizeRatios,
        width: this.resizeStartWidth + resizeAmountNormalised
      });
      if (this.resizeTakeFromCols) {
        resizeSets.push({
          columns: this.resizeTakeFromCols,
          ratios: this.resizeTakeFromRatios,
          width: this.resizeTakeFromStartWidth - resizeAmountNormalised
        });
      }
      this.columnModel.resizeColumnSets(resizeSets, finished2, "uiColumnDragged");
      if (finished2) {
        this.comp.addOrRemoveCssClass("ag-column-resizing", false);
      }
    };
    GroupResizeFeature2.prototype.normaliseDragChange = function(dragChange) {
      var result = dragChange;
      if (this.gridOptionsWrapper.isEnableRtl()) {
        if (this.pinned !== Constants.PINNED_LEFT) {
          result *= -1;
        }
      } else if (this.pinned === Constants.PINNED_RIGHT) {
        result *= -1;
      }
      return result;
    };
    __decorate$Z([
      Autowired("horizontalResizeService")
    ], GroupResizeFeature2.prototype, "horizontalResizeService", void 0);
    __decorate$Z([
      Autowired("columnModel")
    ], GroupResizeFeature2.prototype, "columnModel", void 0);
    __decorate$Z([
      PostConstruct
    ], GroupResizeFeature2.prototype, "postConstruct", null);
    return GroupResizeFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$19 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$_ = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var GroupWidthFeature = function(_super) {
    __extends$19(GroupWidthFeature2, _super);
    function GroupWidthFeature2(comp, columnGroup) {
      var _this = _super.call(this) || this;
      _this.removeChildListenersFuncs = [];
      _this.columnGroup = columnGroup;
      _this.comp = comp;
      return _this;
    }
    GroupWidthFeature2.prototype.postConstruct = function() {
      this.addListenersToChildrenColumns();
      this.addManagedListener(this.columnGroup, ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED, this.onDisplayedChildrenChanged.bind(this));
      this.onWidthChanged();
      this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this));
    };
    GroupWidthFeature2.prototype.addListenersToChildrenColumns = function() {
      var _this = this;
      this.removeListenersOnChildrenColumns();
      var widthChangedListener = this.onWidthChanged.bind(this);
      this.columnGroup.getLeafColumns().forEach(function(column) {
        column.addEventListener(Column.EVENT_WIDTH_CHANGED, widthChangedListener);
        column.addEventListener(Column.EVENT_VISIBLE_CHANGED, widthChangedListener);
        _this.removeChildListenersFuncs.push(function() {
          column.removeEventListener(Column.EVENT_WIDTH_CHANGED, widthChangedListener);
          column.removeEventListener(Column.EVENT_VISIBLE_CHANGED, widthChangedListener);
        });
      });
    };
    GroupWidthFeature2.prototype.removeListenersOnChildrenColumns = function() {
      this.removeChildListenersFuncs.forEach(function(func) {
        return func();
      });
      this.removeChildListenersFuncs = [];
    };
    GroupWidthFeature2.prototype.onDisplayedChildrenChanged = function() {
      this.addListenersToChildrenColumns();
      this.onWidthChanged();
    };
    GroupWidthFeature2.prototype.onWidthChanged = function() {
      this.comp.setWidth(this.columnGroup.getActualWidth() + "px");
    };
    __decorate$_([
      PostConstruct
    ], GroupWidthFeature2.prototype, "postConstruct", null);
    return GroupWidthFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1a = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$$ = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var HeaderGroupCellCtrl = function(_super) {
    __extends$1a(HeaderGroupCellCtrl2, _super);
    function HeaderGroupCellCtrl2(columnGroup, parentRowCtrl) {
      var _this = _super.call(this, columnGroup, parentRowCtrl) || this;
      _this.columnGroup = columnGroup;
      return _this;
    }
    HeaderGroupCellCtrl2.prototype.setComp = function(comp, eGui, eResize) {
      _super.prototype.setGui.call(this, eGui);
      this.comp = comp;
      this.displayName = this.columnModel.getDisplayNameForColumnGroup(this.columnGroup, "header");
      this.addClasses();
      this.addAttributes();
      this.setupMovingCss();
      this.setupExpandable();
      this.setupTooltip();
      this.setupUserComp();
      var pinned = this.getParentRowCtrl().getPinned();
      var leafCols = this.columnGroup.getOriginalColumnGroup().getLeafColumns();
      this.createManagedBean(new HoverFeature(leafCols, eGui));
      this.createManagedBean(new SetLeftFeature(this.columnGroup, eGui, this.beans));
      this.createManagedBean(new GroupResizeFeature(comp, eResize, pinned, this.columnGroup));
      this.createManagedBean(new GroupWidthFeature(comp, this.columnGroup));
      this.createManagedBean(new ManagedFocusFeature(eGui, {
        shouldStopEventPropagation: this.shouldStopEventPropagation.bind(this),
        onTabKeyDown: function() {
          return void 0;
        },
        handleKeyDown: this.handleKeyDown.bind(this),
        onFocusIn: this.onFocusIn.bind(this)
      }));
    };
    HeaderGroupCellCtrl2.prototype.setupUserComp = function() {
      var _this = this;
      var displayName = this.displayName;
      var params2 = {
        displayName: this.displayName,
        columnGroup: this.columnGroup,
        setExpanded: function(expanded) {
          _this.columnModel.setColumnGroupOpened(_this.columnGroup.getOriginalColumnGroup(), expanded, "gridInitializing");
        },
        api: this.gridApi,
        columnApi: this.columnApi,
        context: this.gridOptionsWrapper.getContext()
      };
      if (!displayName) {
        var columnGroup = this.columnGroup;
        var leafCols = columnGroup.getLeafColumns();
        while (columnGroup.getParent() && columnGroup.getParent().getLeafColumns().length === leafCols.length) {
          columnGroup = columnGroup.getParent();
        }
        var colGroupDef = columnGroup.getColGroupDef();
        if (colGroupDef) {
          displayName = colGroupDef.headerName;
        }
        if (!displayName) {
          displayName = leafCols ? this.columnModel.getDisplayNameForColumn(leafCols[0], "header", true) : "";
        }
      }
      var compDetails = this.userComponentFactory.getHeaderGroupCompDetails(params2);
      this.comp.setUserCompDetails(compDetails);
    };
    HeaderGroupCellCtrl2.prototype.setupTooltip = function() {
      var _this = this;
      var colGroupDef = this.columnGroup.getColGroupDef();
      var tooltipCtrl = {
        getColumn: function() {
          return _this.columnGroup;
        },
        getGui: function() {
          return _this.eGui;
        },
        getLocation: function() {
          return "headerGroup";
        },
        getTooltipValue: function() {
          return colGroupDef && colGroupDef.headerTooltip;
        }
      };
      if (colGroupDef) {
        tooltipCtrl.getColDef = function() {
          return colGroupDef;
        };
      }
      var tooltipFeature = this.createManagedBean(new TooltipFeature(tooltipCtrl, this.beans));
      tooltipFeature.setComp(this.comp);
    };
    HeaderGroupCellCtrl2.prototype.setupExpandable = function() {
      var providedColGroup = this.columnGroup.getOriginalColumnGroup();
      this.refreshExpanded();
      this.addManagedListener(providedColGroup, ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED, this.refreshExpanded.bind(this));
      this.addManagedListener(providedColGroup, ProvidedColumnGroup.EVENT_EXPANDED_CHANGED, this.refreshExpanded.bind(this));
    };
    HeaderGroupCellCtrl2.prototype.refreshExpanded = function() {
      var column = this.columnGroup;
      this.expandable = column.isExpandable();
      var expanded = column.isExpanded();
      if (this.expandable) {
        this.comp.setAriaExpanded(expanded ? "true" : "false");
      } else {
        this.comp.setAriaExpanded(void 0);
      }
    };
    HeaderGroupCellCtrl2.prototype.addAttributes = function() {
      this.comp.setColId(this.columnGroup.getUniqueId());
    };
    HeaderGroupCellCtrl2.prototype.addClasses = function() {
      var _this = this;
      var colGroupDef = this.columnGroup.getColGroupDef();
      var classes = CssClassApplier.getHeaderClassesFromColDef(colGroupDef, this.gridOptionsWrapper, null, this.columnGroup);
      classes.push(this.columnGroup.isPadding() ? "ag-header-group-cell-no-group" : "ag-header-group-cell-with-group");
      classes.forEach(function(c) {
        return _this.comp.addOrRemoveCssClass(c, true);
      });
    };
    HeaderGroupCellCtrl2.prototype.setupMovingCss = function() {
      var _this = this;
      var providedColumnGroup = this.columnGroup.getOriginalColumnGroup();
      var leafColumns = providedColumnGroup.getLeafColumns();
      var listener = function() {
        return _this.comp.addOrRemoveCssClass("ag-header-cell-moving", _this.columnGroup.isMoving());
      };
      leafColumns.forEach(function(col) {
        _this.addManagedListener(col, Column.EVENT_MOVING_CHANGED, listener);
      });
      listener();
    };
    HeaderGroupCellCtrl2.prototype.onFocusIn = function(e) {
      if (!this.eGui.contains(e.relatedTarget)) {
        var rowIndex = this.getRowIndex();
        this.beans.focusService.setFocusedHeader(rowIndex, this.columnGroup);
      }
    };
    HeaderGroupCellCtrl2.prototype.handleKeyDown = function(e) {
      var activeEl = document.activeElement;
      var wrapperHasFocus = activeEl === this.eGui;
      if (!this.expandable || !wrapperHasFocus) {
        return;
      }
      if (e.keyCode === KeyCode.ENTER) {
        var column = this.columnGroup;
        var newExpandedValue = !column.isExpanded();
        this.columnModel.setColumnGroupOpened(column.getOriginalColumnGroup(), newExpandedValue, "uiColumnExpanded");
      }
    };
    HeaderGroupCellCtrl2.prototype.setDragSource = function(eHeaderGroup) {
      var _this = this;
      if (this.isSuppressMoving()) {
        return;
      }
      var allLeafColumns = this.columnGroup.getOriginalColumnGroup().getLeafColumns();
      var dragSource = {
        type: exports2.DragSourceType.HeaderCell,
        eElement: eHeaderGroup,
        defaultIconName: DragAndDropService.ICON_HIDE,
        dragItemName: this.displayName,
        getDragItem: this.getDragItemForGroup.bind(this),
        onDragStarted: function() {
          return allLeafColumns.forEach(function(col) {
            return col.setMoving(true, "uiColumnDragged");
          });
        },
        onDragStopped: function() {
          return allLeafColumns.forEach(function(col) {
            return col.setMoving(false, "uiColumnDragged");
          });
        }
      };
      this.dragAndDropService.addDragSource(dragSource, true);
      this.addDestroyFunc(function() {
        return _this.dragAndDropService.removeDragSource(dragSource);
      });
    };
    HeaderGroupCellCtrl2.prototype.getDragItemForGroup = function() {
      var allColumnsOriginalOrder = this.columnGroup.getOriginalColumnGroup().getLeafColumns();
      var visibleState = {};
      allColumnsOriginalOrder.forEach(function(column) {
        return visibleState[column.getId()] = column.isVisible();
      });
      var allColumnsCurrentOrder = [];
      this.columnModel.getAllDisplayedColumns().forEach(function(column) {
        if (allColumnsOriginalOrder.indexOf(column) >= 0) {
          allColumnsCurrentOrder.push(column);
          removeFromArray(allColumnsOriginalOrder, column);
        }
      });
      allColumnsOriginalOrder.forEach(function(column) {
        return allColumnsCurrentOrder.push(column);
      });
      return {
        columns: allColumnsCurrentOrder,
        visibleState
      };
    };
    HeaderGroupCellCtrl2.prototype.isSuppressMoving = function() {
      var childSuppressesMoving = false;
      this.columnGroup.getLeafColumns().forEach(function(column) {
        if (column.getColDef().suppressMovable || column.getColDef().lockPosition) {
          childSuppressesMoving = true;
        }
      });
      var result = childSuppressesMoving || this.gridOptionsWrapper.isSuppressMovableColumns();
      return result;
    };
    __decorate$$([
      Autowired("beans")
    ], HeaderGroupCellCtrl2.prototype, "beans", void 0);
    __decorate$$([
      Autowired("columnModel")
    ], HeaderGroupCellCtrl2.prototype, "columnModel", void 0);
    __decorate$$([
      Autowired("dragAndDropService")
    ], HeaderGroupCellCtrl2.prototype, "dragAndDropService", void 0);
    __decorate$$([
      Autowired("userComponentFactory")
    ], HeaderGroupCellCtrl2.prototype, "userComponentFactory", void 0);
    __decorate$$([
      Autowired("gridApi")
    ], HeaderGroupCellCtrl2.prototype, "gridApi", void 0);
    __decorate$$([
      Autowired("columnApi")
    ], HeaderGroupCellCtrl2.prototype, "columnApi", void 0);
    return HeaderGroupCellCtrl2;
  }(AbstractHeaderCellCtrl);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1b = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$10 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var instanceIdSequence$4 = 0;
  var HeaderRowCtrl = function(_super) {
    __extends$1b(HeaderRowCtrl2, _super);
    function HeaderRowCtrl2(rowIndex, pinned, type) {
      var _this = _super.call(this) || this;
      _this.instanceId = instanceIdSequence$4++;
      _this.headerCellCtrls = {};
      _this.rowIndex = rowIndex;
      _this.pinned = pinned;
      _this.type = type;
      return _this;
    }
    HeaderRowCtrl2.prototype.getInstanceId = function() {
      return this.instanceId;
    };
    HeaderRowCtrl2.prototype.setComp = function(comp) {
      this.comp = comp;
      this.onRowHeightChanged();
      this.onVirtualColumnsChanged();
      this.setWidth();
      this.addEventListeners();
      if (isBrowserSafari()) {
        this.comp.setTransform("translateZ(0)");
      }
      comp.setAriaRowIndex(this.rowIndex + 1);
    };
    HeaderRowCtrl2.prototype.addEventListeners = function() {
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_RESIZED, this.onColumnResized.bind(this));
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, this.onDisplayedColumnsChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.onDisplayedColumnsChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_VIRTUAL_COLUMNS_CHANGED, this.onVirtualColumnsChanged.bind(this));
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_HEADER_HEIGHT, this.onRowHeightChanged.bind(this));
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT, this.onRowHeightChanged.bind(this));
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT, this.onRowHeightChanged.bind(this));
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT, this.onRowHeightChanged.bind(this));
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT, this.onRowHeightChanged.bind(this));
    };
    HeaderRowCtrl2.prototype.getHtmlElementForColumnHeader = function(column) {
      if (this.type != exports2.HeaderRowType.COLUMN) {
        return;
      }
      var cellCtrl = find(this.headerCellCtrls, function(cellCtrl2) {
        return cellCtrl2.getColumnGroupChild() == column;
      });
      if (!cellCtrl) {
        return;
      }
      var res = cellCtrl.getGui();
      return res;
    };
    HeaderRowCtrl2.prototype.onDisplayedColumnsChanged = function() {
      this.onVirtualColumnsChanged();
      this.setWidth();
    };
    HeaderRowCtrl2.prototype.getType = function() {
      return this.type;
    };
    HeaderRowCtrl2.prototype.onColumnResized = function() {
      this.setWidth();
    };
    HeaderRowCtrl2.prototype.setWidth = function() {
      var width = this.getWidthForRow();
      this.comp.setWidth(width + "px");
    };
    HeaderRowCtrl2.prototype.getWidthForRow = function() {
      var printLayout = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
      if (printLayout) {
        var pinned = this.pinned != null;
        if (pinned) {
          return 0;
        }
        return this.columnModel.getContainerWidth(Constants.PINNED_RIGHT) + this.columnModel.getContainerWidth(Constants.PINNED_LEFT) + this.columnModel.getContainerWidth(null);
      }
      return this.columnModel.getContainerWidth(this.pinned);
    };
    HeaderRowCtrl2.prototype.onRowHeightChanged = function() {
      var headerRowCount = this.columnModel.getHeaderRowCount();
      var sizes = [];
      var numberOfFloating = 0;
      var groupHeight;
      var headerHeight;
      if (this.columnModel.isPivotMode()) {
        groupHeight = this.gridOptionsWrapper.getPivotGroupHeaderHeight();
        headerHeight = this.gridOptionsWrapper.getPivotHeaderHeight();
      } else {
        if (this.columnModel.hasFloatingFilters()) {
          headerRowCount++;
          numberOfFloating = 1;
        }
        groupHeight = this.gridOptionsWrapper.getGroupHeaderHeight();
        headerHeight = this.gridOptionsWrapper.getHeaderHeight();
      }
      var numberOfNonGroups = 1 + numberOfFloating;
      var numberOfGroups = headerRowCount - numberOfNonGroups;
      for (var i2 = 0; i2 < numberOfGroups; i2++) {
        sizes.push(groupHeight);
      }
      sizes.push(headerHeight);
      for (var i2 = 0; i2 < numberOfFloating; i2++) {
        sizes.push(this.gridOptionsWrapper.getFloatingFiltersHeight());
      }
      var rowHeight = 0;
      for (var i2 = 0; i2 < this.rowIndex; i2++) {
        rowHeight += sizes[i2];
      }
      this.comp.setTop(rowHeight + "px");
      this.comp.setHeight(sizes[this.rowIndex] + "px");
    };
    HeaderRowCtrl2.prototype.getPinned = function() {
      return this.pinned;
    };
    HeaderRowCtrl2.prototype.getRowIndex = function() {
      return this.rowIndex;
    };
    HeaderRowCtrl2.prototype.onVirtualColumnsChanged = function() {
      var _this = this;
      var oldCtrls = this.headerCellCtrls;
      this.headerCellCtrls = {};
      var columns = this.getColumnsInViewport();
      columns.forEach(function(child) {
        if (child.isEmptyGroup()) {
          return;
        }
        var idOfChild = child.getUniqueId();
        var headerCtrl = oldCtrls[idOfChild];
        delete oldCtrls[idOfChild];
        var forOldColumn = headerCtrl && headerCtrl.getColumnGroupChild() != child;
        if (forOldColumn) {
          _this.destroyBean(headerCtrl);
          headerCtrl = void 0;
        }
        if (headerCtrl == null) {
          switch (_this.type) {
            case exports2.HeaderRowType.FLOATING_FILTER:
              headerCtrl = _this.createBean(new HeaderFilterCellCtrl(child, _this));
              break;
            case exports2.HeaderRowType.COLUMN_GROUP:
              headerCtrl = _this.createBean(new HeaderGroupCellCtrl(child, _this));
              break;
            default:
              headerCtrl = _this.createBean(new HeaderCellCtrl(child, _this));
              break;
          }
        }
        _this.headerCellCtrls[idOfChild] = headerCtrl;
      });
      var isFocusedAndDisplayed = function(ctrl) {
        var isFocused = _this.focusService.isHeaderWrapperFocused(ctrl);
        if (!isFocused) {
          return false;
        }
        var isDisplayed = _this.columnModel.isDisplayed(ctrl.getColumnGroupChild());
        return isDisplayed;
      };
      iterateObject(oldCtrls, function(id, oldCtrl) {
        var keepCtrl = isFocusedAndDisplayed(oldCtrl);
        if (keepCtrl) {
          _this.headerCellCtrls[id] = oldCtrl;
        } else {
          _this.destroyBean(oldCtrl);
        }
      });
      var ctrlsToDisplay = getAllValuesInObject(this.headerCellCtrls);
      this.comp.setHeaderCtrls(ctrlsToDisplay);
    };
    HeaderRowCtrl2.prototype.getColumnsInViewport = function() {
      var printLayout = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
      return printLayout ? this.getColumnsInViewportPrintLayout() : this.getColumnsInViewportNormalLayout();
    };
    HeaderRowCtrl2.prototype.getColumnsInViewportPrintLayout = function() {
      var _this = this;
      if (this.pinned != null) {
        return [];
      }
      var viewportColumns = [];
      var actualDepth = this.getActualDepth();
      [Constants.PINNED_LEFT, null, Constants.PINNED_RIGHT].forEach(function(pinned) {
        var items = _this.columnModel.getVirtualHeaderGroupRow(pinned, actualDepth);
        viewportColumns = viewportColumns.concat(items);
      });
      return viewportColumns;
    };
    HeaderRowCtrl2.prototype.getActualDepth = function() {
      return this.type == exports2.HeaderRowType.FLOATING_FILTER ? this.rowIndex - 1 : this.rowIndex;
    };
    HeaderRowCtrl2.prototype.getColumnsInViewportNormalLayout = function() {
      return this.columnModel.getVirtualHeaderGroupRow(this.pinned, this.getActualDepth());
    };
    HeaderRowCtrl2.prototype.focusHeader = function(column) {
      var allCtrls = getAllValuesInObject(this.headerCellCtrls);
      var ctrl = find(allCtrls, function(ctrl2) {
        return ctrl2.getColumnGroupChild() == column;
      });
      if (!ctrl) {
        return false;
      }
      ctrl.focus();
      return true;
    };
    __decorate$10([
      Autowired("columnModel")
    ], HeaderRowCtrl2.prototype, "columnModel", void 0);
    __decorate$10([
      Autowired("focusService")
    ], HeaderRowCtrl2.prototype, "focusService", void 0);
    return HeaderRowCtrl2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1c = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$11 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __spreadArrays$7 = function() {
    for (var s = 0, i2 = 0, il = arguments.length; i2 < il; i2++)
      s += arguments[i2].length;
    for (var r = Array(s), k = 0, i2 = 0; i2 < il; i2++)
      for (var a = arguments[i2], j = 0, jl = a.length; j < jl; j++, k++)
        r[k] = a[j];
    return r;
  };
  var HeaderRowContainerCtrl = function(_super) {
    __extends$1c(HeaderRowContainerCtrl2, _super);
    function HeaderRowContainerCtrl2(pinned) {
      var _this = _super.call(this) || this;
      _this.groupsRowCtrls = [];
      _this.pinned = pinned;
      return _this;
    }
    HeaderRowContainerCtrl2.prototype.setComp = function(comp, eGui) {
      this.comp = comp;
      this.setupCenterWidth();
      this.setupPinnedWidth();
      this.setupDragAndDrop(eGui);
      this.addManagedListener(this.eventService, Events.EVENT_GRID_COLUMNS_CHANGED, this.onGridColumnsChanged.bind(this));
      this.ctrlsService.registerHeaderContainer(this, this.pinned);
      if (this.columnModel.isReady()) {
        this.refresh();
      }
    };
    HeaderRowContainerCtrl2.prototype.setupDragAndDrop = function(dropContainer) {
      var bodyDropTarget = new BodyDropTarget(this.pinned, dropContainer);
      this.createManagedBean(bodyDropTarget);
    };
    HeaderRowContainerCtrl2.prototype.refresh = function(keepColumns) {
      var _this = this;
      if (keepColumns === void 0) {
        keepColumns = false;
      }
      var sequence = new NumberSequence();
      var focusedHeaderPosition = this.focusService.getFocusHeaderToUseAfterRefresh();
      var refreshColumnGroups = function() {
        var groupRowCount = _this.columnModel.getHeaderRowCount() - 1;
        _this.groupsRowCtrls = _this.destroyBeans(_this.groupsRowCtrls);
        for (var i2 = 0; i2 < groupRowCount; i2++) {
          var ctrl = _this.createBean(new HeaderRowCtrl(sequence.next(), _this.pinned, exports2.HeaderRowType.COLUMN_GROUP));
          _this.groupsRowCtrls.push(ctrl);
        }
      };
      var refreshColumns = function() {
        var rowIndex = sequence.next();
        var needNewInstance = _this.columnsRowCtrl == null || !keepColumns || _this.columnsRowCtrl.getRowIndex() !== rowIndex;
        if (needNewInstance) {
          _this.destroyBean(_this.columnsRowCtrl);
          _this.columnsRowCtrl = _this.createBean(new HeaderRowCtrl(rowIndex, _this.pinned, exports2.HeaderRowType.COLUMN));
        }
      };
      var refreshFilters = function() {
        var includeFloatingFilter = !_this.columnModel.isPivotMode() && _this.columnModel.hasFloatingFilters();
        var destroyPreviousComp = function() {
          _this.filtersRowCtrl = _this.destroyBean(_this.filtersRowCtrl);
        };
        if (!includeFloatingFilter) {
          destroyPreviousComp();
          return;
        }
        var rowIndex = sequence.next();
        if (_this.filtersRowCtrl) {
          var rowIndexMismatch = _this.filtersRowCtrl.getRowIndex() !== rowIndex;
          if (!keepColumns || rowIndexMismatch) {
            destroyPreviousComp();
          }
        }
        if (!_this.filtersRowCtrl) {
          _this.filtersRowCtrl = _this.createBean(new HeaderRowCtrl(rowIndex, _this.pinned, exports2.HeaderRowType.FLOATING_FILTER));
        }
      };
      refreshColumnGroups();
      refreshColumns();
      refreshFilters();
      var allCtrls = this.getAllCtrls();
      this.comp.setCtrls(allCtrls);
      this.restoreFocusOnHeader(focusedHeaderPosition);
    };
    HeaderRowContainerCtrl2.prototype.restoreFocusOnHeader = function(position) {
      if (position == null || position.column.getPinned() != this.pinned) {
        return;
      }
      this.focusService.focusHeaderPosition(position);
    };
    HeaderRowContainerCtrl2.prototype.getAllCtrls = function() {
      var res = __spreadArrays$7(this.groupsRowCtrls, [this.columnsRowCtrl]);
      if (this.filtersRowCtrl) {
        res.push(this.filtersRowCtrl);
      }
      return res;
    };
    HeaderRowContainerCtrl2.prototype.onGridColumnsChanged = function() {
      this.refresh(true);
    };
    HeaderRowContainerCtrl2.prototype.setupCenterWidth = function() {
      var _this = this;
      if (this.pinned != null) {
        return;
      }
      this.createManagedBean(new CenterWidthFeature(function(width) {
        return _this.comp.setCenterWidth(width + "px");
      }));
    };
    HeaderRowContainerCtrl2.prototype.setHorizontalScroll = function(offset) {
      this.comp.setContainerTransform("translateX(" + offset + "px)");
    };
    HeaderRowContainerCtrl2.prototype.setupPinnedWidth = function() {
      var _this = this;
      if (this.pinned == null) {
        return;
      }
      var pinningLeft = this.pinned === Constants.PINNED_LEFT;
      var pinningRight = this.pinned === Constants.PINNED_RIGHT;
      var listener = function() {
        var width = pinningLeft ? _this.pinnedWidthService.getPinnedLeftWidth() : _this.pinnedWidthService.getPinnedRightWidth();
        if (width == null) {
          return;
        }
        var hidden = width == 0;
        var isRtl = _this.gridOptionsWrapper.isEnableRtl();
        var scrollbarWidth = _this.gridOptionsWrapper.getScrollbarWidth();
        var addPaddingForScrollbar = _this.scrollVisibleService.isVerticalScrollShowing() && (isRtl && pinningLeft || !isRtl && pinningRight);
        var widthWithPadding = addPaddingForScrollbar ? width + scrollbarWidth : width;
        _this.comp.setPinnedContainerWidth(widthWithPadding + "px");
        _this.comp.addOrRemoveCssClass("ag-hidden", hidden);
      };
      this.addManagedListener(this.eventService, Events.EVENT_LEFT_PINNED_WIDTH_CHANGED, listener);
      this.addManagedListener(this.eventService, Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED, listener);
      this.addManagedListener(this.eventService, Events.EVENT_SCROLL_VISIBILITY_CHANGED, listener);
      this.addManagedListener(this.eventService, Events.EVENT_SCROLLBAR_WIDTH_CHANGED, listener);
    };
    HeaderRowContainerCtrl2.prototype.getHtmlElementForColumnHeader = function(column) {
      if (this.columnsRowCtrl) {
        return this.columnsRowCtrl.getHtmlElementForColumnHeader(column);
      }
    };
    HeaderRowContainerCtrl2.prototype.getRowType = function(rowIndex) {
      var allCtrls = this.getAllCtrls();
      var ctrl = allCtrls[rowIndex];
      return ctrl ? ctrl.getType() : void 0;
    };
    HeaderRowContainerCtrl2.prototype.focusHeader = function(rowIndex, column) {
      var allCtrls = this.getAllCtrls();
      var ctrl = allCtrls[rowIndex];
      if (!ctrl) {
        return false;
      }
      return ctrl.focusHeader(column);
    };
    HeaderRowContainerCtrl2.prototype.getRowCount = function() {
      return this.getAllCtrls().length;
    };
    __decorate$11([
      Autowired("ctrlsService")
    ], HeaderRowContainerCtrl2.prototype, "ctrlsService", void 0);
    __decorate$11([
      Autowired("scrollVisibleService")
    ], HeaderRowContainerCtrl2.prototype, "scrollVisibleService", void 0);
    __decorate$11([
      Autowired("pinnedWidthService")
    ], HeaderRowContainerCtrl2.prototype, "pinnedWidthService", void 0);
    __decorate$11([
      Autowired("columnModel")
    ], HeaderRowContainerCtrl2.prototype, "columnModel", void 0);
    __decorate$11([
      Autowired("focusService")
    ], HeaderRowContainerCtrl2.prototype, "focusService", void 0);
    return HeaderRowContainerCtrl2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1d = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$12 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var HeaderRowContainerComp = function(_super) {
    __extends$1d(HeaderRowContainerComp2, _super);
    function HeaderRowContainerComp2(pinned) {
      var _this = _super.call(this) || this;
      _this.headerRowComps = {};
      _this.rowCompsList = [];
      _this.pinned = pinned;
      return _this;
    }
    HeaderRowContainerComp2.prototype.init = function() {
      var _this = this;
      this.selectAndSetTemplate();
      var compProxy = {
        addOrRemoveCssClass: function(cssClassName, on) {
          return _this.addOrRemoveCssClass(cssClassName, on);
        },
        setCtrls: function(ctrls) {
          return _this.setCtrls(ctrls);
        },
        setCenterWidth: function(width) {
          return _this.eCenterContainer.style.width = width;
        },
        setContainerTransform: function(transform) {
          return _this.eCenterContainer.style.transform = transform;
        },
        setPinnedContainerWidth: function(width) {
          var eGui = _this.getGui();
          eGui.style.width = width;
          eGui.style.maxWidth = width;
          eGui.style.minWidth = width;
        }
      };
      var ctrl = this.createManagedBean(new HeaderRowContainerCtrl(this.pinned));
      ctrl.setComp(compProxy, this.getGui());
    };
    HeaderRowContainerComp2.prototype.selectAndSetTemplate = function() {
      var pinnedLeft = this.pinned == Constants.PINNED_LEFT;
      var pinnedRight = this.pinned == Constants.PINNED_RIGHT;
      var template = pinnedLeft ? HeaderRowContainerComp2.PINNED_LEFT_TEMPLATE : pinnedRight ? HeaderRowContainerComp2.PINNED_RIGHT_TEMPLATE : HeaderRowContainerComp2.CENTER_TEMPLATE;
      this.setTemplate(template);
      this.eRowContainer = this.eCenterContainer ? this.eCenterContainer : this.getGui();
    };
    HeaderRowContainerComp2.prototype.destroyRowComps = function() {
      this.setCtrls([]);
    };
    HeaderRowContainerComp2.prototype.destroyRowComp = function(rowComp) {
      this.destroyBean(rowComp);
      this.eRowContainer.removeChild(rowComp.getGui());
    };
    HeaderRowContainerComp2.prototype.setCtrls = function(ctrls) {
      var _this = this;
      var oldRowComps = this.headerRowComps;
      this.headerRowComps = {};
      this.rowCompsList = [];
      var prevGui;
      var appendEnsuringDomOrder = function(rowComp) {
        var eGui = rowComp.getGui();
        var notAlreadyIn = eGui.parentElement != _this.eRowContainer;
        if (notAlreadyIn) {
          _this.eRowContainer.appendChild(eGui);
        }
        if (prevGui) {
          ensureDomOrder(_this.eRowContainer, eGui, prevGui);
        }
        prevGui = eGui;
      };
      ctrls.forEach(function(ctrl) {
        var ctrlId = ctrl.getInstanceId();
        var existingComp = oldRowComps[ctrlId];
        delete oldRowComps[ctrlId];
        var rowComp = existingComp ? existingComp : _this.createBean(new HeaderRowComp(ctrl));
        _this.headerRowComps[ctrlId] = rowComp;
        _this.rowCompsList.push(rowComp);
        appendEnsuringDomOrder(rowComp);
      });
      getAllValuesInObject(oldRowComps).forEach(function(c) {
        return _this.destroyRowComp(c);
      });
    };
    HeaderRowContainerComp2.PINNED_LEFT_TEMPLATE = '<div class="ag-pinned-left-header" role="presentation"/>';
    HeaderRowContainerComp2.PINNED_RIGHT_TEMPLATE = '<div class="ag-pinned-right-header" role="presentation"/>';
    HeaderRowContainerComp2.CENTER_TEMPLATE = '<div class="ag-header-viewport" role="presentation">\n            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>\n        </div>';
    __decorate$12([
      RefSelector("eCenterContainer")
    ], HeaderRowContainerComp2.prototype, "eCenterContainer", void 0);
    __decorate$12([
      PostConstruct
    ], HeaderRowContainerComp2.prototype, "init", null);
    __decorate$12([
      PreDestroy
    ], HeaderRowContainerComp2.prototype, "destroyRowComps", null);
    return HeaderRowContainerComp2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1e = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$13 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var GridHeaderComp = function(_super) {
    __extends$1e(GridHeaderComp2, _super);
    function GridHeaderComp2() {
      return _super.call(this, GridHeaderComp2.TEMPLATE) || this;
    }
    GridHeaderComp2.prototype.postConstruct = function() {
      var _this = this;
      var compProxy = {
        addOrRemoveCssClass: function(cssClassName, on) {
          return _this.addOrRemoveCssClass(cssClassName, on);
        },
        setHeightAndMinHeight: function(height) {
          _this.getGui().style.height = height;
          _this.getGui().style.minHeight = height;
        }
      };
      var ctrl = this.createManagedBean(new GridHeaderCtrl());
      ctrl.setComp(compProxy, this.getGui(), this.getFocusableElement());
      var addContainer = function(container) {
        _this.createManagedBean(container);
        _this.appendChild(container);
      };
      addContainer(new HeaderRowContainerComp(Constants.PINNED_LEFT));
      addContainer(new HeaderRowContainerComp(null));
      addContainer(new HeaderRowContainerComp(Constants.PINNED_RIGHT));
    };
    GridHeaderComp2.TEMPLATE = '<div class="ag-header" role="presentation" unselectable="on"/>';
    __decorate$13([
      PostConstruct
    ], GridHeaderComp2.prototype, "postConstruct", null);
    return GridHeaderComp2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1f = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __assign$8 = function() {
    __assign$8 = Object.assign || function(t) {
      for (var s, i2 = 1, n = arguments.length; i2 < n; i2++) {
        s = arguments[i2];
        for (var p2 in s)
          if (Object.prototype.hasOwnProperty.call(s, p2))
            t[p2] = s[p2];
      }
      return t;
    };
    return __assign$8.apply(this, arguments);
  };
  var __decorate$14 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var FilterManager = function(_super) {
    __extends$1f(FilterManager2, _super);
    function FilterManager2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.allAdvancedFilters = new Map();
      _this.activeAdvancedFilters = [];
      _this.quickFilter = null;
      _this.quickFilterParts = null;
      _this.processingFilterChange = false;
      return _this;
    }
    FilterManager_1 = FilterManager2;
    FilterManager2.prototype.init = function() {
      this.addManagedListener(this.eventService, Events.EVENT_ROW_DATA_CHANGED, this.onNewRowsLoaded.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.onNewColumnsLoaded.bind(this));
      this.quickFilter = this.parseQuickFilter(this.gridOptionsWrapper.getQuickFilterText());
      this.setQuickFilterParts();
      this.allowShowChangeAfterFilter = this.gridOptionsWrapper.isAllowShowChangeAfterFilter();
    };
    FilterManager2.prototype.setQuickFilterParts = function() {
      this.quickFilterParts = this.quickFilter ? this.quickFilter.split(" ") : null;
    };
    FilterManager2.prototype.setFilterModel = function(model) {
      var _this = this;
      var allPromises = [];
      if (model) {
        var modelKeys_1 = convertToSet(Object.keys(model));
        this.allAdvancedFilters.forEach(function(filterWrapper, colId) {
          var newModel = model[colId];
          allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise, newModel));
          modelKeys_1.delete(colId);
        });
        modelKeys_1.forEach(function(colId) {
          var column = _this.columnModel.getPrimaryColumn(colId);
          if (!column) {
            console.warn("Warning ag-grid setFilterModel - no column found for colId " + colId);
            return;
          }
          var filterWrapper = _this.getOrCreateFilterWrapper(column, "NO_UI");
          allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise, model[colId]));
        });
      } else {
        this.allAdvancedFilters.forEach(function(filterWrapper) {
          allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise, null));
        });
      }
      AgPromise.all(allPromises).then(function() {
        return _this.onFilterChanged();
      });
    };
    FilterManager2.prototype.setModelOnFilterWrapper = function(filterPromise, newModel) {
      return new AgPromise(function(resolve) {
        filterPromise.then(function(filter2) {
          if (typeof filter2.setModel !== "function") {
            console.warn("Warning ag-grid - filter missing setModel method, which is needed for setFilterModel");
            resolve();
          }
          (filter2.setModel(newModel) || AgPromise.resolve()).then(function() {
            return resolve();
          });
        });
      });
    };
    FilterManager2.prototype.getFilterModel = function() {
      var result = {};
      this.allAdvancedFilters.forEach(function(filterWrapper, key) {
        var filterPromise = filterWrapper.filterPromise;
        var filter2 = filterPromise.resolveNow(null, function(promiseFilter) {
          return promiseFilter;
        });
        if (filter2 == null) {
          return null;
        }
        if (typeof filter2.getModel !== "function") {
          console.warn("Warning ag-grid - filter API missing getModel method, which is needed for getFilterModel");
          return;
        }
        var model = filter2.getModel();
        if (exists(model)) {
          result[key] = model;
        }
      });
      return result;
    };
    FilterManager2.prototype.isAdvancedFilterPresent = function() {
      return this.activeAdvancedFilters.length > 0;
    };
    FilterManager2.prototype.updateActiveFilters = function() {
      var _this = this;
      this.activeAdvancedFilters.length = 0;
      this.allAdvancedFilters.forEach(function(filterWrapper) {
        if (filterWrapper.filterPromise.resolveNow(false, function(filter2) {
          return filter2.isFilterActive();
        })) {
          var resolvedPromise = filterWrapper.filterPromise.resolveNow(null, function(filter2) {
            return filter2;
          });
          _this.activeAdvancedFilters.push(resolvedPromise);
        }
      });
    };
    FilterManager2.prototype.updateFilterFlagInColumns = function(source, additionalEventAttributes) {
      this.allAdvancedFilters.forEach(function(filterWrapper) {
        var isFilterActive = filterWrapper.filterPromise.resolveNow(false, function(filter2) {
          return filter2.isFilterActive();
        });
        filterWrapper.column.setFilterActive(isFilterActive, source, additionalEventAttributes);
      });
    };
    FilterManager2.prototype.isAnyFilterPresent = function() {
      return this.isQuickFilterPresent() || this.isAdvancedFilterPresent() || this.gridOptionsWrapper.isExternalFilterPresent();
    };
    FilterManager2.prototype.doAdvancedFiltersPass = function(node, filterToSkip) {
      var data = node.data;
      for (var i2 = 0; i2 < this.activeAdvancedFilters.length; i2++) {
        var filter2 = this.activeAdvancedFilters[i2];
        if (filter2 == null || filter2 === filterToSkip) {
          continue;
        }
        if (typeof filter2.doesFilterPass !== "function") {
          throw new Error("Filter is missing method doesFilterPass");
        }
        if (!filter2.doesFilterPass({ node, data })) {
          return false;
        }
      }
      return true;
    };
    FilterManager2.prototype.parseQuickFilter = function(newFilter) {
      if (!exists(newFilter)) {
        return null;
      }
      if (!this.gridOptionsWrapper.isRowModelDefault()) {
        console.warn("ag-grid: quick filtering only works with the Client-Side Row Model");
        return null;
      }
      return newFilter.toUpperCase();
    };
    FilterManager2.prototype.setQuickFilter = function(newFilter) {
      var parsedFilter = this.parseQuickFilter(newFilter);
      if (this.quickFilter !== parsedFilter) {
        this.quickFilter = parsedFilter;
        this.setQuickFilterParts();
        this.onFilterChanged();
      }
    };
    FilterManager2.prototype.onFilterChanged = function(filterInstance, additionalEventAttributes) {
      this.updateActiveFilters();
      this.updateFilterFlagInColumns("filterChanged", additionalEventAttributes);
      this.allAdvancedFilters.forEach(function(filterWrapper) {
        filterWrapper.filterPromise.then(function(filter2) {
          if (filter2 !== filterInstance && filter2.onAnyFilterChanged) {
            filter2.onAnyFilterChanged();
          }
        });
      });
      var filterChangedEvent = {
        type: Events.EVENT_FILTER_CHANGED,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      if (additionalEventAttributes) {
        mergeDeep(filterChangedEvent, additionalEventAttributes);
      }
      this.processingFilterChange = true;
      this.eventService.dispatchEvent(filterChangedEvent);
      this.processingFilterChange = false;
    };
    FilterManager2.prototype.isSuppressFlashingCellsBecauseFiltering = function() {
      return !this.allowShowChangeAfterFilter && this.processingFilterChange;
    };
    FilterManager2.prototype.isQuickFilterPresent = function() {
      return this.quickFilter !== null;
    };
    FilterManager2.prototype.doesRowPassOtherFilters = function(filterToSkip, node) {
      return this.doesRowPassFilter({ rowNode: node, filterInstanceToSkip: filterToSkip });
    };
    FilterManager2.prototype.doesRowPassQuickFilterNoCache = function(node, filterPart) {
      var _this = this;
      var columns = this.columnModel.getAllColumnsForQuickFilter();
      return some(columns, function(column) {
        var part = _this.getQuickFilterTextForColumn(column, node);
        return exists(part) && part.indexOf(filterPart) >= 0;
      });
    };
    FilterManager2.prototype.doesRowPassQuickFilterCache = function(node, filterPart) {
      if (!node.quickFilterAggregateText) {
        this.aggregateRowForQuickFilter(node);
      }
      return node.quickFilterAggregateText.indexOf(filterPart) >= 0;
    };
    FilterManager2.prototype.doesRowPassQuickFilter = function(node) {
      var _this = this;
      var usingCache = this.gridOptionsWrapper.isCacheQuickFilter();
      return every(this.quickFilterParts, function(part) {
        return usingCache ? _this.doesRowPassQuickFilterCache(node, part) : _this.doesRowPassQuickFilterNoCache(node, part);
      });
    };
    FilterManager2.prototype.doesRowPassFilter = function(params2) {
      if (this.isQuickFilterPresent() && !this.doesRowPassQuickFilter(params2.rowNode)) {
        return false;
      }
      if (this.gridOptionsWrapper.isExternalFilterPresent() && !this.gridOptionsWrapper.doesExternalFilterPass(params2.rowNode)) {
        return false;
      }
      if (this.isAdvancedFilterPresent() && !this.doAdvancedFiltersPass(params2.rowNode, params2.filterInstanceToSkip)) {
        return false;
      }
      return true;
    };
    FilterManager2.prototype.getQuickFilterTextForColumn = function(column, node) {
      var value = this.valueService.getValue(column, node, true);
      var colDef = column.getColDef();
      if (colDef.getQuickFilterText) {
        var params2 = {
          value,
          node,
          data: node.data,
          column,
          colDef,
          context: this.gridOptionsWrapper.getContext()
        };
        value = colDef.getQuickFilterText(params2);
      }
      return exists(value) ? value.toString().toUpperCase() : null;
    };
    FilterManager2.prototype.aggregateRowForQuickFilter = function(node) {
      var _this = this;
      var stringParts = [];
      var columns = this.columnModel.getAllColumnsForQuickFilter();
      forEach(columns, function(column) {
        var part = _this.getQuickFilterTextForColumn(column, node);
        if (exists(part)) {
          stringParts.push(part);
        }
      });
      node.quickFilterAggregateText = stringParts.join(FilterManager_1.QUICK_FILTER_SEPARATOR);
    };
    FilterManager2.prototype.onNewRowsLoaded = function(source) {
      this.allAdvancedFilters.forEach(function(filterWrapper) {
        filterWrapper.filterPromise.then(function(filter2) {
          if (filter2.onNewRowsLoaded) {
            filter2.onNewRowsLoaded();
          }
        });
      });
      this.updateFilterFlagInColumns(source);
      this.updateActiveFilters();
    };
    FilterManager2.prototype.createValueGetter = function(column) {
      var _this = this;
      return function(node) {
        return _this.valueService.getValue(column, node, true);
      };
    };
    FilterManager2.prototype.getFilterComponent = function(column, source, createIfDoesNotExist) {
      if (createIfDoesNotExist === void 0) {
        createIfDoesNotExist = true;
      }
      if (createIfDoesNotExist) {
        return this.getOrCreateFilterWrapper(column, source).filterPromise;
      }
      var filterWrapper = this.cachedFilter(column);
      return filterWrapper ? filterWrapper.filterPromise : null;
    };
    FilterManager2.prototype.isFilterActive = function(column) {
      var filterWrapper = this.cachedFilter(column);
      return !!filterWrapper && filterWrapper.filterPromise.resolveNow(false, function(filter2) {
        return filter2.isFilterActive();
      });
    };
    FilterManager2.prototype.getOrCreateFilterWrapper = function(column, source) {
      var filterWrapper = this.cachedFilter(column);
      if (!filterWrapper) {
        filterWrapper = this.createFilterWrapper(column, source);
        this.allAdvancedFilters.set(column.getColId(), filterWrapper);
      } else if (source !== "NO_UI") {
        this.putIntoGui(filterWrapper, source);
      }
      return filterWrapper;
    };
    FilterManager2.prototype.cachedFilter = function(column) {
      return this.allAdvancedFilters.get(column.getColId());
    };
    FilterManager2.prototype.createFilterInstance = function(column, $scope) {
      var _this = this;
      var defaultFilter = ModuleRegistry.isRegistered(exports2.ModuleNames.SetFilterModule) ? "agSetColumnFilter" : "agTextColumnFilter";
      var colDef = column.getColDef();
      var filterInstance;
      var params2 = __assign$8(__assign$8({}, this.createFilterParams(column, colDef, $scope)), { filterModifiedCallback: function() {
        var event = {
          type: Events.EVENT_FILTER_MODIFIED,
          api: _this.gridApi,
          columnApi: _this.columnApi,
          column,
          filterInstance
        };
        _this.eventService.dispatchEvent(event);
      }, filterChangedCallback: function(additionalEventAttributes) {
        return _this.onFilterChanged(filterInstance, additionalEventAttributes);
      }, doesRowPassOtherFilter: function(node) {
        return _this.doesRowPassOtherFilters(filterInstance, node);
      } });
      var res = this.userComponentFactory.newFilterComponent(colDef, params2, defaultFilter);
      if (res) {
        res.then(function(r) {
          return filterInstance = r;
        });
      }
      return res;
    };
    FilterManager2.prototype.createFilterParams = function(column, colDef, $scope) {
      if ($scope === void 0) {
        $scope = null;
      }
      var params2 = {
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        column,
        colDef: cloneObject(colDef),
        rowModel: this.rowModel,
        filterChangedCallback: function() {
        },
        filterModifiedCallback: function() {
        },
        valueGetter: this.createValueGetter(column),
        context: this.gridOptionsWrapper.getContext(),
        doesRowPassOtherFilter: function() {
          return true;
        }
      };
      if ($scope) {
        params2.$scope = $scope;
      }
      return params2;
    };
    FilterManager2.prototype.createFilterWrapper = function(column, source) {
      var filterWrapper = {
        column,
        filterPromise: null,
        scope: null,
        compiledElement: null,
        guiPromise: AgPromise.resolve(null)
      };
      filterWrapper.scope = this.gridOptionsWrapper.isAngularCompileFilters() ? this.$scope.$new() : null;
      filterWrapper.filterPromise = this.createFilterInstance(column, filterWrapper.scope);
      if (filterWrapper.filterPromise) {
        this.putIntoGui(filterWrapper, source);
      }
      return filterWrapper;
    };
    FilterManager2.prototype.putIntoGui = function(filterWrapper, source) {
      var _this = this;
      var eFilterGui = document.createElement("div");
      eFilterGui.className = "ag-filter";
      filterWrapper.guiPromise = new AgPromise(function(resolve) {
        filterWrapper.filterPromise.then(function(filter2) {
          var guiFromFilter = filter2.getGui();
          if (!exists(guiFromFilter)) {
            console.warn("getGui method from filter returned " + guiFromFilter + ", it should be a DOM element or an HTML template string.");
          }
          if (typeof guiFromFilter === "string") {
            guiFromFilter = loadTemplate(guiFromFilter);
          }
          eFilterGui.appendChild(guiFromFilter);
          if (filterWrapper.scope) {
            var compiledElement = _this.$compile(eFilterGui)(filterWrapper.scope);
            filterWrapper.compiledElement = compiledElement;
            window.setTimeout(function() {
              return filterWrapper.scope.$apply();
            }, 0);
          }
          resolve(eFilterGui);
          _this.eventService.dispatchEvent({
            type: Events.EVENT_FILTER_OPENED,
            column: filterWrapper.column,
            source,
            eGui: eFilterGui,
            api: _this.gridApi,
            columnApi: _this.columnApi
          });
        });
      });
    };
    FilterManager2.prototype.onNewColumnsLoaded = function() {
      var _this = this;
      var atLeastOneFilterGone = false;
      this.allAdvancedFilters.forEach(function(filterWrapper) {
        var oldColumn = !_this.columnModel.getPrimaryColumn(filterWrapper.column);
        if (oldColumn) {
          atLeastOneFilterGone = true;
          _this.disposeFilterWrapper(filterWrapper, "filterDestroyed");
        }
      });
      if (atLeastOneFilterGone) {
        this.onFilterChanged();
      }
    };
    FilterManager2.prototype.destroyFilter = function(column, source) {
      if (source === void 0) {
        source = "api";
      }
      var filterWrapper = this.allAdvancedFilters.get(column.getColId());
      if (filterWrapper) {
        this.disposeFilterWrapper(filterWrapper, source);
        this.onFilterChanged();
      }
    };
    FilterManager2.prototype.disposeFilterWrapper = function(filterWrapper, source) {
      var _this = this;
      filterWrapper.filterPromise.then(function(filter2) {
        (filter2.setModel(null) || AgPromise.resolve()).then(function() {
          _this.getContext().destroyBean(filter2);
          filterWrapper.column.setFilterActive(false, source);
          if (filterWrapper.scope) {
            if (filterWrapper.compiledElement) {
              filterWrapper.compiledElement.remove();
            }
            filterWrapper.scope.$destroy();
          }
          _this.allAdvancedFilters.delete(filterWrapper.column.getColId());
        });
      });
    };
    FilterManager2.prototype.destroy = function() {
      var _this = this;
      _super.prototype.destroy.call(this);
      this.allAdvancedFilters.forEach(function(filterWrapper) {
        return _this.disposeFilterWrapper(filterWrapper, "filterDestroyed");
      });
    };
    var FilterManager_1;
    FilterManager2.QUICK_FILTER_SEPARATOR = "\n";
    __decorate$14([
      Autowired("$compile")
    ], FilterManager2.prototype, "$compile", void 0);
    __decorate$14([
      Autowired("$scope")
    ], FilterManager2.prototype, "$scope", void 0);
    __decorate$14([
      Autowired("valueService")
    ], FilterManager2.prototype, "valueService", void 0);
    __decorate$14([
      Autowired("columnModel")
    ], FilterManager2.prototype, "columnModel", void 0);
    __decorate$14([
      Autowired("rowModel")
    ], FilterManager2.prototype, "rowModel", void 0);
    __decorate$14([
      Autowired("columnApi")
    ], FilterManager2.prototype, "columnApi", void 0);
    __decorate$14([
      Autowired("gridApi")
    ], FilterManager2.prototype, "gridApi", void 0);
    __decorate$14([
      Autowired("userComponentFactory")
    ], FilterManager2.prototype, "userComponentFactory", void 0);
    __decorate$14([
      PostConstruct
    ], FilterManager2.prototype, "init", null);
    __decorate$14([
      PreDestroy
    ], FilterManager2.prototype, "destroy", null);
    FilterManager2 = FilterManager_1 = __decorate$14([
      Bean("filterManager")
    ], FilterManager2);
    return FilterManager2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1g = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$15 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ValueService = function(_super) {
    __extends$1g(ValueService2, _super);
    function ValueService2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.initialised = false;
      return _this;
    }
    ValueService2.prototype.init = function() {
      this.cellExpressions = this.gridOptionsWrapper.isEnableCellExpressions();
      this.initialised = true;
    };
    ValueService2.prototype.getValue = function(column, rowNode, forFilter, ignoreAggData) {
      if (forFilter === void 0) {
        forFilter = false;
      }
      if (ignoreAggData === void 0) {
        ignoreAggData = false;
      }
      if (!this.initialised) {
        this.init();
      }
      if (!rowNode) {
        return;
      }
      var colDef = column.getColDef();
      var field = colDef.field;
      var colId = column.getId();
      var data = rowNode.data;
      var result;
      var groupDataExists = rowNode.groupData && rowNode.groupData[colId] !== void 0;
      var aggDataExists = !ignoreAggData && rowNode.aggData && rowNode.aggData[colId] !== void 0;
      if (forFilter && colDef.filterValueGetter) {
        result = this.executeFilterValueGetter(colDef.filterValueGetter, data, column, rowNode);
      } else if (this.gridOptionsWrapper.isTreeData() && aggDataExists) {
        result = rowNode.aggData[colId];
      } else if (this.gridOptionsWrapper.isTreeData() && colDef.valueGetter) {
        result = this.executeValueGetter(colDef.valueGetter, data, column, rowNode);
      } else if (this.gridOptionsWrapper.isTreeData() && (field && data)) {
        result = getValueUsingField(data, field, column.isFieldContainsDots());
      } else if (groupDataExists) {
        result = rowNode.groupData[colId];
      } else if (aggDataExists) {
        result = rowNode.aggData[colId];
      } else if (colDef.valueGetter) {
        result = this.executeValueGetter(colDef.valueGetter, data, column, rowNode);
      } else if (field && data) {
        result = getValueUsingField(data, field, column.isFieldContainsDots());
      }
      if (this.cellExpressions && typeof result === "string" && result.indexOf("=") === 0) {
        var cellValueGetter = result.substring(1);
        result = this.executeValueGetter(cellValueGetter, data, column, rowNode);
      }
      if (result == null) {
        var openedGroup = this.getOpenedGroup(rowNode, column);
        if (openedGroup != null) {
          return openedGroup;
        }
      }
      return result;
    };
    ValueService2.prototype.getOpenedGroup = function(rowNode, column) {
      if (!this.gridOptionsWrapper.isShowOpenedGroup()) {
        return;
      }
      var colDef = column.getColDef();
      if (!colDef.showRowGroup) {
        return;
      }
      var showRowGroup = column.getColDef().showRowGroup;
      var pointer = rowNode.parent;
      while (pointer != null) {
        if (pointer.rowGroupColumn && (showRowGroup === true || showRowGroup === pointer.rowGroupColumn.getId())) {
          return pointer.key;
        }
        pointer = pointer.parent;
      }
      return void 0;
    };
    ValueService2.prototype.setValue = function(rowNode, colKey, newValue, eventSource) {
      var column = this.columnModel.getPrimaryColumn(colKey);
      if (!rowNode || !column) {
        return;
      }
      if (missing(rowNode.data)) {
        rowNode.data = {};
      }
      var _a = column.getColDef(), field = _a.field, newValueHandler = _a.newValueHandler, valueSetter = _a.valueSetter;
      if (missing(field) && missing(newValueHandler) && missing(valueSetter)) {
        console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work");
        return;
      }
      var params2 = {
        node: rowNode,
        data: rowNode.data,
        oldValue: this.getValue(column, rowNode),
        newValue,
        colDef: column.getColDef(),
        column,
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        context: this.gridOptionsWrapper.getContext()
      };
      params2.newValue = newValue;
      var valueWasDifferent;
      if (newValueHandler && exists(newValueHandler)) {
        valueWasDifferent = newValueHandler(params2);
      } else if (exists(valueSetter)) {
        valueWasDifferent = this.expressionService.evaluate(valueSetter, params2);
      } else {
        valueWasDifferent = this.setValueUsingField(rowNode.data, field, newValue, column.isFieldContainsDots());
      }
      if (valueWasDifferent === void 0) {
        valueWasDifferent = true;
      }
      if (!valueWasDifferent) {
        return;
      }
      rowNode.resetQuickFilterAggregateText();
      this.valueCache.onDataChanged();
      params2.newValue = this.getValue(column, rowNode);
      var onCellValueChanged = column.getColDef().onCellValueChanged;
      if (typeof onCellValueChanged === "function") {
        setTimeout(function() {
          return onCellValueChanged(params2);
        }, 0);
      }
      var event = {
        type: Events.EVENT_CELL_VALUE_CHANGED,
        event: null,
        rowIndex: rowNode.rowIndex,
        rowPinned: rowNode.rowPinned,
        column: params2.column,
        api: params2.api,
        columnApi: params2.columnApi,
        colDef: params2.colDef,
        context: params2.context,
        data: rowNode.data,
        node: rowNode,
        oldValue: params2.oldValue,
        newValue: params2.newValue,
        value: params2.newValue,
        source: eventSource
      };
      this.eventService.dispatchEvent(event);
    };
    ValueService2.prototype.setValueUsingField = function(data, field, newValue, isFieldContainsDots) {
      if (!field) {
        return false;
      }
      var valuesAreSame = false;
      if (!isFieldContainsDots) {
        data[field] = newValue;
      } else {
        var fieldPieces = field.split(".");
        var currentObject = data;
        while (fieldPieces.length > 0 && currentObject) {
          var fieldPiece = fieldPieces.shift();
          if (fieldPieces.length === 0) {
            currentObject[fieldPiece] = newValue;
          } else {
            currentObject = currentObject[fieldPiece];
          }
        }
      }
      return !valuesAreSame;
    };
    ValueService2.prototype.executeFilterValueGetter = function(valueGetter, data, column, rowNode) {
      var params2 = {
        data,
        node: rowNode,
        column,
        colDef: column.getColDef(),
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        context: this.gridOptionsWrapper.getContext(),
        getValue: this.getValueCallback.bind(this, rowNode)
      };
      return this.expressionService.evaluate(valueGetter, params2);
    };
    ValueService2.prototype.executeValueGetter = function(valueGetter, data, column, rowNode) {
      var colId = column.getId();
      var valueFromCache = this.valueCache.getValue(rowNode, colId);
      if (valueFromCache !== void 0) {
        return valueFromCache;
      }
      var params2 = {
        data,
        node: rowNode,
        column,
        colDef: column.getColDef(),
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        context: this.gridOptionsWrapper.getContext(),
        getValue: this.getValueCallback.bind(this, rowNode)
      };
      var result = this.expressionService.evaluate(valueGetter, params2);
      this.valueCache.setValue(rowNode, colId, result);
      return result;
    };
    ValueService2.prototype.getValueCallback = function(node, field) {
      var otherColumn = this.columnModel.getPrimaryColumn(field);
      if (otherColumn) {
        return this.getValue(otherColumn, node);
      }
      return null;
    };
    ValueService2.prototype.getKeyForNode = function(col, rowNode) {
      var value = this.getValue(col, rowNode);
      var keyCreator = col.getColDef().keyCreator;
      var result = value;
      if (keyCreator) {
        var keyParams = {
          value,
          colDef: col.getColDef(),
          column: col,
          node: rowNode,
          data: rowNode.data,
          api: this.gridOptionsWrapper.getApi(),
          columnApi: this.gridOptionsWrapper.getColumnApi(),
          context: this.gridOptionsWrapper.getContext()
        };
        result = keyCreator(keyParams);
      }
      if (typeof result === "string" || result == null) {
        return result;
      }
      result = String(result);
      if (result === "[object Object]") {
        doOnce(function() {
          console.warn("AG Grid: a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key");
        }, "getKeyForNode - warn about [object,object]");
      }
      return result;
    };
    __decorate$15([
      Autowired("expressionService")
    ], ValueService2.prototype, "expressionService", void 0);
    __decorate$15([
      Autowired("columnModel")
    ], ValueService2.prototype, "columnModel", void 0);
    __decorate$15([
      Autowired("valueCache")
    ], ValueService2.prototype, "valueCache", void 0);
    __decorate$15([
      PostConstruct
    ], ValueService2.prototype, "init", null);
    ValueService2 = __decorate$15([
      Bean("valueService")
    ], ValueService2);
    return ValueService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1h = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$16 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  (function(LayoutCssClasses) {
    LayoutCssClasses["AUTO_HEIGHT"] = "ag-layout-auto-height";
    LayoutCssClasses["NORMAL"] = "ag-layout-normal";
    LayoutCssClasses["PRINT"] = "ag-layout-print";
  })(exports2.LayoutCssClasses || (exports2.LayoutCssClasses = {}));
  var LayoutFeature = function(_super) {
    __extends$1h(LayoutFeature2, _super);
    function LayoutFeature2(view) {
      var _this = _super.call(this) || this;
      _this.view = view;
      return _this;
    }
    LayoutFeature2.prototype.postConstruct = function() {
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, this.updateLayoutClasses.bind(this));
      this.updateLayoutClasses();
    };
    LayoutFeature2.prototype.updateLayoutClasses = function() {
      var domLayout = this.gridOptionsWrapper.getDomLayout();
      var params2 = {
        autoHeight: domLayout === Constants.DOM_LAYOUT_AUTO_HEIGHT,
        normal: domLayout === Constants.DOM_LAYOUT_NORMAL,
        print: domLayout === Constants.DOM_LAYOUT_PRINT
      };
      var cssClass = params2.autoHeight ? exports2.LayoutCssClasses.AUTO_HEIGHT : params2.print ? exports2.LayoutCssClasses.PRINT : exports2.LayoutCssClasses.NORMAL;
      this.view.updateLayoutClasses(cssClass, params2);
    };
    __decorate$16([
      Autowired("gridOptionsWrapper")
    ], LayoutFeature2.prototype, "gridOptionsWrapper", void 0);
    __decorate$16([
      PostConstruct
    ], LayoutFeature2.prototype, "postConstruct", null);
    return LayoutFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1i = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$17 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var GridBodyScrollFeature = function(_super) {
    __extends$1i(GridBodyScrollFeature2, _super);
    function GridBodyScrollFeature2(eBodyViewport) {
      var _this = _super.call(this) || this;
      _this.scrollLeft = -1;
      _this.nextScrollTop = -1;
      _this.scrollTop = -1;
      _this.eBodyViewport = eBodyViewport;
      _this.resetLastHorizontalScrollElementDebounced = debounce(_this.resetLastHorizontalScrollElement.bind(_this), 500);
      return _this;
    }
    GridBodyScrollFeature2.prototype.postConstruct = function() {
      var _this = this;
      this.enableRtl = this.gridOptionsWrapper.isEnableRtl();
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, this.onDisplayedColumnsWidthChanged.bind(this));
      this.ctrlsService.whenReady(function(p2) {
        _this.centerRowContainerCon = p2.centerRowContainerCtrl;
        _this.onDisplayedColumnsWidthChanged();
        _this.addScrollListener();
      });
    };
    GridBodyScrollFeature2.prototype.addScrollListener = function() {
      var fakeHScroll = this.ctrlsService.getFakeHScrollCtrl();
      this.addManagedListener(this.centerRowContainerCon.getViewportElement(), "scroll", this.onCenterViewportScroll.bind(this));
      this.addManagedListener(fakeHScroll.getViewport(), "scroll", this.onFakeHorizontalScroll.bind(this));
      var onVerticalScroll = this.gridOptionsWrapper.isDebounceVerticalScrollbar() ? debounce(this.onVerticalScroll.bind(this), 100) : this.onVerticalScroll.bind(this);
      this.addManagedListener(this.eBodyViewport, "scroll", onVerticalScroll);
    };
    GridBodyScrollFeature2.prototype.onDisplayedColumnsWidthChanged = function() {
      if (this.enableRtl) {
        this.horizontallyScrollHeaderCenterAndFloatingCenter();
      }
    };
    GridBodyScrollFeature2.prototype.horizontallyScrollHeaderCenterAndFloatingCenter = function(scrollLeft) {
      if (scrollLeft === void 0) {
        scrollLeft = this.centerRowContainerCon.getCenterViewportScrollLeft();
      }
      var offset = this.enableRtl ? scrollLeft : -scrollLeft;
      var topCenterContainer = this.ctrlsService.getTopCenterRowContainerCtrl();
      var bottomCenterContainer = this.ctrlsService.getBottomCenterRowContainerCtrl();
      var fakeHScroll = this.ctrlsService.getFakeHScrollCtrl();
      var centerHeaderContainer = this.ctrlsService.getHeaderRowContainerCtrl();
      centerHeaderContainer.setHorizontalScroll(offset);
      bottomCenterContainer.setContainerTranslateX(offset);
      topCenterContainer.setContainerTranslateX(offset);
      var partner = this.lastHorizontalScrollElement === this.centerRowContainerCon.getViewportElement() ? fakeHScroll.getViewport() : this.centerRowContainerCon.getViewportElement();
      setScrollLeft(partner, Math.abs(scrollLeft), this.enableRtl);
    };
    GridBodyScrollFeature2.prototype.isControllingScroll = function(eDiv) {
      if (!this.lastHorizontalScrollElement) {
        this.lastHorizontalScrollElement = eDiv;
        return true;
      }
      return eDiv === this.lastHorizontalScrollElement;
    };
    GridBodyScrollFeature2.prototype.onFakeHorizontalScroll = function() {
      var fakeHScrollViewport = this.ctrlsService.getFakeHScrollCtrl().getViewport();
      if (!this.isControllingScroll(fakeHScrollViewport)) {
        return;
      }
      this.onBodyHorizontalScroll(fakeHScrollViewport);
    };
    GridBodyScrollFeature2.prototype.onCenterViewportScroll = function() {
      var centerContainerViewport = this.centerRowContainerCon.getViewportElement();
      if (!this.isControllingScroll(centerContainerViewport)) {
        return;
      }
      this.onBodyHorizontalScroll(centerContainerViewport);
    };
    GridBodyScrollFeature2.prototype.onBodyHorizontalScroll = function(eSource) {
      var centerContainerViewport = this.centerRowContainerCon.getViewportElement();
      var scrollLeft = centerContainerViewport.scrollLeft;
      if (this.shouldBlockScrollUpdate("horizontal", scrollLeft, true)) {
        return;
      }
      this.doHorizontalScroll(Math.round(getScrollLeft(eSource, this.enableRtl)));
      this.resetLastHorizontalScrollElementDebounced();
    };
    GridBodyScrollFeature2.prototype.onVerticalScroll = function() {
      var scrollTop = this.eBodyViewport.scrollTop;
      if (this.shouldBlockScrollUpdate("vertical", scrollTop, true)) {
        return;
      }
      this.animationFrameService.setScrollTop(scrollTop);
      this.nextScrollTop = scrollTop;
      if (this.gridOptionsWrapper.isSuppressAnimationFrame()) {
        this.scrollTop = this.nextScrollTop;
        this.redrawRowsAfterScroll();
      } else {
        this.animationFrameService.schedule();
      }
    };
    GridBodyScrollFeature2.prototype.resetLastHorizontalScrollElement = function() {
      this.lastHorizontalScrollElement = null;
    };
    GridBodyScrollFeature2.prototype.doHorizontalScroll = function(scrollLeft) {
      if (this.scrollLeft === scrollLeft) {
        return;
      }
      this.scrollLeft = scrollLeft;
      this.fireScrollEvent("horizontal");
      this.horizontallyScrollHeaderCenterAndFloatingCenter(scrollLeft);
      this.onHorizontalViewportChanged();
    };
    GridBodyScrollFeature2.prototype.fireScrollEvent = function(direction) {
      var _this = this;
      var bodyScrollEvent = {
        type: Events.EVENT_BODY_SCROLL,
        api: this.gridApi,
        columnApi: this.columnApi,
        direction,
        left: this.scrollLeft,
        top: this.scrollTop
      };
      this.eventService.dispatchEvent(bodyScrollEvent);
      window.clearTimeout(this.scrollTimer);
      this.scrollTimer = void 0;
      this.scrollTimer = window.setTimeout(function() {
        var bodyScrollEndEvent = assign2({}, bodyScrollEvent, {
          type: Events.EVENT_BODY_SCROLL_END
        });
        _this.eventService.dispatchEvent(bodyScrollEndEvent);
      }, 100);
    };
    GridBodyScrollFeature2.prototype.shouldBlockScrollUpdate = function(direction, scrollTo, touchOnly) {
      if (touchOnly === void 0) {
        touchOnly = false;
      }
      if (touchOnly && !isIOSUserAgent()) {
        return false;
      }
      if (direction === "vertical") {
        var clientHeight = getInnerHeight(this.eBodyViewport);
        var scrollHeight = this.eBodyViewport.scrollHeight;
        if (scrollTo < 0 || scrollTo + clientHeight > scrollHeight) {
          return true;
        }
      }
      if (direction === "horizontal") {
        var clientWidth = this.centerRowContainerCon.getCenterWidth();
        var scrollWidth = this.centerRowContainerCon.getViewportElement().scrollWidth;
        if (this.enableRtl && isRtlNegativeScroll()) {
          if (scrollTo > 0) {
            return true;
          }
        } else if (scrollTo < 0) {
          return true;
        }
        if (Math.abs(scrollTo) + clientWidth > scrollWidth) {
          return true;
        }
      }
      return false;
    };
    GridBodyScrollFeature2.prototype.redrawRowsAfterScroll = function() {
      this.fireScrollEvent("vertical");
    };
    GridBodyScrollFeature2.prototype.onHorizontalViewportChanged = function() {
      this.centerRowContainerCon.onHorizontalViewportChanged();
    };
    GridBodyScrollFeature2.prototype.checkScrollLeft = function() {
      if (this.scrollLeft !== this.centerRowContainerCon.getCenterViewportScrollLeft()) {
        this.onBodyHorizontalScroll(this.centerRowContainerCon.getViewportElement());
      }
    };
    GridBodyScrollFeature2.prototype.executeAnimationFrameScroll = function() {
      var frameNeeded = this.scrollTop != this.nextScrollTop;
      if (frameNeeded) {
        this.scrollTop = this.nextScrollTop;
        this.redrawRowsAfterScroll();
      }
      return frameNeeded;
    };
    GridBodyScrollFeature2.prototype.setHorizontalScrollPosition = function(hScrollPosition) {
      var minScrollLeft = 0;
      var maxScrollLeft = this.centerRowContainerCon.getViewportElement().scrollWidth - this.centerRowContainerCon.getCenterWidth();
      if (this.shouldBlockScrollUpdate("horizontal", hScrollPosition)) {
        if (this.enableRtl && isRtlNegativeScroll()) {
          hScrollPosition = hScrollPosition > 0 ? 0 : maxScrollLeft;
        } else {
          hScrollPosition = Math.min(Math.max(hScrollPosition, minScrollLeft), maxScrollLeft);
        }
      }
      setScrollLeft(this.centerRowContainerCon.getViewportElement(), Math.abs(hScrollPosition), this.enableRtl);
      this.doHorizontalScroll(hScrollPosition);
    };
    GridBodyScrollFeature2.prototype.setVerticalScrollPosition = function(vScrollPosition) {
      this.eBodyViewport.scrollTop = vScrollPosition;
    };
    GridBodyScrollFeature2.prototype.getVScrollPosition = function() {
      var result = {
        top: this.eBodyViewport.scrollTop,
        bottom: this.eBodyViewport.scrollTop + this.eBodyViewport.offsetHeight
      };
      return result;
    };
    GridBodyScrollFeature2.prototype.getHScrollPosition = function() {
      return this.centerRowContainerCon.getHScrollPosition();
    };
    GridBodyScrollFeature2.prototype.isHorizontalScrollShowing = function() {
      return this.centerRowContainerCon.isHorizontalScrollShowing();
    };
    GridBodyScrollFeature2.prototype.scrollHorizontally = function(pixels) {
      var oldScrollPosition = this.centerRowContainerCon.getViewportElement().scrollLeft;
      this.setHorizontalScrollPosition(oldScrollPosition + pixels);
      return this.centerRowContainerCon.getViewportElement().scrollLeft - oldScrollPosition;
    };
    GridBodyScrollFeature2.prototype.scrollToTop = function() {
      this.eBodyViewport.scrollTop = 0;
    };
    GridBodyScrollFeature2.prototype.ensureNodeVisible = function(comparator, position) {
      if (position === void 0) {
        position = null;
      }
      var rowCount = this.rowModel.getRowCount();
      var comparatorIsAFunction = typeof comparator === "function";
      var indexToSelect = -1;
      for (var i2 = 0; i2 < rowCount; i2++) {
        var node = this.rowModel.getRow(i2);
        if (comparatorIsAFunction) {
          if (comparator(node)) {
            indexToSelect = i2;
            break;
          }
        } else {
          if (comparator === node || comparator === node.data) {
            indexToSelect = i2;
            break;
          }
        }
      }
      if (indexToSelect >= 0) {
        this.ensureIndexVisible(indexToSelect, position);
      }
    };
    GridBodyScrollFeature2.prototype.ensureIndexVisible = function(index, position) {
      if (this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT) {
        return;
      }
      var rowCount = this.paginationProxy.getRowCount();
      if (typeof index !== "number" || index < 0 || index >= rowCount) {
        console.warn("invalid row index for ensureIndexVisible: " + index);
        return;
      }
      var isPaging = this.gridOptionsWrapper.isPagination();
      var paginationPanelEnabled = isPaging && !this.gridOptionsWrapper.isSuppressPaginationPanel();
      if (!paginationPanelEnabled) {
        this.paginationProxy.goToPageWithIndex(index);
      }
      var rowNode = this.paginationProxy.getRow(index);
      var rowGotShiftedDuringOperation;
      do {
        var startingRowTop = rowNode.rowTop;
        var startingRowHeight = rowNode.rowHeight;
        var paginationOffset = this.paginationProxy.getPixelOffset();
        var rowTopPixel = rowNode.rowTop - paginationOffset;
        var rowBottomPixel = rowTopPixel + rowNode.rowHeight;
        var scrollPosition = this.getVScrollPosition();
        var heightOffset = this.heightScaler.getDivStretchOffset();
        var vScrollTop = scrollPosition.top + heightOffset;
        var vScrollBottom = scrollPosition.bottom + heightOffset;
        var viewportHeight = vScrollBottom - vScrollTop;
        var pxTop = this.heightScaler.getScrollPositionForPixel(rowTopPixel);
        var pxBottom = this.heightScaler.getScrollPositionForPixel(rowBottomPixel - viewportHeight);
        var pxMiddle = Math.min((pxTop + pxBottom) / 2, rowTopPixel);
        var rowBelowViewport = vScrollTop > rowTopPixel;
        var rowAboveViewport = vScrollBottom < rowBottomPixel;
        var newScrollPosition = null;
        if (position === "top") {
          newScrollPosition = pxTop;
        } else if (position === "bottom") {
          newScrollPosition = pxBottom;
        } else if (position === "middle") {
          newScrollPosition = pxMiddle;
        } else if (rowBelowViewport) {
          newScrollPosition = pxTop;
        } else if (rowAboveViewport) {
          newScrollPosition = pxBottom;
        }
        if (newScrollPosition !== null) {
          this.eBodyViewport.scrollTop = newScrollPosition;
          this.rowRenderer.redrawAfterScroll();
        }
        rowGotShiftedDuringOperation = startingRowTop !== rowNode.rowTop || startingRowHeight !== rowNode.rowHeight;
      } while (rowGotShiftedDuringOperation);
      this.animationFrameService.flushAllFrames();
    };
    GridBodyScrollFeature2.prototype.ensureColumnVisible = function(key) {
      var column = this.columnModel.getGridColumn(key);
      if (!column) {
        return;
      }
      if (column.isPinned()) {
        return;
      }
      if (!this.columnModel.isColumnDisplayed(column)) {
        return;
      }
      var colLeftPixel = column.getLeft();
      var colRightPixel = colLeftPixel + column.getActualWidth();
      var viewportWidth = this.centerRowContainerCon.getCenterWidth();
      var scrollPosition = this.centerRowContainerCon.getCenterViewportScrollLeft();
      var bodyWidth = this.columnModel.getBodyContainerWidth();
      var viewportLeftPixel;
      var viewportRightPixel;
      if (this.enableRtl) {
        viewportLeftPixel = bodyWidth - scrollPosition - viewportWidth;
        viewportRightPixel = bodyWidth - scrollPosition;
      } else {
        viewportLeftPixel = scrollPosition;
        viewportRightPixel = viewportWidth + scrollPosition;
      }
      var viewportScrolledPastCol = viewportLeftPixel > colLeftPixel;
      var viewportScrolledBeforeCol = viewportRightPixel < colRightPixel;
      var colToSmallForViewport = viewportWidth < column.getActualWidth();
      var alignColToLeft = viewportScrolledPastCol || colToSmallForViewport;
      var alignColToRight = viewportScrolledBeforeCol;
      if (alignColToLeft || alignColToRight) {
        var newScrollPosition = void 0;
        if (this.enableRtl) {
          newScrollPosition = alignColToLeft ? bodyWidth - viewportWidth - colLeftPixel : bodyWidth - colRightPixel;
        } else {
          newScrollPosition = alignColToLeft ? colLeftPixel : colRightPixel - viewportWidth;
        }
        this.centerRowContainerCon.setCenterViewportScrollLeft(newScrollPosition);
      }
      this.centerRowContainerCon.onHorizontalViewportChanged();
      this.animationFrameService.flushAllFrames();
    };
    __decorate$17([
      Autowired("ctrlsService")
    ], GridBodyScrollFeature2.prototype, "ctrlsService", void 0);
    __decorate$17([
      Autowired("animationFrameService")
    ], GridBodyScrollFeature2.prototype, "animationFrameService", void 0);
    __decorate$17([
      Autowired("columnApi")
    ], GridBodyScrollFeature2.prototype, "columnApi", void 0);
    __decorate$17([
      Autowired("gridApi")
    ], GridBodyScrollFeature2.prototype, "gridApi", void 0);
    __decorate$17([
      Autowired("paginationProxy")
    ], GridBodyScrollFeature2.prototype, "paginationProxy", void 0);
    __decorate$17([
      Autowired("rowModel")
    ], GridBodyScrollFeature2.prototype, "rowModel", void 0);
    __decorate$17([
      Autowired("rowContainerHeightService")
    ], GridBodyScrollFeature2.prototype, "heightScaler", void 0);
    __decorate$17([
      Autowired("rowRenderer")
    ], GridBodyScrollFeature2.prototype, "rowRenderer", void 0);
    __decorate$17([
      Autowired("columnModel")
    ], GridBodyScrollFeature2.prototype, "columnModel", void 0);
    __decorate$17([
      PostConstruct
    ], GridBodyScrollFeature2.prototype, "postConstruct", null);
    return GridBodyScrollFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var AutoScrollService = function() {
    function AutoScrollService2(params2) {
      this.tickingInterval = null;
      this.onScrollCallback = null;
      this.scrollContainer = params2.scrollContainer;
      this.scrollHorizontally = params2.scrollAxis.indexOf("x") !== -1;
      this.scrollVertically = params2.scrollAxis.indexOf("y") !== -1;
      this.scrollByTick = params2.scrollByTick != null ? params2.scrollByTick : 20;
      if (params2.onScrollCallback) {
        this.onScrollCallback = params2.onScrollCallback;
      }
      if (this.scrollVertically) {
        this.getVerticalPosition = params2.getVerticalPosition;
        this.setVerticalPosition = params2.setVerticalPosition;
      }
      if (this.scrollHorizontally) {
        this.getHorizontalPosition = params2.getHorizontalPosition;
        this.setHorizontalPosition = params2.setHorizontalPosition;
      }
      this.shouldSkipVerticalScroll = params2.shouldSkipVerticalScroll || function() {
        return false;
      };
      this.shouldSkipHorizontalScroll = params2.shouldSkipHorizontalScroll || function() {
        return false;
      };
    }
    AutoScrollService2.prototype.check = function(mouseEvent, forceSkipVerticalScroll) {
      if (forceSkipVerticalScroll === void 0) {
        forceSkipVerticalScroll = false;
      }
      var skipVerticalScroll = forceSkipVerticalScroll || this.shouldSkipVerticalScroll();
      if (skipVerticalScroll && this.shouldSkipHorizontalScroll()) {
        return;
      }
      var rect = this.scrollContainer.getBoundingClientRect();
      var scrollTick = this.scrollByTick;
      this.tickLeft = mouseEvent.clientX < rect.left + scrollTick;
      this.tickRight = mouseEvent.clientX > rect.right - scrollTick;
      this.tickUp = mouseEvent.clientY < rect.top + scrollTick && !skipVerticalScroll;
      this.tickDown = mouseEvent.clientY > rect.bottom - scrollTick && !skipVerticalScroll;
      if (this.tickLeft || this.tickRight || this.tickUp || this.tickDown) {
        this.ensureTickingStarted();
      } else {
        this.ensureCleared();
      }
    };
    AutoScrollService2.prototype.ensureTickingStarted = function() {
      if (this.tickingInterval === null) {
        this.tickingInterval = window.setInterval(this.doTick.bind(this), 100);
        this.tickCount = 0;
      }
    };
    AutoScrollService2.prototype.doTick = function() {
      this.tickCount++;
      var tickAmount;
      tickAmount = this.tickCount > 20 ? 200 : this.tickCount > 10 ? 80 : 40;
      if (this.scrollVertically) {
        var vScrollPosition = this.getVerticalPosition();
        if (this.tickUp) {
          this.setVerticalPosition(vScrollPosition - tickAmount);
        }
        if (this.tickDown) {
          this.setVerticalPosition(vScrollPosition + tickAmount);
        }
      }
      if (this.scrollHorizontally) {
        var hScrollPosition = this.getHorizontalPosition();
        if (this.tickLeft) {
          this.setHorizontalPosition(hScrollPosition - tickAmount);
        }
        if (this.tickRight) {
          this.setHorizontalPosition(hScrollPosition + tickAmount);
        }
      }
      if (this.onScrollCallback) {
        this.onScrollCallback();
      }
    };
    AutoScrollService2.prototype.ensureCleared = function() {
      if (this.tickingInterval) {
        window.clearInterval(this.tickingInterval);
        this.tickingInterval = null;
      }
    };
    return AutoScrollService2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1j = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __assign$9 = function() {
    __assign$9 = Object.assign || function(t) {
      for (var s, i2 = 1, n = arguments.length; i2 < n; i2++) {
        s = arguments[i2];
        for (var p2 in s)
          if (Object.prototype.hasOwnProperty.call(s, p2))
            t[p2] = s[p2];
      }
      return t;
    };
    return __assign$9.apply(this, arguments);
  };
  var __decorate$18 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __spreadArrays$8 = function() {
    for (var s = 0, i2 = 0, il = arguments.length; i2 < il; i2++)
      s += arguments[i2].length;
    for (var r = Array(s), k = 0, i2 = 0; i2 < il; i2++)
      for (var a = arguments[i2], j = 0, jl = a.length; j < jl; j++, k++)
        r[k] = a[j];
    return r;
  };
  var RowDragFeature = function(_super) {
    __extends$1j(RowDragFeature2, _super);
    function RowDragFeature2(eContainer) {
      var _this = _super.call(this) || this;
      _this.isMultiRowDrag = false;
      _this.isGridSorted = false;
      _this.isGridFiltered = false;
      _this.isRowGroupActive = false;
      _this.eContainer = eContainer;
      return _this;
    }
    RowDragFeature2.prototype.postConstruct = function() {
      var _this = this;
      if (this.gridOptionsWrapper.isRowModelDefault()) {
        this.clientSideRowModel = this.rowModel;
      }
      var refreshStatus = function() {
        _this.onSortChanged();
        _this.onFilterChanged();
        _this.onRowGroupChanged();
      };
      this.addManagedListener(this.eventService, Events.EVENT_SORT_CHANGED, this.onSortChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.onRowGroupChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_MODEL_UPDATED, function() {
        refreshStatus();
      });
      refreshStatus();
      this.ctrlsService.whenReady(function() {
        var gridBodyCon = _this.ctrlsService.getGridBodyCtrl();
        _this.autoScrollService = new AutoScrollService({
          scrollContainer: gridBodyCon.getBodyViewportElement(),
          scrollAxis: "y",
          getVerticalPosition: function() {
            return gridBodyCon.getScrollFeature().getVScrollPosition().top;
          },
          setVerticalPosition: function(position) {
            return gridBodyCon.getScrollFeature().setVerticalScrollPosition(position);
          },
          onScrollCallback: function() {
            _this.onDragging(_this.lastDraggingEvent);
          }
        });
      });
    };
    RowDragFeature2.prototype.onSortChanged = function() {
      this.isGridSorted = this.sortController.isSortActive();
    };
    RowDragFeature2.prototype.onFilterChanged = function() {
      this.isGridFiltered = this.filterManager.isAnyFilterPresent();
    };
    RowDragFeature2.prototype.onRowGroupChanged = function() {
      var rowGroups = this.columnModel.getRowGroupColumns();
      this.isRowGroupActive = !missingOrEmpty(rowGroups);
    };
    RowDragFeature2.prototype.getContainer = function() {
      return this.eContainer;
    };
    RowDragFeature2.prototype.isInterestedIn = function(type) {
      return type === exports2.DragSourceType.RowDrag;
    };
    RowDragFeature2.prototype.getIconName = function() {
      var managedDrag = this.gridOptionsWrapper.isRowDragManaged();
      if (managedDrag && this.shouldPreventRowMove()) {
        return DragAndDropService.ICON_NOT_ALLOWED;
      }
      return DragAndDropService.ICON_MOVE;
    };
    RowDragFeature2.prototype.shouldPreventRowMove = function() {
      return this.isGridSorted || this.isGridFiltered || this.isRowGroupActive;
    };
    RowDragFeature2.prototype.getRowNodes = function(draggingEvent) {
      if (!this.isFromThisGrid(draggingEvent)) {
        return draggingEvent.dragItem.rowNodes || [];
      }
      var isRowDragMultiRow = this.gridOptionsWrapper.isRowDragMultiRow();
      var selectedNodes = this.selectionService.getSelectedNodes();
      var currentNode = draggingEvent.dragItem.rowNode;
      if (isRowDragMultiRow && selectedNodes.indexOf(currentNode) !== -1) {
        this.isMultiRowDrag = true;
        return __spreadArrays$8(selectedNodes);
      }
      this.isMultiRowDrag = false;
      return [currentNode];
    };
    RowDragFeature2.prototype.onDragEnter = function(draggingEvent) {
      this.dispatchGridEvent(Events.EVENT_ROW_DRAG_ENTER, draggingEvent);
      this.getRowNodes(draggingEvent).forEach(function(rowNode) {
        rowNode.setDragging(true);
      });
      this.onEnterOrDragging(draggingEvent);
    };
    RowDragFeature2.prototype.onDragging = function(draggingEvent) {
      this.onEnterOrDragging(draggingEvent);
    };
    RowDragFeature2.prototype.isFromThisGrid = function(draggingEvent) {
      var dragSourceDomDataKey = draggingEvent.dragSource.dragSourceDomDataKey;
      return dragSourceDomDataKey === this.gridOptionsWrapper.getDomDataKey();
    };
    RowDragFeature2.prototype.isDropZoneWithinThisGrid = function(draggingEvent) {
      var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
      var gridGui = gridBodyCon.getGui();
      var dropZoneTarget = draggingEvent.dropZoneTarget;
      return !gridGui.contains(dropZoneTarget);
    };
    RowDragFeature2.prototype.onEnterOrDragging = function(draggingEvent) {
      this.dispatchGridEvent(Events.EVENT_ROW_DRAG_MOVE, draggingEvent);
      this.lastDraggingEvent = draggingEvent;
      var pixel = this.mouseEventService.getNormalisedPosition(draggingEvent).y;
      var managedDrag = this.gridOptionsWrapper.isRowDragManaged();
      if (managedDrag) {
        this.doManagedDrag(draggingEvent, pixel);
      }
      this.autoScrollService.check(draggingEvent.event);
    };
    RowDragFeature2.prototype.doManagedDrag = function(draggingEvent, pixel) {
      var _this = this;
      var rowNodes;
      var isFromThisGrid = this.isFromThisGrid(draggingEvent);
      if (isFromThisGrid) {
        rowNodes = [draggingEvent.dragItem.rowNode];
        if (this.isMultiRowDrag) {
          rowNodes = __spreadArrays$8(this.selectionService.getSelectedNodes()).sort(function(a, b) {
            return _this.getRowIndexNumber(a) - _this.getRowIndexNumber(b);
          });
        }
        draggingEvent.dragItem.rowNodes = rowNodes;
      } else {
        rowNodes = draggingEvent.dragItem.rowNodes;
      }
      var managedDrag = this.gridOptionsWrapper.isRowDragManaged();
      if (managedDrag && this.shouldPreventRowMove()) {
        return;
      }
      if (this.gridOptionsWrapper.isSuppressMoveWhenRowDragging() || !isFromThisGrid) {
        if (!this.isDropZoneWithinThisGrid(draggingEvent)) {
          this.clientSideRowModel.highlightRowAtPixel(rowNodes[0], pixel);
        }
      } else {
        this.moveRows(rowNodes, pixel);
      }
    };
    RowDragFeature2.prototype.getRowIndexNumber = function(rowNode) {
      return parseInt(last(rowNode.getRowIndexString().split("-")), 10);
    };
    RowDragFeature2.prototype.moveRowAndClearHighlight = function(draggingEvent) {
      var _this = this;
      var lastHighlightedRowNode = this.clientSideRowModel.getLastHighlightedRowNode();
      var isBelow = lastHighlightedRowNode && lastHighlightedRowNode.highlighted === exports2.RowHighlightPosition.Below;
      var pixel = this.mouseEventService.getNormalisedPosition(draggingEvent).y;
      var rowNodes = draggingEvent.dragItem.rowNodes;
      var increment = isBelow ? 1 : 0;
      if (this.isFromThisGrid(draggingEvent)) {
        rowNodes.forEach(function(rowNode) {
          if (rowNode.rowTop < pixel) {
            increment -= 1;
          }
        });
        this.moveRows(rowNodes, pixel, increment);
      } else {
        var getRowNodeId_1 = this.gridOptionsWrapper.getRowNodeIdFunc();
        var addIndex = this.clientSideRowModel.getRowIndexAtPixel(pixel) + 1;
        if (this.clientSideRowModel.getHighlightPosition(pixel) === exports2.RowHighlightPosition.Above) {
          addIndex--;
        }
        this.clientSideRowModel.updateRowData({
          add: rowNodes.map(function(node) {
            return node.data;
          }).filter(function(data) {
            return !_this.clientSideRowModel.getRowNode(getRowNodeId_1 ? getRowNodeId_1(data) : data.id);
          }),
          addIndex
        });
      }
      this.clearRowHighlight();
    };
    RowDragFeature2.prototype.clearRowHighlight = function() {
      this.clientSideRowModel.highlightRowAtPixel(null);
    };
    RowDragFeature2.prototype.moveRows = function(rowNodes, pixel, increment) {
      if (increment === void 0) {
        increment = 0;
      }
      var rowWasMoved = this.clientSideRowModel.ensureRowsAtPixel(rowNodes, pixel, increment);
      if (rowWasMoved) {
        this.focusService.clearFocusedCell();
        if (this.rangeService) {
          this.rangeService.removeAllCellRanges();
        }
      }
    };
    RowDragFeature2.prototype.addRowDropZone = function(params2) {
      var _this = this;
      if (!params2.getContainer()) {
        doOnce(function() {
          return console.warn("AG Grid: addRowDropZone - A container target needs to be provided");
        }, "add-drop-zone-empty-target");
        return;
      }
      if (this.dragAndDropService.findExternalZone(params2)) {
        console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");
        return;
      }
      var processedParams = {
        getContainer: params2.getContainer
      };
      if (params2.fromGrid) {
        params2.fromGrid = void 0;
        processedParams = params2;
      } else {
        if (params2.onDragEnter) {
          processedParams.onDragEnter = function(e) {
            params2.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER, e));
          };
        }
        if (params2.onDragLeave) {
          processedParams.onDragLeave = function(e) {
            params2.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE, e));
          };
        }
        if (params2.onDragging) {
          processedParams.onDragging = function(e) {
            params2.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE, e));
          };
        }
        if (params2.onDragStop) {
          processedParams.onDragStop = function(e) {
            params2.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END, e));
          };
        }
      }
      this.dragAndDropService.addDropTarget(__assign$9({ isInterestedIn: function(type) {
        return type === exports2.DragSourceType.RowDrag;
      }, getIconName: function() {
        return DragAndDropService.ICON_MOVE;
      }, external: true }, processedParams));
    };
    RowDragFeature2.prototype.getRowDropZone = function(events2) {
      var _this = this;
      var getContainer = this.getContainer.bind(this);
      var onDragEnter = this.onDragEnter.bind(this);
      var onDragLeave = this.onDragLeave.bind(this);
      var onDragging = this.onDragging.bind(this);
      var onDragStop = this.onDragStop.bind(this);
      if (!events2) {
        return { getContainer, onDragEnter, onDragLeave, onDragging, onDragStop, fromGrid: true };
      }
      return {
        getContainer,
        onDragEnter: events2.onDragEnter ? function(e) {
          onDragEnter(e);
          events2.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER, e));
        } : onDragEnter,
        onDragLeave: events2.onDragLeave ? function(e) {
          onDragLeave(e);
          events2.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE, e));
        } : onDragLeave,
        onDragging: events2.onDragging ? function(e) {
          onDragging(e);
          events2.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE, e));
        } : onDragging,
        onDragStop: events2.onDragStop ? function(e) {
          onDragStop(e);
          events2.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END, e));
        } : onDragStop,
        fromGrid: true
      };
    };
    RowDragFeature2.prototype.draggingToRowDragEvent = function(type, draggingEvent) {
      var yNormalised = this.mouseEventService.getNormalisedPosition(draggingEvent).y;
      var mouseIsPastLastRow = yNormalised > this.paginationProxy.getCurrentPageHeight();
      var overIndex = -1;
      var overNode;
      if (!mouseIsPastLastRow) {
        overIndex = this.rowModel.getRowIndexAtPixel(yNormalised);
        overNode = this.rowModel.getRow(overIndex);
      }
      var vDirectionString;
      switch (draggingEvent.vDirection) {
        case exports2.VerticalDirection.Down:
          vDirectionString = "down";
          break;
        case exports2.VerticalDirection.Up:
          vDirectionString = "up";
          break;
        default:
          vDirectionString = null;
          break;
      }
      var event = {
        type,
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        event: draggingEvent.event,
        node: draggingEvent.dragItem.rowNode,
        nodes: draggingEvent.dragItem.rowNodes,
        overIndex,
        overNode,
        y: yNormalised,
        vDirection: vDirectionString
      };
      return event;
    };
    RowDragFeature2.prototype.dispatchGridEvent = function(type, draggingEvent) {
      var event = this.draggingToRowDragEvent(type, draggingEvent);
      this.eventService.dispatchEvent(event);
    };
    RowDragFeature2.prototype.onDragLeave = function(draggingEvent) {
      this.dispatchGridEvent(Events.EVENT_ROW_DRAG_LEAVE, draggingEvent);
      this.stopDragging(draggingEvent);
      if (this.gridOptionsWrapper.isRowDragManaged()) {
        this.clearRowHighlight();
      }
      if (this.isFromThisGrid(draggingEvent)) {
        this.isMultiRowDrag = false;
      }
    };
    RowDragFeature2.prototype.onDragStop = function(draggingEvent) {
      this.dispatchGridEvent(Events.EVENT_ROW_DRAG_END, draggingEvent);
      this.stopDragging(draggingEvent);
      if (this.gridOptionsWrapper.isRowDragManaged() && (this.gridOptionsWrapper.isSuppressMoveWhenRowDragging() || !this.isFromThisGrid(draggingEvent)) && !this.isDropZoneWithinThisGrid(draggingEvent)) {
        this.moveRowAndClearHighlight(draggingEvent);
      }
    };
    RowDragFeature2.prototype.stopDragging = function(draggingEvent) {
      this.autoScrollService.ensureCleared();
      this.getRowNodes(draggingEvent).forEach(function(rowNode) {
        rowNode.setDragging(false);
      });
    };
    __decorate$18([
      Autowired("dragAndDropService")
    ], RowDragFeature2.prototype, "dragAndDropService", void 0);
    __decorate$18([
      Autowired("rowModel")
    ], RowDragFeature2.prototype, "rowModel", void 0);
    __decorate$18([
      Autowired("paginationProxy")
    ], RowDragFeature2.prototype, "paginationProxy", void 0);
    __decorate$18([
      Autowired("columnModel")
    ], RowDragFeature2.prototype, "columnModel", void 0);
    __decorate$18([
      Autowired("focusService")
    ], RowDragFeature2.prototype, "focusService", void 0);
    __decorate$18([
      Autowired("sortController")
    ], RowDragFeature2.prototype, "sortController", void 0);
    __decorate$18([
      Autowired("filterManager")
    ], RowDragFeature2.prototype, "filterManager", void 0);
    __decorate$18([
      Autowired("selectionService")
    ], RowDragFeature2.prototype, "selectionService", void 0);
    __decorate$18([
      Autowired("mouseEventService")
    ], RowDragFeature2.prototype, "mouseEventService", void 0);
    __decorate$18([
      Autowired("ctrlsService")
    ], RowDragFeature2.prototype, "ctrlsService", void 0);
    __decorate$18([
      Optional("rangeService")
    ], RowDragFeature2.prototype, "rangeService", void 0);
    __decorate$18([
      PostConstruct
    ], RowDragFeature2.prototype, "postConstruct", null);
    return RowDragFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1k = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$19 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  (function(RowAnimationCssClasses) {
    RowAnimationCssClasses["ANIMATION_ON"] = "ag-row-animation";
    RowAnimationCssClasses["ANIMATION_OFF"] = "ag-row-no-animation";
  })(exports2.RowAnimationCssClasses || (exports2.RowAnimationCssClasses = {}));
  var CSS_CLASS_CELL_SELECTABLE = "ag-selectable";
  var CSS_CLASS_FORCE_VERTICAL_SCROLL = "ag-force-vertical-scroll";
  var CSS_CLASS_COLUMN_MOVING = "ag-column-moving";
  var GridBodyCtrl = function(_super) {
    __extends$1k(GridBodyCtrl2, _super);
    function GridBodyCtrl2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.angularApplyTriggered = false;
      return _this;
    }
    GridBodyCtrl2.prototype.getScrollFeature = function() {
      return this.bodyScrollFeature;
    };
    GridBodyCtrl2.prototype.getBodyViewportElement = function() {
      return this.eBodyViewport;
    };
    GridBodyCtrl2.prototype.setComp = function(comp, eGridBody, eBodyViewport, eTop, eBottom) {
      this.comp = comp;
      this.eGridBody = eGridBody;
      this.eBodyViewport = eBodyViewport;
      this.eTop = eTop;
      this.eBottom = eBottom;
      this.setCellTextSelection(this.gridOptionsWrapper.isEnableCellTextSelect());
      this.createManagedBean(new LayoutFeature(this.comp));
      this.bodyScrollFeature = this.createManagedBean(new GridBodyScrollFeature(this.eBodyViewport));
      this.addRowDragListener();
      this.setupRowAnimationCssClass();
      this.ctrlsService.registerGridBodyCtrl(this);
      this.addEventListeners();
      this.addFocusListeners([eTop, eBodyViewport, eBottom]);
      this.onGridColumnsChanged();
      this.addBodyViewportListener();
      this.setFloatingHeights();
      this.disableBrowserDragging();
      this.addStopEditingWhenGridLosesFocus();
      if (this.$scope) {
        this.addAngularApplyCheck();
      }
    };
    GridBodyCtrl2.prototype.getComp = function() {
      return this.comp;
    };
    GridBodyCtrl2.prototype.addEventListeners = function() {
      this.addManagedListener(this.eventService, Events.EVENT_GRID_COLUMNS_CHANGED, this.onGridColumnsChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_SCROLL_VISIBILITY_CHANGED, this.onScrollVisibilityChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_PINNED_ROW_DATA_CHANGED, this.setFloatingHeights.bind(this));
    };
    GridBodyCtrl2.prototype.addFocusListeners = function(elements) {
      var _this = this;
      elements.forEach(function(element2) {
        _this.addManagedListener(element2, "focusin", function() {
          addCssClass(element2, "ag-has-focus");
        });
        _this.addManagedListener(element2, "focusout", function(e) {
          if (!element2.contains(e.relatedTarget)) {
            removeCssClass(element2, "ag-has-focus");
          }
        });
      });
    };
    GridBodyCtrl2.prototype.setColumnMovingCss = function(moving) {
      this.comp.setColumnMovingCss(moving ? CSS_CLASS_COLUMN_MOVING : null, moving);
    };
    GridBodyCtrl2.prototype.setCellTextSelection = function(selectable) {
      if (selectable === void 0) {
        selectable = false;
      }
      var cssClass = selectable ? CSS_CLASS_CELL_SELECTABLE : null;
      this.comp.setCellSelectableCss(cssClass, selectable);
    };
    GridBodyCtrl2.prototype.onScrollVisibilityChanged = function() {
      var visible = this.scrollVisibleService.isVerticalScrollShowing();
      this.setVerticalScrollPaddingVisible(visible);
    };
    GridBodyCtrl2.prototype.onGridColumnsChanged = function() {
      var columns = this.columnModel.getAllGridColumns();
      this.comp.setColumnCount(columns ? columns.length : 0);
    };
    GridBodyCtrl2.prototype.disableBrowserDragging = function() {
      this.addManagedListener(this.eGridBody, "dragstart", function(event) {
        if (event.target instanceof HTMLImageElement) {
          event.preventDefault();
          return false;
        }
      });
    };
    GridBodyCtrl2.prototype.addStopEditingWhenGridLosesFocus = function() {
      var _this = this;
      if (!this.gridOptionsWrapper.isStopEditingWhenCellsLoseFocus()) {
        return;
      }
      var focusOutListener = function(event) {
        var elementWithFocus = event.relatedTarget;
        if (getTabIndex(elementWithFocus) === null) {
          _this.rowRenderer.stopEditing();
          return;
        }
        var clickInsideGrid = viewports.some(function(viewport) {
          return viewport.contains(elementWithFocus);
        }) && _this.mouseEventService.isElementInThisGrid(elementWithFocus);
        if (!clickInsideGrid) {
          var popupService = _this.popupService;
          clickInsideGrid = popupService.getActivePopups().some(function(popup) {
            return popup.contains(elementWithFocus);
          }) || popupService.isElementWithinCustomPopup(elementWithFocus);
        }
        if (!clickInsideGrid) {
          _this.rowRenderer.stopEditing();
        }
      };
      var viewports = [this.eBodyViewport, this.eBottom, this.eTop];
      viewports.forEach(function(viewport) {
        return _this.addManagedListener(viewport, "focusout", focusOutListener);
      });
    };
    GridBodyCtrl2.prototype.updateRowCount = function() {
      var headerCount = this.headerNavigationService.getHeaderRowCount();
      var modelType = this.paginationProxy.getType();
      var rowCount = -1;
      if (modelType === Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
        rowCount = 0;
        this.paginationProxy.forEachNode(function(node) {
          if (!node.group) {
            rowCount++;
          }
        });
      }
      var total = rowCount === -1 ? -1 : headerCount + rowCount;
      this.comp.setRowCount(total);
    };
    GridBodyCtrl2.prototype.registerBodyViewportResizeListener = function(listener) {
      this.comp.registerBodyViewportResizeListener(listener);
    };
    GridBodyCtrl2.prototype.setVerticalScrollPaddingVisible = function(visible) {
      var overflowY = visible ? "scroll" : "hidden";
      this.comp.setPinnedTopBottomOverflowY(overflowY);
    };
    GridBodyCtrl2.prototype.isVerticalScrollShowing = function() {
      var show = this.gridOptionsWrapper.isAlwaysShowVerticalScroll();
      var cssClass = show ? CSS_CLASS_FORCE_VERTICAL_SCROLL : null;
      this.comp.setAlwaysVerticalScrollClass(cssClass, show);
      return show || isVerticalScrollShowing(this.eBodyViewport);
    };
    GridBodyCtrl2.prototype.setupRowAnimationCssClass = function() {
      var _this = this;
      var listener = function() {
        var animateRows = _this.gridOptionsWrapper.isAnimateRows() && !_this.rowContainerHeightService.isStretching();
        var animateRowsCssClass = animateRows ? exports2.RowAnimationCssClasses.ANIMATION_ON : exports2.RowAnimationCssClasses.ANIMATION_OFF;
        _this.comp.setRowAnimationCssOnBodyViewport(animateRowsCssClass, animateRows);
      };
      listener();
      this.addManagedListener(this.eventService, Events.EVENT_HEIGHT_SCALE_CHANGED, listener);
    };
    GridBodyCtrl2.prototype.getGridBodyElement = function() {
      return this.eGridBody;
    };
    GridBodyCtrl2.prototype.addBodyViewportListener = function() {
      var _this = this;
      var listener = function(mouseEvent) {
        var target = getTarget(mouseEvent);
        if (target === _this.eBodyViewport || target === _this.ctrlsService.getCenterRowContainerCtrl().getViewportElement()) {
          if (_this.contextMenuFactory) {
            _this.contextMenuFactory.onContextMenu(mouseEvent, null, null, null, null, _this.eGridBody);
          }
        }
      };
      this.addManagedListener(this.eBodyViewport, "contextmenu", listener);
      this.addManagedListener(this.eBodyViewport, "wheel", this.onWheel.bind(this));
    };
    GridBodyCtrl2.prototype.onWheel = function(e) {
      if (!this.gridOptionsWrapper.isSuppressScrollWhenPopupsAreOpen()) {
        return;
      }
      if (this.popupService.hasAnchoredPopup()) {
        e.preventDefault();
      }
    };
    GridBodyCtrl2.prototype.getGui = function() {
      return this.eGridBody;
    };
    GridBodyCtrl2.prototype.scrollVertically = function(pixels) {
      var oldScrollPosition = this.eBodyViewport.scrollTop;
      this.bodyScrollFeature.setVerticalScrollPosition(oldScrollPosition + pixels);
      return this.eBodyViewport.scrollTop - oldScrollPosition;
    };
    GridBodyCtrl2.prototype.addRowDragListener = function() {
      this.rowDragFeature = this.createManagedBean(new RowDragFeature(this.eBodyViewport));
      this.dragAndDropService.addDropTarget(this.rowDragFeature);
    };
    GridBodyCtrl2.prototype.getRowDragFeature = function() {
      return this.rowDragFeature;
    };
    GridBodyCtrl2.prototype.setFloatingHeights = function() {
      var pinnedRowModel = this.pinnedRowModel;
      var floatingTopHeight = pinnedRowModel.getPinnedTopTotalHeight();
      if (floatingTopHeight) {
        floatingTopHeight += 1;
      }
      var floatingBottomHeight = pinnedRowModel.getPinnedBottomTotalHeight();
      if (floatingBottomHeight) {
        floatingBottomHeight += 1;
      }
      this.comp.setTopHeight(floatingTopHeight);
      this.comp.setBottomHeight(floatingBottomHeight);
      this.comp.setTopDisplay(floatingTopHeight ? "inherit" : "none");
      this.comp.setBottomDisplay(floatingBottomHeight ? "inherit" : "none");
    };
    GridBodyCtrl2.prototype.sizeColumnsToFit = function(nextTimeout) {
      var _this = this;
      var removeScrollWidth = this.isVerticalScrollShowing() && !isBrowserIE();
      var scrollWidthToRemove = removeScrollWidth ? this.gridOptionsWrapper.getScrollbarWidth() : 0;
      var bodyViewportWidth = getInnerWidth(this.eBodyViewport);
      var availableWidth = bodyViewportWidth - scrollWidthToRemove;
      if (availableWidth > 0) {
        this.columnModel.sizeColumnsToFit(availableWidth, "sizeColumnsToFit");
        return;
      }
      if (nextTimeout === void 0) {
        window.setTimeout(function() {
          _this.sizeColumnsToFit(100);
        }, 0);
      } else if (nextTimeout === 100) {
        window.setTimeout(function() {
          _this.sizeColumnsToFit(500);
        }, 100);
      } else if (nextTimeout === 500) {
        window.setTimeout(function() {
          _this.sizeColumnsToFit(-1);
        }, 500);
      } else {
        console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?");
      }
    };
    GridBodyCtrl2.prototype.addScrollEventListener = function(listener) {
      this.eBodyViewport.addEventListener("scroll", listener);
    };
    GridBodyCtrl2.prototype.removeScrollEventListener = function(listener) {
      this.eBodyViewport.removeEventListener("scroll", listener);
    };
    GridBodyCtrl2.prototype.requestAngularApply = function() {
      var _this = this;
      if (this.angularApplyTriggered) {
        return;
      }
      this.angularApplyTriggered = true;
      window.setTimeout(function() {
        _this.angularApplyTriggered = false;
        _this.$scope.$apply();
      }, 0);
    };
    GridBodyCtrl2.prototype.addAngularApplyCheck = function() {
      var _this = this;
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, function() {
        return _this.requestAngularApply();
      });
      this.addManagedListener(this.eventService, Events.EVENT_VIRTUAL_COLUMNS_CHANGED, function() {
        return _this.requestAngularApply();
      });
    };
    __decorate$19([
      Autowired("rowContainerHeightService")
    ], GridBodyCtrl2.prototype, "rowContainerHeightService", void 0);
    __decorate$19([
      Autowired("ctrlsService")
    ], GridBodyCtrl2.prototype, "ctrlsService", void 0);
    __decorate$19([
      Autowired("columnModel")
    ], GridBodyCtrl2.prototype, "columnModel", void 0);
    __decorate$19([
      Autowired("scrollVisibleService")
    ], GridBodyCtrl2.prototype, "scrollVisibleService", void 0);
    __decorate$19([
      Optional("contextMenuFactory")
    ], GridBodyCtrl2.prototype, "contextMenuFactory", void 0);
    __decorate$19([
      Autowired("headerNavigationService")
    ], GridBodyCtrl2.prototype, "headerNavigationService", void 0);
    __decorate$19([
      Autowired("paginationProxy")
    ], GridBodyCtrl2.prototype, "paginationProxy", void 0);
    __decorate$19([
      Autowired("dragAndDropService")
    ], GridBodyCtrl2.prototype, "dragAndDropService", void 0);
    __decorate$19([
      Autowired("pinnedRowModel")
    ], GridBodyCtrl2.prototype, "pinnedRowModel", void 0);
    __decorate$19([
      Autowired("rowRenderer")
    ], GridBodyCtrl2.prototype, "rowRenderer", void 0);
    __decorate$19([
      Autowired("popupService")
    ], GridBodyCtrl2.prototype, "popupService", void 0);
    __decorate$19([
      Autowired("mouseEventService")
    ], GridBodyCtrl2.prototype, "mouseEventService", void 0);
    __decorate$19([
      Autowired("$scope")
    ], GridBodyCtrl2.prototype, "$scope", void 0);
    return GridBodyCtrl2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1l = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1a = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var RowContainerEventsFeature = function(_super) {
    __extends$1l(RowContainerEventsFeature2, _super);
    function RowContainerEventsFeature2(element2) {
      var _this = _super.call(this) || this;
      _this.element = element2;
      return _this;
    }
    RowContainerEventsFeature2.prototype.postConstruct = function() {
      this.addMouseListeners();
      this.mockContextMenuForIPad();
      this.addKeyboardEvents();
    };
    RowContainerEventsFeature2.prototype.addKeyboardEvents = function() {
      var _this = this;
      var eventNames2 = ["keydown", "keypress"];
      eventNames2.forEach(function(eventName) {
        var listener = _this.processKeyboardEvent.bind(_this, eventName);
        _this.addManagedListener(_this.element, eventName, listener);
      });
    };
    RowContainerEventsFeature2.prototype.addMouseListeners = function() {
      var _this = this;
      var mouseDownEvent = isEventSupported("touchstart") ? "touchstart" : "mousedown";
      var eventNames2 = ["dblclick", "contextmenu", "mouseover", "mouseout", "click", mouseDownEvent];
      eventNames2.forEach(function(eventName) {
        var listener = _this.processMouseEvent.bind(_this, eventName);
        _this.addManagedListener(_this.element, eventName, listener);
      });
    };
    RowContainerEventsFeature2.prototype.processMouseEvent = function(eventName, mouseEvent) {
      if (!this.mouseEventService.isEventFromThisGrid(mouseEvent) || isStopPropagationForAgGrid(mouseEvent)) {
        return;
      }
      var rowComp = this.getRowForEvent(mouseEvent);
      var cellCtrl = this.mouseEventService.getRenderedCellForEvent(mouseEvent);
      if (eventName === "contextmenu") {
        this.handleContextMenuMouseEvent(mouseEvent, null, rowComp, cellCtrl);
      } else {
        if (cellCtrl) {
          cellCtrl.onMouseEvent(eventName, mouseEvent);
        }
        if (rowComp) {
          rowComp.onMouseEvent(eventName, mouseEvent);
        }
      }
    };
    RowContainerEventsFeature2.prototype.mockContextMenuForIPad = function() {
      var _this = this;
      if (!isIOSUserAgent()) {
        return;
      }
      var touchListener = new TouchListener(this.element);
      var longTapListener = function(event) {
        var rowComp = _this.getRowForEvent(event.touchEvent);
        var cellComp = _this.mouseEventService.getRenderedCellForEvent(event.touchEvent);
        _this.handleContextMenuMouseEvent(null, event.touchEvent, rowComp, cellComp);
      };
      this.addManagedListener(touchListener, TouchListener.EVENT_LONG_TAP, longTapListener);
      this.addDestroyFunc(function() {
        return touchListener.destroy();
      });
    };
    RowContainerEventsFeature2.prototype.getRowForEvent = function(event) {
      var sourceElement = getTarget(event);
      while (sourceElement) {
        var rowCon = this.gridOptionsWrapper.getDomData(sourceElement, RowCtrl.DOM_DATA_KEY_RENDERED_ROW);
        if (rowCon) {
          return rowCon;
        }
        sourceElement = sourceElement.parentElement;
      }
      return null;
    };
    RowContainerEventsFeature2.prototype.handleContextMenuMouseEvent = function(mouseEvent, touchEvent, rowComp, cellCtrl) {
      var rowNode = rowComp ? rowComp.getRowNode() : null;
      var column = cellCtrl ? cellCtrl.getColumn() : null;
      var value = null;
      if (column) {
        var event_1 = mouseEvent ? mouseEvent : touchEvent;
        cellCtrl.dispatchCellContextMenuEvent(event_1);
        value = this.valueService.getValue(column, rowNode);
      }
      var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
      var anchorToElement = cellCtrl ? cellCtrl.getGui() : gridBodyCon.getGridBodyElement();
      if (this.contextMenuFactory) {
        this.contextMenuFactory.onContextMenu(mouseEvent, touchEvent, rowNode, column, value, anchorToElement);
      }
    };
    RowContainerEventsFeature2.prototype.processKeyboardEvent = function(eventName, keyboardEvent) {
      var cellComp = getCtrlForEvent(this.gridOptionsWrapper, keyboardEvent, CellCtrl.DOM_DATA_KEY_CELL_CTRL);
      var rowComp = getCtrlForEvent(this.gridOptionsWrapper, keyboardEvent, RowCtrl.DOM_DATA_KEY_RENDERED_ROW);
      if (keyboardEvent.defaultPrevented) {
        return;
      }
      if (cellComp) {
        this.processCellKeyboardEvent(cellComp, eventName, keyboardEvent);
      } else if (rowComp && rowComp.isFullWidth()) {
        this.processFullWidthRowKeyboardEvent(rowComp, eventName, keyboardEvent);
      }
    };
    RowContainerEventsFeature2.prototype.processCellKeyboardEvent = function(cellCtrl, eventName, keyboardEvent) {
      var rowNode = cellCtrl.getRowNode();
      var column = cellCtrl.getColumn();
      var editing = cellCtrl.isEditing();
      var gridProcessingAllowed = !isUserSuppressingKeyboardEvent(this.gridOptionsWrapper, keyboardEvent, rowNode, column, editing);
      if (gridProcessingAllowed) {
        switch (eventName) {
          case "keydown":
            var wasScrollKey = !editing && this.navigationService.handlePageScrollingKey(keyboardEvent);
            if (!wasScrollKey) {
              cellCtrl.onKeyDown(keyboardEvent);
            }
            this.doGridOperations(keyboardEvent, cellCtrl.isEditing());
            break;
          case "keypress":
            cellCtrl.onKeyPress(keyboardEvent);
            break;
        }
      }
      if (eventName === "keydown") {
        var cellKeyDownEvent = cellCtrl.createEvent(keyboardEvent, Events.EVENT_CELL_KEY_DOWN);
        this.eventService.dispatchEvent(cellKeyDownEvent);
      }
      if (eventName === "keypress") {
        var cellKeyPressEvent = cellCtrl.createEvent(keyboardEvent, Events.EVENT_CELL_KEY_PRESS);
        this.eventService.dispatchEvent(cellKeyPressEvent);
      }
    };
    RowContainerEventsFeature2.prototype.processFullWidthRowKeyboardEvent = function(rowComp, eventName, keyboardEvent) {
      var rowNode = rowComp.getRowNode();
      var focusedCell = this.focusService.getFocusedCell();
      var column = focusedCell && focusedCell.column;
      var gridProcessingAllowed = !isUserSuppressingKeyboardEvent(this.gridOptionsWrapper, keyboardEvent, rowNode, column, false);
      if (gridProcessingAllowed) {
        var key = keyboardEvent.keyCode;
        if (eventName === "keydown") {
          switch (key) {
            case KeyCode.UP:
            case KeyCode.DOWN:
              rowComp.onKeyboardNavigate(keyboardEvent);
              break;
            case KeyCode.TAB:
              rowComp.onTabKeyDown(keyboardEvent);
          }
        }
      }
      if (eventName === "keydown") {
        var cellKeyDownEvent = rowComp.createRowEvent(Events.EVENT_CELL_KEY_DOWN, keyboardEvent);
        this.eventService.dispatchEvent(cellKeyDownEvent);
      }
      if (eventName === "keypress") {
        var cellKeyPressEvent = rowComp.createRowEvent(Events.EVENT_CELL_KEY_PRESS, keyboardEvent);
        this.eventService.dispatchEvent(cellKeyPressEvent);
      }
    };
    RowContainerEventsFeature2.prototype.doGridOperations = function(keyboardEvent, editing) {
      if (!keyboardEvent.ctrlKey && !keyboardEvent.metaKey) {
        return;
      }
      if (editing) {
        return;
      }
      if (!this.mouseEventService.isEventFromThisGrid(keyboardEvent)) {
        return;
      }
      switch (keyboardEvent.which) {
        case KeyCode.A:
          return this.onCtrlAndA(keyboardEvent);
        case KeyCode.C:
          return this.onCtrlAndC(keyboardEvent);
        case KeyCode.V:
          return this.onCtrlAndV();
        case KeyCode.D:
          return this.onCtrlAndD(keyboardEvent);
        case KeyCode.Z:
          return keyboardEvent.shiftKey ? this.undoRedoService.redo() : this.undoRedoService.undo();
        case KeyCode.Y:
          return this.undoRedoService.redo();
      }
    };
    RowContainerEventsFeature2.prototype.onCtrlAndA = function(event) {
      var _a = this, pinnedRowModel = _a.pinnedRowModel, paginationProxy = _a.paginationProxy, rangeService = _a.rangeService;
      var PINNED_BOTTOM = Constants.PINNED_BOTTOM, PINNED_TOP = Constants.PINNED_TOP;
      if (rangeService && paginationProxy.isRowsToRender()) {
        var _b = [
          pinnedRowModel.isEmpty(PINNED_TOP),
          pinnedRowModel.isEmpty(PINNED_BOTTOM)
        ], isEmptyPinnedTop = _b[0], isEmptyPinnedBottom = _b[1];
        var floatingStart = isEmptyPinnedTop ? null : PINNED_TOP;
        var floatingEnd = void 0;
        var rowEnd = void 0;
        if (isEmptyPinnedBottom) {
          floatingEnd = null;
          rowEnd = this.paginationProxy.getRowCount() - 1;
        } else {
          floatingEnd = PINNED_BOTTOM;
          rowEnd = pinnedRowModel.getPinnedBottomRowData().length - 1;
        }
        var allDisplayedColumns = this.columnModel.getAllDisplayedColumns();
        if (missingOrEmpty(allDisplayedColumns)) {
          return;
        }
        rangeService.setCellRange({
          rowStartIndex: 0,
          rowStartPinned: floatingStart,
          rowEndIndex: rowEnd,
          rowEndPinned: floatingEnd,
          columnStart: allDisplayedColumns[0],
          columnEnd: last(allDisplayedColumns)
        });
      }
      event.preventDefault();
    };
    RowContainerEventsFeature2.prototype.onCtrlAndC = function(event) {
      if (!this.clipboardService || this.gridOptionsWrapper.isEnableCellTextSelection()) {
        return;
      }
      this.clipboardService.copyToClipboard();
      event.preventDefault();
    };
    RowContainerEventsFeature2.prototype.onCtrlAndV = function() {
      if (ModuleRegistry.isRegistered(exports2.ModuleNames.ClipboardModule) && !this.gridOptionsWrapper.isSuppressClipboardPaste()) {
        this.clipboardService.pasteFromClipboard();
      }
    };
    RowContainerEventsFeature2.prototype.onCtrlAndD = function(event) {
      if (ModuleRegistry.isRegistered(exports2.ModuleNames.ClipboardModule) && !this.gridOptionsWrapper.isSuppressClipboardPaste()) {
        this.clipboardService.copyRangeDown();
      }
      event.preventDefault();
    };
    __decorate$1a([
      Autowired("mouseEventService")
    ], RowContainerEventsFeature2.prototype, "mouseEventService", void 0);
    __decorate$1a([
      Autowired("valueService")
    ], RowContainerEventsFeature2.prototype, "valueService", void 0);
    __decorate$1a([
      Optional("contextMenuFactory")
    ], RowContainerEventsFeature2.prototype, "contextMenuFactory", void 0);
    __decorate$1a([
      Autowired("ctrlsService")
    ], RowContainerEventsFeature2.prototype, "ctrlsService", void 0);
    __decorate$1a([
      Autowired("navigationService")
    ], RowContainerEventsFeature2.prototype, "navigationService", void 0);
    __decorate$1a([
      Autowired("focusService")
    ], RowContainerEventsFeature2.prototype, "focusService", void 0);
    __decorate$1a([
      Autowired("undoRedoService")
    ], RowContainerEventsFeature2.prototype, "undoRedoService", void 0);
    __decorate$1a([
      Autowired("columnModel")
    ], RowContainerEventsFeature2.prototype, "columnModel", void 0);
    __decorate$1a([
      Autowired("paginationProxy")
    ], RowContainerEventsFeature2.prototype, "paginationProxy", void 0);
    __decorate$1a([
      Autowired("pinnedRowModel")
    ], RowContainerEventsFeature2.prototype, "pinnedRowModel", void 0);
    __decorate$1a([
      Optional("rangeService")
    ], RowContainerEventsFeature2.prototype, "rangeService", void 0);
    __decorate$1a([
      Optional("clipboardService")
    ], RowContainerEventsFeature2.prototype, "clipboardService", void 0);
    __decorate$1a([
      PostConstruct
    ], RowContainerEventsFeature2.prototype, "postConstruct", null);
    return RowContainerEventsFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1m = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1b = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ViewportSizeFeature = function(_super) {
    __extends$1m(ViewportSizeFeature2, _super);
    function ViewportSizeFeature2(centerContainer) {
      var _this = _super.call(this) || this;
      _this.centerContainerCon = centerContainer;
      return _this;
    }
    ViewportSizeFeature2.prototype.postConstruct = function() {
      var _this = this;
      this.ctrlsService.whenReady(function() {
        _this.gridBodyCon = _this.ctrlsService.getGridBodyCtrl();
        _this.listenForResize();
      });
      this.addManagedListener(this.eventService, Events.EVENT_SCROLLBAR_WIDTH_CHANGED, this.onScrollbarWidthChanged.bind(this));
    };
    ViewportSizeFeature2.prototype.listenForResize = function() {
      var listener = this.onCenterViewportResized.bind(this);
      this.centerContainerCon.registerViewportResizeListener(listener);
      this.gridBodyCon.registerBodyViewportResizeListener(listener);
    };
    ViewportSizeFeature2.prototype.onScrollbarWidthChanged = function() {
      this.checkViewportAndScrolls();
    };
    ViewportSizeFeature2.prototype.onCenterViewportResized = function() {
      if (this.centerContainerCon.isViewportVisible()) {
        this.checkViewportAndScrolls();
        var newWidth = this.centerContainerCon.getCenterWidth();
        if (newWidth !== this.centerWidth) {
          this.centerWidth = newWidth;
          this.columnModel.refreshFlexedColumns({ viewportWidth: this.centerWidth, updateBodyWidths: true, fireResizedEvent: true });
        }
      } else {
        this.bodyHeight = 0;
      }
    };
    ViewportSizeFeature2.prototype.checkViewportAndScrolls = function() {
      this.updateScrollVisibleService();
      this.checkBodyHeight();
      this.onHorizontalViewportChanged();
      this.gridBodyCon.getScrollFeature().checkScrollLeft();
    };
    ViewportSizeFeature2.prototype.getBodyHeight = function() {
      return this.bodyHeight;
    };
    ViewportSizeFeature2.prototype.checkBodyHeight = function() {
      var eBodyViewport = this.gridBodyCon.getBodyViewportElement();
      var bodyHeight = getInnerHeight(eBodyViewport);
      if (this.bodyHeight !== bodyHeight) {
        this.bodyHeight = bodyHeight;
        var event_1 = {
          type: Events.EVENT_BODY_HEIGHT_CHANGED,
          api: this.gridApi,
          columnApi: this.columnApi
        };
        this.eventService.dispatchEvent(event_1);
      }
    };
    ViewportSizeFeature2.prototype.updateScrollVisibleService = function() {
      this.updateScrollVisibleServiceImpl();
      setTimeout(this.updateScrollVisibleServiceImpl.bind(this), 500);
    };
    ViewportSizeFeature2.prototype.updateScrollVisibleServiceImpl = function() {
      var params2 = {
        horizontalScrollShowing: this.isHorizontalScrollShowing(),
        verticalScrollShowing: this.gridBodyCon.isVerticalScrollShowing()
      };
      this.scrollVisibleService.setScrollsVisible(params2);
      this.gridBodyCon.setVerticalScrollPaddingVisible(params2.verticalScrollShowing);
    };
    ViewportSizeFeature2.prototype.isHorizontalScrollShowing = function() {
      var isAlwaysShowHorizontalScroll = this.gridOptionsWrapper.isAlwaysShowHorizontalScroll();
      return isAlwaysShowHorizontalScroll || this.centerContainerCon.isViewportHScrollShowing();
    };
    ViewportSizeFeature2.prototype.onHorizontalViewportChanged = function() {
      var scrollWidth = this.centerContainerCon.getCenterWidth();
      var scrollPosition = this.centerContainerCon.getViewportScrollLeft();
      this.columnModel.setViewportPosition(scrollWidth, scrollPosition);
    };
    __decorate$1b([
      Autowired("ctrlsService")
    ], ViewportSizeFeature2.prototype, "ctrlsService", void 0);
    __decorate$1b([
      Autowired("columnModel")
    ], ViewportSizeFeature2.prototype, "columnModel", void 0);
    __decorate$1b([
      Autowired("scrollVisibleService")
    ], ViewportSizeFeature2.prototype, "scrollVisibleService", void 0);
    __decorate$1b([
      Autowired("columnApi")
    ], ViewportSizeFeature2.prototype, "columnApi", void 0);
    __decorate$1b([
      Autowired("gridApi")
    ], ViewportSizeFeature2.prototype, "gridApi", void 0);
    __decorate$1b([
      PostConstruct
    ], ViewportSizeFeature2.prototype, "postConstruct", null);
    return ViewportSizeFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1n = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1c = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var SetPinnedLeftWidthFeature = function(_super) {
    __extends$1n(SetPinnedLeftWidthFeature2, _super);
    function SetPinnedLeftWidthFeature2(element2) {
      var _this = _super.call(this) || this;
      _this.element = element2;
      return _this;
    }
    SetPinnedLeftWidthFeature2.prototype.postConstruct = function() {
      this.addManagedListener(this.eventService, Events.EVENT_LEFT_PINNED_WIDTH_CHANGED, this.onPinnedLeftWidthChanged.bind(this));
    };
    SetPinnedLeftWidthFeature2.prototype.onPinnedLeftWidthChanged = function() {
      var leftWidth = this.pinnedWidthService.getPinnedLeftWidth();
      var displayed = leftWidth > 0;
      setDisplayed(this.element, displayed);
      if (displayed) {
        setFixedWidth(this.element, leftWidth);
      }
    };
    __decorate$1c([
      Autowired("pinnedWidthService")
    ], SetPinnedLeftWidthFeature2.prototype, "pinnedWidthService", void 0);
    __decorate$1c([
      PostConstruct
    ], SetPinnedLeftWidthFeature2.prototype, "postConstruct", null);
    return SetPinnedLeftWidthFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1o = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1d = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var SetPinnedRightWidthFeature = function(_super) {
    __extends$1o(SetPinnedRightWidthFeature2, _super);
    function SetPinnedRightWidthFeature2(element2) {
      var _this = _super.call(this) || this;
      _this.element = element2;
      return _this;
    }
    SetPinnedRightWidthFeature2.prototype.postConstruct = function() {
      this.addManagedListener(this.eventService, Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED, this.onPinnedRightWidthChanged.bind(this));
    };
    SetPinnedRightWidthFeature2.prototype.onPinnedRightWidthChanged = function() {
      var rightWidth = this.pinnedWidthService.getPinnedRightWidth();
      var displayed = rightWidth > 0;
      setDisplayed(this.element, displayed);
      if (displayed) {
        setFixedWidth(this.element, rightWidth);
      }
    };
    __decorate$1d([
      Autowired("pinnedWidthService")
    ], SetPinnedRightWidthFeature2.prototype, "pinnedWidthService", void 0);
    __decorate$1d([
      PostConstruct
    ], SetPinnedRightWidthFeature2.prototype, "postConstruct", null);
    return SetPinnedRightWidthFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1p = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1e = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var SetHeightFeature = function(_super) {
    __extends$1p(SetHeightFeature2, _super);
    function SetHeightFeature2(eContainer, eWrapper) {
      var _this = _super.call(this) || this;
      _this.eContainer = eContainer;
      _this.eWrapper = eWrapper;
      return _this;
    }
    SetHeightFeature2.prototype.postConstruct = function() {
      this.addManagedListener(this.eventService, Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED, this.onHeightChanged.bind(this));
    };
    SetHeightFeature2.prototype.onHeightChanged = function() {
      var height = this.maxDivHeightScaler.getUiContainerHeight();
      var heightString = height != null ? height + "px" : "";
      this.eContainer.style.height = heightString;
      if (this.eWrapper) {
        this.eWrapper.style.height = heightString;
      }
    };
    __decorate$1e([
      Autowired("rowContainerHeightService")
    ], SetHeightFeature2.prototype, "maxDivHeightScaler", void 0);
    __decorate$1e([
      PostConstruct
    ], SetHeightFeature2.prototype, "postConstruct", null);
    return SetHeightFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1q = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1f = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var DragListenerFeature = function(_super) {
    __extends$1q(DragListenerFeature2, _super);
    function DragListenerFeature2(eContainer) {
      var _this = _super.call(this) || this;
      _this.eContainer = eContainer;
      return _this;
    }
    DragListenerFeature2.prototype.postConstruct = function() {
      var _this = this;
      if (!this.gridOptionsWrapper.isEnableRangeSelection() || missing(this.rangeService)) {
        return;
      }
      var params2 = {
        eElement: this.eContainer,
        onDragStart: this.rangeService.onDragStart.bind(this.rangeService),
        onDragStop: this.rangeService.onDragStop.bind(this.rangeService),
        onDragging: this.rangeService.onDragging.bind(this.rangeService)
      };
      this.dragService.addDragSource(params2);
      this.addDestroyFunc(function() {
        return _this.dragService.removeDragSource(params2);
      });
    };
    __decorate$1f([
      Optional("rangeService")
    ], DragListenerFeature2.prototype, "rangeService", void 0);
    __decorate$1f([
      Autowired("dragService")
    ], DragListenerFeature2.prototype, "dragService", void 0);
    __decorate$1f([
      PostConstruct
    ], DragListenerFeature2.prototype, "postConstruct", null);
    return DragListenerFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1r = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1g = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __spreadArrays$9 = function() {
    for (var s = 0, i2 = 0, il = arguments.length; i2 < il; i2++)
      s += arguments[i2].length;
    for (var r = Array(s), k = 0, i2 = 0; i2 < il; i2++)
      for (var a = arguments[i2], j = 0, jl = a.length; j < jl; j++, k++)
        r[k] = a[j];
    return r;
  };
  (function(RowContainerName) {
    RowContainerName["LEFT"] = "left";
    RowContainerName["RIGHT"] = "right";
    RowContainerName["CENTER"] = "center";
    RowContainerName["FULL_WIDTH"] = "fullWidth";
    RowContainerName["TOP_LEFT"] = "topLeft";
    RowContainerName["TOP_RIGHT"] = "topRight";
    RowContainerName["TOP_CENTER"] = "topCenter";
    RowContainerName["TOP_FULL_WITH"] = "topFullWidth";
    RowContainerName["BOTTOM_LEFT"] = "bottomLeft";
    RowContainerName["BOTTOM_RIGHT"] = "bottomRight";
    RowContainerName["BOTTOM_CENTER"] = "bottomCenter";
    RowContainerName["BOTTOM_FULL_WITH"] = "bottomFullWidth";
  })(exports2.RowContainerName || (exports2.RowContainerName = {}));
  var ContainerCssClasses = convertToMap([
    [exports2.RowContainerName.CENTER, "ag-center-cols-container"],
    [exports2.RowContainerName.LEFT, "ag-pinned-left-cols-container"],
    [exports2.RowContainerName.RIGHT, "ag-pinned-right-cols-container"],
    [exports2.RowContainerName.FULL_WIDTH, "ag-full-width-container"],
    [exports2.RowContainerName.TOP_CENTER, "ag-floating-top-container"],
    [exports2.RowContainerName.TOP_LEFT, "ag-pinned-left-floating-top"],
    [exports2.RowContainerName.TOP_RIGHT, "ag-pinned-right-floating-top"],
    [exports2.RowContainerName.TOP_FULL_WITH, "ag-floating-top-full-width-container"],
    [exports2.RowContainerName.BOTTOM_CENTER, "ag-floating-bottom-container"],
    [exports2.RowContainerName.BOTTOM_LEFT, "ag-pinned-left-floating-bottom"],
    [exports2.RowContainerName.BOTTOM_RIGHT, "ag-pinned-right-floating-bottom"],
    [exports2.RowContainerName.BOTTOM_FULL_WITH, "ag-floating-bottom-full-width-container"]
  ]);
  var ViewportCssClasses = convertToMap([
    [exports2.RowContainerName.CENTER, "ag-center-cols-viewport"],
    [exports2.RowContainerName.TOP_CENTER, "ag-floating-top-viewport"],
    [exports2.RowContainerName.BOTTOM_CENTER, "ag-floating-bottom-viewport"]
  ]);
  var WrapperCssClasses = convertToMap([
    [exports2.RowContainerName.CENTER, "ag-center-cols-clipper"]
  ]);
  var RowContainerCtrl = function(_super) {
    __extends$1r(RowContainerCtrl2, _super);
    function RowContainerCtrl2(name) {
      var _this = _super.call(this) || this;
      _this.name = name;
      return _this;
    }
    RowContainerCtrl2.getRowContainerCssClasses = function(name) {
      var containerClass = ContainerCssClasses.get(name);
      var viewportClass = ViewportCssClasses.get(name);
      var wrapperClass = WrapperCssClasses.get(name);
      return { container: containerClass, viewport: viewportClass, wrapper: wrapperClass };
    };
    RowContainerCtrl2.getPinned = function(name) {
      switch (name) {
        case exports2.RowContainerName.BOTTOM_LEFT:
        case exports2.RowContainerName.TOP_LEFT:
        case exports2.RowContainerName.LEFT:
          return Constants.PINNED_LEFT;
        case exports2.RowContainerName.BOTTOM_RIGHT:
        case exports2.RowContainerName.TOP_RIGHT:
        case exports2.RowContainerName.RIGHT:
          return Constants.PINNED_RIGHT;
        default:
          return null;
      }
    };
    RowContainerCtrl2.prototype.postConstruct = function() {
      var _this = this;
      this.enableRtl = this.gridOptionsWrapper.isEnableRtl();
      this.embedFullWidthRows = this.gridOptionsWrapper.isEmbedFullWidthRows();
      this.addManagedListener(this.eventService, Events.EVENT_SCROLL_VISIBILITY_CHANGED, this.onScrollVisibilityChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.onDisplayedColumnsChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, this.onDisplayedColumnsWidthChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_ROWS_CHANGED, this.onDisplayedRowsChanged.bind(this));
      this.forContainers([exports2.RowContainerName.CENTER], function() {
        return _this.viewportSizeFeature = _this.createManagedBean(new ViewportSizeFeature(_this));
      });
      this.registerWithCtrlsService();
    };
    RowContainerCtrl2.prototype.registerWithCtrlsService = function() {
      switch (this.name) {
        case exports2.RowContainerName.CENTER:
          this.ctrlsService.registerCenterRowContainerCtrl(this);
          break;
        case exports2.RowContainerName.LEFT:
          this.ctrlsService.registerLeftRowContainerCtrl(this);
          break;
        case exports2.RowContainerName.RIGHT:
          this.ctrlsService.registerRightRowContainerCtrl(this);
          break;
        case exports2.RowContainerName.TOP_CENTER:
          this.ctrlsService.registerTopCenterRowContainerCtrl(this);
          break;
        case exports2.RowContainerName.TOP_LEFT:
          this.ctrlsService.registerTopLeftRowContainerCon(this);
          break;
        case exports2.RowContainerName.TOP_RIGHT:
          this.ctrlsService.registerTopRightRowContainerCtrl(this);
          break;
        case exports2.RowContainerName.BOTTOM_CENTER:
          this.ctrlsService.registerBottomCenterRowContainerCtrl(this);
          break;
        case exports2.RowContainerName.BOTTOM_LEFT:
          this.ctrlsService.registerBottomLeftRowContainerCtrl(this);
          break;
        case exports2.RowContainerName.BOTTOM_RIGHT:
          this.ctrlsService.registerBottomRightRowContainerCtrl(this);
          break;
      }
    };
    RowContainerCtrl2.prototype.forContainers = function(names, callback) {
      if (names.indexOf(this.name) >= 0) {
        callback();
      }
    };
    RowContainerCtrl2.prototype.getContainerElement = function() {
      return this.eContainer;
    };
    RowContainerCtrl2.prototype.getViewportSizeFeature = function() {
      return this.viewportSizeFeature;
    };
    RowContainerCtrl2.prototype.setComp = function(view, eContainer, eViewport, eWrapper) {
      var _this = this;
      this.comp = view;
      this.eContainer = eContainer;
      this.eViewport = eViewport;
      this.eWrapper = eWrapper;
      this.createManagedBean(new RowContainerEventsFeature(this.eContainer));
      this.addPreventScrollWhileDragging();
      this.listenOnDomOrder();
      this.stopHScrollOnPinnedRows();
      var allTopNoFW = [exports2.RowContainerName.TOP_CENTER, exports2.RowContainerName.TOP_LEFT, exports2.RowContainerName.TOP_RIGHT];
      var allBottomNoFW = [exports2.RowContainerName.BOTTOM_CENTER, exports2.RowContainerName.BOTTOM_LEFT, exports2.RowContainerName.BOTTOM_RIGHT];
      var allMiddleNoFW = [exports2.RowContainerName.CENTER, exports2.RowContainerName.LEFT, exports2.RowContainerName.RIGHT];
      var allNoFW = __spreadArrays$9(allTopNoFW, allBottomNoFW, allMiddleNoFW);
      var allMiddle = [exports2.RowContainerName.CENTER, exports2.RowContainerName.LEFT, exports2.RowContainerName.RIGHT, exports2.RowContainerName.FULL_WIDTH];
      var allCenter = [exports2.RowContainerName.CENTER, exports2.RowContainerName.TOP_CENTER, exports2.RowContainerName.BOTTOM_CENTER];
      var allLeft = [exports2.RowContainerName.LEFT, exports2.RowContainerName.BOTTOM_LEFT, exports2.RowContainerName.TOP_LEFT];
      var allRight = [exports2.RowContainerName.RIGHT, exports2.RowContainerName.BOTTOM_RIGHT, exports2.RowContainerName.TOP_RIGHT];
      this.forContainers(allLeft, function() {
        return _this.createManagedBean(new SetPinnedLeftWidthFeature(_this.eContainer));
      });
      this.forContainers(allRight, function() {
        return _this.createManagedBean(new SetPinnedRightWidthFeature(_this.eContainer));
      });
      this.forContainers(allMiddle, function() {
        return _this.createManagedBean(new SetHeightFeature(_this.eContainer, _this.eWrapper));
      });
      this.forContainers(allNoFW, function() {
        return _this.createManagedBean(new DragListenerFeature(_this.eContainer));
      });
      this.forContainers(allCenter, function() {
        return _this.createManagedBean(new CenterWidthFeature(function(width) {
          return _this.comp.setContainerWidth(width + "px");
        }));
      });
    };
    RowContainerCtrl2.prototype.listenOnDomOrder = function() {
      var _this = this;
      var listener = function() {
        return _this.comp.setDomOrder(_this.gridOptionsWrapper.isEnsureDomOrder());
      };
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, listener);
      listener();
    };
    RowContainerCtrl2.prototype.stopHScrollOnPinnedRows = function() {
      var _this = this;
      this.forContainers([exports2.RowContainerName.TOP_CENTER, exports2.RowContainerName.BOTTOM_CENTER], function() {
        var resetScrollLeft = function() {
          return _this.eViewport.scrollLeft = 0;
        };
        _this.addManagedListener(_this.eViewport, "scroll", resetScrollLeft);
      });
    };
    RowContainerCtrl2.prototype.onDisplayedColumnsChanged = function() {
      var _this = this;
      this.forContainers([exports2.RowContainerName.CENTER], function() {
        return _this.onHorizontalViewportChanged();
      });
    };
    RowContainerCtrl2.prototype.onDisplayedColumnsWidthChanged = function() {
      var _this = this;
      this.forContainers([exports2.RowContainerName.CENTER], function() {
        return _this.onHorizontalViewportChanged();
      });
    };
    RowContainerCtrl2.prototype.onScrollVisibilityChanged = function() {
      if (this.name !== exports2.RowContainerName.CENTER) {
        return;
      }
      var visible = this.scrollVisibleService.isHorizontalScrollShowing();
      var scrollbarWidth = visible ? this.gridOptionsWrapper.getScrollbarWidth() || 0 : 0;
      var height = scrollbarWidth == 0 ? "100%" : "calc(100% + " + scrollbarWidth + "px)";
      this.comp.setViewportHeight(height);
    };
    RowContainerCtrl2.prototype.addPreventScrollWhileDragging = function() {
      var _this = this;
      var preventScroll = function(e) {
        if (_this.dragService.isDragging()) {
          if (e.cancelable) {
            e.preventDefault();
          }
        }
      };
      this.eContainer.addEventListener("touchmove", preventScroll, { passive: false });
      this.addDestroyFunc(function() {
        return _this.eContainer.removeEventListener("touchmove", preventScroll);
      });
    };
    RowContainerCtrl2.prototype.onHorizontalViewportChanged = function() {
      var scrollWidth = this.getCenterWidth();
      var scrollPosition = this.getCenterViewportScrollLeft();
      this.columnModel.setViewportPosition(scrollWidth, scrollPosition);
    };
    RowContainerCtrl2.prototype.getCenterWidth = function() {
      return getInnerWidth(this.eViewport);
    };
    RowContainerCtrl2.prototype.getCenterViewportScrollLeft = function() {
      return getScrollLeft(this.eViewport, this.enableRtl);
    };
    RowContainerCtrl2.prototype.registerViewportResizeListener = function(listener) {
      var unsubscribeFromResize = this.resizeObserverService.observeResize(this.eViewport, listener);
      this.addDestroyFunc(function() {
        return unsubscribeFromResize();
      });
    };
    RowContainerCtrl2.prototype.isViewportVisible = function() {
      return isVisible(this.eViewport);
    };
    RowContainerCtrl2.prototype.isViewportHScrollShowing = function() {
      return isHorizontalScrollShowing(this.eViewport);
    };
    RowContainerCtrl2.prototype.getViewportScrollLeft = function() {
      return getScrollLeft(this.eViewport, this.enableRtl);
    };
    RowContainerCtrl2.prototype.isHorizontalScrollShowing = function() {
      var isAlwaysShowHorizontalScroll = this.gridOptionsWrapper.isAlwaysShowHorizontalScroll();
      return isAlwaysShowHorizontalScroll || isHorizontalScrollShowing(this.eViewport);
    };
    RowContainerCtrl2.prototype.getViewportElement = function() {
      return this.eViewport;
    };
    RowContainerCtrl2.prototype.setContainerTranslateX = function(amount) {
      this.eContainer.style.transform = "translateX(" + amount + "px)";
    };
    RowContainerCtrl2.prototype.getHScrollPosition = function() {
      var res = {
        left: this.eViewport.scrollLeft,
        right: this.eViewport.scrollLeft + this.eViewport.offsetWidth
      };
      return res;
    };
    RowContainerCtrl2.prototype.setCenterViewportScrollLeft = function(value) {
      setScrollLeft(this.eViewport, value, this.enableRtl);
    };
    RowContainerCtrl2.prototype.onDisplayedRowsChanged = function() {
      var _this = this;
      var fullWithContainer = this.name === exports2.RowContainerName.TOP_FULL_WITH || this.name === exports2.RowContainerName.BOTTOM_FULL_WITH || this.name === exports2.RowContainerName.FULL_WIDTH;
      var doesRowMatch = function(rowCtrl) {
        var fullWidthRow = rowCtrl.isFullWidth();
        var printLayout = _this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
        var embedFW = _this.embedFullWidthRows || printLayout;
        var match = fullWithContainer ? !embedFW && fullWidthRow : embedFW || !fullWidthRow;
        return match;
      };
      var allRowsRegardlessOfFullWidth = this.getRowCtrls();
      var rowsThisContainer = allRowsRegardlessOfFullWidth.filter(doesRowMatch);
      this.comp.setRowCtrls(rowsThisContainer);
    };
    RowContainerCtrl2.prototype.getRowCtrls = function() {
      switch (this.name) {
        case exports2.RowContainerName.TOP_CENTER:
        case exports2.RowContainerName.TOP_LEFT:
        case exports2.RowContainerName.TOP_RIGHT:
        case exports2.RowContainerName.TOP_FULL_WITH:
          return this.rowRenderer.getTopRowCtrls();
        case exports2.RowContainerName.BOTTOM_CENTER:
        case exports2.RowContainerName.BOTTOM_LEFT:
        case exports2.RowContainerName.BOTTOM_RIGHT:
        case exports2.RowContainerName.BOTTOM_FULL_WITH:
          return this.rowRenderer.getBottomRowCtrls();
        default:
          return this.rowRenderer.getRowCtrls();
      }
    };
    __decorate$1g([
      Autowired("scrollVisibleService")
    ], RowContainerCtrl2.prototype, "scrollVisibleService", void 0);
    __decorate$1g([
      Autowired("dragService")
    ], RowContainerCtrl2.prototype, "dragService", void 0);
    __decorate$1g([
      Autowired("ctrlsService")
    ], RowContainerCtrl2.prototype, "ctrlsService", void 0);
    __decorate$1g([
      Autowired("columnModel")
    ], RowContainerCtrl2.prototype, "columnModel", void 0);
    __decorate$1g([
      Autowired("resizeObserverService")
    ], RowContainerCtrl2.prototype, "resizeObserverService", void 0);
    __decorate$1g([
      Autowired("rowRenderer")
    ], RowContainerCtrl2.prototype, "rowRenderer", void 0);
    __decorate$1g([
      PostConstruct
    ], RowContainerCtrl2.prototype, "postConstruct", null);
    return RowContainerCtrl2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1s = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1h = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var GRID_BODY_TEMPLATE = '<div class="ag-root ag-unselectable" role="grid" unselectable="on">\n        <ag-header-root ref="gridHeader" unselectable="on"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation" unselectable="on">\n            <ag-row-container ref="topLeftContainer" name="' + exports2.RowContainerName.TOP_LEFT + '"></ag-row-container>\n            <ag-row-container ref="topCenterContainer" name="' + exports2.RowContainerName.TOP_CENTER + '"></ag-row-container>\n            <ag-row-container ref="topRightContainer" name="' + exports2.RowContainerName.TOP_RIGHT + '"></ag-row-container>\n            <ag-row-container ref="topFullWidthContainer" name="' + exports2.RowContainerName.TOP_FULL_WITH + '"></ag-row-container>\n        </div>\n        <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n            <ag-row-container ref="leftContainer" name="' + exports2.RowContainerName.LEFT + '"></ag-row-container>\n            <ag-row-container ref="centerContainer" name="' + exports2.RowContainerName.CENTER + '"></ag-row-container>\n            <ag-row-container ref="rightContainer" name="' + exports2.RowContainerName.RIGHT + '"></ag-row-container>\n            <ag-row-container ref="fullWidthContainer" name="' + exports2.RowContainerName.FULL_WIDTH + '"></ag-row-container>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation" unselectable="on">\n            <ag-row-container ref="bottomLeftContainer" name="' + exports2.RowContainerName.BOTTOM_LEFT + '"></ag-row-container>\n            <ag-row-container ref="bottomCenterContainer" name="' + exports2.RowContainerName.BOTTOM_CENTER + '"></ag-row-container>\n            <ag-row-container ref="bottomRightContainer" name="' + exports2.RowContainerName.BOTTOM_RIGHT + '"></ag-row-container>\n            <ag-row-container ref="bottomFullWidthContainer" name="' + exports2.RowContainerName.BOTTOM_FULL_WITH + '"></ag-row-container>\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>';
  var GridBodyComp = function(_super) {
    __extends$1s(GridBodyComp2, _super);
    function GridBodyComp2() {
      return _super.call(this, GRID_BODY_TEMPLATE) || this;
    }
    GridBodyComp2.prototype.init = function() {
      var _this = this;
      var setHeight = function(height, element2) {
        var heightString = height + "px";
        element2.style.minHeight = heightString;
        element2.style.height = heightString;
      };
      var compProxy = {
        setRowAnimationCssOnBodyViewport: function(cssClass, animate) {
          return _this.setRowAnimationCssOnBodyViewport(cssClass, animate);
        },
        setColumnCount: function(count) {
          return setAriaColCount(_this.getGui(), count);
        },
        setRowCount: function(count) {
          return setAriaRowCount(_this.getGui(), count);
        },
        setTopHeight: function(height) {
          return setHeight(height, _this.eTop);
        },
        setBottomHeight: function(height) {
          return setHeight(height, _this.eBottom);
        },
        setTopDisplay: function(display) {
          return _this.eTop.style.display = display;
        },
        setBottomDisplay: function(display) {
          return _this.eBottom.style.display = display;
        },
        setColumnMovingCss: function(cssClass, flag) {
          return _this.addOrRemoveCssClass(CSS_CLASS_COLUMN_MOVING, flag);
        },
        updateLayoutClasses: function(cssClass, params2) {
          addOrRemoveCssClass(_this.eBodyViewport, exports2.LayoutCssClasses.AUTO_HEIGHT, params2.autoHeight);
          addOrRemoveCssClass(_this.eBodyViewport, exports2.LayoutCssClasses.NORMAL, params2.normal);
          addOrRemoveCssClass(_this.eBodyViewport, exports2.LayoutCssClasses.PRINT, params2.print);
          _this.addOrRemoveCssClass(exports2.LayoutCssClasses.AUTO_HEIGHT, params2.autoHeight);
          _this.addOrRemoveCssClass(exports2.LayoutCssClasses.NORMAL, params2.normal);
          _this.addOrRemoveCssClass(exports2.LayoutCssClasses.PRINT, params2.print);
        },
        setAlwaysVerticalScrollClass: function(cssClass, on) {
          return addOrRemoveCssClass(_this.eBodyViewport, CSS_CLASS_FORCE_VERTICAL_SCROLL, on);
        },
        registerBodyViewportResizeListener: function(listener) {
          var unsubscribeFromResize = _this.resizeObserverService.observeResize(_this.eBodyViewport, listener);
          _this.addDestroyFunc(function() {
            return unsubscribeFromResize();
          });
        },
        setPinnedTopBottomOverflowY: function(overflow) {
          return _this.eTop.style.overflowY = _this.eBottom.style.overflowY = overflow;
        },
        setCellSelectableCss: function(cssClass, selectable) {
          [_this.eTop, _this.eBodyViewport, _this.eBottom].forEach(function(ct) {
            return addOrRemoveCssClass(ct, CSS_CLASS_CELL_SELECTABLE, selectable);
          });
        }
      };
      this.ctrl = this.createManagedBean(new GridBodyCtrl());
      this.ctrl.setComp(compProxy, this.getGui(), this.eBodyViewport, this.eTop, this.eBottom);
      if (this.rangeService || this.gridOptionsWrapper.isRowSelectionMulti()) {
        setAriaMultiSelectable(this.getGui(), true);
      }
    };
    GridBodyComp2.prototype.setRowAnimationCssOnBodyViewport = function(cssClass, animateRows) {
      addOrRemoveCssClass(this.eBodyViewport, exports2.RowAnimationCssClasses.ANIMATION_ON, animateRows);
      addOrRemoveCssClass(this.eBodyViewport, exports2.RowAnimationCssClasses.ANIMATION_OFF, !animateRows);
    };
    GridBodyComp2.prototype.getFloatingTopBottom = function() {
      return [this.eTop, this.eBottom];
    };
    __decorate$1h([
      Autowired("resizeObserverService")
    ], GridBodyComp2.prototype, "resizeObserverService", void 0);
    __decorate$1h([
      Optional("rangeService")
    ], GridBodyComp2.prototype, "rangeService", void 0);
    __decorate$1h([
      RefSelector("eBodyViewport")
    ], GridBodyComp2.prototype, "eBodyViewport", void 0);
    __decorate$1h([
      RefSelector("eTop")
    ], GridBodyComp2.prototype, "eTop", void 0);
    __decorate$1h([
      RefSelector("eBottom")
    ], GridBodyComp2.prototype, "eBottom", void 0);
    __decorate$1h([
      RefSelector("gridHeader")
    ], GridBodyComp2.prototype, "headerRootComp", void 0);
    __decorate$1h([
      PostConstruct
    ], GridBodyComp2.prototype, "init", null);
    return GridBodyComp2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  (function(ExcelFactoryMode) {
    ExcelFactoryMode[ExcelFactoryMode["SINGLE_SHEET"] = 0] = "SINGLE_SHEET";
    ExcelFactoryMode[ExcelFactoryMode["MULTI_SHEET"] = 1] = "MULTI_SHEET";
  })(exports2.ExcelFactoryMode || (exports2.ExcelFactoryMode = {}));
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  (function(ClientSideRowModelSteps) {
    ClientSideRowModelSteps["EVERYTHING"] = "group";
    ClientSideRowModelSteps["FILTER"] = "filter";
    ClientSideRowModelSteps["SORT"] = "sort";
    ClientSideRowModelSteps["MAP"] = "map";
    ClientSideRowModelSteps["AGGREGATE"] = "aggregate";
    ClientSideRowModelSteps["PIVOT"] = "pivot";
    ClientSideRowModelSteps["NOTHING"] = "nothing";
  })(exports2.ClientSideRowModelSteps || (exports2.ClientSideRowModelSteps = {}));
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __decorate$1i = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var GridApi = function() {
    function GridApi2() {
      this.detailGridInfoMap = {};
      this.destroyCalled = false;
    }
    GridApi2.prototype.registerOverlayWrapperComp = function(overlayWrapperComp) {
      this.overlayWrapperComp = overlayWrapperComp;
    };
    GridApi2.prototype.registerSideBarComp = function(sideBarComp) {
      this.sideBarComp = sideBarComp;
    };
    GridApi2.prototype.init = function() {
      var _this = this;
      switch (this.rowModel.getType()) {
        case Constants.ROW_MODEL_TYPE_CLIENT_SIDE:
          this.clientSideRowModel = this.rowModel;
          break;
        case Constants.ROW_MODEL_TYPE_INFINITE:
          this.infiniteRowModel = this.rowModel;
          break;
        case Constants.ROW_MODEL_TYPE_SERVER_SIDE:
          this.serverSideRowModel = this.rowModel;
          break;
      }
      this.ctrlsService.whenReady(function() {
        _this.gridBodyCon = _this.ctrlsService.getGridBodyCtrl();
      });
    };
    GridApi2.prototype.__getAlignedGridService = function() {
      return this.alignedGridsService;
    };
    GridApi2.prototype.addDetailGridInfo = function(id, gridInfo) {
      this.detailGridInfoMap[id] = gridInfo;
    };
    GridApi2.prototype.removeDetailGridInfo = function(id) {
      this.detailGridInfoMap[id] = void 0;
    };
    GridApi2.prototype.getDetailGridInfo = function(id) {
      return this.detailGridInfoMap[id];
    };
    GridApi2.prototype.forEachDetailGridInfo = function(callback) {
      var index = 0;
      iterateObject(this.detailGridInfoMap, function(id, gridInfo) {
        if (exists(gridInfo)) {
          callback(gridInfo, index);
          index++;
        }
      });
    };
    GridApi2.prototype.getDataAsCsv = function(params2) {
      if (ModuleRegistry.assertRegistered(exports2.ModuleNames.CsvExportModule, "api.getDataAsCsv")) {
        return this.csvCreator.getDataAsCsv(params2);
      }
    };
    GridApi2.prototype.exportDataAsCsv = function(params2) {
      if (ModuleRegistry.assertRegistered(exports2.ModuleNames.CsvExportModule, "api.exportDataAsCSv")) {
        this.csvCreator.exportDataAsCsv(params2);
      }
    };
    GridApi2.prototype.getDataAsExcel = function(params2) {
      if (ModuleRegistry.assertRegistered(exports2.ModuleNames.ExcelExportModule, "api.getDataAsExcel")) {
        var exportMode = params2 && params2.exportMode || "xlsx";
        if (this.excelCreator.getFactoryMode(exportMode) === exports2.ExcelFactoryMode.MULTI_SHEET) {
          console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling `api.getMultipleSheetAsExcel()` or `api.exportMultipleSheetsAsExcel()`");
          return;
        }
        return this.excelCreator.getDataAsExcel(params2);
      }
    };
    GridApi2.prototype.exportDataAsExcel = function(params2) {
      if (ModuleRegistry.assertRegistered(exports2.ModuleNames.ExcelExportModule, "api.exportDataAsExcel")) {
        var exportMode = params2 && params2.exportMode || "xlsx";
        if (this.excelCreator.getFactoryMode(exportMode) === exports2.ExcelFactoryMode.MULTI_SHEET) {
          console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling `api.getMultipleSheetAsExcel()` or `api.exportMultipleSheetsAsExcel()`");
          return;
        }
        this.excelCreator.exportDataAsExcel(params2);
      }
    };
    GridApi2.prototype.getSheetDataForExcel = function(params2) {
      if (ModuleRegistry.assertRegistered(exports2.ModuleNames.ExcelExportModule, "api.getSheetDataForExcel")) {
        var exportMode = params2 && params2.exportMode || "xlsx";
        this.excelCreator.setFactoryMode(exports2.ExcelFactoryMode.MULTI_SHEET, exportMode);
        return this.excelCreator.getSheetDataForExcel(params2);
      }
    };
    GridApi2.prototype.getMultipleSheetsAsExcel = function(params2) {
      if (ModuleRegistry.assertRegistered(exports2.ModuleNames.ExcelExportModule, "api.getMultipleSheetsAsExcel")) {
        return this.excelCreator.getMultipleSheetsAsExcel(params2);
      }
    };
    GridApi2.prototype.exportMultipleSheetsAsExcel = function(params2) {
      if (ModuleRegistry.assertRegistered(exports2.ModuleNames.ExcelExportModule, "api.exportMultipleSheetsAsExcel")) {
        return this.excelCreator.exportMultipleSheetsAsExcel(params2);
      }
    };
    GridApi2.prototype.setEnterpriseDatasource = function(datasource) {
      console.warn("ag-grid: since version 18.x, api.setEnterpriseDatasource() should be replaced with api.setServerSideDatasource()");
      this.setServerSideDatasource(datasource);
    };
    GridApi2.prototype.setGridAriaProperty = function(property, value) {
      if (!property) {
        return;
      }
      var eGrid = this.ctrlsService.getGridBodyCtrl().getGui();
      var ariaProperty = "aria-" + property;
      if (value === null) {
        eGrid.removeAttribute(ariaProperty);
      } else {
        eGrid.setAttribute(ariaProperty, value);
      }
    };
    GridApi2.prototype.setServerSideDatasource = function(datasource) {
      if (this.serverSideRowModel) {
        this.serverSideRowModel.setDatasource(datasource);
      } else {
        console.warn("AG Grid: you can only use an enterprise datasource when gridOptions.rowModelType is '" + Constants.ROW_MODEL_TYPE_SERVER_SIDE + "'");
      }
    };
    GridApi2.prototype.setDatasource = function(datasource) {
      if (this.gridOptionsWrapper.isRowModelInfinite()) {
        this.rowModel.setDatasource(datasource);
      } else {
        console.warn("AG Grid: you can only use a datasource when gridOptions.rowModelType is '" + Constants.ROW_MODEL_TYPE_INFINITE + "'");
      }
    };
    GridApi2.prototype.setViewportDatasource = function(viewportDatasource) {
      if (this.gridOptionsWrapper.isRowModelViewport()) {
        this.rowModel.setViewportDatasource(viewportDatasource);
      } else {
        console.warn("AG Grid: you can only use a viewport datasource when gridOptions.rowModelType is '" + Constants.ROW_MODEL_TYPE_VIEWPORT + "'");
      }
    };
    GridApi2.prototype.setRowData = function(rowData) {
      if (this.gridOptionsWrapper.isRowModelDefault()) {
        if (this.gridOptionsWrapper.isImmutableData()) {
          var transactionAndMap = this.immutableService.createTransactionForRowData(rowData);
          if (!transactionAndMap) {
            return;
          }
          var transaction = transactionAndMap[0], orderIdMap = transactionAndMap[1];
          var nodeTransaction = this.clientSideRowModel.updateRowData(transaction, orderIdMap);
          if (nodeTransaction) {
            this.rowRenderer.refreshFullWidthRows(nodeTransaction.update);
          }
        } else {
          this.selectionService.reset();
          this.clientSideRowModel.setRowData(rowData);
        }
      } else {
        console.warn("cannot call setRowData unless using normal row model");
      }
    };
    GridApi2.prototype.setFloatingTopRowData = function(rows) {
      console.warn("AG Grid: since v12, api.setFloatingTopRowData() is now api.setPinnedTopRowData()");
      this.setPinnedTopRowData(rows);
    };
    GridApi2.prototype.setFloatingBottomRowData = function(rows) {
      console.warn("AG Grid: since v12, api.setFloatingBottomRowData() is now api.setPinnedBottomRowData()");
      this.setPinnedBottomRowData(rows);
    };
    GridApi2.prototype.getFloatingTopRowCount = function() {
      console.warn("AG Grid: since v12, api.getFloatingTopRowCount() is now api.getPinnedTopRowCount()");
      return this.getPinnedTopRowCount();
    };
    GridApi2.prototype.getFloatingBottomRowCount = function() {
      console.warn("AG Grid: since v12, api.getFloatingBottomRowCount() is now api.getPinnedBottomRowCount()");
      return this.getPinnedBottomRowCount();
    };
    GridApi2.prototype.getFloatingTopRow = function(index) {
      console.warn("AG Grid: since v12, api.getFloatingTopRow() is now api.getPinnedTopRow()");
      return this.getPinnedTopRow(index);
    };
    GridApi2.prototype.getFloatingBottomRow = function(index) {
      console.warn("AG Grid: since v12, api.getFloatingBottomRow() is now api.getPinnedBottomRow()");
      return this.getPinnedBottomRow(index);
    };
    GridApi2.prototype.setPinnedTopRowData = function(rows) {
      this.pinnedRowModel.setPinnedTopRowData(rows);
    };
    GridApi2.prototype.setPinnedBottomRowData = function(rows) {
      this.pinnedRowModel.setPinnedBottomRowData(rows);
    };
    GridApi2.prototype.getPinnedTopRowCount = function() {
      return this.pinnedRowModel.getPinnedTopRowCount();
    };
    GridApi2.prototype.getPinnedBottomRowCount = function() {
      return this.pinnedRowModel.getPinnedBottomRowCount();
    };
    GridApi2.prototype.getPinnedTopRow = function(index) {
      return this.pinnedRowModel.getPinnedTopRow(index);
    };
    GridApi2.prototype.getPinnedBottomRow = function(index) {
      return this.pinnedRowModel.getPinnedBottomRow(index);
    };
    GridApi2.prototype.setColumnDefs = function(colDefs, source) {
      if (source === void 0) {
        source = "api";
      }
      this.columnModel.setColumnDefs(colDefs, source);
    };
    GridApi2.prototype.setAutoGroupColumnDef = function(colDef, source) {
      this.gridOptionsWrapper.setProperty("autoGroupColumnDef", colDef, true);
    };
    GridApi2.prototype.expireValueCache = function() {
      this.valueCache.expire();
    };
    GridApi2.prototype.getVerticalPixelRange = function() {
      return this.gridBodyCon.getScrollFeature().getVScrollPosition();
    };
    GridApi2.prototype.getHorizontalPixelRange = function() {
      return this.gridBodyCon.getScrollFeature().getHScrollPosition();
    };
    GridApi2.prototype.setAlwaysShowHorizontalScroll = function(show) {
      this.gridOptionsWrapper.setProperty("alwaysShowHorizontalScroll", show);
    };
    GridApi2.prototype.setAlwaysShowVerticalScroll = function(show) {
      this.gridOptionsWrapper.setProperty("alwaysShowVerticalScroll", show);
    };
    GridApi2.prototype.refreshToolPanel = function() {
      if (!this.sideBarComp) {
        return;
      }
      this.sideBarComp.refresh();
    };
    GridApi2.prototype.refreshCells = function(params2) {
      if (params2 === void 0) {
        params2 = {};
      }
      if (Array.isArray(params2)) {
        console.warn("since AG Grid v11.1, refreshCells() now takes parameters, please see the documentation.");
        return;
      }
      this.rowRenderer.refreshCells(params2);
    };
    GridApi2.prototype.flashCells = function(params2) {
      if (params2 === void 0) {
        params2 = {};
      }
      this.rowRenderer.flashCells(params2);
    };
    GridApi2.prototype.redrawRows = function(params2) {
      if (params2 === void 0) {
        params2 = {};
      }
      var rowNodes = params2 ? params2.rowNodes : void 0;
      this.rowRenderer.redrawRows(rowNodes);
    };
    GridApi2.prototype.refreshView = function() {
      console.warn("AG Grid: since v11.1, refreshView() is deprecated, please call refreshCells() or redrawRows() instead");
      this.redrawRows();
    };
    GridApi2.prototype.refreshRows = function(rowNodes) {
      console.warn("since AG Grid v11.1, refreshRows() is deprecated, please use refreshCells({rowNodes: rows}) or redrawRows({rowNodes: rows}) instead");
      this.refreshCells({ rowNodes });
    };
    GridApi2.prototype.rowDataChanged = function(rows) {
      console.warn("AG Grid: rowDataChanged is deprecated, either call refreshView() to refresh everything, or call rowNode.setRowData(newData) to set value on a particular node");
      this.redrawRows();
    };
    GridApi2.prototype.softRefreshView = function() {
      console.error("AG Grid: since v16, softRefreshView() is no longer supported. Please check the documentation on how to refresh.");
    };
    GridApi2.prototype.refreshGroupRows = function() {
      console.warn("AG Grid: since v11.1, refreshGroupRows() is no longer supported, call refreshCells() instead. Because refreshCells() now does dirty checking, it will only refresh cells that have changed, so it should not be necessary to only refresh the group rows.");
      this.refreshCells();
    };
    GridApi2.prototype.setFunctionsReadOnly = function(readOnly) {
      this.gridOptionsWrapper.setProperty("functionsReadOnly", readOnly);
    };
    GridApi2.prototype.refreshHeader = function() {
      this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(c) {
        return c.refresh();
      });
    };
    GridApi2.prototype.isAnyFilterPresent = function() {
      return this.filterManager.isAnyFilterPresent();
    };
    GridApi2.prototype.isAdvancedFilterPresent = function() {
      console.warn("AG Grid: isAdvancedFilterPresent() is deprecated, please use isColumnFilterPresent()");
      return this.isColumnFilterPresent();
    };
    GridApi2.prototype.isColumnFilterPresent = function() {
      return this.filterManager.isAdvancedFilterPresent();
    };
    GridApi2.prototype.isQuickFilterPresent = function() {
      return this.filterManager.isQuickFilterPresent();
    };
    GridApi2.prototype.getModel = function() {
      return this.rowModel;
    };
    GridApi2.prototype.setRowNodeExpanded = function(rowNode, expanded) {
      if (rowNode) {
        rowNode.setExpanded(expanded);
      }
    };
    GridApi2.prototype.onGroupExpandedOrCollapsed = function(deprecated_refreshFromIndex) {
      if (missing(this.clientSideRowModel)) {
        console.warn("AG Grid: cannot call onGroupExpandedOrCollapsed unless using normal row model");
      }
      if (exists(deprecated_refreshFromIndex)) {
        console.warn("AG Grid: api.onGroupExpandedOrCollapsed - refreshFromIndex parameter is no longer used, the grid will refresh all rows");
      }
      this.clientSideRowModel.refreshModel({ step: exports2.ClientSideRowModelSteps.MAP });
    };
    GridApi2.prototype.refreshInMemoryRowModel = function(step) {
      console.warn("ag-grid: since version 18.x, api.refreshInMemoryRowModel() should be replaced with api.refreshClientSideRowModel()");
      this.refreshClientSideRowModel(step);
    };
    GridApi2.prototype.refreshClientSideRowModel = function(step) {
      if (missing(this.clientSideRowModel)) {
        console.warn("cannot call refreshClientSideRowModel unless using normal row model");
      }
      var paramsStep = exports2.ClientSideRowModelSteps.EVERYTHING;
      var stepsMapped = {
        group: exports2.ClientSideRowModelSteps.EVERYTHING,
        filter: exports2.ClientSideRowModelSteps.FILTER,
        map: exports2.ClientSideRowModelSteps.MAP,
        aggregate: exports2.ClientSideRowModelSteps.AGGREGATE,
        sort: exports2.ClientSideRowModelSteps.SORT,
        pivot: exports2.ClientSideRowModelSteps.PIVOT
      };
      if (exists(step)) {
        paramsStep = stepsMapped[step];
      }
      if (missing(paramsStep)) {
        console.error("AG Grid: invalid step " + step + ", available steps are " + Object.keys(stepsMapped).join(", "));
        return;
      }
      var modelParams = {
        step: paramsStep,
        keepRenderedRows: true,
        animate: true,
        keepEditingRows: true
      };
      this.clientSideRowModel.refreshModel(modelParams);
    };
    GridApi2.prototype.isAnimationFrameQueueEmpty = function() {
      return this.animationFrameService.isQueueEmpty();
    };
    GridApi2.prototype.flushAllAnimationFrames = function() {
      this.animationFrameService.flushAllFrames();
    };
    GridApi2.prototype.getRowNode = function(id) {
      return this.rowModel.getRowNode(id);
    };
    GridApi2.prototype.getSizesForCurrentTheme = function() {
      return {
        rowHeight: this.gridOptionsWrapper.getRowHeightAsNumber(),
        headerHeight: this.gridOptionsWrapper.getHeaderHeight()
      };
    };
    GridApi2.prototype.expandAll = function() {
      if (this.clientSideRowModel) {
        this.clientSideRowModel.expandOrCollapseAll(true);
      } else if (this.serverSideRowModel) {
        this.serverSideRowModel.expandAll(true);
      } else {
        console.warn("AG Grid: expandAll only works with Client Side Row Model and Server Side Row Model");
      }
    };
    GridApi2.prototype.collapseAll = function() {
      if (this.clientSideRowModel) {
        this.clientSideRowModel.expandOrCollapseAll(false);
      } else if (this.serverSideRowModel) {
        this.serverSideRowModel.expandAll(false);
      } else {
        console.warn("AG Grid: collapseAll only works with Client Side Row Model and Server Side Row Model");
      }
    };
    GridApi2.prototype.getToolPanelInstance = function(id) {
      if (!this.sideBarComp) {
        console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise");
        return;
      }
      return this.sideBarComp.getToolPanelInstance(id);
    };
    GridApi2.prototype.addVirtualRowListener = function(eventName, rowIndex, callback) {
      if (typeof eventName !== "string") {
        console.warn("AG Grid: addVirtualRowListener is deprecated, please use addRenderedRowListener.");
      }
      this.addRenderedRowListener(eventName, rowIndex, callback);
    };
    GridApi2.prototype.addRenderedRowListener = function(eventName, rowIndex, callback) {
      if (eventName === "virtualRowSelected") {
        console.warn("AG Grid: event virtualRowSelected is deprecated, to register for individual row\n                selection events, add a listener directly to the row node.");
      }
      this.rowRenderer.addRenderedRowListener(eventName, rowIndex, callback);
    };
    GridApi2.prototype.setQuickFilter = function(newFilter) {
      this.filterManager.setQuickFilter(newFilter);
    };
    GridApi2.prototype.selectIndex = function(index, tryMulti, suppressEvents) {
      console.warn("AG Grid: do not use api for selection, call node.setSelected(value) instead");
      if (suppressEvents) {
        console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it");
      }
      this.selectionService.selectIndex(index, tryMulti);
    };
    GridApi2.prototype.deselectIndex = function(index, suppressEvents) {
      if (suppressEvents === void 0) {
        suppressEvents = false;
      }
      console.warn("AG Grid: do not use api for selection, call node.setSelected(value) instead");
      if (suppressEvents) {
        console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it");
      }
      this.selectionService.deselectIndex(index);
    };
    GridApi2.prototype.selectNode = function(node, tryMulti, suppressEvents) {
      if (tryMulti === void 0) {
        tryMulti = false;
      }
      if (suppressEvents === void 0) {
        suppressEvents = false;
      }
      console.warn("AG Grid: API for selection is deprecated, call node.setSelected(value) instead");
      if (suppressEvents) {
        console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it");
      }
      node.setSelectedParams({ newValue: true, clearSelection: !tryMulti });
    };
    GridApi2.prototype.deselectNode = function(node, suppressEvents) {
      if (suppressEvents === void 0) {
        suppressEvents = false;
      }
      console.warn("AG Grid: API for selection is deprecated, call node.setSelected(value) instead");
      if (suppressEvents) {
        console.warn("AG Grid: suppressEvents is no longer supported, stop listening for the event if you no longer want it");
      }
      node.setSelectedParams({ newValue: false });
    };
    GridApi2.prototype.selectAll = function() {
      this.selectionService.selectAllRowNodes();
    };
    GridApi2.prototype.deselectAll = function() {
      this.selectionService.deselectAllRowNodes();
    };
    GridApi2.prototype.selectAllFiltered = function() {
      this.selectionService.selectAllRowNodes(true);
    };
    GridApi2.prototype.deselectAllFiltered = function() {
      this.selectionService.deselectAllRowNodes(true);
    };
    GridApi2.prototype.recomputeAggregates = function() {
      if (missing(this.clientSideRowModel)) {
        console.warn("cannot call recomputeAggregates unless using normal row model");
      }
      console.warn("recomputeAggregates is deprecated, please call api.refreshClientSideRowModel('aggregate') instead");
      this.clientSideRowModel.refreshModel({ step: exports2.ClientSideRowModelSteps.AGGREGATE });
    };
    GridApi2.prototype.sizeColumnsToFit = function() {
      this.gridBodyCon.sizeColumnsToFit();
    };
    GridApi2.prototype.showLoadingOverlay = function() {
      this.overlayWrapperComp.showLoadingOverlay();
    };
    GridApi2.prototype.showNoRowsOverlay = function() {
      this.overlayWrapperComp.showNoRowsOverlay();
    };
    GridApi2.prototype.hideOverlay = function() {
      this.overlayWrapperComp.hideOverlay();
    };
    GridApi2.prototype.isNodeSelected = function(node) {
      console.warn("AG Grid: no need to call api.isNodeSelected(), just call node.isSelected() instead");
      return node.isSelected();
    };
    GridApi2.prototype.getSelectedNodesById = function() {
      console.error("AG Grid: since version 3.4, getSelectedNodesById no longer exists, use getSelectedNodes() instead");
      return null;
    };
    GridApi2.prototype.getSelectedNodes = function() {
      return this.selectionService.getSelectedNodes();
    };
    GridApi2.prototype.getSelectedRows = function() {
      return this.selectionService.getSelectedRows();
    };
    GridApi2.prototype.getBestCostNodeSelection = function() {
      return this.selectionService.getBestCostNodeSelection();
    };
    GridApi2.prototype.getRenderedNodes = function() {
      return this.rowRenderer.getRenderedNodes();
    };
    GridApi2.prototype.ensureColIndexVisible = function(index) {
      console.warn("AG Grid: ensureColIndexVisible(index) no longer supported, use ensureColumnVisible(colKey) instead.");
    };
    GridApi2.prototype.ensureColumnVisible = function(key) {
      this.gridBodyCon.getScrollFeature().ensureColumnVisible(key);
    };
    GridApi2.prototype.ensureIndexVisible = function(index, position) {
      this.gridBodyCon.getScrollFeature().ensureIndexVisible(index, position);
    };
    GridApi2.prototype.ensureNodeVisible = function(comparator, position) {
      if (position === void 0) {
        position = null;
      }
      this.gridBodyCon.getScrollFeature().ensureNodeVisible(comparator, position);
    };
    GridApi2.prototype.forEachLeafNode = function(callback) {
      if (missing(this.clientSideRowModel)) {
        console.warn("cannot call forEachNode unless using normal row model");
      }
      this.clientSideRowModel.forEachLeafNode(callback);
    };
    GridApi2.prototype.forEachNode = function(callback) {
      this.rowModel.forEachNode(callback);
    };
    GridApi2.prototype.forEachNodeAfterFilter = function(callback) {
      if (missing(this.clientSideRowModel)) {
        console.warn("cannot call forEachNodeAfterFilter unless using normal row model");
      }
      this.clientSideRowModel.forEachNodeAfterFilter(callback);
    };
    GridApi2.prototype.forEachNodeAfterFilterAndSort = function(callback) {
      if (missing(this.clientSideRowModel)) {
        console.warn("cannot call forEachNodeAfterFilterAndSort unless using normal row model");
      }
      this.clientSideRowModel.forEachNodeAfterFilterAndSort(callback);
    };
    GridApi2.prototype.getFilterApiForColDef = function(colDef) {
      console.warn("ag-grid API method getFilterApiForColDef deprecated, use getFilterInstance instead");
      return this.getFilterInstance(colDef);
    };
    GridApi2.prototype.getFilterInstance = function(key, callback) {
      var column = this.columnModel.getPrimaryColumn(key);
      if (column) {
        var filterPromise = this.filterManager.getFilterComponent(column, "NO_UI");
        var currentValue = filterPromise && filterPromise.resolveNow(null, function(filterComp) {
          return filterComp;
        });
        if (callback) {
          if (currentValue) {
            setTimeout(callback, 0, currentValue);
          } else if (filterPromise) {
            filterPromise.then(callback);
          }
        }
        return currentValue;
      }
    };
    GridApi2.prototype.getFilterApi = function(key) {
      console.warn("AG Grid: getFilterApi is deprecated, use getFilterInstance instead");
      return this.getFilterInstance(key);
    };
    GridApi2.prototype.destroyFilter = function(key) {
      var column = this.columnModel.getPrimaryColumn(key);
      if (column) {
        return this.filterManager.destroyFilter(column, "filterDestroyed");
      }
    };
    GridApi2.prototype.getStatusPanel = function(key) {
      if (this.statusBarService) {
        return this.statusBarService.getStatusPanel(key);
      }
    };
    GridApi2.prototype.getColumnDef = function(key) {
      var column = this.columnModel.getPrimaryColumn(key);
      if (column) {
        return column.getColDef();
      }
      return null;
    };
    GridApi2.prototype.getColumnDefs = function() {
      return this.columnModel.getColumnDefs();
    };
    GridApi2.prototype.onFilterChanged = function() {
      this.filterManager.onFilterChanged();
    };
    GridApi2.prototype.onSortChanged = function() {
      this.sortController.onSortChanged();
    };
    GridApi2.prototype.setSortModel = function(sortModel, source) {
      console.warn("AG Grid: as of version 24.0.0, setSortModel() is deprecated, sort information is now part of Column State. Please use columnApi.applyColumnState() instead.");
      var columnState = [];
      if (sortModel) {
        sortModel.forEach(function(item, index) {
          columnState.push({
            colId: item.colId,
            sort: item.sort,
            sortIndex: index
          });
        });
      }
      this.columnModel.applyColumnState({ state: columnState, defaultState: { sort: null } });
    };
    GridApi2.prototype.getSortModel = function() {
      console.warn("AG Grid: as of version 24.0.0, getSortModel() is deprecated, sort information is now part of Column State. Please use columnApi.getColumnState() instead.");
      var columnState = this.columnModel.getColumnState();
      var filteredStates = columnState.filter(function(item) {
        return item.sort != null;
      });
      var indexes = {};
      filteredStates.forEach(function(state2) {
        var id = state2.colId;
        var sortIndex = state2.sortIndex;
        indexes[id] = sortIndex;
      });
      var res = filteredStates.map(function(s) {
        return { colId: s.colId, sort: s.sort };
      });
      res.sort(function(a, b) {
        return indexes[a.colId] - indexes[b.colId];
      });
      return res;
    };
    GridApi2.prototype.setFilterModel = function(model) {
      this.filterManager.setFilterModel(model);
    };
    GridApi2.prototype.getFilterModel = function() {
      return this.filterManager.getFilterModel();
    };
    GridApi2.prototype.getFocusedCell = function() {
      return this.focusService.getFocusedCell();
    };
    GridApi2.prototype.clearFocusedCell = function() {
      return this.focusService.clearFocusedCell();
    };
    GridApi2.prototype.setFocusedCell = function(rowIndex, colKey, floating) {
      this.focusService.setFocusedCell(rowIndex, colKey, floating, true);
    };
    GridApi2.prototype.setSuppressRowDrag = function(value) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_SUPPRESS_ROW_DRAG, value);
    };
    GridApi2.prototype.setSuppressMoveWhenRowDragging = function(value) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_SUPPRESS_MOVE_WHEN_ROW_DRAG, value);
    };
    GridApi2.prototype.setSuppressRowClickSelection = function(value) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_SUPPRESS_ROW_CLICK_SELECTION, value);
    };
    GridApi2.prototype.addRowDropZone = function(params2) {
      this.gridBodyCon.getRowDragFeature().addRowDropZone(params2);
    };
    GridApi2.prototype.removeRowDropZone = function(params2) {
      var activeDropTarget = this.dragAndDropService.findExternalZone(params2);
      if (activeDropTarget) {
        this.dragAndDropService.removeDropTarget(activeDropTarget);
      }
    };
    GridApi2.prototype.getRowDropZoneParams = function(events2) {
      return this.gridBodyCon.getRowDragFeature().getRowDropZone(events2);
    };
    GridApi2.prototype.setHeaderHeight = function(headerHeight) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_HEADER_HEIGHT, headerHeight);
    };
    GridApi2.prototype.setDomLayout = function(domLayout) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_DOM_LAYOUT, domLayout);
    };
    GridApi2.prototype.setEnableCellTextSelection = function(selectable) {
      this.gridBodyCon.setCellTextSelection(selectable);
    };
    GridApi2.prototype.setFillHandleDirection = function(direction) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_FILL_HANDLE_DIRECTION, direction);
    };
    GridApi2.prototype.setGroupHeaderHeight = function(headerHeight) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GROUP_HEADER_HEIGHT, headerHeight);
    };
    GridApi2.prototype.setFloatingFiltersHeight = function(headerHeight) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_FLOATING_FILTERS_HEIGHT, headerHeight);
    };
    GridApi2.prototype.setPivotGroupHeaderHeight = function(headerHeight) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PIVOT_GROUP_HEADER_HEIGHT, headerHeight);
    };
    GridApi2.prototype.setIsExternalFilterPresent = function(isExternalFilterPresentFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_EXTERNAL_FILTER_PRESENT, isExternalFilterPresentFunc);
    };
    GridApi2.prototype.setDoesExternalFilterPass = function(doesExternalFilterPassFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_DOES_EXTERNAL_FILTER_PASS, doesExternalFilterPassFunc);
    };
    GridApi2.prototype.setNavigateToNextCell = function(navigateToNextCellFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_NAVIGATE_TO_NEXT_CELL, navigateToNextCellFunc);
    };
    GridApi2.prototype.setTabToNextCell = function(tabToNextCellFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_TAB_TO_NEXT_CELL, tabToNextCellFunc);
    };
    GridApi2.prototype.setTabToNextHeader = function(tabToNextHeaderFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_TAB_TO_NEXT_HEADER, tabToNextHeaderFunc);
    };
    GridApi2.prototype.setNavigateToNextHeader = function(navigateToNextHeaderFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_NAVIGATE_TO_NEXT_HEADER, navigateToNextHeaderFunc);
    };
    GridApi2.prototype.setGroupRowAggNodes = function(groupRowAggNodesFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GROUP_ROW_AGG_NODES, groupRowAggNodesFunc);
    };
    GridApi2.prototype.setGetBusinessKeyForNode = function(getBusinessKeyForNodeFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_BUSINESS_KEY_FOR_NODE, getBusinessKeyForNodeFunc);
    };
    GridApi2.prototype.setGetChildCount = function(getChildCountFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_CHILD_COUNT, getChildCountFunc);
    };
    GridApi2.prototype.setProcessRowPostCreate = function(processRowPostCreateFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_ROW_POST_CREATE, processRowPostCreateFunc);
    };
    GridApi2.prototype.setGetRowNodeId = function(getRowNodeIdFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_ROW_NODE_ID, getRowNodeIdFunc);
    };
    GridApi2.prototype.setGetRowClass = function(rowClassFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_ROW_CLASS, rowClassFunc);
    };
    GridApi2.prototype.setIsFullWidthCell = function(isFullWidthCellFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_FULL_WIDTH_CELL, isFullWidthCellFunc);
    };
    GridApi2.prototype.setIsRowSelectable = function(isRowSelectableFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_ROW_SELECTABLE, isRowSelectableFunc);
    };
    GridApi2.prototype.setIsRowMaster = function(isRowMasterFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_ROW_MASTER, isRowMasterFunc);
    };
    GridApi2.prototype.setPostSort = function(postSortFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_POST_SORT, postSortFunc);
    };
    GridApi2.prototype.setGetDocument = function(getDocumentFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_DOCUMENT, getDocumentFunc);
    };
    GridApi2.prototype.setGetContextMenuItems = function(getContextMenuItemsFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_CONTEXT_MENU_ITEMS, getContextMenuItemsFunc);
    };
    GridApi2.prototype.setGetMainMenuItems = function(getMainMenuItemsFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_MAIN_MENU_ITEMS, getMainMenuItemsFunc);
    };
    GridApi2.prototype.setProcessCellForClipboard = function(processCellForClipboardFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_CELL_FOR_CLIPBOARD, processCellForClipboardFunc);
    };
    GridApi2.prototype.setSendToClipboard = function(sendToClipboardFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_SEND_TO_CLIPBOARD, sendToClipboardFunc);
    };
    GridApi2.prototype.setProcessCellFromClipboard = function(processCellFromClipboardFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_CELL_FROM_CLIPBOARD, processCellFromClipboardFunc);
    };
    GridApi2.prototype.setProcessSecondaryColDef = function(processSecondaryColDefFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_TO_SECONDARY_COLDEF, processSecondaryColDefFunc);
    };
    GridApi2.prototype.setProcessSecondaryColGroupDef = function(processSecondaryColGroupDefFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_SECONDARY_COL_GROUP_DEF, processSecondaryColGroupDefFunc);
    };
    GridApi2.prototype.setPostProcessPopup = function(postProcessPopupFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_POST_PROCESS_POPUP, postProcessPopupFunc);
    };
    GridApi2.prototype.setDefaultGroupOrderComparator = function(defaultGroupOrderComparatorFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_DEFAULT_GROUP_ORDER_COMPARATOR, defaultGroupOrderComparatorFunc);
    };
    GridApi2.prototype.setProcessChartOptions = function(processChartOptionsFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PROCESS_CHART_OPTIONS, processChartOptionsFunc);
    };
    GridApi2.prototype.setGetChartToolbarItems = function(getChartToolbarItemsFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_CHART_TOOLBAR_ITEMS, getChartToolbarItemsFunc);
    };
    GridApi2.prototype.setPaginationNumberFormatter = function(paginationNumberFormatterFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PAGINATION_NUMBER_FORMATTER, paginationNumberFormatterFunc);
    };
    GridApi2.prototype.setGetServerSideStoreParams = function(getServerSideStoreParamsFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_SERVER_SIDE_STORE_PARAMS, getServerSideStoreParamsFunc);
    };
    GridApi2.prototype.setIsServerSideGroupOpenByDefault = function(isServerSideGroupOpenByDefaultFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_SERVER_SIDE_GROUPS_OPEN_BY_DEFAULT, isServerSideGroupOpenByDefaultFunc);
    };
    GridApi2.prototype.setIsApplyServerSideTransaction = function(isApplyServerSideTransactionFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_APPLY_SERVER_SIDE_TRANSACTION, isApplyServerSideTransactionFunc);
    };
    GridApi2.prototype.setIsServerSideGroup = function(isServerSideGroupFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_IS_SERVER_SIDE_GROUP, isServerSideGroupFunc);
    };
    GridApi2.prototype.setGetServerSideGroupKey = function(getServerSideGroupKeyFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_SERVER_SIDE_GROUP_KEY, getServerSideGroupKeyFunc);
    };
    GridApi2.prototype.setGetRowStyle = function(rowStyleFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_ROW_STYLE, rowStyleFunc);
    };
    GridApi2.prototype.setGetRowHeight = function(rowHeightFunc) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GET_ROW_HEIGHT, rowHeightFunc);
    };
    GridApi2.prototype.setPivotHeaderHeight = function(headerHeight) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_PIVOT_HEADER_HEIGHT, headerHeight);
    };
    GridApi2.prototype.isSideBarVisible = function() {
      return this.sideBarComp ? this.sideBarComp.isDisplayed() : false;
    };
    GridApi2.prototype.setSideBarVisible = function(show) {
      if (!this.sideBarComp) {
        if (show) {
          console.warn("AG Grid: sideBar is not loaded");
        }
        return;
      }
      this.sideBarComp.setDisplayed(show);
    };
    GridApi2.prototype.setSideBarPosition = function(position) {
      if (!this.sideBarComp) {
        console.warn("AG Grid: sideBar is not loaded");
        return;
      }
      this.sideBarComp.setSideBarPosition(position);
    };
    GridApi2.prototype.openToolPanel = function(key) {
      if (!this.sideBarComp) {
        console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise");
        return;
      }
      this.sideBarComp.openToolPanel(key);
    };
    GridApi2.prototype.closeToolPanel = function() {
      if (!this.sideBarComp) {
        console.warn("AG Grid: toolPanel is only available in AG Grid Enterprise");
        return;
      }
      this.sideBarComp.close();
    };
    GridApi2.prototype.getOpenedToolPanel = function() {
      return this.sideBarComp ? this.sideBarComp.openedItem() : null;
    };
    GridApi2.prototype.getSideBar = function() {
      return this.gridOptionsWrapper.getSideBar();
    };
    GridApi2.prototype.setSideBar = function(def) {
      this.gridOptionsWrapper.setProperty("sideBar", SideBarDefParser.parse(def));
    };
    GridApi2.prototype.setSuppressClipboardPaste = function(value) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_SUPPRESS_CLIPBOARD_PASTE, value);
    };
    GridApi2.prototype.isToolPanelShowing = function() {
      return this.sideBarComp.isToolPanelShowing();
    };
    GridApi2.prototype.doLayout = function() {
      var message2 = "AG Grid - since version 25.1, doLayout was taken out, as it's not needed. The grid responds to grid size changes automatically";
      doOnce(function() {
        return console.warn(message2);
      }, "doLayoutDeprecated");
    };
    GridApi2.prototype.resetRowHeights = function() {
      if (exists(this.clientSideRowModel)) {
        this.clientSideRowModel.resetRowHeights();
      }
    };
    GridApi2.prototype.setGroupRemoveSingleChildren = function(value) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GROUP_REMOVE_SINGLE_CHILDREN, value);
    };
    GridApi2.prototype.setGroupRemoveLowestSingleChildren = function(value) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN, value);
    };
    GridApi2.prototype.onRowHeightChanged = function() {
      if (this.clientSideRowModel) {
        this.clientSideRowModel.onRowHeightChanged();
      } else if (this.serverSideRowModel) {
        this.serverSideRowModel.onRowHeightChanged();
      }
    };
    GridApi2.prototype.getValue = function(colKey, rowNode) {
      var column = this.columnModel.getPrimaryColumn(colKey);
      if (missing(column)) {
        column = this.columnModel.getGridColumn(colKey);
      }
      if (missing(column)) {
        return null;
      }
      return this.valueService.getValue(column, rowNode);
    };
    GridApi2.prototype.addEventListener = function(eventType, listener) {
      var async = this.gridOptionsWrapper.useAsyncEvents();
      this.eventService.addEventListener(eventType, listener, async);
    };
    GridApi2.prototype.addGlobalListener = function(listener) {
      var async = this.gridOptionsWrapper.useAsyncEvents();
      this.eventService.addGlobalListener(listener, async);
    };
    GridApi2.prototype.removeEventListener = function(eventType, listener) {
      var async = this.gridOptionsWrapper.useAsyncEvents();
      this.eventService.removeEventListener(eventType, listener, async);
    };
    GridApi2.prototype.removeGlobalListener = function(listener) {
      var async = this.gridOptionsWrapper.useAsyncEvents();
      this.eventService.removeGlobalListener(listener, async);
    };
    GridApi2.prototype.dispatchEvent = function(event) {
      this.eventService.dispatchEvent(event);
    };
    GridApi2.prototype.destroy = function() {
      if (this.destroyCalled) {
        return;
      }
      this.destroyCalled = true;
      var gridCtrl = this.ctrlsService.getGridCtrl();
      gridCtrl && gridCtrl.destroyGridUi();
      this.context.destroy();
    };
    GridApi2.prototype.cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid = function() {
      setTimeout(removeAllReferences.bind(window, this, "Grid API"), 100);
    };
    GridApi2.prototype.warnIfDestroyed = function(methodName) {
      if (this.destroyCalled) {
        console.warn("AG Grid: Grid API method " + methodName + " was called on a grid that was destroyed.");
      }
      return this.destroyCalled;
    };
    GridApi2.prototype.resetQuickFilter = function() {
      if (this.warnIfDestroyed("resetQuickFilter")) {
        return;
      }
      this.rowModel.forEachNode(function(node) {
        return node.quickFilterAggregateText = null;
      });
    };
    GridApi2.prototype.getRangeSelections = function() {
      console.warn("AG Grid: in v20.1.x, api.getRangeSelections() is gone, please use getCellRanges() instead.\n        We had to change how cell selections works a small bit to allow charting to integrate. The return type of\n        getCellRanges() is a bit different, please check the AG Grid documentation.");
      return null;
    };
    GridApi2.prototype.getCellRanges = function() {
      if (this.rangeService) {
        return this.rangeService.getCellRanges();
      }
      console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise");
      return null;
    };
    GridApi2.prototype.camelCaseToHumanReadable = function(camelCase) {
      return camelCaseToHumanText(camelCase);
    };
    GridApi2.prototype.addRangeSelection = function(deprecatedNoLongerUsed) {
      console.warn("AG Grid: As of version 21.x, range selection changed slightly to allow charting integration. Please call api.addCellRange() instead of api.addRangeSelection()");
    };
    GridApi2.prototype.addCellRange = function(params2) {
      if (!this.rangeService) {
        console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise");
      }
      this.rangeService.addCellRange(params2);
    };
    GridApi2.prototype.clearRangeSelection = function() {
      if (!this.rangeService) {
        console.warn("AG Grid: cell range selection is only available in AG Grid Enterprise");
      }
      this.rangeService.removeAllCellRanges();
    };
    GridApi2.prototype.undoCellEditing = function() {
      this.undoRedoService.undo();
    };
    GridApi2.prototype.redoCellEditing = function() {
      this.undoRedoService.redo();
    };
    GridApi2.prototype.getCurrentUndoSize = function() {
      return this.undoRedoService.getCurrentUndoStackSize();
    };
    GridApi2.prototype.getCurrentRedoSize = function() {
      return this.undoRedoService.getCurrentRedoStackSize();
    };
    GridApi2.prototype.getChartModels = function() {
      if (ModuleRegistry.assertRegistered(exports2.ModuleNames.RangeSelectionModule, "api.getChartModels") && ModuleRegistry.assertRegistered(exports2.ModuleNames.GridChartsModule, "api.getChartModels")) {
        return this.chartService.getChartModels();
      }
    };
    GridApi2.prototype.getChartRef = function(chartId) {
      if (ModuleRegistry.assertRegistered(exports2.ModuleNames.RangeSelectionModule, "api.getChartRef") && ModuleRegistry.assertRegistered(exports2.ModuleNames.GridChartsModule, "api.getChartRef")) {
        return this.chartService.getChartRef(chartId);
      }
    };
    GridApi2.prototype.getChartImageDataURL = function(params2) {
      if (ModuleRegistry.assertRegistered(exports2.ModuleNames.RangeSelectionModule, "api.getChartImageDataURL") && ModuleRegistry.assertRegistered(exports2.ModuleNames.GridChartsModule, "api.getChartImageDataURL")) {
        return this.chartService.getChartImageDataURL(params2);
      }
    };
    GridApi2.prototype.createRangeChart = function(params2) {
      if (ModuleRegistry.assertRegistered(exports2.ModuleNames.RangeSelectionModule, "api.createRangeChart") && ModuleRegistry.assertRegistered(exports2.ModuleNames.GridChartsModule, "api.createRangeChart")) {
        return this.chartService.createRangeChart(params2);
      }
    };
    GridApi2.prototype.createCrossFilterChart = function(params2) {
      if (ModuleRegistry.assertRegistered(exports2.ModuleNames.RangeSelectionModule, "api.createCrossFilterChart") && ModuleRegistry.assertRegistered(exports2.ModuleNames.GridChartsModule, "api.createCrossFilterChart")) {
        return this.chartService.createCrossFilterChart(params2);
      }
    };
    GridApi2.prototype.restoreChart = function(chartModel, chartContainer) {
      if (ModuleRegistry.assertRegistered(exports2.ModuleNames.RangeSelectionModule, "api.restoreChart") && ModuleRegistry.assertRegistered(exports2.ModuleNames.GridChartsModule, "api.restoreChart")) {
        return this.chartService.restoreChart(chartModel, chartContainer);
      }
    };
    GridApi2.prototype.createPivotChart = function(params2) {
      if (ModuleRegistry.assertRegistered(exports2.ModuleNames.RangeSelectionModule, "api.createPivotChart") && ModuleRegistry.assertRegistered(exports2.ModuleNames.GridChartsModule, "api.createPivotChart")) {
        return this.chartService.createPivotChart(params2);
      }
    };
    GridApi2.prototype.copySelectedRowsToClipboard = function(includeHeader, columnKeys) {
      if (!this.clipboardService) {
        console.warn("AG Grid: clipboard is only available in AG Grid Enterprise");
      }
      this.clipboardService.copySelectedRowsToClipboard(includeHeader, columnKeys);
    };
    GridApi2.prototype.copySelectedRangeToClipboard = function(includeHeader) {
      if (!this.clipboardService) {
        console.warn("AG Grid: clipboard is only available in AG Grid Enterprise");
      }
      this.clipboardService.copySelectedRangeToClipboard(includeHeader);
    };
    GridApi2.prototype.copySelectedRangeDown = function() {
      if (!this.clipboardService) {
        console.warn("AG Grid: clipboard is only available in AG Grid Enterprise");
      }
      this.clipboardService.copyRangeDown();
    };
    GridApi2.prototype.showColumnMenuAfterButtonClick = function(colKey, buttonElement) {
      var column = this.columnModel.getGridColumn(colKey);
      this.menuFactory.showMenuAfterButtonClick(column, buttonElement, "columnMenu");
    };
    GridApi2.prototype.showColumnMenuAfterMouseClick = function(colKey, mouseEvent) {
      var column = this.columnModel.getGridColumn(colKey);
      if (!column) {
        column = this.columnModel.getPrimaryColumn(colKey);
      }
      if (!column) {
        console.error("AG Grid: column '" + colKey + "' not found");
        return;
      }
      this.menuFactory.showMenuAfterMouseEvent(column, mouseEvent);
    };
    GridApi2.prototype.hidePopupMenu = function() {
      if (this.contextMenuFactory) {
        this.contextMenuFactory.hideActiveMenu();
      }
      this.menuFactory.hideActiveMenu();
    };
    GridApi2.prototype.setPopupParent = function(ePopupParent) {
      this.gridOptionsWrapper.setProperty(GridOptionsWrapper.PROP_POPUP_PARENT, ePopupParent);
    };
    GridApi2.prototype.tabToNextCell = function() {
      return this.navigationService.tabToNextCell(false);
    };
    GridApi2.prototype.tabToPreviousCell = function() {
      return this.navigationService.tabToNextCell(true);
    };
    GridApi2.prototype.getCellRendererInstances = function(params2) {
      if (params2 === void 0) {
        params2 = {};
      }
      return this.rowRenderer.getCellRendererInstances(params2);
    };
    GridApi2.prototype.getCellEditorInstances = function(params2) {
      if (params2 === void 0) {
        params2 = {};
      }
      return this.rowRenderer.getCellEditorInstances(params2);
    };
    GridApi2.prototype.getEditingCells = function() {
      return this.rowRenderer.getEditingCells();
    };
    GridApi2.prototype.stopEditing = function(cancel) {
      if (cancel === void 0) {
        cancel = false;
      }
      this.rowRenderer.stopEditing(cancel);
    };
    GridApi2.prototype.startEditingCell = function(params2) {
      var column = this.columnModel.getGridColumn(params2.colKey);
      if (!column) {
        console.warn("AG Grid: no column found for " + params2.colKey);
        return;
      }
      var cellPosition = {
        rowIndex: params2.rowIndex,
        rowPinned: params2.rowPinned || null,
        column
      };
      var notPinned = params2.rowPinned == null;
      if (notPinned) {
        this.gridBodyCon.getScrollFeature().ensureIndexVisible(params2.rowIndex);
      }
      var cell = this.navigationService.getCellByPosition(cellPosition);
      if (!cell) {
        return;
      }
      cell.startRowOrCellEdit(params2.keyPress, params2.charPress);
    };
    GridApi2.prototype.addAggFunc = function(key, aggFunc) {
      if (this.aggFuncService) {
        this.aggFuncService.addAggFunc(key, aggFunc);
      }
    };
    GridApi2.prototype.addAggFuncs = function(aggFuncs) {
      if (this.aggFuncService) {
        this.aggFuncService.addAggFuncs(aggFuncs);
      }
    };
    GridApi2.prototype.clearAggFuncs = function() {
      if (this.aggFuncService) {
        this.aggFuncService.clear();
      }
    };
    GridApi2.prototype.applyServerSideTransaction = function(transaction) {
      if (!this.serverSideTransactionManager) {
        console.warn("AG Grid: Cannot apply Server Side Transaction if not using the Server Side Row Model.");
        return;
      }
      return this.serverSideTransactionManager.applyTransaction(transaction);
    };
    GridApi2.prototype.applyServerSideTransactionAsync = function(transaction, callback) {
      if (!this.serverSideTransactionManager) {
        console.warn("AG Grid: Cannot apply Server Side Transaction if not using the Server Side Row Model.");
        return;
      }
      return this.serverSideTransactionManager.applyTransactionAsync(transaction, callback);
    };
    GridApi2.prototype.retryServerSideLoads = function() {
      if (!this.serverSideRowModel) {
        console.warn("AG Grid: API retryServerSideLoads() can only be used when using Server-Side Row Model.");
        return;
      }
      this.serverSideRowModel.retryLoads();
    };
    GridApi2.prototype.flushServerSideAsyncTransactions = function() {
      if (!this.serverSideTransactionManager) {
        console.warn("AG Grid: Cannot flush Server Side Transaction if not using the Server Side Row Model.");
        return;
      }
      return this.serverSideTransactionManager.flushAsyncTransactions();
    };
    GridApi2.prototype.applyTransaction = function(rowDataTransaction) {
      if (!this.clientSideRowModel) {
        console.error("AG Grid: updateRowData() only works with ClientSideRowModel. Working with InfiniteRowModel was deprecated in v23.1 and removed in v24.1");
        return;
      }
      var res = this.clientSideRowModel.updateRowData(rowDataTransaction);
      this.rowRenderer.refreshFullWidthRows(res.update);
      if (!this.gridOptionsWrapper.isSuppressChangeDetection()) {
        this.rowRenderer.refreshCells();
      }
      return res;
    };
    GridApi2.prototype.updateRowData = function(rowDataTransaction) {
      var message2 = "AG Grid: as of v23.1, grid API updateRowData(transaction) is now called applyTransaction(transaction). updateRowData is deprecated and will be removed in a future major release.";
      doOnce(function() {
        return console.warn(message2);
      }, "updateRowData deprecated");
      return this.applyTransaction(rowDataTransaction);
    };
    GridApi2.prototype.applyTransactionAsync = function(rowDataTransaction, callback) {
      if (!this.clientSideRowModel) {
        console.error("AG Grid: api.applyTransactionAsync() only works with ClientSideRowModel.");
        return;
      }
      this.clientSideRowModel.batchUpdateRowData(rowDataTransaction, callback);
    };
    GridApi2.prototype.flushAsyncTransactions = function() {
      if (!this.clientSideRowModel) {
        console.error("AG Grid: api.applyTransactionAsync() only works with ClientSideRowModel.");
        return;
      }
      this.clientSideRowModel.flushAsyncTransactions();
    };
    GridApi2.prototype.batchUpdateRowData = function(rowDataTransaction, callback) {
      var message2 = "AG Grid: as of v23.1, grid API batchUpdateRowData(transaction, callback) is now called applyTransactionAsync(transaction, callback). batchUpdateRowData is deprecated and will be removed in a future major release.";
      doOnce(function() {
        return console.warn(message2);
      }, "batchUpdateRowData deprecated");
      this.applyTransactionAsync(rowDataTransaction, callback);
    };
    GridApi2.prototype.insertItemsAtIndex = function(index, items, skipRefresh) {
      console.warn("AG Grid: insertItemsAtIndex() is deprecated, use updateRowData(transaction) instead.");
      this.updateRowData({ add: items, addIndex: index, update: null, remove: null });
    };
    GridApi2.prototype.removeItems = function(rowNodes, skipRefresh) {
      console.warn("AG Grid: removeItems() is deprecated, use updateRowData(transaction) instead.");
      var dataToRemove = rowNodes.map(function(rowNode) {
        return rowNode.data;
      });
      this.updateRowData({ add: null, addIndex: null, update: null, remove: dataToRemove });
    };
    GridApi2.prototype.addItems = function(items, skipRefresh) {
      console.warn("AG Grid: addItems() is deprecated, use updateRowData(transaction) instead.");
      this.updateRowData({ add: items, addIndex: null, update: null, remove: null });
    };
    GridApi2.prototype.refreshVirtualPageCache = function() {
      console.warn("AG Grid: refreshVirtualPageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead");
      this.refreshInfiniteCache();
    };
    GridApi2.prototype.refreshInfinitePageCache = function() {
      console.warn("AG Grid: refreshInfinitePageCache() is now called refreshInfiniteCache(), please call refreshInfiniteCache() instead");
      this.refreshInfiniteCache();
    };
    GridApi2.prototype.refreshInfiniteCache = function() {
      if (this.infiniteRowModel) {
        this.infiniteRowModel.refreshCache();
      } else {
        console.warn("AG Grid: api.refreshInfiniteCache is only available when rowModelType='infinite'.");
      }
    };
    GridApi2.prototype.purgeVirtualPageCache = function() {
      console.warn("AG Grid: purgeVirtualPageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead");
      this.purgeInfinitePageCache();
    };
    GridApi2.prototype.purgeInfinitePageCache = function() {
      console.warn("AG Grid: purgeInfinitePageCache() is now called purgeInfiniteCache(), please call purgeInfiniteCache() instead");
      this.purgeInfiniteCache();
    };
    GridApi2.prototype.purgeInfiniteCache = function() {
      if (this.infiniteRowModel) {
        this.infiniteRowModel.purgeCache();
      } else {
        console.warn("AG Grid: api.purgeInfiniteCache is only available when rowModelType='infinite'.");
      }
    };
    GridApi2.prototype.purgeEnterpriseCache = function(route) {
      console.warn("ag-grid: since version 18.x, api.purgeEnterpriseCache() should be replaced with api.purgeServerSideCache()");
      this.purgeServerSideCache(route);
    };
    GridApi2.prototype.purgeServerSideCache = function(route) {
      if (route === void 0) {
        route = [];
      }
      if (this.serverSideRowModel) {
        console.warn("AG Grid: since v25.0, api.purgeServerSideCache is deprecated. Please use api.refreshServerSideStore({purge: true}) instead.");
        this.refreshServerSideStore({
          route,
          purge: true
        });
      } else {
        console.warn("AG Grid: api.purgeServerSideCache is only available when rowModelType='serverSide'.");
      }
    };
    GridApi2.prototype.refreshServerSideStore = function(params2) {
      if (this.serverSideRowModel) {
        this.serverSideRowModel.refreshStore(params2);
      } else {
        console.warn("AG Grid: api.refreshServerSideStore is only available when rowModelType='serverSide'.");
      }
    };
    GridApi2.prototype.getServerSideStoreState = function() {
      if (this.serverSideRowModel) {
        return this.serverSideRowModel.getStoreState();
      } else {
        console.warn("AG Grid: api.getServerSideStoreState is only available when rowModelType='serverSide'.");
        return [];
      }
    };
    GridApi2.prototype.getVirtualRowCount = function() {
      console.warn("AG Grid: getVirtualRowCount() is now called getInfiniteRowCount(), please call getInfiniteRowCount() instead");
      return this.getInfiniteRowCount();
    };
    GridApi2.prototype.getInfiniteRowCount = function() {
      if (this.infiniteRowModel) {
        return this.infiniteRowModel.getRowCount();
      } else {
        console.warn("AG Grid: api.getVirtualRowCount is only available when rowModelType='virtual'.");
      }
    };
    GridApi2.prototype.isMaxRowFound = function() {
      console.warn("AG Grid: api.isLastRowIndexKnown is deprecated, please use api.isLastRowIndexKnown()");
      return this.isLastRowIndexKnown();
    };
    GridApi2.prototype.isLastRowIndexKnown = function() {
      if (this.infiniteRowModel) {
        return this.infiniteRowModel.isLastRowIndexKnown();
      } else {
        console.warn("AG Grid: api.isMaxRowFound is only available when rowModelType='virtual'.");
      }
    };
    GridApi2.prototype.setVirtualRowCount = function(rowCount, maxRowFound) {
      console.warn("AG Grid: setVirtualRowCount() is now called setInfiniteRowCount(), please call setInfiniteRowCount() instead");
      this.setRowCount(rowCount, maxRowFound);
    };
    GridApi2.prototype.setInfiniteRowCount = function(rowCount, maxRowFound) {
      console.warn("AG Grid: setInfiniteRowCount() is now called setRowCount(), please call setRowCount() instead");
      this.setRowCount(rowCount, maxRowFound);
    };
    GridApi2.prototype.setRowCount = function(rowCount, maxRowFound) {
      if (this.infiniteRowModel) {
        this.infiniteRowModel.setRowCount(rowCount, maxRowFound);
      } else {
        console.warn("AG Grid: api.setRowCount is only available for Infinite Row Model.");
      }
    };
    GridApi2.prototype.getVirtualPageState = function() {
      console.warn("AG Grid: getVirtualPageState() is now called getCacheBlockState(), please call getCacheBlockState() instead");
      return this.getCacheBlockState();
    };
    GridApi2.prototype.getInfinitePageState = function() {
      console.warn("AG Grid: getInfinitePageState() is now called getCacheBlockState(), please call getCacheBlockState() instead");
      return this.getCacheBlockState();
    };
    GridApi2.prototype.getCacheBlockState = function() {
      return this.rowNodeBlockLoader.getBlockState();
    };
    GridApi2.prototype.checkGridSize = function() {
      console.warn("in AG Grid v25.2.0, checkGridSize() was removed, as it was legacy and didn't do anything uesful.");
    };
    GridApi2.prototype.getFirstRenderedRow = function() {
      console.warn("in AG Grid v12, getFirstRenderedRow() was renamed to getFirstDisplayedRow()");
      return this.getFirstDisplayedRow();
    };
    GridApi2.prototype.getFirstDisplayedRow = function() {
      return this.rowRenderer.getFirstVirtualRenderedRow();
    };
    GridApi2.prototype.getLastRenderedRow = function() {
      console.warn("in AG Grid v12, getLastRenderedRow() was renamed to getLastDisplayedRow()");
      return this.getLastDisplayedRow();
    };
    GridApi2.prototype.getLastDisplayedRow = function() {
      return this.rowRenderer.getLastVirtualRenderedRow();
    };
    GridApi2.prototype.getDisplayedRowAtIndex = function(index) {
      return this.rowModel.getRow(index);
    };
    GridApi2.prototype.getDisplayedRowCount = function() {
      return this.rowModel.getRowCount();
    };
    GridApi2.prototype.paginationIsLastPageFound = function() {
      return this.paginationProxy.isLastPageFound();
    };
    GridApi2.prototype.paginationGetPageSize = function() {
      return this.paginationProxy.getPageSize();
    };
    GridApi2.prototype.paginationSetPageSize = function(size) {
      this.gridOptionsWrapper.setProperty("paginationPageSize", size);
    };
    GridApi2.prototype.paginationGetCurrentPage = function() {
      return this.paginationProxy.getCurrentPage();
    };
    GridApi2.prototype.paginationGetTotalPages = function() {
      return this.paginationProxy.getTotalPages();
    };
    GridApi2.prototype.paginationGetRowCount = function() {
      return this.paginationProxy.getMasterRowCount();
    };
    GridApi2.prototype.paginationGoToNextPage = function() {
      this.paginationProxy.goToNextPage();
    };
    GridApi2.prototype.paginationGoToPreviousPage = function() {
      this.paginationProxy.goToPreviousPage();
    };
    GridApi2.prototype.paginationGoToFirstPage = function() {
      this.paginationProxy.goToFirstPage();
    };
    GridApi2.prototype.paginationGoToLastPage = function() {
      this.paginationProxy.goToLastPage();
    };
    GridApi2.prototype.paginationGoToPage = function(page) {
      this.paginationProxy.goToPage(page);
    };
    __decorate$1i([
      Optional("immutableService")
    ], GridApi2.prototype, "immutableService", void 0);
    __decorate$1i([
      Optional("csvCreator")
    ], GridApi2.prototype, "csvCreator", void 0);
    __decorate$1i([
      Optional("excelCreator")
    ], GridApi2.prototype, "excelCreator", void 0);
    __decorate$1i([
      Autowired("rowRenderer")
    ], GridApi2.prototype, "rowRenderer", void 0);
    __decorate$1i([
      Autowired("navigationService")
    ], GridApi2.prototype, "navigationService", void 0);
    __decorate$1i([
      Autowired("filterManager")
    ], GridApi2.prototype, "filterManager", void 0);
    __decorate$1i([
      Autowired("columnModel")
    ], GridApi2.prototype, "columnModel", void 0);
    __decorate$1i([
      Autowired("selectionService")
    ], GridApi2.prototype, "selectionService", void 0);
    __decorate$1i([
      Autowired("gridOptionsWrapper")
    ], GridApi2.prototype, "gridOptionsWrapper", void 0);
    __decorate$1i([
      Autowired("valueService")
    ], GridApi2.prototype, "valueService", void 0);
    __decorate$1i([
      Autowired("alignedGridsService")
    ], GridApi2.prototype, "alignedGridsService", void 0);
    __decorate$1i([
      Autowired("eventService")
    ], GridApi2.prototype, "eventService", void 0);
    __decorate$1i([
      Autowired("pinnedRowModel")
    ], GridApi2.prototype, "pinnedRowModel", void 0);
    __decorate$1i([
      Autowired("context")
    ], GridApi2.prototype, "context", void 0);
    __decorate$1i([
      Autowired("rowModel")
    ], GridApi2.prototype, "rowModel", void 0);
    __decorate$1i([
      Autowired("sortController")
    ], GridApi2.prototype, "sortController", void 0);
    __decorate$1i([
      Autowired("paginationProxy")
    ], GridApi2.prototype, "paginationProxy", void 0);
    __decorate$1i([
      Autowired("focusService")
    ], GridApi2.prototype, "focusService", void 0);
    __decorate$1i([
      Autowired("dragAndDropService")
    ], GridApi2.prototype, "dragAndDropService", void 0);
    __decorate$1i([
      Optional("rangeService")
    ], GridApi2.prototype, "rangeService", void 0);
    __decorate$1i([
      Optional("clipboardService")
    ], GridApi2.prototype, "clipboardService", void 0);
    __decorate$1i([
      Optional("aggFuncService")
    ], GridApi2.prototype, "aggFuncService", void 0);
    __decorate$1i([
      Autowired("menuFactory")
    ], GridApi2.prototype, "menuFactory", void 0);
    __decorate$1i([
      Optional("contextMenuFactory")
    ], GridApi2.prototype, "contextMenuFactory", void 0);
    __decorate$1i([
      Autowired("valueCache")
    ], GridApi2.prototype, "valueCache", void 0);
    __decorate$1i([
      Autowired("animationFrameService")
    ], GridApi2.prototype, "animationFrameService", void 0);
    __decorate$1i([
      Optional("statusBarService")
    ], GridApi2.prototype, "statusBarService", void 0);
    __decorate$1i([
      Optional("chartService")
    ], GridApi2.prototype, "chartService", void 0);
    __decorate$1i([
      Optional("undoRedoService")
    ], GridApi2.prototype, "undoRedoService", void 0);
    __decorate$1i([
      Optional("rowNodeBlockLoader")
    ], GridApi2.prototype, "rowNodeBlockLoader", void 0);
    __decorate$1i([
      Optional("ssrmTransactionManager")
    ], GridApi2.prototype, "serverSideTransactionManager", void 0);
    __decorate$1i([
      Autowired("ctrlsService")
    ], GridApi2.prototype, "ctrlsService", void 0);
    __decorate$1i([
      PostConstruct
    ], GridApi2.prototype, "init", null);
    __decorate$1i([
      PreDestroy
    ], GridApi2.prototype, "cleanDownReferencesToAvoidMemoryLeakInCaseApplicationIsKeepingReferenceToDestroyedGrid", null);
    GridApi2 = __decorate$1i([
      Bean("gridApi")
    ], GridApi2);
    return GridApi2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1t = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1j = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param$5 = function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  var ExpressionService = function(_super) {
    __extends$1t(ExpressionService2, _super);
    function ExpressionService2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.expressionToFunctionCache = {};
      return _this;
    }
    ExpressionService2.prototype.setBeans = function(loggerFactory) {
      this.logger = loggerFactory.create("ExpressionService");
    };
    ExpressionService2.prototype.evaluate = function(expressionOrFunc, params2) {
      if (typeof expressionOrFunc === "function") {
        var func = expressionOrFunc;
        return func(params2);
      } else if (typeof expressionOrFunc === "string") {
        var expression = expressionOrFunc;
        return this.evaluateExpression(expression, params2);
      } else {
        console.error("AG Grid: value should be either a string or a function", expressionOrFunc);
      }
    };
    ExpressionService2.prototype.evaluateExpression = function(expression, params2) {
      try {
        var javaScriptFunction = this.createExpressionFunction(expression);
        var result = javaScriptFunction(params2.value, params2.context, params2.oldValue, params2.newValue, params2.value, params2.node, params2.data, params2.colDef, params2.rowIndex, params2.api, params2.columnApi, params2.getValue, params2.column, params2.columnGroup);
        return result;
      } catch (e) {
        console.log("Processing of the expression failed");
        console.log("Expression = " + expression);
        console.log("Params =", params2);
        console.log("Exception = " + e);
        return null;
      }
    };
    ExpressionService2.prototype.createExpressionFunction = function(expression) {
      if (this.expressionToFunctionCache[expression]) {
        return this.expressionToFunctionCache[expression];
      }
      var functionBody = this.createFunctionBody(expression);
      var theFunction = new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup", functionBody);
      this.expressionToFunctionCache[expression] = theFunction;
      return theFunction;
    };
    ExpressionService2.prototype.createFunctionBody = function(expression) {
      if (expression.indexOf("return") >= 0) {
        return expression;
      } else {
        return "return " + expression + ";";
      }
    };
    __decorate$1j([
      __param$5(0, Qualifier("loggerFactory"))
    ], ExpressionService2.prototype, "setBeans", null);
    ExpressionService2 = __decorate$1j([
      Bean("expressionService")
    ], ExpressionService2);
    return ExpressionService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1u = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1k = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var TemplateService = function(_super) {
    __extends$1u(TemplateService2, _super);
    function TemplateService2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.templateCache = {};
      _this.waitingCallbacks = {};
      return _this;
    }
    TemplateService2.prototype.getTemplate = function(url, callback) {
      var templateFromCache = this.templateCache[url];
      if (templateFromCache) {
        return templateFromCache;
      }
      var callbackList = this.waitingCallbacks[url];
      var that = this;
      if (!callbackList) {
        callbackList = [];
        this.waitingCallbacks[url] = callbackList;
        var client = new XMLHttpRequest();
        client.onload = function() {
          that.handleHttpResult(this, url);
        };
        client.open("GET", url);
        client.send();
      }
      if (callback) {
        callbackList.push(callback);
      }
      return null;
    };
    TemplateService2.prototype.handleHttpResult = function(httpResult, url) {
      if (httpResult.status !== 200 || httpResult.response === null) {
        console.warn("Unable to get template error " + httpResult.status + " - " + url);
        return;
      }
      this.templateCache[url] = httpResult.response || httpResult.responseText;
      var callbacks = this.waitingCallbacks[url];
      for (var i2 = 0; i2 < callbacks.length; i2++) {
        var callback = callbacks[i2];
        callback();
      }
      if (this.$scope) {
        var that_1 = this;
        window.setTimeout(function() {
          that_1.$scope.$apply();
        }, 0);
      }
    };
    __decorate$1k([
      Autowired("$scope")
    ], TemplateService2.prototype, "$scope", void 0);
    TemplateService2 = __decorate$1k([
      Bean("templateService")
    ], TemplateService2);
    return TemplateService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1v = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1l = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __spreadArrays$a = function() {
    for (var s = 0, i2 = 0, il = arguments.length; i2 < il; i2++)
      s += arguments[i2].length;
    for (var r = Array(s), k = 0, i2 = 0; i2 < il; i2++)
      for (var a = arguments[i2], j = 0, jl = a.length; j < jl; j++, k++)
        r[k] = a[j];
    return r;
  };
  var FocusService = function(_super) {
    __extends$1v(FocusService2, _super);
    function FocusService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    FocusService_1 = FocusService2;
    FocusService2.addKeyboardModeEvents = function(doc, controller) {
      var docControllers = FocusService_1.instancesMonitored.get(doc);
      if (docControllers && docControllers.length > 0) {
        if (docControllers.indexOf(controller) === -1) {
          docControllers.push(controller);
        }
      } else {
        FocusService_1.instancesMonitored.set(doc, [controller]);
        doc.addEventListener("keydown", FocusService_1.toggleKeyboardMode);
        doc.addEventListener("mousedown", FocusService_1.toggleKeyboardMode);
      }
    };
    FocusService2.removeKeyboardModeEvents = function(doc, controller) {
      var docControllers = FocusService_1.instancesMonitored.get(doc);
      var newControllers = [];
      if (docControllers && docControllers.length) {
        newControllers = __spreadArrays$a(docControllers).filter(function(currentGridCore) {
          return currentGridCore !== controller;
        });
        FocusService_1.instancesMonitored.set(doc, newControllers);
      }
      if (newControllers.length === 0) {
        doc.removeEventListener("keydown", FocusService_1.toggleKeyboardMode);
        doc.removeEventListener("mousedown", FocusService_1.toggleKeyboardMode);
      }
    };
    FocusService2.toggleKeyboardMode = function(event) {
      var isKeyboardActive = FocusService_1.keyboardModeActive;
      var isKeyboardEvent = event.type === "keydown";
      if (isKeyboardEvent) {
        if (event.ctrlKey || event.metaKey || event.altKey) {
          return;
        }
      }
      if (isKeyboardActive && isKeyboardEvent || !isKeyboardActive && !isKeyboardEvent) {
        return;
      }
      FocusService_1.keyboardModeActive = isKeyboardEvent;
      var doc = event.target.ownerDocument;
      if (!doc) {
        return;
      }
      var controllersForDoc = FocusService_1.instancesMonitored.get(doc);
      if (controllersForDoc) {
        controllersForDoc.forEach(function(controller) {
          controller.dispatchEvent({ type: isKeyboardEvent ? Events.EVENT_KEYBOARD_FOCUS : Events.EVENT_MOUSE_FOCUS });
        });
      }
    };
    FocusService2.prototype.init = function() {
      var _this = this;
      var clearFocusedCellListener = this.clearFocusedCell.bind(this);
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, clearFocusedCellListener);
      this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.onColumnEverythingChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_GROUP_OPENED, clearFocusedCellListener);
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, clearFocusedCellListener);
      this.ctrlsService.whenReady(function(p2) {
        _this.gridCtrl = p2.gridCtrl;
        var doc = _this.gridOptionsWrapper.getDocument();
        FocusService_1.addKeyboardModeEvents(doc, _this.gridCtrl);
        _this.addDestroyFunc(function() {
          return _this.unregisterGridCompController(_this.gridCtrl);
        });
      });
    };
    FocusService2.prototype.unregisterGridCompController = function(gridCompController) {
      var doc = this.gridOptionsWrapper.getDocument();
      FocusService_1.removeKeyboardModeEvents(doc, gridCompController);
    };
    FocusService2.prototype.onColumnEverythingChanged = function() {
      if (!this.focusedCellPosition) {
        return;
      }
      var col = this.focusedCellPosition.column;
      var colFromColumnModel = this.columnModel.getGridColumn(col.getId());
      if (col !== colFromColumnModel) {
        this.clearFocusedCell();
      }
    };
    FocusService2.prototype.isKeyboardMode = function() {
      return FocusService_1.keyboardModeActive;
    };
    FocusService2.prototype.getFocusCellToUseAfterRefresh = function() {
      if (this.gridOptionsWrapper.isSuppressFocusAfterRefresh() || !this.focusedCellPosition) {
        return null;
      }
      if (this.isDomDataMissingInHierarchy(document.activeElement, CellCtrl.DOM_DATA_KEY_CELL_CTRL)) {
        return null;
      }
      return this.focusedCellPosition;
    };
    FocusService2.prototype.getFocusHeaderToUseAfterRefresh = function() {
      if (this.gridOptionsWrapper.isSuppressFocusAfterRefresh() || !this.focusedHeaderPosition) {
        return null;
      }
      if (this.isDomDataMissingInHierarchy(document.activeElement, AbstractHeaderCellCtrl.DOM_DATA_KEY_HEADER_CTRL)) {
        return null;
      }
      return this.focusedHeaderPosition;
    };
    FocusService2.prototype.isDomDataMissingInHierarchy = function(eBrowserCell, key) {
      var ePointer = eBrowserCell;
      while (ePointer) {
        var data = this.gridOptionsWrapper.getDomData(ePointer, key);
        if (data) {
          return false;
        }
        ePointer = ePointer.parentNode;
      }
      return true;
    };
    FocusService2.prototype.clearFocusedCell = function() {
      this.focusedCellPosition = null;
      this.onCellFocused(false);
    };
    FocusService2.prototype.getFocusedCell = function() {
      return this.focusedCellPosition;
    };
    FocusService2.prototype.setFocusedCell = function(rowIndex, colKey, floating, forceBrowserFocus) {
      if (forceBrowserFocus === void 0) {
        forceBrowserFocus = false;
      }
      var gridColumn = this.columnModel.getGridColumn(colKey);
      if (!gridColumn) {
        this.focusedCellPosition = null;
        return;
      }
      this.focusedCellPosition = gridColumn ? { rowIndex, rowPinned: makeNull(floating), column: gridColumn } : null;
      this.onCellFocused(forceBrowserFocus);
    };
    FocusService2.prototype.isCellFocused = function(cellPosition) {
      if (this.focusedCellPosition == null) {
        return false;
      }
      return this.focusedCellPosition.column === cellPosition.column && this.isRowFocused(cellPosition.rowIndex, cellPosition.rowPinned);
    };
    FocusService2.prototype.isRowNodeFocused = function(rowNode) {
      return this.isRowFocused(rowNode.rowIndex, rowNode.rowPinned);
    };
    FocusService2.prototype.isHeaderWrapperFocused = function(headerCtrl) {
      if (this.focusedHeaderPosition == null) {
        return false;
      }
      var column = headerCtrl.getColumnGroupChild();
      var headerRowIndex = headerCtrl.getRowIndex();
      var pinned = headerCtrl.getPinned();
      var _a = this.focusedHeaderPosition, focusedColumn = _a.column, focusedHeaderRowIndex = _a.headerRowIndex;
      return column === focusedColumn && headerRowIndex === focusedHeaderRowIndex && pinned == focusedColumn.getPinned();
    };
    FocusService2.prototype.clearFocusedHeader = function() {
      this.focusedHeaderPosition = null;
    };
    FocusService2.prototype.getFocusedHeader = function() {
      return this.focusedHeaderPosition;
    };
    FocusService2.prototype.setFocusedHeader = function(headerRowIndex, column) {
      this.focusedHeaderPosition = { headerRowIndex, column };
    };
    FocusService2.prototype.focusHeaderPosition = function(headerPosition, direction, fromTab, allowUserOverride, event) {
      if (direction === void 0) {
        direction = null;
      }
      if (fromTab === void 0) {
        fromTab = false;
      }
      if (allowUserOverride === void 0) {
        allowUserOverride = false;
      }
      if (allowUserOverride) {
        var gridOptionsWrapper = this.gridOptionsWrapper;
        var currentPosition = this.getFocusedHeader();
        var headerRowCount = this.headerNavigationService.getHeaderRowCount();
        if (fromTab) {
          var userFunc = gridOptionsWrapper.getTabToNextHeaderFunc();
          if (userFunc) {
            var params2 = {
              backwards: direction === "Before",
              previousHeaderPosition: currentPosition,
              nextHeaderPosition: headerPosition,
              headerRowCount,
              api: gridOptionsWrapper.getApi(),
              columnApi: gridOptionsWrapper.getColumnApi()
            };
            headerPosition = userFunc(params2);
          }
        } else {
          var userFunc = gridOptionsWrapper.getNavigateToNextHeaderFunc();
          if (userFunc && event) {
            var params2 = {
              key: event.key,
              previousHeaderPosition: currentPosition,
              nextHeaderPosition: headerPosition,
              headerRowCount,
              event,
              api: gridOptionsWrapper.getApi(),
              columnApi: gridOptionsWrapper.getColumnApi()
            };
            headerPosition = userFunc(params2);
          }
        }
      }
      if (!headerPosition) {
        return false;
      }
      if (headerPosition.headerRowIndex === -1) {
        return this.focusGridView(headerPosition.column);
      }
      this.headerNavigationService.scrollToColumn(headerPosition.column, direction);
      var headerRowContainerCtrl = this.ctrlsService.getHeaderRowContainerCtrl(headerPosition.column.getPinned());
      var focusSuccess = headerRowContainerCtrl.focusHeader(headerPosition.headerRowIndex, headerPosition.column);
      return focusSuccess;
    };
    FocusService2.prototype.isAnyCellFocused = function() {
      return !!this.focusedCellPosition;
    };
    FocusService2.prototype.isRowFocused = function(rowIndex, floating) {
      if (this.focusedCellPosition == null) {
        return false;
      }
      return this.focusedCellPosition.rowIndex === rowIndex && this.focusedCellPosition.rowPinned === makeNull(floating);
    };
    FocusService2.prototype.findFocusableElements = function(rootNode, exclude, onlyUnmanaged) {
      if (onlyUnmanaged === void 0) {
        onlyUnmanaged = false;
      }
      var focusableString = Constants.FOCUSABLE_SELECTOR;
      var excludeString = Constants.FOCUSABLE_EXCLUDE;
      if (exclude) {
        excludeString += ", " + exclude;
      }
      if (onlyUnmanaged) {
        excludeString += ', [tabindex="-1"]';
      }
      var nodes = Array.prototype.slice.apply(rootNode.querySelectorAll(focusableString));
      var excludeNodes = Array.prototype.slice.apply(rootNode.querySelectorAll(excludeString));
      if (!excludeNodes.length) {
        return nodes;
      }
      var diff = function(a, b) {
        return a.filter(function(element2) {
          return b.indexOf(element2) === -1;
        });
      };
      return diff(nodes, excludeNodes);
    };
    FocusService2.prototype.focusInto = function(rootNode, up, onlyUnmanaged) {
      if (up === void 0) {
        up = false;
      }
      if (onlyUnmanaged === void 0) {
        onlyUnmanaged = false;
      }
      var focusableElements = this.findFocusableElements(rootNode, null, onlyUnmanaged);
      var toFocus = up ? last(focusableElements) : focusableElements[0];
      if (toFocus) {
        toFocus.focus();
        return true;
      }
      return false;
    };
    FocusService2.prototype.findNextFocusableElement = function(rootNode, onlyManaged, backwards) {
      var focusable = this.findFocusableElements(rootNode, onlyManaged ? ':not([tabindex="-1"])' : null);
      var currentIndex;
      if (onlyManaged) {
        currentIndex = findIndex(focusable, function(el) {
          return el.contains(document.activeElement);
        });
      } else {
        currentIndex = focusable.indexOf(document.activeElement);
      }
      var nextIndex = currentIndex + (backwards ? -1 : 1);
      if (nextIndex < 0 || nextIndex >= focusable.length) {
        return null;
      }
      return focusable[nextIndex];
    };
    FocusService2.prototype.isFocusUnderManagedComponent = function(rootNode) {
      var managedContainers = rootNode.querySelectorAll("." + ManagedFocusFeature.FOCUS_MANAGED_CLASS);
      if (!managedContainers.length) {
        return false;
      }
      for (var i2 = 0; i2 < managedContainers.length; i2++) {
        if (managedContainers[i2].contains(document.activeElement)) {
          return true;
        }
      }
      return false;
    };
    FocusService2.prototype.findTabbableParent = function(node, limit) {
      if (limit === void 0) {
        limit = 5;
      }
      var counter = 0;
      while (node && getTabIndex(node) === null && ++counter <= limit) {
        node = node.parentElement;
      }
      if (getTabIndex(node) === null) {
        return null;
      }
      return node;
    };
    FocusService2.prototype.onCellFocused = function(forceBrowserFocus) {
      var event = {
        type: Events.EVENT_CELL_FOCUSED,
        forceBrowserFocus,
        rowIndex: null,
        column: null,
        floating: null,
        api: this.gridApi,
        columnApi: this.columnApi,
        rowPinned: null,
        isFullWidthCell: false
      };
      if (this.focusedCellPosition) {
        var rowIndex = event.rowIndex = this.focusedCellPosition.rowIndex;
        var rowPinned = event.rowPinned = this.focusedCellPosition.rowPinned;
        event.column = this.focusedCellPosition.column;
        var rowCtrl = this.rowRenderer.getRowByPosition({ rowIndex, rowPinned });
        if (rowCtrl) {
          event.isFullWidthCell = rowCtrl.isFullWidth();
        }
      }
      this.eventService.dispatchEvent(event);
    };
    FocusService2.prototype.focusGridView = function(column, backwards) {
      var nextRow = backwards ? this.rowPositionUtils.getLastRow() : this.rowPositionUtils.getFirstRow();
      if (!nextRow) {
        return false;
      }
      var rowIndex = nextRow.rowIndex, rowPinned = nextRow.rowPinned;
      var focusedHeader = this.getFocusedHeader();
      if (!column && focusedHeader) {
        column = focusedHeader.column;
      }
      if (rowIndex == null || !column) {
        return false;
      }
      this.navigationService.ensureCellVisible({ rowIndex, column, rowPinned });
      this.setFocusedCell(rowIndex, column, makeNull(rowPinned), true);
      if (this.rangeService) {
        var cellPosition = { rowIndex, rowPinned, column };
        this.rangeService.setRangeToCell(cellPosition);
      }
      return true;
    };
    FocusService2.prototype.focusNextGridCoreContainer = function(backwards) {
      if (this.gridCtrl.focusNextInnerContainer(backwards)) {
        return true;
      }
      if (!backwards) {
        this.gridCtrl.forceFocusOutOfContainer();
      }
      return false;
    };
    var FocusService_1;
    FocusService2.AG_KEYBOARD_FOCUS = "ag-keyboard-focus";
    FocusService2.keyboardModeActive = false;
    FocusService2.instancesMonitored = new Map();
    __decorate$1l([
      Autowired("columnModel")
    ], FocusService2.prototype, "columnModel", void 0);
    __decorate$1l([
      Autowired("headerNavigationService")
    ], FocusService2.prototype, "headerNavigationService", void 0);
    __decorate$1l([
      Autowired("columnApi")
    ], FocusService2.prototype, "columnApi", void 0);
    __decorate$1l([
      Autowired("gridApi")
    ], FocusService2.prototype, "gridApi", void 0);
    __decorate$1l([
      Autowired("rowRenderer")
    ], FocusService2.prototype, "rowRenderer", void 0);
    __decorate$1l([
      Autowired("rowPositionUtils")
    ], FocusService2.prototype, "rowPositionUtils", void 0);
    __decorate$1l([
      Optional("rangeService")
    ], FocusService2.prototype, "rangeService", void 0);
    __decorate$1l([
      Autowired("navigationService")
    ], FocusService2.prototype, "navigationService", void 0);
    __decorate$1l([
      Autowired("ctrlsService")
    ], FocusService2.prototype, "ctrlsService", void 0);
    __decorate$1l([
      PostConstruct
    ], FocusService2.prototype, "init", null);
    FocusService2 = FocusService_1 = __decorate$1l([
      Bean("focusService")
    ], FocusService2);
    return FocusService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1w = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1m = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var DIRECTION;
  (function(DIRECTION2) {
    DIRECTION2[DIRECTION2["vertical"] = 0] = "vertical";
    DIRECTION2[DIRECTION2["horizontal"] = 1] = "horizontal";
  })(DIRECTION || (DIRECTION = {}));
  var instanceIdSeq = 0;
  var PopupService = function(_super) {
    __extends$1w(PopupService2, _super);
    function PopupService2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.popupList = [];
      return _this;
    }
    PopupService2.prototype.postConstruct = function() {
      var _this = this;
      this.ctrlsService.whenReady(function(p2) {
        _this.gridCtrl = p2.gridCtrl;
        _this.addManagedListener(_this.gridCtrl, Events.EVENT_KEYBOARD_FOCUS, function() {
          forEach(_this.popupList, function(popup) {
            return addCssClass(popup.element, FocusService.AG_KEYBOARD_FOCUS);
          });
        });
        _this.addManagedListener(_this.gridCtrl, Events.EVENT_MOUSE_FOCUS, function() {
          forEach(_this.popupList, function(popup) {
            return removeCssClass(popup.element, FocusService.AG_KEYBOARD_FOCUS);
          });
        });
      });
    };
    PopupService2.prototype.getPopupParent = function() {
      var ePopupParent = this.gridOptionsWrapper.getPopupParent();
      if (ePopupParent) {
        return ePopupParent;
      }
      return this.gridCtrl.getGui();
    };
    PopupService2.prototype.positionPopupForMenu = function(params2) {
      var sourceRect = params2.eventSource.getBoundingClientRect();
      var parentRect = this.getParentRect();
      var y = this.keepXYWithinBounds(params2.ePopup, sourceRect.top - parentRect.top, DIRECTION.vertical);
      var minWidth = params2.ePopup.clientWidth > 0 ? params2.ePopup.clientWidth : 200;
      params2.ePopup.style.minWidth = minWidth + "px";
      var widthOfParent = parentRect.right - parentRect.left;
      var maxX = widthOfParent - minWidth;
      var x;
      if (this.gridOptionsWrapper.isEnableRtl()) {
        x = xLeftPosition();
        if (x < 0) {
          x = xRightPosition();
        }
        if (x > maxX) {
          x = 0;
        }
      } else {
        x = xRightPosition();
        if (x > maxX) {
          x = xLeftPosition();
        }
        if (x < 0) {
          x = 0;
        }
      }
      params2.ePopup.style.left = x + "px";
      params2.ePopup.style.top = y + "px";
      function xRightPosition() {
        return sourceRect.right - parentRect.left - 2;
      }
      function xLeftPosition() {
        return sourceRect.left - parentRect.left - minWidth;
      }
    };
    PopupService2.prototype.positionPopupUnderMouseEvent = function(params2) {
      var ePopup = params2.ePopup, nudgeX = params2.nudgeX, nudgeY = params2.nudgeY;
      var _a = this.calculatePointerAlign(params2.mouseEvent), x = _a.x, y = _a.y;
      this.positionPopup({
        ePopup,
        x,
        y,
        nudgeX,
        nudgeY,
        keepWithinBounds: true
      });
      this.callPostProcessPopup(params2.type, params2.ePopup, null, params2.mouseEvent, params2.column, params2.rowNode);
    };
    PopupService2.prototype.calculatePointerAlign = function(e) {
      var parentRect = this.getParentRect();
      return {
        x: e.clientX - parentRect.left,
        y: e.clientY - parentRect.top
      };
    };
    PopupService2.prototype.positionPopupUnderComponent = function(params2) {
      var sourceRect = params2.eventSource.getBoundingClientRect();
      var alignSide = params2.alignSide || "left";
      var parentRect = this.getParentRect();
      var x = sourceRect.left - parentRect.left;
      if (alignSide === "right") {
        x -= params2.ePopup.offsetWidth - sourceRect.width;
      }
      this.positionPopup({
        ePopup: params2.ePopup,
        nudgeX: params2.nudgeX,
        nudgeY: params2.nudgeY,
        x,
        y: sourceRect.top - parentRect.top + sourceRect.height,
        keepWithinBounds: params2.keepWithinBounds
      });
      this.callPostProcessPopup(params2.type, params2.ePopup, params2.eventSource, null, params2.column, params2.rowNode);
    };
    PopupService2.prototype.positionPopupOverComponent = function(params2) {
      var sourceRect = params2.eventSource.getBoundingClientRect();
      var parentRect = this.getParentRect();
      this.positionPopup({
        ePopup: params2.ePopup,
        nudgeX: params2.nudgeX,
        nudgeY: params2.nudgeY,
        x: sourceRect.left - parentRect.left,
        y: sourceRect.top - parentRect.top,
        keepWithinBounds: params2.keepWithinBounds
      });
      this.callPostProcessPopup(params2.type, params2.ePopup, params2.eventSource, null, params2.column, params2.rowNode);
    };
    PopupService2.prototype.callPostProcessPopup = function(type, ePopup, eventSource, mouseEvent, column, rowNode) {
      var callback = this.gridOptionsWrapper.getPostProcessPopupFunc();
      if (callback) {
        var params2 = {
          column,
          rowNode,
          ePopup,
          type,
          eventSource,
          mouseEvent
        };
        callback(params2);
      }
    };
    PopupService2.prototype.positionPopup = function(params2) {
      var ePopup = params2.ePopup, keepWithinBounds = params2.keepWithinBounds, nudgeX = params2.nudgeX, nudgeY = params2.nudgeY;
      var x = params2.x, y = params2.y;
      if (nudgeX) {
        x += nudgeX;
      }
      if (nudgeY) {
        y += nudgeY;
      }
      if (keepWithinBounds) {
        x = this.keepXYWithinBounds(ePopup, x, DIRECTION.horizontal);
        y = this.keepXYWithinBounds(ePopup, y, DIRECTION.vertical);
      }
      ePopup.style.left = x + "px";
      ePopup.style.top = y + "px";
    };
    PopupService2.prototype.getActivePopups = function() {
      return this.popupList.map(function(popup) {
        return popup.element;
      });
    };
    PopupService2.prototype.getPopupList = function() {
      return this.popupList;
    };
    PopupService2.prototype.getParentRect = function() {
      var eDocument = this.gridOptionsWrapper.getDocument();
      var popupParent = this.getPopupParent();
      if (popupParent === eDocument.body) {
        popupParent = eDocument.documentElement;
      }
      var style = getComputedStyle(popupParent);
      var bounds = popupParent.getBoundingClientRect();
      return {
        top: bounds.top + parseFloat(style.borderTopWidth) || 0,
        left: bounds.left + parseFloat(style.borderLeftWidth) || 0,
        right: bounds.right + parseFloat(style.borderRightWidth) || 0,
        bottom: bounds.bottom + parseFloat(style.borderBottomWidth) || 0
      };
    };
    PopupService2.prototype.keepXYWithinBounds = function(ePopup, position, direction) {
      var isVertical = direction === DIRECTION.vertical;
      var sizeProperty = isVertical ? "clientHeight" : "clientWidth";
      var anchorProperty = isVertical ? "top" : "left";
      var offsetProperty = isVertical ? "offsetHeight" : "offsetWidth";
      var scrollPositionProperty = isVertical ? "scrollTop" : "scrollLeft";
      var eDocument = this.gridOptionsWrapper.getDocument();
      var docElement = eDocument.documentElement;
      var popupParent = this.getPopupParent();
      var parentRect = popupParent.getBoundingClientRect();
      var documentRect = eDocument.documentElement.getBoundingClientRect();
      var isBody = popupParent === eDocument.body;
      var offsetSize = ePopup[offsetProperty];
      var getSize = isVertical ? getAbsoluteHeight : getAbsoluteWidth;
      var sizeOfParent = isBody ? getSize(docElement) + docElement[scrollPositionProperty] : popupParent[sizeProperty];
      if (isBody) {
        sizeOfParent -= Math.abs(documentRect[anchorProperty] - parentRect[anchorProperty]);
      }
      var max = sizeOfParent - offsetSize;
      return Math.min(Math.max(position, 0), Math.abs(max));
    };
    PopupService2.prototype.keepPopupPositionedRelativeTo = function(params2) {
      var _this = this;
      var eParent = this.getPopupParent();
      var parentRect = eParent.getBoundingClientRect();
      var sourceRect = params2.element.getBoundingClientRect();
      var initialDiffTop = parentRect.top - sourceRect.top;
      var initialDiffLeft = parentRect.left - sourceRect.left;
      var lastDiffTop = initialDiffTop;
      var lastDiffLeft = initialDiffLeft;
      var topPx = params2.ePopup.style.top;
      var top = parseInt(topPx.substring(0, topPx.length - 1), 10);
      var leftPx = params2.ePopup.style.left;
      var left = parseInt(leftPx.substring(0, leftPx.length - 1), 10);
      return new AgPromise(function(resolve) {
        _this.getFrameworkOverrides().setInterval(function() {
          var pRect = eParent.getBoundingClientRect();
          var sRect = params2.element.getBoundingClientRect();
          var elementNotInDom = sRect.top == 0 && sRect.left == 0 && sRect.height == 0 && sRect.width == 0;
          if (elementNotInDom) {
            params2.hidePopup();
            return;
          }
          var currentDiffTop = pRect.top - sRect.top;
          if (currentDiffTop != lastDiffTop) {
            var newTop = _this.keepXYWithinBounds(params2.ePopup, top + initialDiffTop - currentDiffTop, DIRECTION.vertical);
            params2.ePopup.style.top = newTop + "px";
          }
          lastDiffTop = currentDiffTop;
          var currentDiffLeft = pRect.left - sRect.left;
          if (currentDiffLeft != lastDiffLeft) {
            var newLeft = _this.keepXYWithinBounds(params2.ePopup, left + initialDiffLeft - currentDiffLeft, DIRECTION.horizontal);
            params2.ePopup.style.left = newLeft + "px";
          }
          lastDiffLeft = currentDiffLeft;
        }, 200).then(function(intervalId) {
          var result = function() {
            if (intervalId != null) {
              window.clearInterval(intervalId);
            }
          };
          resolve(result);
        });
      });
    };
    PopupService2.prototype.addPopup = function(params2) {
      var _this = this;
      var modal = params2.modal, eChild = params2.eChild, closeOnEsc = params2.closeOnEsc, closedCallback = params2.closedCallback, click = params2.click, alwaysOnTop = params2.alwaysOnTop, afterGuiAttached = params2.afterGuiAttached, positionCallback = params2.positionCallback, anchorToElement = params2.anchorToElement, ariaLabel = params2.ariaLabel;
      var eDocument = this.gridOptionsWrapper.getDocument();
      var destroyPositionTracker = new AgPromise(function(resolve) {
        return resolve(function() {
        });
      });
      if (!eDocument) {
        console.warn("ag-grid: could not find the document, document is empty");
        return { hideFunc: function() {
        }, stopAnchoringPromise: destroyPositionTracker };
      }
      var pos = findIndex(this.popupList, function(popup2) {
        return popup2.element === eChild;
      });
      if (pos !== -1) {
        var popup = this.popupList[pos];
        return { hideFunc: popup.hideFunc, stopAnchoringPromise: popup.stopAnchoringPromise };
      }
      var ePopupParent = this.getPopupParent();
      if (eChild.style.top == null) {
        eChild.style.top = "0px";
      }
      if (eChild.style.left == null) {
        eChild.style.left = "0px";
      }
      var eWrapper = document.createElement("div");
      var theme = this.environment.getTheme().theme;
      if (theme) {
        addCssClass(eWrapper, theme);
      }
      addCssClass(eWrapper, "ag-popup");
      addCssClass(eChild, this.gridOptionsWrapper.isEnableRtl() ? "ag-rtl" : "ag-ltr");
      addCssClass(eChild, "ag-popup-child");
      setAriaRole(eChild, "dialog");
      setAriaLabel(eChild, ariaLabel);
      if (this.focusService.isKeyboardMode()) {
        addCssClass(eChild, FocusService.AG_KEYBOARD_FOCUS);
      }
      eWrapper.appendChild(eChild);
      ePopupParent.appendChild(eWrapper);
      if (alwaysOnTop) {
        this.setAlwaysOnTop(eWrapper, true);
      } else {
        this.bringPopupToFront(eWrapper);
      }
      var popupHidden = false;
      var hidePopupOnKeyboardEvent = function(event) {
        if (!eWrapper.contains(document.activeElement)) {
          return;
        }
        var key = event.which || event.keyCode;
        if (key === KeyCode.ESCAPE) {
          hidePopup({ keyboardEvent: event });
        }
      };
      var hidePopupOnMouseEvent = function(event) {
        return hidePopup({ mouseEvent: event });
      };
      var hidePopupOnTouchEvent = function(event) {
        return hidePopup({ touchEvent: event });
      };
      var hidePopup = function(popupParams) {
        if (popupParams === void 0) {
          popupParams = {};
        }
        var mouseEvent = popupParams.mouseEvent, touchEvent = popupParams.touchEvent, keyboardEvent = popupParams.keyboardEvent;
        if (_this.isEventFromCurrentPopup({ mouseEvent, touchEvent }, eChild) || _this.isEventSameChainAsOriginalEvent({ originalMouseEvent: click, mouseEvent, touchEvent }) || popupHidden) {
          return;
        }
        popupHidden = true;
        ePopupParent.removeChild(eWrapper);
        eDocument.removeEventListener("keydown", hidePopupOnKeyboardEvent);
        eDocument.removeEventListener("mousedown", hidePopupOnMouseEvent);
        eDocument.removeEventListener("touchstart", hidePopupOnTouchEvent);
        eDocument.removeEventListener("contextmenu", hidePopupOnMouseEvent);
        _this.eventService.removeEventListener(Events.EVENT_DRAG_STARTED, hidePopupOnMouseEvent);
        if (closedCallback) {
          closedCallback(mouseEvent || touchEvent || keyboardEvent);
        }
        _this.popupList = _this.popupList.filter(function(popup2) {
          return popup2.element !== eChild;
        });
        if (destroyPositionTracker) {
          destroyPositionTracker.then(function(destroyFunc) {
            return destroyFunc && destroyFunc();
          });
        }
      };
      if (afterGuiAttached) {
        afterGuiAttached({ hidePopup });
      }
      window.setTimeout(function() {
        if (closeOnEsc) {
          eDocument.addEventListener("keydown", hidePopupOnKeyboardEvent);
        }
        if (modal) {
          eDocument.addEventListener("mousedown", hidePopupOnMouseEvent);
          _this.eventService.addEventListener(Events.EVENT_DRAG_STARTED, hidePopupOnMouseEvent);
          eDocument.addEventListener("touchstart", hidePopupOnTouchEvent);
          eDocument.addEventListener("contextmenu", hidePopupOnMouseEvent);
        }
      }, 0);
      if (positionCallback) {
        positionCallback();
      }
      if (anchorToElement) {
        destroyPositionTracker = this.keepPopupPositionedRelativeTo({
          element: anchorToElement,
          ePopup: eChild,
          hidePopup
        });
      }
      this.popupList.push({
        element: eChild,
        wrapper: eWrapper,
        hideFunc: hidePopup,
        stopAnchoringPromise: destroyPositionTracker,
        instanceId: instanceIdSeq++,
        isAnchored: !!anchorToElement
      });
      return {
        hideFunc: hidePopup,
        stopAnchoringPromise: destroyPositionTracker
      };
    };
    PopupService2.prototype.hasAnchoredPopup = function() {
      return some(this.popupList, function(popup) {
        return popup.isAnchored;
      });
    };
    PopupService2.prototype.isEventFromCurrentPopup = function(params2, target) {
      var mouseEvent = params2.mouseEvent, touchEvent = params2.touchEvent;
      var event = mouseEvent ? mouseEvent : touchEvent;
      if (!event) {
        return false;
      }
      var indexOfThisChild = findIndex(this.popupList, function(popup2) {
        return popup2.element === target;
      });
      if (indexOfThisChild === -1) {
        return false;
      }
      for (var i2 = indexOfThisChild; i2 < this.popupList.length; i2++) {
        var popup = this.popupList[i2];
        if (isElementInEventPath(popup.element, event)) {
          return true;
        }
      }
      return this.isElementWithinCustomPopup(event.target);
    };
    PopupService2.prototype.isElementWithinCustomPopup = function(el) {
      if (!this.popupList.length) {
        return false;
      }
      while (el && el !== document.body) {
        if (el.classList.contains("ag-custom-component-popup") || el.parentElement === null) {
          return true;
        }
        el = el.parentElement;
      }
      return false;
    };
    PopupService2.prototype.isEventSameChainAsOriginalEvent = function(params2) {
      var originalMouseEvent = params2.originalMouseEvent, mouseEvent = params2.mouseEvent, touchEvent = params2.touchEvent;
      var mouseEventOrTouch = null;
      if (mouseEvent) {
        mouseEventOrTouch = mouseEvent;
      } else if (touchEvent) {
        mouseEventOrTouch = touchEvent.touches[0];
      }
      if (mouseEventOrTouch && originalMouseEvent) {
        var screenX_1 = mouseEvent ? mouseEvent.screenX : 0;
        var screenY_1 = mouseEvent ? mouseEvent.screenY : 0;
        var xMatch = Math.abs(originalMouseEvent.screenX - screenX_1) < 5;
        var yMatch = Math.abs(originalMouseEvent.screenY - screenY_1) < 5;
        if (xMatch && yMatch) {
          return true;
        }
      }
      return false;
    };
    PopupService2.prototype.getWrapper = function(ePopup) {
      while (!containsClass(ePopup, "ag-popup") && ePopup.parentElement) {
        ePopup = ePopup.parentElement;
      }
      return containsClass(ePopup, "ag-popup") ? ePopup : null;
    };
    PopupService2.prototype.setAlwaysOnTop = function(ePopup, alwaysOnTop) {
      var eWrapper = this.getWrapper(ePopup);
      if (!eWrapper) {
        return;
      }
      addOrRemoveCssClass(eWrapper, "ag-always-on-top", !!alwaysOnTop);
      if (alwaysOnTop) {
        this.bringPopupToFront(eWrapper);
      }
    };
    PopupService2.prototype.bringPopupToFront = function(ePopup) {
      var parent = this.getPopupParent();
      var popupList = Array.prototype.slice.call(parent.querySelectorAll(".ag-popup"));
      var popupLen = popupList.length;
      var alwaysOnTopList = Array.prototype.slice.call(parent.querySelectorAll(".ag-popup.ag-always-on-top"));
      var onTopLength = alwaysOnTopList.length;
      var eWrapper = this.getWrapper(ePopup);
      if (!eWrapper || popupLen <= 1 || !parent.contains(ePopup)) {
        return;
      }
      var pos = popupList.indexOf(eWrapper);
      if (onTopLength) {
        var isPopupAlwaysOnTop = containsClass(eWrapper, "ag-always-on-top");
        if (isPopupAlwaysOnTop) {
          if (pos !== popupLen - 1) {
            last(alwaysOnTopList).insertAdjacentElement("afterend", eWrapper);
          }
        } else if (pos !== popupLen - onTopLength - 1) {
          alwaysOnTopList[0].insertAdjacentElement("beforebegin", eWrapper);
        }
      } else if (pos !== popupLen - 1) {
        last(popupList).insertAdjacentElement("afterend", eWrapper);
      }
      var params2 = {
        type: "popupToFront",
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        eWrapper
      };
      this.eventService.dispatchEvent(params2);
    };
    __decorate$1m([
      Autowired("environment")
    ], PopupService2.prototype, "environment", void 0);
    __decorate$1m([
      Autowired("focusService")
    ], PopupService2.prototype, "focusService", void 0);
    __decorate$1m([
      Autowired("ctrlsService")
    ], PopupService2.prototype, "ctrlsService", void 0);
    __decorate$1m([
      PostConstruct
    ], PopupService2.prototype, "postConstruct", null);
    PopupService2 = __decorate$1m([
      Bean("popupService")
    ], PopupService2);
    return PopupService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1x = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1n = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param$6 = function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  var LoggerFactory = function(_super) {
    __extends$1x(LoggerFactory2, _super);
    function LoggerFactory2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    LoggerFactory2.prototype.setBeans = function(gridOptionsWrapper) {
      this.logging = gridOptionsWrapper.isDebug();
    };
    LoggerFactory2.prototype.create = function(name) {
      return new Logger(name, this.isLogging.bind(this));
    };
    LoggerFactory2.prototype.isLogging = function() {
      return this.logging;
    };
    __decorate$1n([
      __param$6(0, Qualifier("gridOptionsWrapper"))
    ], LoggerFactory2.prototype, "setBeans", null);
    LoggerFactory2 = __decorate$1n([
      Bean("loggerFactory")
    ], LoggerFactory2);
    return LoggerFactory2;
  }(BeanStub);
  var Logger = function() {
    function Logger2(name, isLoggingFunc) {
      this.name = name;
      this.isLoggingFunc = isLoggingFunc;
    }
    Logger2.prototype.isLogging = function() {
      return this.isLoggingFunc();
    };
    Logger2.prototype.log = function(message2) {
      if (this.isLoggingFunc()) {
        console.log("AG Grid." + this.name + ": " + message2);
      }
    };
    return Logger2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1y = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1o = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AutoWidthCalculator = function(_super) {
    __extends$1y(AutoWidthCalculator2, _super);
    function AutoWidthCalculator2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    AutoWidthCalculator2.prototype.postConstruct = function() {
      var _this = this;
      this.ctrlsService.whenReady(function(p2) {
        _this.centerRowContainerCon = p2.centerRowContainerCtrl;
      });
    };
    AutoWidthCalculator2.prototype.getPreferredWidthForColumn = function(column, skipHeader) {
      var eHeaderCell = this.getHeaderCellForColumn(column);
      if (!eHeaderCell) {
        return -1;
      }
      var eDummyContainer = document.createElement("span");
      eDummyContainer.style.position = "fixed";
      var eBodyContainer = this.centerRowContainerCon.getContainerElement();
      eBodyContainer.appendChild(eDummyContainer);
      this.putRowCellsIntoDummyContainer(column, eDummyContainer);
      if (!skipHeader) {
        this.cloneItemIntoDummy(eHeaderCell, eDummyContainer);
      }
      var dummyContainerWidth = eDummyContainer.offsetWidth;
      eBodyContainer.removeChild(eDummyContainer);
      var autoSizePadding = this.gridOptionsWrapper.getAutoSizePadding();
      return dummyContainerWidth + autoSizePadding;
    };
    AutoWidthCalculator2.prototype.getHeaderCellForColumn = function(column) {
      var element2 = null;
      this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(container) {
        var res = container.getHtmlElementForColumnHeader(column);
        if (res != null) {
          element2 = res;
        }
      });
      return element2;
    };
    AutoWidthCalculator2.prototype.putRowCellsIntoDummyContainer = function(column, eDummyContainer) {
      var _this = this;
      var eCellElements = this.rowRenderer.getAllCellsForColumn(column);
      eCellElements.forEach(function(eCell) {
        return _this.cloneItemIntoDummy(eCell, eDummyContainer);
      });
    };
    AutoWidthCalculator2.prototype.cloneItemIntoDummy = function(eCell, eDummyContainer) {
      var eCellClone = eCell.cloneNode(true);
      eCellClone.style.width = "";
      eCellClone.style.position = "static";
      eCellClone.style.left = "";
      var eCloneParent = document.createElement("div");
      if (containsClass(eCellClone, "ag-header-cell")) {
        addCssClass(eCloneParent, "ag-header");
        addCssClass(eCloneParent, "ag-header-row");
        eCloneParent.style.position = "static";
      } else {
        addCssClass(eCloneParent, "ag-row");
      }
      var pointer = eCell.parentElement;
      while (pointer) {
        if (pointer.classList.contains("ag-header-row") || pointer.classList.contains("ag-row")) {
          pointer.classList.forEach(function(item) {
            if (item != "ag-row-position-absolute") {
              addCssClass(eCloneParent, item);
            }
          });
          break;
        }
        pointer = pointer.parentElement;
      }
      eCloneParent.style.display = "table-row";
      eCloneParent.appendChild(eCellClone);
      eDummyContainer.appendChild(eCloneParent);
    };
    __decorate$1o([
      Autowired("rowRenderer")
    ], AutoWidthCalculator2.prototype, "rowRenderer", void 0);
    __decorate$1o([
      Autowired("ctrlsService")
    ], AutoWidthCalculator2.prototype, "ctrlsService", void 0);
    __decorate$1o([
      Autowired("rowCssClassCalculator")
    ], AutoWidthCalculator2.prototype, "rowCssClassCalculator", void 0);
    __decorate$1o([
      PostConstruct
    ], AutoWidthCalculator2.prototype, "postConstruct", null);
    AutoWidthCalculator2 = __decorate$1o([
      Bean("autoWidthCalculator")
    ], AutoWidthCalculator2);
    return AutoWidthCalculator2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1z = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1p = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var HorizontalResizeService = function(_super) {
    __extends$1z(HorizontalResizeService2, _super);
    function HorizontalResizeService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    HorizontalResizeService2.prototype.addResizeBar = function(params2) {
      var _this = this;
      var dragSource = {
        dragStartPixels: params2.dragStartPixels || 0,
        eElement: params2.eResizeBar,
        onDragStart: this.onDragStart.bind(this, params2),
        onDragStop: this.onDragStop.bind(this, params2),
        onDragging: this.onDragging.bind(this, params2)
      };
      this.dragService.addDragSource(dragSource, true);
      var finishedWithResizeFunc = function() {
        return _this.dragService.removeDragSource(dragSource);
      };
      return finishedWithResizeFunc;
    };
    HorizontalResizeService2.prototype.onDragStart = function(params2, mouseEvent) {
      this.dragStartX = mouseEvent.clientX;
      this.setResizeIcons();
      var shiftKey = mouseEvent instanceof MouseEvent && mouseEvent.shiftKey === true;
      params2.onResizeStart(shiftKey);
    };
    HorizontalResizeService2.prototype.setResizeIcons = function() {
      var ctrl = this.ctrlsService.getGridCtrl();
      ctrl.setResizeCursor(true);
      ctrl.disableUserSelect(true);
    };
    HorizontalResizeService2.prototype.onDragStop = function(params2, mouseEvent) {
      params2.onResizeEnd(this.resizeAmount);
      this.resetIcons();
    };
    HorizontalResizeService2.prototype.resetIcons = function() {
      var ctrl = this.ctrlsService.getGridCtrl();
      ctrl.setResizeCursor(false);
      ctrl.disableUserSelect(false);
    };
    HorizontalResizeService2.prototype.onDragging = function(params2, mouseEvent) {
      this.resizeAmount = mouseEvent.clientX - this.dragStartX;
      params2.onResizing(this.resizeAmount);
    };
    __decorate$1p([
      Autowired("dragService")
    ], HorizontalResizeService2.prototype, "dragService", void 0);
    __decorate$1p([
      Autowired("ctrlsService")
    ], HorizontalResizeService2.prototype, "ctrlsService", void 0);
    HorizontalResizeService2 = __decorate$1p([
      Bean("horizontalResizeService")
    ], HorizontalResizeService2);
    return HorizontalResizeService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1A = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1q = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var GridCtrl = function(_super) {
    __extends$1A(GridCtrl2, _super);
    function GridCtrl2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    GridCtrl2.prototype.postConstruct = function() {
      this.ctrlsService.registerGridCtrl(this);
    };
    GridCtrl2.prototype.setComp = function(view, eGridDiv, eGui) {
      var _this = this;
      this.view = view;
      this.eGridHostDiv = eGridDiv;
      this.eGui = eGui;
      this.mouseEventService.stampTopLevelGridCompWithGridInstance(eGridDiv);
      this.createManagedBean(new LayoutFeature(this.view));
      this.addRtlSupport();
      this.addManagedListener(this, Events.EVENT_KEYBOARD_FOCUS, function() {
        _this.view.addOrRemoveKeyboardFocusClass(true);
      });
      this.addManagedListener(this, Events.EVENT_MOUSE_FOCUS, function() {
        _this.view.addOrRemoveKeyboardFocusClass(false);
      });
      var unsubscribeFromResize = this.resizeObserverService.observeResize(this.eGridHostDiv, this.onGridSizeChanged.bind(this));
      this.addDestroyFunc(function() {
        return unsubscribeFromResize();
      });
    };
    GridCtrl2.prototype.showDropZones = function() {
      return ModuleRegistry.isRegistered(exports2.ModuleNames.RowGroupingModule);
    };
    GridCtrl2.prototype.showSideBar = function() {
      return ModuleRegistry.isRegistered(exports2.ModuleNames.SideBarModule);
    };
    GridCtrl2.prototype.showStatusBar = function() {
      return ModuleRegistry.isRegistered(exports2.ModuleNames.StatusBarModule);
    };
    GridCtrl2.prototype.showWatermark = function() {
      return ModuleRegistry.isRegistered(exports2.ModuleNames.EnterpriseCoreModule);
    };
    GridCtrl2.prototype.onGridSizeChanged = function() {
      var event = {
        type: Events.EVENT_GRID_SIZE_CHANGED,
        api: this.gridApi,
        columnApi: this.columnApi,
        clientWidth: this.eGridHostDiv.clientWidth,
        clientHeight: this.eGridHostDiv.clientHeight
      };
      this.eventService.dispatchEvent(event);
    };
    GridCtrl2.prototype.addRtlSupport = function() {
      var cssClass = this.gridOptionsWrapper.isEnableRtl() ? "ag-rtl" : "ag-ltr";
      this.view.setRtlClass(cssClass);
    };
    GridCtrl2.prototype.destroyGridUi = function() {
      this.view.destroyGridUi();
    };
    GridCtrl2.prototype.getGui = function() {
      return this.eGui;
    };
    GridCtrl2.prototype.setResizeCursor = function(on) {
      this.view.setCursor(on ? "ew-resize" : null);
    };
    GridCtrl2.prototype.disableUserSelect = function(on) {
      this.view.setUserSelect(on ? "none" : null);
    };
    GridCtrl2.prototype.focusNextInnerContainer = function(backwards) {
      var focusableContainers = this.view.getFocusableContainers();
      var idxWithFocus = findIndex(focusableContainers, function(container) {
        return container.contains(document.activeElement);
      });
      var nextIdx = idxWithFocus + (backwards ? -1 : 1);
      if (nextIdx < 0 || nextIdx >= focusableContainers.length) {
        return false;
      }
      if (nextIdx === 0) {
        return this.focusGridHeader();
      }
      return this.focusService.focusInto(focusableContainers[nextIdx]);
    };
    GridCtrl2.prototype.focusInnerElement = function(fromBottom) {
      var focusableContainers = this.view.getFocusableContainers();
      if (fromBottom) {
        if (focusableContainers.length > 1) {
          return this.focusService.focusInto(last(focusableContainers), true);
        }
        var lastColumn = last(this.columnModel.getAllDisplayedColumns());
        if (this.focusService.focusGridView(lastColumn, true)) {
          return true;
        }
      }
      return this.focusGridHeader();
    };
    GridCtrl2.prototype.focusGridHeader = function() {
      var firstColumn = this.columnModel.getAllDisplayedColumns()[0];
      if (!firstColumn) {
        return false;
      }
      if (firstColumn.getParent()) {
        firstColumn = this.columnModel.getColumnGroupAtLevel(firstColumn, 0);
      }
      this.focusService.focusHeaderPosition({ headerRowIndex: 0, column: firstColumn });
      return true;
    };
    GridCtrl2.prototype.forceFocusOutOfContainer = function(up) {
      if (up === void 0) {
        up = false;
      }
      this.view.forceFocusOutOfContainer(up);
    };
    __decorate$1q([
      Autowired("columnApi")
    ], GridCtrl2.prototype, "columnApi", void 0);
    __decorate$1q([
      Autowired("gridApi")
    ], GridCtrl2.prototype, "gridApi", void 0);
    __decorate$1q([
      Autowired("focusService")
    ], GridCtrl2.prototype, "focusService", void 0);
    __decorate$1q([
      Autowired("resizeObserverService")
    ], GridCtrl2.prototype, "resizeObserverService", void 0);
    __decorate$1q([
      Autowired("columnModel")
    ], GridCtrl2.prototype, "columnModel", void 0);
    __decorate$1q([
      Autowired("ctrlsService")
    ], GridCtrl2.prototype, "ctrlsService", void 0);
    __decorate$1q([
      Autowired("mouseEventService")
    ], GridCtrl2.prototype, "mouseEventService", void 0);
    __decorate$1q([
      PostConstruct
    ], GridCtrl2.prototype, "postConstruct", null);
    return GridCtrl2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1B = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1r = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var TabGuardCtrl = function(_super) {
    __extends$1B(TabGuardCtrl2, _super);
    function TabGuardCtrl2(params2) {
      var _this = _super.call(this) || this;
      _this.skipTabGuardFocus = false;
      var comp = params2.comp, eTopGuard = params2.eTopGuard, eBottomGuard = params2.eBottomGuard, focusInnerElement = params2.focusInnerElement, onFocusIn = params2.onFocusIn, onFocusOut = params2.onFocusOut, shouldStopEventPropagation = params2.shouldStopEventPropagation, onTabKeyDown = params2.onTabKeyDown, handleKeyDown = params2.handleKeyDown, eFocusableElement = params2.eFocusableElement;
      _this.comp = comp;
      _this.eTopGuard = eTopGuard;
      _this.eBottomGuard = eBottomGuard;
      _this.providedFocusInnerElement = focusInnerElement;
      _this.eFocusableElement = eFocusableElement;
      _this.providedFocusIn = onFocusIn;
      _this.providedFocusOut = onFocusOut;
      _this.providedShouldStopEventPropagation = shouldStopEventPropagation;
      _this.providedOnTabKeyDown = onTabKeyDown;
      _this.providedHandleKeyDown = handleKeyDown;
      return _this;
    }
    TabGuardCtrl2.prototype.postConstruct = function() {
      var _this = this;
      this.createManagedBean(new ManagedFocusFeature(this.eFocusableElement, {
        shouldStopEventPropagation: function() {
          return _this.shouldStopEventPropagation();
        },
        onTabKeyDown: function(e) {
          return _this.onTabKeyDown(e);
        },
        handleKeyDown: function(e) {
          return _this.handleKeyDown(e);
        },
        onFocusIn: function(e) {
          return _this.onFocusIn(e);
        },
        onFocusOut: function(e) {
          return _this.onFocusOut(e);
        }
      }));
      this.activateTabGuards();
      [this.eTopGuard, this.eBottomGuard].forEach(function(guard) {
        return _this.addManagedListener(guard, "focus", _this.onFocus.bind(_this));
      });
    };
    TabGuardCtrl2.prototype.handleKeyDown = function(e) {
      if (this.providedHandleKeyDown) {
        this.providedHandleKeyDown(e);
      }
    };
    TabGuardCtrl2.prototype.tabGuardsAreActive = function() {
      return !!this.eTopGuard && this.eTopGuard.hasAttribute("tabIndex");
    };
    TabGuardCtrl2.prototype.shouldStopEventPropagation = function() {
      if (this.providedShouldStopEventPropagation) {
        return this.providedShouldStopEventPropagation();
      }
      return false;
    };
    TabGuardCtrl2.prototype.activateTabGuards = function() {
      this.comp.setTabIndex(this.getGridTabIndex());
    };
    TabGuardCtrl2.prototype.deactivateTabGuards = function() {
      this.comp.setTabIndex();
    };
    TabGuardCtrl2.prototype.onFocus = function(e) {
      if (this.skipTabGuardFocus) {
        this.skipTabGuardFocus = false;
        return;
      }
      var fromBottom = e.target === this.eBottomGuard;
      if (this.providedFocusInnerElement) {
        this.providedFocusInnerElement(fromBottom);
      } else {
        this.focusInnerElement(fromBottom);
      }
    };
    TabGuardCtrl2.prototype.onFocusIn = function(e) {
      if (this.providedFocusIn && this.providedFocusIn(e)) {
        return;
      }
      this.deactivateTabGuards();
    };
    TabGuardCtrl2.prototype.onFocusOut = function(e) {
      if (this.providedFocusOut && this.providedFocusOut(e)) {
        return;
      }
      if (!this.eFocusableElement.contains(e.relatedTarget)) {
        this.activateTabGuards();
      }
    };
    TabGuardCtrl2.prototype.onTabKeyDown = function(e) {
      var _this = this;
      if (this.providedOnTabKeyDown) {
        this.providedOnTabKeyDown(e);
        return;
      }
      if (e.defaultPrevented) {
        return;
      }
      var tabGuardsAreActive = this.tabGuardsAreActive();
      if (tabGuardsAreActive) {
        this.deactivateTabGuards();
      }
      var nextRoot = this.getNextFocusableElement(e.shiftKey);
      if (tabGuardsAreActive) {
        setTimeout(function() {
          return _this.activateTabGuards();
        }, 0);
      }
      if (!nextRoot) {
        return;
      }
      nextRoot.focus();
      e.preventDefault();
    };
    TabGuardCtrl2.prototype.getGridTabIndex = function() {
      return this.gridOptionsWrapper.getGridTabIndex();
    };
    TabGuardCtrl2.prototype.focusInnerElement = function(fromBottom) {
      if (fromBottom === void 0) {
        fromBottom = false;
      }
      var focusable = this.focusService.findFocusableElements(this.eFocusableElement);
      if (this.tabGuardsAreActive()) {
        focusable.splice(0, 1);
        focusable.splice(focusable.length - 1, 1);
      }
      if (!focusable.length) {
        return;
      }
      focusable[fromBottom ? focusable.length - 1 : 0].focus();
    };
    TabGuardCtrl2.prototype.getNextFocusableElement = function(backwards) {
      return this.focusService.findNextFocusableElement(this.eFocusableElement, false, backwards);
    };
    TabGuardCtrl2.prototype.forceFocusOutOfContainer = function(up) {
      if (up === void 0) {
        up = false;
      }
      var tabGuardToFocus = up ? this.eTopGuard : this.eBottomGuard;
      this.activateTabGuards();
      this.skipTabGuardFocus = true;
      tabGuardToFocus.focus();
    };
    __decorate$1r([
      Autowired("focusService")
    ], TabGuardCtrl2.prototype, "focusService", void 0);
    __decorate$1r([
      PostConstruct
    ], TabGuardCtrl2.prototype, "postConstruct", null);
    return TabGuardCtrl2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1C = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var TabGuardComp = function(_super) {
    __extends$1C(TabGuardComp2, _super);
    function TabGuardComp2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    TabGuardComp2.prototype.initialiseTabGuard = function(params2) {
      this.eTopGuard = this.createTabGuard("top");
      this.eBottomGuard = this.createTabGuard("bottom");
      this.eFocusableElement = this.getFocusableElement();
      var tabGuards = [this.eTopGuard, this.eBottomGuard];
      var compProxy = {
        setTabIndex: function(tabIndex) {
          tabGuards.forEach(function(tabGuard) {
            return tabIndex != null ? tabGuard.setAttribute("tabIndex", tabIndex) : tabGuard.removeAttribute("tabIndex");
          });
        }
      };
      this.addTabGuards(this.eTopGuard, this.eBottomGuard);
      this.tabGuardCtrl = this.createManagedBean(new TabGuardCtrl({
        comp: compProxy,
        eTopGuard: this.eTopGuard,
        eBottomGuard: this.eBottomGuard,
        eFocusableElement: this.eFocusableElement,
        onFocusIn: params2.onFocusIn,
        onFocusOut: params2.onFocusOut,
        focusInnerElement: params2.focusInnerElement,
        handleKeyDown: params2.handleKeyDown,
        onTabKeyDown: params2.onTabKeyDown,
        shouldStopEventPropagation: params2.shouldStopEventPropagation
      }));
    };
    TabGuardComp2.prototype.createTabGuard = function(side) {
      var tabGuard = document.createElement("div");
      tabGuard.classList.add("ag-tab-guard");
      tabGuard.classList.add("ag-tab-guard-" + side);
      setAriaRole(tabGuard, "presentation");
      return tabGuard;
    };
    TabGuardComp2.prototype.addTabGuards = function(topTabGuard, bottomTabGuard) {
      this.eFocusableElement.insertAdjacentElement("afterbegin", topTabGuard);
      this.eFocusableElement.insertAdjacentElement("beforeend", bottomTabGuard);
    };
    TabGuardComp2.prototype.removeAllChildrenExceptTabGuards = function() {
      var tabGuards = [this.eTopGuard, this.eBottomGuard];
      clearElement(this.getFocusableElement());
      this.addTabGuards.apply(this, tabGuards);
    };
    TabGuardComp2.prototype.forceFocusOutOfContainer = function(up) {
      if (up === void 0) {
        up = false;
      }
      this.tabGuardCtrl.forceFocusOutOfContainer(up);
    };
    TabGuardComp2.prototype.appendChild = function(newChild, container) {
      if (!isNodeOrElement(newChild)) {
        newChild = newChild.getGui();
      }
      var bottomTabGuard = this.eBottomGuard;
      if (bottomTabGuard) {
        bottomTabGuard.insertAdjacentElement("beforebegin", newChild);
      } else {
        _super.prototype.appendChild.call(this, newChild, container);
      }
    };
    return TabGuardComp2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1D = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1s = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var GridComp = function(_super) {
    __extends$1D(GridComp2, _super);
    function GridComp2(eGridDiv) {
      var _this = _super.call(this, void 0) || this;
      _this.eGridDiv = eGridDiv;
      return _this;
    }
    GridComp2.prototype.postConstruct = function() {
      var _this = this;
      this.logger = this.loggerFactory.create("GridComp");
      var compProxy = {
        destroyGridUi: function() {
          return _this.destroyBean(_this);
        },
        setRtlClass: function(cssClass) {
          return addCssClass(_this.getGui(), cssClass);
        },
        addOrRemoveKeyboardFocusClass: function(addOrRemove) {
          return _this.addOrRemoveCssClass(FocusService.AG_KEYBOARD_FOCUS, addOrRemove);
        },
        forceFocusOutOfContainer: this.forceFocusOutOfContainer.bind(this),
        updateLayoutClasses: this.updateLayoutClasses.bind(this),
        getFocusableContainers: this.getFocusableContainers.bind(this),
        setUserSelect: function(value) {
          _this.getGui().style.userSelect = value != null ? value : "";
          _this.getGui().style.webkitUserSelect = value != null ? value : "";
        },
        setCursor: function(value) {
          _this.getGui().style.cursor = value != null ? value : "";
        }
      };
      this.ctrl = this.createManagedBean(new GridCtrl());
      var template = this.createTemplate();
      this.setTemplate(template);
      this.ctrl.setComp(compProxy, this.eGridDiv, this.getGui());
      this.insertGridIntoDom();
      this.initialiseTabGuard({
        onTabKeyDown: function() {
          return void 0;
        },
        focusInnerElement: function(fromBottom) {
          return _this.ctrl.focusInnerElement(fromBottom);
        }
      });
    };
    GridComp2.prototype.insertGridIntoDom = function() {
      var _this = this;
      var eGui = this.getGui();
      this.eGridDiv.appendChild(eGui);
      this.addDestroyFunc(function() {
        _this.eGridDiv.removeChild(eGui);
        _this.logger.log("Grid removed from DOM");
      });
    };
    GridComp2.prototype.updateLayoutClasses = function(cssClass, params2) {
      addOrRemoveCssClass(this.eRootWrapperBody, exports2.LayoutCssClasses.AUTO_HEIGHT, params2.autoHeight);
      addOrRemoveCssClass(this.eRootWrapperBody, exports2.LayoutCssClasses.NORMAL, params2.normal);
      addOrRemoveCssClass(this.eRootWrapperBody, exports2.LayoutCssClasses.PRINT, params2.print);
      this.addOrRemoveCssClass(exports2.LayoutCssClasses.AUTO_HEIGHT, params2.autoHeight);
      this.addOrRemoveCssClass(exports2.LayoutCssClasses.NORMAL, params2.normal);
      this.addOrRemoveCssClass(exports2.LayoutCssClasses.PRINT, params2.print);
    };
    GridComp2.prototype.createTemplate = function() {
      var dropZones = this.ctrl.showDropZones() ? "<ag-grid-header-drop-zones></ag-grid-header-drop-zones>" : "";
      var sideBar = this.ctrl.showSideBar() ? '<ag-side-bar ref="sideBar"></ag-side-bar>' : "";
      var statusBar = this.ctrl.showStatusBar() ? '<ag-status-bar ref="statusBar"></ag-status-bar>' : "";
      var watermark = this.ctrl.showWatermark() ? "<ag-watermark></ag-watermark>" : "";
      var template = '<div class="ag-root-wrapper">\n                ' + dropZones + '\n                <div class="ag-root-wrapper-body" ref="rootWrapperBody">\n                    <ag-grid-body ref="gridBody"></ag-grid-body>\n                    ' + sideBar + "\n                </div>\n                " + statusBar + "\n                <ag-pagination></ag-pagination>\n                " + watermark + "\n            </div>";
      return template;
    };
    GridComp2.prototype.getFocusableElement = function() {
      return this.eRootWrapperBody;
    };
    GridComp2.prototype.getFocusableContainers = function() {
      var focusableContainers = [
        this.gridBodyComp.getGui()
      ];
      if (this.sideBarComp) {
        focusableContainers.push(this.sideBarComp.getGui());
      }
      return focusableContainers.filter(function(el) {
        return isVisible(el);
      });
    };
    __decorate$1s([
      Autowired("loggerFactory")
    ], GridComp2.prototype, "loggerFactory", void 0);
    __decorate$1s([
      RefSelector("gridBody")
    ], GridComp2.prototype, "gridBodyComp", void 0);
    __decorate$1s([
      RefSelector("sideBar")
    ], GridComp2.prototype, "sideBarComp", void 0);
    __decorate$1s([
      RefSelector("rootWrapperBody")
    ], GridComp2.prototype, "eRootWrapperBody", void 0);
    __decorate$1s([
      PostConstruct
    ], GridComp2.prototype, "postConstruct", null);
    return GridComp2;
  }(TabGuardComp);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1E = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1t = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var DragService = function(_super) {
    __extends$1E(DragService2, _super);
    function DragService2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.dragEndFunctions = [];
      _this.dragSources = [];
      return _this;
    }
    DragService2.prototype.init = function() {
      this.logger = this.loggerFactory.create("DragService");
    };
    DragService2.prototype.removeAllListeners = function() {
      this.dragSources.forEach(this.removeListener.bind(this));
      this.dragSources.length = 0;
    };
    DragService2.prototype.removeListener = function(dragSourceAndListener) {
      var element2 = dragSourceAndListener.dragSource.eElement;
      var mouseDownListener = dragSourceAndListener.mouseDownListener;
      element2.removeEventListener("mousedown", mouseDownListener);
      if (dragSourceAndListener.touchEnabled) {
        var touchStartListener = dragSourceAndListener.touchStartListener;
        element2.removeEventListener("touchstart", touchStartListener, { passive: true });
      }
    };
    DragService2.prototype.removeDragSource = function(params2) {
      var dragSourceAndListener = find(this.dragSources, function(item) {
        return item.dragSource === params2;
      });
      if (!dragSourceAndListener) {
        return;
      }
      this.removeListener(dragSourceAndListener);
      removeFromArray(this.dragSources, dragSourceAndListener);
    };
    DragService2.prototype.isDragging = function() {
      return this.dragging;
    };
    DragService2.prototype.addDragSource = function(params2, includeTouch) {
      var _this = this;
      if (includeTouch === void 0) {
        includeTouch = false;
      }
      var mouseListener = this.onMouseDown.bind(this, params2);
      params2.eElement.addEventListener("mousedown", mouseListener);
      var touchListener = null;
      var suppressTouch = this.gridOptionsWrapper.isSuppressTouch();
      if (includeTouch && !suppressTouch) {
        touchListener = function(touchEvent) {
          touchEvent.preventDefault();
          _this.onTouchStart(params2, touchEvent);
        };
        params2.eElement.addEventListener("touchstart", touchListener, { passive: true });
      }
      this.dragSources.push({
        dragSource: params2,
        mouseDownListener: mouseListener,
        touchStartListener: touchListener,
        touchEnabled: includeTouch
      });
    };
    DragService2.prototype.onTouchStart = function(params2, touchEvent) {
      var _this = this;
      this.currentDragParams = params2;
      this.dragging = false;
      var touch = touchEvent.touches[0];
      this.touchLastTime = touch;
      this.touchStart = touch;
      var touchMoveEvent = function(e) {
        return _this.onTouchMove(e, params2.eElement);
      };
      var touchEndEvent = function(e) {
        return _this.onTouchUp(e, params2.eElement);
      };
      var documentTouchMove = function(e) {
        if (e.cancelable) {
          e.preventDefault();
        }
      };
      var target = params2.eElement;
      var events2 = [
        { target: document, type: "touchmove", listener: documentTouchMove, options: { passive: false } },
        { target, type: "touchmove", listener: touchMoveEvent, options: { passive: true } },
        { target, type: "touchend", listener: touchEndEvent, options: { passive: true } },
        { target, type: "touchcancel", listener: touchEndEvent, options: { passive: true } }
      ];
      this.addTemporaryEvents(events2);
      if (params2.dragStartPixels === 0) {
        this.onCommonMove(touch, this.touchStart, params2.eElement);
      }
    };
    DragService2.prototype.onMouseDown = function(params2, mouseEvent) {
      var _this = this;
      var e = mouseEvent;
      if (params2.skipMouseEvent && params2.skipMouseEvent(mouseEvent)) {
        return;
      }
      if (e._alreadyProcessedByDragService) {
        return;
      }
      e._alreadyProcessedByDragService = true;
      if (mouseEvent.button !== 0) {
        return;
      }
      this.currentDragParams = params2;
      this.dragging = false;
      this.mouseStartEvent = mouseEvent;
      var eDocument = this.gridOptionsWrapper.getDocument();
      var mouseMoveEvent = function(event) {
        return _this.onMouseMove(event, params2.eElement);
      };
      var mouseUpEvent = function(event) {
        return _this.onMouseUp(event, params2.eElement);
      };
      var contextEvent = function(event) {
        return event.preventDefault();
      };
      var target = eDocument;
      var events2 = [
        { target, type: "mousemove", listener: mouseMoveEvent },
        { target, type: "mouseup", listener: mouseUpEvent },
        { target, type: "contextmenu", listener: contextEvent }
      ];
      this.addTemporaryEvents(events2);
      if (params2.dragStartPixels === 0) {
        this.onMouseMove(mouseEvent, params2.eElement);
      }
    };
    DragService2.prototype.addTemporaryEvents = function(events2) {
      events2.forEach(function(currentEvent) {
        var target = currentEvent.target, type = currentEvent.type, listener = currentEvent.listener, options = currentEvent.options;
        target.addEventListener(type, listener, options);
      });
      this.dragEndFunctions.push(function() {
        events2.forEach(function(currentEvent) {
          var target = currentEvent.target, type = currentEvent.type, listener = currentEvent.listener, options = currentEvent.options;
          target.removeEventListener(type, listener, options);
        });
      });
    };
    DragService2.prototype.isEventNearStartEvent = function(currentEvent, startEvent) {
      var dragStartPixels = this.currentDragParams.dragStartPixels;
      var requiredPixelDiff = exists(dragStartPixels) ? dragStartPixels : 4;
      return areEventsNear(currentEvent, startEvent, requiredPixelDiff);
    };
    DragService2.prototype.getFirstActiveTouch = function(touchList) {
      for (var i2 = 0; i2 < touchList.length; i2++) {
        if (touchList[i2].identifier === this.touchStart.identifier) {
          return touchList[i2];
        }
      }
      return null;
    };
    DragService2.prototype.onCommonMove = function(currentEvent, startEvent, el) {
      if (!this.dragging) {
        if (!this.dragging && this.isEventNearStartEvent(currentEvent, startEvent)) {
          return;
        }
        this.dragging = true;
        var event_1 = {
          type: Events.EVENT_DRAG_STARTED,
          api: this.gridApi,
          columnApi: this.columnApi,
          target: el
        };
        this.eventService.dispatchEvent(event_1);
        this.currentDragParams.onDragStart(startEvent);
        this.currentDragParams.onDragging(startEvent);
      }
      this.currentDragParams.onDragging(currentEvent);
    };
    DragService2.prototype.onTouchMove = function(touchEvent, el) {
      var touch = this.getFirstActiveTouch(touchEvent.touches);
      if (!touch) {
        return;
      }
      this.onCommonMove(touch, this.touchStart, el);
    };
    DragService2.prototype.onMouseMove = function(mouseEvent, el) {
      this.onCommonMove(mouseEvent, this.mouseStartEvent, el);
    };
    DragService2.prototype.onTouchUp = function(touchEvent, el) {
      var touch = this.getFirstActiveTouch(touchEvent.changedTouches);
      if (!touch) {
        touch = this.touchLastTime;
      }
      this.onUpCommon(touch, el);
    };
    DragService2.prototype.onMouseUp = function(mouseEvent, el) {
      this.onUpCommon(mouseEvent, el);
    };
    DragService2.prototype.onUpCommon = function(eventOrTouch, el) {
      if (this.dragging) {
        this.dragging = false;
        this.currentDragParams.onDragStop(eventOrTouch);
        var event_2 = {
          type: Events.EVENT_DRAG_STOPPED,
          api: this.gridApi,
          columnApi: this.columnApi,
          target: el
        };
        this.eventService.dispatchEvent(event_2);
      }
      this.mouseStartEvent = null;
      this.touchStart = null;
      this.touchLastTime = null;
      this.currentDragParams = null;
      this.dragEndFunctions.forEach(function(func) {
        return func();
      });
      this.dragEndFunctions.length = 0;
    };
    __decorate$1t([
      Autowired("loggerFactory")
    ], DragService2.prototype, "loggerFactory", void 0);
    __decorate$1t([
      Autowired("columnApi")
    ], DragService2.prototype, "columnApi", void 0);
    __decorate$1t([
      Autowired("gridApi")
    ], DragService2.prototype, "gridApi", void 0);
    __decorate$1t([
      PostConstruct
    ], DragService2.prototype, "init", null);
    __decorate$1t([
      PreDestroy
    ], DragService2.prototype, "removeAllListeners", null);
    DragService2 = __decorate$1t([
      Bean("dragService")
    ], DragService2);
    return DragService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1F = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1u = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var SortController = function(_super) {
    __extends$1F(SortController2, _super);
    function SortController2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    SortController_1 = SortController2;
    SortController2.prototype.progressSort = function(column, multiSort, source) {
      if (source === void 0) {
        source = "api";
      }
      var nextDirection = this.getNextSortDirection(column);
      this.setSortForColumn(column, nextDirection, multiSort, source);
    };
    SortController2.prototype.setSortForColumn = function(column, sort, multiSort, source) {
      if (source === void 0) {
        source = "api";
      }
      if (sort !== Constants.SORT_ASC && sort !== Constants.SORT_DESC) {
        sort = null;
      }
      column.setSort(sort, source);
      var doingMultiSort = multiSort && !this.gridOptionsWrapper.isSuppressMultiSort();
      if (!doingMultiSort) {
        this.clearSortBarThisColumn(column, source);
      }
      this.updateSortIndex(column);
      this.dispatchSortChangedEvents();
    };
    SortController2.prototype.updateSortIndex = function(lastColToChange) {
      var allSortedCols = this.getColumnsWithSortingOrdered();
      var sortIndex = 0;
      allSortedCols.forEach(function(col) {
        if (col !== lastColToChange) {
          col.setSortIndex(sortIndex);
          sortIndex++;
        }
      });
      if (lastColToChange.getSort()) {
        lastColToChange.setSortIndex(sortIndex);
      }
      var allCols = this.columnModel.getPrimaryAndSecondaryAndAutoColumns();
      allCols.filter(function(col) {
        return col.getSort() == null;
      }).forEach(function(col) {
        return col.setSortIndex();
      });
    };
    SortController2.prototype.onSortChanged = function() {
      this.dispatchSortChangedEvents();
    };
    SortController2.prototype.isSortActive = function() {
      var allCols = this.columnModel.getPrimaryAndSecondaryAndAutoColumns();
      var sortedCols = allCols.filter(function(column) {
        return !!column.getSort();
      });
      return sortedCols && sortedCols.length > 0;
    };
    SortController2.prototype.dispatchSortChangedEvents = function() {
      var event = {
        type: Events.EVENT_SORT_CHANGED,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.eventService.dispatchEvent(event);
    };
    SortController2.prototype.clearSortBarThisColumn = function(columnToSkip, source) {
      this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(columnToClear) {
        if (columnToClear !== columnToSkip) {
          columnToClear.setSort(void 0, source);
        }
      });
    };
    SortController2.prototype.getNextSortDirection = function(column) {
      var sortingOrder;
      if (column.getColDef().sortingOrder) {
        sortingOrder = column.getColDef().sortingOrder;
      } else if (this.gridOptionsWrapper.getSortingOrder()) {
        sortingOrder = this.gridOptionsWrapper.getSortingOrder();
      } else {
        sortingOrder = SortController_1.DEFAULT_SORTING_ORDER;
      }
      if (!Array.isArray(sortingOrder) || sortingOrder.length <= 0) {
        console.warn("ag-grid: sortingOrder must be an array with at least one element, currently it's " + sortingOrder);
        return null;
      }
      var currentIndex = sortingOrder.indexOf(column.getSort());
      var notInArray = currentIndex < 0;
      var lastItemInArray = currentIndex == sortingOrder.length - 1;
      var result;
      if (notInArray || lastItemInArray) {
        result = sortingOrder[0];
      } else {
        result = sortingOrder[currentIndex + 1];
      }
      if (SortController_1.DEFAULT_SORTING_ORDER.indexOf(result) < 0) {
        console.warn("ag-grid: invalid sort type " + result);
        return null;
      }
      return result;
    };
    SortController2.prototype.getColumnsWithSortingOrdered = function() {
      var allColumnsIncludingAuto = this.columnModel.getPrimaryAndSecondaryAndAutoColumns();
      var columnsWithSorting = allColumnsIncludingAuto.filter(function(column) {
        return !!column.getSort();
      });
      var allColsIndexes = {};
      allColumnsIncludingAuto.forEach(function(col, index) {
        return allColsIndexes[col.getId()] = index;
      });
      columnsWithSorting.sort(function(a, b) {
        var iA = a.getSortIndex();
        var iB = b.getSortIndex();
        if (iA != null && iB != null) {
          return iA - iB;
        } else if (iA == null && iB == null) {
          var posA = allColsIndexes[a.getId()];
          var posB = allColsIndexes[b.getId()];
          return posA > posB ? 1 : -1;
        } else if (iB == null) {
          return -1;
        } else {
          return 1;
        }
      });
      return columnsWithSorting;
    };
    SortController2.prototype.getSortModel = function() {
      return this.getColumnsWithSortingOrdered().map(function(column) {
        return {
          sort: column.getSort(),
          colId: column.getId()
        };
      });
    };
    SortController2.prototype.getSortOptions = function() {
      return this.getColumnsWithSortingOrdered().map(function(column) {
        return {
          sort: column.getSort(),
          column
        };
      });
    };
    var SortController_1;
    SortController2.DEFAULT_SORTING_ORDER = [Constants.SORT_ASC, Constants.SORT_DESC, null];
    __decorate$1u([
      Autowired("columnModel")
    ], SortController2.prototype, "columnModel", void 0);
    __decorate$1u([
      Autowired("columnApi")
    ], SortController2.prototype, "columnApi", void 0);
    __decorate$1u([
      Autowired("gridApi")
    ], SortController2.prototype, "gridApi", void 0);
    SortController2 = SortController_1 = __decorate$1u([
      Bean("sortController")
    ], SortController2);
    return SortController2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1G = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1v = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var MouseEventService = function(_super) {
    __extends$1G(MouseEventService2, _super);
    function MouseEventService2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.gridInstanceId = MouseEventService_1.gridInstanceSequence.next();
      return _this;
    }
    MouseEventService_1 = MouseEventService2;
    MouseEventService2.prototype.stampTopLevelGridCompWithGridInstance = function(eGridDiv) {
      eGridDiv[MouseEventService_1.GRID_DOM_KEY] = this.gridInstanceId;
    };
    MouseEventService2.prototype.getRenderedCellForEvent = function(event) {
      return getCtrlForEvent(this.gridOptionsWrapper, event, CellCtrl.DOM_DATA_KEY_CELL_CTRL);
    };
    MouseEventService2.prototype.isEventFromThisGrid = function(event) {
      var res = this.isElementInThisGrid(event.target);
      return res;
    };
    MouseEventService2.prototype.isElementInThisGrid = function(element2) {
      var pointer = element2;
      while (pointer) {
        var instanceId = pointer[MouseEventService_1.GRID_DOM_KEY];
        if (exists(instanceId)) {
          var eventFromThisGrid = instanceId === this.gridInstanceId;
          return eventFromThisGrid;
        }
        pointer = pointer.parentElement;
      }
      return false;
    };
    MouseEventService2.prototype.getCellPositionForEvent = function(event) {
      var cellComp = this.getRenderedCellForEvent(event);
      return cellComp ? cellComp.getCellPosition() : null;
    };
    MouseEventService2.prototype.getNormalisedPosition = function(event) {
      var gridPanelHasScrolls = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_NORMAL;
      var e = event;
      var x;
      var y;
      if (e.clientX != null || e.clientY != null) {
        x = e.clientX;
        y = e.clientY;
      } else {
        x = e.x;
        y = e.y;
      }
      if (gridPanelHasScrolls) {
        var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
        var vRange = gridBodyCon.getScrollFeature().getVScrollPosition();
        var hRange = gridBodyCon.getScrollFeature().getHScrollPosition();
        x += hRange.left;
        y += vRange.top;
      }
      return { x, y };
    };
    var MouseEventService_1;
    MouseEventService2.gridInstanceSequence = new NumberSequence();
    MouseEventService2.GRID_DOM_KEY = "__ag_grid_instance";
    __decorate$1v([
      Autowired("ctrlsService")
    ], MouseEventService2.prototype, "ctrlsService", void 0);
    MouseEventService2 = MouseEventService_1 = __decorate$1v([
      Bean("mouseEventService")
    ], MouseEventService2);
    return MouseEventService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1H = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1w = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var CellNavigationService = function(_super) {
    __extends$1H(CellNavigationService2, _super);
    function CellNavigationService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    CellNavigationService2.prototype.getNextCellToFocus = function(key, lastCellToFocus) {
      var pointer = lastCellToFocus;
      var finished2 = false;
      while (!finished2) {
        switch (key) {
          case KeyCode.UP:
            pointer = this.getCellAbove(pointer);
            break;
          case KeyCode.DOWN:
            pointer = this.getCellBelow(pointer);
            break;
          case KeyCode.RIGHT:
            if (this.gridOptionsWrapper.isEnableRtl()) {
              pointer = this.getCellToLeft(pointer);
            } else {
              pointer = this.getCellToRight(pointer);
            }
            break;
          case KeyCode.LEFT:
            if (this.gridOptionsWrapper.isEnableRtl()) {
              pointer = this.getCellToRight(pointer);
            } else {
              pointer = this.getCellToLeft(pointer);
            }
            break;
          default:
            pointer = null;
            console.warn("AG Grid: unknown key for navigation " + key);
            break;
        }
        if (pointer) {
          finished2 = this.isCellGoodToFocusOn(pointer);
        } else {
          finished2 = true;
        }
      }
      return pointer;
    };
    CellNavigationService2.prototype.isCellGoodToFocusOn = function(gridCell) {
      var column = gridCell.column;
      var rowNode;
      switch (gridCell.rowPinned) {
        case Constants.PINNED_TOP:
          rowNode = this.pinnedRowModel.getPinnedTopRow(gridCell.rowIndex);
          break;
        case Constants.PINNED_BOTTOM:
          rowNode = this.pinnedRowModel.getPinnedBottomRow(gridCell.rowIndex);
          break;
        default:
          rowNode = this.rowModel.getRow(gridCell.rowIndex);
          break;
      }
      if (!rowNode) {
        return false;
      }
      var suppressNavigable = column.isSuppressNavigable(rowNode);
      return !suppressNavigable;
    };
    CellNavigationService2.prototype.getCellToLeft = function(lastCell) {
      if (!lastCell) {
        return null;
      }
      var colToLeft = this.columnModel.getDisplayedColBefore(lastCell.column);
      if (!colToLeft) {
        return null;
      }
      return {
        rowIndex: lastCell.rowIndex,
        column: colToLeft,
        rowPinned: lastCell.rowPinned
      };
    };
    CellNavigationService2.prototype.getCellToRight = function(lastCell) {
      if (!lastCell) {
        return null;
      }
      var colToRight = this.columnModel.getDisplayedColAfter(lastCell.column);
      if (!colToRight) {
        return null;
      }
      return {
        rowIndex: lastCell.rowIndex,
        column: colToRight,
        rowPinned: lastCell.rowPinned
      };
    };
    CellNavigationService2.prototype.getRowBelow = function(rowPosition) {
      var index = rowPosition.rowIndex;
      var pinned = rowPosition.rowPinned;
      if (this.isLastRowInContainer(rowPosition)) {
        switch (pinned) {
          case Constants.PINNED_BOTTOM:
            return null;
          case Constants.PINNED_TOP:
            if (this.rowModel.isRowsToRender()) {
              return { rowIndex: this.paginationProxy.getPageFirstRow(), rowPinned: null };
            }
            if (this.pinnedRowModel.isRowsToRender(Constants.PINNED_BOTTOM)) {
              return { rowIndex: 0, rowPinned: Constants.PINNED_BOTTOM };
            }
            return null;
          default:
            if (this.pinnedRowModel.isRowsToRender(Constants.PINNED_BOTTOM)) {
              return { rowIndex: 0, rowPinned: Constants.PINNED_BOTTOM };
            }
            return null;
        }
      }
      return { rowIndex: index + 1, rowPinned: pinned };
    };
    CellNavigationService2.prototype.getCellBelow = function(lastCell) {
      if (!lastCell) {
        return null;
      }
      var rowBelow = this.getRowBelow(lastCell);
      if (rowBelow) {
        return {
          rowIndex: rowBelow.rowIndex,
          column: lastCell.column,
          rowPinned: rowBelow.rowPinned
        };
      }
      return null;
    };
    CellNavigationService2.prototype.isLastRowInContainer = function(rowPosition) {
      var pinned = rowPosition.rowPinned;
      var index = rowPosition.rowIndex;
      if (pinned === Constants.PINNED_TOP) {
        var lastTopIndex = this.pinnedRowModel.getPinnedTopRowData().length - 1;
        return lastTopIndex <= index;
      }
      if (pinned === Constants.PINNED_BOTTOM) {
        var lastBottomIndex = this.pinnedRowModel.getPinnedBottomRowData().length - 1;
        return lastBottomIndex <= index;
      }
      var lastBodyIndex = this.paginationProxy.getPageLastRow();
      return lastBodyIndex <= index;
    };
    CellNavigationService2.prototype.getRowAbove = function(rowPosition) {
      var index = rowPosition.rowIndex;
      var pinned = rowPosition.rowPinned;
      var isFirstRow = pinned ? index === 0 : index === this.paginationProxy.getPageFirstRow();
      if (isFirstRow) {
        if (pinned === Constants.PINNED_TOP) {
          return null;
        }
        if (!pinned) {
          if (this.pinnedRowModel.isRowsToRender(Constants.PINNED_TOP)) {
            return this.getLastFloatingTopRow();
          }
          return null;
        }
        if (this.rowModel.isRowsToRender()) {
          return this.getLastBodyCell();
        }
        if (this.pinnedRowModel.isRowsToRender(Constants.PINNED_TOP)) {
          return this.getLastFloatingTopRow();
        }
        return null;
      }
      return { rowIndex: index - 1, rowPinned: pinned };
    };
    CellNavigationService2.prototype.getCellAbove = function(lastCell) {
      if (!lastCell) {
        return null;
      }
      var rowAbove = this.getRowAbove({ rowIndex: lastCell.rowIndex, rowPinned: lastCell.rowPinned });
      if (rowAbove) {
        return {
          rowIndex: rowAbove.rowIndex,
          column: lastCell.column,
          rowPinned: rowAbove.rowPinned
        };
      }
      return null;
    };
    CellNavigationService2.prototype.getLastBodyCell = function() {
      var lastBodyRow = this.paginationProxy.getPageLastRow();
      return { rowIndex: lastBodyRow, rowPinned: null };
    };
    CellNavigationService2.prototype.getLastFloatingTopRow = function() {
      var lastFloatingRow = this.pinnedRowModel.getPinnedTopRowData().length - 1;
      return { rowIndex: lastFloatingRow, rowPinned: Constants.PINNED_TOP };
    };
    CellNavigationService2.prototype.getNextTabbedCell = function(gridCell, backwards) {
      if (backwards) {
        return this.getNextTabbedCellBackwards(gridCell);
      }
      return this.getNextTabbedCellForwards(gridCell);
    };
    CellNavigationService2.prototype.getNextTabbedCellForwards = function(gridCell) {
      var displayedColumns = this.columnModel.getAllDisplayedColumns();
      var newRowIndex = gridCell.rowIndex;
      var newFloating = gridCell.rowPinned;
      var newColumn = this.columnModel.getDisplayedColAfter(gridCell.column);
      if (!newColumn) {
        newColumn = displayedColumns[0];
        var rowBelow = this.getRowBelow(gridCell);
        if (missing(rowBelow)) {
          return null;
        }
        if (!rowBelow.rowPinned && !this.paginationProxy.isRowInPage(rowBelow)) {
          return null;
        }
        newRowIndex = rowBelow ? rowBelow.rowIndex : null;
        newFloating = rowBelow ? rowBelow.rowPinned : null;
      }
      return { rowIndex: newRowIndex, column: newColumn, rowPinned: newFloating };
    };
    CellNavigationService2.prototype.getNextTabbedCellBackwards = function(gridCell) {
      var displayedColumns = this.columnModel.getAllDisplayedColumns();
      var newRowIndex = gridCell.rowIndex;
      var newFloating = gridCell.rowPinned;
      var newColumn = this.columnModel.getDisplayedColBefore(gridCell.column);
      if (!newColumn) {
        newColumn = last(displayedColumns);
        var rowAbove = this.getRowAbove({ rowIndex: gridCell.rowIndex, rowPinned: gridCell.rowPinned });
        if (missing(rowAbove)) {
          return null;
        }
        if (!rowAbove.rowPinned && !this.paginationProxy.isRowInPage(rowAbove)) {
          return null;
        }
        newRowIndex = rowAbove ? rowAbove.rowIndex : null;
        newFloating = rowAbove ? rowAbove.rowPinned : null;
      }
      return { rowIndex: newRowIndex, column: newColumn, rowPinned: newFloating };
    };
    __decorate$1w([
      Autowired("columnModel")
    ], CellNavigationService2.prototype, "columnModel", void 0);
    __decorate$1w([
      Autowired("rowModel")
    ], CellNavigationService2.prototype, "rowModel", void 0);
    __decorate$1w([
      Autowired("pinnedRowModel")
    ], CellNavigationService2.prototype, "pinnedRowModel", void 0);
    __decorate$1w([
      Autowired("paginationProxy")
    ], CellNavigationService2.prototype, "paginationProxy", void 0);
    CellNavigationService2 = __decorate$1w([
      Bean("cellNavigationService")
    ], CellNavigationService2);
    return CellNavigationService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1I = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1x = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ValueFormatterService = function(_super) {
    __extends$1I(ValueFormatterService2, _super);
    function ValueFormatterService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ValueFormatterService2.prototype.formatValue = function(column, node, $scope, value, suppliedFormatter, useFormatterFromColumn) {
      if (useFormatterFromColumn === void 0) {
        useFormatterFromColumn = true;
      }
      var result = null;
      var formatter;
      var colDef = column.getColDef();
      if (suppliedFormatter) {
        formatter = suppliedFormatter;
      } else if (useFormatterFromColumn) {
        formatter = node && node.rowPinned && colDef.pinnedRowValueFormatter ? colDef.pinnedRowValueFormatter : colDef.valueFormatter;
      }
      if (formatter) {
        var params2 = {
          value,
          node,
          data: node ? node.data : null,
          colDef,
          column,
          api: this.gridOptionsWrapper.getApi(),
          columnApi: this.gridOptionsWrapper.getColumnApi(),
          context: this.gridOptionsWrapper.getContext()
        };
        params2.$scope = $scope;
        result = this.expressionService.evaluate(formatter, params2);
      } else if (colDef.refData) {
        return colDef.refData[value] || "";
      }
      if (result == null && Array.isArray(value)) {
        result = value.join(", ");
      }
      return result;
    };
    __decorate$1x([
      Autowired("expressionService")
    ], ValueFormatterService2.prototype, "expressionService", void 0);
    ValueFormatterService2 = __decorate$1x([
      Bean("valueFormatterService")
    ], ValueFormatterService2);
    return ValueFormatterService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1J = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var AgRadioButton = function(_super) {
    __extends$1J(AgRadioButton2, _super);
    function AgRadioButton2(config2) {
      return _super.call(this, config2, "ag-radio-button", "radio") || this;
    }
    AgRadioButton2.prototype.isSelected = function() {
      return this.eInput.checked;
    };
    AgRadioButton2.prototype.toggle = function() {
      if (!this.isSelected()) {
        this.setValue(true);
      }
    };
    AgRadioButton2.prototype.addInputListeners = function() {
      _super.prototype.addInputListeners.call(this);
      this.addManagedListener(this.eventService, Events.EVENT_CHECKBOX_CHANGED, this.onChange.bind(this));
    };
    AgRadioButton2.prototype.onChange = function(event) {
      if (event.selected && event.name && this.eInput.name && this.eInput.name === event.name && event.id && this.eInput.id !== event.id) {
        this.setValue(false, true);
      }
    };
    return AgRadioButton2;
  }(AgCheckbox);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var OUTSIDE_ANGULAR_EVENTS = ["mouseover", "mouseout", "mouseenter", "mouseleave"];
  var VanillaFrameworkOverrides = function() {
    function VanillaFrameworkOverrides2() {
      this.isOutsideAngular = function(eventType) {
        return includes2(OUTSIDE_ANGULAR_EVENTS, eventType);
      };
    }
    VanillaFrameworkOverrides2.prototype.setTimeout = function(action, timeout) {
      window.setTimeout(action, timeout);
    };
    VanillaFrameworkOverrides2.prototype.setInterval = function(action, timeout) {
      return new AgPromise(function(resolve) {
        resolve(window.setInterval(action, timeout));
      });
    };
    VanillaFrameworkOverrides2.prototype.addEventListener = function(element2, type, listener, useCapture) {
      element2.addEventListener(type, listener, useCapture);
    };
    VanillaFrameworkOverrides2.prototype.dispatchEvent = function(eventType, listener, globalThis2) {
      listener();
    };
    VanillaFrameworkOverrides2.prototype.frameworkComponent = function(name) {
      return null;
    };
    return VanillaFrameworkOverrides2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1K = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1y = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ScrollVisibleService = function(_super) {
    __extends$1K(ScrollVisibleService2, _super);
    function ScrollVisibleService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ScrollVisibleService2.prototype.postConstruct = function() {
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, this.onDisplayedColumnsChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, this.onDisplayedColumnsWidthChanged.bind(this));
    };
    ScrollVisibleService2.prototype.onDisplayedColumnsChanged = function() {
      this.update();
    };
    ScrollVisibleService2.prototype.onDisplayedColumnsWidthChanged = function() {
      this.update();
    };
    ScrollVisibleService2.prototype.update = function() {
      this.updateImpl();
      setTimeout(this.updateImpl.bind(this), 500);
    };
    ScrollVisibleService2.prototype.updateImpl = function() {
      var centerRowCtrl = this.ctrlsService.getCenterRowContainerCtrl();
      if (!centerRowCtrl) {
        return;
      }
      var params2 = {
        horizontalScrollShowing: centerRowCtrl.isHorizontalScrollShowing(),
        verticalScrollShowing: this.isVerticalScrollShowing()
      };
      this.setScrollsVisible(params2);
    };
    ScrollVisibleService2.prototype.setScrollsVisible = function(params2) {
      var atLeastOneDifferent = this.horizontalScrollShowing !== params2.horizontalScrollShowing || this.verticalScrollShowing !== params2.verticalScrollShowing;
      if (atLeastOneDifferent) {
        this.horizontalScrollShowing = params2.horizontalScrollShowing;
        this.verticalScrollShowing = params2.verticalScrollShowing;
        var event_1 = {
          type: Events.EVENT_SCROLL_VISIBILITY_CHANGED,
          api: this.gridApi,
          columnApi: this.columnApi
        };
        this.eventService.dispatchEvent(event_1);
      }
    };
    ScrollVisibleService2.prototype.isHorizontalScrollShowing = function() {
      return this.horizontalScrollShowing;
    };
    ScrollVisibleService2.prototype.isVerticalScrollShowing = function() {
      return this.verticalScrollShowing;
    };
    __decorate$1y([
      Autowired("columnApi")
    ], ScrollVisibleService2.prototype, "columnApi", void 0);
    __decorate$1y([
      Autowired("gridApi")
    ], ScrollVisibleService2.prototype, "gridApi", void 0);
    __decorate$1y([
      Autowired("ctrlsService")
    ], ScrollVisibleService2.prototype, "ctrlsService", void 0);
    __decorate$1y([
      PostConstruct
    ], ScrollVisibleService2.prototype, "postConstruct", null);
    ScrollVisibleService2 = __decorate$1y([
      Bean("scrollVisibleService")
    ], ScrollVisibleService2);
    return ScrollVisibleService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1L = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1z = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var StylingService = function(_super) {
    __extends$1L(StylingService2, _super);
    function StylingService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    StylingService2.prototype.processAllCellClasses = function(colDef, params2, onApplicableClass, onNotApplicableClass) {
      this.processClassRules(colDef.cellClassRules, params2, onApplicableClass, onNotApplicableClass);
      this.processStaticCellClasses(colDef, params2, onApplicableClass);
    };
    StylingService2.prototype.processClassRules = function(classRules, params2, onApplicableClass, onNotApplicableClass) {
      if (classRules == null) {
        return;
      }
      var classNames = Object.keys(classRules);
      var classesToApply = {};
      var classesToRemove = {};
      var _loop_1 = function(i3) {
        var className = classNames[i3];
        var rule = classRules[className];
        var resultOfRule;
        if (typeof rule === "string") {
          resultOfRule = this_1.expressionService.evaluate(rule, params2);
        } else if (typeof rule === "function") {
          resultOfRule = rule(params2);
        }
        className.split(" ").forEach(function(singleClass) {
          if (singleClass == null || singleClass.trim() == "") {
            return;
          }
          resultOfRule ? classesToApply[singleClass] = true : classesToRemove[singleClass] = true;
        });
        if (onNotApplicableClass) {
          Object.keys(classesToRemove).forEach(onNotApplicableClass);
        }
        Object.keys(classesToApply).forEach(onApplicableClass);
      };
      var this_1 = this;
      for (var i2 = 0; i2 < classNames.length; i2++) {
        _loop_1(i2);
      }
    };
    StylingService2.prototype.processStaticCellClasses = function(colDef, params2, onApplicableClass) {
      var cellClass = colDef.cellClass;
      if (cellClass) {
        var classOrClasses = void 0;
        if (typeof colDef.cellClass === "function") {
          var cellClassFunc = colDef.cellClass;
          classOrClasses = cellClassFunc(params2);
        } else {
          classOrClasses = colDef.cellClass;
        }
        if (typeof classOrClasses === "string") {
          onApplicableClass(classOrClasses);
        } else if (Array.isArray(classOrClasses)) {
          classOrClasses.forEach(function(cssClassItem) {
            onApplicableClass(cssClassItem);
          });
        }
      }
    };
    __decorate$1z([
      Autowired("expressionService")
    ], StylingService2.prototype, "expressionService", void 0);
    StylingService2 = __decorate$1z([
      Bean("stylingService")
    ], StylingService2);
    return StylingService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1M = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1A = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ColumnHoverService = function(_super) {
    __extends$1M(ColumnHoverService2, _super);
    function ColumnHoverService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnHoverService2.prototype.setMouseOver = function(columns) {
      this.selectedColumns = columns;
      var event = {
        type: Events.EVENT_COLUMN_HOVER_CHANGED,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.eventService.dispatchEvent(event);
    };
    ColumnHoverService2.prototype.clearMouseOver = function() {
      this.selectedColumns = null;
      var event = {
        type: Events.EVENT_COLUMN_HOVER_CHANGED,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.eventService.dispatchEvent(event);
    };
    ColumnHoverService2.prototype.isHovered = function(column) {
      return !!this.selectedColumns && this.selectedColumns.indexOf(column) >= 0;
    };
    __decorate$1A([
      Autowired("columnApi")
    ], ColumnHoverService2.prototype, "columnApi", void 0);
    __decorate$1A([
      Autowired("gridApi")
    ], ColumnHoverService2.prototype, "gridApi", void 0);
    ColumnHoverService2 = __decorate$1A([
      Bean("columnHoverService")
    ], ColumnHoverService2);
    return ColumnHoverService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1N = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1B = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ColumnAnimationService = function(_super) {
    __extends$1N(ColumnAnimationService2, _super);
    function ColumnAnimationService2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.executeNextFuncs = [];
      _this.executeLaterFuncs = [];
      _this.active = false;
      _this.animationThreadCount = 0;
      return _this;
    }
    ColumnAnimationService2.prototype.postConstruct = function() {
      var _this = this;
      this.ctrlsService.whenReady(function(p2) {
        return _this.gridBodyCtrl = p2.gridBodyCtrl;
      });
    };
    ColumnAnimationService2.prototype.isActive = function() {
      return this.active;
    };
    ColumnAnimationService2.prototype.start = function() {
      if (this.active) {
        return;
      }
      if (this.gridOptionsWrapper.isSuppressColumnMoveAnimation()) {
        return;
      }
      if (this.gridOptionsWrapper.isEnableRtl()) {
        return;
      }
      this.ensureAnimationCssClassPresent();
      this.active = true;
    };
    ColumnAnimationService2.prototype.finish = function() {
      if (!this.active) {
        return;
      }
      this.flush();
      this.active = false;
    };
    ColumnAnimationService2.prototype.executeNextVMTurn = function(func) {
      if (this.active) {
        this.executeNextFuncs.push(func);
      } else {
        func();
      }
    };
    ColumnAnimationService2.prototype.executeLaterVMTurn = function(func) {
      if (this.active) {
        this.executeLaterFuncs.push(func);
      } else {
        func();
      }
    };
    ColumnAnimationService2.prototype.ensureAnimationCssClassPresent = function() {
      var _this = this;
      this.animationThreadCount++;
      var animationThreadCountCopy = this.animationThreadCount;
      this.gridBodyCtrl.setColumnMovingCss(true);
      this.executeLaterFuncs.push(function() {
        if (_this.animationThreadCount === animationThreadCountCopy) {
          _this.gridBodyCtrl.setColumnMovingCss(false);
        }
      });
    };
    ColumnAnimationService2.prototype.flush = function() {
      var nowFuncs = this.executeNextFuncs;
      this.executeNextFuncs = [];
      var waitFuncs = this.executeLaterFuncs;
      this.executeLaterFuncs = [];
      if (nowFuncs.length === 0 && waitFuncs.length === 0) {
        return;
      }
      window.setTimeout(function() {
        return nowFuncs.forEach(function(func) {
          return func();
        });
      }, 0);
      window.setTimeout(function() {
        return waitFuncs.forEach(function(func) {
          return func();
        });
      }, 300);
    };
    __decorate$1B([
      Autowired("ctrlsService")
    ], ColumnAnimationService2.prototype, "ctrlsService", void 0);
    __decorate$1B([
      PostConstruct
    ], ColumnAnimationService2.prototype, "postConstruct", null);
    ColumnAnimationService2 = __decorate$1B([
      Bean("columnAnimationService")
    ], ColumnAnimationService2);
    return ColumnAnimationService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1O = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1C = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AutoGroupColService = function(_super) {
    __extends$1O(AutoGroupColService2, _super);
    function AutoGroupColService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    AutoGroupColService_1 = AutoGroupColService2;
    AutoGroupColService2.prototype.createAutoGroupColumns = function(rowGroupColumns) {
      var _this = this;
      var groupAutoColumns = [];
      var doingTreeData = this.gridOptionsWrapper.isTreeData();
      var doingMultiAutoColumn = this.gridOptionsWrapper.isGroupMultiAutoColumn();
      if (doingTreeData && doingMultiAutoColumn) {
        console.warn("AG Grid: you cannot mix groupMultiAutoColumn with treeData, only one column can be used to display groups when doing tree data");
        doingMultiAutoColumn = false;
      }
      if (doingMultiAutoColumn) {
        rowGroupColumns.forEach(function(rowGroupCol, index) {
          groupAutoColumns.push(_this.createOneAutoGroupColumn(rowGroupCol, index));
        });
      } else {
        groupAutoColumns.push(this.createOneAutoGroupColumn());
      }
      return groupAutoColumns;
    };
    AutoGroupColService2.prototype.createOneAutoGroupColumn = function(rowGroupCol, index) {
      var defaultAutoColDef = this.generateDefaultColDef(rowGroupCol);
      var colId;
      if (rowGroupCol) {
        colId = Constants.GROUP_AUTO_COLUMN_ID + "-" + rowGroupCol.getId();
      } else {
        colId = AutoGroupColService_1.GROUP_AUTO_COLUMN_BUNDLE_ID;
      }
      var userAutoColDef = this.gridOptionsWrapper.getAutoGroupColumnDef();
      mergeDeep(defaultAutoColDef, userAutoColDef);
      defaultAutoColDef = this.columnFactory.mergeColDefs(defaultAutoColDef);
      defaultAutoColDef.colId = colId;
      if (!this.gridOptionsWrapper.isTreeData()) {
        var noFieldOrValueGetter = missing(defaultAutoColDef.field) && missing(defaultAutoColDef.valueGetter) && missing(defaultAutoColDef.filterValueGetter);
        if (noFieldOrValueGetter) {
          defaultAutoColDef.filter = false;
        }
      }
      if (index && index > 0) {
        defaultAutoColDef.headerCheckboxSelection = false;
      }
      var newCol = new Column(defaultAutoColDef, null, colId, true);
      this.context.createBean(newCol);
      return newCol;
    };
    AutoGroupColService2.prototype.generateDefaultColDef = function(rowGroupCol) {
      var userDef = this.gridOptionsWrapper.getAutoGroupColumnDef();
      var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();
      var res = {
        headerName: localeTextFunc("group", "Group")
      };
      var userHasProvidedGroupCellRenderer = userDef && (userDef.cellRenderer || userDef.cellRendererFramework || userDef.cellRendererSelector);
      if (!userHasProvidedGroupCellRenderer) {
        res.cellRenderer = "agGroupCellRenderer";
      }
      if (rowGroupCol) {
        var colDef = rowGroupCol.getColDef();
        assign2(res, {
          headerName: this.columnModel.getDisplayNameForColumn(rowGroupCol, "header"),
          headerValueGetter: colDef.headerValueGetter
        });
        if (colDef.cellRenderer) {
          assign2(res, {
            cellRendererParams: {
              innerRenderer: colDef.cellRenderer,
              innerRendererParams: colDef.cellRendererParams
            }
          });
        }
        res.showRowGroup = rowGroupCol.getColId();
      } else {
        res.showRowGroup = true;
      }
      return res;
    };
    var AutoGroupColService_1;
    AutoGroupColService2.GROUP_AUTO_COLUMN_BUNDLE_ID = Constants.GROUP_AUTO_COLUMN_ID;
    __decorate$1C([
      Autowired("columnModel")
    ], AutoGroupColService2.prototype, "columnModel", void 0);
    __decorate$1C([
      Autowired("columnFactory")
    ], AutoGroupColService2.prototype, "columnFactory", void 0);
    AutoGroupColService2 = AutoGroupColService_1 = __decorate$1C([
      Bean("autoGroupColService")
    ], AutoGroupColService2);
    return AutoGroupColService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1P = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1D = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var PaginationProxy = function(_super) {
    __extends$1P(PaginationProxy2, _super);
    function PaginationProxy2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.currentPage = 0;
      _this.topDisplayedRowIndex = 0;
      _this.bottomDisplayedRowIndex = 0;
      _this.pixelOffset = 0;
      _this.masterRowCount = 0;
      return _this;
    }
    PaginationProxy2.prototype.postConstruct = function() {
      this.active = this.gridOptionsWrapper.isPagination();
      this.paginateChildRows = this.gridOptionsWrapper.isPaginateChildRows();
      this.addManagedListener(this.eventService, Events.EVENT_MODEL_UPDATED, this.onModelUpdated.bind(this));
      this.addManagedListener(this.gridOptionsWrapper, "paginationPageSize", this.onPaginationPageSizeChanged.bind(this));
      this.onModelUpdated();
    };
    PaginationProxy2.prototype.ensureRowHeightsValid = function(startPixel, endPixel, startLimitIndex, endLimitIndex) {
      var res = this.rowModel.ensureRowHeightsValid(startPixel, endPixel, this.getPageFirstRow(), this.getPageLastRow());
      if (res) {
        this.calculatePages();
      }
      return res;
    };
    PaginationProxy2.prototype.onModelUpdated = function(modelUpdatedEvent) {
      this.calculatePages();
      var paginationChangedEvent = {
        type: Events.EVENT_PAGINATION_CHANGED,
        animate: modelUpdatedEvent ? modelUpdatedEvent.animate : false,
        newData: modelUpdatedEvent ? modelUpdatedEvent.newData : false,
        newPage: modelUpdatedEvent ? modelUpdatedEvent.newPage : false,
        keepRenderedRows: modelUpdatedEvent ? modelUpdatedEvent.keepRenderedRows : false,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.eventService.dispatchEvent(paginationChangedEvent);
    };
    PaginationProxy2.prototype.onPaginationPageSizeChanged = function() {
      this.calculatePages();
      var paginationChangedEvent = {
        type: Events.EVENT_PAGINATION_CHANGED,
        animate: false,
        newData: false,
        newPage: false,
        keepRenderedRows: true,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.eventService.dispatchEvent(paginationChangedEvent);
    };
    PaginationProxy2.prototype.goToPage = function(page) {
      if (!this.active || this.currentPage === page) {
        return;
      }
      this.currentPage = page;
      var event = {
        type: Events.EVENT_MODEL_UPDATED,
        animate: false,
        keepRenderedRows: false,
        newData: false,
        newPage: true,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.onModelUpdated(event);
    };
    PaginationProxy2.prototype.getPixelOffset = function() {
      return this.pixelOffset;
    };
    PaginationProxy2.prototype.getRow = function(index) {
      return this.rowModel.getRow(index);
    };
    PaginationProxy2.prototype.getRowNode = function(id) {
      return this.rowModel.getRowNode(id);
    };
    PaginationProxy2.prototype.getRowIndexAtPixel = function(pixel) {
      return this.rowModel.getRowIndexAtPixel(pixel);
    };
    PaginationProxy2.prototype.getCurrentPageHeight = function() {
      if (missing(this.topRowBounds) || missing(this.bottomRowBounds)) {
        return 0;
      }
      return Math.max(this.bottomRowBounds.rowTop + this.bottomRowBounds.rowHeight - this.topRowBounds.rowTop, 0);
    };
    PaginationProxy2.prototype.getCurrentPagePixelRange = function() {
      var pageFirstPixel = this.topRowBounds ? this.topRowBounds.rowTop : 0;
      var pageLastPixel = this.bottomRowBounds ? this.bottomRowBounds.rowTop + this.bottomRowBounds.rowHeight : 0;
      return { pageFirstPixel, pageLastPixel };
    };
    PaginationProxy2.prototype.isRowPresent = function(rowNode) {
      if (!this.rowModel.isRowPresent(rowNode)) {
        return false;
      }
      var nodeIsInPage = rowNode.rowIndex >= this.topDisplayedRowIndex && rowNode.rowIndex <= this.bottomDisplayedRowIndex;
      return nodeIsInPage;
    };
    PaginationProxy2.prototype.isEmpty = function() {
      return this.rowModel.isEmpty();
    };
    PaginationProxy2.prototype.isRowsToRender = function() {
      return this.rowModel.isRowsToRender();
    };
    PaginationProxy2.prototype.getNodesInRangeForSelection = function(firstInRange, lastInRange) {
      return this.rowModel.getNodesInRangeForSelection(firstInRange, lastInRange);
    };
    PaginationProxy2.prototype.forEachNode = function(callback) {
      return this.rowModel.forEachNode(callback);
    };
    PaginationProxy2.prototype.getType = function() {
      return this.rowModel.getType();
    };
    PaginationProxy2.prototype.getRowBounds = function(index) {
      var res = this.rowModel.getRowBounds(index);
      res.rowIndex = index;
      return res;
    };
    PaginationProxy2.prototype.getPageFirstRow = function() {
      return this.topRowBounds ? this.topRowBounds.rowIndex : -1;
    };
    PaginationProxy2.prototype.getPageLastRow = function() {
      return this.bottomRowBounds ? this.bottomRowBounds.rowIndex : -1;
    };
    PaginationProxy2.prototype.getRowCount = function() {
      return this.rowModel.getRowCount();
    };
    PaginationProxy2.prototype.getPageForIndex = function(index) {
      return Math.floor(index / this.pageSize);
    };
    PaginationProxy2.prototype.goToPageWithIndex = function(index) {
      if (!this.active) {
        return;
      }
      var pageNumber = this.getPageForIndex(index);
      this.goToPage(pageNumber);
    };
    PaginationProxy2.prototype.isRowInPage = function(row) {
      if (!this.active) {
        return true;
      }
      var rowPage = this.getPageForIndex(row.rowIndex);
      return rowPage === this.currentPage;
    };
    PaginationProxy2.prototype.isLastPageFound = function() {
      return this.rowModel.isLastRowIndexKnown();
    };
    PaginationProxy2.prototype.getCurrentPage = function() {
      return this.currentPage;
    };
    PaginationProxy2.prototype.goToNextPage = function() {
      this.goToPage(this.currentPage + 1);
    };
    PaginationProxy2.prototype.goToPreviousPage = function() {
      this.goToPage(this.currentPage - 1);
    };
    PaginationProxy2.prototype.goToFirstPage = function() {
      this.goToPage(0);
    };
    PaginationProxy2.prototype.goToLastPage = function() {
      var rowCount = this.rowModel.getRowCount();
      var lastPage = Math.floor(rowCount / this.pageSize);
      this.goToPage(lastPage);
    };
    PaginationProxy2.prototype.getPageSize = function() {
      return this.pageSize;
    };
    PaginationProxy2.prototype.getTotalPages = function() {
      return this.totalPages;
    };
    PaginationProxy2.prototype.setPageSize = function() {
      this.pageSize = this.gridOptionsWrapper.getPaginationPageSize();
      if (this.pageSize == null || this.pageSize < 1) {
        this.pageSize = 100;
      }
    };
    PaginationProxy2.prototype.calculatePages = function() {
      if (this.active) {
        this.setPageSize();
        if (this.paginateChildRows) {
          this.calculatePagesAllRows();
        } else {
          this.calculatePagesMasterRowsOnly();
        }
      } else {
        this.calculatedPagesNotActive();
      }
      this.topRowBounds = this.rowModel.getRowBounds(this.topDisplayedRowIndex);
      if (this.topRowBounds) {
        this.topRowBounds.rowIndex = this.topDisplayedRowIndex;
      }
      this.bottomRowBounds = this.rowModel.getRowBounds(this.bottomDisplayedRowIndex);
      if (this.bottomRowBounds) {
        this.bottomRowBounds.rowIndex = this.bottomDisplayedRowIndex;
      }
      this.setPixelOffset(exists(this.topRowBounds) ? this.topRowBounds.rowTop : 0);
    };
    PaginationProxy2.prototype.setPixelOffset = function(value) {
      if (this.pixelOffset === value) {
        return;
      }
      this.pixelOffset = value;
      this.eventService.dispatchEvent({ type: Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED });
    };
    PaginationProxy2.prototype.setZeroRows = function() {
      this.masterRowCount = 0;
      this.topDisplayedRowIndex = 0;
      this.bottomDisplayedRowIndex = -1;
      this.currentPage = 0;
      this.totalPages = 0;
    };
    PaginationProxy2.prototype.calculatePagesMasterRowsOnly = function() {
      this.masterRowCount = this.rowModel.getTopLevelRowCount();
      if (this.masterRowCount <= 0) {
        this.setZeroRows();
        return;
      }
      var masterLastRowIndex = this.masterRowCount - 1;
      this.totalPages = Math.floor(masterLastRowIndex / this.pageSize) + 1;
      if (this.currentPage >= this.totalPages) {
        this.currentPage = this.totalPages - 1;
      }
      if (!isNumeric(this.currentPage) || this.currentPage < 0) {
        this.currentPage = 0;
      }
      var masterPageStartIndex = this.pageSize * this.currentPage;
      var masterPageEndIndex = this.pageSize * (this.currentPage + 1) - 1;
      if (masterPageEndIndex > masterLastRowIndex) {
        masterPageEndIndex = masterLastRowIndex;
      }
      this.topDisplayedRowIndex = this.rowModel.getTopLevelRowDisplayedIndex(masterPageStartIndex);
      if (masterPageEndIndex === masterLastRowIndex) {
        this.bottomDisplayedRowIndex = this.rowModel.getRowCount() - 1;
      } else {
        var firstIndexNotToShow = this.rowModel.getTopLevelRowDisplayedIndex(masterPageEndIndex + 1);
        this.bottomDisplayedRowIndex = firstIndexNotToShow - 1;
      }
    };
    PaginationProxy2.prototype.getMasterRowCount = function() {
      return this.masterRowCount;
    };
    PaginationProxy2.prototype.calculatePagesAllRows = function() {
      this.masterRowCount = this.rowModel.getRowCount();
      if (this.masterRowCount === 0) {
        this.setZeroRows();
        return;
      }
      var maxRowIndex = this.masterRowCount - 1;
      this.totalPages = Math.floor(maxRowIndex / this.pageSize) + 1;
      if (this.currentPage >= this.totalPages) {
        this.currentPage = this.totalPages - 1;
      }
      if (!isNumeric(this.currentPage) || this.currentPage < 0) {
        this.currentPage = 0;
      }
      this.topDisplayedRowIndex = this.pageSize * this.currentPage;
      this.bottomDisplayedRowIndex = this.pageSize * (this.currentPage + 1) - 1;
      if (this.bottomDisplayedRowIndex > maxRowIndex) {
        this.bottomDisplayedRowIndex = maxRowIndex;
      }
    };
    PaginationProxy2.prototype.calculatedPagesNotActive = function() {
      this.pageSize = this.rowModel.getRowCount();
      this.totalPages = 1;
      this.currentPage = 0;
      this.topDisplayedRowIndex = 0;
      this.bottomDisplayedRowIndex = this.rowModel.getRowCount() - 1;
    };
    __decorate$1D([
      Autowired("rowModel")
    ], PaginationProxy2.prototype, "rowModel", void 0);
    __decorate$1D([
      Autowired("columnApi")
    ], PaginationProxy2.prototype, "columnApi", void 0);
    __decorate$1D([
      Autowired("gridApi")
    ], PaginationProxy2.prototype, "gridApi", void 0);
    __decorate$1D([
      PostConstruct
    ], PaginationProxy2.prototype, "postConstruct", null);
    PaginationProxy2 = __decorate$1D([
      Bean("paginationProxy")
    ], PaginationProxy2);
    return PaginationProxy2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1Q = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1E = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var PaginationAutoPageSizeService = function(_super) {
    __extends$1Q(PaginationAutoPageSizeService2, _super);
    function PaginationAutoPageSizeService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    PaginationAutoPageSizeService2.prototype.postConstruct = function() {
      var _this = this;
      this.ctrlsService.whenReady(function(p2) {
        _this.centerRowContainerCon = p2.centerRowContainerCtrl;
        _this.addManagedListener(_this.eventService, Events.EVENT_BODY_HEIGHT_CHANGED, _this.onBodyHeightChanged.bind(_this));
        _this.addManagedListener(_this.eventService, Events.EVENT_SCROLL_VISIBILITY_CHANGED, _this.onScrollVisibilityChanged.bind(_this));
        _this.checkPageSize();
      });
    };
    PaginationAutoPageSizeService2.prototype.notActive = function() {
      return !this.gridOptionsWrapper.isPaginationAutoPageSize();
    };
    PaginationAutoPageSizeService2.prototype.onScrollVisibilityChanged = function() {
      this.checkPageSize();
    };
    PaginationAutoPageSizeService2.prototype.onBodyHeightChanged = function() {
      this.checkPageSize();
    };
    PaginationAutoPageSizeService2.prototype.checkPageSize = function() {
      if (this.notActive()) {
        return;
      }
      var rowHeight = this.gridOptionsWrapper.getRowHeightAsNumber();
      var bodyHeight = this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();
      if (bodyHeight > 0) {
        var newPageSize = Math.floor(bodyHeight / rowHeight);
        this.gridOptionsWrapper.setProperty("paginationPageSize", newPageSize);
      }
    };
    __decorate$1E([
      Autowired("ctrlsService")
    ], PaginationAutoPageSizeService2.prototype, "ctrlsService", void 0);
    __decorate$1E([
      PostConstruct
    ], PaginationAutoPageSizeService2.prototype, "postConstruct", null);
    PaginationAutoPageSizeService2 = __decorate$1E([
      Bean("paginationAutoPageSizeService")
    ], PaginationAutoPageSizeService2);
    return PaginationAutoPageSizeService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1R = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1F = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ValueCache = function(_super) {
    __extends$1R(ValueCache2, _super);
    function ValueCache2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.cacheVersion = 0;
      return _this;
    }
    ValueCache2.prototype.init = function() {
      this.active = this.gridOptionsWrapper.isValueCache();
      this.neverExpires = this.gridOptionsWrapper.isValueCacheNeverExpires();
    };
    ValueCache2.prototype.onDataChanged = function() {
      if (this.neverExpires) {
        return;
      }
      this.expire();
    };
    ValueCache2.prototype.expire = function() {
      this.cacheVersion++;
    };
    ValueCache2.prototype.setValue = function(rowNode, colId, value) {
      if (this.active) {
        if (rowNode.__cacheVersion !== this.cacheVersion) {
          rowNode.__cacheVersion = this.cacheVersion;
          rowNode.__cacheData = {};
        }
        rowNode.__cacheData[colId] = value;
      }
    };
    ValueCache2.prototype.getValue = function(rowNode, colId) {
      if (!this.active || rowNode.__cacheVersion !== this.cacheVersion) {
        return void 0;
      }
      return rowNode.__cacheData[colId];
    };
    __decorate$1F([
      PostConstruct
    ], ValueCache2.prototype, "init", null);
    ValueCache2 = __decorate$1F([
      Bean("valueCache")
    ], ValueCache2);
    return ValueCache2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1S = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1G = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ChangeDetectionService = function(_super) {
    __extends$1S(ChangeDetectionService2, _super);
    function ChangeDetectionService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ChangeDetectionService2.prototype.init = function() {
      if (this.rowModel.getType() === Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
        this.clientSideRowModel = this.rowModel;
      }
      this.addManagedListener(this.eventService, Events.EVENT_CELL_VALUE_CHANGED, this.onCellValueChanged.bind(this));
    };
    ChangeDetectionService2.prototype.onCellValueChanged = function(event) {
      if (event.source === Constants.SOURCE_PASTE) {
        return;
      }
      this.doChangeDetection(event.node, event.column);
    };
    ChangeDetectionService2.prototype.doChangeDetection = function(rowNode, column) {
      if (this.gridOptionsWrapper.isSuppressChangeDetection()) {
        return;
      }
      if (this.clientSideRowModel && !rowNode.isRowPinned()) {
        var onlyChangedColumns = this.gridOptionsWrapper.isAggregateOnlyChangedColumns();
        var changedPath = new ChangedPath(onlyChangedColumns, this.clientSideRowModel.getRootNode());
        changedPath.addParentNode(rowNode.parent, [column]);
        this.clientSideRowModel.doAggregate(changedPath);
      }
      this.rowRenderer.refreshCells();
    };
    __decorate$1G([
      Autowired("rowModel")
    ], ChangeDetectionService2.prototype, "rowModel", void 0);
    __decorate$1G([
      Autowired("rowRenderer")
    ], ChangeDetectionService2.prototype, "rowRenderer", void 0);
    __decorate$1G([
      PostConstruct
    ], ChangeDetectionService2.prototype, "init", null);
    ChangeDetectionService2 = __decorate$1G([
      Bean("changeDetectionService")
    ], ChangeDetectionService2);
    return ChangeDetectionService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1T = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1H = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param$7 = function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  var AlignedGridsService = function(_super) {
    __extends$1T(AlignedGridsService2, _super);
    function AlignedGridsService2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.consuming = false;
      return _this;
    }
    AlignedGridsService2.prototype.setBeans = function(loggerFactory) {
      this.logger = loggerFactory.create("AlignedGridsService");
    };
    AlignedGridsService2.prototype.init = function() {
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_MOVED, this.fireColumnEvent.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_VISIBLE, this.fireColumnEvent.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PINNED, this.fireColumnEvent.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_GROUP_OPENED, this.fireColumnEvent.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_RESIZED, this.fireColumnEvent.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_BODY_SCROLL, this.fireScrollEvent.bind(this));
    };
    AlignedGridsService2.prototype.fireEvent = function(callback) {
      if (this.consuming) {
        return;
      }
      var otherGrids = this.gridOptionsWrapper.getAlignedGrids();
      if (otherGrids) {
        otherGrids.forEach(function(otherGridOptions) {
          if (otherGridOptions.api) {
            var alignedGridService = otherGridOptions.api.__getAlignedGridService();
            callback(alignedGridService);
          }
        });
      }
    };
    AlignedGridsService2.prototype.onEvent = function(callback) {
      this.consuming = true;
      callback();
      this.consuming = false;
    };
    AlignedGridsService2.prototype.fireColumnEvent = function(event) {
      this.fireEvent(function(alignedGridsService) {
        alignedGridsService.onColumnEvent(event);
      });
    };
    AlignedGridsService2.prototype.fireScrollEvent = function(event) {
      if (event.direction !== "horizontal") {
        return;
      }
      this.fireEvent(function(alignedGridsService) {
        alignedGridsService.onScrollEvent(event);
      });
    };
    AlignedGridsService2.prototype.onScrollEvent = function(event) {
      var _this = this;
      this.onEvent(function() {
        var gridBodyCon = _this.ctrlsService.getGridBodyCtrl();
        gridBodyCon.getScrollFeature().setHorizontalScrollPosition(event.left);
      });
    };
    AlignedGridsService2.prototype.getMasterColumns = function(event) {
      var result = [];
      if (event.columns) {
        event.columns.forEach(function(column) {
          result.push(column);
        });
      } else if (event.column) {
        result.push(event.column);
      }
      return result;
    };
    AlignedGridsService2.prototype.getColumnIds = function(event) {
      var result = [];
      if (event.columns) {
        event.columns.forEach(function(column) {
          result.push(column.getColId());
        });
      } else if (event.column) {
        result.push(event.column.getColId());
      }
      return result;
    };
    AlignedGridsService2.prototype.onColumnEvent = function(event) {
      var _this = this;
      this.onEvent(function() {
        switch (event.type) {
          case Events.EVENT_COLUMN_MOVED:
          case Events.EVENT_COLUMN_VISIBLE:
          case Events.EVENT_COLUMN_PINNED:
          case Events.EVENT_COLUMN_RESIZED:
            var colEvent = event;
            _this.processColumnEvent(colEvent);
            break;
          case Events.EVENT_COLUMN_GROUP_OPENED:
            var groupOpenedEvent = event;
            _this.processGroupOpenedEvent(groupOpenedEvent);
            break;
          case Events.EVENT_COLUMN_PIVOT_CHANGED:
            console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");
            break;
        }
      });
    };
    AlignedGridsService2.prototype.processGroupOpenedEvent = function(groupOpenedEvent) {
      var masterColumnGroup = groupOpenedEvent.columnGroup;
      var otherColumnGroup = null;
      if (masterColumnGroup) {
        var groupId = masterColumnGroup.getGroupId();
        otherColumnGroup = this.columnModel.getOriginalColumnGroup(groupId);
      }
      if (masterColumnGroup && !otherColumnGroup) {
        return;
      }
      this.logger.log("onColumnEvent-> processing " + groupOpenedEvent + " expanded = " + masterColumnGroup.isExpanded());
      this.columnModel.setColumnGroupOpened(otherColumnGroup, masterColumnGroup.isExpanded(), "alignedGridChanged");
    };
    AlignedGridsService2.prototype.processColumnEvent = function(colEvent) {
      var _this = this;
      var masterColumn = colEvent.column;
      var otherColumn = null;
      if (masterColumn) {
        otherColumn = this.columnModel.getPrimaryColumn(masterColumn.getColId());
      }
      if (masterColumn && !otherColumn) {
        return;
      }
      var masterColumns = this.getMasterColumns(colEvent);
      switch (colEvent.type) {
        case Events.EVENT_COLUMN_MOVED:
          {
            var movedEvent = colEvent;
            var srcColState = colEvent.columnApi.getColumnState();
            var destColState = srcColState.map(function(s) {
              return { colId: s.colId };
            });
            this.columnModel.applyColumnState({ state: destColState, applyOrder: true }, "alignedGridChanged");
            this.logger.log("onColumnEvent-> processing " + colEvent.type + " toIndex = " + movedEvent.toIndex);
          }
          break;
        case Events.EVENT_COLUMN_VISIBLE:
          {
            var visibleEvent = colEvent;
            var srcColState = colEvent.columnApi.getColumnState();
            var destColState = srcColState.map(function(s) {
              return { colId: s.colId, hide: s.hide };
            });
            this.columnModel.applyColumnState({ state: destColState }, "alignedGridChanged");
            this.logger.log("onColumnEvent-> processing " + colEvent.type + " visible = " + visibleEvent.visible);
          }
          break;
        case Events.EVENT_COLUMN_PINNED:
          {
            var pinnedEvent = colEvent;
            var srcColState = colEvent.columnApi.getColumnState();
            var destColState = srcColState.map(function(s) {
              return { colId: s.colId, pinned: s.pinned };
            });
            this.columnModel.applyColumnState({ state: destColState }, "alignedGridChanged");
            this.logger.log("onColumnEvent-> processing " + colEvent.type + " pinned = " + pinnedEvent.pinned);
          }
          break;
        case Events.EVENT_COLUMN_RESIZED:
          var resizedEvent_1 = colEvent;
          masterColumns.forEach(function(column) {
            _this.logger.log("onColumnEvent-> processing " + colEvent.type + " actualWidth = " + column.getActualWidth());
            var columnWidths = [{ key: column.getColId(), newWidth: column.getActualWidth() }];
            _this.columnModel.setColumnWidths(columnWidths, false, resizedEvent_1.finished, "alignedGridChanged");
          });
          break;
      }
      var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
      var isVerticalScrollShowing2 = gridBodyCon.isVerticalScrollShowing();
      var alignedGrids = this.gridOptionsWrapper.getAlignedGrids();
      if (alignedGrids) {
        alignedGrids.forEach(function(grid) {
          if (grid.api) {
            grid.api.setAlwaysShowVerticalScroll(isVerticalScrollShowing2);
          }
        });
      }
    };
    __decorate$1H([
      Autowired("columnModel")
    ], AlignedGridsService2.prototype, "columnModel", void 0);
    __decorate$1H([
      Autowired("ctrlsService")
    ], AlignedGridsService2.prototype, "ctrlsService", void 0);
    __decorate$1H([
      __param$7(0, Qualifier("loggerFactory"))
    ], AlignedGridsService2.prototype, "setBeans", null);
    __decorate$1H([
      PostConstruct
    ], AlignedGridsService2.prototype, "init", null);
    AlignedGridsService2 = __decorate$1H([
      Bean("alignedGridsService")
    ], AlignedGridsService2);
    return AlignedGridsService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1U = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1I = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AgComponentUtils = function(_super) {
    __extends$1U(AgComponentUtils2, _super);
    function AgComponentUtils2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    AgComponentUtils2.prototype.adaptFunction = function(propertyName, jsCompFunc) {
      var metadata = this.componentMetadataProvider.retrieve(propertyName);
      if (metadata && metadata.functionAdapter) {
        return metadata.functionAdapter(jsCompFunc);
      }
      return null;
    };
    AgComponentUtils2.prototype.adaptCellRendererFunction = function(callback) {
      var Adapter = function() {
        function Adapter2() {
        }
        Adapter2.prototype.refresh = function(params2) {
          return false;
        };
        Adapter2.prototype.getGui = function() {
          var callbackResult = callback(this.params);
          var type = typeof callbackResult;
          if (type === "string" || type === "number" || type === "boolean") {
            return loadTemplate("<span>" + callbackResult + "</span>");
          }
          if (callbackResult == null) {
            return loadTemplate("<span></span>");
          }
          return callbackResult;
        };
        Adapter2.prototype.init = function(params2) {
          this.params = params2;
        };
        return Adapter2;
      }();
      return Adapter;
    };
    AgComponentUtils2.prototype.doesImplementIComponent = function(candidate) {
      if (!candidate) {
        return false;
      }
      return candidate.prototype && "getGui" in candidate.prototype;
    };
    __decorate$1I([
      Autowired("componentMetadataProvider")
    ], AgComponentUtils2.prototype, "componentMetadataProvider", void 0);
    AgComponentUtils2 = __decorate$1I([
      Bean("agComponentUtils")
    ], AgComponentUtils2);
    return AgComponentUtils2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1V = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1J = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ComponentMetadataProvider = function(_super) {
    __extends$1V(ComponentMetadataProvider2, _super);
    function ComponentMetadataProvider2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ComponentMetadataProvider2.prototype.postConstruct = function() {
      this.componentMetaData = {
        dateComponent: {
          mandatoryMethodList: ["getDate", "setDate"],
          optionalMethodList: ["afterGuiAttached", "setInputPlaceholder", "setInputAriaLabel"]
        },
        detailCellRenderer: {
          mandatoryMethodList: [],
          optionalMethodList: ["refresh"],
          functionAdapter: this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)
        },
        headerComponent: {
          mandatoryMethodList: [],
          optionalMethodList: ["refresh"]
        },
        headerGroupComponent: {
          mandatoryMethodList: [],
          optionalMethodList: []
        },
        loadingCellRenderer: {
          mandatoryMethodList: [],
          optionalMethodList: []
        },
        loadingOverlayComponent: {
          mandatoryMethodList: [],
          optionalMethodList: []
        },
        noRowsOverlayComponent: {
          mandatoryMethodList: [],
          optionalMethodList: []
        },
        floatingFilterComponent: {
          mandatoryMethodList: ["onParentModelChanged"],
          optionalMethodList: ["afterGuiAttached"]
        },
        floatingFilterWrapperComponent: {
          mandatoryMethodList: [],
          optionalMethodList: []
        },
        cellRenderer: {
          mandatoryMethodList: [],
          optionalMethodList: ["refresh", "afterGuiAttached"],
          functionAdapter: this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)
        },
        cellEditor: {
          mandatoryMethodList: ["getValue"],
          optionalMethodList: ["isPopup", "isCancelBeforeStart", "isCancelAfterEnd", "getPopupPosition", "focusIn", "focusOut", "afterGuiAttached"]
        },
        innerRenderer: {
          mandatoryMethodList: [],
          optionalMethodList: ["afterGuiAttached"],
          functionAdapter: this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)
        },
        fullWidthCellRenderer: {
          mandatoryMethodList: [],
          optionalMethodList: ["refresh", "afterGuiAttached"],
          functionAdapter: this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)
        },
        pinnedRowCellRenderer: {
          mandatoryMethodList: [],
          optionalMethodList: ["refresh", "afterGuiAttached"],
          functionAdapter: this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)
        },
        groupRowRenderer: {
          mandatoryMethodList: [],
          optionalMethodList: ["afterGuiAttached"],
          functionAdapter: this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)
        },
        filter: {
          mandatoryMethodList: ["isFilterActive", "doesFilterPass", "getModel", "setModel"],
          optionalMethodList: ["afterGuiAttached", "onNewRowsLoaded", "getModelAsString", "onFloatingFilterChanged"]
        },
        filterComponent: {
          mandatoryMethodList: ["isFilterActive", "doesFilterPass", "getModel", "setModel"],
          optionalMethodList: ["afterGuiAttached", "onNewRowsLoaded", "getModelAsString", "onFloatingFilterChanged"]
        },
        statusPanel: {
          mandatoryMethodList: [],
          optionalMethodList: ["afterGuiAttached"]
        },
        toolPanel: {
          mandatoryMethodList: [],
          optionalMethodList: ["refresh", "afterGuiAttached"]
        },
        tooltipComponent: {
          mandatoryMethodList: [],
          optionalMethodList: []
        }
      };
    };
    ComponentMetadataProvider2.prototype.retrieve = function(name) {
      return this.componentMetaData[name];
    };
    __decorate$1J([
      Autowired("agComponentUtils")
    ], ComponentMetadataProvider2.prototype, "agComponentUtils", void 0);
    __decorate$1J([
      PostConstruct
    ], ComponentMetadataProvider2.prototype, "postConstruct", null);
    ComponentMetadataProvider2 = __decorate$1J([
      Bean("componentMetadataProvider")
    ], ComponentMetadataProvider2);
    return ComponentMetadataProvider2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1W = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1K = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var MAT_GRID_SIZE = 8;
  var BASE_GRID_SIZE = 4;
  var BALHAM_GRID_SIZE = 4;
  var ALPINE_GRID_SIZE = 6;
  var HARD_CODED_SIZES = {
    "ag-theme-custom": {
      headerHeight: 25,
      headerCellMinWidth: 24,
      listItemHeight: BASE_GRID_SIZE * 5,
      rowHeight: 25,
      chartMenuPanelWidth: 220
    },
    "ag-theme-material": {
      headerHeight: MAT_GRID_SIZE * 7,
      headerCellMinWidth: 48,
      listItemHeight: MAT_GRID_SIZE * 4,
      rowHeight: MAT_GRID_SIZE * 6,
      chartMenuPanelWidth: 240
    },
    "ag-theme-balham": {
      headerHeight: BALHAM_GRID_SIZE * 8,
      headerCellMinWidth: 24,
      listItemHeight: BALHAM_GRID_SIZE * 6,
      rowHeight: BALHAM_GRID_SIZE * 7,
      chartMenuPanelWidth: 220
    },
    "ag-theme-alpine": {
      headerHeight: ALPINE_GRID_SIZE * 8,
      headerCellMinWidth: 36,
      listItemHeight: ALPINE_GRID_SIZE * 4,
      rowHeight: ALPINE_GRID_SIZE * 7,
      chartMenuPanelWidth: 240
    }
  };
  var SASS_PROPERTY_BUILDER = {
    headerHeight: ["ag-header-row"],
    headerCellMinWidth: ["ag-header-cell"],
    listItemHeight: ["ag-virtual-list-item"],
    rowHeight: ["ag-row"],
    chartMenuPanelWidth: ["ag-chart-docked-container"]
  };
  var CALCULATED_SIZES = {};
  var Environment = function(_super) {
    __extends$1W(Environment2, _super);
    function Environment2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Environment2.prototype.getSassVariable = function(theme, key) {
      var useTheme = "ag-theme-" + (theme.match("material") ? "material" : theme.match("balham") ? "balham" : theme.match("alpine") ? "alpine" : "custom");
      var defaultValue = HARD_CODED_SIZES[useTheme][key];
      var calculatedValue = 0;
      if (!CALCULATED_SIZES[theme]) {
        CALCULATED_SIZES[theme] = {};
      }
      var size = CALCULATED_SIZES[theme][key];
      if (size != null) {
        return size;
      }
      if (SASS_PROPERTY_BUILDER[key]) {
        var classList = SASS_PROPERTY_BUILDER[key];
        var div = document.createElement("div");
        addCssClass(div, theme);
        div.style.position = "absolute";
        var el = classList.reduce(function(prevEl, currentClass) {
          var currentDiv = document.createElement("div");
          currentDiv.style.position = "static";
          addCssClass(currentDiv, currentClass);
          prevEl.appendChild(currentDiv);
          return currentDiv;
        }, div);
        if (document.body) {
          document.body.appendChild(div);
          var sizeName = key.toLowerCase().indexOf("height") !== -1 ? "height" : "width";
          calculatedValue = parseInt(window.getComputedStyle(el)[sizeName], 10);
          document.body.removeChild(div);
        }
      }
      CALCULATED_SIZES[theme][key] = calculatedValue || defaultValue;
      return CALCULATED_SIZES[theme][key];
    };
    Environment2.prototype.isThemeDark = function() {
      var theme = this.getTheme().theme;
      return !!theme && theme.indexOf("dark") >= 0;
    };
    Environment2.prototype.chartMenuPanelWidth = function() {
      var theme = this.getTheme().themeFamily;
      return this.getSassVariable(theme, "chartMenuPanelWidth");
    };
    Environment2.prototype.getTheme = function() {
      var reg = /\bag-(material|(?:theme-([\w\-]*)))\b/;
      var el = this.eGridDiv;
      var themeMatch = null;
      while (el) {
        themeMatch = reg.exec(el.className);
        if (!themeMatch) {
          el = el.parentElement || void 0;
        } else {
          break;
        }
      }
      if (!themeMatch) {
        return {};
      }
      var theme = themeMatch[0];
      var usingOldTheme = themeMatch[2] === void 0;
      if (usingOldTheme) {
        var newTheme_1 = theme.replace("ag-", "ag-theme-");
        doOnce(function() {
          return console.warn("AG Grid: As of v19 old theme are no longer provided. Please replace " + theme + " with " + newTheme_1 + ".");
        }, "using-old-theme");
      }
      return { theme, el, themeFamily: theme.replace(/-dark$/, "") };
    };
    __decorate$1K([
      Autowired("eGridDiv")
    ], Environment2.prototype, "eGridDiv", void 0);
    Environment2 = __decorate$1K([
      Bean("environment")
    ], Environment2);
    return Environment2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1X = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1L = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AnimationFrameService = function(_super) {
    __extends$1X(AnimationFrameService2, _super);
    function AnimationFrameService2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.createTasksP1 = { list: [], sorted: false };
      _this.createTasksP2 = { list: [], sorted: false };
      _this.destroyTasks = [];
      _this.ticking = false;
      _this.scrollGoingDown = true;
      _this.lastScrollTop = 0;
      _this.taskCount = 0;
      _this.cancelledTasks = new Set();
      return _this;
    }
    AnimationFrameService2.prototype.setScrollTop = function(scrollTop) {
      this.scrollGoingDown = scrollTop > this.lastScrollTop;
      this.lastScrollTop = scrollTop;
    };
    AnimationFrameService2.prototype.init = function() {
      this.useAnimationFrame = !this.gridOptionsWrapper.isSuppressAnimationFrame();
    };
    AnimationFrameService2.prototype.isOn = function() {
      return this.useAnimationFrame;
    };
    AnimationFrameService2.prototype.verifyAnimationFrameOn = function(methodName) {
      if (this.useAnimationFrame === false) {
        console.warn("AG Grid: AnimationFrameService." + methodName + " called but animation frames are off");
      }
    };
    AnimationFrameService2.prototype.createTask = function(task, index, list) {
      this.verifyAnimationFrameOn(list);
      var taskItem = { task, index, createOrder: ++this.taskCount };
      this.addTaskToList(this[list], taskItem);
      this.schedule();
    };
    AnimationFrameService2.prototype.cancelTask = function(task) {
      this.cancelledTasks.add(task);
    };
    AnimationFrameService2.prototype.addTaskToList = function(taskList, task) {
      taskList.list.push(task);
      taskList.sorted = false;
    };
    AnimationFrameService2.prototype.sortTaskList = function(taskList) {
      if (taskList.sorted) {
        return;
      }
      var sortDirection = this.scrollGoingDown ? 1 : -1;
      taskList.list.sort(function(a, b) {
        return a.index !== b.index ? sortDirection * (b.index - a.index) : b.createOrder - a.createOrder;
      });
      taskList.sorted = true;
    };
    AnimationFrameService2.prototype.addDestroyTask = function(task) {
      this.verifyAnimationFrameOn("createTasksP3");
      this.destroyTasks.push(task);
      this.schedule();
    };
    AnimationFrameService2.prototype.executeFrame = function(millis) {
      this.verifyAnimationFrameOn("executeFrame");
      var p1TaskList = this.createTasksP1;
      var p1Tasks = p1TaskList.list;
      var p2TaskList = this.createTasksP2;
      var p2Tasks = p2TaskList.list;
      var destroyTasks = this.destroyTasks;
      var frameStart = new Date().getTime();
      var duration = new Date().getTime() - frameStart;
      var noMaxMillis = millis <= 0;
      var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
      while (noMaxMillis || duration < millis) {
        var gridBodyDidSomething = gridBodyCon.getScrollFeature().executeAnimationFrameScroll();
        if (!gridBodyDidSomething) {
          var task = void 0;
          if (p1Tasks.length) {
            this.sortTaskList(p1TaskList);
            task = p1Tasks.pop().task;
          } else if (p2Tasks.length) {
            this.sortTaskList(p2TaskList);
            task = p2Tasks.pop().task;
          } else if (destroyTasks.length) {
            task = destroyTasks.pop();
          } else {
            this.cancelledTasks.clear();
            break;
          }
          if (!this.cancelledTasks.has(task)) {
            task();
          }
        }
        duration = new Date().getTime() - frameStart;
      }
      if (p1Tasks.length || p2Tasks.length || destroyTasks.length) {
        this.requestFrame();
      } else {
        this.stopTicking();
      }
    };
    AnimationFrameService2.prototype.stopTicking = function() {
      this.ticking = false;
    };
    AnimationFrameService2.prototype.flushAllFrames = function() {
      if (!this.useAnimationFrame) {
        return;
      }
      this.executeFrame(-1);
    };
    AnimationFrameService2.prototype.schedule = function() {
      if (!this.useAnimationFrame) {
        return;
      }
      if (!this.ticking) {
        this.ticking = true;
        this.requestFrame();
      }
    };
    AnimationFrameService2.prototype.requestFrame = function() {
      var callback = this.executeFrame.bind(this, 60);
      if (window.requestAnimationFrame) {
        window.requestAnimationFrame(callback);
      } else if (window.webkitRequestAnimationFrame) {
        window.webkitRequestAnimationFrame(callback);
      } else {
        window.setTimeout(callback, 0);
      }
    };
    AnimationFrameService2.prototype.isQueueEmpty = function() {
      return !this.ticking;
    };
    AnimationFrameService2.prototype.debounce = function(func) {
      var _this = this;
      var pending = false;
      return function() {
        if (!_this.isOn()) {
          _this.getFrameworkOverrides().setTimeout(func, 0);
          return;
        }
        if (pending) {
          return;
        }
        pending = true;
        _this.addDestroyTask(function() {
          pending = false;
          func();
        });
      };
    };
    __decorate$1L([
      Autowired("ctrlsService")
    ], AnimationFrameService2.prototype, "ctrlsService", void 0);
    __decorate$1L([
      PostConstruct
    ], AnimationFrameService2.prototype, "init", null);
    AnimationFrameService2 = __decorate$1L([
      Bean("animationFrameService")
    ], AnimationFrameService2);
    return AnimationFrameService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1Y = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __assign$a = function() {
    __assign$a = Object.assign || function(t) {
      for (var s, i2 = 1, n = arguments.length; i2 < n; i2++) {
        s = arguments[i2];
        for (var p2 in s)
          if (Object.prototype.hasOwnProperty.call(s, p2))
            t[p2] = s[p2];
      }
      return t;
    };
    return __assign$a.apply(this, arguments);
  };
  var __decorate$1M = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var NavigationService = function(_super) {
    __extends$1Y(NavigationService2, _super);
    function NavigationService2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.timeLastPageEventProcessed = 0;
      return _this;
    }
    NavigationService2.prototype.postConstruct = function() {
      var _this = this;
      this.ctrlsService.whenReady(function(p2) {
        _this.gridBodyCon = p2.gridBodyCtrl;
      });
    };
    NavigationService2.prototype.handlePageScrollingKey = function(event) {
      var key = event.which || event.keyCode;
      var alt = event.altKey;
      var ctrl = event.ctrlKey || event.metaKey;
      var currentCell = this.mouseEventService.getCellPositionForEvent(event);
      if (!currentCell) {
        return false;
      }
      var processed = false;
      switch (key) {
        case KeyCode.PAGE_HOME:
        case KeyCode.PAGE_END:
          if (!ctrl && !alt) {
            this.onHomeOrEndKey(key);
            processed = true;
          }
          break;
        case KeyCode.LEFT:
        case KeyCode.RIGHT:
          if (ctrl && !alt) {
            this.onCtrlLeftOrRight(key, currentCell);
            processed = true;
          }
          break;
        case KeyCode.UP:
        case KeyCode.DOWN:
          if (ctrl && !alt) {
            this.onCtrlUpOrDown(key, currentCell);
            processed = true;
          }
          break;
        case KeyCode.PAGE_DOWN:
          if (!ctrl && !alt) {
            this.onPageDown(currentCell);
            processed = true;
          }
          break;
        case KeyCode.PAGE_UP:
          if (!ctrl && !alt) {
            this.onPageUp(currentCell);
            processed = true;
          }
          break;
      }
      if (processed) {
        event.preventDefault();
      }
      return processed;
    };
    NavigationService2.prototype.isTimeSinceLastPageEventToRecent = function() {
      var now2 = new Date().getTime();
      var diff = now2 - this.timeLastPageEventProcessed;
      return diff < 100;
    };
    NavigationService2.prototype.setTimeLastPageEventProcessed = function() {
      this.timeLastPageEventProcessed = new Date().getTime();
    };
    NavigationService2.prototype.navigateTo = function(navigateParams) {
      var scrollIndex = navigateParams.scrollIndex, scrollType = navigateParams.scrollType, scrollColumn = navigateParams.scrollColumn, focusIndex = navigateParams.focusIndex, focusColumn = navigateParams.focusColumn;
      if (exists(scrollColumn) && !scrollColumn.isPinned()) {
        this.gridBodyCon.getScrollFeature().ensureColumnVisible(scrollColumn);
      }
      if (exists(scrollIndex)) {
        this.gridBodyCon.getScrollFeature().ensureIndexVisible(scrollIndex, scrollType);
      }
      this.animationFrameService.flushAllFrames();
      this.focusService.setFocusedCell(focusIndex, focusColumn, null, true);
      if (this.rangeService) {
        var cellPosition = { rowIndex: focusIndex, rowPinned: null, column: focusColumn };
        this.rangeService.setRangeToCell(cellPosition);
      }
    };
    NavigationService2.prototype.onPageDown = function(gridCell) {
      if (this.isTimeSinceLastPageEventToRecent()) {
        return;
      }
      var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
      var scrollPosition = gridBodyCon.getScrollFeature().getVScrollPosition();
      var scrollbarWidth = this.gridOptionsWrapper.getScrollbarWidth();
      var pixelsInOnePage = scrollPosition.bottom - scrollPosition.top;
      if (this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()) {
        pixelsInOnePage -= scrollbarWidth;
      }
      var pagingPixelOffset = this.paginationProxy.getPixelOffset();
      var currentPageBottomPixel = scrollPosition.top + pixelsInOnePage;
      var currentPageBottomRow = this.paginationProxy.getRowIndexAtPixel(currentPageBottomPixel + pagingPixelOffset);
      var scrollIndex = currentPageBottomRow;
      var currentCellPixel = this.paginationProxy.getRow(gridCell.rowIndex).rowTop;
      var nextCellPixel = currentCellPixel + pixelsInOnePage - pagingPixelOffset;
      var focusIndex = this.paginationProxy.getRowIndexAtPixel(nextCellPixel + pagingPixelOffset);
      var pageLastRow = this.paginationProxy.getPageLastRow();
      if (focusIndex > pageLastRow) {
        focusIndex = pageLastRow;
      }
      if (scrollIndex > pageLastRow) {
        scrollIndex = pageLastRow;
      }
      this.navigateTo({
        scrollIndex,
        scrollType: "top",
        scrollColumn: null,
        focusIndex,
        focusColumn: gridCell.column
      });
      this.setTimeLastPageEventProcessed();
    };
    NavigationService2.prototype.onPageUp = function(gridCell) {
      if (this.isTimeSinceLastPageEventToRecent()) {
        return;
      }
      var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
      var scrollPosition = gridBodyCon.getScrollFeature().getVScrollPosition();
      var scrollbarWidth = this.gridOptionsWrapper.getScrollbarWidth();
      var pixelsInOnePage = scrollPosition.bottom - scrollPosition.top;
      if (this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()) {
        pixelsInOnePage -= scrollbarWidth;
      }
      var pagingPixelOffset = this.paginationProxy.getPixelOffset();
      var currentPageTopPixel = scrollPosition.top;
      var currentPageTopRow = this.paginationProxy.getRowIndexAtPixel(currentPageTopPixel + pagingPixelOffset);
      var scrollIndex = currentPageTopRow;
      var currentRowNode = this.paginationProxy.getRow(gridCell.rowIndex);
      var nextCellPixel = currentRowNode.rowTop + currentRowNode.rowHeight - pixelsInOnePage - pagingPixelOffset;
      var focusIndex = this.paginationProxy.getRowIndexAtPixel(nextCellPixel + pagingPixelOffset);
      var firstRow = this.paginationProxy.getPageFirstRow();
      if (focusIndex < firstRow) {
        focusIndex = firstRow;
      }
      if (scrollIndex < firstRow) {
        scrollIndex = firstRow;
      }
      this.navigateTo({
        scrollIndex,
        scrollType: "bottom",
        scrollColumn: null,
        focusIndex,
        focusColumn: gridCell.column
      });
      this.setTimeLastPageEventProcessed();
    };
    NavigationService2.prototype.getIndexToFocus = function(indexToScrollTo, isDown) {
      var indexToFocus = indexToScrollTo;
      if (isDown) {
        var node = this.paginationProxy.getRow(indexToScrollTo);
        if (node && node.stub) {
          indexToFocus -= 1;
        }
      }
      return indexToFocus;
    };
    NavigationService2.prototype.onCtrlUpOrDown = function(key, gridCell) {
      var upKey = key === KeyCode.UP;
      var rowIndexToScrollTo = upKey ? this.paginationProxy.getPageFirstRow() : this.paginationProxy.getPageLastRow();
      this.navigateTo({
        scrollIndex: rowIndexToScrollTo,
        scrollType: null,
        scrollColumn: gridCell.column,
        focusIndex: this.getIndexToFocus(rowIndexToScrollTo, !upKey),
        focusColumn: gridCell.column
      });
    };
    NavigationService2.prototype.onCtrlLeftOrRight = function(key, gridCell) {
      var leftKey = key === KeyCode.LEFT;
      var allColumns = this.columnModel.getAllDisplayedColumns();
      var isRtl = this.gridOptionsWrapper.isEnableRtl();
      var columnToSelect = leftKey !== isRtl ? allColumns[0] : last(allColumns);
      this.navigateTo({
        scrollIndex: gridCell.rowIndex,
        scrollType: null,
        scrollColumn: columnToSelect,
        focusIndex: gridCell.rowIndex,
        focusColumn: columnToSelect
      });
    };
    NavigationService2.prototype.onHomeOrEndKey = function(key) {
      var homeKey = key === KeyCode.PAGE_HOME;
      var allColumns = this.columnModel.getAllDisplayedColumns();
      var columnToSelect = homeKey ? allColumns[0] : last(allColumns);
      var scrollIndex = homeKey ? this.paginationProxy.getPageFirstRow() : this.paginationProxy.getPageLastRow();
      this.navigateTo({
        scrollIndex,
        scrollType: null,
        scrollColumn: columnToSelect,
        focusIndex: this.getIndexToFocus(scrollIndex, !homeKey),
        focusColumn: columnToSelect
      });
    };
    NavigationService2.prototype.onTabKeyDown = function(previous, keyboardEvent) {
      var backwards = keyboardEvent.shiftKey;
      var movedToNextCell = this.tabToNextCellCommon(previous, backwards);
      if (movedToNextCell) {
        keyboardEvent.preventDefault();
        return;
      }
      if (backwards) {
        var _a = previous.getRowPosition(), rowIndex = _a.rowIndex, rowPinned = _a.rowPinned;
        var firstRow = rowPinned ? rowIndex === 0 : rowIndex === this.paginationProxy.getPageFirstRow();
        if (firstRow) {
          keyboardEvent.preventDefault();
          var headerRowIndex = this.headerNavigationService.getHeaderRowCount() - 1;
          var column = last(this.columnModel.getAllDisplayedColumns());
          this.focusService.focusHeaderPosition({ headerRowIndex, column });
        }
      } else {
        if (previous instanceof CellCtrl) {
          previous.focusCell(true);
        }
        if (this.focusService.focusNextGridCoreContainer(false)) {
          keyboardEvent.preventDefault();
        }
      }
    };
    NavigationService2.prototype.tabToNextCell = function(backwards) {
      var focusedCell = this.focusService.getFocusedCell();
      if (!focusedCell) {
        return false;
      }
      var cellOrRow = this.getCellByPosition(focusedCell);
      if (!cellOrRow) {
        cellOrRow = this.rowRenderer.getRowByPosition(focusedCell);
        if (!cellOrRow || !cellOrRow.isFullWidth()) {
          return false;
        }
      }
      return this.tabToNextCellCommon(cellOrRow, backwards);
    };
    NavigationService2.prototype.tabToNextCellCommon = function(previous, backwards) {
      var editing = previous.isEditing();
      if (!editing && previous instanceof CellCtrl) {
        var cell = previous;
        var row = cell.getRowCtrl();
        if (row) {
          editing = row.isEditing();
        }
      }
      var res;
      if (editing) {
        if (this.gridOptionsWrapper.isFullRowEdit()) {
          res = this.moveToNextEditingRow(previous, backwards);
        } else {
          res = this.moveToNextEditingCell(previous, backwards);
        }
      } else {
        res = this.moveToNextCellNotEditing(previous, backwards);
      }
      return res || !!this.focusService.getFocusedHeader();
    };
    NavigationService2.prototype.moveToNextEditingCell = function(previousCell, backwards) {
      var previousPos = previousCell.getCellPosition();
      previousCell.stopEditing();
      var nextCell = this.findNextCellToFocusOn(previousPos, backwards, true);
      if (nextCell == null) {
        return false;
      }
      nextCell.startEditing(null, null, true);
      nextCell.focusCell(false);
      return true;
    };
    NavigationService2.prototype.moveToNextEditingRow = function(previousCell, backwards) {
      var previousPos = previousCell.getCellPosition();
      var nextCell = this.findNextCellToFocusOn(previousPos, backwards, true);
      if (nextCell == null) {
        return false;
      }
      var nextPos = nextCell.getCellPosition();
      var previousEditable = this.isCellEditable(previousPos);
      var nextEditable = this.isCellEditable(nextPos);
      var rowsMatch = nextPos && previousPos.rowIndex === nextPos.rowIndex && previousPos.rowPinned === nextPos.rowPinned;
      if (previousEditable) {
        previousCell.setFocusOutOnEditor();
      }
      if (!rowsMatch) {
        var pRow = previousCell.getRowCtrl();
        pRow.stopEditing();
        var nRow = nextCell.getRowCtrl();
        nRow.startRowEditing();
      }
      if (nextEditable) {
        nextCell.setFocusInOnEditor();
        nextCell.focusCell();
      } else {
        nextCell.focusCell(true);
      }
      return true;
    };
    NavigationService2.prototype.moveToNextCellNotEditing = function(previousCell, backwards) {
      var displayedColumns = this.columnModel.getAllDisplayedColumns();
      var cellPos;
      if (previousCell instanceof RowCtrl) {
        cellPos = __assign$a(__assign$a({}, previousCell.getRowPosition()), { column: backwards ? displayedColumns[0] : last(displayedColumns) });
      } else {
        cellPos = previousCell.getCellPosition();
      }
      var nextCell = this.findNextCellToFocusOn(cellPos, backwards, false);
      if (nextCell instanceof CellCtrl) {
        nextCell.focusCell(true);
      } else if (nextCell) {
        return this.tryToFocusFullWidthRow(nextCell.getRowPosition(), backwards);
      }
      return exists(nextCell);
    };
    NavigationService2.prototype.findNextCellToFocusOn = function(previousPosition, backwards, startEditing) {
      var nextPosition = previousPosition;
      while (true) {
        if (!backwards) {
          nextPosition = this.getLastCellOfColSpan(nextPosition);
        }
        nextPosition = this.cellNavigationService.getNextTabbedCell(nextPosition, backwards);
        var userFunc = this.gridOptionsWrapper.getTabToNextCellFunc();
        if (exists(userFunc)) {
          var params2 = {
            backwards,
            editing: startEditing,
            previousCellPosition: previousPosition,
            nextCellPosition: nextPosition ? nextPosition : null,
            api: this.gridOptionsWrapper.getApi(),
            columnApi: this.gridOptionsWrapper.getColumnApi()
          };
          var userCell = userFunc(params2);
          if (exists(userCell)) {
            if (userCell.floating) {
              doOnce(function() {
                console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?");
              }, "no floating in userCell");
              userCell.rowPinned = userCell.floating;
            }
            nextPosition = {
              rowIndex: userCell.rowIndex,
              column: userCell.column,
              rowPinned: userCell.rowPinned
            };
          } else {
            nextPosition = null;
          }
        }
        if (!nextPosition) {
          return null;
        }
        if (nextPosition.rowIndex < 0) {
          var headerLen = this.headerNavigationService.getHeaderRowCount();
          this.focusService.focusHeaderPosition({ headerRowIndex: headerLen + nextPosition.rowIndex, column: nextPosition.column });
          return null;
        }
        var fullRowEdit = this.gridOptionsWrapper.isFullRowEdit();
        if (startEditing && !fullRowEdit) {
          var cellIsEditable = this.isCellEditable(nextPosition);
          if (!cellIsEditable) {
            continue;
          }
        }
        this.ensureCellVisible(nextPosition);
        var nextCell = this.getCellByPosition(nextPosition);
        if (!nextCell) {
          var row = this.rowRenderer.getRowByPosition(nextPosition);
          if (!row || !row.isFullWidth()) {
            continue;
          } else {
            return row;
          }
        }
        if (nextCell.isSuppressNavigable()) {
          continue;
        }
        if (this.rangeService) {
          this.rangeService.setRangeToCell(nextPosition);
        }
        return nextCell;
      }
    };
    NavigationService2.prototype.isCellEditable = function(cell) {
      var rowNode = this.lookupRowNodeForCell(cell);
      if (rowNode) {
        return cell.column.isCellEditable(rowNode);
      }
      return false;
    };
    NavigationService2.prototype.getCellByPosition = function(cellPosition) {
      var rowCtrl = this.rowRenderer.getRowByPosition(cellPosition);
      if (!rowCtrl) {
        return null;
      }
      return rowCtrl.getCellCtrl(cellPosition.column);
    };
    NavigationService2.prototype.lookupRowNodeForCell = function(cell) {
      if (cell.rowPinned === Constants.PINNED_TOP) {
        return this.pinnedRowModel.getPinnedTopRow(cell.rowIndex);
      }
      if (cell.rowPinned === Constants.PINNED_BOTTOM) {
        return this.pinnedRowModel.getPinnedBottomRow(cell.rowIndex);
      }
      return this.paginationProxy.getRow(cell.rowIndex);
    };
    NavigationService2.prototype.navigateToNextCell = function(event, key, currentCell, allowUserOverride) {
      var nextCell = currentCell;
      var hitEdgeOfGrid = false;
      while (nextCell && (nextCell === currentCell || !this.isValidNavigateCell(nextCell))) {
        if (this.gridOptionsWrapper.isEnableRtl()) {
          if (key === KeyCode.LEFT) {
            nextCell = this.getLastCellOfColSpan(nextCell);
          }
        } else if (key === KeyCode.RIGHT) {
          nextCell = this.getLastCellOfColSpan(nextCell);
        }
        nextCell = this.cellNavigationService.getNextCellToFocus(key, nextCell);
        hitEdgeOfGrid = missing(nextCell);
      }
      if (hitEdgeOfGrid && event && event.keyCode === KeyCode.UP) {
        nextCell = {
          rowIndex: -1,
          rowPinned: null,
          column: currentCell.column
        };
      }
      if (allowUserOverride) {
        var userFunc = this.gridOptionsWrapper.getNavigateToNextCellFunc();
        if (exists(userFunc)) {
          var params2 = {
            key,
            previousCellPosition: currentCell,
            nextCellPosition: nextCell ? nextCell : null,
            event,
            api: this.gridOptionsWrapper.getApi(),
            columnApi: this.gridOptionsWrapper.getColumnApi()
          };
          var userCell = userFunc(params2);
          if (exists(userCell)) {
            if (userCell.floating) {
              doOnce(function() {
                console.warn("AG Grid: tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?");
              }, "no floating in userCell");
              userCell.rowPinned = userCell.floating;
            }
            nextCell = {
              rowPinned: userCell.rowPinned,
              rowIndex: userCell.rowIndex,
              column: userCell.column
            };
          } else {
            nextCell = null;
          }
        }
      }
      if (!nextCell) {
        return;
      }
      if (nextCell.rowIndex < 0) {
        var headerLen = this.headerNavigationService.getHeaderRowCount();
        this.focusService.focusHeaderPosition({ headerRowIndex: headerLen + nextCell.rowIndex, column: currentCell.column });
        return;
      }
      var normalisedPosition = this.getNormalisedPosition(nextCell);
      if (normalisedPosition) {
        this.focusPosition(normalisedPosition);
      } else {
        this.tryToFocusFullWidthRow(nextCell);
      }
    };
    NavigationService2.prototype.getNormalisedPosition = function(cellPosition) {
      this.ensureCellVisible(cellPosition);
      var cellComp = this.getCellByPosition(cellPosition);
      if (!cellComp) {
        return null;
      }
      cellPosition = cellComp.getCellPosition();
      this.ensureCellVisible(cellPosition);
      return cellPosition;
    };
    NavigationService2.prototype.tryToFocusFullWidthRow = function(position, backwards) {
      if (backwards === void 0) {
        backwards = false;
      }
      var displayedColumns = this.columnModel.getAllDisplayedColumns();
      var rowComp = this.rowRenderer.getRowByPosition(position);
      if (!rowComp || !rowComp.isFullWidth()) {
        return false;
      }
      var cellPosition = {
        rowIndex: position.rowIndex,
        rowPinned: position.rowPinned,
        column: position.column || (backwards ? last(displayedColumns) : displayedColumns[0])
      };
      this.focusPosition(cellPosition);
      return true;
    };
    NavigationService2.prototype.focusPosition = function(cellPosition) {
      this.focusService.setFocusedCell(cellPosition.rowIndex, cellPosition.column, cellPosition.rowPinned, true);
      if (this.rangeService) {
        this.rangeService.setRangeToCell(cellPosition);
      }
    };
    NavigationService2.prototype.isValidNavigateCell = function(cell) {
      var rowNode = this.rowPositionUtils.getRowNode(cell);
      return !!rowNode;
    };
    NavigationService2.prototype.getLastCellOfColSpan = function(cell) {
      var cellCtrl = this.getCellByPosition(cell);
      if (!cellCtrl) {
        return cell;
      }
      var colSpanningList = cellCtrl.getColSpanningList();
      if (colSpanningList.length === 1) {
        return cell;
      }
      return {
        rowIndex: cell.rowIndex,
        column: last(colSpanningList),
        rowPinned: cell.rowPinned
      };
    };
    NavigationService2.prototype.ensureCellVisible = function(gridCell) {
      if (missing(gridCell.rowPinned)) {
        this.gridBodyCon.getScrollFeature().ensureIndexVisible(gridCell.rowIndex);
      }
      if (!gridCell.column.isPinned()) {
        this.gridBodyCon.getScrollFeature().ensureColumnVisible(gridCell.column);
      }
      this.gridBodyCon.getScrollFeature().horizontallyScrollHeaderCenterAndFloatingCenter();
      this.animationFrameService.flushAllFrames();
    };
    __decorate$1M([
      Autowired("mouseEventService")
    ], NavigationService2.prototype, "mouseEventService", void 0);
    __decorate$1M([
      Autowired("paginationProxy")
    ], NavigationService2.prototype, "paginationProxy", void 0);
    __decorate$1M([
      Autowired("focusService")
    ], NavigationService2.prototype, "focusService", void 0);
    __decorate$1M([
      Autowired("animationFrameService")
    ], NavigationService2.prototype, "animationFrameService", void 0);
    __decorate$1M([
      Optional("rangeService")
    ], NavigationService2.prototype, "rangeService", void 0);
    __decorate$1M([
      Autowired("columnModel")
    ], NavigationService2.prototype, "columnModel", void 0);
    __decorate$1M([
      Autowired("ctrlsService")
    ], NavigationService2.prototype, "ctrlsService", void 0);
    __decorate$1M([
      Autowired("rowRenderer")
    ], NavigationService2.prototype, "rowRenderer", void 0);
    __decorate$1M([
      Autowired("headerNavigationService")
    ], NavigationService2.prototype, "headerNavigationService", void 0);
    __decorate$1M([
      Autowired("rowPositionUtils")
    ], NavigationService2.prototype, "rowPositionUtils", void 0);
    __decorate$1M([
      Autowired("cellNavigationService")
    ], NavigationService2.prototype, "cellNavigationService", void 0);
    __decorate$1M([
      Autowired("pinnedRowModel")
    ], NavigationService2.prototype, "pinnedRowModel", void 0);
    __decorate$1M([
      PostConstruct
    ], NavigationService2.prototype, "postConstruct", null);
    NavigationService2 = __decorate$1M([
      Bean("navigationService")
    ], NavigationService2);
    return NavigationService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1Z = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1N = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param$8 = function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  var RowContainerHeightService = function(_super) {
    __extends$1Z(RowContainerHeightService2, _super);
    function RowContainerHeightService2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.scrollY = 0;
      _this.uiBodyHeight = 0;
      return _this;
    }
    RowContainerHeightService2.prototype.agWire = function(loggerFactory) {
      this.logger = loggerFactory.create("RowContainerHeightService");
    };
    RowContainerHeightService2.prototype.postConstruct = function() {
      this.addManagedListener(this.eventService, Events.EVENT_BODY_HEIGHT_CHANGED, this.updateOffset.bind(this));
      this.maxDivHeight = getMaxDivHeight();
      this.logger.log("maxDivHeight = " + this.maxDivHeight);
    };
    RowContainerHeightService2.prototype.isStretching = function() {
      return this.stretching;
    };
    RowContainerHeightService2.prototype.getDivStretchOffset = function() {
      return this.divStretchOffset;
    };
    RowContainerHeightService2.prototype.updateOffset = function() {
      if (!this.stretching) {
        return;
      }
      var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
      var newScrollY = gridBodyCon.getScrollFeature().getVScrollPosition().top;
      var newBodyHeight = this.getUiBodyHeight();
      var atLeastOneChanged = newScrollY !== this.scrollY || newBodyHeight !== this.uiBodyHeight;
      if (atLeastOneChanged) {
        this.scrollY = newScrollY;
        this.uiBodyHeight = newBodyHeight;
        this.calculateOffset();
      }
    };
    RowContainerHeightService2.prototype.calculateOffset = function() {
      this.setUiContainerHeight(this.maxDivHeight);
      this.pixelsToShave = this.modelHeight - this.uiContainerHeight;
      this.maxScrollY = this.uiContainerHeight - this.uiBodyHeight;
      var scrollPercent = this.scrollY / this.maxScrollY;
      var divStretchOffset = scrollPercent * this.pixelsToShave;
      this.logger.log("Div Stretch Offset = " + divStretchOffset + " (" + this.pixelsToShave + " * " + scrollPercent + ")");
      this.setDivStretchOffset(divStretchOffset);
    };
    RowContainerHeightService2.prototype.setUiContainerHeight = function(height) {
      if (height !== this.uiContainerHeight) {
        this.uiContainerHeight = height;
        this.eventService.dispatchEvent({ type: Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED });
      }
    };
    RowContainerHeightService2.prototype.clearOffset = function() {
      this.setUiContainerHeight(this.modelHeight);
      this.pixelsToShave = 0;
      this.setDivStretchOffset(0);
    };
    RowContainerHeightService2.prototype.setDivStretchOffset = function(newOffset) {
      var newOffsetFloor = typeof newOffset === "number" ? Math.floor(newOffset) : null;
      if (this.divStretchOffset === newOffsetFloor) {
        return;
      }
      this.divStretchOffset = newOffsetFloor;
      this.eventService.dispatchEvent({ type: Events.EVENT_HEIGHT_SCALE_CHANGED });
    };
    RowContainerHeightService2.prototype.setModelHeight = function(modelHeight) {
      this.modelHeight = modelHeight;
      this.stretching = modelHeight != null && this.maxDivHeight > 0 && modelHeight > this.maxDivHeight;
      if (this.stretching) {
        this.calculateOffset();
      } else {
        this.clearOffset();
      }
    };
    RowContainerHeightService2.prototype.getUiContainerHeight = function() {
      return this.uiContainerHeight;
    };
    RowContainerHeightService2.prototype.getRealPixelPosition = function(modelPixel) {
      return modelPixel - this.divStretchOffset;
    };
    RowContainerHeightService2.prototype.getUiBodyHeight = function() {
      var gridBodyCon = this.ctrlsService.getGridBodyCtrl();
      var pos = gridBodyCon.getScrollFeature().getVScrollPosition();
      return pos.bottom - pos.top;
    };
    RowContainerHeightService2.prototype.getScrollPositionForPixel = function(rowTop) {
      if (this.pixelsToShave <= 0) {
        return rowTop;
      }
      var modelMaxScroll = this.modelHeight - this.getUiBodyHeight();
      var scrollPercent = rowTop / modelMaxScroll;
      var scrollPixel = this.maxScrollY * scrollPercent;
      return scrollPixel;
    };
    __decorate$1N([
      Autowired("ctrlsService")
    ], RowContainerHeightService2.prototype, "ctrlsService", void 0);
    __decorate$1N([
      __param$8(0, Qualifier("loggerFactory"))
    ], RowContainerHeightService2.prototype, "agWire", null);
    __decorate$1N([
      PostConstruct
    ], RowContainerHeightService2.prototype, "postConstruct", null);
    RowContainerHeightService2 = __decorate$1N([
      Bean("rowContainerHeightService")
    ], RowContainerHeightService2);
    return RowContainerHeightService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1_ = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1O = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var SelectableService = function(_super) {
    __extends$1_(SelectableService2, _super);
    function SelectableService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    SelectableService2.prototype.init = function() {
      this.groupSelectsChildren = this.gridOptionsWrapper.isGroupSelectsChildren();
      this.isRowSelectableFunc = this.gridOptionsWrapper.getIsRowSelectableFunc();
    };
    SelectableService2.prototype.updateSelectableAfterGrouping = function(rowNode) {
      if (this.isRowSelectableFunc) {
        var nextChildrenFunc = function(node) {
          return node.childrenAfterGroup;
        };
        this.recurseDown(rowNode.childrenAfterGroup, nextChildrenFunc);
      }
    };
    SelectableService2.prototype.updateSelectableAfterFiltering = function(rowNode) {
      if (this.isRowSelectableFunc) {
        var nextChildrenFunc = function(node) {
          return node.childrenAfterFilter;
        };
        this.recurseDown(rowNode.childrenAfterGroup, nextChildrenFunc);
      }
    };
    SelectableService2.prototype.recurseDown = function(children2, nextChildrenFunc) {
      var _this = this;
      if (!children2) {
        return;
      }
      children2.forEach(function(child) {
        if (!child.group) {
          return;
        }
        if (child.hasChildren()) {
          _this.recurseDown(nextChildrenFunc(child), nextChildrenFunc);
        }
        var rowSelectable;
        if (_this.groupSelectsChildren) {
          var firstSelectable = find(nextChildrenFunc(child), "selectable", true);
          rowSelectable = exists(firstSelectable);
        } else {
          rowSelectable = _this.isRowSelectableFunc ? _this.isRowSelectableFunc(child) : false;
        }
        child.setRowSelectable(rowSelectable);
      });
    };
    __decorate$1O([
      PostConstruct
    ], SelectableService2.prototype, "init", null);
    SelectableService2 = __decorate$1O([
      Bean("selectableService")
    ], SelectableService2);
    return SelectableService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$1$ = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1P = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var PaginationComp = function(_super) {
    __extends$1$(PaginationComp2, _super);
    function PaginationComp2() {
      var _this = _super.call(this) || this;
      _this.previousAndFirstButtonsDisabled = false;
      _this.nextButtonDisabled = false;
      _this.lastButtonDisabled = false;
      return _this;
    }
    PaginationComp2.prototype.postConstruct = function() {
      var _this = this;
      var isRtl = this.gridOptionsWrapper.isEnableRtl();
      this.setTemplate(this.getTemplate());
      this.btFirst.insertAdjacentElement("afterbegin", createIconNoSpan(isRtl ? "last" : "first", this.gridOptionsWrapper));
      this.btPrevious.insertAdjacentElement("afterbegin", createIconNoSpan(isRtl ? "next" : "previous", this.gridOptionsWrapper));
      this.btNext.insertAdjacentElement("afterbegin", createIconNoSpan(isRtl ? "previous" : "next", this.gridOptionsWrapper));
      this.btLast.insertAdjacentElement("afterbegin", createIconNoSpan(isRtl ? "first" : "last", this.gridOptionsWrapper));
      var isPaging = this.gridOptionsWrapper.isPagination();
      var paginationPanelEnabled = isPaging && !this.gridOptionsWrapper.isSuppressPaginationPanel();
      if (!paginationPanelEnabled) {
        this.setDisplayed(false);
        return;
      }
      this.addManagedListener(this.eventService, Events.EVENT_PAGINATION_CHANGED, this.onPaginationChanged.bind(this));
      [
        { el: this.btFirst, fn: this.onBtFirst.bind(this) },
        { el: this.btPrevious, fn: this.onBtPrevious.bind(this) },
        { el: this.btNext, fn: this.onBtNext.bind(this) },
        { el: this.btLast, fn: this.onBtLast.bind(this) }
      ].forEach(function(item) {
        var el = item.el, fn = item.fn;
        _this.addManagedListener(el, "click", fn);
        _this.addManagedListener(el, "keydown", function(e) {
          if (e.keyCode === KeyCode.ENTER || e.keyCode === KeyCode.SPACE) {
            e.preventDefault();
            fn();
          }
        });
      });
      this.onPaginationChanged();
    };
    PaginationComp2.prototype.onPaginationChanged = function() {
      this.enableOrDisableButtons();
      this.updateRowLabels();
      this.setCurrentPageLabel();
      this.setTotalLabels();
    };
    PaginationComp2.prototype.onBtFirst = function() {
      if (!this.previousAndFirstButtonsDisabled) {
        this.paginationProxy.goToFirstPage();
      }
    };
    PaginationComp2.prototype.setCurrentPageLabel = function() {
      var pagesExist = this.paginationProxy.getTotalPages() > 0;
      var currentPage = this.paginationProxy.getCurrentPage();
      var toDisplay = pagesExist ? currentPage + 1 : 0;
      this.lbCurrent.innerHTML = this.formatNumber(toDisplay);
    };
    PaginationComp2.prototype.formatNumber = function(value) {
      var userFunc = this.gridOptionsWrapper.getPaginationNumberFormatterFunc();
      if (userFunc) {
        return userFunc({ value });
      }
      return formatNumberCommas(value);
    };
    PaginationComp2.prototype.getTemplate = function() {
      var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();
      var strPage = localeTextFunc("page", "Page");
      var strTo = localeTextFunc("to", "to");
      var strOf = localeTextFunc("of", "of");
      var strFirst = localeTextFunc("firstPage", "First Page");
      var strPrevious = localeTextFunc("previousPage", "Previous Page");
      var strNext = localeTextFunc("nextPage", "Next Page");
      var strLast = localeTextFunc("lastPage", "Last Page");
      var compId = this.getCompId();
      return '<div class="ag-paging-panel ag-unselectable" id="ag-' + compId + '">\n                <span class="ag-paging-row-summary-panel" role="status">\n                    <span id="ag-' + compId + '-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-' + compId + '-to">' + strTo + '</span>\n                    <span id="ag-' + compId + '-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-' + compId + '-of">' + strOf + '</span>\n                    <span id="ag-' + compId + '-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div ref="btFirst" class="ag-paging-button" role="button" aria-label="' + strFirst + '" tabindex="0"></div>\n                    <div ref="btPrevious" class="ag-paging-button" role="button" aria-label="' + strPrevious + '" tabindex="0"></div>\n                    <span class="ag-paging-description" role="status">\n                        <span id="ag-' + compId + '-start-page">' + strPage + '</span>\n                        <span id="ag-' + compId + '-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-' + compId + '-of-page">' + strOf + '</span>\n                        <span id="ag-' + compId + '-of-page-number" ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div ref="btNext" class="ag-paging-button" role="button" aria-label="' + strNext + '" tabindex="0"></div>\n                    <div ref="btLast" class="ag-paging-button" role="button" aria-label="' + strLast + '" tabindex="0"></div>\n                </span>\n            </div>';
    };
    PaginationComp2.prototype.onBtNext = function() {
      if (!this.nextButtonDisabled) {
        this.paginationProxy.goToNextPage();
      }
    };
    PaginationComp2.prototype.onBtPrevious = function() {
      if (!this.previousAndFirstButtonsDisabled) {
        this.paginationProxy.goToPreviousPage();
      }
    };
    PaginationComp2.prototype.onBtLast = function() {
      if (!this.lastButtonDisabled) {
        this.paginationProxy.goToLastPage();
      }
    };
    PaginationComp2.prototype.enableOrDisableButtons = function() {
      var currentPage = this.paginationProxy.getCurrentPage();
      var maxRowFound = this.paginationProxy.isLastPageFound();
      var totalPages = this.paginationProxy.getTotalPages();
      this.previousAndFirstButtonsDisabled = currentPage === 0;
      addOrRemoveCssClass(this.btFirst, "ag-disabled", this.previousAndFirstButtonsDisabled);
      setAriaDisabled(this.btFirst, this.previousAndFirstButtonsDisabled);
      addOrRemoveCssClass(this.btPrevious, "ag-disabled", this.previousAndFirstButtonsDisabled);
      setAriaDisabled(this.btPrevious, this.previousAndFirstButtonsDisabled);
      var zeroPagesToDisplay = this.isZeroPagesToDisplay();
      var onLastPage = maxRowFound && currentPage === totalPages - 1;
      this.nextButtonDisabled = onLastPage || zeroPagesToDisplay;
      addOrRemoveCssClass(this.btNext, "ag-disabled", this.nextButtonDisabled);
      setAriaDisabled(this.btNext, this.nextButtonDisabled);
      this.lastButtonDisabled = !maxRowFound || zeroPagesToDisplay || currentPage === totalPages - 1;
      addOrRemoveCssClass(this.btLast, "ag-disabled", this.lastButtonDisabled);
      setAriaDisabled(this.btLast, this.lastButtonDisabled);
    };
    PaginationComp2.prototype.updateRowLabels = function() {
      var currentPage = this.paginationProxy.getCurrentPage();
      var pageSize = this.paginationProxy.getPageSize();
      var maxRowFound = this.paginationProxy.isLastPageFound();
      var rowCount = this.paginationProxy.isLastPageFound() ? this.paginationProxy.getMasterRowCount() : null;
      var startRow;
      var endRow;
      if (this.isZeroPagesToDisplay()) {
        startRow = endRow = 0;
      } else {
        startRow = pageSize * currentPage + 1;
        endRow = startRow + pageSize - 1;
        if (maxRowFound && endRow > rowCount) {
          endRow = rowCount;
        }
      }
      this.lbFirstRowOnPage.innerHTML = this.formatNumber(startRow);
      if (this.rowNodeBlockLoader.isLoading()) {
        this.lbLastRowOnPage.innerHTML = "?";
      } else {
        this.lbLastRowOnPage.innerHTML = this.formatNumber(endRow);
      }
    };
    PaginationComp2.prototype.isZeroPagesToDisplay = function() {
      var maxRowFound = this.paginationProxy.isLastPageFound();
      var totalPages = this.paginationProxy.getTotalPages();
      return maxRowFound && totalPages === 0;
    };
    PaginationComp2.prototype.setTotalLabels = function() {
      var lastPageFound = this.paginationProxy.isLastPageFound();
      var totalPages = this.paginationProxy.getTotalPages();
      var rowCount = lastPageFound ? this.paginationProxy.getMasterRowCount() : null;
      if (lastPageFound) {
        this.lbTotal.innerHTML = this.formatNumber(totalPages);
        this.lbRecordCount.innerHTML = this.formatNumber(rowCount);
      } else {
        var moreText = this.gridOptionsWrapper.getLocaleTextFunc()("more", "more");
        this.lbTotal.innerHTML = moreText;
        this.lbRecordCount.innerHTML = moreText;
      }
    };
    __decorate$1P([
      Autowired("paginationProxy")
    ], PaginationComp2.prototype, "paginationProxy", void 0);
    __decorate$1P([
      Autowired("rowNodeBlockLoader")
    ], PaginationComp2.prototype, "rowNodeBlockLoader", void 0);
    __decorate$1P([
      RefSelector("btFirst")
    ], PaginationComp2.prototype, "btFirst", void 0);
    __decorate$1P([
      RefSelector("btPrevious")
    ], PaginationComp2.prototype, "btPrevious", void 0);
    __decorate$1P([
      RefSelector("btNext")
    ], PaginationComp2.prototype, "btNext", void 0);
    __decorate$1P([
      RefSelector("btLast")
    ], PaginationComp2.prototype, "btLast", void 0);
    __decorate$1P([
      RefSelector("lbRecordCount")
    ], PaginationComp2.prototype, "lbRecordCount", void 0);
    __decorate$1P([
      RefSelector("lbFirstRowOnPage")
    ], PaginationComp2.prototype, "lbFirstRowOnPage", void 0);
    __decorate$1P([
      RefSelector("lbLastRowOnPage")
    ], PaginationComp2.prototype, "lbLastRowOnPage", void 0);
    __decorate$1P([
      RefSelector("lbCurrent")
    ], PaginationComp2.prototype, "lbCurrent", void 0);
    __decorate$1P([
      RefSelector("lbTotal")
    ], PaginationComp2.prototype, "lbTotal", void 0);
    __decorate$1P([
      PostConstruct
    ], PaginationComp2.prototype, "postConstruct", null);
    return PaginationComp2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$20 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1Q = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var DEBOUNCE_DELAY = 50;
  var ResizeObserverService = function(_super) {
    __extends$20(ResizeObserverService2, _super);
    function ResizeObserverService2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.polyfillFunctions = [];
      return _this;
    }
    ResizeObserverService2.prototype.observeResize = function(element2, callback) {
      var _this = this;
      var debouncedCallback = debounce(callback, DEBOUNCE_DELAY);
      var useBrowserResizeObserver = function() {
        var resizeObserver = new window.ResizeObserver(debouncedCallback);
        resizeObserver.observe(element2);
        return function() {
          return resizeObserver.disconnect();
        };
      };
      var usePolyfill = function() {
        var widthLastTime = offsetWidth(element2);
        var heightLastTime = offsetHeight(element2);
        var running = true;
        var periodicallyCheckWidthAndHeight = function() {
          if (running) {
            var newWidth = offsetWidth(element2);
            var newHeight = offsetHeight(element2);
            var changed = newWidth !== widthLastTime || newHeight !== heightLastTime;
            if (changed) {
              widthLastTime = newWidth;
              heightLastTime = newHeight;
              callback();
            }
            _this.doNextPolyfillTurn(periodicallyCheckWidthAndHeight);
          }
        };
        periodicallyCheckWidthAndHeight();
        return function() {
          return running = false;
        };
      };
      var suppressResize = this.gridOptionsWrapper.isSuppressBrowserResizeObserver();
      var resizeObserverExists = !!window.ResizeObserver;
      if (resizeObserverExists && !suppressResize) {
        return useBrowserResizeObserver();
      } else {
        return usePolyfill();
      }
    };
    ResizeObserverService2.prototype.doNextPolyfillTurn = function(func) {
      this.polyfillFunctions.push(func);
      this.schedulePolyfill();
    };
    ResizeObserverService2.prototype.schedulePolyfill = function() {
      var _this = this;
      if (this.polyfillScheduled) {
        return;
      }
      var executeAllFuncs = function() {
        var funcs = _this.polyfillFunctions;
        _this.polyfillScheduled = false;
        _this.polyfillFunctions = [];
        funcs.forEach(function(f) {
          return f();
        });
      };
      this.polyfillScheduled = true;
      this.getFrameworkOverrides().setTimeout(executeAllFuncs, DEBOUNCE_DELAY);
    };
    ResizeObserverService2 = __decorate$1Q([
      Bean("resizeObserverService")
    ], ResizeObserverService2);
    return ResizeObserverService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$21 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1R = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var LoadingType;
  (function(LoadingType2) {
    LoadingType2[LoadingType2["Loading"] = 0] = "Loading";
    LoadingType2[LoadingType2["NoRows"] = 1] = "NoRows";
  })(LoadingType || (LoadingType = {}));
  var OverlayWrapperComponent = function(_super) {
    __extends$21(OverlayWrapperComponent2, _super);
    function OverlayWrapperComponent2() {
      var _this = _super.call(this, OverlayWrapperComponent2.TEMPLATE) || this;
      _this.inProgress = false;
      _this.destroyRequested = false;
      return _this;
    }
    OverlayWrapperComponent2.prototype.updateLayoutClasses = function(cssClass, params2) {
      addOrRemoveCssClass(this.eOverlayWrapper, exports2.LayoutCssClasses.AUTO_HEIGHT, params2.autoHeight);
      addOrRemoveCssClass(this.eOverlayWrapper, exports2.LayoutCssClasses.NORMAL, params2.normal);
      addOrRemoveCssClass(this.eOverlayWrapper, exports2.LayoutCssClasses.PRINT, params2.print);
    };
    OverlayWrapperComponent2.prototype.postConstruct = function() {
      this.createManagedBean(new LayoutFeature(this));
      this.setDisplayed(false);
      this.addManagedListener(this.eventService, Events.EVENT_ROW_DATA_CHANGED, this.onRowDataChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_ROW_DATA_UPDATED, this.onRowDataChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.onNewColumnsLoaded.bind(this));
      if (this.gridOptionsWrapper.isRowModelDefault() && !this.gridOptionsWrapper.getRowData()) {
        this.showLoadingOverlay();
      }
      this.gridApi.registerOverlayWrapperComp(this);
    };
    OverlayWrapperComponent2.prototype.setWrapperTypeClass = function(loadingType) {
      addOrRemoveCssClass(this.eOverlayWrapper, "ag-overlay-loading-wrapper", loadingType === LoadingType.Loading);
      addOrRemoveCssClass(this.eOverlayWrapper, "ag-overlay-no-rows-wrapper", loadingType === LoadingType.NoRows);
    };
    OverlayWrapperComponent2.prototype.showLoadingOverlay = function() {
      if (this.gridOptionsWrapper.isSuppressLoadingOverlay()) {
        return;
      }
      var workItem = this.userComponentFactory.newLoadingOverlayComponent({
        api: this.gridOptionsWrapper.getApi()
      });
      this.showOverlay(workItem, LoadingType.Loading);
    };
    OverlayWrapperComponent2.prototype.showNoRowsOverlay = function() {
      if (this.gridOptionsWrapper.isSuppressNoRowsOverlay()) {
        return;
      }
      var workItem = this.userComponentFactory.newNoRowsOverlayComponent({
        api: this.gridOptionsWrapper.getApi()
      });
      this.showOverlay(workItem, LoadingType.NoRows);
    };
    OverlayWrapperComponent2.prototype.showOverlay = function(workItem, type) {
      var _this = this;
      if (this.inProgress) {
        return;
      }
      this.setWrapperTypeClass(type);
      this.destroyActiveOverlay();
      this.inProgress = true;
      if (workItem) {
        workItem.then(function(comp) {
          _this.inProgress = false;
          _this.eOverlayWrapper.appendChild(comp.getGui());
          _this.activeOverlay = comp;
          if (_this.destroyRequested) {
            _this.destroyRequested = false;
            _this.destroyActiveOverlay();
          }
        });
      }
      this.setDisplayed(true);
    };
    OverlayWrapperComponent2.prototype.destroyActiveOverlay = function() {
      if (this.inProgress) {
        this.destroyRequested = true;
        return;
      }
      if (!this.activeOverlay) {
        return;
      }
      this.activeOverlay = this.getContext().destroyBean(this.activeOverlay);
      clearElement(this.eOverlayWrapper);
    };
    OverlayWrapperComponent2.prototype.hideOverlay = function() {
      this.destroyActiveOverlay();
      this.setDisplayed(false);
    };
    OverlayWrapperComponent2.prototype.destroy = function() {
      this.destroyActiveOverlay();
      _super.prototype.destroy.call(this);
    };
    OverlayWrapperComponent2.prototype.showOrHideOverlay = function() {
      var isEmpty = this.paginationProxy.isEmpty();
      var isSuppressNoRowsOverlay = this.gridOptionsWrapper.isSuppressNoRowsOverlay();
      if (isEmpty && !isSuppressNoRowsOverlay) {
        this.showNoRowsOverlay();
      } else {
        this.hideOverlay();
      }
    };
    OverlayWrapperComponent2.prototype.onRowDataChanged = function() {
      this.showOrHideOverlay();
    };
    OverlayWrapperComponent2.prototype.onNewColumnsLoaded = function() {
      if (this.columnModel.isReady() && !this.paginationProxy.isEmpty()) {
        this.hideOverlay();
      }
    };
    OverlayWrapperComponent2.TEMPLATE = '\n        <div class="ag-overlay" aria-hidden="true">\n            <div class="ag-overlay-panel">\n                <div class="ag-overlay-wrapper" ref="eOverlayWrapper"></div>\n            </div>\n        </div>';
    __decorate$1R([
      Autowired("userComponentFactory")
    ], OverlayWrapperComponent2.prototype, "userComponentFactory", void 0);
    __decorate$1R([
      Autowired("paginationProxy")
    ], OverlayWrapperComponent2.prototype, "paginationProxy", void 0);
    __decorate$1R([
      Autowired("gridApi")
    ], OverlayWrapperComponent2.prototype, "gridApi", void 0);
    __decorate$1R([
      Autowired("columnModel")
    ], OverlayWrapperComponent2.prototype, "columnModel", void 0);
    __decorate$1R([
      RefSelector("eOverlayWrapper")
    ], OverlayWrapperComponent2.prototype, "eOverlayWrapper", void 0);
    __decorate$1R([
      PostConstruct
    ], OverlayWrapperComponent2.prototype, "postConstruct", null);
    return OverlayWrapperComponent2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$22 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1S = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AgGroupComponent = function(_super) {
    __extends$22(AgGroupComponent2, _super);
    function AgGroupComponent2(params2) {
      if (params2 === void 0) {
        params2 = {};
      }
      var _this = _super.call(this, AgGroupComponent2.getTemplate(params2)) || this;
      _this.suppressEnabledCheckbox = true;
      _this.suppressOpenCloseIcons = false;
      var title = params2.title, enabled = params2.enabled, items = params2.items, suppressEnabledCheckbox = params2.suppressEnabledCheckbox, suppressOpenCloseIcons = params2.suppressOpenCloseIcons;
      _this.title = title;
      _this.cssIdentifier = params2.cssIdentifier || "default";
      _this.enabled = enabled != null ? enabled : true;
      _this.items = items || [];
      _this.alignItems = params2.alignItems || "center";
      if (suppressEnabledCheckbox != null) {
        _this.suppressEnabledCheckbox = suppressEnabledCheckbox;
      }
      if (suppressOpenCloseIcons != null) {
        _this.suppressOpenCloseIcons = suppressOpenCloseIcons;
      }
      return _this;
    }
    AgGroupComponent2.getTemplate = function(params2) {
      var cssIdentifier = params2.cssIdentifier || "default";
      var direction = params2.direction || "vertical";
      return '<div class="ag-group ag-' + cssIdentifier + '-group" role="presentation">\n            <div class="ag-group-title-bar ag-' + cssIdentifier + '-group-title-bar ag-unselectable" ref="eTitleBar" role="button">\n                <span class="ag-group-title-bar-icon ag-' + cssIdentifier + '-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>\n                <span class="ag-group-title-bar-icon ag-' + cssIdentifier + '-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>\n                <span ref="eTitle" class="ag-group-title ag-' + cssIdentifier + '-group-title"></span>\n            </div>\n            <div ref="eToolbar" class="ag-group-toolbar ag-' + cssIdentifier + '-group-toolbar">\n                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>\n            </div>\n            <div ref="eContainer" class="ag-group-container ag-group-container-' + direction + " ag-" + cssIdentifier + '-group-container"></div>\n        </div>';
    };
    AgGroupComponent2.prototype.postConstruct = function() {
      if (this.items.length) {
        var initialItems = this.items;
        this.items = [];
        this.addItems(initialItems);
      }
      var localeTextFunc = this.gridOptionsWrapper.getLocaleTextFunc();
      this.cbGroupEnabled.setLabel(localeTextFunc("enabled", "Enabled"));
      if (this.title) {
        this.setTitle(this.title);
      }
      if (this.enabled) {
        this.setEnabled(this.enabled);
      }
      this.setAlignItems(this.alignItems);
      this.hideEnabledCheckbox(this.suppressEnabledCheckbox);
      this.hideOpenCloseIcons(this.suppressOpenCloseIcons);
      this.setupExpandContract();
      this.refreshAriaStatus();
      this.refreshChildDisplay();
    };
    AgGroupComponent2.prototype.setupExpandContract = function() {
      var _this = this;
      this.eGroupClosedIcon.appendChild(createIcon("columnSelectClosed", this.gridOptionsWrapper, null));
      this.eGroupOpenedIcon.appendChild(createIcon("columnSelectOpen", this.gridOptionsWrapper, null));
      this.addManagedListener(this.eTitleBar, "click", function() {
        return _this.toggleGroupExpand();
      });
      this.addManagedListener(this.eTitleBar, "keydown", function(e) {
        switch (e.keyCode) {
          case KeyCode.ENTER:
          case KeyCode.SPACE:
            e.preventDefault();
            _this.toggleGroupExpand();
            break;
          case KeyCode.RIGHT:
          case KeyCode.LEFT:
            e.preventDefault();
            _this.toggleGroupExpand(e.keyCode === KeyCode.RIGHT);
            break;
        }
      });
    };
    AgGroupComponent2.prototype.refreshAriaStatus = function() {
      if (!this.suppressOpenCloseIcons) {
        setAriaExpanded(this.eTitleBar, this.expanded);
      }
    };
    AgGroupComponent2.prototype.refreshChildDisplay = function() {
      var showIcon = !this.suppressOpenCloseIcons;
      setDisplayed(this.eToolbar, this.expanded && !this.suppressEnabledCheckbox);
      setDisplayed(this.eGroupOpenedIcon, showIcon && this.expanded);
      setDisplayed(this.eGroupClosedIcon, showIcon && !this.expanded);
    };
    AgGroupComponent2.prototype.isExpanded = function() {
      return this.expanded;
    };
    AgGroupComponent2.prototype.setAlignItems = function(alignment) {
      var eGui = this.getGui();
      if (this.alignItems !== alignment) {
        removeCssClass(eGui, "ag-group-item-alignment-" + this.alignItems);
      }
      this.alignItems = alignment;
      var newCls = "ag-group-item-alignment-" + this.alignItems;
      addCssClass(eGui, newCls);
      return this;
    };
    AgGroupComponent2.prototype.toggleGroupExpand = function(expanded) {
      if (this.suppressOpenCloseIcons) {
        this.expanded = true;
        this.refreshChildDisplay();
        setDisplayed(this.eContainer, true);
        return this;
      }
      expanded = expanded != null ? expanded : !this.expanded;
      if (this.expanded === expanded) {
        return this;
      }
      this.expanded = expanded;
      this.refreshAriaStatus();
      this.refreshChildDisplay();
      setDisplayed(this.eContainer, expanded);
      this.dispatchEvent({ type: this.expanded ? AgGroupComponent2.EVENT_EXPANDED : AgGroupComponent2.EVENT_COLLAPSED });
      return this;
    };
    AgGroupComponent2.prototype.addItems = function(items) {
      var _this = this;
      items.forEach(function(item) {
        return _this.addItem(item);
      });
    };
    AgGroupComponent2.prototype.addItem = function(item) {
      var container = this.eContainer;
      var el = item instanceof Component ? item.getGui() : item;
      addCssClass(el, "ag-group-item");
      addCssClass(el, "ag-" + this.cssIdentifier + "-group-item");
      container.appendChild(el);
      this.items.push(el);
    };
    AgGroupComponent2.prototype.hideItem = function(hide, index) {
      var itemToHide = this.items[index];
      addOrRemoveCssClass(itemToHide, "ag-hidden", hide);
    };
    AgGroupComponent2.prototype.setTitle = function(title) {
      this.eTitle.innerText = title;
      return this;
    };
    AgGroupComponent2.prototype.addCssClassToTitleBar = function(cssClass) {
      addCssClass(this.eTitleBar, cssClass);
    };
    AgGroupComponent2.prototype.setEnabled = function(enabled, skipToggle) {
      this.enabled = enabled;
      this.refreshDisabledStyles();
      this.toggleGroupExpand(enabled);
      if (!skipToggle) {
        this.cbGroupEnabled.setValue(enabled);
      }
      return this;
    };
    AgGroupComponent2.prototype.isEnabled = function() {
      return this.enabled;
    };
    AgGroupComponent2.prototype.onEnableChange = function(callbackFn) {
      var _this = this;
      this.cbGroupEnabled.onValueChange(function(newSelection) {
        _this.setEnabled(newSelection, true);
        callbackFn(newSelection);
      });
      return this;
    };
    AgGroupComponent2.prototype.hideEnabledCheckbox = function(hide) {
      this.suppressEnabledCheckbox = hide;
      this.refreshChildDisplay();
      this.refreshDisabledStyles();
      return this;
    };
    AgGroupComponent2.prototype.hideOpenCloseIcons = function(hide) {
      this.suppressOpenCloseIcons = hide;
      if (hide) {
        this.toggleGroupExpand(true);
      }
      return this;
    };
    AgGroupComponent2.prototype.refreshDisabledStyles = function() {
      addOrRemoveCssClass(this.getGui(), "ag-disabled", !this.enabled);
      if (this.suppressEnabledCheckbox && !this.enabled) {
        addCssClass(this.eTitleBar, "ag-disabled-group-title-bar");
        this.eTitleBar.removeAttribute("tabindex");
      } else {
        removeCssClass(this.eTitleBar, "ag-disabled-group-title-bar");
        this.eTitleBar.setAttribute("tabindex", "0");
      }
      addOrRemoveCssClass(this.eContainer, "ag-disabled-group-container", !this.enabled);
    };
    AgGroupComponent2.EVENT_EXPANDED = "expanded";
    AgGroupComponent2.EVENT_COLLAPSED = "collapsed";
    __decorate$1S([
      RefSelector("eTitleBar")
    ], AgGroupComponent2.prototype, "eTitleBar", void 0);
    __decorate$1S([
      RefSelector("eGroupOpenedIcon")
    ], AgGroupComponent2.prototype, "eGroupOpenedIcon", void 0);
    __decorate$1S([
      RefSelector("eGroupClosedIcon")
    ], AgGroupComponent2.prototype, "eGroupClosedIcon", void 0);
    __decorate$1S([
      RefSelector("eToolbar")
    ], AgGroupComponent2.prototype, "eToolbar", void 0);
    __decorate$1S([
      RefSelector("cbGroupEnabled")
    ], AgGroupComponent2.prototype, "cbGroupEnabled", void 0);
    __decorate$1S([
      RefSelector("eTitle")
    ], AgGroupComponent2.prototype, "eTitle", void 0);
    __decorate$1S([
      RefSelector("eContainer")
    ], AgGroupComponent2.prototype, "eContainer", void 0);
    __decorate$1S([
      PostConstruct
    ], AgGroupComponent2.prototype, "postConstruct", null);
    return AgGroupComponent2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$23 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1T = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var RESIZE_CONTAINER_STYLE = "ag-resizer-wrapper";
  var RESIZE_TEMPLATE = '<div class="' + RESIZE_CONTAINER_STYLE + '">\n        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>\n        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>\n        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>\n        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>\n        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>\n        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>\n        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>\n        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>\n    </div>';
  var PositionableFeature = function(_super) {
    __extends$23(PositionableFeature2, _super);
    function PositionableFeature2(element2, config2) {
      var _this = _super.call(this) || this;
      _this.element = element2;
      _this.dragStartPosition = {
        x: 0,
        y: 0
      };
      _this.position = {
        x: 0,
        y: 0
      };
      _this.lastSize = {
        width: -1,
        height: -1
      };
      _this.positioned = false;
      _this.resizersAdded = false;
      _this.resizeListeners = [];
      _this.boundaryEl = null;
      _this.isResizing = false;
      _this.isMoving = false;
      _this.resizable = {};
      _this.movable = false;
      _this.currentResizer = null;
      _this.config = assign2({}, { popup: false }, config2);
      return _this;
    }
    PositionableFeature2.prototype.center = function() {
      var _a = this.offsetParent, clientHeight = _a.clientHeight, clientWidth = _a.clientWidth;
      var x = clientWidth / 2 - this.getWidth() / 2;
      var y = clientHeight / 2 - this.getHeight() / 2;
      this.offsetElement(x, y);
    };
    PositionableFeature2.prototype.initialisePosition = function() {
      var _a = this.config, centered = _a.centered, forcePopupParentAsOffsetParent = _a.forcePopupParentAsOffsetParent, minWidth = _a.minWidth, width = _a.width, minHeight = _a.minHeight, height = _a.height, x = _a.x, y = _a.y;
      if (!this.offsetParent) {
        this.setOffsetParent();
      }
      var computedMinHeight = 0;
      var computedMinWidth = 0;
      var isVisible2 = !!this.element.offsetParent;
      if (isVisible2) {
        var boundaryEl = this.findBoundaryElement();
        var offsetParentComputedStyles = window.getComputedStyle(boundaryEl);
        if (offsetParentComputedStyles.minWidth != null) {
          var paddingWidth = boundaryEl.offsetWidth - this.element.offsetWidth;
          computedMinWidth = parseInt(offsetParentComputedStyles.minWidth, 10) - paddingWidth;
        }
        if (offsetParentComputedStyles.minHeight != null) {
          var paddingHeight = boundaryEl.offsetHeight - this.element.offsetHeight;
          computedMinHeight = parseInt(offsetParentComputedStyles.minHeight, 10) - paddingHeight;
        }
      }
      this.minHeight = minHeight || computedMinHeight;
      this.minWidth = minWidth || computedMinWidth;
      if (width) {
        this.setWidth(width);
      }
      if (height) {
        this.setHeight(height);
      }
      if (!width || !height) {
        this.refreshSize();
      }
      if (centered) {
        this.center();
      } else if (x || y) {
        this.offsetElement(x, y);
      } else if (isVisible2 && forcePopupParentAsOffsetParent && this.boundaryEl) {
        var top_1 = parseFloat(this.boundaryEl.style.top);
        var left = parseFloat(this.boundaryEl.style.left);
        this.offsetElement(isNaN(left) ? 0 : left, isNaN(top_1) ? 0 : top_1);
      }
      this.positioned = !!this.offsetParent;
    };
    PositionableFeature2.prototype.isPositioned = function() {
      return this.positioned;
    };
    PositionableFeature2.prototype.getPosition = function() {
      return this.position;
    };
    PositionableFeature2.prototype.setMovable = function(movable, moveElement) {
      if (!this.config.popup || movable === this.movable) {
        return;
      }
      this.movable = movable;
      var params2 = this.moveElementDragListener || {
        eElement: moveElement,
        onDragStart: this.onMoveStart.bind(this),
        onDragging: this.onMove.bind(this),
        onDragStop: this.onMoveEnd.bind(this)
      };
      if (movable) {
        this.dragService.addDragSource(params2);
        this.moveElementDragListener = params2;
      } else {
        this.dragService.removeDragSource(params2);
        this.moveElementDragListener = void 0;
      }
    };
    PositionableFeature2.prototype.setResizable = function(resizable) {
      var _this = this;
      this.clearResizeListeners();
      if (resizable) {
        this.addResizers();
      } else {
        this.removeResizers();
      }
      if (typeof resizable === "boolean") {
        if (resizable === false) {
          return;
        }
        resizable = {
          topLeft: resizable,
          top: resizable,
          topRight: resizable,
          right: resizable,
          bottomRight: resizable,
          bottom: resizable,
          bottomLeft: resizable,
          left: resizable
        };
      }
      Object.keys(resizable).forEach(function(side) {
        var resizableStructure = resizable;
        var val = !!resizableStructure[side];
        var resizerEl = _this.getResizerElement(side);
        var params2 = {
          dragStartPixels: 0,
          eElement: resizerEl,
          onDragStart: function(e) {
            return _this.onResizeStart(e, side);
          },
          onDragging: _this.onResize.bind(_this),
          onDragStop: function(e) {
            return _this.onResizeEnd(e, side);
          }
        };
        if (!!_this.resizable[side] !== val || !_this.isAlive() && !val) {
          if (val) {
            _this.dragService.addDragSource(params2);
            _this.resizeListeners.push(params2);
            resizerEl.style.pointerEvents = "all";
          } else {
            resizerEl.style.pointerEvents = "none";
          }
        }
      });
    };
    PositionableFeature2.prototype.removeSizeFromEl = function() {
      this.element.style.removeProperty("height");
      this.element.style.removeProperty("width");
      this.element.style.removeProperty("flex");
    };
    PositionableFeature2.prototype.restoreLastSize = function() {
      this.element.style.flex = "0 0 auto";
      var _a = this.lastSize, height = _a.height, width = _a.width;
      if (width !== -1) {
        this.element.style.width = width + "px";
      }
      if (height !== -1) {
        this.element.style.height = height + "px";
      }
    };
    PositionableFeature2.prototype.getHeight = function() {
      return this.element.offsetHeight;
    };
    PositionableFeature2.prototype.setHeight = function(height) {
      var popup = this.config.popup;
      var eGui = this.element;
      var isPercent = false;
      if (typeof height === "string" && height.indexOf("%") !== -1) {
        setFixedHeight(eGui, height);
        height = getAbsoluteHeight(eGui);
        isPercent = true;
      } else if (this.positioned) {
        var elRect = this.element.getBoundingClientRect();
        var parentRect = this.offsetParent.getBoundingClientRect();
        height = Math.max(this.minHeight, height);
        var clientHeight = this.offsetParent.clientHeight;
        var yPosition = popup ? this.position.y : elRect.top;
        var parentTop = popup ? 0 : parentRect.top;
        if (clientHeight && height + yPosition > clientHeight + parentTop) {
          height = clientHeight - yPosition;
        }
      }
      if (this.getHeight() === height) {
        return;
      }
      if (!isPercent) {
        if (popup) {
          setFixedHeight(eGui, height);
        } else {
          eGui.style.height = height + "px";
          eGui.style.flex = "0 0 auto";
          this.lastSize.height = typeof height === "number" ? height : parseFloat(height);
        }
      } else {
        eGui.style.maxHeight = "unset";
        eGui.style.minHeight = "unset";
      }
    };
    PositionableFeature2.prototype.getWidth = function() {
      return this.element.offsetWidth;
    };
    PositionableFeature2.prototype.setWidth = function(width) {
      var eGui = this.element;
      var popup = this.config.popup;
      var isPercent = false;
      if (typeof width === "string" && width.indexOf("%") !== -1) {
        setFixedWidth(eGui, width);
        width = getAbsoluteWidth(eGui);
        isPercent = true;
      } else if (this.positioned) {
        width = Math.max(this.minWidth, width);
        var clientWidth = this.offsetParent.clientWidth;
        var xPosition = popup ? this.position.x : this.element.getBoundingClientRect().left;
        if (clientWidth && width + xPosition > clientWidth) {
          width = clientWidth - xPosition;
        }
      }
      if (this.getWidth() === width) {
        return;
      }
      if (!isPercent) {
        if (this.config.popup) {
          setFixedWidth(eGui, width);
        } else {
          eGui.style.width = width + "px";
          eGui.style.flex = " unset";
          this.lastSize.width = typeof width === "number" ? width : parseFloat(width);
        }
      } else {
        eGui.style.maxWidth = "unset";
        eGui.style.minWidth = "unset";
      }
    };
    PositionableFeature2.prototype.offsetElement = function(x, y) {
      if (x === void 0) {
        x = 0;
      }
      if (y === void 0) {
        y = 0;
      }
      var ePopup = this.config.forcePopupParentAsOffsetParent ? this.boundaryEl : this.element;
      this.popupService.positionPopup({
        ePopup,
        x,
        y,
        keepWithinBounds: true
      });
      this.setPosition(parseFloat(ePopup.style.left), parseFloat(ePopup.style.top));
    };
    PositionableFeature2.prototype.setPosition = function(x, y) {
      this.position.x = x;
      this.position.y = y;
    };
    PositionableFeature2.prototype.updateDragStartPosition = function(x, y) {
      this.dragStartPosition = { x, y };
    };
    PositionableFeature2.prototype.calculateMouseMovement = function(params2) {
      var e = params2.e, isLeft = params2.isLeft, isTop = params2.isTop, anywhereWithin = params2.anywhereWithin, topBuffer = params2.topBuffer;
      var xDiff = e.clientX - this.dragStartPosition.x;
      var yDiff = e.clientY - this.dragStartPosition.y;
      var movementX = this.shouldSkipX(e, !!isLeft, !!anywhereWithin, xDiff) ? 0 : xDiff;
      var movementY = this.shouldSkipY(e, !!isTop, topBuffer, yDiff) ? 0 : yDiff;
      return { movementX, movementY };
    };
    PositionableFeature2.prototype.shouldSkipX = function(e, isLeft, anywhereWithin, diff) {
      var elRect = this.element.getBoundingClientRect();
      var parentRect = this.offsetParent.getBoundingClientRect();
      var boundaryElRect = this.boundaryEl.getBoundingClientRect();
      var xPosition = this.config.popup ? this.position.x : elRect.left;
      var skipX = xPosition <= 0 && parentRect.left >= e.clientX || parentRect.right <= e.clientX && parentRect.right <= boundaryElRect.right;
      if (skipX) {
        return true;
      }
      if (isLeft) {
        skipX = diff < 0 && e.clientX > xPosition + parentRect.left || diff > 0 && e.clientX < xPosition + parentRect.left;
      } else {
        if (anywhereWithin) {
          skipX = diff < 0 && e.clientX > boundaryElRect.right || diff > 0 && e.clientX < xPosition + parentRect.left;
        } else {
          skipX = diff < 0 && e.clientX > boundaryElRect.right || diff > 0 && e.clientX < boundaryElRect.right;
        }
      }
      return skipX;
    };
    PositionableFeature2.prototype.shouldSkipY = function(e, isTop, topBuffer, diff) {
      if (topBuffer === void 0) {
        topBuffer = 0;
      }
      var elRect = this.element.getBoundingClientRect();
      var parentRect = this.offsetParent.getBoundingClientRect();
      var boundaryElRect = this.boundaryEl.getBoundingClientRect();
      var yPosition = this.config.popup ? this.position.y : elRect.top;
      var skipY = yPosition <= 0 && parentRect.top >= e.clientY || parentRect.bottom <= e.clientY && parentRect.bottom <= boundaryElRect.bottom;
      if (skipY) {
        return true;
      }
      if (isTop) {
        skipY = diff < 0 && e.clientY > yPosition + parentRect.top + topBuffer || diff > 0 && e.clientY < yPosition + parentRect.top;
      } else {
        skipY = diff < 0 && e.clientY > boundaryElRect.bottom || diff > 0 && e.clientY < boundaryElRect.bottom;
      }
      return skipY;
    };
    PositionableFeature2.prototype.createResizeMap = function() {
      var eGui = this.element;
      this.resizerMap = {
        topLeft: { element: eGui.querySelector("[ref=eTopLeftResizer]") },
        top: { element: eGui.querySelector("[ref=eTopResizer]") },
        topRight: { element: eGui.querySelector("[ref=eTopRightResizer]") },
        right: { element: eGui.querySelector("[ref=eRightResizer]") },
        bottomRight: { element: eGui.querySelector("[ref=eBottomRightResizer]") },
        bottom: { element: eGui.querySelector("[ref=eBottomResizer]") },
        bottomLeft: { element: eGui.querySelector("[ref=eBottomLeftResizer]") },
        left: { element: eGui.querySelector("[ref=eLeftResizer]") }
      };
    };
    PositionableFeature2.prototype.addResizers = function() {
      if (this.resizersAdded) {
        return;
      }
      var eGui = this.element;
      if (!eGui) {
        return;
      }
      var parser = new DOMParser();
      var resizers = parser.parseFromString(RESIZE_TEMPLATE, "text/html").body;
      eGui.appendChild(resizers.firstChild);
      this.createResizeMap();
      this.resizersAdded = true;
    };
    PositionableFeature2.prototype.removeResizers = function() {
      this.resizerMap = void 0;
      var resizerEl = this.element.querySelector("." + RESIZE_CONTAINER_STYLE);
      if (resizerEl) {
        this.element.removeChild(resizerEl);
      }
      this.resizersAdded = false;
    };
    PositionableFeature2.prototype.getResizerElement = function(side) {
      return this.resizerMap[side].element;
    };
    PositionableFeature2.prototype.onResizeStart = function(e, side) {
      this.boundaryEl = this.findBoundaryElement();
      if (!this.positioned) {
        this.initialisePosition();
      }
      this.currentResizer = {
        isTop: !!side.match(/top/i),
        isRight: !!side.match(/right/i),
        isBottom: !!side.match(/bottom/i),
        isLeft: !!side.match(/left/i)
      };
      addCssClass(this.element, "ag-resizing");
      addCssClass(this.resizerMap[side].element, "ag-active");
      var _a = this.config, popup = _a.popup, forcePopupParentAsOffsetParent = _a.forcePopupParentAsOffsetParent;
      if (!popup && !forcePopupParentAsOffsetParent) {
        this.applySizeToSiblings(this.currentResizer.isBottom || this.currentResizer.isTop);
      }
      this.isResizing = true;
      this.updateDragStartPosition(e.clientX, e.clientY);
    };
    PositionableFeature2.prototype.getSiblings = function() {
      var element2 = this.element;
      var parent = element2.parentElement;
      if (!parent) {
        return null;
      }
      return Array.prototype.slice.call(parent.children).filter(function(el) {
        return !containsClass(el, "ag-hidden");
      });
    };
    PositionableFeature2.prototype.getMinSizeOfSiblings = function() {
      var siblings = this.getSiblings() || [];
      var height = 0;
      var width = 0;
      for (var i2 = 0; i2 < siblings.length; i2++) {
        var currentEl = siblings[i2];
        var isFlex = !!currentEl.style.flex && currentEl.style.flex !== "0 0 auto";
        if (currentEl === this.element) {
          continue;
        }
        var nextHeight = this.minHeight || 0;
        var nextWidth = this.minWidth || 0;
        if (isFlex) {
          var computedStyle = window.getComputedStyle(currentEl);
          if (computedStyle.minHeight) {
            nextHeight = parseInt(computedStyle.minHeight, 10);
          }
          if (computedStyle.minWidth) {
            nextWidth = parseInt(computedStyle.minWidth, 10);
          }
        } else {
          nextHeight = currentEl.offsetHeight;
          nextWidth = currentEl.offsetWidth;
        }
        height += nextHeight;
        width += nextWidth;
      }
      return { height, width };
    };
    PositionableFeature2.prototype.applySizeToSiblings = function(vertical) {
      var containerToFlex = null;
      var siblings = this.getSiblings();
      if (!siblings) {
        return;
      }
      for (var i2 = 0; i2 < siblings.length; i2++) {
        var el = siblings[i2];
        if (el === containerToFlex) {
          continue;
        }
        if (vertical) {
          el.style.height = el.offsetHeight + "px";
        } else {
          el.style.width = el.offsetWidth + "px";
        }
        el.style.flex = "0 0 auto";
        if (el === this.element) {
          containerToFlex = siblings[i2 + 1];
        }
      }
      if (containerToFlex) {
        containerToFlex.style.removeProperty("height");
        containerToFlex.style.removeProperty("min-height");
        containerToFlex.style.removeProperty("max-height");
        containerToFlex.style.flex = "1 1 auto";
      }
    };
    PositionableFeature2.prototype.onResize = function(e) {
      if (!this.isResizing || !this.currentResizer) {
        return;
      }
      var _a = this.config, popup = _a.popup, forcePopupParentAsOffsetParent = _a.forcePopupParentAsOffsetParent;
      var _b = this.currentResizer, isTop = _b.isTop, isRight = _b.isRight, isBottom = _b.isBottom, isLeft = _b.isLeft;
      var isHorizontal = isRight || isLeft;
      var isVertical = isBottom || isTop;
      var _c = this.calculateMouseMovement({ e, isLeft, isTop }), movementX = _c.movementX, movementY = _c.movementY;
      var xPosition = this.position.x;
      var yPosition = this.position.y;
      var offsetLeft = 0;
      var offsetTop = 0;
      if (isHorizontal && movementX) {
        var direction = isLeft ? -1 : 1;
        var oldWidth = this.getWidth();
        var newWidth = oldWidth + movementX * direction;
        var skipWidth = false;
        if (isLeft) {
          offsetLeft = oldWidth - newWidth;
          if (xPosition + offsetLeft <= 0 || newWidth <= this.minWidth) {
            skipWidth = true;
            offsetLeft = 0;
          }
        }
        if (!skipWidth) {
          this.setWidth(newWidth);
        }
      }
      if (isVertical && movementY) {
        var direction = isTop ? -1 : 1;
        var oldHeight = this.getHeight();
        var newHeight = oldHeight + movementY * direction;
        var skipHeight = false;
        if (isTop) {
          offsetTop = oldHeight - newHeight;
          if (yPosition + offsetTop <= 0 || newHeight <= this.minHeight) {
            skipHeight = true;
            offsetTop = 0;
          }
        } else {
          if (!this.config.popup && !this.config.forcePopupParentAsOffsetParent && oldHeight < newHeight && this.getMinSizeOfSiblings().height + newHeight > this.element.parentElement.offsetHeight) {
            skipHeight = true;
          }
        }
        if (!skipHeight) {
          this.setHeight(newHeight);
        }
      }
      this.updateDragStartPosition(e.clientX, e.clientY);
      if ((popup || forcePopupParentAsOffsetParent) && offsetLeft || offsetTop) {
        this.offsetElement(xPosition + offsetLeft, yPosition + offsetTop);
      }
    };
    PositionableFeature2.prototype.onResizeEnd = function(e, side) {
      this.isResizing = false;
      this.currentResizer = null;
      this.boundaryEl = null;
      var params2 = {
        type: "resize",
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi()
      };
      removeCssClass(this.element, "ag-resizing");
      removeCssClass(this.resizerMap[side].element, "ag-active");
      this.dispatchEvent(params2);
    };
    PositionableFeature2.prototype.refreshSize = function() {
      var eGui = this.element;
      if (this.config.popup) {
        if (!this.config.width) {
          this.setWidth(eGui.offsetWidth);
        }
        if (!this.config.height) {
          this.setHeight(eGui.offsetHeight);
        }
      }
    };
    PositionableFeature2.prototype.onMoveStart = function(e) {
      this.boundaryEl = this.findBoundaryElement();
      if (!this.positioned) {
        this.initialisePosition();
      }
      this.isMoving = true;
      addCssClass(this.element, "ag-moving");
      this.updateDragStartPosition(e.clientX, e.clientY);
    };
    PositionableFeature2.prototype.onMove = function(e) {
      if (!this.isMoving) {
        return;
      }
      var _a = this.position, x = _a.x, y = _a.y;
      var topBuffer;
      if (this.config.calculateTopBuffer) {
        topBuffer = this.config.calculateTopBuffer();
      }
      var _b = this.calculateMouseMovement({
        e,
        isTop: true,
        anywhereWithin: true,
        topBuffer
      }), movementX = _b.movementX, movementY = _b.movementY;
      this.offsetElement(x + movementX, y + movementY);
      this.updateDragStartPosition(e.clientX, e.clientY);
    };
    PositionableFeature2.prototype.onMoveEnd = function() {
      this.isMoving = false;
      this.boundaryEl = null;
      removeCssClass(this.element, "ag-moving");
    };
    PositionableFeature2.prototype.setOffsetParent = function() {
      if (this.config.forcePopupParentAsOffsetParent) {
        this.offsetParent = this.popupService.getPopupParent();
      } else {
        this.offsetParent = this.element.offsetParent;
      }
    };
    PositionableFeature2.prototype.findBoundaryElement = function() {
      var el = this.element;
      while (el) {
        if (window.getComputedStyle(el).position !== "static") {
          return el;
        }
        el = el.parentElement;
      }
      return this.element;
    };
    PositionableFeature2.prototype.clearResizeListeners = function() {
      while (this.resizeListeners.length) {
        var params2 = this.resizeListeners.pop();
        this.dragService.removeDragSource(params2);
      }
    };
    PositionableFeature2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
      if (this.moveElementDragListener) {
        this.dragService.removeDragSource(this.moveElementDragListener);
      }
      this.clearResizeListeners();
      this.removeResizers();
    };
    __decorate$1T([
      Autowired("popupService")
    ], PositionableFeature2.prototype, "popupService", void 0);
    __decorate$1T([
      Autowired("dragService")
    ], PositionableFeature2.prototype, "dragService", void 0);
    return PositionableFeature2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$24 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1U = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AgPanel = function(_super) {
    __extends$24(AgPanel2, _super);
    function AgPanel2(config2) {
      var _this = _super.call(this, AgPanel2.getTemplate(config2)) || this;
      _this.closable = true;
      _this.config = config2;
      return _this;
    }
    AgPanel2.getTemplate = function(config2) {
      var cssIdentifier = config2 && config2.cssIdentifier || "default";
      return '<div class="ag-panel ag-' + cssIdentifier + '-panel" tabindex="-1">\n            <div ref="eTitleBar" class="ag-panel-title-bar ag-' + cssIdentifier + '-panel-title-bar ag-unselectable">\n                <span ref="eTitle" class="ag-panel-title-bar-title ag-' + cssIdentifier + '-panel-title-bar-title"></span>\n                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-' + cssIdentifier + '-panel-title-bar-buttons"></div>\n            </div>\n            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-' + cssIdentifier + '-panel-content-wrapper"></div>\n        </div>';
    };
    AgPanel2.prototype.postConstruct = function() {
      var _this = this;
      var _a = this.config, component = _a.component, closable = _a.closable, hideTitleBar = _a.hideTitleBar, title = _a.title, _b = _a.minWidth, minWidth = _b === void 0 ? 250 : _b, width = _a.width, _c = _a.minHeight, minHeight = _c === void 0 ? 250 : _c, height = _a.height, centered = _a.centered, popup = _a.popup, x = _a.x, y = _a.y;
      this.positionableFeature = new PositionableFeature(this.getGui(), {
        minWidth,
        width,
        minHeight,
        height,
        centered,
        x,
        y,
        popup,
        calculateTopBuffer: function() {
          return _this.positionableFeature.getHeight() - _this.getBodyHeight();
        }
      });
      this.createManagedBean(this.positionableFeature);
      var eGui = this.getGui();
      if (component) {
        this.setBodyComponent(component);
      }
      if (!hideTitleBar) {
        if (title) {
          this.setTitle(title);
        }
        this.setClosable(closable != null ? closable : this.closable);
      } else {
        addCssClass(this.eTitleBar, "ag-hidden");
      }
      this.addManagedListener(this.eTitleBar, "mousedown", function(e) {
        if (eGui.contains(e.relatedTarget) || eGui.contains(document.activeElement) || _this.eTitleBarButtons.contains(e.target)) {
          e.preventDefault();
          return;
        }
        var focusEl = _this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");
        if (focusEl) {
          focusEl.focus();
        }
      });
      if (popup && this.positionableFeature.isPositioned()) {
        return;
      }
      if (this.renderComponent) {
        this.renderComponent();
      }
      this.positionableFeature.initialisePosition();
      this.eContentWrapper.style.height = "0";
    };
    AgPanel2.prototype.renderComponent = function() {
      var _this = this;
      var eGui = this.getGui();
      eGui.focus();
      this.close = function() {
        eGui.parentElement.removeChild(eGui);
        _this.destroy();
      };
    };
    AgPanel2.prototype.getHeight = function() {
      return this.positionableFeature.getHeight();
    };
    AgPanel2.prototype.setHeight = function(height) {
      this.positionableFeature.setHeight(height);
    };
    AgPanel2.prototype.getWidth = function() {
      return this.positionableFeature.getWidth();
    };
    AgPanel2.prototype.setWidth = function(width) {
      this.positionableFeature.setWidth(width);
    };
    AgPanel2.prototype.setClosable = function(closable) {
      if (closable !== this.closable) {
        this.closable = closable;
      }
      if (closable) {
        var closeButtonComp = this.closeButtonComp = new Component(AgPanel2.CLOSE_BTN_TEMPLATE);
        this.getContext().createBean(closeButtonComp);
        var eGui = closeButtonComp.getGui();
        eGui.appendChild(addCssClass(createIconNoSpan("close", this.gridOptionsWrapper), "ag-panel-title-bar-button-icon"));
        this.addTitleBarButton(closeButtonComp);
        closeButtonComp.addManagedListener(eGui, "click", this.onBtClose.bind(this));
      } else if (this.closeButtonComp) {
        var eGui = this.closeButtonComp.getGui();
        eGui.parentElement.removeChild(eGui);
        this.closeButtonComp = this.destroyBean(this.closeButtonComp);
      }
    };
    AgPanel2.prototype.setBodyComponent = function(bodyComponent) {
      bodyComponent.setParentComponent(this);
      this.eContentWrapper.appendChild(bodyComponent.getGui());
    };
    AgPanel2.prototype.addTitleBarButton = function(button, position) {
      var eTitleBarButtons = this.eTitleBarButtons;
      var buttons = eTitleBarButtons.children;
      var len2 = buttons.length;
      if (position == null) {
        position = len2;
      }
      position = Math.max(0, Math.min(position, len2));
      var eGui = button.getGui();
      addCssClass(eGui, "ag-panel-title-bar-button");
      if (position === 0) {
        eTitleBarButtons.insertAdjacentElement("afterbegin", eGui);
      } else if (position === len2) {
        eTitleBarButtons.insertAdjacentElement("beforeend", eGui);
      } else {
        buttons[position - 1].insertAdjacentElement("afterend", eGui);
      }
      button.setParentComponent(this);
    };
    AgPanel2.prototype.getBodyHeight = function() {
      return getInnerHeight(this.eContentWrapper);
    };
    AgPanel2.prototype.getBodyWidth = function() {
      return getInnerWidth(this.eContentWrapper);
    };
    AgPanel2.prototype.setTitle = function(title) {
      this.eTitle.innerText = title;
    };
    AgPanel2.prototype.onBtClose = function() {
      this.close();
    };
    AgPanel2.prototype.destroy = function() {
      if (this.closeButtonComp) {
        this.closeButtonComp = this.destroyBean(this.closeButtonComp);
      }
      var eGui = this.getGui();
      if (eGui && eGui.offsetParent) {
        this.close();
      }
      _super.prototype.destroy.call(this);
    };
    AgPanel2.CLOSE_BTN_TEMPLATE = '<div class="ag-button"></div>';
    __decorate$1U([
      RefSelector("eContentWrapper")
    ], AgPanel2.prototype, "eContentWrapper", void 0);
    __decorate$1U([
      RefSelector("eTitleBar")
    ], AgPanel2.prototype, "eTitleBar", void 0);
    __decorate$1U([
      RefSelector("eTitleBarButtons")
    ], AgPanel2.prototype, "eTitleBarButtons", void 0);
    __decorate$1U([
      RefSelector("eTitle")
    ], AgPanel2.prototype, "eTitle", void 0);
    __decorate$1U([
      PostConstruct
    ], AgPanel2.prototype, "postConstruct", null);
    return AgPanel2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$25 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __assign$b = function() {
    __assign$b = Object.assign || function(t) {
      for (var s, i2 = 1, n = arguments.length; i2 < n; i2++) {
        s = arguments[i2];
        for (var p2 in s)
          if (Object.prototype.hasOwnProperty.call(s, p2))
            t[p2] = s[p2];
      }
      return t;
    };
    return __assign$b.apply(this, arguments);
  };
  var __decorate$1V = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AgDialog = function(_super) {
    __extends$25(AgDialog2, _super);
    function AgDialog2(config2) {
      var _this = _super.call(this, __assign$b(__assign$b({}, config2), { popup: true })) || this;
      _this.isMaximizable = false;
      _this.isMaximized = false;
      _this.maximizeListeners = [];
      _this.resizeListenerDestroy = null;
      _this.lastPosition = {
        x: 0,
        y: 0,
        width: 0,
        height: 0
      };
      return _this;
    }
    AgDialog2.prototype.postConstruct = function() {
      var _this = this;
      var eGui = this.getGui();
      var _a = this.config, movable = _a.movable, resizable = _a.resizable, maximizable = _a.maximizable;
      addCssClass(eGui, "ag-dialog");
      _super.prototype.postConstruct.call(this);
      this.addManagedListener(eGui, "focusin", function(e) {
        if (eGui.contains(e.relatedTarget)) {
          return;
        }
        _this.popupService.bringPopupToFront(eGui);
      });
      if (movable) {
        this.setMovable(movable);
      }
      if (maximizable) {
        this.setMaximizable(maximizable);
      }
      if (resizable) {
        this.setResizable(resizable);
      }
    };
    AgDialog2.prototype.renderComponent = function() {
      var eGui = this.getGui();
      var _a = this.config, alwaysOnTop = _a.alwaysOnTop, modal = _a.modal, title = _a.title;
      var translate = this.gridOptionsWrapper.getLocaleTextFunc();
      var addPopupRes = this.popupService.addPopup({
        modal,
        eChild: eGui,
        closeOnEsc: true,
        closedCallback: this.destroy.bind(this),
        alwaysOnTop,
        ariaLabel: title || translate("ariaLabelDialog", "Dialog")
      });
      if (addPopupRes) {
        this.close = addPopupRes.hideFunc;
      }
    };
    AgDialog2.prototype.toggleMaximize = function() {
      var position = this.positionableFeature.getPosition();
      if (this.isMaximized) {
        var _a = this.lastPosition, x = _a.x, y = _a.y, width = _a.width, height = _a.height;
        this.setWidth(width);
        this.setHeight(height);
        this.positionableFeature.offsetElement(x, y);
      } else {
        this.lastPosition.width = this.getWidth();
        this.lastPosition.height = this.getHeight();
        this.lastPosition.x = position.x;
        this.lastPosition.y = position.y;
        this.positionableFeature.offsetElement(0, 0);
        this.setHeight("100%");
        this.setWidth("100%");
      }
      this.isMaximized = !this.isMaximized;
      this.refreshMaximizeIcon();
    };
    AgDialog2.prototype.refreshMaximizeIcon = function() {
      setDisplayed(this.maximizeIcon, !this.isMaximized);
      setDisplayed(this.minimizeIcon, this.isMaximized);
    };
    AgDialog2.prototype.clearMaximizebleListeners = function() {
      if (this.maximizeListeners.length) {
        this.maximizeListeners.forEach(function(destroyListener) {
          return destroyListener();
        });
        this.maximizeListeners.length = 0;
      }
      if (this.resizeListenerDestroy) {
        this.resizeListenerDestroy();
        this.resizeListenerDestroy = null;
      }
    };
    AgDialog2.prototype.destroy = function() {
      this.maximizeButtonComp = this.destroyBean(this.maximizeButtonComp);
      this.clearMaximizebleListeners();
      _super.prototype.destroy.call(this);
    };
    AgDialog2.prototype.setResizable = function(resizable) {
      this.positionableFeature.setResizable(resizable);
    };
    AgDialog2.prototype.setMovable = function(movable) {
      this.positionableFeature.setMovable(movable, this.eTitleBar);
    };
    AgDialog2.prototype.setMaximizable = function(maximizable) {
      var _this = this;
      if (!maximizable) {
        this.clearMaximizebleListeners();
        if (this.maximizeButtonComp) {
          this.destroyBean(this.maximizeButtonComp);
          this.maximizeButtonComp = this.maximizeIcon = this.minimizeIcon = void 0;
        }
        return;
      }
      var eTitleBar = this.eTitleBar;
      if (!eTitleBar || maximizable === this.isMaximizable) {
        return;
      }
      var maximizeButtonComp = this.maximizeButtonComp = this.createBean(new Component('<div class="ag-dialog-button"></span>'));
      var eGui = maximizeButtonComp.getGui();
      eGui.appendChild(this.maximizeIcon = createIconNoSpan("maximize", this.gridOptionsWrapper));
      addCssClass(this.maximizeIcon, "ag-panel-title-bar-button-icon");
      eGui.appendChild(this.minimizeIcon = createIconNoSpan("minimize", this.gridOptionsWrapper));
      addCssClass(this.minimizeIcon, "ag-panel-title-bar-button-icon");
      addCssClass(this.minimizeIcon, "ag-hidden");
      maximizeButtonComp.addManagedListener(eGui, "click", this.toggleMaximize.bind(this));
      this.addTitleBarButton(maximizeButtonComp, 0);
      this.maximizeListeners.push(this.addManagedListener(eTitleBar, "dblclick", this.toggleMaximize.bind(this)));
      this.resizeListenerDestroy = this.addManagedListener(this, "resize", function() {
        _this.isMaximized = false;
        _this.refreshMaximizeIcon();
      });
    };
    __decorate$1V([
      Autowired("popupService")
    ], AgDialog2.prototype, "popupService", void 0);
    return AgDialog2;
  }(AgPanel);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$26 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var AgInputTextField = function(_super) {
    __extends$26(AgInputTextField2, _super);
    function AgInputTextField2(config2, className, inputType) {
      if (className === void 0) {
        className = "ag-text-field";
      }
      if (inputType === void 0) {
        inputType = "text";
      }
      return _super.call(this, config2, className, inputType) || this;
    }
    AgInputTextField2.prototype.postConstruct = function() {
      _super.prototype.postConstruct.call(this);
      if (this.config.allowedCharPattern) {
        this.preventDisallowedCharacters();
      }
    };
    AgInputTextField2.prototype.setValue = function(value, silent) {
      var ret = _super.prototype.setValue.call(this, value, silent);
      if (this.eInput.value !== value) {
        this.eInput.value = exists(value) ? value : "";
      }
      return ret;
    };
    AgInputTextField2.prototype.preventDisallowedCharacters = function() {
      var pattern = new RegExp("[" + this.config.allowedCharPattern + "]");
      var preventDisallowedCharacters = function(event) {
        if (event.key && !pattern.test(event.key)) {
          event.preventDefault();
        }
      };
      this.addManagedListener(this.eInput, "keypress", preventDisallowedCharacters);
      this.addManagedListener(this.eInput, "paste", function(e) {
        var text2 = e.clipboardData.getData("text");
        if (some(text2, function(c) {
          return !pattern.test(c);
        })) {
          e.preventDefault();
        }
      });
    };
    return AgInputTextField2;
  }(AgAbstractInputField);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$27 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var AgInputTextArea = function(_super) {
    __extends$27(AgInputTextArea2, _super);
    function AgInputTextArea2(config2) {
      return _super.call(this, config2, "ag-text-area", null, "textarea") || this;
    }
    AgInputTextArea2.prototype.setValue = function(value, silent) {
      var ret = _super.prototype.setValue.call(this, value, silent);
      this.eInput.value = value;
      return ret;
    };
    AgInputTextArea2.prototype.setCols = function(cols) {
      this.eInput.cols = cols;
      return this;
    };
    AgInputTextArea2.prototype.setRows = function(rows) {
      this.eInput.rows = rows;
      return this;
    };
    return AgInputTextArea2;
  }(AgAbstractInputField);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$28 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1W = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AgSlider = function(_super) {
    __extends$28(AgSlider2, _super);
    function AgSlider2(config2) {
      var _this = _super.call(this, config2, AgSlider2.TEMPLATE) || this;
      _this.labelAlignment = "top";
      return _this;
    }
    AgSlider2.prototype.init = function() {
      addCssClass(this.eSlider.getGui(), "ag-slider-field");
    };
    AgSlider2.prototype.onValueChange = function(callbackFn) {
      var _this = this;
      var eventChanged = AgAbstractField.EVENT_CHANGED;
      this.addManagedListener(this.eText, eventChanged, function() {
        var textValue = parseFloat(_this.eText.getValue());
        _this.eSlider.setValue(textValue.toString(), true);
        callbackFn(textValue || 0);
      });
      this.addManagedListener(this.eSlider, eventChanged, function() {
        var sliderValue = _this.eSlider.getValue();
        _this.eText.setValue(sliderValue, true);
        callbackFn(parseFloat(sliderValue));
      });
      return this;
    };
    AgSlider2.prototype.setSliderWidth = function(width) {
      this.eSlider.setWidth(width);
      return this;
    };
    AgSlider2.prototype.setTextFieldWidth = function(width) {
      this.eText.setWidth(width);
      return this;
    };
    AgSlider2.prototype.setMinValue = function(minValue) {
      this.eSlider.setMinValue(minValue);
      this.eText.setMin(minValue);
      return this;
    };
    AgSlider2.prototype.setMaxValue = function(maxValue) {
      this.eSlider.setMaxValue(maxValue);
      this.eText.setMax(maxValue);
      return this;
    };
    AgSlider2.prototype.getValue = function() {
      return this.eText.getValue();
    };
    AgSlider2.prototype.setValue = function(value) {
      if (this.getValue() === value) {
        return this;
      }
      this.eText.setValue(value, true);
      this.eSlider.setValue(value, true);
      this.dispatchEvent({ type: AgAbstractField.EVENT_CHANGED });
      return this;
    };
    AgSlider2.prototype.setStep = function(step) {
      this.eSlider.setStep(step);
      this.eText.setStep(step);
      return this;
    };
    AgSlider2.TEMPLATE = '<div class="ag-slider">\n            <label ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range ref="eSlider"></ag-input-range>\n                <ag-input-number-field ref="eText"></ag-input-number-field>\n            </div>\n        </div>';
    __decorate$1W([
      RefSelector("eLabel")
    ], AgSlider2.prototype, "eLabel", void 0);
    __decorate$1W([
      RefSelector("eSlider")
    ], AgSlider2.prototype, "eSlider", void 0);
    __decorate$1W([
      RefSelector("eText")
    ], AgSlider2.prototype, "eText", void 0);
    __decorate$1W([
      PostConstruct
    ], AgSlider2.prototype, "init", null);
    return AgSlider2;
  }(AgAbstractLabel);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$29 = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1X = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AgColorPanel = function(_super) {
    __extends$29(AgColorPanel2, _super);
    function AgColorPanel2(config2) {
      var _this = _super.call(this, AgColorPanel2.TEMPLATE) || this;
      _this.H = 1;
      _this.S = 1;
      _this.B = 1;
      _this.A = 1;
      _this.isSpectrumDragging = false;
      _this.isSpectrumHueDragging = false;
      _this.isSpectrumAlphaDragging = false;
      _this.colorChanged = false;
      _this.picker = config2.picker;
      return _this;
    }
    AgColorPanel2.prototype.postConstruct = function() {
      var eGui = this.getGui();
      this.initRecentColors();
      this.addManagedListener(this.spectrumVal, "mousedown", this.onSpectrumDraggerDown.bind(this));
      this.addManagedListener(eGui, "mousemove", this.onSpectrumDraggerMove.bind(this));
      this.addManagedListener(this.spectrumHue, "mousedown", this.onSpectrumHueDown.bind(this));
      this.addManagedListener(eGui, "mousemove", this.onSpectrumHueMove.bind(this));
      this.addManagedListener(this.spectrumAlpha, "mousedown", this.onSpectrumAlphaDown.bind(this));
      this.addManagedListener(eGui, "mousemove", this.onSpectrumAlphaMove.bind(this));
      this.addManagedListener(document, "mouseup", this.onMouseUp.bind(this));
      this.addManagedListener(this.recentColors, "click", this.onRecentColorClick.bind(this));
    };
    AgColorPanel2.prototype.refreshSpectrumRect = function() {
      return this.spectrumValRect = this.spectrumVal.getBoundingClientRect();
    };
    AgColorPanel2.prototype.refreshHueRect = function() {
      return this.spectrumHueRect = this.spectrumHue.getBoundingClientRect();
    };
    AgColorPanel2.prototype.refreshAlphaRect = function() {
      return this.spectrumAlphaRect = this.spectrumAlpha.getBoundingClientRect();
    };
    AgColorPanel2.prototype.onSpectrumDraggerDown = function(e) {
      this.refreshSpectrumRect();
      this.isSpectrumDragging = true;
      this.moveDragger(e);
    };
    AgColorPanel2.prototype.onSpectrumDraggerMove = function(e) {
      if (this.isSpectrumDragging) {
        this.moveDragger(e);
      }
    };
    AgColorPanel2.prototype.onSpectrumHueDown = function(e) {
      this.refreshHueRect();
      this.isSpectrumHueDragging = true;
      this.moveHueSlider(e);
    };
    AgColorPanel2.prototype.onSpectrumHueMove = function(e) {
      if (this.isSpectrumHueDragging) {
        this.moveHueSlider(e);
      }
    };
    AgColorPanel2.prototype.onSpectrumAlphaDown = function(e) {
      this.refreshAlphaRect();
      this.isSpectrumAlphaDragging = true;
      this.moveAlphaSlider(e);
    };
    AgColorPanel2.prototype.onSpectrumAlphaMove = function(e) {
      if (this.isSpectrumAlphaDragging) {
        this.moveAlphaSlider(e);
      }
    };
    AgColorPanel2.prototype.onMouseUp = function() {
      this.isSpectrumDragging = false;
      this.isSpectrumHueDragging = false;
      this.isSpectrumAlphaDragging = false;
    };
    AgColorPanel2.prototype.moveDragger = function(e) {
      var valRect = this.spectrumValRect;
      if (valRect) {
        var x = e.clientX - valRect.left;
        var y = e.clientY - valRect.top;
        x = Math.max(x, 0);
        x = Math.min(x, valRect.width);
        y = Math.max(y, 0);
        y = Math.min(y, valRect.height);
        this.setSpectrumValue(x / valRect.width, 1 - y / valRect.height);
      }
    };
    AgColorPanel2.prototype.moveHueSlider = function(e) {
      var hueRect = this.spectrumHueRect;
      if (hueRect) {
        var slider = this.spectrumHueSlider;
        var sliderRect = slider.getBoundingClientRect();
        var x = e.clientX - hueRect.left;
        x = Math.max(x, 0);
        x = Math.min(x, hueRect.width);
        this.H = 1 - x / hueRect.width;
        slider.style.left = x + sliderRect.width / 2 + "px";
        this.update();
      }
    };
    AgColorPanel2.prototype.moveAlphaSlider = function(e) {
      var alphaRect = this.spectrumAlphaRect;
      if (alphaRect) {
        var slider = this.spectrumAlphaSlider;
        var sliderRect = slider.getBoundingClientRect();
        var x = e.clientX - alphaRect.left;
        x = Math.max(x, 0);
        x = Math.min(x, alphaRect.width);
        this.A = x / alphaRect.width;
        slider.style.left = x + sliderRect.width / 2 + "px";
        this.update();
      }
    };
    AgColorPanel2.prototype.update = function() {
      var color = Color.fromHSB(this.H * 360, this.S, this.B, this.A);
      var spectrumColor = Color.fromHSB(this.H * 360, 1, 1);
      var rgbaColor = color.toRgbaString();
      var colorPicker = this.picker;
      var existingColor = Color.fromString(colorPicker.getValue());
      if (existingColor.toRgbaString() !== rgbaColor) {
        this.colorChanged = true;
      }
      colorPicker.setValue(rgbaColor);
      this.spectrumColor.style.backgroundColor = spectrumColor.toRgbaString();
      this.spectrumDragger.style.backgroundColor = rgbaColor;
    };
    AgColorPanel2.prototype.setSpectrumValue = function(saturation, brightness) {
      var valRect = this.spectrumValRect || this.refreshSpectrumRect();
      if (valRect) {
        var dragger = this.spectrumDragger;
        var draggerRect = dragger.getBoundingClientRect();
        saturation = Math.max(0, saturation);
        saturation = Math.min(1, saturation);
        brightness = Math.max(0, brightness);
        brightness = Math.min(1, brightness);
        this.S = saturation;
        this.B = brightness;
        dragger.style.left = saturation * valRect.width - draggerRect.width / 2 + "px";
        dragger.style.top = (1 - brightness) * valRect.height - draggerRect.height / 2 + "px";
        this.update();
      }
    };
    AgColorPanel2.prototype.initRecentColors = function() {
      var recentColors = AgColorPanel2.recentColors;
      var innerHtml = recentColors.map(function(color, index) {
        return '<div class="ag-recent-color" id=' + index + ' style="background-color: ' + color + '; width: 15px; height: 15px;" recent-color="' + color + '"></div>';
      });
      this.recentColors.innerHTML = innerHtml.join("");
    };
    AgColorPanel2.prototype.setValue = function(val) {
      var color = Color.fromString(val);
      var _a = color.toHSB(), h = _a[0], s = _a[1], b = _a[2];
      this.H = (isNaN(h) ? 0 : h) / 360;
      this.A = color.a;
      var spectrumHueRect = this.spectrumHueRect || this.refreshHueRect();
      var spectrumAlphaRect = this.spectrumAlphaRect || this.refreshAlphaRect();
      this.spectrumHueSlider.style.left = (this.H - 1) * -spectrumHueRect.width + "px";
      this.spectrumAlphaSlider.style.left = this.A * spectrumAlphaRect.width + "px";
      this.setSpectrumValue(s, b);
    };
    AgColorPanel2.prototype.onRecentColorClick = function(e) {
      var target = e.target;
      if (!exists(target.id)) {
        return;
      }
      var id = parseInt(target.id, 10);
      this.setValue(AgColorPanel2.recentColors[id]);
      this.destroy();
    };
    AgColorPanel2.prototype.addRecentColor = function() {
      var color = Color.fromHSB(this.H * 360, this.S, this.B, this.A);
      var rgbaColor = color.toRgbaString();
      var recentColors = AgColorPanel2.recentColors;
      if (!this.colorChanged || recentColors[0] === rgbaColor) {
        return;
      }
      recentColors = recentColors.filter(function(currentColor) {
        return currentColor != rgbaColor;
      });
      recentColors = [rgbaColor].concat(recentColors);
      if (recentColors.length > AgColorPanel2.maxRecentColors) {
        recentColors = recentColors.slice(0, AgColorPanel2.maxRecentColors);
      }
      AgColorPanel2.recentColors = recentColors;
    };
    AgColorPanel2.prototype.destroy = function() {
      this.addRecentColor();
      _super.prototype.destroy.call(this);
    };
    AgColorPanel2.maxRecentColors = 8;
    AgColorPanel2.recentColors = [];
    AgColorPanel2.TEMPLATE = '<div class="ag-color-panel">\n            <div ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>';
    __decorate$1X([
      RefSelector("spectrumColor")
    ], AgColorPanel2.prototype, "spectrumColor", void 0);
    __decorate$1X([
      RefSelector("spectrumVal")
    ], AgColorPanel2.prototype, "spectrumVal", void 0);
    __decorate$1X([
      RefSelector("spectrumDragger")
    ], AgColorPanel2.prototype, "spectrumDragger", void 0);
    __decorate$1X([
      RefSelector("spectrumHue")
    ], AgColorPanel2.prototype, "spectrumHue", void 0);
    __decorate$1X([
      RefSelector("spectrumHueSlider")
    ], AgColorPanel2.prototype, "spectrumHueSlider", void 0);
    __decorate$1X([
      RefSelector("spectrumAlpha")
    ], AgColorPanel2.prototype, "spectrumAlpha", void 0);
    __decorate$1X([
      RefSelector("spectrumAlphaSlider")
    ], AgColorPanel2.prototype, "spectrumAlphaSlider", void 0);
    __decorate$1X([
      RefSelector("recentColors")
    ], AgColorPanel2.prototype, "recentColors", void 0);
    __decorate$1X([
      PostConstruct
    ], AgColorPanel2.prototype, "postConstruct", null);
    return AgColorPanel2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2a = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1Y = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AgPickerField = function(_super) {
    __extends$2a(AgPickerField2, _super);
    function AgPickerField2(config2, className, pickerIcon, popupRole) {
      var _this = _super.call(this, config2, '<div class="ag-picker-field" role="presentation">\n                <div ref="eLabel"></div>\n                <div ref="eWrapper"\n                    class="ag-wrapper ag-picker-field-wrapper"\n                    tabIndex="-1"\n                    ' + (popupRole ? 'aria-haspopup="' + popupRole + '"' : "") + '\n                >\n                    <div ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>', className) || this;
      _this.pickerIcon = pickerIcon;
      _this.isPickerDisplayed = false;
      _this.isDestroyingPicker = false;
      _this.skipClick = false;
      return _this;
    }
    AgPickerField2.prototype.postConstruct = function() {
      var _this = this;
      _super.prototype.postConstruct.call(this);
      var displayId = this.getCompId() + "-display";
      this.eDisplayField.setAttribute("id", displayId);
      setAriaDescribedBy(this.eWrapper, displayId);
      var clickHandler = function() {
        if (_this.skipClick) {
          _this.skipClick = false;
          return;
        }
        if (_this.isDisabled()) {
          return;
        }
        _this.pickerComponent = _this.showPicker();
      };
      var eGui = this.getGui();
      this.addManagedListener(eGui, "mousedown", function(e) {
        if (!_this.skipClick && _this.pickerComponent && _this.pickerComponent.isAlive() && isVisible(_this.pickerComponent.getGui()) && eGui.contains(e.target)) {
          _this.skipClick = true;
        }
      });
      this.addManagedListener(eGui, "keydown", function(e) {
        switch (e.keyCode) {
          case KeyCode.UP:
          case KeyCode.DOWN:
          case KeyCode.ENTER:
          case KeyCode.SPACE:
            clickHandler();
          case KeyCode.ESCAPE:
            if (_this.isPickerDisplayed) {
              e.preventDefault();
            }
            break;
        }
      });
      this.addManagedListener(this.eWrapper, "click", clickHandler);
      this.addManagedListener(this.eLabel, "click", clickHandler);
      if (this.pickerIcon) {
        var icon = createIconNoSpan(this.pickerIcon, this.gridOptionsWrapper);
        if (icon) {
          this.eIcon.appendChild(icon);
        }
      }
    };
    AgPickerField2.prototype.refreshLabel = function() {
      if (exists(this.getLabel())) {
        setAriaLabelledBy(this.eWrapper, this.getLabelId());
      } else {
        this.eWrapper.removeAttribute("aria-labelledby");
      }
      _super.prototype.refreshLabel.call(this);
    };
    AgPickerField2.prototype.setAriaLabel = function(label) {
      setAriaLabel(this.eWrapper, label);
      return this;
    };
    AgPickerField2.prototype.setInputWidth = function(width) {
      setElementWidth(this.eWrapper, width);
      return this;
    };
    AgPickerField2.prototype.getFocusableElement = function() {
      return this.eWrapper;
    };
    __decorate$1Y([
      RefSelector("eLabel")
    ], AgPickerField2.prototype, "eLabel", void 0);
    __decorate$1Y([
      RefSelector("eWrapper")
    ], AgPickerField2.prototype, "eWrapper", void 0);
    __decorate$1Y([
      RefSelector("eDisplayField")
    ], AgPickerField2.prototype, "eDisplayField", void 0);
    __decorate$1Y([
      RefSelector("eIcon")
    ], AgPickerField2.prototype, "eIcon", void 0);
    return AgPickerField2;
  }(AgAbstractField);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2b = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var AgColorPicker = function(_super) {
    __extends$2b(AgColorPicker2, _super);
    function AgColorPicker2(config2) {
      var _this = _super.call(this, config2, "ag-color-picker", "colorPicker") || this;
      if (config2 && config2.color) {
        _this.value = config2.color;
      }
      return _this;
    }
    AgColorPicker2.prototype.postConstruct = function() {
      _super.prototype.postConstruct.call(this);
      if (this.value) {
        this.setValue(this.value);
      }
    };
    AgColorPicker2.prototype.showPicker = function() {
      var _this = this;
      var eGuiRect = this.getGui().getBoundingClientRect();
      var colorDialog = this.createBean(new AgDialog({
        closable: false,
        modal: true,
        hideTitleBar: true,
        minWidth: 190,
        width: 190,
        height: 250,
        x: eGuiRect.right - 190,
        y: eGuiRect.top - 250
      }));
      this.isPickerDisplayed = true;
      addCssClass(colorDialog.getGui(), "ag-color-dialog");
      var colorPanel = this.createBean(new AgColorPanel({ picker: this }));
      colorPanel.addDestroyFunc(function() {
        if (colorDialog.isAlive()) {
          _this.destroyBean(colorDialog);
        }
      });
      colorDialog.setParentComponent(this);
      colorDialog.setBodyComponent(colorPanel);
      colorPanel.setValue(this.getValue());
      colorDialog.addDestroyFunc(function() {
        if (!_this.isDestroyingPicker) {
          _this.isDestroyingPicker = true;
          if (colorPanel.isAlive()) {
            _this.destroyBean(colorPanel);
          }
        } else {
          _this.isDestroyingPicker = false;
        }
        if (_this.isAlive()) {
          _this.getFocusableElement().focus();
        }
        _this.isPickerDisplayed = false;
      });
      return colorDialog;
    };
    AgColorPicker2.prototype.setValue = function(color) {
      if (this.value === color) {
        return this;
      }
      this.eDisplayField.style.backgroundColor = color;
      return _super.prototype.setValue.call(this, color);
    };
    AgColorPicker2.prototype.getValue = function() {
      return this.value;
    };
    return AgColorPicker2;
  }(AgPickerField);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2c = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var AgInputNumberField = function(_super) {
    __extends$2c(AgInputNumberField2, _super);
    function AgInputNumberField2(config2) {
      return _super.call(this, config2, "ag-number-field", "number") || this;
    }
    AgInputNumberField2.prototype.postConstruct = function() {
      var _this = this;
      _super.prototype.postConstruct.call(this);
      this.addManagedListener(this.eInput, "blur", function() {
        var floatedValue = parseFloat(_this.eInput.value);
        var value = isNaN(floatedValue) ? "" : _this.normalizeValue(floatedValue.toString());
        if (_this.value !== value) {
          _this.setValue(value);
        }
      });
    };
    AgInputNumberField2.prototype.normalizeValue = function(value) {
      if (value === "") {
        return "";
      }
      if (this.precision) {
        value = this.adjustPrecision(value);
      }
      var val = parseFloat(value);
      if (this.min != null && val < this.min) {
        value = this.min.toString();
      } else if (this.max != null && val > this.max) {
        value = this.max.toString();
      }
      return value;
    };
    AgInputNumberField2.prototype.adjustPrecision = function(value) {
      if (this.precision) {
        var floatString = parseFloat(value).toFixed(this.precision);
        value = parseFloat(floatString).toString();
      }
      return value;
    };
    AgInputNumberField2.prototype.setMin = function(min) {
      if (this.min === min) {
        return this;
      }
      this.min = min;
      addOrRemoveAttribute(this.eInput, "min", min);
      return this;
    };
    AgInputNumberField2.prototype.setMax = function(max) {
      if (this.max === max) {
        return this;
      }
      this.max = max;
      addOrRemoveAttribute(this.eInput, "max", max);
      return this;
    };
    AgInputNumberField2.prototype.setPrecision = function(precision) {
      this.precision = precision;
      return this;
    };
    AgInputNumberField2.prototype.setStep = function(step) {
      if (this.step === step) {
        return this;
      }
      this.step = step;
      addOrRemoveAttribute(this.eInput, "step", step);
      return this;
    };
    AgInputNumberField2.prototype.setValue = function(value, silent) {
      value = this.adjustPrecision(value);
      var normalizedValue = this.normalizeValue(value);
      if (value != normalizedValue) {
        return this;
      }
      return _super.prototype.setValue.call(this, value, silent);
    };
    return AgInputNumberField2;
  }(AgInputTextField);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2d = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var AgInputRange = function(_super) {
    __extends$2d(AgInputRange2, _super);
    function AgInputRange2(config2) {
      return _super.call(this, config2, "ag-range-field", "range") || this;
    }
    AgInputRange2.prototype.postConstruct = function() {
      _super.prototype.postConstruct.call(this);
      var _a = this.config, min = _a.min, max = _a.max, step = _a.step;
      if (min != null) {
        this.setMinValue(min);
      }
      if (max != null) {
        this.setMaxValue(max);
      }
      this.setStep(step || 1);
    };
    AgInputRange2.prototype.addInputListeners = function() {
      var _this = this;
      var isIE2 = isBrowserIE();
      var eventName = isIE2 ? "change" : "input";
      this.addManagedListener(this.eInput, eventName, function(e) {
        var value = e.target.value;
        _this.setValue(value);
      });
    };
    AgInputRange2.prototype.setMinValue = function(value) {
      this.min = value;
      this.eInput.setAttribute("min", value.toString());
      return this;
    };
    AgInputRange2.prototype.setMaxValue = function(value) {
      this.max = value;
      this.eInput.setAttribute("max", value.toString());
      return this;
    };
    AgInputRange2.prototype.setStep = function(value) {
      this.eInput.setAttribute("step", value.toString());
      return this;
    };
    AgInputRange2.prototype.setValue = function(value, silent) {
      if (this.min != null) {
        value = Math.max(parseFloat(value), this.min).toString();
      }
      if (this.max != null) {
        value = Math.min(parseFloat(value), this.max).toString();
      }
      var ret = _super.prototype.setValue.call(this, value, silent);
      this.eInput.value = value;
      return ret;
    };
    return AgInputRange2;
  }(AgAbstractInputField);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2e = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1Z = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AgList = function(_super) {
    __extends$2e(AgList2, _super);
    function AgList2(cssIdentifier) {
      if (cssIdentifier === void 0) {
        cssIdentifier = "default";
      }
      var _this = _super.call(this, '<div class="ag-list ag-' + cssIdentifier + '-list" role="listbox"></div>') || this;
      _this.cssIdentifier = cssIdentifier;
      _this.options = [];
      _this.itemEls = [];
      return _this;
    }
    AgList2.prototype.init = function() {
      this.addManagedListener(this.getGui(), "keydown", this.handleKeyDown.bind(this));
    };
    AgList2.prototype.handleKeyDown = function(e) {
      var key = e.keyCode;
      switch (key) {
        case KeyCode.ENTER:
          if (!this.highlightedEl) {
            this.setValue(this.getValue());
          } else {
            var pos = this.itemEls.indexOf(this.highlightedEl);
            this.setValueByIndex(pos);
          }
          break;
        case KeyCode.DOWN:
        case KeyCode.UP:
          var isDown = key === KeyCode.DOWN;
          var itemToHighlight = void 0;
          e.preventDefault();
          if (!this.highlightedEl) {
            itemToHighlight = this.itemEls[isDown ? 0 : this.itemEls.length - 1];
          } else {
            var currentIdx = this.itemEls.indexOf(this.highlightedEl);
            var nextPos = currentIdx + (isDown ? 1 : -1);
            nextPos = Math.min(Math.max(nextPos, 0), this.itemEls.length - 1);
            itemToHighlight = this.itemEls[nextPos];
          }
          this.highlightItem(itemToHighlight);
          break;
      }
    };
    AgList2.prototype.addOptions = function(listOptions) {
      var _this = this;
      listOptions.forEach(function(listOption) {
        return _this.addOption(listOption);
      });
      return this;
    };
    AgList2.prototype.addOption = function(listOption) {
      var value = listOption.value, text2 = listOption.text;
      var sanitisedText = escapeString(text2 || value);
      this.options.push({ value, text: sanitisedText });
      this.renderOption(value, sanitisedText);
      return this;
    };
    AgList2.prototype.renderOption = function(value, text2) {
      var _this = this;
      var itemEl = document.createElement("div");
      setAriaRole(itemEl, "option");
      addCssClass(itemEl, "ag-list-item");
      addCssClass(itemEl, "ag-" + this.cssIdentifier + "-list-item");
      itemEl.innerHTML = "<span>" + text2 + "</span>";
      itemEl.tabIndex = -1;
      this.itemEls.push(itemEl);
      this.addManagedListener(itemEl, "mouseover", function() {
        return _this.highlightItem(itemEl);
      });
      this.addManagedListener(itemEl, "mouseleave", function() {
        return _this.clearHighlighted();
      });
      this.addManagedListener(itemEl, "click", function() {
        return _this.setValue(value);
      });
      this.getGui().appendChild(itemEl);
    };
    AgList2.prototype.setValue = function(value, silent) {
      if (this.value === value) {
        this.fireItemSelected();
        return this;
      }
      if (value == null) {
        this.reset();
        return this;
      }
      var idx = findIndex(this.options, function(option2) {
        return option2.value === value;
      });
      if (idx !== -1) {
        var option = this.options[idx];
        this.value = option.value;
        this.displayValue = option.text != null ? option.text : option.value;
        this.highlightItem(this.itemEls[idx]);
        if (!silent) {
          this.fireChangeEvent();
        }
      }
      return this;
    };
    AgList2.prototype.setValueByIndex = function(idx) {
      return this.setValue(this.options[idx].value);
    };
    AgList2.prototype.getValue = function() {
      return this.value;
    };
    AgList2.prototype.getDisplayValue = function() {
      return this.displayValue;
    };
    AgList2.prototype.refreshHighlighted = function() {
      var _this = this;
      this.clearHighlighted();
      var idx = findIndex(this.options, function(option) {
        return option.value === _this.value;
      });
      if (idx !== -1) {
        this.highlightItem(this.itemEls[idx]);
      }
    };
    AgList2.prototype.reset = function() {
      this.value = null;
      this.displayValue = null;
      this.clearHighlighted();
      this.fireChangeEvent();
    };
    AgList2.prototype.highlightItem = function(el) {
      if (!el.offsetParent) {
        return;
      }
      this.clearHighlighted();
      this.highlightedEl = el;
      addCssClass(this.highlightedEl, AgList2.ACTIVE_CLASS);
      setAriaSelected(this.highlightedEl, true);
      this.highlightedEl.focus();
    };
    AgList2.prototype.clearHighlighted = function() {
      if (!this.highlightedEl || !this.highlightedEl.offsetParent) {
        return;
      }
      removeCssClass(this.highlightedEl, AgList2.ACTIVE_CLASS);
      setAriaSelected(this.highlightedEl, false);
      this.highlightedEl = null;
    };
    AgList2.prototype.fireChangeEvent = function() {
      this.dispatchEvent({ type: AgAbstractField.EVENT_CHANGED });
      this.fireItemSelected();
    };
    AgList2.prototype.fireItemSelected = function() {
      this.dispatchEvent({ type: AgList2.EVENT_ITEM_SELECTED });
    };
    AgList2.EVENT_ITEM_SELECTED = "selectedItem";
    AgList2.ACTIVE_CLASS = "ag-active-item";
    __decorate$1Z([
      PostConstruct
    ], AgList2.prototype, "init", null);
    return AgList2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2f = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1_ = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AgSelect = function(_super) {
    __extends$2f(AgSelect2, _super);
    function AgSelect2(config2) {
      return _super.call(this, config2, "ag-select", "smallDown", "listbox") || this;
    }
    AgSelect2.prototype.init = function() {
      var _this = this;
      this.listComponent = this.createBean(new AgList("select"));
      this.listComponent.setParentComponent(this);
      this.eWrapper.tabIndex = 0;
      this.listComponent.addManagedListener(this.listComponent, AgList.EVENT_ITEM_SELECTED, function() {
        if (_this.hideList) {
          _this.hideList();
        }
      });
      this.listComponent.addManagedListener(this.listComponent, AgAbstractField.EVENT_CHANGED, function() {
        _this.setValue(_this.listComponent.getValue(), false, true);
        if (_this.hideList) {
          _this.hideList();
        }
      });
    };
    AgSelect2.prototype.showPicker = function() {
      var _this = this;
      var listGui = this.listComponent.getGui();
      var destroyMouseWheelFunc = this.addManagedListener(document.body, "wheel", function(e) {
        if (!listGui.contains(e.target) && _this.hideList) {
          _this.hideList();
        }
      });
      var destroyFocusOutFunc = this.addManagedListener(listGui, "focusout", function(e) {
        if (!listGui.contains(e.relatedTarget) && _this.hideList) {
          _this.hideList();
        }
      });
      var translate = this.gridOptionsWrapper.getLocaleTextFunc();
      var addPopupRes = this.popupService.addPopup({
        modal: true,
        eChild: listGui,
        closeOnEsc: true,
        closedCallback: function() {
          _this.hideList = null;
          _this.isPickerDisplayed = false;
          destroyFocusOutFunc();
          destroyMouseWheelFunc();
          if (_this.isAlive()) {
            _this.getFocusableElement().focus();
          }
        },
        ariaLabel: translate("ariaLabelSelectField", "Select Field")
      });
      if (addPopupRes) {
        this.hideList = addPopupRes.hideFunc;
      }
      this.isPickerDisplayed = true;
      setElementWidth(listGui, getAbsoluteWidth(this.eWrapper));
      listGui.style.maxHeight = getInnerHeight(this.popupService.getPopupParent()) + "px";
      listGui.style.position = "absolute";
      this.popupService.positionPopupUnderComponent({
        type: "ag-list",
        eventSource: this.eWrapper,
        ePopup: listGui,
        keepWithinBounds: true
      });
      this.listComponent.refreshHighlighted();
      return this.listComponent;
    };
    AgSelect2.prototype.addOptions = function(options) {
      var _this = this;
      options.forEach(function(option) {
        return _this.addOption(option);
      });
      return this;
    };
    AgSelect2.prototype.addOption = function(option) {
      this.listComponent.addOption(option);
      return this;
    };
    AgSelect2.prototype.setValue = function(value, silent, fromPicker) {
      if (this.value === value) {
        return this;
      }
      if (!fromPicker) {
        this.listComponent.setValue(value, true);
      }
      var newValue = this.listComponent.getValue();
      if (newValue === this.getValue()) {
        return this;
      }
      this.eDisplayField.innerHTML = this.listComponent.getDisplayValue();
      return _super.prototype.setValue.call(this, value, silent);
    };
    AgSelect2.prototype.destroy = function() {
      if (this.hideList) {
        this.hideList();
      }
      this.destroyBean(this.listComponent);
      _super.prototype.destroy.call(this);
    };
    __decorate$1_([
      Autowired("popupService")
    ], AgSelect2.prototype, "popupService", void 0);
    __decorate$1_([
      PostConstruct
    ], AgSelect2.prototype, "init", null);
    return AgSelect2;
  }(AgPickerField);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2g = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$1$ = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var AgAngleSelect = function(_super) {
    __extends$2g(AgAngleSelect2, _super);
    function AgAngleSelect2(config2) {
      var _this = _super.call(this, config2, AgAngleSelect2.TEMPLATE) || this;
      _this.radius = 0;
      _this.offsetX = 0;
      _this.offsetY = 0;
      return _this;
    }
    AgAngleSelect2.prototype.postConstruct = function() {
      var _this = this;
      _super.prototype.postConstruct.call(this);
      this.dragListener = {
        eElement: this.eParentCircle,
        dragStartPixels: 0,
        onDragStart: function(e) {
          _this.parentCircleRect = _this.eParentCircle.getBoundingClientRect();
        },
        onDragging: function(e) {
          return _this.calculateAngleDrag(e);
        },
        onDragStop: function() {
        }
      };
      this.dragService.addDragSource(this.dragListener);
      this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue("" + this.degrees).onValueChange(function(value) {
        if (value == null || value === "") {
          value = "0";
        }
        value = _this.eAngleValue.normalizeValue(value);
        var floatValue = parseFloat(value);
        if (floatValue > 180) {
          floatValue = floatValue - 360;
        }
        _this.setValue(floatValue);
      });
      this.updateNumberInput();
      if (exists(this.getValue())) {
        this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString());
      }
      this.addManagedListener(this, AgAbstractField.EVENT_CHANGED, function() {
        if (_this.eAngleValue.getInputElement().contains(document.activeElement)) {
          return;
        }
        _this.updateNumberInput();
      });
    };
    AgAngleSelect2.prototype.updateNumberInput = function() {
      var normalizedValue = this.normalizeNegativeValue(this.getValue());
      this.eAngleValue.setValue(normalizedValue.toString());
    };
    AgAngleSelect2.prototype.positionChildCircle = function(radians) {
      var rect = this.parentCircleRect || { width: 24, height: 24 };
      var eChildCircle = this.eChildCircle;
      var centerX = rect.width / 2;
      var centerY = rect.height / 2;
      eChildCircle.style.left = centerX + Math.cos(radians) * 8 + "px";
      eChildCircle.style.top = centerY + Math.sin(radians) * 8 + "px";
    };
    AgAngleSelect2.prototype.calculatePolar = function() {
      var x = this.offsetX;
      var y = this.offsetY;
      var radians = Math.atan2(y, x);
      this.degrees = this.toDegrees(radians);
      this.radius = Math.sqrt(x * x + y * y);
      this.positionChildCircle(radians);
    };
    AgAngleSelect2.prototype.calculateCartesian = function() {
      var radians = this.toRadians(this.getValue());
      var radius = this.getRadius();
      this.setOffsetX(Math.cos(radians) * radius).setOffsetY(Math.sin(radians) * radius);
    };
    AgAngleSelect2.prototype.setOffsetX = function(offset) {
      if (this.offsetX !== offset) {
        this.offsetX = offset;
        this.calculatePolar();
      }
      return this;
    };
    AgAngleSelect2.prototype.setOffsetY = function(offset) {
      if (this.offsetY !== offset) {
        this.offsetY = offset;
        this.calculatePolar();
      }
      return this;
    };
    AgAngleSelect2.prototype.calculateAngleDrag = function(e) {
      var rect = this.parentCircleRect;
      var centerX = rect.width / 2;
      var centerY = rect.height / 2;
      var x = e.clientX - rect.left;
      var y = e.clientY - rect.top;
      var dx = x - centerX;
      var dy = y - centerY;
      var radians = Math.atan2(dy, dx);
      this.setValue(radians, true);
    };
    AgAngleSelect2.prototype.toDegrees = function(radians) {
      return radians / Math.PI * 180;
    };
    AgAngleSelect2.prototype.toRadians = function(degrees) {
      return degrees / 180 * Math.PI;
    };
    AgAngleSelect2.prototype.normalizeNegativeValue = function(degrees) {
      return degrees < 0 ? 360 + degrees : degrees;
    };
    AgAngleSelect2.prototype.normalizeAngle180 = function(radians) {
      radians %= Math.PI * 2;
      if (radians < -Math.PI) {
        radians += Math.PI * 2;
      } else if (radians >= Math.PI) {
        radians -= Math.PI * 2;
      }
      return radians;
    };
    AgAngleSelect2.prototype.getRadius = function() {
      return this.radius;
    };
    AgAngleSelect2.prototype.setRadius = function(r) {
      if (this.radius === r) {
        return this;
      }
      this.radius = r;
      this.calculateCartesian();
      return this;
    };
    AgAngleSelect2.prototype.onValueChange = function(callbackFn) {
      var _this = this;
      this.addManagedListener(this, AgAbstractField.EVENT_CHANGED, function() {
        callbackFn(_this.degrees);
      });
      return this;
    };
    AgAngleSelect2.prototype.getValue = function(radians) {
      return radians ? this.toRadians(this.degrees) : this.degrees;
    };
    AgAngleSelect2.prototype.setValue = function(degrees, radians) {
      var radiansValue;
      if (!radians) {
        radiansValue = this.normalizeAngle180(this.toRadians(degrees));
      } else {
        radiansValue = degrees;
      }
      degrees = this.toDegrees(radiansValue);
      if (this.degrees !== degrees) {
        this.degrees = Math.floor(degrees);
        this.calculateCartesian();
        this.positionChildCircle(radiansValue);
        this.dispatchEvent({ type: AgAbstractField.EVENT_CHANGED });
      }
      return this;
    };
    AgAngleSelect2.prototype.setWidth = function(width) {
      setFixedWidth(this.getGui(), width);
      return this;
    };
    AgAngleSelect2.prototype.destroy = function() {
      this.dragService.removeDragSource(this.dragListener);
      _super.prototype.destroy.call(this);
    };
    AgAngleSelect2.TEMPLATE = '<div class="ag-angle-select">\n            <div ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div ref="eAngleSelectField" class="ag-angle-select-field">\n                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>';
    __decorate$1$([
      RefSelector("eLabel")
    ], AgAngleSelect2.prototype, "eLabel", void 0);
    __decorate$1$([
      RefSelector("eParentCircle")
    ], AgAngleSelect2.prototype, "eParentCircle", void 0);
    __decorate$1$([
      RefSelector("eChildCircle")
    ], AgAngleSelect2.prototype, "eChildCircle", void 0);
    __decorate$1$([
      RefSelector("eAngleValue")
    ], AgAngleSelect2.prototype, "eAngleValue", void 0);
    __decorate$1$([
      Autowired("dragService")
    ], AgAngleSelect2.prototype, "dragService", void 0);
    return AgAngleSelect2;
  }(AgAbstractLabel);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2h = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var AgToggleButton = function(_super) {
    __extends$2h(AgToggleButton2, _super);
    function AgToggleButton2(config2) {
      return _super.call(this, config2, "ag-toggle-button") || this;
    }
    AgToggleButton2.prototype.setValue = function(value, silent) {
      _super.prototype.setValue.call(this, value, silent);
      addOrRemoveCssClass(this.getGui(), "ag-selected", this.getValue());
      return this;
    };
    return AgToggleButton2;
  }(AgCheckbox);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2i = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$20 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var RowPositionUtils = function(_super) {
    __extends$2i(RowPositionUtils2, _super);
    function RowPositionUtils2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    RowPositionUtils2.prototype.getFirstRow = function() {
      var rowIndex = 0;
      var rowPinned;
      if (this.pinnedRowModel.getPinnedTopRowCount()) {
        rowPinned = Constants.PINNED_TOP;
      } else if (this.rowModel.getRowCount()) {
        rowPinned = null;
        rowIndex = this.paginationProxy.getPageFirstRow();
      } else if (this.pinnedRowModel.getPinnedBottomRowCount()) {
        rowPinned = Constants.PINNED_BOTTOM;
      }
      return rowPinned === void 0 ? null : { rowIndex, rowPinned };
    };
    RowPositionUtils2.prototype.getLastRow = function() {
      var rowIndex;
      var rowPinned = null;
      var pinnedBottomCount = this.pinnedRowModel.getPinnedBottomRowCount();
      var pinnedTopCount = this.pinnedRowModel.getPinnedTopRowCount();
      if (pinnedBottomCount) {
        rowPinned = Constants.PINNED_BOTTOM;
        rowIndex = pinnedBottomCount - 1;
      } else if (this.rowModel.getRowCount()) {
        rowPinned = null;
        rowIndex = this.paginationProxy.getPageLastRow();
      } else if (pinnedTopCount) {
        rowPinned = Constants.PINNED_TOP;
        rowIndex = pinnedTopCount - 1;
      }
      return rowIndex === void 0 ? null : { rowIndex, rowPinned };
    };
    RowPositionUtils2.prototype.getRowNode = function(gridRow) {
      switch (gridRow.rowPinned) {
        case Constants.PINNED_TOP:
          return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];
        case Constants.PINNED_BOTTOM:
          return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];
        default:
          return this.rowModel.getRow(gridRow.rowIndex);
      }
    };
    RowPositionUtils2.prototype.sameRow = function(rowA, rowB) {
      if (!rowA && !rowB) {
        return true;
      }
      if (rowA && !rowB || !rowA && rowB) {
        return false;
      }
      return rowA.rowIndex === rowB.rowIndex && rowA.rowPinned == rowB.rowPinned;
    };
    RowPositionUtils2.prototype.before = function(rowA, rowB) {
      switch (rowA.rowPinned) {
        case Constants.PINNED_TOP:
          if (rowB.rowPinned !== Constants.PINNED_TOP) {
            return true;
          }
          break;
        case Constants.PINNED_BOTTOM:
          if (rowB.rowPinned !== Constants.PINNED_BOTTOM) {
            return false;
          }
          break;
        default:
          if (exists(rowB.rowPinned)) {
            return rowB.rowPinned !== Constants.PINNED_TOP;
          }
          break;
      }
      return rowA.rowIndex < rowB.rowIndex;
    };
    __decorate$20([
      Autowired("rowModel")
    ], RowPositionUtils2.prototype, "rowModel", void 0);
    __decorate$20([
      Autowired("pinnedRowModel")
    ], RowPositionUtils2.prototype, "pinnedRowModel", void 0);
    __decorate$20([
      Autowired("paginationProxy")
    ], RowPositionUtils2.prototype, "paginationProxy", void 0);
    RowPositionUtils2 = __decorate$20([
      Bean("rowPositionUtils")
    ], RowPositionUtils2);
    return RowPositionUtils2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2j = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$21 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var CellPositionUtils = function(_super) {
    __extends$2j(CellPositionUtils2, _super);
    function CellPositionUtils2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    CellPositionUtils2.prototype.createId = function(cellPosition) {
      var rowIndex = cellPosition.rowIndex, rowPinned = cellPosition.rowPinned, column = cellPosition.column;
      return this.createIdFromValues(rowIndex, column, rowPinned);
    };
    CellPositionUtils2.prototype.createIdFromValues = function(rowIndex, column, rowPinned) {
      return rowIndex + "." + (rowPinned == null ? "null" : rowPinned) + "." + column.getId();
    };
    CellPositionUtils2.prototype.equals = function(cellA, cellB) {
      var colsMatch = cellA.column === cellB.column;
      var floatingMatch = cellA.rowPinned === cellB.rowPinned;
      var indexMatch = cellA.rowIndex === cellB.rowIndex;
      return colsMatch && floatingMatch && indexMatch;
    };
    CellPositionUtils2 = __decorate$21([
      Bean("cellPositionUtils")
    ], CellPositionUtils2);
    return CellPositionUtils2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2k = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$22 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var PinnedRowModel = function(_super) {
    __extends$2k(PinnedRowModel2, _super);
    function PinnedRowModel2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    PinnedRowModel2.prototype.init = function() {
      this.setPinnedTopRowData(this.gridOptionsWrapper.getPinnedTopRowData());
      this.setPinnedBottomRowData(this.gridOptionsWrapper.getPinnedBottomRowData());
    };
    PinnedRowModel2.prototype.isEmpty = function(floating) {
      var rows = floating === Constants.PINNED_TOP ? this.pinnedTopRows : this.pinnedBottomRows;
      return missingOrEmpty(rows);
    };
    PinnedRowModel2.prototype.isRowsToRender = function(floating) {
      return !this.isEmpty(floating);
    };
    PinnedRowModel2.prototype.getRowAtPixel = function(pixel, floating) {
      var rows = floating === Constants.PINNED_TOP ? this.pinnedTopRows : this.pinnedBottomRows;
      if (missingOrEmpty(rows)) {
        return 0;
      }
      for (var i2 = 0; i2 < rows.length; i2++) {
        var rowNode = rows[i2];
        var rowTopPixel = rowNode.rowTop + rowNode.rowHeight - 1;
        if (rowTopPixel >= pixel) {
          return i2;
        }
      }
      return rows.length - 1;
    };
    PinnedRowModel2.prototype.setPinnedTopRowData = function(rowData) {
      this.pinnedTopRows = this.createNodesFromData(rowData, true);
      var event = {
        type: Events.EVENT_PINNED_ROW_DATA_CHANGED,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.eventService.dispatchEvent(event);
    };
    PinnedRowModel2.prototype.setPinnedBottomRowData = function(rowData) {
      this.pinnedBottomRows = this.createNodesFromData(rowData, false);
      var event = {
        type: Events.EVENT_PINNED_ROW_DATA_CHANGED,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.eventService.dispatchEvent(event);
    };
    PinnedRowModel2.prototype.createNodesFromData = function(allData, isTop) {
      var _this = this;
      var rowNodes = [];
      if (allData) {
        var nextRowTop_1 = 0;
        allData.forEach(function(dataItem, index) {
          var rowNode = new RowNode(_this.beans);
          rowNode.data = dataItem;
          var idPrefix = isTop ? RowNode.ID_PREFIX_TOP_PINNED : RowNode.ID_PREFIX_BOTTOM_PINNED;
          rowNode.id = idPrefix + index;
          rowNode.rowPinned = isTop ? Constants.PINNED_TOP : Constants.PINNED_BOTTOM;
          rowNode.setRowTop(nextRowTop_1);
          rowNode.setRowHeight(_this.gridOptionsWrapper.getRowHeightForNode(rowNode).height);
          rowNode.setRowIndex(index);
          nextRowTop_1 += rowNode.rowHeight;
          rowNodes.push(rowNode);
        });
      }
      return rowNodes;
    };
    PinnedRowModel2.prototype.getPinnedTopRowData = function() {
      return this.pinnedTopRows;
    };
    PinnedRowModel2.prototype.getPinnedBottomRowData = function() {
      return this.pinnedBottomRows;
    };
    PinnedRowModel2.prototype.getPinnedTopTotalHeight = function() {
      return this.getTotalHeight(this.pinnedTopRows);
    };
    PinnedRowModel2.prototype.getPinnedTopRowCount = function() {
      return this.pinnedTopRows ? this.pinnedTopRows.length : 0;
    };
    PinnedRowModel2.prototype.getPinnedBottomRowCount = function() {
      return this.pinnedBottomRows ? this.pinnedBottomRows.length : 0;
    };
    PinnedRowModel2.prototype.getPinnedTopRow = function(index) {
      return this.pinnedTopRows[index];
    };
    PinnedRowModel2.prototype.getPinnedBottomRow = function(index) {
      return this.pinnedBottomRows[index];
    };
    PinnedRowModel2.prototype.forEachPinnedTopRow = function(callback) {
      if (missingOrEmpty(this.pinnedTopRows)) {
        return;
      }
      this.pinnedTopRows.forEach(callback);
    };
    PinnedRowModel2.prototype.forEachPinnedBottomRow = function(callback) {
      if (missingOrEmpty(this.pinnedBottomRows)) {
        return;
      }
      this.pinnedBottomRows.forEach(callback);
    };
    PinnedRowModel2.prototype.getPinnedBottomTotalHeight = function() {
      return this.getTotalHeight(this.pinnedBottomRows);
    };
    PinnedRowModel2.prototype.getTotalHeight = function(rowNodes) {
      if (!rowNodes || rowNodes.length === 0) {
        return 0;
      }
      var lastNode = last(rowNodes);
      return lastNode.rowTop + lastNode.rowHeight;
    };
    __decorate$22([
      Autowired("columnApi")
    ], PinnedRowModel2.prototype, "columnApi", void 0);
    __decorate$22([
      Autowired("gridApi")
    ], PinnedRowModel2.prototype, "gridApi", void 0);
    __decorate$22([
      Autowired("beans")
    ], PinnedRowModel2.prototype, "beans", void 0);
    __decorate$22([
      PostConstruct
    ], PinnedRowModel2.prototype, "init", null);
    PinnedRowModel2 = __decorate$22([
      Bean("pinnedRowModel")
    ], PinnedRowModel2);
    return PinnedRowModel2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2l = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var UndoRedoAction = function() {
    function UndoRedoAction2(cellValueChanges) {
      this.cellValueChanges = cellValueChanges;
    }
    return UndoRedoAction2;
  }();
  var FillUndoRedoAction = function(_super) {
    __extends$2l(FillUndoRedoAction2, _super);
    function FillUndoRedoAction2(cellValueChanges, initialRange, finalRange) {
      var _this = _super.call(this, cellValueChanges) || this;
      _this.initialRange = initialRange;
      _this.finalRange = finalRange;
      return _this;
    }
    return FillUndoRedoAction2;
  }(UndoRedoAction);
  var UndoRedoStack = function() {
    function UndoRedoStack2(maxStackSize) {
      this.actionStack = [];
      this.maxStackSize = maxStackSize ? maxStackSize : UndoRedoStack2.DEFAULT_STACK_SIZE;
      this.actionStack = new Array(this.maxStackSize);
    }
    UndoRedoStack2.prototype.pop = function() {
      return this.actionStack.pop();
    };
    UndoRedoStack2.prototype.push = function(item) {
      var shouldAddActions = item.cellValueChanges && item.cellValueChanges.length > 0;
      if (!shouldAddActions) {
        return;
      }
      if (this.actionStack.length === this.maxStackSize) {
        this.actionStack.shift();
      }
      this.actionStack.push(item);
    };
    UndoRedoStack2.prototype.clear = function() {
      this.actionStack = [];
    };
    UndoRedoStack2.prototype.getCurrentStackSize = function() {
      return this.actionStack.length;
    };
    UndoRedoStack2.DEFAULT_STACK_SIZE = 10;
    return UndoRedoStack2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2m = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$23 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var UndoRedoService = function(_super) {
    __extends$2m(UndoRedoService2, _super);
    function UndoRedoService2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.cellValueChanges = [];
      _this.activeCellEdit = null;
      _this.activeRowEdit = null;
      _this.isPasting = false;
      _this.isFilling = false;
      _this.onCellValueChanged = function(event) {
        var eventCell = { column: event.column, rowIndex: event.rowIndex, rowPinned: event.rowPinned };
        var isCellEditing = _this.activeCellEdit !== null && _this.cellPositionUtils.equals(_this.activeCellEdit, eventCell);
        var isRowEditing = _this.activeRowEdit !== null && _this.rowPositionUtils.sameRow(_this.activeRowEdit, eventCell);
        var shouldCaptureAction = isCellEditing || isRowEditing || _this.isPasting || _this.isFilling;
        if (!shouldCaptureAction) {
          return;
        }
        var rowPinned = event.rowPinned, rowIndex = event.rowIndex, column = event.column, oldValue = event.oldValue, value = event.value;
        var cellValueChange = {
          rowPinned,
          rowIndex,
          columnId: column.getColId(),
          newValue: value,
          oldValue
        };
        _this.cellValueChanges.push(cellValueChange);
      };
      _this.clearStacks = function() {
        _this.undoStack.clear();
        _this.redoStack.clear();
      };
      return _this;
    }
    UndoRedoService2.prototype.init = function() {
      if (!this.gridOptionsWrapper.isUndoRedoCellEditing()) {
        return;
      }
      var undoRedoLimit = this.gridOptionsWrapper.getUndoRedoCellEditingLimit();
      if (undoRedoLimit <= 0) {
        return;
      }
      this.undoStack = new UndoRedoStack(undoRedoLimit);
      this.redoStack = new UndoRedoStack(undoRedoLimit);
      this.addRowEditingListeners();
      this.addCellEditingListeners();
      this.addPasteListeners();
      this.addFillListeners();
      this.addManagedListener(this.eventService, Events.EVENT_CELL_VALUE_CHANGED, this.onCellValueChanged);
      this.addManagedListener(this.eventService, Events.EVENT_MODEL_UPDATED, this.clearStacks);
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.clearStacks);
      this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.clearStacks);
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_GROUP_OPENED, this.clearStacks);
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.clearStacks);
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_MOVED, this.clearStacks);
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PINNED, this.clearStacks);
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_VISIBLE, this.clearStacks);
      this.addManagedListener(this.eventService, Events.EVENT_ROW_DRAG_END, this.clearStacks);
    };
    UndoRedoService2.prototype.getCurrentUndoStackSize = function() {
      return this.undoStack ? this.undoStack.getCurrentStackSize() : 0;
    };
    UndoRedoService2.prototype.getCurrentRedoStackSize = function() {
      return this.redoStack ? this.redoStack.getCurrentStackSize() : 0;
    };
    UndoRedoService2.prototype.undo = function() {
      if (!this.undoStack) {
        return;
      }
      var undoAction = this.undoStack.pop();
      if (!undoAction || !undoAction.cellValueChanges) {
        return;
      }
      this.processAction(undoAction, function(cellValueChange) {
        return cellValueChange.oldValue;
      });
      if (undoAction instanceof FillUndoRedoAction) {
        this.processRangeAndCellFocus(undoAction.cellValueChanges, undoAction.initialRange);
      } else {
        this.processRangeAndCellFocus(undoAction.cellValueChanges);
      }
      this.redoStack.push(undoAction);
    };
    UndoRedoService2.prototype.redo = function() {
      if (!this.redoStack) {
        return;
      }
      var redoAction = this.redoStack.pop();
      if (!redoAction || !redoAction.cellValueChanges) {
        return;
      }
      this.processAction(redoAction, function(cellValueChange) {
        return cellValueChange.newValue;
      });
      if (redoAction instanceof FillUndoRedoAction) {
        this.processRangeAndCellFocus(redoAction.cellValueChanges, redoAction.finalRange);
      } else {
        this.processRangeAndCellFocus(redoAction.cellValueChanges);
      }
      this.undoStack.push(redoAction);
    };
    UndoRedoService2.prototype.processAction = function(action, valueExtractor) {
      var _this = this;
      action.cellValueChanges.forEach(function(cellValueChange) {
        var rowIndex = cellValueChange.rowIndex, rowPinned = cellValueChange.rowPinned, columnId = cellValueChange.columnId;
        var rowPosition = { rowIndex, rowPinned };
        var currentRow = _this.getRowNode(rowPosition);
        if (!currentRow.displayed) {
          return;
        }
        currentRow.setDataValue(columnId, valueExtractor(cellValueChange));
      });
    };
    UndoRedoService2.prototype.processRangeAndCellFocus = function(cellValueChanges, range) {
      var lastFocusedCell;
      if (range) {
        var startRow = range.startRow;
        var endRow = range.endRow;
        lastFocusedCell = {
          rowPinned: startRow.rowPinned,
          rowIndex: startRow.rowIndex,
          columnId: range.startColumn.getColId()
        };
        this.setLastFocusedCell(lastFocusedCell);
        var cellRangeParams = {
          rowStartIndex: startRow.rowIndex,
          rowStartPinned: startRow.rowPinned,
          rowEndIndex: endRow.rowIndex,
          rowEndPinned: endRow.rowPinned,
          columnStart: range.startColumn,
          columns: range.columns
        };
        this.gridApi.addCellRange(cellRangeParams);
        return;
      }
      var cellValueChange = cellValueChanges[0];
      var rowIndex = cellValueChange.rowIndex, rowPinned = cellValueChange.rowPinned;
      var rowPosition = { rowIndex, rowPinned };
      var row = this.getRowNode(rowPosition);
      lastFocusedCell = {
        rowPinned: cellValueChange.rowPinned,
        rowIndex: row.rowIndex,
        columnId: cellValueChange.columnId
      };
      this.setLastFocusedCell(lastFocusedCell);
    };
    UndoRedoService2.prototype.setLastFocusedCell = function(lastFocusedCell) {
      var rowIndex = lastFocusedCell.rowIndex, columnId = lastFocusedCell.columnId, rowPinned = lastFocusedCell.rowPinned;
      this.gridApi.ensureIndexVisible(rowIndex);
      this.gridApi.ensureColumnVisible(columnId);
      if (ModuleRegistry.isRegistered(exports2.ModuleNames.RangeSelectionModule)) {
        this.gridApi.clearRangeSelection();
      }
      this.focusService.setFocusedCell(rowIndex, columnId, rowPinned, true);
    };
    UndoRedoService2.prototype.addRowEditingListeners = function() {
      var _this = this;
      this.addManagedListener(this.eventService, Events.EVENT_ROW_EDITING_STARTED, function(e) {
        _this.activeRowEdit = { rowIndex: e.rowIndex, rowPinned: e.rowPinned };
      });
      this.addManagedListener(this.eventService, Events.EVENT_ROW_EDITING_STOPPED, function() {
        var action = new UndoRedoAction(_this.cellValueChanges);
        _this.pushActionsToUndoStack(action);
        _this.activeRowEdit = null;
      });
    };
    UndoRedoService2.prototype.addCellEditingListeners = function() {
      var _this = this;
      this.addManagedListener(this.eventService, Events.EVENT_CELL_EDITING_STARTED, function(e) {
        _this.activeCellEdit = { column: e.column, rowIndex: e.rowIndex, rowPinned: e.rowPinned };
      });
      this.addManagedListener(this.eventService, Events.EVENT_CELL_EDITING_STOPPED, function() {
        _this.activeCellEdit = null;
        var shouldPushAction = !_this.activeRowEdit && !_this.isPasting && !_this.isFilling;
        if (shouldPushAction) {
          var action = new UndoRedoAction(_this.cellValueChanges);
          _this.pushActionsToUndoStack(action);
        }
      });
    };
    UndoRedoService2.prototype.addPasteListeners = function() {
      var _this = this;
      this.addManagedListener(this.eventService, Events.EVENT_PASTE_START, function() {
        _this.isPasting = true;
      });
      this.addManagedListener(this.eventService, Events.EVENT_PASTE_END, function() {
        var action = new UndoRedoAction(_this.cellValueChanges);
        _this.pushActionsToUndoStack(action);
        _this.isPasting = false;
      });
    };
    UndoRedoService2.prototype.addFillListeners = function() {
      var _this = this;
      this.addManagedListener(this.eventService, Events.EVENT_FILL_START, function() {
        _this.isFilling = true;
      });
      this.addManagedListener(this.eventService, Events.EVENT_FILL_END, function(event) {
        var action = new FillUndoRedoAction(_this.cellValueChanges, event.initialRange, event.finalRange);
        _this.pushActionsToUndoStack(action);
        _this.isFilling = false;
      });
    };
    UndoRedoService2.prototype.pushActionsToUndoStack = function(action) {
      this.undoStack.push(action);
      this.cellValueChanges = [];
      this.redoStack.clear();
    };
    UndoRedoService2.prototype.getRowNode = function(gridRow) {
      switch (gridRow.rowPinned) {
        case Constants.PINNED_TOP:
          return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];
        case Constants.PINNED_BOTTOM:
          return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];
        default:
          return this.rowModel.getRow(gridRow.rowIndex);
      }
    };
    __decorate$23([
      Autowired("focusService")
    ], UndoRedoService2.prototype, "focusService", void 0);
    __decorate$23([
      Autowired("gridApi")
    ], UndoRedoService2.prototype, "gridApi", void 0);
    __decorate$23([
      Autowired("rowModel")
    ], UndoRedoService2.prototype, "rowModel", void 0);
    __decorate$23([
      Autowired("pinnedRowModel")
    ], UndoRedoService2.prototype, "pinnedRowModel", void 0);
    __decorate$23([
      Autowired("cellPositionUtils")
    ], UndoRedoService2.prototype, "cellPositionUtils", void 0);
    __decorate$23([
      Autowired("rowPositionUtils")
    ], UndoRedoService2.prototype, "rowPositionUtils", void 0);
    __decorate$23([
      PostConstruct
    ], UndoRedoService2.prototype, "init", null);
    UndoRedoService2 = __decorate$23([
      Bean("undoRedoService")
    ], UndoRedoService2);
    return UndoRedoService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2n = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$24 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var HeaderPositionUtils = function(_super) {
    __extends$2n(HeaderPositionUtils2, _super);
    function HeaderPositionUtils2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    HeaderPositionUtils2.prototype.findHeader = function(focusedHeader, direction) {
      var nextColumn;
      var getGroupMethod;
      var getColMethod;
      if (focusedHeader.column instanceof ColumnGroup) {
        getGroupMethod = "getDisplayedGroup" + direction;
        nextColumn = this.columnModel[getGroupMethod](focusedHeader.column);
      } else {
        getColMethod = "getDisplayedCol" + direction;
        nextColumn = this.columnModel[getColMethod](focusedHeader.column);
      }
      if (nextColumn) {
        return {
          column: nextColumn,
          headerRowIndex: focusedHeader.headerRowIndex
        };
      }
    };
    HeaderPositionUtils2.prototype.findColAtEdgeForHeaderRow = function(level, position) {
      var displayedColumns = this.columnModel.getAllDisplayedColumns();
      var column = displayedColumns[position === "start" ? 0 : displayedColumns.length - 1];
      if (!column) {
        return;
      }
      var childContainer = this.ctrlsService.getHeaderRowContainerCtrl(column.getPinned());
      var type = childContainer.getRowType(level);
      console.log("level=" + level + " type = " + type);
      if (type == exports2.HeaderRowType.COLUMN_GROUP) {
        var columnGroup = this.columnModel.getColumnGroupAtLevel(column, level);
        return {
          headerRowIndex: level,
          column: columnGroup
        };
      }
      return {
        headerRowIndex: type == null ? -1 : level,
        column
      };
    };
    __decorate$24([
      Autowired("columnModel")
    ], HeaderPositionUtils2.prototype, "columnModel", void 0);
    __decorate$24([
      Autowired("ctrlsService")
    ], HeaderPositionUtils2.prototype, "ctrlsService", void 0);
    HeaderPositionUtils2 = __decorate$24([
      Bean("headerPositionUtils")
    ], HeaderPositionUtils2);
    return HeaderPositionUtils2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __decorate$25 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ColumnDefFactory = function() {
    function ColumnDefFactory2() {
    }
    ColumnDefFactory2.prototype.buildColumnDefs = function(cols, rowGroupColumns, pivotColumns) {
      var _this = this;
      var res = [];
      var colGroupDefs = {};
      cols.forEach(function(col) {
        var colDef = _this.createDefFromColumn(col, rowGroupColumns, pivotColumns);
        var addToResult = true;
        var childDef = colDef;
        var pointer = col.getOriginalParent();
        while (pointer) {
          var parentDef = null;
          if (pointer.isPadding()) {
            pointer = pointer.getOriginalParent();
            continue;
          }
          var existingParentDef = colGroupDefs[pointer.getGroupId()];
          if (existingParentDef) {
            existingParentDef.children.push(childDef);
            addToResult = false;
            break;
          }
          parentDef = _this.createDefFromGroup(pointer);
          if (parentDef) {
            parentDef.children = [childDef];
            colGroupDefs[parentDef.groupId] = parentDef;
            childDef = parentDef;
            pointer = pointer.getOriginalParent();
          }
        }
        if (addToResult) {
          res.push(childDef);
        }
      });
      return res;
    };
    ColumnDefFactory2.prototype.createDefFromGroup = function(group) {
      var defCloned = deepCloneDefinition(group.getColGroupDef(), ["children"]);
      if (defCloned) {
        defCloned.groupId = group.getGroupId();
      }
      return defCloned;
    };
    ColumnDefFactory2.prototype.createDefFromColumn = function(col, rowGroupColumns, pivotColumns) {
      var colDefCloned = deepCloneDefinition(col.getColDef());
      colDefCloned.colId = col.getColId();
      colDefCloned.width = col.getActualWidth();
      colDefCloned.rowGroup = col.isRowGroupActive();
      colDefCloned.rowGroupIndex = col.isRowGroupActive() ? rowGroupColumns.indexOf(col) : null;
      colDefCloned.pivot = col.isPivotActive();
      colDefCloned.pivotIndex = col.isPivotActive() ? pivotColumns.indexOf(col) : null;
      colDefCloned.aggFunc = col.isValueActive() ? col.getAggFunc() : null;
      colDefCloned.hide = col.isVisible() ? void 0 : true;
      colDefCloned.pinned = col.isPinned() ? col.getPinned() : null;
      colDefCloned.sort = col.getSort() ? col.getSort() : null;
      colDefCloned.sortIndex = col.getSortIndex() != null ? col.getSortIndex() : null;
      return colDefCloned;
    };
    ColumnDefFactory2 = __decorate$25([
      Bean("columnDefFactory")
    ], ColumnDefFactory2);
    return ColumnDefFactory2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __decorate$26 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var RowCssClassCalculator = function() {
    function RowCssClassCalculator2() {
    }
    RowCssClassCalculator2.prototype.getInitialRowClasses = function(params2) {
      var classes = [];
      if (exists(params2.extraCssClass)) {
        classes.push(params2.extraCssClass);
      }
      classes.push("ag-row");
      classes.push(params2.rowFocused ? "ag-row-focus" : "ag-row-no-focus");
      if (params2.fadeRowIn) {
        classes.push("ag-opacity-zero");
      }
      classes.push(params2.rowIsEven ? "ag-row-even" : "ag-row-odd");
      if (params2.rowNode.isRowPinned()) {
        classes.push("ag-row-pinned");
      }
      if (params2.rowNode.isSelected()) {
        classes.push("ag-row-selected");
      }
      if (params2.rowNode.footer) {
        classes.push("ag-row-footer");
      }
      classes.push("ag-row-level-" + params2.rowLevel);
      if (params2.rowNode.stub) {
        classes.push("ag-row-loading");
      }
      if (params2.fullWidthRow) {
        classes.push("ag-full-width-row");
      }
      if (params2.expandable) {
        classes.push("ag-row-group");
        classes.push(params2.rowNode.expanded ? "ag-row-group-expanded" : "ag-row-group-contracted");
      }
      if (params2.rowNode.dragging) {
        classes.push("ag-row-dragging");
      }
      pushAll(classes, this.processClassesFromGridOptions(params2.rowNode, params2.scope));
      pushAll(classes, this.preProcessRowClassRules(params2.rowNode, params2.scope));
      classes.push(params2.printLayout ? "ag-row-position-relative" : "ag-row-position-absolute");
      if (params2.firstRowOnPage) {
        classes.push("ag-row-first");
      }
      if (params2.lastRowOnPage) {
        classes.push("ag-row-last");
      }
      if (params2.fullWidthRow) {
        if (params2.pinned === Constants.PINNED_LEFT) {
          classes.push("ag-cell-last-left-pinned");
        }
        if (params2.pinned === Constants.PINNED_RIGHT) {
          classes.push("ag-cell-first-right-pinned");
        }
      }
      return classes;
    };
    RowCssClassCalculator2.prototype.processClassesFromGridOptions = function(rowNode, scope) {
      var res = [];
      var process2 = function(rowCls) {
        if (typeof rowCls === "string") {
          res.push(rowCls);
        } else if (Array.isArray(rowCls)) {
          rowCls.forEach(function(e) {
            return res.push(e);
          });
        }
      };
      var rowClass = this.gridOptionsWrapper.getRowClass();
      if (rowClass) {
        if (typeof rowClass === "function") {
          console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead");
          return [];
        }
        process2(rowClass);
      }
      var rowClassFunc = this.gridOptionsWrapper.getRowClassFunc();
      if (rowClassFunc) {
        var params2 = {
          data: rowNode.data,
          node: rowNode,
          rowIndex: rowNode.rowIndex,
          $scope: scope,
          api: this.gridOptionsWrapper.getApi(),
          columnApi: this.gridOptionsWrapper.getColumnApi(),
          context: this.gridOptionsWrapper.getContext()
        };
        var rowClassFuncResult = rowClassFunc(params2);
        process2(rowClassFuncResult);
      }
      return res;
    };
    RowCssClassCalculator2.prototype.preProcessRowClassRules = function(rowNode, scope) {
      var res = [];
      this.processRowClassRules(rowNode, scope, function(className) {
        res.push(className);
      }, function(className) {
      });
      return res;
    };
    RowCssClassCalculator2.prototype.processRowClassRules = function(rowNode, scope, onApplicableClass, onNotApplicableClass) {
      var rowClassParams = {
        data: rowNode.data,
        node: rowNode,
        rowIndex: rowNode.rowIndex,
        api: this.gridOptionsWrapper.getApi(),
        columnApi: this.gridOptionsWrapper.getColumnApi(),
        $scope: scope,
        context: this.gridOptionsWrapper.getContext()
      };
      this.stylingService.processClassRules(this.gridOptionsWrapper.rowClassRules(), rowClassParams, onApplicableClass, onNotApplicableClass);
    };
    RowCssClassCalculator2.prototype.calculateRowLevel = function(rowNode) {
      if (rowNode.group) {
        return rowNode.level;
      }
      return rowNode.parent ? rowNode.parent.level + 1 : 0;
    };
    __decorate$26([
      Autowired("stylingService")
    ], RowCssClassCalculator2.prototype, "stylingService", void 0);
    __decorate$26([
      Autowired("gridOptionsWrapper")
    ], RowCssClassCalculator2.prototype, "gridOptionsWrapper", void 0);
    RowCssClassCalculator2 = __decorate$26([
      Bean("rowCssClassCalculator")
    ], RowCssClassCalculator2);
    return RowCssClassCalculator2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2o = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var RowNodeBlock = function(_super) {
    __extends$2o(RowNodeBlock2, _super);
    function RowNodeBlock2(id) {
      var _this = _super.call(this) || this;
      _this.state = RowNodeBlock2.STATE_WAITING_TO_LOAD;
      _this.version = 0;
      _this.id = id;
      return _this;
    }
    RowNodeBlock2.prototype.getId = function() {
      return this.id;
    };
    RowNodeBlock2.prototype.load = function() {
      this.state = RowNodeBlock2.STATE_LOADING;
      this.loadFromDatasource();
    };
    RowNodeBlock2.prototype.getVersion = function() {
      return this.version;
    };
    RowNodeBlock2.prototype.setStateWaitingToLoad = function() {
      this.version++;
      this.state = RowNodeBlock2.STATE_WAITING_TO_LOAD;
    };
    RowNodeBlock2.prototype.getState = function() {
      return this.state;
    };
    RowNodeBlock2.prototype.pageLoadFailed = function(version) {
      var requestMostRecentAndLive = this.isRequestMostRecentAndLive(version);
      if (requestMostRecentAndLive) {
        this.state = RowNodeBlock2.STATE_FAILED;
        this.processServerFail();
      }
      this.dispatchLoadCompleted(false);
    };
    RowNodeBlock2.prototype.success = function(version, params2) {
      this.successCommon(version, params2);
    };
    RowNodeBlock2.prototype.pageLoaded = function(version, rows, lastRow) {
      this.successCommon(version, { rowData: rows, rowCount: lastRow });
    };
    RowNodeBlock2.prototype.isRequestMostRecentAndLive = function(version) {
      var thisIsMostRecentRequest = version === this.version;
      var weAreNotDestroyed = this.isAlive();
      return thisIsMostRecentRequest && weAreNotDestroyed;
    };
    RowNodeBlock2.prototype.successCommon = function(version, params2) {
      this.dispatchLoadCompleted();
      var requestMostRecentAndLive = this.isRequestMostRecentAndLive(version);
      if (requestMostRecentAndLive) {
        this.state = RowNodeBlock2.STATE_LOADED;
        this.processServerResult(params2);
      }
    };
    RowNodeBlock2.prototype.dispatchLoadCompleted = function(success) {
      if (success === void 0) {
        success = true;
      }
      var event = {
        type: RowNodeBlock2.EVENT_LOAD_COMPLETE,
        success,
        block: this
      };
      this.dispatchEvent(event);
    };
    RowNodeBlock2.EVENT_LOAD_COMPLETE = "loadComplete";
    RowNodeBlock2.STATE_WAITING_TO_LOAD = "needsLoading";
    RowNodeBlock2.STATE_LOADING = "loading";
    RowNodeBlock2.STATE_LOADED = "loaded";
    RowNodeBlock2.STATE_FAILED = "failed";
    return RowNodeBlock2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2p = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$27 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param$9 = function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  var RowNodeBlockLoader = function(_super) {
    __extends$2p(RowNodeBlockLoader2, _super);
    function RowNodeBlockLoader2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.activeBlockLoadsCount = 0;
      _this.blocks = [];
      _this.active = true;
      return _this;
    }
    RowNodeBlockLoader_1 = RowNodeBlockLoader2;
    RowNodeBlockLoader2.prototype.postConstruct = function() {
      this.maxConcurrentRequests = this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();
      var blockLoadDebounceMillis = this.gridOptionsWrapper.getBlockLoadDebounceMillis();
      if (blockLoadDebounceMillis && blockLoadDebounceMillis > 0) {
        this.checkBlockToLoadDebounce = _.debounce(this.performCheckBlocksToLoad.bind(this), blockLoadDebounceMillis);
      }
    };
    RowNodeBlockLoader2.prototype.setBeans = function(loggerFactory) {
      this.logger = loggerFactory.create("RowNodeBlockLoader");
    };
    RowNodeBlockLoader2.prototype.addBlock = function(block) {
      this.blocks.push(block);
      block.addEventListener(RowNodeBlock.EVENT_LOAD_COMPLETE, this.loadComplete.bind(this));
      this.checkBlockToLoad();
    };
    RowNodeBlockLoader2.prototype.removeBlock = function(block) {
      _.removeFromArray(this.blocks, block);
    };
    RowNodeBlockLoader2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
      this.active = false;
    };
    RowNodeBlockLoader2.prototype.loadComplete = function() {
      this.activeBlockLoadsCount--;
      this.checkBlockToLoad();
      if (this.activeBlockLoadsCount == 0) {
        this.dispatchEvent({ type: RowNodeBlockLoader_1.BLOCK_LOADER_FINISHED_EVENT });
      }
    };
    RowNodeBlockLoader2.prototype.checkBlockToLoad = function() {
      if (this.checkBlockToLoadDebounce) {
        this.checkBlockToLoadDebounce();
      } else {
        this.performCheckBlocksToLoad();
      }
    };
    RowNodeBlockLoader2.prototype.performCheckBlocksToLoad = function() {
      if (!this.active) {
        return;
      }
      this.printCacheStatus();
      if (this.maxConcurrentRequests != null && this.activeBlockLoadsCount >= this.maxConcurrentRequests) {
        this.logger.log("checkBlockToLoad: max loads exceeded");
        return;
      }
      var blockToLoad = null;
      this.blocks.forEach(function(block) {
        if (block.getState() === RowNodeBlock.STATE_WAITING_TO_LOAD) {
          blockToLoad = block;
        }
      });
      if (blockToLoad) {
        blockToLoad.load();
        this.activeBlockLoadsCount++;
        this.printCacheStatus();
      }
    };
    RowNodeBlockLoader2.prototype.getBlockState = function() {
      var result = {};
      this.blocks.forEach(function(block) {
        var _a = block.getBlockStateJson(), id = _a.id, state2 = _a.state;
        result[id] = state2;
      });
      return result;
    };
    RowNodeBlockLoader2.prototype.printCacheStatus = function() {
      if (this.logger.isLogging()) {
        this.logger.log("printCacheStatus: activePageLoadsCount = " + this.activeBlockLoadsCount + "," + (" blocks = " + JSON.stringify(this.getBlockState())));
      }
    };
    RowNodeBlockLoader2.prototype.isLoading = function() {
      return this.activeBlockLoadsCount > 0;
    };
    var RowNodeBlockLoader_1;
    RowNodeBlockLoader2.BLOCK_LOADER_FINISHED_EVENT = "blockLoaderFinished";
    __decorate$27([
      PostConstruct
    ], RowNodeBlockLoader2.prototype, "postConstruct", null);
    __decorate$27([
      __param$9(0, Qualifier("loggerFactory"))
    ], RowNodeBlockLoader2.prototype, "setBeans", null);
    RowNodeBlockLoader2 = RowNodeBlockLoader_1 = __decorate$27([
      Bean("rowNodeBlockLoader")
    ], RowNodeBlockLoader2);
    return RowNodeBlockLoader2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __decorate$28 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var RowNodeSorter = function() {
    function RowNodeSorter2() {
    }
    RowNodeSorter2.prototype.doFullSort = function(rowNodes, sortOptions) {
      var mapper = function(rowNode, pos) {
        return { currentPos: pos, rowNode };
      };
      var sortedRowNodes = rowNodes.map(mapper);
      sortedRowNodes.sort(this.compareRowNodes.bind(this, sortOptions));
      return sortedRowNodes.map(function(item) {
        return item.rowNode;
      });
    };
    RowNodeSorter2.prototype.compareRowNodes = function(sortOptions, sortedNodeA, sortedNodeB) {
      var nodeA = sortedNodeA.rowNode;
      var nodeB = sortedNodeB.rowNode;
      for (var i2 = 0, len2 = sortOptions.length; i2 < len2; i2++) {
        var sortOption = sortOptions[i2];
        var isInverted = sortOption.sort === Constants.SORT_DESC;
        var valueA = this.getValue(nodeA, sortOption.column);
        var valueB = this.getValue(nodeB, sortOption.column);
        var comparatorResult = void 0;
        var providedComparator = this.getComparator(sortOption, nodeA);
        if (providedComparator) {
          comparatorResult = providedComparator(valueA, valueB, nodeA, nodeB, isInverted);
        } else {
          comparatorResult = _.defaultComparator(valueA, valueB, this.gridOptionsWrapper.isAccentedSort());
        }
        var validResult = !isNaN(comparatorResult);
        if (validResult && comparatorResult !== 0) {
          return sortOption.sort === Constants.SORT_ASC ? comparatorResult : comparatorResult * -1;
        }
      }
      return sortedNodeA.currentPos - sortedNodeB.currentPos;
    };
    RowNodeSorter2.prototype.getComparator = function(sortOption, rowNode) {
      var column = sortOption.column;
      var comparatorOnCol = column.getColDef().comparator;
      if (comparatorOnCol != null) {
        return comparatorOnCol;
      }
      if (rowNode.rowGroupColumn) {
        return rowNode.rowGroupColumn.getColDef().comparator;
      }
      if (column.getColDef().showRowGroup) {
        var groupLeafField = !rowNode.group && column.getColDef().field;
        if (groupLeafField) {
          var primaryColumn = this.columnModel.getPrimaryColumn(column.getColDef().field);
          var groupLeafComparator = primaryColumn.getColDef().comparator;
          if (groupLeafComparator) {
            return groupLeafComparator;
          }
        }
      }
    };
    RowNodeSorter2.prototype.getValue = function(nodeA, column) {
      return this.valueService.getValue(column, nodeA, false, false);
    };
    __decorate$28([
      Autowired("gridOptionsWrapper")
    ], RowNodeSorter2.prototype, "gridOptionsWrapper", void 0);
    __decorate$28([
      Autowired("valueService")
    ], RowNodeSorter2.prototype, "valueService", void 0);
    __decorate$28([
      Autowired("columnModel")
    ], RowNodeSorter2.prototype, "columnModel", void 0);
    RowNodeSorter2 = __decorate$28([
      Bean("rowNodeSorter")
    ], RowNodeSorter2);
    return RowNodeSorter2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2q = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$29 = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var CtrlsService = function(_super) {
    __extends$2q(CtrlsService2, _super);
    function CtrlsService2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.ready = false;
      _this.readyCallbacks = [];
      return _this;
    }
    CtrlsService2.prototype.checkReady = function() {
      this.ready = this.gridCtrl != null && this.gridBodyCtrl != null && this.centerRowContainerCtrl != null && this.leftRowContainerCtrl != null && this.rightRowContainerCtrl != null && this.bottomCenterRowContainerCtrl != null && this.bottomLeftRowContainerCtrl != null && this.bottomRightRowContainerCtrl != null && this.topCenterRowContainerCtrl != null && this.topLeftRowContainerCtrl != null && this.topRightRowContainerCtrl != null && this.centerHeaderRowContainerCtrl != null && this.leftHeaderRowContainerCtrl != null && this.rightHeaderRowContainerCtrl != null && this.fakeHScrollCtrl != null && this.gridHeaderCtrl != null;
      if (this.ready) {
        var p_1 = this.createReadyParams();
        this.readyCallbacks.forEach(function(c) {
          return c(p_1);
        });
        this.readyCallbacks.length = 0;
      }
    };
    CtrlsService2.prototype.whenReady = function(callback) {
      if (this.ready) {
        callback(this.createReadyParams());
      } else {
        this.readyCallbacks.push(callback);
      }
    };
    CtrlsService2.prototype.createReadyParams = function() {
      return {
        centerRowContainerCtrl: this.centerRowContainerCtrl,
        leftRowContainerCtrl: this.leftRowContainerCtrl,
        rightRowContainerCtrl: this.rightRowContainerCtrl,
        bottomCenterRowContainerCtrl: this.bottomCenterRowContainerCtrl,
        bottomLeftRowContainerCtrl: this.bottomLeftRowContainerCtrl,
        bottomRightRowContainerCtrl: this.bottomRightRowContainerCtrl,
        topCenterRowContainerCtrl: this.topCenterRowContainerCtrl,
        topLeftRowContainerCtrl: this.topLeftRowContainerCtrl,
        topRightRowContainerCtrl: this.topRightRowContainerCtrl,
        centerHeaderRowContainerCtrl: this.centerHeaderRowContainerCtrl,
        leftHeaderRowContainerCtrl: this.leftHeaderRowContainerCtrl,
        rightHeaderRowContainerCtrl: this.rightHeaderRowContainerCtrl,
        fakeHScrollCtrl: this.fakeHScrollCtrl,
        gridBodyCtrl: this.gridBodyCtrl,
        gridCtrl: this.gridCtrl,
        gridHeaderCtrl: this.gridHeaderCtrl
      };
    };
    CtrlsService2.prototype.registerFakeHScrollCtrl = function(ctrl) {
      this.fakeHScrollCtrl = ctrl;
      this.checkReady();
    };
    CtrlsService2.prototype.registerGridHeaderCtrl = function(gridHeaderCtrl) {
      this.gridHeaderCtrl = gridHeaderCtrl;
      this.checkReady();
    };
    CtrlsService2.prototype.registerCenterRowContainerCtrl = function(ctrl) {
      this.centerRowContainerCtrl = ctrl;
      this.checkReady();
    };
    CtrlsService2.prototype.registerLeftRowContainerCtrl = function(ctrl) {
      this.leftRowContainerCtrl = ctrl;
      this.checkReady();
    };
    CtrlsService2.prototype.registerRightRowContainerCtrl = function(ctrl) {
      this.rightRowContainerCtrl = ctrl;
      this.checkReady();
    };
    CtrlsService2.prototype.registerTopCenterRowContainerCtrl = function(ctrl) {
      this.topCenterRowContainerCtrl = ctrl;
      this.checkReady();
    };
    CtrlsService2.prototype.registerTopLeftRowContainerCon = function(ctrl) {
      this.topLeftRowContainerCtrl = ctrl;
      this.checkReady();
    };
    CtrlsService2.prototype.registerTopRightRowContainerCtrl = function(ctrl) {
      this.topRightRowContainerCtrl = ctrl;
      this.checkReady();
    };
    CtrlsService2.prototype.registerBottomCenterRowContainerCtrl = function(ctrl) {
      this.bottomCenterRowContainerCtrl = ctrl;
      this.checkReady();
    };
    CtrlsService2.prototype.registerBottomLeftRowContainerCtrl = function(ctrl) {
      this.bottomLeftRowContainerCtrl = ctrl;
      this.checkReady();
    };
    CtrlsService2.prototype.registerBottomRightRowContainerCtrl = function(ctrl) {
      this.bottomRightRowContainerCtrl = ctrl;
      this.checkReady();
    };
    CtrlsService2.prototype.registerHeaderContainer = function(ctrl, pinned) {
      switch (pinned) {
        case Constants.PINNED_LEFT:
          this.leftHeaderRowContainerCtrl = ctrl;
          break;
        case Constants.PINNED_RIGHT:
          this.rightHeaderRowContainerCtrl = ctrl;
          break;
        default:
          this.centerHeaderRowContainerCtrl = ctrl;
          break;
      }
      this.checkReady();
    };
    CtrlsService2.prototype.registerGridBodyCtrl = function(ctrl) {
      this.gridBodyCtrl = ctrl;
      this.checkReady();
    };
    CtrlsService2.prototype.registerGridCtrl = function(ctrl) {
      this.gridCtrl = ctrl;
      this.checkReady();
    };
    CtrlsService2.prototype.getFakeHScrollCtrl = function() {
      return this.fakeHScrollCtrl;
    };
    CtrlsService2.prototype.getGridHeaderCtrl = function() {
      return this.gridHeaderCtrl;
    };
    CtrlsService2.prototype.getGridCtrl = function() {
      return this.gridCtrl;
    };
    CtrlsService2.prototype.getCenterRowContainerCtrl = function() {
      return this.centerRowContainerCtrl;
    };
    CtrlsService2.prototype.getTopCenterRowContainerCtrl = function() {
      return this.topCenterRowContainerCtrl;
    };
    CtrlsService2.prototype.getBottomCenterRowContainerCtrl = function() {
      return this.bottomCenterRowContainerCtrl;
    };
    CtrlsService2.prototype.getGridBodyCtrl = function() {
      return this.gridBodyCtrl;
    };
    CtrlsService2.prototype.getHeaderRowContainerCtrls = function() {
      return [this.leftHeaderRowContainerCtrl, this.rightHeaderRowContainerCtrl, this.centerHeaderRowContainerCtrl];
    };
    CtrlsService2.prototype.getHeaderRowContainerCtrl = function(pinned) {
      switch (pinned) {
        case Constants.PINNED_LEFT:
          return this.leftHeaderRowContainerCtrl;
        case Constants.PINNED_RIGHT:
          return this.rightHeaderRowContainerCtrl;
        default:
          return this.centerHeaderRowContainerCtrl;
      }
    };
    CtrlsService2 = __decorate$29([
      Bean("ctrlsService")
    ], CtrlsService2);
    return CtrlsService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2r = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2a = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var CtrlsFactory = function(_super) {
    __extends$2r(CtrlsFactory2, _super);
    function CtrlsFactory2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.registry = {};
      return _this;
    }
    CtrlsFactory2.prototype.register = function(meta) {
      this.registry[meta.controllerName] = meta.controllerClass;
    };
    CtrlsFactory2.prototype.getInstance = function(name) {
      var ControllerClass = this.registry[name];
      if (ControllerClass == null) {
        return void 0;
      }
      return new ControllerClass();
    };
    CtrlsFactory2 = __decorate$2a([
      Bean("ctrlsFactory")
    ], CtrlsFactory2);
    return CtrlsFactory2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2s = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2b = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var FakeHScrollCtrl = function(_super) {
    __extends$2s(FakeHScrollCtrl2, _super);
    function FakeHScrollCtrl2() {
      return _super.call(this) || this;
    }
    FakeHScrollCtrl2.prototype.setComp = function(view, eGui, eViewport, eContainer) {
      this.view = view;
      this.eViewport = eViewport;
      this.eContainer = eContainer;
      this.eGui = eGui;
      this.addManagedListener(this.eventService, Events.EVENT_SCROLL_VISIBILITY_CHANGED, this.onScrollVisibilityChanged.bind(this));
      this.onScrollVisibilityChanged();
      var spacerWidthsListener = this.setFakeHScrollSpacerWidths.bind(this);
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, spacerWidthsListener);
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, spacerWidthsListener);
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, spacerWidthsListener);
      this.setFakeHScrollSpacerWidths();
      if (this.invisibleScrollbar) {
        this.hideAndShowInvisibleScrollAsNeeded();
        this.addActiveListenerToggles();
      }
      this.ctrlsService.registerFakeHScrollCtrl(this);
    };
    FakeHScrollCtrl2.prototype.addActiveListenerToggles = function() {
      var _this = this;
      var activateEvents = ["mouseenter", "mousedown", "touchstart"];
      var deactivateEvents = ["mouseleave", "mouseup", "touchend"];
      activateEvents.forEach(function(eventName) {
        return _this.addManagedListener(_this.eGui, eventName, function() {
          return _this.view.addOrRemoveCssClass("ag-scrollbar-active", true);
        });
      });
      deactivateEvents.forEach(function(eventName) {
        return _this.addManagedListener(_this.eGui, eventName, function() {
          return _this.view.addOrRemoveCssClass("ag-scrollbar-active", false);
        });
      });
    };
    FakeHScrollCtrl2.prototype.postConstruct = function() {
      this.enableRtl = this.gridOptionsWrapper.isEnableRtl();
      this.invisibleScrollbar = isInvisibleScrollbar();
    };
    FakeHScrollCtrl2.prototype.onScrollVisibilityChanged = function() {
      this.setScrollVisible();
      this.setFakeHScrollSpacerWidths();
    };
    FakeHScrollCtrl2.prototype.hideAndShowInvisibleScrollAsNeeded = function() {
      var _this = this;
      this.addManagedListener(this.eventService, Events.EVENT_BODY_SCROLL, function(params2) {
        if (params2.direction === "horizontal") {
          _this.view.addOrRemoveCssClass("ag-scrollbar-scrolling", true);
        }
      });
      this.addManagedListener(this.eventService, Events.EVENT_BODY_SCROLL_END, function() {
        return _this.view.addOrRemoveCssClass("ag-scrollbar-scrolling", false);
      });
    };
    FakeHScrollCtrl2.prototype.setFakeHScrollSpacerWidths = function() {
      var vScrollShowing = this.scrollVisibleService.isVerticalScrollShowing();
      var rightSpacing = this.columnModel.getDisplayedColumnsRightWidth();
      var scrollOnRight = !this.enableRtl && vScrollShowing;
      var scrollbarWidth = this.gridOptionsWrapper.getScrollbarWidth();
      if (scrollOnRight) {
        rightSpacing += scrollbarWidth;
      }
      this.view.setRightSpacerFixedWidth(rightSpacing);
      this.view.includeRightSpacerScrollerCss("ag-scroller-corner", rightSpacing <= scrollbarWidth);
      var leftSpacing = this.columnModel.getDisplayedColumnsLeftWidth();
      var scrollOnLeft = this.enableRtl && vScrollShowing;
      if (scrollOnLeft) {
        leftSpacing += scrollbarWidth;
      }
      this.view.setLeftSpacerFixedWidth(leftSpacing);
      this.view.includeLeftSpacerScrollerCss("ag-scroller-corner", leftSpacing <= scrollbarWidth);
    };
    FakeHScrollCtrl2.prototype.setScrollVisible = function() {
      var hScrollShowing = this.scrollVisibleService.isHorizontalScrollShowing();
      var invisibleScrollbar2 = this.invisibleScrollbar;
      var isSuppressHorizontalScroll = this.gridOptionsWrapper.isSuppressHorizontalScroll();
      var scrollbarWidth = hScrollShowing ? this.gridOptionsWrapper.getScrollbarWidth() || 0 : 0;
      var adjustedScrollbarWidth = scrollbarWidth === 0 && invisibleScrollbar2 ? 15 : scrollbarWidth;
      var scrollContainerSize = !isSuppressHorizontalScroll ? adjustedScrollbarWidth : 0;
      var addIEPadding = isBrowserIE() && hScrollShowing;
      this.view.addOrRemoveCssClass("ag-scrollbar-invisible", invisibleScrollbar2);
      this.view.setHeight(scrollContainerSize);
      this.view.setViewportHeight(scrollContainerSize + (addIEPadding ? 1 : 0));
      this.view.setContainerHeight(scrollContainerSize);
    };
    FakeHScrollCtrl2.prototype.getViewport = function() {
      return this.eViewport;
    };
    FakeHScrollCtrl2.prototype.getContainer = function() {
      return this.eContainer;
    };
    __decorate$2b([
      Autowired("scrollVisibleService")
    ], FakeHScrollCtrl2.prototype, "scrollVisibleService", void 0);
    __decorate$2b([
      Autowired("columnModel")
    ], FakeHScrollCtrl2.prototype, "columnModel", void 0);
    __decorate$2b([
      Autowired("ctrlsService")
    ], FakeHScrollCtrl2.prototype, "ctrlsService", void 0);
    __decorate$2b([
      PostConstruct
    ], FakeHScrollCtrl2.prototype, "postConstruct", null);
    return FakeHScrollCtrl2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2t = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2c = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var FakeHScrollComp = function(_super) {
    __extends$2t(FakeHScrollComp2, _super);
    function FakeHScrollComp2() {
      return _super.call(this, FakeHScrollComp2.TEMPLATE) || this;
    }
    FakeHScrollComp2.prototype.postConstruct = function() {
      var _this = this;
      var compProxy = {
        addOrRemoveCssClass: function(cssClassName, on) {
          return _this.addOrRemoveCssClass(cssClassName, on);
        },
        setHeight: function(height) {
          return setFixedHeight(_this.getGui(), height);
        },
        setContainerHeight: function(height) {
          return setFixedHeight(_this.eContainer, height);
        },
        setViewportHeight: function(height) {
          return setFixedHeight(_this.eViewport, height);
        },
        setRightSpacerFixedWidth: function(width) {
          return setFixedWidth(_this.eRightSpacer, width);
        },
        setLeftSpacerFixedWidth: function(width) {
          return setFixedWidth(_this.eLeftSpacer, width);
        },
        includeLeftSpacerScrollerCss: function(cssClass, include) {
          return addOrRemoveCssClass(_this.eLeftSpacer, cssClass, include);
        },
        includeRightSpacerScrollerCss: function(cssClass, include) {
          return addOrRemoveCssClass(_this.eRightSpacer, cssClass, include);
        }
      };
      var ctrl = this.createManagedBean(new FakeHScrollCtrl());
      ctrl.setComp(compProxy, this.getGui(), this.eViewport, this.eContainer);
      this.createManagedBean(new CenterWidthFeature(function(width) {
        return _this.eContainer.style.width = width + "px";
      }));
    };
    FakeHScrollComp2.TEMPLATE = '<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>\n        </div>';
    __decorate$2c([
      RefSelector("eLeftSpacer")
    ], FakeHScrollComp2.prototype, "eLeftSpacer", void 0);
    __decorate$2c([
      RefSelector("eRightSpacer")
    ], FakeHScrollComp2.prototype, "eRightSpacer", void 0);
    __decorate$2c([
      RefSelector("eViewport")
    ], FakeHScrollComp2.prototype, "eViewport", void 0);
    __decorate$2c([
      RefSelector("eContainer")
    ], FakeHScrollComp2.prototype, "eContainer", void 0);
    __decorate$2c([
      PostConstruct
    ], FakeHScrollComp2.prototype, "postConstruct", null);
    return FakeHScrollComp2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2u = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2d = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var PinnedWidthService = function(_super) {
    __extends$2u(PinnedWidthService2, _super);
    function PinnedWidthService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    PinnedWidthService2.prototype.postConstruct = function() {
      var listener = this.checkContainerWidths.bind(this);
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_CHANGED, listener);
      this.addManagedListener(this.eventService, Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED, listener);
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_DOM_LAYOUT, listener);
    };
    PinnedWidthService2.prototype.checkContainerWidths = function() {
      var printLayout = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_PRINT;
      var newLeftWidth = printLayout ? 0 : this.columnModel.getDisplayedColumnsLeftWidth();
      var newRightWidth = printLayout ? 0 : this.columnModel.getDisplayedColumnsRightWidth();
      if (newLeftWidth != this.leftWidth) {
        this.leftWidth = newLeftWidth;
        this.eventService.dispatchEvent({ type: Events.EVENT_LEFT_PINNED_WIDTH_CHANGED });
      }
      if (newRightWidth != this.rightWidth) {
        this.rightWidth = newRightWidth;
        this.eventService.dispatchEvent({ type: Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED });
      }
    };
    PinnedWidthService2.prototype.getPinnedRightWidth = function() {
      return this.rightWidth;
    };
    PinnedWidthService2.prototype.getPinnedLeftWidth = function() {
      return this.leftWidth;
    };
    __decorate$2d([
      Autowired("columnModel")
    ], PinnedWidthService2.prototype, "columnModel", void 0);
    __decorate$2d([
      PostConstruct
    ], PinnedWidthService2.prototype, "postConstruct", null);
    PinnedWidthService2 = __decorate$2d([
      Bean("pinnedWidthService")
    ], PinnedWidthService2);
    return PinnedWidthService2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2v = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2e = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var PopupEditorWrapper = function(_super) {
    __extends$2v(PopupEditorWrapper2, _super);
    function PopupEditorWrapper2(params2) {
      var _this = _super.call(this, '<div class="ag-popup-editor" tabindex="-1"/>') || this;
      _this.params = params2;
      return _this;
    }
    PopupEditorWrapper2.prototype.postConstruct = function() {
      this.gridOptionsWrapper.setDomData(this.getGui(), PopupEditorWrapper2.DOM_KEY_POPUP_EDITOR_WRAPPER, true);
      this.addKeyDownListener();
    };
    PopupEditorWrapper2.prototype.addKeyDownListener = function() {
      var _this = this;
      var eGui = this.getGui();
      var params2 = this.params;
      var listener = function(event) {
        if (!isUserSuppressingKeyboardEvent(_this.gridOptionsWrapper, event, params2.node, params2.column, true)) {
          params2.onKeyDown(event);
        }
      };
      this.addManagedListener(eGui, "keydown", listener);
    };
    PopupEditorWrapper2.DOM_KEY_POPUP_EDITOR_WRAPPER = "popupEditorWrapper";
    __decorate$2e([
      PostConstruct
    ], PopupEditorWrapper2.prototype, "postConstruct", null);
    return PopupEditorWrapper2;
  }(PopupComponent);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2w = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __assign$c = function() {
    __assign$c = Object.assign || function(t) {
      for (var s, i2 = 1, n = arguments.length; i2 < n; i2++) {
        s = arguments[i2];
        for (var p2 in s)
          if (Object.prototype.hasOwnProperty.call(s, p2))
            t[p2] = s[p2];
      }
      return t;
    };
    return __assign$c.apply(this, arguments);
  };
  var CellComp = function(_super) {
    __extends$2w(CellComp2, _super);
    function CellComp2(scope, beans, cellCtrl, autoHeightCell, printLayout, eRow, editingRow) {
      var _this = _super.call(this) || this;
      _this.scope = null;
      _this.rendererVersion = 0;
      _this.editorVersion = 0;
      _this.scope = scope;
      _this.beans = beans;
      _this.column = cellCtrl.getColumn();
      _this.rowNode = cellCtrl.getRowNode();
      _this.rowCtrl = cellCtrl.getRowCtrl();
      _this.autoHeightCell = autoHeightCell;
      _this.eRow = eRow;
      _this.setTemplate('<div comp-id="' + _this.getCompId() + '"/>');
      var eGui = _this.getGui();
      var style = eGui.style;
      _this.eCellValue = eGui;
      var setAttribute = function(name, value, element2) {
        var actualElement = element2 ? element2 : eGui;
        if (value != null && value != "") {
          actualElement.setAttribute(name, value);
        } else {
          actualElement.removeAttribute(name);
        }
      };
      var compProxy = {
        addOrRemoveCssClass: function(cssClassName, on) {
          return _this.addOrRemoveCssClass(cssClassName, on);
        },
        setUserStyles: function(styles) {
          return addStylesToElement(eGui, styles);
        },
        setAriaSelected: function(selected) {
          return setAriaSelected(eGui, selected);
        },
        setAriaExpanded: function(selected) {
          return setAriaExpanded(eGui, selected);
        },
        getFocusableElement: function() {
          return _this.getFocusableElement();
        },
        setLeft: function(left) {
          return style.left = left;
        },
        setWidth: function(width) {
          return style.width = width;
        },
        setAriaColIndex: function(index) {
          return setAriaColIndex(_this.getGui(), index);
        },
        setHeight: function(height) {
          return style.height = height;
        },
        setZIndex: function(zIndex) {
          return style.zIndex = zIndex;
        },
        setTabIndex: function(tabIndex) {
          return setAttribute("tabindex", tabIndex.toString());
        },
        setRole: function(role) {
          return setAriaRole(eGui, role);
        },
        setColId: function(colId) {
          return setAttribute("col-id", colId);
        },
        setTitle: function(title) {
          return setAttribute("title", title);
        },
        setUnselectable: function(value) {
          return setAttribute("unselectable", value, _this.eCellValue);
        },
        setTransition: function(transition) {
          return style.transition = transition ? transition : "";
        },
        setIncludeSelection: function(include) {
          return _this.includeSelection = include;
        },
        setIncludeRowDrag: function(include) {
          return _this.includeRowDrag = include;
        },
        setIncludeDndSource: function(include) {
          return _this.includeDndSource = include;
        },
        setForceWrapper: function(force) {
          return _this.forceWrapper = force;
        },
        setRenderDetails: function(compDetails, valueToDisplay, force) {
          return _this.setRenderDetails(compDetails, valueToDisplay, force);
        },
        setEditDetails: function(compDetails, popup, position) {
          return _this.setEditDetails(compDetails, popup, position);
        },
        getCellEditor: function() {
          return _this.cellEditor || null;
        },
        getCellRenderer: function() {
          return _this.cellRenderer || null;
        },
        getParentOfValue: function() {
          return _this.eCellValue;
        }
      };
      _this.cellCtrl = cellCtrl;
      cellCtrl.setComp(compProxy, _this.scope, _this.getGui(), printLayout, editingRow);
      return _this;
    }
    CellComp2.prototype.setRenderDetails = function(compDetails, valueToDisplay, forceNewCellRendererInstance) {
      var isInlineEditing = this.cellEditor && !this.cellEditorPopupWrapper;
      if (isInlineEditing) {
        return;
      }
      this.firstRender = this.firstRender == null;
      var usingAngular1Template = this.isUsingAngular1Template();
      var controlWrapperChanged = this.setupControlsWrapper();
      if (compDetails) {
        var neverRefresh = forceNewCellRendererInstance || controlWrapperChanged;
        var cellRendererRefreshSuccessful = neverRefresh ? false : this.refreshCellRenderer(compDetails);
        if (!cellRendererRefreshSuccessful) {
          this.destroyRenderer();
          this.createCellRendererInstance(compDetails);
        }
      } else {
        this.destroyRenderer();
        if (usingAngular1Template) {
          this.insertValueUsingAngular1Template();
        } else {
          this.insertValueWithoutCellRenderer(valueToDisplay);
        }
      }
      this.cellCtrl.setupAutoHeight(this.eCellValue);
    };
    CellComp2.prototype.setEditDetails = function(compDetails, popup, position) {
      if (compDetails) {
        this.createCellEditorInstance(compDetails, popup, position);
      } else {
        this.destroyEditor();
      }
    };
    CellComp2.prototype.removeControlsWrapper = function() {
      this.eCellValue = this.getGui();
      this.eCellWrapper = null;
      this.checkboxSelectionComp = this.beans.context.destroyBean(this.checkboxSelectionComp);
      this.dndSourceComp = this.beans.context.destroyBean(this.dndSourceComp);
      this.rowDraggingComp = this.beans.context.destroyBean(this.rowDraggingComp);
    };
    CellComp2.prototype.setupControlsWrapper = function() {
      var usingWrapper = this.includeRowDrag || this.includeDndSource || this.includeSelection || this.forceWrapper;
      var changed = true;
      var notChanged = false;
      this.addOrRemoveCssClass("ag-cell-value", !usingWrapper);
      if (usingWrapper && !this.eCellWrapper) {
        this.addControlsWrapper();
        return changed;
      }
      if (!usingWrapper && this.eCellWrapper) {
        this.removeControlsWrapper();
        return changed;
      }
      return notChanged;
    };
    CellComp2.prototype.addControlsWrapper = function() {
      var eGui = this.getGui();
      eGui.innerHTML = '<div ref="eCellWrapper" class="ag-cell-wrapper" role="presentation">\n                <span ref="eCellValue" class="ag-cell-value" role="presentation"></span>\n            </div>';
      this.eCellValue = this.getRefElement("eCellValue");
      this.eCellWrapper = this.getRefElement("eCellWrapper");
      if (!this.forceWrapper) {
        this.eCellValue.setAttribute("unselectable", "on");
      }
      var id = this.eCellValue.id = "cell-" + this.getCompId();
      var describedByIds = [];
      if (this.includeRowDrag) {
        this.rowDraggingComp = this.cellCtrl.createRowDragComp();
        if (this.rowDraggingComp) {
          this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(), this.eCellValue);
        }
      }
      if (this.includeDndSource) {
        this.dndSourceComp = this.cellCtrl.createDndSource();
        this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(), this.eCellValue);
      }
      if (this.includeSelection) {
        this.checkboxSelectionComp = this.cellCtrl.createSelectionCheckbox();
        this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(), this.eCellValue);
        describedByIds.push(this.checkboxSelectionComp.getCheckboxId());
      }
      describedByIds.push(id);
      setAriaDescribedBy(this.getGui(), describedByIds.join(" "));
    };
    CellComp2.prototype.createCellEditorInstance = function(compDetails, popup, position) {
      var _this = this;
      var versionCopy = this.editorVersion;
      var cellEditorPromise = this.beans.userComponentFactory.createInstanceFromCompDetails(compDetails);
      if (!cellEditorPromise) {
        return;
      }
      var params2 = compDetails.params;
      cellEditorPromise.then(function(c) {
        return _this.afterCellEditorCreated(versionCopy, c, params2, popup, position);
      });
      var cellEditorAsync = missing(this.cellEditor);
      if (cellEditorAsync && params2.cellStartedEdit) {
        this.cellCtrl.focusCell(true);
      }
    };
    CellComp2.prototype.insertValueWithoutCellRenderer = function(valueToDisplay) {
      var escapedValue = valueToDisplay != null ? escapeString(valueToDisplay) : null;
      if (escapedValue != null) {
        this.eCellValue.innerHTML = escapedValue;
      } else {
        clearElement(this.eCellValue);
      }
    };
    CellComp2.prototype.insertValueUsingAngular1Template = function() {
      var _this = this;
      var _a = this.column.getColDef(), template = _a.template, templateUrl = _a.templateUrl;
      var templateToInsert = void 0;
      if (template != null) {
        templateToInsert = template;
      } else if (templateUrl != null) {
        templateToInsert = this.beans.templateService.getTemplate(templateUrl, function() {
          return _this.cellCtrl.refreshCell({ forceRefresh: true });
        });
      }
      if (templateToInsert != null) {
        this.eCellValue.innerHTML = templateToInsert;
        this.updateAngular1ScopeAndCompile();
      }
    };
    CellComp2.prototype.destroyEditorAndRenderer = function() {
      this.destroyRenderer();
      this.destroyEditor();
    };
    CellComp2.prototype.destroyRenderer = function() {
      var context = this.beans.context;
      this.cellRenderer = context.destroyBean(this.cellRenderer);
      removeFromParent(this.cellRendererGui);
      this.cellRendererGui = null;
      this.rendererVersion++;
    };
    CellComp2.prototype.destroyEditor = function() {
      var context = this.beans.context;
      if (this.hideEditorPopup) {
        this.hideEditorPopup();
      }
      this.hideEditorPopup = void 0;
      this.cellEditor = context.destroyBean(this.cellEditor);
      this.cellEditorPopupWrapper = context.destroyBean(this.cellEditorPopupWrapper);
      removeFromParent(this.cellEditorGui);
      this.cellEditorGui = null;
      this.editorVersion++;
    };
    CellComp2.prototype.refreshCellRenderer = function(compClassAndParams) {
      if (this.cellRenderer == null || this.cellRenderer.refresh == null) {
        return false;
      }
      if (this.cellRendererClass !== compClassAndParams.componentClass) {
        return false;
      }
      var result = this.cellRenderer.refresh(compClassAndParams.params);
      return result === true || result === void 0;
    };
    CellComp2.prototype.createCellRendererInstance = function(compClassAndParams) {
      var _this = this;
      var angularCompileRows = this.beans.gridOptionsWrapper.isAngularCompileRows();
      var suppressAnimationFrame = this.beans.gridOptionsWrapper.isSuppressAnimationFrame();
      var useTaskService = !angularCompileRows && !suppressAnimationFrame && !this.autoHeightCell;
      var displayComponentVersionCopy = this.rendererVersion;
      var componentClass = compClassAndParams.componentClass;
      var createCellRendererFunc = function() {
        var staleTask = _this.rendererVersion !== displayComponentVersionCopy || !_this.isAlive();
        if (staleTask) {
          return;
        }
        var componentPromise = _this.beans.userComponentFactory.createInstanceFromCompDetails(compClassAndParams);
        var callback = _this.afterCellRendererCreated.bind(_this, displayComponentVersionCopy, componentClass);
        if (componentPromise) {
          componentPromise.then(callback);
        }
      };
      if (useTaskService && this.firstRender) {
        this.beans.animationFrameService.createTask(createCellRendererFunc, this.rowNode.rowIndex, "createTasksP2");
      } else {
        createCellRendererFunc();
      }
    };
    CellComp2.prototype.isUsingAngular1Template = function() {
      var colDef = this.column.getColDef();
      var res = colDef.template != null || colDef.templateUrl != null;
      return res;
    };
    CellComp2.prototype.getCtrl = function() {
      return this.cellCtrl;
    };
    CellComp2.prototype.getRowCtrl = function() {
      return this.rowCtrl;
    };
    CellComp2.prototype.getCellRenderer = function() {
      return this.cellRenderer;
    };
    CellComp2.prototype.getCellEditor = function() {
      return this.cellEditor;
    };
    CellComp2.prototype.afterCellRendererCreated = function(cellRendererVersion, cellRendererClass, cellRenderer) {
      var staleTask = !this.isAlive() || cellRendererVersion !== this.rendererVersion;
      if (staleTask) {
        this.beans.context.destroyBean(cellRenderer);
        return;
      }
      this.cellRenderer = cellRenderer;
      this.cellRendererClass = cellRendererClass;
      this.cellRendererGui = this.cellRenderer.getGui();
      if (this.cellRendererGui != null) {
        clearElement(this.eCellValue);
        this.eCellValue.appendChild(this.cellRendererGui);
        this.updateAngular1ScopeAndCompile();
      }
    };
    CellComp2.prototype.afterCellEditorCreated = function(requestVersion, cellEditor, params2, popup, position) {
      var staleComp = requestVersion !== this.editorVersion;
      if (staleComp) {
        this.beans.context.destroyBean(cellEditor);
        return;
      }
      var editingCancelledByUserComp = cellEditor.isCancelBeforeStart && cellEditor.isCancelBeforeStart();
      if (editingCancelledByUserComp) {
        this.beans.context.destroyBean(cellEditor);
        this.cellCtrl.stopEditing();
        return;
      }
      if (!cellEditor.getGui) {
        console.warn("AG Grid: cellEditor for column " + this.column.getId() + " is missing getGui() method");
        this.beans.context.destroyBean(cellEditor);
        return;
      }
      this.cellEditor = cellEditor;
      this.cellEditorGui = cellEditor.getGui();
      var cellEditorInPopup = popup || cellEditor.isPopup !== void 0 && cellEditor.isPopup();
      if (cellEditorInPopup) {
        if (!popup) {
          this.cellCtrl.hackSayEditingInPopup();
        }
        this.addPopupCellEditor(params2, position);
      } else {
        this.addInCellEditor();
      }
      if (cellEditor.afterGuiAttached) {
        cellEditor.afterGuiAttached();
      }
    };
    CellComp2.prototype.addInCellEditor = function() {
      var eGui = this.getGui();
      if (eGui.contains(document.activeElement)) {
        eGui.focus();
      }
      this.destroyRenderer();
      this.removeControlsWrapper();
      this.clearCellElement();
      if (this.cellEditorGui) {
        eGui.appendChild(this.cellEditorGui);
      }
    };
    CellComp2.prototype.addPopupCellEditor = function(params2, position) {
      var _this = this;
      if (this.beans.gridOptionsWrapper.isFullRowEdit()) {
        console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");
      }
      var cellEditor = this.cellEditor;
      this.cellEditorPopupWrapper = this.beans.context.createBean(new PopupEditorWrapper(params2));
      var ePopupGui = this.cellEditorPopupWrapper.getGui();
      if (this.cellEditorGui) {
        ePopupGui.appendChild(this.cellEditorGui);
      }
      var popupService = this.beans.popupService;
      var useModelPopup = this.beans.gridOptionsWrapper.isStopEditingWhenCellsLoseFocus();
      position != null ? position : cellEditor.getPopupPosition ? cellEditor.getPopupPosition() : "over";
      var positionParams = {
        column: this.column,
        rowNode: this.rowNode,
        type: "popupCellEditor",
        eventSource: this.getGui(),
        ePopup: ePopupGui,
        keepWithinBounds: true
      };
      var positionCallback = position === "under" ? popupService.positionPopupUnderComponent.bind(popupService, positionParams) : popupService.positionPopupOverComponent.bind(popupService, positionParams);
      var translate = this.beans.gridOptionsWrapper.getLocaleTextFunc();
      var addPopupRes = popupService.addPopup({
        modal: useModelPopup,
        eChild: ePopupGui,
        closeOnEsc: true,
        closedCallback: function() {
          _this.cellCtrl.onPopupEditorClosed();
        },
        anchorToElement: this.getGui(),
        positionCallback,
        ariaLabel: translate("ariaLabelCellEditor", "Cell Editor")
      });
      if (addPopupRes) {
        this.hideEditorPopup = addPopupRes.hideFunc;
      }
    };
    CellComp2.prototype.detach = function() {
      this.eRow.removeChild(this.getGui());
    };
    CellComp2.prototype.destroy = function() {
      this.cellCtrl.stopEditing();
      this.destroyEditorAndRenderer();
      this.removeControlsWrapper();
      if (this.angularCompiledElement) {
        this.angularCompiledElement.remove();
        this.angularCompiledElement = void 0;
      }
      _super.prototype.destroy.call(this);
    };
    CellComp2.prototype.clearCellElement = function() {
      var eGui = this.getGui();
      if (eGui.contains(document.activeElement) && !isBrowserIE()) {
        eGui.focus({
          preventScroll: true
        });
      }
      clearElement(eGui);
    };
    CellComp2.prototype.updateAngular1ScopeAndCompile = function() {
      if (this.beans.gridOptionsWrapper.isAngularCompileRows() && this.scope) {
        this.scope.data = __assign$c({}, this.rowNode.data);
        if (this.angularCompiledElement) {
          this.angularCompiledElement.remove();
        }
        this.angularCompiledElement = this.beans.$compile(this.eCellValue.children)(this.scope);
        this.beans.ctrlsService.getGridBodyCtrl().requestAngularApply();
      }
    };
    return CellComp2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2x = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var RowComp = function(_super) {
    __extends$2x(RowComp2, _super);
    function RowComp2(ctrl, beans, pinned) {
      var _this = _super.call(this) || this;
      _this.cellComps = {};
      _this.beans = beans;
      _this.rowCtrl = ctrl;
      _this.setTemplate('<div comp-id="' + _this.getCompId() + '" style="' + _this.getInitialStyle() + '"/>');
      var eGui = _this.getGui();
      var style = eGui.style;
      var compProxy = {
        setDisplay: function(value) {
          if (value == null) {
            style.removeProperty("display");
          } else {
            style.setProperty("display", "none");
          }
        },
        setDomOrder: function(domOrder) {
          return _this.domOrder = domOrder;
        },
        setCellCtrls: function(cellCtrls) {
          return _this.setCellCtrls(cellCtrls);
        },
        showFullWidth: function(compDetails) {
          return _this.showFullWidth(compDetails);
        },
        getFullWidthCellRenderer: function() {
          return _this.getFullWidthCellRenderer();
        },
        addOrRemoveCssClass: function(name, on) {
          return _this.addOrRemoveCssClass(name, on);
        },
        setAriaExpanded: function(on) {
          return setAriaExpanded(eGui, on);
        },
        setUserStyles: function(styles) {
          return addStylesToElement(eGui, styles);
        },
        setAriaSelected: function(value) {
          return setAriaSelected(eGui, value);
        },
        setAriaLabel: function(value) {
          setAriaLabel(eGui, value == null ? "" : value);
        },
        setHeight: function(height) {
          return style.height = height;
        },
        setTop: function(top) {
          return style.top = top;
        },
        setTransform: function(transform) {
          return style.transform = transform;
        },
        setRowIndex: function(rowIndex) {
          return eGui.setAttribute("row-index", rowIndex);
        },
        setRole: function(role) {
          return setAriaRole(eGui, role);
        },
        setAriaRowIndex: function(rowIndex) {
          return setAriaRowIndex(_this.getGui(), rowIndex);
        },
        setRowId: function(rowId) {
          return eGui.setAttribute("row-id", rowId);
        },
        setRowBusinessKey: function(businessKey) {
          return eGui.setAttribute("row-business-key", businessKey);
        },
        setTabIndex: function(tabIndex) {
          return eGui.setAttribute("tabindex", tabIndex.toString());
        }
      };
      ctrl.setComp(compProxy, _this.getGui(), pinned);
      return _this;
    }
    RowComp2.prototype.getInitialStyle = function() {
      var transform = this.rowCtrl.getInitialTransform();
      var top = this.rowCtrl.getInitialRowTop();
      return transform ? "transform: " + transform : "top: " + top;
    };
    RowComp2.prototype.showFullWidth = function(compDetails) {
      var _this = this;
      var callback = function(cellRenderer) {
        if (_this.isAlive()) {
          var eGui = cellRenderer.getGui();
          _this.getGui().appendChild(eGui);
          if (_this.rowCtrl.getRowType() === RowType.FullWidthDetail) {
            _this.rowCtrl.setupDetailRowAutoHeight(eGui);
          }
          _this.setFullWidthRowComp(cellRenderer);
        } else {
          _this.beans.context.destroyBean(cellRenderer);
        }
      };
      var res = this.beans.userComponentFactory.createInstanceFromCompDetails(compDetails, this.rowCtrl.getFullWidthCellRendererType());
      if (!res) {
        return;
      }
      res.then(callback);
    };
    RowComp2.prototype.setCellCtrls = function(cellCtrls) {
      var _this = this;
      var cellsToRemove = assign2({}, this.cellComps);
      cellCtrls.forEach(function(cellCtrl) {
        var key = cellCtrl.getInstanceId();
        var existingCellComp = _this.cellComps[key];
        if (existingCellComp == null) {
          _this.newCellComp(cellCtrl);
        } else {
          cellsToRemove[key] = null;
        }
      });
      var cellCompsToRemove = getAllValuesInObject(cellsToRemove).filter(function(cellComp) {
        return cellComp != null;
      });
      this.destroyCells(cellCompsToRemove);
      this.ensureDomOrder(cellCtrls);
    };
    RowComp2.prototype.ensureDomOrder = function(cellCtrls) {
      var _this = this;
      if (!this.domOrder) {
        return;
      }
      var elementsInOrder = [];
      cellCtrls.forEach(function(cellCtrl) {
        var cellComp = _this.cellComps[cellCtrl.getInstanceId()];
        if (cellComp) {
          elementsInOrder.push(cellComp.getGui());
        }
      });
      setDomChildOrder(this.getGui(), elementsInOrder);
    };
    RowComp2.prototype.newCellComp = function(cellCtrl) {
      var cellComp = new CellComp(this.rowCtrl.getScope(), this.beans, cellCtrl, false, this.rowCtrl.isPrintLayout(), this.getGui(), this.rowCtrl.isEditing());
      this.cellComps[cellCtrl.getInstanceId()] = cellComp;
      this.getGui().appendChild(cellComp.getGui());
    };
    RowComp2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
      this.destroyAllCells();
    };
    RowComp2.prototype.destroyAllCells = function() {
      var cellsToDestroy = getAllValuesInObject(this.cellComps).filter(function(cp) {
        return cp != null;
      });
      this.destroyCells(cellsToDestroy);
    };
    RowComp2.prototype.setFullWidthRowComp = function(fullWidthRowComponent) {
      var _this = this;
      if (this.fullWidthCellRenderer) {
        console.error("AG Grid - should not be setting fullWidthRowComponent twice");
      }
      this.fullWidthCellRenderer = fullWidthRowComponent;
      this.addDestroyFunc(function() {
        _this.fullWidthCellRenderer = _this.beans.context.destroyBean(_this.fullWidthCellRenderer);
      });
    };
    RowComp2.prototype.getFullWidthCellRenderer = function() {
      return this.fullWidthCellRenderer;
    };
    RowComp2.prototype.destroyCells = function(cellComps) {
      var _this = this;
      cellComps.forEach(function(cellComp) {
        if (!cellComp) {
          return;
        }
        var instanceId = cellComp.getCtrl().getInstanceId();
        if (_this.cellComps[instanceId] !== cellComp) {
          return;
        }
        cellComp.detach();
        cellComp.destroy();
        _this.cellComps[instanceId] = null;
      });
    };
    return RowComp2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2y = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __assign$d = function() {
    __assign$d = Object.assign || function(t) {
      for (var s, i2 = 1, n = arguments.length; i2 < n; i2++) {
        s = arguments[i2];
        for (var p2 in s)
          if (Object.prototype.hasOwnProperty.call(s, p2))
            t[p2] = s[p2];
      }
      return t;
    };
    return __assign$d.apply(this, arguments);
  };
  var __decorate$2f = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  function templateFactory() {
    var name = Component.elementGettingCreated.getAttribute("name");
    var cssClasses = RowContainerCtrl.getRowContainerCssClasses(name);
    var res;
    var template1 = name === exports2.RowContainerName.CENTER;
    var template2 = name === exports2.RowContainerName.TOP_CENTER || name === exports2.RowContainerName.BOTTOM_CENTER;
    if (template1) {
      res = '<div class="' + cssClasses.wrapper + '" ref="eWrapper" role="presentation" unselectable="on">\n                <div class="' + cssClasses.viewport + '" ref="eViewport" role="presentation">\n                    <div class="' + cssClasses.container + '" ref="eContainer" role="rowgroup" unselectable="on"></div>\n                </div>\n            </div>';
    } else if (template2) {
      res = '<div class="' + cssClasses.viewport + '" ref="eViewport" role="presentation" unselectable="on">\n                <div class="' + cssClasses.container + '" ref="eContainer" role="presentation" unselectable="on"></div>\n            </div>';
    } else {
      res = '<div class="' + cssClasses.container + '" ref="eContainer" role="presentation" unselectable="on"></div>';
    }
    return res;
  }
  var RowContainerComp = function(_super) {
    __extends$2y(RowContainerComp2, _super);
    function RowContainerComp2() {
      var _this = _super.call(this, templateFactory()) || this;
      _this.rowComps = {};
      _this.name = Component.elementGettingCreated.getAttribute("name");
      return _this;
    }
    RowContainerComp2.prototype.postConstruct = function() {
      var _this = this;
      var compProxy = {
        setViewportHeight: function(height) {
          return _this.eViewport.style.height = height;
        },
        setRowCtrls: function(rowCtrls) {
          return _this.setRowCtrls(rowCtrls);
        },
        setDomOrder: function(domOrder) {
          _this.domOrder = domOrder;
        },
        setContainerWidth: function(width) {
          return _this.eContainer.style.width = width;
        }
      };
      var ctrl = this.createManagedBean(new RowContainerCtrl(this.name));
      ctrl.setComp(compProxy, this.eContainer, this.eViewport, this.eWrapper);
    };
    RowContainerComp2.prototype.preDestroy = function() {
      this.setRowCtrls([]);
    };
    RowContainerComp2.prototype.setRowCtrls = function(rowCtrls) {
      var _this = this;
      var oldRows = __assign$d({}, this.rowComps);
      this.rowComps = {};
      this.lastPlacedElement = null;
      var processRow = function(rowCon) {
        var instanceId = rowCon.getInstanceId();
        var existingRowComp = oldRows[instanceId];
        if (existingRowComp) {
          _this.rowComps[instanceId] = existingRowComp;
          delete oldRows[instanceId];
          _this.ensureDomOrder(existingRowComp.getGui());
        } else {
          var rowComp = _this.newRowComp(rowCon);
          _this.rowComps[instanceId] = rowComp;
          _this.appendRow(rowComp.getGui());
        }
      };
      rowCtrls.forEach(processRow);
      getAllValuesInObject(oldRows).forEach(function(oldRowComp) {
        _this.eContainer.removeChild(oldRowComp.getGui());
        oldRowComp.destroy();
      });
    };
    RowContainerComp2.prototype.appendRow = function(element2) {
      if (this.domOrder) {
        insertWithDomOrder(this.eContainer, element2, this.lastPlacedElement);
      } else {
        this.eContainer.appendChild(element2);
      }
      this.lastPlacedElement = element2;
    };
    RowContainerComp2.prototype.ensureDomOrder = function(eRow) {
      if (this.domOrder) {
        ensureDomOrder(this.eContainer, eRow, this.lastPlacedElement);
        this.lastPlacedElement = eRow;
      }
    };
    RowContainerComp2.prototype.newRowComp = function(rowCtrl) {
      var pinned = RowContainerCtrl.getPinned(this.name);
      var res = new RowComp(rowCtrl, this.beans, pinned);
      return res;
    };
    __decorate$2f([
      Autowired("beans")
    ], RowContainerComp2.prototype, "beans", void 0);
    __decorate$2f([
      RefSelector("eViewport")
    ], RowContainerComp2.prototype, "eViewport", void 0);
    __decorate$2f([
      RefSelector("eContainer")
    ], RowContainerComp2.prototype, "eContainer", void 0);
    __decorate$2f([
      RefSelector("eWrapper")
    ], RowContainerComp2.prototype, "eWrapper", void 0);
    __decorate$2f([
      PostConstruct
    ], RowContainerComp2.prototype, "postConstruct", null);
    __decorate$2f([
      PreDestroy
    ], RowContainerComp2.prototype, "preDestroy", null);
    return RowContainerComp2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2z = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2g = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var RowNodeEventThrottle = function(_super) {
    __extends$2z(RowNodeEventThrottle2, _super);
    function RowNodeEventThrottle2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.events = [];
      return _this;
    }
    RowNodeEventThrottle2.prototype.postConstruct = function() {
      if (this.rowModel.getType() == Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
        this.clientSideRowModel = this.rowModel;
      }
    };
    RowNodeEventThrottle2.prototype.dispatchExpanded = function(event) {
      var _this = this;
      this.events.push(event);
      if (this.dispatchExpandedDebounced == null) {
        this.dispatchExpandedDebounced = this.animationFrameService.debounce(function() {
          _this.clientSideRowModel && _this.clientSideRowModel.onRowGroupOpened();
          _this.events.forEach(function(e) {
            return _this.eventService.dispatchEvent(e);
          });
          _this.events = [];
        });
      }
      this.dispatchExpandedDebounced();
    };
    __decorate$2g([
      Autowired("animationFrameService")
    ], RowNodeEventThrottle2.prototype, "animationFrameService", void 0);
    __decorate$2g([
      Autowired("rowModel")
    ], RowNodeEventThrottle2.prototype, "rowModel", void 0);
    __decorate$2g([
      PostConstruct
    ], RowNodeEventThrottle2.prototype, "postConstruct", null);
    RowNodeEventThrottle2 = __decorate$2g([
      Bean("rowNodeEventThrottle")
    ], RowNodeEventThrottle2);
    return RowNodeEventThrottle2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2A = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2h = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var StandardMenuFactory = function(_super) {
    __extends$2A(StandardMenuFactory2, _super);
    function StandardMenuFactory2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    StandardMenuFactory2.prototype.hideActiveMenu = function() {
      if (this.hidePopup) {
        this.hidePopup();
      }
    };
    StandardMenuFactory2.prototype.showMenuAfterMouseEvent = function(column, mouseEvent) {
      var _this = this;
      this.showPopup(column, function(eMenu) {
        _this.popupService.positionPopupUnderMouseEvent({
          column,
          type: "columnMenu",
          mouseEvent,
          ePopup: eMenu
        });
      }, mouseEvent.target);
    };
    StandardMenuFactory2.prototype.showMenuAfterButtonClick = function(column, eventSource, containerType) {
      var _this = this;
      this.showPopup(column, function(eMenu) {
        _this.popupService.positionPopupUnderComponent({
          type: containerType,
          eventSource,
          ePopup: eMenu,
          keepWithinBounds: true,
          column
        });
      }, eventSource);
    };
    StandardMenuFactory2.prototype.showPopup = function(column, positionCallback, eventSource) {
      var _this = this;
      var filterWrapper = this.filterManager.getOrCreateFilterWrapper(column, "COLUMN_MENU");
      var eMenu = document.createElement("div");
      setAriaRole(eMenu, "presentation");
      addCssClass(eMenu, "ag-menu");
      this.tabListener = this.addManagedListener(eMenu, "keydown", function(e) {
        return _this.trapFocusWithin(e, eMenu);
      });
      filterWrapper.guiPromise.then(function(gui) {
        return eMenu.appendChild(gui);
      });
      var hidePopup;
      var anchorToElement = eventSource || this.ctrlsService.getGridBodyCtrl().getGui();
      var closedCallback = function(e) {
        column.setMenuVisible(false, "contextMenu");
        var isKeyboardEvent = e instanceof KeyboardEvent;
        if (_this.tabListener) {
          _this.tabListener = _this.tabListener();
        }
        if (isKeyboardEvent && eventSource && isVisible(eventSource)) {
          var focusableEl = _this.focusService.findTabbableParent(eventSource);
          if (focusableEl) {
            focusableEl.focus();
          }
        }
      };
      var translate = this.gridOptionsWrapper.getLocaleTextFunc();
      var addPopupRes = this.popupService.addPopup({
        modal: true,
        eChild: eMenu,
        closeOnEsc: true,
        closedCallback,
        positionCallback: function() {
          return positionCallback(eMenu);
        },
        anchorToElement,
        ariaLabel: translate("ariaLabelColumnMenu", "Column Menu")
      });
      if (addPopupRes) {
        this.hidePopup = hidePopup = addPopupRes.hideFunc;
      }
      filterWrapper.filterPromise.then(function(filter2) {
        positionCallback(eMenu);
        if (filter2.afterGuiAttached) {
          filter2.afterGuiAttached({ container: "columnMenu", hidePopup });
        }
      });
      column.setMenuVisible(true, "contextMenu");
    };
    StandardMenuFactory2.prototype.trapFocusWithin = function(e, menu) {
      if (e.keyCode !== KeyCode.TAB || e.defaultPrevented || this.focusService.findNextFocusableElement(menu, false, e.shiftKey)) {
        return;
      }
      e.preventDefault();
      this.focusService.focusInto(menu, e.shiftKey);
    };
    StandardMenuFactory2.prototype.isMenuEnabled = function(column) {
      return column.isFilterAllowed();
    };
    __decorate$2h([
      Autowired("filterManager")
    ], StandardMenuFactory2.prototype, "filterManager", void 0);
    __decorate$2h([
      Autowired("popupService")
    ], StandardMenuFactory2.prototype, "popupService", void 0);
    __decorate$2h([
      Autowired("focusService")
    ], StandardMenuFactory2.prototype, "focusService", void 0);
    __decorate$2h([
      Autowired("ctrlsService")
    ], StandardMenuFactory2.prototype, "ctrlsService", void 0);
    StandardMenuFactory2 = __decorate$2h([
      Bean("menuFactory")
    ], StandardMenuFactory2);
    return StandardMenuFactory2;
  }(BeanStub);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var Grid = function() {
    function Grid2(eGridDiv, gridOptions, params2) {
      if (!gridOptions) {
        console.error("AG Grid: no gridOptions provided to the grid");
        return;
      }
      this.gridOptions = gridOptions;
      new GridCoreCreator().create(eGridDiv, gridOptions, function(context) {
        var gridComp = new GridComp(eGridDiv);
        context.createBean(gridComp);
      }, params2);
    }
    Grid2.prototype.destroy = function() {
      if (this.gridOptions && this.gridOptions.api) {
        this.gridOptions.api.destroy();
      }
    };
    return Grid2;
  }();
  var GridCoreCreator = function() {
    function GridCoreCreator2() {
    }
    GridCoreCreator2.prototype.create = function(eGridDiv, gridOptions, uiCallback, params2) {
      var _this = this;
      var debug2 = !!gridOptions.debug;
      var registeredModules = this.getRegisteredModules(params2);
      var beanClasses = this.createBeansList(gridOptions.rowModelType, registeredModules);
      var providedBeanInstances = this.createProvidedBeans(eGridDiv, gridOptions, params2);
      if (!beanClasses) {
        return;
      }
      var contextParams = {
        providedBeanInstances,
        beanClasses,
        debug: debug2
      };
      var logger = new Logger("AG Grid", function() {
        return gridOptions.debug;
      });
      var contextLogger = new Logger("Context", function() {
        return contextParams.debug;
      });
      var context = new Context(contextParams, contextLogger);
      var beans = context.getBean("beans");
      this.registerModuleUserComponents(beans, registeredModules);
      this.registerStackComponents(beans, registeredModules);
      this.registerControllers(beans, registeredModules);
      uiCallback(context);
      beans.ctrlsService.whenReady(function() {
        _this.setColumnsAndData(beans);
        _this.dispatchGridReadyEvent(beans, gridOptions);
        var isEnterprise = ModuleRegistry.isRegistered(exports2.ModuleNames.EnterpriseCoreModule);
        logger.log("initialised successfully, enterprise = " + isEnterprise);
      });
    };
    GridCoreCreator2.prototype.registerControllers = function(beans, registeredModules) {
      registeredModules.forEach(function(module2) {
        module2.controllers && module2.controllers.forEach(function(meta) {
          return beans.ctrlsFactory.register(meta);
        });
      });
    };
    GridCoreCreator2.prototype.registerStackComponents = function(beans, registeredModules) {
      var agStackComponents = this.createAgStackComponentsList(registeredModules);
      beans.agStackComponentsRegistry.setupComponents(agStackComponents);
    };
    GridCoreCreator2.prototype.getRegisteredModules = function(params2) {
      var passedViaConstructor = params2 ? params2.modules : null;
      var registered2 = ModuleRegistry.getRegisteredModules();
      var allModules = [];
      var mapNames = {};
      function addModule(moduleBased, mod) {
        function addIndividualModule(currentModule) {
          if (!mapNames[currentModule.moduleName]) {
            mapNames[currentModule.moduleName] = true;
            allModules.push(currentModule);
            ModuleRegistry.register(currentModule, moduleBased);
          }
        }
        addIndividualModule(mod);
        if (mod.dependantModules) {
          mod.dependantModules.forEach(addModule.bind(null, moduleBased));
        }
      }
      if (passedViaConstructor) {
        passedViaConstructor.forEach(addModule.bind(null, true));
      }
      if (registered2) {
        registered2.forEach(addModule.bind(null, !ModuleRegistry.isPackageBased()));
      }
      return allModules;
    };
    GridCoreCreator2.prototype.registerModuleUserComponents = function(beans, registeredModules) {
      var moduleUserComps = this.extractModuleEntity(registeredModules, function(module2) {
        return module2.userComponents ? module2.userComponents : [];
      });
      moduleUserComps.forEach(function(compMeta) {
        beans.userComponentRegistry.registerDefaultComponent(compMeta.componentName, compMeta.componentClass);
      });
    };
    GridCoreCreator2.prototype.createProvidedBeans = function(eGridDiv, gridOptions, params2) {
      var frameworkOverrides = params2 ? params2.frameworkOverrides : null;
      if (missing(frameworkOverrides)) {
        frameworkOverrides = new VanillaFrameworkOverrides();
      }
      var seed = {
        gridOptions,
        eGridDiv,
        $scope: params2 ? params2.$scope : null,
        $compile: params2 ? params2.$compile : null,
        globalEventListener: params2 ? params2.globalEventListener : null,
        frameworkOverrides
      };
      if (params2 && params2.providedBeanInstances) {
        assign2(seed, params2.providedBeanInstances);
      }
      return seed;
    };
    GridCoreCreator2.prototype.createAgStackComponentsList = function(registeredModules) {
      var components = [
        { componentName: "AgCheckbox", componentClass: AgCheckbox },
        { componentName: "AgRadioButton", componentClass: AgRadioButton },
        { componentName: "AgToggleButton", componentClass: AgToggleButton },
        { componentName: "AgInputTextField", componentClass: AgInputTextField },
        { componentName: "AgInputTextArea", componentClass: AgInputTextArea },
        { componentName: "AgInputNumberField", componentClass: AgInputNumberField },
        { componentName: "AgInputRange", componentClass: AgInputRange },
        { componentName: "AgSelect", componentClass: AgSelect },
        { componentName: "AgSlider", componentClass: AgSlider },
        { componentName: "AgAngleSelect", componentClass: AgAngleSelect },
        { componentName: "AgColorPicker", componentClass: AgColorPicker },
        { componentName: "AgGridBody", componentClass: GridBodyComp },
        { componentName: "AgHeaderRoot", componentClass: GridHeaderComp },
        { componentName: "AgPagination", componentClass: PaginationComp },
        { componentName: "AgOverlayWrapper", componentClass: OverlayWrapperComponent },
        { componentName: "AgGroupComponent", componentClass: AgGroupComponent },
        { componentName: "AgPanel", componentClass: AgPanel },
        { componentName: "AgDialog", componentClass: AgDialog },
        { componentName: "AgRowContainer", componentClass: RowContainerComp },
        { componentName: "AgFakeHorizontalScroll", componentClass: FakeHScrollComp }
      ];
      var moduleAgStackComps = this.extractModuleEntity(registeredModules, function(module2) {
        return module2.agStackComponents ? module2.agStackComponents : [];
      });
      components = components.concat(moduleAgStackComps);
      return components;
    };
    GridCoreCreator2.prototype.createBeansList = function(rowModelType, registeredModules) {
      var rowModelClass = this.getRowModelClass(rowModelType, registeredModules);
      if (!rowModelClass) {
        return;
      }
      var beans = [
        rowModelClass,
        Beans,
        RowPositionUtils,
        CellPositionUtils,
        HeaderPositionUtils,
        PaginationAutoPageSizeService,
        GridApi,
        UserComponentRegistry,
        AgComponentUtils,
        ComponentMetadataProvider,
        ResizeObserverService,
        UserComponentFactory,
        RowContainerHeightService,
        HorizontalResizeService,
        PinnedRowModel,
        DragService,
        DisplayedGroupCreator,
        EventService,
        GridOptionsWrapper,
        PopupService,
        SelectionService,
        FilterManager,
        ColumnModel,
        HeaderNavigationService,
        PaginationProxy,
        RowRenderer,
        ExpressionService,
        ColumnFactory,
        TemplateService,
        AlignedGridsService,
        NavigationService,
        ValueCache,
        ValueService,
        LoggerFactory,
        ColumnUtils,
        AutoWidthCalculator,
        StandardMenuFactory,
        DragAndDropService,
        ColumnApi,
        FocusService,
        MouseEventService,
        Environment,
        CellNavigationService,
        ValueFormatterService,
        StylingService,
        ScrollVisibleService,
        SortController,
        ColumnHoverService,
        ColumnAnimationService,
        SelectableService,
        AutoGroupColService,
        ChangeDetectionService,
        AnimationFrameService,
        UndoRedoService,
        AgStackComponentsRegistry,
        ColumnDefFactory,
        RowCssClassCalculator,
        RowNodeBlockLoader,
        RowNodeSorter,
        CtrlsService,
        PinnedWidthService,
        RowNodeEventThrottle,
        CtrlsFactory
      ];
      var moduleBeans = this.extractModuleEntity(registeredModules, function(module2) {
        return module2.beans ? module2.beans : [];
      });
      beans.push.apply(beans, moduleBeans);
      var beansNoDuplicates = [];
      beans.forEach(function(bean) {
        if (beansNoDuplicates.indexOf(bean) < 0) {
          beansNoDuplicates.push(bean);
        }
      });
      return beansNoDuplicates;
    };
    GridCoreCreator2.prototype.extractModuleEntity = function(moduleEntities, extractor) {
      return [].concat.apply([], moduleEntities.map(extractor));
    };
    GridCoreCreator2.prototype.setColumnsAndData = function(beans) {
      var columnDefs = beans.gridOptionsWrapper.getColumnDefs();
      beans.columnModel.setColumnDefs(columnDefs || [], "gridInitializing");
      beans.rowModel.start();
    };
    GridCoreCreator2.prototype.dispatchGridReadyEvent = function(beans, gridOptions) {
      var readyEvent = {
        type: Events.EVENT_GRID_READY,
        api: gridOptions.api,
        columnApi: gridOptions.columnApi
      };
      beans.eventService.dispatchEvent(readyEvent);
    };
    GridCoreCreator2.prototype.getRowModelClass = function(rowModelType, registeredModules) {
      if (!rowModelType) {
        rowModelType = Constants.ROW_MODEL_TYPE_CLIENT_SIDE;
      }
      var rowModelClasses = {};
      registeredModules.forEach(function(module2) {
        iterateObject(module2.rowModels, function(key, value) {
          rowModelClasses[key] = value;
        });
      });
      var rowModelClass = rowModelClasses[rowModelType];
      if (exists(rowModelClass)) {
        return rowModelClass;
      }
      if (rowModelType === Constants.ROW_MODEL_TYPE_INFINITE) {
        console.error('AG Grid: Row Model "Infinite" not found. Please ensure the ' + exports2.ModuleNames.InfiniteRowModelModule + " is registered.';");
      }
      console.error("AG Grid: could not find matching row model for rowModelType " + rowModelType);
      if (rowModelType === Constants.ROW_MODEL_TYPE_VIEWPORT) {
        console.error('AG Grid: Row Model "Viewport" not found. Please ensure the AG Grid Enterprise Module ' + exports2.ModuleNames.ViewportRowModelModule + " is registered.';");
      }
      if (rowModelType === Constants.ROW_MODEL_TYPE_SERVER_SIDE) {
        console.error('AG Grid: Row Model "Server Side" not found. Please ensure the AG Grid Enterprise Module ' + exports2.ModuleNames.ServerSideRowModelModule + " is registered.';");
      }
      if (rowModelType === Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
        console.error('AG Grid: Row Model "Client Side" not found. Please ensure the ' + exports2.ModuleNames.ClientSideRowModelModule + " is registered.';");
      }
    };
    return GridCoreCreator2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function initialiseAgGridWithAngular1(angular) {
    var angularModule = angular.module("agGrid", []);
    angularModule.directive("agGrid", function() {
      return {
        restrict: "A",
        controller: ["$element", "$scope", "$compile", "$attrs", AngularDirectiveController],
        scope: true
      };
    });
  }
  function AngularDirectiveController($element, $scope, $compile, $attrs) {
    var gridOptions;
    var keyOfGridInScope = $attrs.agGrid;
    gridOptions = $scope.$eval(keyOfGridInScope);
    if (!gridOptions) {
      console.warn("WARNING - grid options for AG Grid not found. Please ensure the attribute ag-grid points to a valid object on the scope");
      return;
    }
    var eGridDiv = $element[0];
    var gridParams = {
      $scope,
      $compile
    };
    var grid = new Grid(eGridDiv, gridOptions, gridParams);
    var quickFilterOnScope = keyOfGridInScope + ".quickFilterText";
    var quickFilterUnregisterFn = $scope.$watch(quickFilterOnScope, function(newFilter) {
      gridOptions.api.setQuickFilter(newFilter);
    });
    $scope.$on("$destroy", function() {
      quickFilterUnregisterFn();
      if (grid) {
        grid.destroy();
      }
      grid = null;
    });
  }
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var registered = false;
  function initialiseAgGridWithWebComponents() {
    console.warn("ag-grid: initialiseAgGridWithWebComponents is deprecated. Please use the ag-grid-webcomponent dependency instead. ");
    if (registered) {
      return;
    }
    registered = true;
    if (typeof document === "undefined" || !document.registerElement) {
      console.error("AG Grid: unable to find document.registerElement() function, unable to initialise AG Grid as a Web Component");
    }
    var AgileGridProto = Object.create(HTMLElement.prototype);
    ComponentUtil.ALL_PROPERTIES.forEach(function(key) {
      Object.defineProperty(AgileGridProto, key, {
        set: function(v2) {
          this.__agGridSetProperty(key, v2);
        },
        get: function() {
          return this.__agGridGetProperty(key);
        },
        enumerable: true,
        configurable: true
      });
    });
    var agGridProtoNoType = AgileGridProto;
    agGridProtoNoType.__agGridSetProperty = function(key, value) {
      if (!this.__attributes) {
        this.__attributes = {};
      }
      this.__attributes[key] = value;
      var changeObject = {};
      changeObject[key] = { currentValue: value };
      this.onChange(changeObject);
    };
    agGridProtoNoType.onChange = function(changes) {
      if (this._initialised) {
        ComponentUtil.processOnChange(changes, this._gridOptions, this.api, this.columnApi);
      }
    };
    agGridProtoNoType.__agGridGetProperty = function(key) {
      if (!this.__attributes) {
        this.__attributes = {};
      }
      return this.__attributes[key];
    };
    agGridProtoNoType.setGridOptions = function(options) {
      var globalEventListener = this.globalEventListener.bind(this);
      this._gridOptions = ComponentUtil.copyAttributesToGridOptions(options, this);
      var gridParams = {
        globalEventListener
      };
      this._agGrid = new Grid(this, this._gridOptions, gridParams);
      this.api = options.api;
      this.columnApi = options.columnApi;
      this._initialised = true;
    };
    agGridProtoNoType.createdCallback = function() {
      for (var i2 = 0; i2 < this.attributes.length; i2++) {
        var attribute = this.attributes[i2];
        this.setPropertyFromAttribute(attribute);
      }
    };
    agGridProtoNoType.setPropertyFromAttribute = function(attribute) {
      var name = toCamelCase(attribute.nodeName);
      var value = attribute.nodeValue;
      if (ComponentUtil.ALL_PROPERTIES.indexOf(name) >= 0) {
        this[name] = value;
      }
    };
    agGridProtoNoType.attachedCallback = function(params2) {
    };
    agGridProtoNoType.detachedCallback = function(params2) {
    };
    agGridProtoNoType.attributeChangedCallback = function(attributeName) {
      var attribute = this.attributes[attributeName];
      this.setPropertyFromAttribute(attribute);
    };
    agGridProtoNoType.globalEventListener = function(eventType, event) {
      var eventLowerCase = eventType.toLowerCase();
      var browserEvent = new Event(eventLowerCase);
      var browserEventNoType = browserEvent;
      browserEventNoType.agGridDetails = event;
      this.dispatchEvent(browserEvent);
      var callbackMethod = "on" + eventLowerCase;
      if (typeof this[callbackMethod] === "function") {
        this[callbackMethod](browserEvent);
      }
    };
    document.registerElement("ag-grid", { prototype: AgileGridProto });
  }
  function toCamelCase(myString) {
    if (typeof myString === "string") {
      var result = myString.replace(/-([a-z])/g, function(g) {
        return g[1].toUpperCase();
      });
      return result;
    } else {
      return myString;
    }
  }
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2B = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2i = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var TabbedLayout = function(_super) {
    __extends$2B(TabbedLayout2, _super);
    function TabbedLayout2(params2) {
      var _this = _super.call(this, TabbedLayout2.getTemplate(params2.cssClass)) || this;
      _this.items = [];
      _this.params = params2;
      if (params2.items) {
        params2.items.forEach(function(item) {
          return _this.addItem(item);
        });
      }
      return _this;
    }
    TabbedLayout2.prototype.postConstruct = function() {
      this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(), {
        onTabKeyDown: this.onTabKeyDown.bind(this),
        handleKeyDown: this.handleKeyDown.bind(this)
      }));
    };
    TabbedLayout2.getTemplate = function(cssClass) {
      return '<div class="ag-tabs ' + cssClass + '">\n            <div ref="eHeader" role="tablist" class="ag-tabs-header ' + (cssClass ? cssClass + "-header" : "") + '"></div>\n            <div ref="eBody" role="presentation" class="ag-tabs-body ' + (cssClass ? cssClass + "-body" : "") + '"></div>\n        </div>';
    };
    TabbedLayout2.prototype.handleKeyDown = function(e) {
      switch (e.keyCode) {
        case KeyCode.RIGHT:
        case KeyCode.LEFT:
          if (!this.eHeader.contains(document.activeElement)) {
            return;
          }
          var currentPosition = this.items.indexOf(this.activeItem);
          var nextPosition = e.keyCode === KeyCode.RIGHT ? Math.min(currentPosition + 1, this.items.length - 1) : Math.max(currentPosition - 1, 0);
          if (currentPosition === nextPosition) {
            return;
          }
          e.preventDefault();
          var nextItem = this.items[nextPosition];
          this.showItemWrapper(nextItem);
          nextItem.eHeaderButton.focus();
          break;
        case KeyCode.UP:
        case KeyCode.DOWN:
          e.stopPropagation();
          break;
      }
    };
    TabbedLayout2.prototype.onTabKeyDown = function(e) {
      if (e.defaultPrevented) {
        return;
      }
      var _a = this, focusService = _a.focusService, eHeader = _a.eHeader, eBody = _a.eBody, activeItem = _a.activeItem;
      var activeElement = document.activeElement;
      e.preventDefault();
      if (eHeader.contains(activeElement)) {
        focusService.focusInto(eBody, e.shiftKey);
      } else {
        if (focusService.isFocusUnderManagedComponent(eBody)) {
          activeItem.eHeaderButton.focus();
        } else {
          var nextEl = focusService.findNextFocusableElement(eBody, false, e.shiftKey);
          if (nextEl) {
            nextEl.focus();
          } else {
            activeItem.eHeaderButton.focus();
          }
        }
      }
    };
    TabbedLayout2.prototype.setAfterAttachedParams = function(params2) {
      this.afterAttachedParams = params2;
    };
    TabbedLayout2.prototype.showFirstItem = function() {
      if (this.items.length > 0) {
        this.showItemWrapper(this.items[0]);
      }
    };
    TabbedLayout2.prototype.addItem = function(item) {
      var eHeaderButton = document.createElement("span");
      setAriaRole(eHeaderButton, "tab");
      eHeaderButton.setAttribute("tabIndex", "-1");
      eHeaderButton.appendChild(item.title);
      addCssClass(eHeaderButton, "ag-tab");
      this.eHeader.appendChild(eHeaderButton);
      setAriaLabel(eHeaderButton, item.titleLabel);
      var wrapper = {
        tabbedItem: item,
        eHeaderButton
      };
      this.items.push(wrapper);
      eHeaderButton.addEventListener("click", this.showItemWrapper.bind(this, wrapper));
    };
    TabbedLayout2.prototype.showItem = function(tabbedItem) {
      var itemWrapper = find(this.items, function(wrapper) {
        return wrapper.tabbedItem === tabbedItem;
      });
      if (itemWrapper) {
        this.showItemWrapper(itemWrapper);
      }
    };
    TabbedLayout2.prototype.showItemWrapper = function(wrapper) {
      var _this = this;
      if (this.params.onItemClicked) {
        this.params.onItemClicked({ item: wrapper.tabbedItem });
      }
      if (this.activeItem === wrapper) {
        callIfPresent(this.params.onActiveItemClicked);
        return;
      }
      clearElement(this.eBody);
      wrapper.tabbedItem.bodyPromise.then(function(body) {
        _this.eBody.appendChild(body);
        var onlyUnmanaged = !_this.focusService.isKeyboardMode();
        _this.focusService.focusInto(_this.eBody, false, onlyUnmanaged);
        if (wrapper.tabbedItem.afterAttachedCallback) {
          wrapper.tabbedItem.afterAttachedCallback(_this.afterAttachedParams);
        }
      });
      if (this.activeItem) {
        removeCssClass(this.activeItem.eHeaderButton, "ag-tab-selected");
      }
      addCssClass(wrapper.eHeaderButton, "ag-tab-selected");
      this.activeItem = wrapper;
    };
    __decorate$2i([
      Autowired("focusService")
    ], TabbedLayout2.prototype, "focusService", void 0);
    __decorate$2i([
      RefSelector("eHeader")
    ], TabbedLayout2.prototype, "eHeader", void 0);
    __decorate$2i([
      RefSelector("eBody")
    ], TabbedLayout2.prototype, "eBody", void 0);
    __decorate$2i([
      PostConstruct
    ], TabbedLayout2.prototype, "postConstruct", null);
    return TabbedLayout2;
  }(Component);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function simpleHttpRequest(params2) {
    return new AgPromise(function(resolve) {
      var httpRequest = new XMLHttpRequest();
      httpRequest.open("GET", params2.url);
      httpRequest.send();
      httpRequest.onreadystatechange = function() {
        if (httpRequest.readyState === 4 && httpRequest.status === 200) {
          resolve(JSON.parse(httpRequest.responseText));
        }
      };
    });
  }
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  (function(ServerSideTransactionResultStatus) {
    ServerSideTransactionResultStatus["Applied"] = "Applied";
    ServerSideTransactionResultStatus["StoreNotFound"] = "StoreNotFound";
    ServerSideTransactionResultStatus["StoreLoading"] = "StoreLoading";
    ServerSideTransactionResultStatus["StoreWaitingToLoad"] = "StoreWaitingToLoad";
    ServerSideTransactionResultStatus["StoreLoadingFailed"] = "StoreLoadingFailed";
    ServerSideTransactionResultStatus["StoreWrongType"] = "StoreWrongType";
    ServerSideTransactionResultStatus["Cancelled"] = "Cancelled";
  })(exports2.ServerSideTransactionResultStatus || (exports2.ServerSideTransactionResultStatus = {}));
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var __extends$2C = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2j = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var VirtualList = function(_super) {
    __extends$2C(VirtualList2, _super);
    function VirtualList2(cssIdentifier, ariaRole) {
      if (cssIdentifier === void 0) {
        cssIdentifier = "default";
      }
      if (ariaRole === void 0) {
        ariaRole = "listbox";
      }
      var _this = _super.call(this, VirtualList2.getTemplate(cssIdentifier, ariaRole)) || this;
      _this.cssIdentifier = cssIdentifier;
      _this.ariaRole = ariaRole;
      _this.renderedRows = new Map();
      _this.rowHeight = 20;
      _this.isDestroyed = false;
      return _this;
    }
    VirtualList2.prototype.postConstruct = function() {
      var _this = this;
      this.addScrollListener();
      this.rowHeight = this.getItemHeight();
      this.addResizeObserver();
      this.initialiseTabGuard({
        onFocusIn: function(e) {
          return _this.onFocusIn(e);
        },
        onFocusOut: function(e) {
          return _this.onFocusOut(e);
        },
        focusInnerElement: function(fromBottom) {
          return _this.focusInnerElement(fromBottom);
        },
        onTabKeyDown: function(e) {
          return _this.onTabKeyDown(e);
        },
        handleKeyDown: function(e) {
          return _this.handleKeyDown(e);
        }
      });
    };
    VirtualList2.prototype.addResizeObserver = function() {
      var listener = this.drawVirtualRows.bind(this);
      var destroyObserver = this.resizeObserverService.observeResize(this.getGui(), listener);
      this.addDestroyFunc(destroyObserver);
    };
    VirtualList2.prototype.focusInnerElement = function(fromBottom) {
      this.focusRow(fromBottom ? this.model.getRowCount() - 1 : 0);
    };
    VirtualList2.prototype.onFocusIn = function(e) {
      var target = e.target;
      if (containsClass(target, "ag-virtual-list-item")) {
        this.lastFocusedRowIndex = getAriaPosInSet(target) - 1;
      }
      return false;
    };
    VirtualList2.prototype.onFocusOut = function(e) {
      if (!this.getFocusableElement().contains(e.relatedTarget)) {
        this.lastFocusedRowIndex = null;
      }
      return false;
    };
    VirtualList2.prototype.handleKeyDown = function(e) {
      switch (e.keyCode) {
        case KeyCode.UP:
        case KeyCode.DOWN:
          if (this.navigate(e.keyCode === KeyCode.UP)) {
            e.preventDefault();
          }
          break;
      }
    };
    VirtualList2.prototype.onTabKeyDown = function(e) {
      if (this.navigate(e.shiftKey)) {
        e.preventDefault();
      } else {
        this.focusService.focusInto(this.getGui(), !e.shiftKey);
      }
    };
    VirtualList2.prototype.navigate = function(up) {
      if (this.lastFocusedRowIndex == null) {
        return false;
      }
      var nextRow = this.lastFocusedRowIndex + (up ? -1 : 1);
      if (nextRow < 0 || nextRow >= this.model.getRowCount()) {
        return false;
      }
      this.focusRow(nextRow);
      return true;
    };
    VirtualList2.prototype.getLastFocusedRow = function() {
      return this.lastFocusedRowIndex;
    };
    VirtualList2.prototype.focusRow = function(rowNumber) {
      var _this = this;
      this.ensureIndexVisible(rowNumber);
      window.setTimeout(function() {
        var renderedRow = _this.renderedRows.get(rowNumber);
        if (renderedRow) {
          renderedRow.eDiv.focus();
        }
      }, 10);
    };
    VirtualList2.prototype.getComponentAt = function(rowIndex) {
      var comp = this.renderedRows.get(rowIndex);
      return comp && comp.rowComponent;
    };
    VirtualList2.getTemplate = function(cssIdentifier, ariaRole) {
      return '\n            <div class="ag-virtual-list-viewport ag-' + cssIdentifier + '-virtual-list-viewport" role="presentation">\n                <div class="ag-virtual-list-container ag-' + cssIdentifier + '-virtual-list-container" ref="eContainer" role="' + ariaRole + '"></div>\n            </div>';
    };
    VirtualList2.prototype.getItemHeight = function() {
      return this.gridOptionsWrapper.getListItemHeight();
    };
    VirtualList2.prototype.ensureIndexVisible = function(index) {
      var lastRow = this.model.getRowCount();
      if (typeof index !== "number" || index < 0 || index >= lastRow) {
        console.warn("invalid row index for ensureIndexVisible: " + index);
        return;
      }
      var rowTopPixel = index * this.rowHeight;
      var rowBottomPixel = rowTopPixel + this.rowHeight;
      var eGui = this.getGui();
      var viewportTopPixel = eGui.scrollTop;
      var viewportHeight = eGui.offsetHeight;
      var viewportBottomPixel = viewportTopPixel + viewportHeight;
      var viewportScrolledPastRow = viewportTopPixel > rowTopPixel;
      var viewportScrolledBeforeRow = viewportBottomPixel < rowBottomPixel;
      if (viewportScrolledPastRow) {
        eGui.scrollTop = rowTopPixel;
      } else if (viewportScrolledBeforeRow) {
        var newScrollPosition = rowBottomPixel - viewportHeight;
        eGui.scrollTop = newScrollPosition;
      }
    };
    VirtualList2.prototype.setComponentCreator = function(componentCreator) {
      this.componentCreator = componentCreator;
    };
    VirtualList2.prototype.getRowHeight = function() {
      return this.rowHeight;
    };
    VirtualList2.prototype.getScrollTop = function() {
      return this.getGui().scrollTop;
    };
    VirtualList2.prototype.setRowHeight = function(rowHeight) {
      this.rowHeight = rowHeight;
      this.refresh();
    };
    VirtualList2.prototype.refresh = function() {
      var _this = this;
      if (this.model == null || this.isDestroyed) {
        return;
      }
      var rowCount = this.model.getRowCount();
      this.eContainer.style.height = rowCount * this.rowHeight + "px";
      waitUntil(function() {
        return _this.eContainer.clientHeight >= rowCount * _this.rowHeight;
      }, function() {
        if (_this.isDestroyed) {
          return;
        }
        _this.clearVirtualRows();
        _this.drawVirtualRows();
      });
    };
    VirtualList2.prototype.clearVirtualRows = function() {
      var _this = this;
      this.renderedRows.forEach(function(_2, rowIndex) {
        return _this.removeRow(rowIndex);
      });
    };
    VirtualList2.prototype.drawVirtualRows = function() {
      var gui = this.getGui();
      var topPixel = gui.scrollTop;
      var bottomPixel = topPixel + gui.offsetHeight;
      var firstRow = Math.floor(topPixel / this.rowHeight);
      var lastRow = Math.floor(bottomPixel / this.rowHeight);
      this.ensureRowsRendered(firstRow, lastRow);
    };
    VirtualList2.prototype.ensureRowsRendered = function(start2, finish) {
      var _this = this;
      this.renderedRows.forEach(function(_2, rowIndex2) {
        if ((rowIndex2 < start2 || rowIndex2 > finish) && rowIndex2 !== _this.lastFocusedRowIndex) {
          _this.removeRow(rowIndex2);
        }
      });
      for (var rowIndex = start2; rowIndex <= finish; rowIndex++) {
        if (this.renderedRows.has(rowIndex)) {
          continue;
        }
        if (rowIndex < this.model.getRowCount()) {
          this.insertRow(rowIndex);
        }
      }
    };
    VirtualList2.prototype.insertRow = function(rowIndex) {
      var _this = this;
      var value = this.model.getRow(rowIndex);
      var eDiv = document.createElement("div");
      addCssClass(eDiv, "ag-virtual-list-item");
      addCssClass(eDiv, "ag-" + this.cssIdentifier + "-virtual-list-item");
      setAriaRole(eDiv, this.ariaRole === "tree" ? "treeitem" : "option");
      setAriaSetSize(eDiv, this.model.getRowCount());
      setAriaPosInSet(eDiv, rowIndex + 1);
      eDiv.setAttribute("tabindex", "-1");
      if (typeof this.model.isRowSelected === "function") {
        var isSelected = this.model.isRowSelected(rowIndex);
        setAriaSelected(eDiv, !!isSelected);
        setAriaChecked(eDiv, isSelected);
      }
      eDiv.style.height = this.rowHeight + "px";
      eDiv.style.top = this.rowHeight * rowIndex + "px";
      var rowComponent = this.componentCreator(value, eDiv);
      rowComponent.addGuiEventListener("focusin", function() {
        return _this.lastFocusedRowIndex = rowIndex;
      });
      eDiv.appendChild(rowComponent.getGui());
      if (this.renderedRows.has(rowIndex - 1)) {
        this.renderedRows.get(rowIndex - 1).eDiv.insertAdjacentElement("afterend", eDiv);
      } else if (this.renderedRows.has(rowIndex + 1)) {
        this.renderedRows.get(rowIndex + 1).eDiv.insertAdjacentElement("beforebegin", eDiv);
      } else {
        this.eContainer.appendChild(eDiv);
      }
      this.renderedRows.set(rowIndex, { rowComponent, eDiv });
    };
    VirtualList2.prototype.removeRow = function(rowIndex) {
      var component = this.renderedRows.get(rowIndex);
      this.eContainer.removeChild(component.eDiv);
      this.destroyBean(component.rowComponent);
      this.renderedRows.delete(rowIndex);
    };
    VirtualList2.prototype.addScrollListener = function() {
      var _this = this;
      this.addGuiEventListener("scroll", function() {
        return _this.drawVirtualRows();
      });
    };
    VirtualList2.prototype.setModel = function(model) {
      this.model = model;
    };
    VirtualList2.prototype.destroy = function() {
      if (this.isDestroyed) {
        return;
      }
      this.clearVirtualRows();
      this.isDestroyed = true;
      _super.prototype.destroy.call(this);
    };
    __decorate$2j([
      Autowired("resizeObserverService")
    ], VirtualList2.prototype, "resizeObserverService", void 0);
    __decorate$2j([
      Autowired("focusService")
    ], VirtualList2.prototype, "focusService", void 0);
    __decorate$2j([
      RefSelector("eContainer")
    ], VirtualList2.prototype, "eContainer", void 0);
    __decorate$2j([
      PostConstruct
    ], VirtualList2.prototype, "postConstruct", null);
    return VirtualList2;
  }(TabGuardComp);
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  function defaultGroupComparator(valueA, valueB, nodeA, nodeB, accentedCompare) {
    if (accentedCompare === void 0) {
      accentedCompare = false;
    }
    console.warn("AG Grid: Since ag-grid 11.0.0 defaultGroupComparator is not necessary. You can remove this from your colDef");
    var nodeAIsGroup = exists(nodeA) && nodeA.group;
    var nodeBIsGroup = exists(nodeB) && nodeB.group;
    var bothAreGroups = nodeAIsGroup && nodeBIsGroup;
    var bothAreNormal = !nodeAIsGroup && !nodeBIsGroup;
    if (bothAreGroups) {
      return defaultComparator(nodeA.key, nodeB.key, accentedCompare);
    }
    if (bothAreNormal) {
      return defaultComparator(valueA, valueB, accentedCompare);
    }
    if (nodeAIsGroup) {
      return 1;
    }
    return -1;
  }
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var BaseComponentWrapper = function() {
    function BaseComponentWrapper2() {
    }
    BaseComponentWrapper2.prototype.wrap = function(OriginalConstructor, mandatoryMethodList, optionalMethodList, componentType, componentName) {
      var _this = this;
      if (optionalMethodList === void 0) {
        optionalMethodList = [];
      }
      var wrapper = this.createWrapper(OriginalConstructor, componentType, componentName);
      mandatoryMethodList.forEach(function(methodName) {
        _this.createMethod(wrapper, methodName, true);
      });
      optionalMethodList.forEach(function(methodName) {
        _this.createMethod(wrapper, methodName, false);
      });
      return wrapper;
    };
    BaseComponentWrapper2.prototype.createMethod = function(wrapper, methodName, mandatory) {
      wrapper.addMethod(methodName, this.createMethodProxy(wrapper, methodName, mandatory));
    };
    BaseComponentWrapper2.prototype.createMethodProxy = function(wrapper, methodName, mandatory) {
      return function() {
        if (wrapper.hasMethod(methodName)) {
          return wrapper.callMethod(methodName, arguments);
        }
        if (mandatory) {
          console.warn("AG Grid: Framework component is missing the method " + methodName + "()");
        }
        return null;
      };
    };
    return BaseComponentWrapper2;
  }();
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  (function(ChartType) {
    ChartType["Column"] = "column";
    ChartType["GroupedColumn"] = "groupedColumn";
    ChartType["StackedColumn"] = "stackedColumn";
    ChartType["NormalizedColumn"] = "normalizedColumn";
    ChartType["Bar"] = "bar";
    ChartType["GroupedBar"] = "groupedBar";
    ChartType["StackedBar"] = "stackedBar";
    ChartType["NormalizedBar"] = "normalizedBar";
    ChartType["Line"] = "line";
    ChartType["Scatter"] = "scatter";
    ChartType["Bubble"] = "bubble";
    ChartType["Pie"] = "pie";
    ChartType["Doughnut"] = "doughnut";
    ChartType["Area"] = "area";
    ChartType["StackedArea"] = "stackedArea";
    ChartType["NormalizedArea"] = "normalizedArea";
    ChartType["Histogram"] = "histogram";
  })(exports2.ChartType || (exports2.ChartType = {}));
  (function(LegendPosition) {
    LegendPosition["Top"] = "top";
    LegendPosition["Right"] = "right";
    LegendPosition["Bottom"] = "bottom";
    LegendPosition["Left"] = "left";
  })(exports2.LegendPosition || (exports2.LegendPosition = {}));
  /**
   * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components
   * @version v26.1.0
   * @link http://www.ag-grid.com/
   * @license MIT
   */
  var globalObj = typeof globalThis === "undefined" ? {} : globalThis;
  globalObj.HTMLElement = typeof HTMLElement === "undefined" ? {} : HTMLElement;
  globalObj.HTMLButtonElement = typeof HTMLButtonElement === "undefined" ? {} : HTMLButtonElement;
  globalObj.HTMLSelectElement = typeof HTMLSelectElement === "undefined" ? {} : HTMLSelectElement;
  globalObj.HTMLInputElement = typeof HTMLInputElement === "undefined" ? {} : HTMLInputElement;
  globalObj.Node = typeof Node === "undefined" ? {} : Node;
  globalObj.MouseEvent = typeof MouseEvent === "undefined" ? {} : MouseEvent;
  var __spreadArrays$b = function() {
    for (var s = 0, i2 = 0, il = arguments.length; i2 < il; i2++)
      s += arguments[i2].length;
    for (var r = Array(s), k = 0, i2 = 0; i2 < il; i2++)
      for (var a = arguments[i2], j = 0, jl = a.length; j < jl; j++, k++)
        r[k] = a[j];
    return r;
  };
  var ClientSideNodeManager = function() {
    function ClientSideNodeManager2(rootNode, gridOptionsWrapper, eventService, columnModel, gridApi, columnApi, selectionService, beans) {
      this.nextId = 0;
      this.allNodesMap = {};
      this.rootNode = rootNode;
      this.gridOptionsWrapper = gridOptionsWrapper;
      this.eventService = eventService;
      this.columnModel = columnModel;
      this.gridApi = gridApi;
      this.columnApi = columnApi;
      this.beans = beans;
      this.selectionService = selectionService;
      this.rootNode.group = true;
      this.rootNode.level = -1;
      this.rootNode.id = ClientSideNodeManager2.ROOT_NODE_ID;
      this.rootNode.allLeafChildren = [];
      this.rootNode.childrenAfterGroup = [];
      this.rootNode.childrenAfterSort = [];
      this.rootNode.childrenAfterFilter = [];
      this.postConstruct();
    }
    ClientSideNodeManager2.prototype.postConstruct = function() {
      this.suppressParentsInRowNodes = this.gridOptionsWrapper.isSuppressParentsInRowNodes();
      this.isRowMasterFunc = this.gridOptionsWrapper.getIsRowMasterFunc();
      this.doingTreeData = this.gridOptionsWrapper.isTreeData();
      this.doingMasterDetail = this.gridOptionsWrapper.isMasterDetail();
    };
    ClientSideNodeManager2.prototype.getCopyOfNodesMap = function() {
      return _.cloneObject(this.allNodesMap);
    };
    ClientSideNodeManager2.prototype.getRowNode = function(id) {
      return this.allNodesMap[id];
    };
    ClientSideNodeManager2.prototype.setRowData = function(rowData) {
      this.rootNode.childrenAfterFilter = null;
      this.rootNode.childrenAfterGroup = null;
      this.rootNode.childrenAfterSort = null;
      this.rootNode.childrenMapped = null;
      this.rootNode.updateHasChildren();
      this.nextId = 0;
      this.allNodesMap = {};
      if (!rowData) {
        this.rootNode.allLeafChildren = [];
        this.rootNode.childrenAfterGroup = [];
        return;
      }
      this.rootNode.allLeafChildren = this.recursiveFunction(rowData, this.rootNode, ClientSideNodeManager2.TOP_LEVEL);
    };
    ClientSideNodeManager2.prototype.updateRowData = function(rowDataTran, rowNodeOrder) {
      var rowNodeTransaction = {
        remove: [],
        update: [],
        add: []
      };
      var nodesToUnselect = [];
      this.executeRemove(rowDataTran, rowNodeTransaction, nodesToUnselect);
      this.executeUpdate(rowDataTran, rowNodeTransaction, nodesToUnselect);
      this.executeAdd(rowDataTran, rowNodeTransaction);
      this.updateSelection(nodesToUnselect);
      if (rowNodeOrder) {
        _.sortRowNodesByOrder(this.rootNode.allLeafChildren, rowNodeOrder);
      }
      return rowNodeTransaction;
    };
    ClientSideNodeManager2.prototype.updateSelection = function(nodesToUnselect) {
      var selectionChanged = nodesToUnselect.length > 0;
      if (selectionChanged) {
        nodesToUnselect.forEach(function(rowNode) {
          rowNode.setSelected(false, false, true);
        });
      }
      this.selectionService.updateGroupsFromChildrenSelections();
      if (selectionChanged) {
        var event_1 = {
          type: Events.EVENT_SELECTION_CHANGED,
          api: this.gridApi,
          columnApi: this.columnApi
        };
        this.eventService.dispatchEvent(event_1);
      }
    };
    ClientSideNodeManager2.prototype.executeAdd = function(rowDataTran, rowNodeTransaction) {
      var _this = this;
      var add = rowDataTran.add, addIndex = rowDataTran.addIndex;
      if (_.missingOrEmpty(add)) {
        return;
      }
      var newNodes = add.map(function(item) {
        return _this.createNode(item, _this.rootNode, ClientSideNodeManager2.TOP_LEVEL);
      });
      var useIndex = typeof addIndex === "number" && addIndex >= 0;
      if (useIndex) {
        var existingLeafChildren = this.rootNode.allLeafChildren;
        var nodesBeforeIndex = existingLeafChildren.slice(0, addIndex);
        var nodesAfterIndex = existingLeafChildren.slice(addIndex, existingLeafChildren.length);
        this.rootNode.allLeafChildren = __spreadArrays$b(nodesBeforeIndex, newNodes, nodesAfterIndex);
      } else {
        this.rootNode.allLeafChildren = __spreadArrays$b(this.rootNode.allLeafChildren, newNodes);
      }
      rowNodeTransaction.add = newNodes;
    };
    ClientSideNodeManager2.prototype.executeRemove = function(rowDataTran, rowNodeTransaction, nodesToUnselect) {
      var _this = this;
      var remove = rowDataTran.remove;
      if (_.missingOrEmpty(remove)) {
        return;
      }
      var rowIdsRemoved = {};
      remove.forEach(function(item) {
        var rowNode = _this.lookupRowNode(item);
        if (!rowNode) {
          return;
        }
        if (rowNode.isSelected()) {
          nodesToUnselect.push(rowNode);
        }
        rowNode.clearRowTopAndRowIndex();
        rowIdsRemoved[rowNode.id] = true;
        delete _this.allNodesMap[rowNode.id];
        rowNodeTransaction.remove.push(rowNode);
      });
      this.rootNode.allLeafChildren = this.rootNode.allLeafChildren.filter(function(rowNode) {
        return !rowIdsRemoved[rowNode.id];
      });
    };
    ClientSideNodeManager2.prototype.executeUpdate = function(rowDataTran, rowNodeTransaction, nodesToUnselect) {
      var _this = this;
      var update2 = rowDataTran.update;
      if (_.missingOrEmpty(update2)) {
        return;
      }
      update2.forEach(function(item) {
        var rowNode = _this.lookupRowNode(item);
        if (!rowNode) {
          return;
        }
        rowNode.updateData(item);
        if (!rowNode.selectable && rowNode.isSelected()) {
          nodesToUnselect.push(rowNode);
        }
        _this.setMasterForRow(rowNode, item, ClientSideNodeManager2.TOP_LEVEL, false);
        rowNodeTransaction.update.push(rowNode);
      });
    };
    ClientSideNodeManager2.prototype.lookupRowNode = function(data) {
      var rowNodeIdFunc = this.gridOptionsWrapper.getRowNodeIdFunc();
      var rowNode;
      if (_.exists(rowNodeIdFunc)) {
        var id = rowNodeIdFunc(data);
        rowNode = this.allNodesMap[id];
        if (!rowNode) {
          console.error("AG Grid: could not find row id=" + id + ", data item was not found for this id");
          return null;
        }
      } else {
        rowNode = _.find(this.rootNode.allLeafChildren, function(node) {
          return node.data === data;
        });
        if (!rowNode) {
          console.error("AG Grid: could not find data item as object was not found", data);
          console.error("Consider using getRowNodeId to help the Grid find matching row data");
          return null;
        }
      }
      return rowNode;
    };
    ClientSideNodeManager2.prototype.recursiveFunction = function(rowData, parent, level) {
      var _this = this;
      if (typeof rowData === "string") {
        console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");
        return;
      }
      var rowNodes = [];
      rowData.forEach(function(dataItem) {
        var node = _this.createNode(dataItem, parent, level);
        rowNodes.push(node);
      });
      return rowNodes;
    };
    ClientSideNodeManager2.prototype.createNode = function(dataItem, parent, level) {
      var node = new RowNode(this.beans);
      node.group = false;
      this.setMasterForRow(node, dataItem, level, true);
      if (parent && !this.suppressParentsInRowNodes) {
        node.parent = parent;
      }
      node.level = level;
      node.setDataAndId(dataItem, this.nextId.toString());
      if (this.allNodesMap[node.id]) {
        console.warn("ag-grid: duplicate node id '" + node.id + "' detected from getRowNodeId callback, this could cause issues in your grid.");
      }
      this.allNodesMap[node.id] = node;
      this.nextId++;
      return node;
    };
    ClientSideNodeManager2.prototype.setMasterForRow = function(rowNode, data, level, setExpanded) {
      if (this.doingTreeData) {
        rowNode.setMaster(false);
        if (setExpanded) {
          rowNode.expanded = false;
        }
      } else {
        if (this.doingMasterDetail) {
          if (this.isRowMasterFunc) {
            rowNode.setMaster(this.isRowMasterFunc(data));
          } else {
            rowNode.setMaster(true);
          }
        } else {
          rowNode.setMaster(false);
        }
        if (setExpanded) {
          var rowGroupColumns = this.columnModel.getRowGroupColumns();
          var numRowGroupColumns = rowGroupColumns ? rowGroupColumns.length : 0;
          var masterRowLevel = level + numRowGroupColumns;
          rowNode.expanded = rowNode.master ? this.isExpanded(masterRowLevel) : false;
        }
      }
    };
    ClientSideNodeManager2.prototype.isExpanded = function(level) {
      var expandByDefault = this.gridOptionsWrapper.getGroupDefaultExpanded();
      if (expandByDefault === -1) {
        return true;
      }
      return level < expandByDefault;
    };
    ClientSideNodeManager2.TOP_LEVEL = 0;
    ClientSideNodeManager2.ROOT_NODE_ID = "ROOT_NODE_ID";
    return ClientSideNodeManager2;
  }();
  var __extends$2D = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2k = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var RecursionType;
  (function(RecursionType2) {
    RecursionType2[RecursionType2["Normal"] = 0] = "Normal";
    RecursionType2[RecursionType2["AfterFilter"] = 1] = "AfterFilter";
    RecursionType2[RecursionType2["AfterFilterAndSort"] = 2] = "AfterFilterAndSort";
    RecursionType2[RecursionType2["PivotNodes"] = 3] = "PivotNodes";
  })(RecursionType || (RecursionType = {}));
  var ClientSideRowModel = function(_super) {
    __extends$2D(ClientSideRowModel2, _super);
    function ClientSideRowModel2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ClientSideRowModel2.prototype.init = function() {
      var refreshEverythingFunc = this.refreshModel.bind(this, { step: exports2.ClientSideRowModelSteps.EVERYTHING });
      var refreshEverythingAfterColsChangedFunc = this.refreshModel.bind(this, {
        step: exports2.ClientSideRowModelSteps.EVERYTHING,
        afterColumnsChanged: true,
        keepRenderedRows: true,
        animate: true
      });
      this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, refreshEverythingAfterColsChangedFunc);
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, refreshEverythingFunc);
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_VALUE_CHANGED, this.onValueChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_CHANGED, this.refreshModel.bind(this, { step: exports2.ClientSideRowModelSteps.PIVOT }));
      this.addManagedListener(this.eventService, Events.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_SORT_CHANGED, this.onSortChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, refreshEverythingFunc);
      var refreshMapListener = this.refreshModel.bind(this, {
        step: exports2.ClientSideRowModelSteps.MAP,
        keepRenderedRows: true,
        animate: true
      });
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_GROUP_REMOVE_SINGLE_CHILDREN, refreshMapListener);
      this.addManagedListener(this.gridOptionsWrapper, GridOptionsWrapper.PROP_GROUP_REMOVE_LOWEST_SINGLE_CHILDREN, refreshMapListener);
      this.rootNode = new RowNode(this.beans);
      this.nodeManager = new ClientSideNodeManager(this.rootNode, this.gridOptionsWrapper, this.eventService, this.columnModel, this.gridApi, this.columnApi, this.selectionService, this.beans);
    };
    ClientSideRowModel2.prototype.start = function() {
      var rowData = this.gridOptionsWrapper.getRowData();
      if (rowData) {
        this.setRowData(rowData);
      }
    };
    ClientSideRowModel2.prototype.ensureRowHeightsValid = function(startPixel, endPixel, startLimitIndex, endLimitIndex) {
      var atLeastOneChange;
      var res = false;
      do {
        atLeastOneChange = false;
        var rowAtStartPixel = this.getRowIndexAtPixel(startPixel);
        var rowAtEndPixel = this.getRowIndexAtPixel(endPixel);
        var firstRow = Math.max(rowAtStartPixel, startLimitIndex);
        var lastRow = Math.min(rowAtEndPixel, endLimitIndex);
        for (var rowIndex = firstRow; rowIndex <= lastRow; rowIndex++) {
          var rowNode = this.getRow(rowIndex);
          if (rowNode.rowHeightEstimated) {
            var rowHeight = this.gridOptionsWrapper.getRowHeightForNode(rowNode);
            rowNode.setRowHeight(rowHeight.height);
            atLeastOneChange = true;
            res = true;
          }
        }
        if (atLeastOneChange) {
          this.setRowTopAndRowIndex();
        }
      } while (atLeastOneChange);
      return res;
    };
    ClientSideRowModel2.prototype.setRowTopAndRowIndex = function() {
      var defaultRowHeight = this.gridOptionsWrapper.getDefaultRowHeight();
      var nextRowTop = 0;
      var displayedRowsMapped = new Set();
      var allowEstimate = this.gridOptionsWrapper.getDomLayout() === Constants.DOM_LAYOUT_NORMAL;
      for (var i2 = 0; i2 < this.rowsToDisplay.length; i2++) {
        var rowNode = this.rowsToDisplay[i2];
        if (rowNode.id != null) {
          displayedRowsMapped.add(rowNode.id);
        }
        if (rowNode.rowHeight == null) {
          var rowHeight = this.gridOptionsWrapper.getRowHeightForNode(rowNode, allowEstimate, defaultRowHeight);
          rowNode.setRowHeight(rowHeight.height, rowHeight.estimated);
        }
        rowNode.setRowTop(nextRowTop);
        rowNode.setRowIndex(i2);
        nextRowTop += rowNode.rowHeight;
      }
      return displayedRowsMapped;
    };
    ClientSideRowModel2.prototype.clearRowTopAndRowIndex = function(changedPath, displayedRowsMapped) {
      var changedPathActive = changedPath.isActive();
      var clearIfNotDisplayed = function(rowNode) {
        if (rowNode && rowNode.id != null && !displayedRowsMapped.has(rowNode.id)) {
          rowNode.clearRowTopAndRowIndex();
        }
      };
      var recurse = function(rowNode) {
        clearIfNotDisplayed(rowNode);
        clearIfNotDisplayed(rowNode.detailNode);
        clearIfNotDisplayed(rowNode.sibling);
        if (rowNode.hasChildren()) {
          if (rowNode.childrenAfterGroup) {
            var isRootNode = rowNode.level == -1;
            var skipChildren = changedPathActive && !isRootNode && !rowNode.expanded;
            if (!skipChildren) {
              rowNode.childrenAfterGroup.forEach(recurse);
            }
          }
        }
      };
      recurse(this.rootNode);
    };
    ClientSideRowModel2.prototype.ensureRowsAtPixel = function(rowNodes, pixel, increment) {
      var _this = this;
      if (increment === void 0) {
        increment = 0;
      }
      var indexAtPixelNow = this.getRowIndexAtPixel(pixel);
      var rowNodeAtPixelNow = this.getRow(indexAtPixelNow);
      if (rowNodeAtPixelNow === rowNodes[0]) {
        return false;
      }
      rowNodes.forEach(function(rowNode) {
        _.removeFromArray(_this.rootNode.allLeafChildren, rowNode);
      });
      rowNodes.forEach(function(rowNode, idx) {
        _.insertIntoArray(_this.rootNode.allLeafChildren, rowNode, Math.max(indexAtPixelNow + increment, 0) + idx);
      });
      this.refreshModel({
        step: exports2.ClientSideRowModelSteps.EVERYTHING,
        keepRenderedRows: true,
        animate: true,
        keepEditingRows: true
      });
      return true;
    };
    ClientSideRowModel2.prototype.highlightRowAtPixel = function(rowNode, pixel) {
      var indexAtPixelNow = pixel != null ? this.getRowIndexAtPixel(pixel) : null;
      var rowNodeAtPixelNow = indexAtPixelNow != null ? this.getRow(indexAtPixelNow) : null;
      if (!rowNodeAtPixelNow || !rowNode || rowNodeAtPixelNow === rowNode || pixel == null) {
        if (this.lastHighlightedRow) {
          this.lastHighlightedRow.setHighlighted(null);
          this.lastHighlightedRow = null;
        }
        return;
      }
      var highlight = this.getHighlightPosition(pixel, rowNodeAtPixelNow);
      if (this.lastHighlightedRow && this.lastHighlightedRow !== rowNodeAtPixelNow) {
        this.lastHighlightedRow.setHighlighted(null);
        this.lastHighlightedRow = null;
      }
      rowNodeAtPixelNow.setHighlighted(highlight);
      this.lastHighlightedRow = rowNodeAtPixelNow;
    };
    ClientSideRowModel2.prototype.getHighlightPosition = function(pixel, rowNode) {
      if (!rowNode) {
        var index = this.getRowIndexAtPixel(pixel);
        rowNode = this.getRow(index || 0);
        if (!rowNode) {
          return exports2.RowHighlightPosition.Below;
        }
      }
      var rowTop = rowNode.rowTop, rowHeight = rowNode.rowHeight;
      return pixel - rowTop < rowHeight / 2 ? exports2.RowHighlightPosition.Above : exports2.RowHighlightPosition.Below;
    };
    ClientSideRowModel2.prototype.getLastHighlightedRowNode = function() {
      return this.lastHighlightedRow;
    };
    ClientSideRowModel2.prototype.isLastRowIndexKnown = function() {
      return true;
    };
    ClientSideRowModel2.prototype.getRowCount = function() {
      if (this.rowsToDisplay) {
        return this.rowsToDisplay.length;
      }
      return 0;
    };
    ClientSideRowModel2.prototype.getTopLevelRowCount = function() {
      var showingRootNode = this.rowsToDisplay && this.rowsToDisplay[0] === this.rootNode;
      if (showingRootNode) {
        return 1;
      }
      return this.rootNode.childrenAfterFilter ? this.rootNode.childrenAfterFilter.length : 0;
    };
    ClientSideRowModel2.prototype.getTopLevelRowDisplayedIndex = function(topLevelIndex) {
      var showingRootNode = this.rowsToDisplay && this.rowsToDisplay[0] === this.rootNode;
      if (showingRootNode) {
        return topLevelIndex;
      }
      var rowNode = this.rootNode.childrenAfterSort[topLevelIndex];
      if (this.gridOptionsWrapper.isGroupHideOpenParents()) {
        while (rowNode.expanded && rowNode.childrenAfterSort && rowNode.childrenAfterSort.length > 0) {
          rowNode = rowNode.childrenAfterSort[0];
        }
      }
      return rowNode.rowIndex;
    };
    ClientSideRowModel2.prototype.getRowBounds = function(index) {
      if (_.missing(this.rowsToDisplay)) {
        return null;
      }
      var rowNode = this.rowsToDisplay[index];
      if (rowNode) {
        return {
          rowTop: rowNode.rowTop,
          rowHeight: rowNode.rowHeight
        };
      }
      return null;
    };
    ClientSideRowModel2.prototype.onRowGroupOpened = function() {
      var animate = this.gridOptionsWrapper.isAnimateRows();
      this.refreshModel({ step: exports2.ClientSideRowModelSteps.MAP, keepRenderedRows: true, animate });
    };
    ClientSideRowModel2.prototype.onFilterChanged = function(event) {
      if (event.afterDataChange) {
        return;
      }
      var animate = this.gridOptionsWrapper.isAnimateRows();
      this.refreshModel({ step: exports2.ClientSideRowModelSteps.FILTER, keepRenderedRows: true, animate });
    };
    ClientSideRowModel2.prototype.onSortChanged = function() {
      var animate = this.gridOptionsWrapper.isAnimateRows();
      this.refreshModel({ step: exports2.ClientSideRowModelSteps.SORT, keepRenderedRows: true, animate, keepEditingRows: true });
    };
    ClientSideRowModel2.prototype.getType = function() {
      return Constants.ROW_MODEL_TYPE_CLIENT_SIDE;
    };
    ClientSideRowModel2.prototype.onValueChanged = function() {
      if (this.columnModel.isPivotActive()) {
        this.refreshModel({ step: exports2.ClientSideRowModelSteps.PIVOT });
      } else {
        this.refreshModel({ step: exports2.ClientSideRowModelSteps.AGGREGATE });
      }
    };
    ClientSideRowModel2.prototype.createChangePath = function(rowNodeTransactions) {
      var noTransactions = _.missingOrEmpty(rowNodeTransactions);
      var changedPath = new ChangedPath(false, this.rootNode);
      if (noTransactions || this.gridOptionsWrapper.isTreeData()) {
        changedPath.setInactive();
      }
      return changedPath;
    };
    ClientSideRowModel2.prototype.isSuppressModelUpdateAfterUpdateTransaction = function(params2) {
      if (!this.gridOptionsWrapper.isSuppressModelUpdateAfterUpdateTransaction()) {
        return false;
      }
      if (params2.rowNodeTransactions == null) {
        return false;
      }
      var transWithAddsOrDeletes = _.filter(params2.rowNodeTransactions, function(tx) {
        return tx.add != null && tx.add.length > 0 || tx.remove != null && tx.remove.length > 0;
      });
      var transactionsContainUpdatesOnly = transWithAddsOrDeletes == null || transWithAddsOrDeletes.length == 0;
      return transactionsContainUpdatesOnly;
    };
    ClientSideRowModel2.prototype.refreshModel = function(params2) {
      var _this = this;
      if (this.isSuppressModelUpdateAfterUpdateTransaction(params2)) {
        return;
      }
      var changedPath = this.createChangePath(params2.rowNodeTransactions);
      switch (params2.step) {
        case exports2.ClientSideRowModelSteps.EVERYTHING:
          this.doRowGrouping(params2.groupState, params2.rowNodeTransactions, params2.rowNodeOrder, changedPath, !!params2.afterColumnsChanged);
        case exports2.ClientSideRowModelSteps.FILTER:
          this.doFilter(changedPath);
        case exports2.ClientSideRowModelSteps.PIVOT:
          this.doPivot(changedPath);
        case exports2.ClientSideRowModelSteps.AGGREGATE:
          this.doAggregate(changedPath);
        case exports2.ClientSideRowModelSteps.SORT:
          this.doSort(params2.rowNodeTransactions, changedPath);
        case exports2.ClientSideRowModelSteps.MAP:
          this.doRowsToDisplay();
      }
      var displayedNodesMapped = this.setRowTopAndRowIndex();
      this.clearRowTopAndRowIndex(changedPath, displayedNodesMapped);
      var event = {
        type: Events.EVENT_MODEL_UPDATED,
        api: this.gridApi,
        columnApi: this.columnApi,
        animate: params2.animate,
        keepRenderedRows: params2.keepRenderedRows,
        newData: params2.newData,
        newPage: false
      };
      this.eventService.dispatchEvent(event);
      if (this.$scope) {
        window.setTimeout(function() {
          _this.$scope.$apply();
        }, 0);
      }
    };
    ClientSideRowModel2.prototype.isEmpty = function() {
      var rowsMissing = _.missing(this.rootNode.allLeafChildren) || this.rootNode.allLeafChildren.length === 0;
      return _.missing(this.rootNode) || rowsMissing || !this.columnModel.isReady();
    };
    ClientSideRowModel2.prototype.isRowsToRender = function() {
      return _.exists(this.rowsToDisplay) && this.rowsToDisplay.length > 0;
    };
    ClientSideRowModel2.prototype.getNodesInRangeForSelection = function(firstInRange, lastInRange) {
      var firstRowHit = !lastInRange;
      var lastRowHit = false;
      var lastRow;
      var result = [];
      var groupsSelectChildren = this.gridOptionsWrapper.isGroupSelectsChildren();
      this.forEachNodeAfterFilterAndSort(function(rowNode) {
        var lookingForLastRow = firstRowHit && !lastRowHit;
        if (!firstRowHit) {
          if (rowNode === lastInRange || rowNode === firstInRange) {
            firstRowHit = true;
          }
        }
        var skipThisGroupNode = rowNode.group && groupsSelectChildren;
        if (!skipThisGroupNode) {
          var inRange = firstRowHit && !lastRowHit;
          var childOfLastRow = rowNode.isParentOfNode(lastRow);
          if (inRange || childOfLastRow) {
            result.push(rowNode);
          }
        }
        if (lookingForLastRow) {
          if (rowNode === lastInRange || rowNode === firstInRange) {
            lastRowHit = true;
            if (rowNode === lastInRange) {
              lastRow = lastInRange;
            } else {
              lastRow = firstInRange;
            }
          }
        }
      });
      return result;
    };
    ClientSideRowModel2.prototype.setDatasource = function(datasource) {
      console.error("AG Grid: should never call setDatasource on clientSideRowController");
    };
    ClientSideRowModel2.prototype.getTopLevelNodes = function() {
      return this.rootNode ? this.rootNode.childrenAfterGroup : null;
    };
    ClientSideRowModel2.prototype.getRootNode = function() {
      return this.rootNode;
    };
    ClientSideRowModel2.prototype.getRow = function(index) {
      return this.rowsToDisplay[index];
    };
    ClientSideRowModel2.prototype.isRowPresent = function(rowNode) {
      return this.rowsToDisplay.indexOf(rowNode) >= 0;
    };
    ClientSideRowModel2.prototype.getRowIndexAtPixel = function(pixelToMatch) {
      if (this.isEmpty()) {
        return -1;
      }
      var bottomPointer = 0;
      var topPointer = this.rowsToDisplay.length - 1;
      if (pixelToMatch <= 0) {
        return 0;
      }
      var lastNode = _.last(this.rowsToDisplay);
      if (lastNode.rowTop <= pixelToMatch) {
        return this.rowsToDisplay.length - 1;
      }
      while (true) {
        var midPointer = Math.floor((bottomPointer + topPointer) / 2);
        var currentRowNode = this.rowsToDisplay[midPointer];
        if (this.isRowInPixel(currentRowNode, pixelToMatch)) {
          return midPointer;
        }
        if (currentRowNode.rowTop < pixelToMatch) {
          bottomPointer = midPointer + 1;
        } else if (currentRowNode.rowTop > pixelToMatch) {
          topPointer = midPointer - 1;
        }
      }
    };
    ClientSideRowModel2.prototype.isRowInPixel = function(rowNode, pixelToMatch) {
      var topPixel = rowNode.rowTop;
      var bottomPixel = rowNode.rowTop + rowNode.rowHeight;
      var pixelInRow = topPixel <= pixelToMatch && bottomPixel > pixelToMatch;
      return pixelInRow;
    };
    ClientSideRowModel2.prototype.forEachLeafNode = function(callback) {
      if (this.rootNode.allLeafChildren) {
        this.rootNode.allLeafChildren.forEach(function(rowNode, index) {
          return callback(rowNode, index);
        });
      }
    };
    ClientSideRowModel2.prototype.forEachNode = function(callback) {
      this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterGroup, callback, RecursionType.Normal, 0);
    };
    ClientSideRowModel2.prototype.forEachNodeAfterFilter = function(callback) {
      this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterFilter, callback, RecursionType.AfterFilter, 0);
    };
    ClientSideRowModel2.prototype.forEachNodeAfterFilterAndSort = function(callback) {
      this.recursivelyWalkNodesAndCallback(this.rootNode.childrenAfterSort, callback, RecursionType.AfterFilterAndSort, 0);
    };
    ClientSideRowModel2.prototype.forEachPivotNode = function(callback) {
      this.recursivelyWalkNodesAndCallback([this.rootNode], callback, RecursionType.PivotNodes, 0);
    };
    ClientSideRowModel2.prototype.recursivelyWalkNodesAndCallback = function(nodes, callback, recursionType, index) {
      if (!nodes) {
        return index;
      }
      for (var i2 = 0; i2 < nodes.length; i2++) {
        var node = nodes[i2];
        callback(node, index++);
        if (node.hasChildren()) {
          var nodeChildren = null;
          switch (recursionType) {
            case RecursionType.Normal:
              nodeChildren = node.childrenAfterGroup;
              break;
            case RecursionType.AfterFilter:
              nodeChildren = node.childrenAfterFilter;
              break;
            case RecursionType.AfterFilterAndSort:
              nodeChildren = node.childrenAfterSort;
              break;
            case RecursionType.PivotNodes:
              nodeChildren = !node.leafGroup ? node.childrenAfterSort : null;
              break;
          }
          if (nodeChildren) {
            index = this.recursivelyWalkNodesAndCallback(nodeChildren, callback, recursionType, index);
          }
        }
      }
      return index;
    };
    ClientSideRowModel2.prototype.doAggregate = function(changedPath) {
      if (this.aggregationStage) {
        this.aggregationStage.execute({ rowNode: this.rootNode, changedPath });
      }
    };
    ClientSideRowModel2.prototype.expandOrCollapseAll = function(expand) {
      var usingTreeData = this.gridOptionsWrapper.isTreeData();
      if (this.rootNode) {
        recursiveExpandOrCollapse(this.rootNode.childrenAfterGroup);
      }
      function recursiveExpandOrCollapse(rowNodes) {
        if (!rowNodes) {
          return;
        }
        rowNodes.forEach(function(rowNode) {
          var shouldExpandOrCollapse = usingTreeData ? _.exists(rowNode.childrenAfterGroup) : rowNode.group;
          if (shouldExpandOrCollapse) {
            rowNode.expanded = expand;
            recursiveExpandOrCollapse(rowNode.childrenAfterGroup);
          }
        });
      }
      this.refreshModel({ step: exports2.ClientSideRowModelSteps.MAP });
      var eventSource = expand ? "expandAll" : "collapseAll";
      var event = {
        api: this.gridApi,
        columnApi: this.columnApi,
        type: Events.EVENT_EXPAND_COLLAPSE_ALL,
        source: eventSource
      };
      this.eventService.dispatchEvent(event);
    };
    ClientSideRowModel2.prototype.doSort = function(rowNodeTransactions, changedPath) {
      this.sortStage.execute({
        rowNode: this.rootNode,
        rowNodeTransactions,
        changedPath
      });
    };
    ClientSideRowModel2.prototype.doRowGrouping = function(groupState, rowNodeTransactions, rowNodeOrder, changedPath, afterColumnsChanged) {
      if (this.groupStage) {
        if (rowNodeTransactions) {
          this.groupStage.execute({
            rowNode: this.rootNode,
            rowNodeTransactions,
            rowNodeOrder,
            changedPath
          });
        } else {
          this.groupStage.execute({
            rowNode: this.rootNode,
            changedPath,
            afterColumnsChanged
          });
          this.restoreGroupState(groupState);
        }
        if (this.gridOptionsWrapper.isGroupSelectsChildren()) {
          this.selectionService.updateGroupsFromChildrenSelections(changedPath);
        }
      } else {
        this.rootNode.childrenAfterGroup = this.rootNode.allLeafChildren;
        this.rootNode.updateHasChildren();
      }
    };
    ClientSideRowModel2.prototype.restoreGroupState = function(groupState) {
      if (!groupState) {
        return;
      }
      _.traverseNodesWithKey(this.rootNode.childrenAfterGroup, function(node, key) {
        if (typeof groupState[key] === "boolean") {
          node.expanded = groupState[key];
        }
      });
    };
    ClientSideRowModel2.prototype.doFilter = function(changedPath) {
      this.filterStage.execute({ rowNode: this.rootNode, changedPath });
    };
    ClientSideRowModel2.prototype.doPivot = function(changedPath) {
      if (this.pivotStage) {
        this.pivotStage.execute({ rowNode: this.rootNode, changedPath });
      }
    };
    ClientSideRowModel2.prototype.getGroupState = function() {
      if (!this.rootNode.childrenAfterGroup || !this.gridOptionsWrapper.isRememberGroupStateWhenNewData()) {
        return null;
      }
      var result = {};
      _.traverseNodesWithKey(this.rootNode.childrenAfterGroup, function(node, key) {
        return result[key] = node.expanded;
      });
      return result;
    };
    ClientSideRowModel2.prototype.getCopyOfNodesMap = function() {
      return this.nodeManager.getCopyOfNodesMap();
    };
    ClientSideRowModel2.prototype.getRowNode = function(id) {
      var idIsGroup = typeof id == "string" && id.indexOf(RowNode.ID_PREFIX_ROW_GROUP) == 0;
      if (idIsGroup) {
        var res_1 = void 0;
        this.forEachNode(function(node) {
          if (node.id === id) {
            res_1 = node;
          }
        });
        return res_1;
      } else {
        return this.nodeManager.getRowNode(id);
      }
    };
    ClientSideRowModel2.prototype.setRowData = function(rowData) {
      var groupState = this.getGroupState();
      this.nodeManager.setRowData(rowData);
      var rowDataChangedEvent = {
        type: Events.EVENT_ROW_DATA_CHANGED,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.eventService.dispatchEvent(rowDataChangedEvent);
      this.refreshModel({
        step: exports2.ClientSideRowModelSteps.EVERYTHING,
        groupState,
        newData: true
      });
    };
    ClientSideRowModel2.prototype.batchUpdateRowData = function(rowDataTransaction, callback) {
      var _this = this;
      if (this.applyAsyncTransactionsTimeout == null) {
        this.rowDataTransactionBatch = [];
        var waitMillis = this.gridOptionsWrapper.getAsyncTransactionWaitMillis();
        this.applyAsyncTransactionsTimeout = window.setTimeout(function() {
          _this.executeBatchUpdateRowData();
        }, waitMillis);
      }
      this.rowDataTransactionBatch.push({ rowDataTransaction, callback });
    };
    ClientSideRowModel2.prototype.flushAsyncTransactions = function() {
      if (this.applyAsyncTransactionsTimeout != null) {
        clearTimeout(this.applyAsyncTransactionsTimeout);
        this.executeBatchUpdateRowData();
      }
    };
    ClientSideRowModel2.prototype.executeBatchUpdateRowData = function() {
      var _this = this;
      this.valueCache.onDataChanged();
      var callbackFuncsBound = [];
      var rowNodeTrans = [];
      var forceRowNodeOrder = false;
      if (this.rowDataTransactionBatch) {
        this.rowDataTransactionBatch.forEach(function(tranItem) {
          var rowNodeTran = _this.nodeManager.updateRowData(tranItem.rowDataTransaction, void 0);
          rowNodeTrans.push(rowNodeTran);
          if (tranItem.callback) {
            callbackFuncsBound.push(tranItem.callback.bind(null, rowNodeTran));
          }
          if (typeof tranItem.rowDataTransaction.addIndex === "number") {
            forceRowNodeOrder = true;
          }
        });
      }
      this.commonUpdateRowData(rowNodeTrans, void 0, forceRowNodeOrder);
      if (callbackFuncsBound.length > 0) {
        window.setTimeout(function() {
          callbackFuncsBound.forEach(function(func) {
            return func();
          });
        }, 0);
      }
      if (rowNodeTrans.length > 0) {
        var event_1 = {
          api: this.gridOptionsWrapper.getApi(),
          columnApi: this.gridOptionsWrapper.getColumnApi(),
          type: Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED,
          results: rowNodeTrans
        };
        this.eventService.dispatchEvent(event_1);
      }
      this.rowDataTransactionBatch = null;
      this.applyAsyncTransactionsTimeout = void 0;
    };
    ClientSideRowModel2.prototype.updateRowData = function(rowDataTran, rowNodeOrder) {
      this.valueCache.onDataChanged();
      var rowNodeTran = this.nodeManager.updateRowData(rowDataTran, rowNodeOrder);
      var forceRowNodeOrder = typeof rowDataTran.addIndex === "number";
      this.commonUpdateRowData([rowNodeTran], rowNodeOrder, forceRowNodeOrder);
      return rowNodeTran;
    };
    ClientSideRowModel2.prototype.createRowNodeOrder = function() {
      var suppressSortOrder = this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder();
      if (suppressSortOrder) {
        return;
      }
      var orderMap = {};
      if (this.rootNode && this.rootNode.allLeafChildren) {
        for (var index = 0; index < this.rootNode.allLeafChildren.length; index++) {
          var node = this.rootNode.allLeafChildren[index];
          orderMap[node.id] = index;
        }
      }
      return orderMap;
    };
    ClientSideRowModel2.prototype.commonUpdateRowData = function(rowNodeTrans, rowNodeOrder, forceRowNodeOrder) {
      if (forceRowNodeOrder) {
        rowNodeOrder = this.createRowNodeOrder();
      }
      this.refreshModel({
        step: exports2.ClientSideRowModelSteps.EVERYTHING,
        rowNodeTransactions: rowNodeTrans,
        rowNodeOrder,
        keepRenderedRows: true,
        animate: true,
        keepEditingRows: true
      });
      var event = {
        type: Events.EVENT_ROW_DATA_UPDATED,
        api: this.gridApi,
        columnApi: this.columnApi
      };
      this.eventService.dispatchEvent(event);
    };
    ClientSideRowModel2.prototype.doRowsToDisplay = function() {
      this.rowsToDisplay = this.flattenStage.execute({ rowNode: this.rootNode });
    };
    ClientSideRowModel2.prototype.onRowHeightChanged = function() {
      this.refreshModel({ step: exports2.ClientSideRowModelSteps.MAP, keepRenderedRows: true, keepEditingRows: true });
    };
    ClientSideRowModel2.prototype.resetRowHeights = function() {
      var atLeastOne = false;
      this.forEachNode(function(rowNode) {
        rowNode.setRowHeight(rowNode.rowHeight, true);
        var detailNode = rowNode.detailNode;
        if (detailNode) {
          detailNode.setRowHeight(detailNode.rowHeight, true);
        }
        atLeastOne = true;
      });
      if (atLeastOne) {
        this.onRowHeightChanged();
      }
    };
    __decorate$2k([
      Autowired("columnModel")
    ], ClientSideRowModel2.prototype, "columnModel", void 0);
    __decorate$2k([
      Autowired("$scope")
    ], ClientSideRowModel2.prototype, "$scope", void 0);
    __decorate$2k([
      Autowired("selectionService")
    ], ClientSideRowModel2.prototype, "selectionService", void 0);
    __decorate$2k([
      Autowired("valueCache")
    ], ClientSideRowModel2.prototype, "valueCache", void 0);
    __decorate$2k([
      Autowired("columnApi")
    ], ClientSideRowModel2.prototype, "columnApi", void 0);
    __decorate$2k([
      Autowired("gridApi")
    ], ClientSideRowModel2.prototype, "gridApi", void 0);
    __decorate$2k([
      Autowired("animationFrameService")
    ], ClientSideRowModel2.prototype, "animationFrameService", void 0);
    __decorate$2k([
      Autowired("beans")
    ], ClientSideRowModel2.prototype, "beans", void 0);
    __decorate$2k([
      Autowired("filterStage")
    ], ClientSideRowModel2.prototype, "filterStage", void 0);
    __decorate$2k([
      Autowired("sortStage")
    ], ClientSideRowModel2.prototype, "sortStage", void 0);
    __decorate$2k([
      Autowired("flattenStage")
    ], ClientSideRowModel2.prototype, "flattenStage", void 0);
    __decorate$2k([
      Optional("groupStage")
    ], ClientSideRowModel2.prototype, "groupStage", void 0);
    __decorate$2k([
      Optional("aggregationStage")
    ], ClientSideRowModel2.prototype, "aggregationStage", void 0);
    __decorate$2k([
      Optional("pivotStage")
    ], ClientSideRowModel2.prototype, "pivotStage", void 0);
    __decorate$2k([
      PostConstruct
    ], ClientSideRowModel2.prototype, "init", null);
    ClientSideRowModel2 = __decorate$2k([
      Bean("rowModel")
    ], ClientSideRowModel2);
    return ClientSideRowModel2;
  }(BeanStub);
  var __extends$2E = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2l = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var FilterStage = function(_super) {
    __extends$2E(FilterStage2, _super);
    function FilterStage2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    FilterStage2.prototype.execute = function(params2) {
      var rowNode = params2.rowNode, changedPath = params2.changedPath;
      this.filterService.filter(changedPath);
      this.selectableService.updateSelectableAfterFiltering(rowNode);
    };
    __decorate$2l([
      Autowired("selectableService")
    ], FilterStage2.prototype, "selectableService", void 0);
    __decorate$2l([
      Autowired("filterService")
    ], FilterStage2.prototype, "filterService", void 0);
    FilterStage2 = __decorate$2l([
      Bean("filterStage")
    ], FilterStage2);
    return FilterStage2;
  }(BeanStub);
  var __extends$2F = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2m = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var SortStage = function(_super) {
    __extends$2F(SortStage2, _super);
    function SortStage2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    SortStage2.prototype.execute = function(params2) {
      var sortOptions = this.sortController.getSortOptions();
      var sortActive = _.exists(sortOptions) && sortOptions.length > 0;
      var deltaSort = sortActive && _.exists(params2.rowNodeTransactions) && this.gridOptionsWrapper.isDeltaSort();
      var dirtyLeafNodes = deltaSort ? this.calculateDirtyNodes(params2.rowNodeTransactions) : null;
      var noAggregations = _.missingOrEmpty(this.columnModel.getValueColumns());
      var sortContainsGroupColumns = _.some(sortOptions, function(opt) {
        return !!opt.column.getColDef().showRowGroup;
      });
      this.sortService.sort(sortOptions, sortActive, deltaSort, dirtyLeafNodes, params2.changedPath, noAggregations, sortContainsGroupColumns);
    };
    SortStage2.prototype.calculateDirtyNodes = function(rowNodeTransactions) {
      var dirtyNodes = {};
      var addNodesFunc = function(rowNodes) {
        if (rowNodes) {
          rowNodes.forEach(function(rowNode) {
            return dirtyNodes[rowNode.id] = true;
          });
        }
      };
      if (rowNodeTransactions) {
        rowNodeTransactions.forEach(function(tran) {
          addNodesFunc(tran.add);
          addNodesFunc(tran.update);
          addNodesFunc(tran.remove);
        });
      }
      return dirtyNodes;
    };
    __decorate$2m([
      Autowired("sortService")
    ], SortStage2.prototype, "sortService", void 0);
    __decorate$2m([
      Autowired("sortController")
    ], SortStage2.prototype, "sortController", void 0);
    __decorate$2m([
      Autowired("columnModel")
    ], SortStage2.prototype, "columnModel", void 0);
    SortStage2 = __decorate$2m([
      Bean("sortStage")
    ], SortStage2);
    return SortStage2;
  }(BeanStub);
  var __extends$2G = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2n = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var FlattenStage = function(_super) {
    __extends$2G(FlattenStage2, _super);
    function FlattenStage2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    FlattenStage2.prototype.execute = function(params2) {
      var rootNode = params2.rowNode;
      var result = [];
      var nextRowTop = { value: 0 };
      var skipLeafNodes = this.columnModel.isPivotMode();
      var showRootNode = skipLeafNodes && rootNode.leafGroup;
      var topList = showRootNode ? [rootNode] : rootNode.childrenAfterSort;
      this.recursivelyAddToRowsToDisplay(topList, result, nextRowTop, skipLeafNodes, 0);
      var atLeastOneRowPresent = result.length > 0;
      var includeGroupTotalFooter = !showRootNode && atLeastOneRowPresent && this.gridOptionsWrapper.isGroupIncludeTotalFooter();
      if (includeGroupTotalFooter) {
        this.ensureFooterNodeExists(rootNode);
        this.addRowNodeToRowsToDisplay(rootNode.sibling, result, nextRowTop, 0);
      }
      return result;
    };
    FlattenStage2.prototype.recursivelyAddToRowsToDisplay = function(rowsToFlatten, result, nextRowTop, skipLeafNodes, uiLevel) {
      if (_.missingOrEmpty(rowsToFlatten)) {
        return;
      }
      var hideOpenParents = this.gridOptionsWrapper.isGroupHideOpenParents();
      var groupRemoveSingleChildren = this.gridOptionsWrapper.isGroupRemoveSingleChildren();
      var groupRemoveLowestSingleChildren = !groupRemoveSingleChildren && this.gridOptionsWrapper.isGroupRemoveLowestSingleChildren();
      for (var i2 = 0; i2 < rowsToFlatten.length; i2++) {
        var rowNode = rowsToFlatten[i2];
        var isParent = rowNode.hasChildren();
        var isSkippedLeafNode = skipLeafNodes && !isParent;
        var isRemovedSingleChildrenGroup = groupRemoveSingleChildren && isParent && rowNode.childrenAfterGroup.length === 1;
        var isRemovedLowestSingleChildrenGroup = groupRemoveLowestSingleChildren && isParent && rowNode.leafGroup && rowNode.childrenAfterGroup.length === 1;
        var neverAllowToExpand = skipLeafNodes && rowNode.leafGroup;
        var isHiddenOpenParent = hideOpenParents && rowNode.expanded && !neverAllowToExpand;
        var thisRowShouldBeRendered = !isSkippedLeafNode && !isHiddenOpenParent && !isRemovedSingleChildrenGroup && !isRemovedLowestSingleChildrenGroup;
        if (thisRowShouldBeRendered) {
          this.addRowNodeToRowsToDisplay(rowNode, result, nextRowTop, uiLevel);
        }
        if (skipLeafNodes && rowNode.leafGroup) {
          continue;
        }
        if (isParent) {
          var excludedParent = isRemovedSingleChildrenGroup || isRemovedLowestSingleChildrenGroup;
          if (rowNode.expanded || excludedParent) {
            var uiLevelForChildren = excludedParent ? uiLevel : uiLevel + 1;
            this.recursivelyAddToRowsToDisplay(rowNode.childrenAfterSort, result, nextRowTop, skipLeafNodes, uiLevelForChildren);
            if (this.gridOptionsWrapper.isGroupIncludeFooter()) {
              this.ensureFooterNodeExists(rowNode);
              this.addRowNodeToRowsToDisplay(rowNode.sibling, result, nextRowTop, uiLevel);
            }
          }
        } else if (rowNode.master && rowNode.expanded) {
          var detailNode = this.createDetailNode(rowNode);
          this.addRowNodeToRowsToDisplay(detailNode, result, nextRowTop, uiLevel);
        }
      }
    };
    FlattenStage2.prototype.addRowNodeToRowsToDisplay = function(rowNode, result, nextRowTop, uiLevel) {
      var isGroupMultiAutoColumn = this.gridOptionsWrapper.isGroupMultiAutoColumn();
      result.push(rowNode);
      rowNode.setUiLevel(isGroupMultiAutoColumn ? 0 : uiLevel);
    };
    FlattenStage2.prototype.ensureFooterNodeExists = function(groupNode) {
      if (_.exists(groupNode.sibling)) {
        return;
      }
      var footerNode = new RowNode(this.beans);
      Object.keys(groupNode).forEach(function(key) {
        footerNode[key] = groupNode[key];
      });
      footerNode.footer = true;
      footerNode.setRowTop(null);
      footerNode.setRowIndex(null);
      footerNode.oldRowTop = null;
      if (_.exists(footerNode.id)) {
        footerNode.id = "rowGroupFooter_" + footerNode.id;
      }
      footerNode.sibling = groupNode;
      groupNode.sibling = footerNode;
    };
    FlattenStage2.prototype.createDetailNode = function(masterNode) {
      if (_.exists(masterNode.detailNode)) {
        return masterNode.detailNode;
      }
      var detailNode = new RowNode(this.beans);
      detailNode.detail = true;
      detailNode.selectable = false;
      detailNode.parent = masterNode;
      if (_.exists(masterNode.id)) {
        detailNode.id = "detail_" + masterNode.id;
      }
      detailNode.data = masterNode.data;
      detailNode.level = masterNode.level + 1;
      masterNode.detailNode = detailNode;
      return detailNode;
    };
    __decorate$2n([
      Autowired("columnModel")
    ], FlattenStage2.prototype, "columnModel", void 0);
    __decorate$2n([
      Autowired("beans")
    ], FlattenStage2.prototype, "beans", void 0);
    FlattenStage2 = __decorate$2n([
      Bean("flattenStage")
    ], FlattenStage2);
    return FlattenStage2;
  }(BeanStub);
  var __extends$2H = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2o = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var SortService = function(_super) {
    __extends$2H(SortService2, _super);
    function SortService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    SortService2.prototype.init = function() {
      this.postSortFunc = this.gridOptionsWrapper.getPostSortFunc();
    };
    SortService2.prototype.sort = function(sortOptions, sortActive, deltaSort, dirtyLeafNodes, changedPath, noAggregations, sortContainsGroupColumns) {
      var _this = this;
      var groupMaintainOrder = this.gridOptionsWrapper.isGroupMaintainOrder();
      var callback = function(rowNode) {
        _this.pullDownGroupDataForHideOpenParents(rowNode.childrenAfterFilter, true);
        if (sortActive) {
          var skipSortingGroups = groupMaintainOrder && !rowNode.leafGroup && !sortContainsGroupColumns;
          if (skipSortingGroups) {
            rowNode.childrenAfterSort = rowNode.childrenAfterSort.slice(0);
          } else {
            rowNode.childrenAfterSort = deltaSort ? _this.doDeltaSort(rowNode, sortOptions, dirtyLeafNodes, changedPath, noAggregations) : _this.rowNodeSorter.doFullSort(rowNode.childrenAfterFilter, sortOptions);
          }
        } else {
          rowNode.childrenAfterSort = groupMaintainOrder && rowNode.childrenAfterSort ? rowNode.childrenAfterSort.slice(0) : rowNode.childrenAfterFilter.slice(0);
        }
        _this.updateChildIndexes(rowNode);
        if (_this.postSortFunc) {
          _this.postSortFunc(rowNode.childrenAfterSort);
        }
      };
      if (changedPath) {
        changedPath.forEachChangedNodeDepthFirst(callback);
      }
      this.updateGroupDataForHideOpenParents(changedPath);
    };
    SortService2.prototype.mapNodeToSortedNode = function(rowNode, pos) {
      return { currentPos: pos, rowNode };
    };
    SortService2.prototype.doDeltaSort = function(rowNode, sortOptions, dirtyLeafNodes, changedPath, noAggregations) {
      var cleanNodes = rowNode.childrenAfterSort.filter(function(node) {
        var passesDirtyNodesCheck = !dirtyLeafNodes[node.id];
        var passesChangedPathCheck = noAggregations || changedPath && changedPath.canSkip(node);
        return passesDirtyNodesCheck && passesChangedPathCheck;
      }).map(this.mapNodeToSortedNode.bind(this));
      var cleanNodesMapped = {};
      cleanNodes.forEach(function(sortedRowNode) {
        return cleanNodesMapped[sortedRowNode.rowNode.id] = sortedRowNode.rowNode;
      });
      var changedNodes = rowNode.childrenAfterFilter.filter(function(node) {
        return !cleanNodesMapped[node.id];
      }).map(this.mapNodeToSortedNode.bind(this));
      changedNodes.sort(this.rowNodeSorter.compareRowNodes.bind(this, sortOptions));
      var result;
      if (changedNodes.length === 0) {
        result = cleanNodes;
      } else if (cleanNodes.length === 0) {
        result = changedNodes;
      } else {
        result = this.mergeSortedArrays(sortOptions, cleanNodes, changedNodes);
      }
      return result.map(function(item) {
        return item.rowNode;
      });
    };
    SortService2.prototype.mergeSortedArrays = function(sortOptions, arr1, arr2) {
      var res = [];
      var i2 = 0;
      var j = 0;
      while (i2 < arr1.length && j < arr2.length) {
        var compareResult = this.rowNodeSorter.compareRowNodes(sortOptions, arr1[i2], arr2[j]);
        if (compareResult < 0) {
          res.push(arr1[i2++]);
        } else {
          res.push(arr2[j++]);
        }
      }
      while (i2 < arr1.length) {
        res.push(arr1[i2++]);
      }
      while (j < arr2.length) {
        res.push(arr2[j++]);
      }
      return res;
    };
    SortService2.prototype.updateChildIndexes = function(rowNode) {
      if (_.missing(rowNode.childrenAfterSort)) {
        return;
      }
      var listToSort = rowNode.childrenAfterSort;
      for (var i2 = 0; i2 < listToSort.length; i2++) {
        var child = listToSort[i2];
        var firstChild = i2 === 0;
        var lastChild = i2 === rowNode.childrenAfterSort.length - 1;
        child.setFirstChild(firstChild);
        child.setLastChild(lastChild);
        child.setChildIndex(i2);
      }
    };
    SortService2.prototype.updateGroupDataForHideOpenParents = function(changedPath) {
      var _this = this;
      if (!this.gridOptionsWrapper.isGroupHideOpenParents()) {
        return;
      }
      if (this.gridOptionsWrapper.isTreeData()) {
        var msg_1 = "AG Grid: The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them (as opposed to Row Grouping, which only has Aggregated Values at the group level).";
        _.doOnce(function() {
          return console.warn(msg_1);
        }, "sortService.hideOpenParentsWithTreeData");
        return false;
      }
      var callback = function(rowNode) {
        _this.pullDownGroupDataForHideOpenParents(rowNode.childrenAfterSort, false);
        rowNode.childrenAfterSort.forEach(function(child) {
          if (child.hasChildren()) {
            callback(child);
          }
        });
      };
      if (changedPath) {
        changedPath.executeFromRootNode(function(rowNode) {
          return callback(rowNode);
        });
      }
    };
    SortService2.prototype.pullDownGroupDataForHideOpenParents = function(rowNodes, clearOperation) {
      var _this = this;
      if (!this.gridOptionsWrapper.isGroupHideOpenParents() || _.missing(rowNodes)) {
        return;
      }
      rowNodes.forEach(function(childRowNode) {
        var groupDisplayCols = _this.columnModel.getGroupDisplayColumns();
        groupDisplayCols.forEach(function(groupDisplayCol) {
          var showRowGroup = groupDisplayCol.getColDef().showRowGroup;
          if (typeof showRowGroup !== "string") {
            console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");
            return;
          }
          var displayingGroupKey = showRowGroup;
          var rowGroupColumn = _this.columnModel.getPrimaryColumn(displayingGroupKey);
          var thisRowNodeMatches = rowGroupColumn === childRowNode.rowGroupColumn;
          if (thisRowNodeMatches) {
            return;
          }
          if (clearOperation) {
            childRowNode.setGroupValue(groupDisplayCol.getId(), void 0);
          } else {
            var parentToStealFrom = childRowNode.getFirstChildOfFirstChild(rowGroupColumn);
            if (parentToStealFrom) {
              childRowNode.setGroupValue(groupDisplayCol.getId(), parentToStealFrom.key);
            }
          }
        });
      });
    };
    __decorate$2o([
      Autowired("columnModel")
    ], SortService2.prototype, "columnModel", void 0);
    __decorate$2o([
      Autowired("rowNodeSorter")
    ], SortService2.prototype, "rowNodeSorter", void 0);
    __decorate$2o([
      PostConstruct
    ], SortService2.prototype, "init", null);
    SortService2 = __decorate$2o([
      Bean("sortService")
    ], SortService2);
    return SortService2;
  }(BeanStub);
  var __extends$2I = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2p = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var FilterService = function(_super) {
    __extends$2I(FilterService2, _super);
    function FilterService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    FilterService2.prototype.postConstruct = function() {
      this.doingTreeData = this.gridOptionsWrapper.isTreeData();
    };
    FilterService2.prototype.filter = function(changedPath) {
      var filterActive = this.filterManager.isAnyFilterPresent();
      this.filterNodes(filterActive, changedPath);
    };
    FilterService2.prototype.filterNodes = function(filterActive, changedPath) {
      var _this = this;
      var filterCallback = function(rowNode, includeChildNodes) {
        if (rowNode.hasChildren()) {
          if (filterActive && !includeChildNodes) {
            rowNode.childrenAfterFilter = rowNode.childrenAfterGroup.filter(function(childNode) {
              var passBecauseChildren = childNode.childrenAfterFilter && childNode.childrenAfterFilter.length > 0;
              var passBecauseDataPasses = childNode.data && _this.filterManager.doesRowPassFilter({ rowNode: childNode });
              return passBecauseChildren || passBecauseDataPasses;
            });
          } else {
            rowNode.childrenAfterFilter = rowNode.childrenAfterGroup;
          }
          _this.setAllChildrenCount(rowNode);
        } else {
          rowNode.childrenAfterFilter = rowNode.childrenAfterGroup;
          rowNode.setAllChildrenCount(null);
        }
      };
      if (this.doingTreeDataFiltering()) {
        var treeDataDepthFirstFilter_1 = function(rowNode, alreadyFoundInParent) {
          if (rowNode.childrenAfterGroup) {
            for (var i2 = 0; i2 < rowNode.childrenAfterGroup.length; i2++) {
              var childNode = rowNode.childrenAfterGroup[i2];
              var foundInParent = alreadyFoundInParent || _this.filterManager.doesRowPassFilter({ rowNode: childNode });
              if (childNode.childrenAfterGroup) {
                treeDataDepthFirstFilter_1(rowNode.childrenAfterGroup[i2], foundInParent);
              } else {
                filterCallback(childNode, foundInParent);
              }
            }
          }
          filterCallback(rowNode, alreadyFoundInParent);
        };
        var treeDataFilterCallback = function(rowNode) {
          return treeDataDepthFirstFilter_1(rowNode, false);
        };
        changedPath.executeFromRootNode(treeDataFilterCallback);
      } else {
        var defaultFilterCallback = function(rowNode) {
          return filterCallback(rowNode, false);
        };
        changedPath.forEachChangedNodeDepthFirst(defaultFilterCallback, true);
      }
    };
    FilterService2.prototype.setAllChildrenCountTreeData = function(rowNode) {
      var allChildrenCount = 0;
      rowNode.childrenAfterFilter.forEach(function(child) {
        allChildrenCount++;
        allChildrenCount += child.allChildrenCount;
      });
      rowNode.setAllChildrenCount(allChildrenCount);
    };
    FilterService2.prototype.setAllChildrenCountGridGrouping = function(rowNode) {
      var allChildrenCount = 0;
      rowNode.childrenAfterFilter.forEach(function(child) {
        if (child.group) {
          allChildrenCount += child.allChildrenCount;
        } else {
          allChildrenCount++;
        }
      });
      rowNode.setAllChildrenCount(allChildrenCount);
    };
    FilterService2.prototype.setAllChildrenCount = function(rowNode) {
      if (this.doingTreeData) {
        this.setAllChildrenCountTreeData(rowNode);
      } else {
        this.setAllChildrenCountGridGrouping(rowNode);
      }
    };
    FilterService2.prototype.doingTreeDataFiltering = function() {
      return this.gridOptionsWrapper.isTreeData() && !this.gridOptionsWrapper.isExcludeChildrenWhenTreeDataFiltering();
    };
    __decorate$2p([
      Autowired("filterManager")
    ], FilterService2.prototype, "filterManager", void 0);
    __decorate$2p([
      PostConstruct
    ], FilterService2.prototype, "postConstruct", null);
    FilterService2 = __decorate$2p([
      Bean("filterService")
    ], FilterService2);
    return FilterService2;
  }(BeanStub);
  var __extends$2J = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2q = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var ImmutableService = function(_super) {
    __extends$2J(ImmutableService2, _super);
    function ImmutableService2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ImmutableService2.prototype.postConstruct = function() {
      if (this.rowModel.getType() === Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {
        this.clientSideRowModel = this.rowModel;
      }
    };
    ImmutableService2.prototype.createTransactionForRowData = function(data) {
      if (_.missing(this.clientSideRowModel)) {
        console.error("AG Grid: ImmutableService only works with ClientSideRowModel");
        return;
      }
      var getRowNodeIdFunc = this.gridOptionsWrapper.getRowNodeIdFunc();
      if (!getRowNodeIdFunc || _.missing(getRowNodeIdFunc)) {
        console.error("AG Grid: ImmutableService requires getRowNodeId() callback to be implemented, your row data need IDs!");
        return;
      }
      var transaction = {
        remove: [],
        update: [],
        add: []
      };
      var existingNodesMap = this.clientSideRowModel.getCopyOfNodesMap();
      var suppressSortOrder = this.gridOptionsWrapper.isSuppressMaintainUnsortedOrder();
      var orderMap = suppressSortOrder ? null : {};
      if (_.exists(data)) {
        data.forEach(function(dataItem, index) {
          var id = getRowNodeIdFunc(dataItem);
          var existingNode = existingNodesMap[id];
          if (orderMap) {
            orderMap[id] = index;
          }
          if (existingNode) {
            var dataHasChanged = existingNode.data !== dataItem;
            if (dataHasChanged) {
              transaction.update.push(dataItem);
            }
            existingNodesMap[id] = void 0;
          } else {
            transaction.add.push(dataItem);
          }
        });
      }
      _.iterateObject(existingNodesMap, function(id, rowNode) {
        if (rowNode) {
          transaction.remove.push(rowNode.data);
        }
      });
      return [transaction, orderMap];
    };
    __decorate$2q([
      Autowired("rowModel")
    ], ImmutableService2.prototype, "rowModel", void 0);
    __decorate$2q([
      PostConstruct
    ], ImmutableService2.prototype, "postConstruct", null);
    ImmutableService2 = __decorate$2q([
      Bean("immutableService")
    ], ImmutableService2);
    return ImmutableService2;
  }(BeanStub);
  var ClientSideRowModelModule = {
    moduleName: exports2.ModuleNames.ClientSideRowModelModule,
    beans: [FilterStage, SortStage, FlattenStage, SortService, FilterService, ImmutableService],
    rowModels: { clientSide: ClientSideRowModel }
  };
  var __extends$2K = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2r = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var InfiniteBlock = function(_super) {
    __extends$2K(InfiniteBlock2, _super);
    function InfiniteBlock2(id, parentCache, params2) {
      var _this = _super.call(this, id) || this;
      _this.parentCache = parentCache;
      _this.params = params2;
      _this.startRow = id * params2.blockSize;
      _this.endRow = _this.startRow + params2.blockSize;
      return _this;
    }
    InfiniteBlock2.prototype.postConstruct = function() {
      this.createRowNodes();
    };
    InfiniteBlock2.prototype.getBlockStateJson = function() {
      return {
        id: "" + this.getId(),
        state: {
          blockNumber: this.getId(),
          startRow: this.getStartRow(),
          endRow: this.getEndRow(),
          pageStatus: this.getState()
        }
      };
    };
    InfiniteBlock2.prototype.setDataAndId = function(rowNode, data, index) {
      if (_.exists(data)) {
        rowNode.setDataAndId(data, index.toString());
      } else {
        rowNode.setDataAndId(void 0, void 0);
      }
    };
    InfiniteBlock2.prototype.loadFromDatasource = function() {
      var _this = this;
      var params2 = this.createLoadParams();
      if (_.missing(this.params.datasource.getRows)) {
        console.warn("AG Grid: datasource is missing getRows method");
        return;
      }
      window.setTimeout(function() {
        _this.params.datasource.getRows(params2);
      }, 0);
    };
    InfiniteBlock2.prototype.processServerFail = function() {
    };
    InfiniteBlock2.prototype.createLoadParams = function() {
      var params2 = {
        startRow: this.getStartRow(),
        endRow: this.getEndRow(),
        successCallback: this.pageLoaded.bind(this, this.getVersion()),
        failCallback: this.pageLoadFailed.bind(this, this.getVersion()),
        sortModel: this.params.sortModel,
        filterModel: this.params.filterModel,
        context: this.gridOptionsWrapper.getContext()
      };
      return params2;
    };
    InfiniteBlock2.prototype.forEachNode = function(callback, sequence, rowCount) {
      var _this = this;
      this.rowNodes.forEach(function(rowNode, index) {
        var rowIndex = _this.startRow + index;
        if (rowIndex < rowCount) {
          callback(rowNode, sequence.next());
        }
      });
    };
    InfiniteBlock2.prototype.getLastAccessed = function() {
      return this.lastAccessed;
    };
    InfiniteBlock2.prototype.getRow = function(rowIndex, dontTouchLastAccessed) {
      if (dontTouchLastAccessed === void 0) {
        dontTouchLastAccessed = false;
      }
      if (!dontTouchLastAccessed) {
        this.lastAccessed = this.params.lastAccessedSequence.next();
      }
      var localIndex = rowIndex - this.startRow;
      return this.rowNodes[localIndex];
    };
    InfiniteBlock2.prototype.getStartRow = function() {
      return this.startRow;
    };
    InfiniteBlock2.prototype.getEndRow = function() {
      return this.endRow;
    };
    InfiniteBlock2.prototype.createRowNodes = function() {
      this.rowNodes = [];
      for (var i2 = 0; i2 < this.params.blockSize; i2++) {
        var rowIndex = this.startRow + i2;
        var rowNode = new RowNode(this.beans);
        rowNode.setRowHeight(this.params.rowHeight);
        rowNode.uiLevel = 0;
        rowNode.setRowIndex(rowIndex);
        rowNode.setRowTop(this.params.rowHeight * rowIndex);
        this.rowNodes.push(rowNode);
      }
    };
    InfiniteBlock2.prototype.processServerResult = function(params2) {
      var _this = this;
      this.rowNodes.forEach(function(rowNode, index) {
        var data = params2.rowData ? params2.rowData[index] : void 0;
        _this.setDataAndId(rowNode, data, _this.startRow + index);
      });
      var finalRowCount = params2.rowCount != null && params2.rowCount >= 0 ? params2.rowCount : void 0;
      this.parentCache.pageLoaded(this, finalRowCount);
    };
    InfiniteBlock2.prototype.destroyRowNodes = function() {
      this.rowNodes.forEach(function(rowNode) {
        rowNode.clearRowTopAndRowIndex();
      });
    };
    __decorate$2r([
      Autowired("beans")
    ], InfiniteBlock2.prototype, "beans", void 0);
    __decorate$2r([
      PostConstruct
    ], InfiniteBlock2.prototype, "postConstruct", null);
    __decorate$2r([
      PreDestroy
    ], InfiniteBlock2.prototype, "destroyRowNodes", null);
    return InfiniteBlock2;
  }(RowNodeBlock);
  var __extends$2L = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2s = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var __param$a = function(paramIndex, decorator) {
    return function(target, key) {
      decorator(target, key, paramIndex);
    };
  };
  var InfiniteCache = function(_super) {
    __extends$2L(InfiniteCache2, _super);
    function InfiniteCache2(params2) {
      var _this = _super.call(this) || this;
      _this.lastRowIndexKnown = false;
      _this.blocks = {};
      _this.blockCount = 0;
      _this.rowCount = params2.initialRowCount;
      _this.params = params2;
      return _this;
    }
    InfiniteCache2.prototype.setBeans = function(loggerFactory) {
      this.logger = loggerFactory.create("InfiniteCache");
    };
    InfiniteCache2.prototype.getRow = function(rowIndex, dontCreatePage) {
      if (dontCreatePage === void 0) {
        dontCreatePage = false;
      }
      var blockId = Math.floor(rowIndex / this.params.blockSize);
      var block = this.blocks[blockId];
      if (!block) {
        if (dontCreatePage) {
          return void 0;
        }
        block = this.createBlock(blockId);
      }
      return block.getRow(rowIndex);
    };
    InfiniteCache2.prototype.createBlock = function(blockNumber) {
      var newBlock = this.createBean(new InfiniteBlock(blockNumber, this, this.params));
      this.blocks[newBlock.getId()] = newBlock;
      this.blockCount++;
      this.purgeBlocksIfNeeded(newBlock);
      this.params.rowNodeBlockLoader.addBlock(newBlock);
      return newBlock;
    };
    InfiniteCache2.prototype.refreshCache = function() {
      var nothingToRefresh = this.blockCount == 0;
      if (nothingToRefresh) {
        this.purgeCache();
        return;
      }
      this.getBlocksInOrder().forEach(function(block) {
        return block.setStateWaitingToLoad();
      });
      this.params.rowNodeBlockLoader.checkBlockToLoad();
    };
    InfiniteCache2.prototype.destroyAllBlocks = function() {
      var _this = this;
      this.getBlocksInOrder().forEach(function(block) {
        return _this.destroyBlock(block);
      });
    };
    InfiniteCache2.prototype.getRowCount = function() {
      return this.rowCount;
    };
    InfiniteCache2.prototype.isLastRowIndexKnown = function() {
      return this.lastRowIndexKnown;
    };
    InfiniteCache2.prototype.pageLoaded = function(block, lastRow) {
      if (!this.isAlive()) {
        return;
      }
      this.logger.log("onPageLoaded: page = " + block.getId() + ", lastRow = " + lastRow);
      this.checkRowCount(block, lastRow);
      this.onCacheUpdated();
    };
    InfiniteCache2.prototype.purgeBlocksIfNeeded = function(blockToExclude) {
      var _this = this;
      var blocksForPurging = this.getBlocksInOrder().filter(function(b) {
        return b != blockToExclude;
      });
      var lastAccessedComparator = function(a, b) {
        return b.getLastAccessed() - a.getLastAccessed();
      };
      blocksForPurging.sort(lastAccessedComparator);
      var maxBlocksProvided = this.params.maxBlocksInCache > 0;
      var blocksToKeep = maxBlocksProvided ? this.params.maxBlocksInCache - 1 : null;
      var emptyBlocksToKeep = InfiniteCache2.MAX_EMPTY_BLOCKS_TO_KEEP - 1;
      blocksForPurging.forEach(function(block, index) {
        var purgeBecauseBlockEmpty = block.getState() === InfiniteBlock.STATE_WAITING_TO_LOAD && index >= emptyBlocksToKeep;
        var purgeBecauseCacheFull = maxBlocksProvided ? index >= blocksToKeep : false;
        if (purgeBecauseBlockEmpty || purgeBecauseCacheFull) {
          if (_this.isBlockCurrentlyDisplayed(block)) {
            return;
          }
          if (_this.isBlockFocused(block)) {
            return;
          }
          _this.removeBlockFromCache(block);
        }
      });
    };
    InfiniteCache2.prototype.isBlockFocused = function(block) {
      var focusedCell = this.focusService.getFocusCellToUseAfterRefresh();
      if (!focusedCell) {
        return false;
      }
      if (focusedCell.rowPinned != null) {
        return false;
      }
      var blockIndexStart = block.getStartRow();
      var blockIndexEnd = block.getEndRow();
      var hasFocus = focusedCell.rowIndex >= blockIndexStart && focusedCell.rowIndex < blockIndexEnd;
      return hasFocus;
    };
    InfiniteCache2.prototype.isBlockCurrentlyDisplayed = function(block) {
      var startIndex = block.getStartRow();
      var endIndex = block.getEndRow() - 1;
      return this.rowRenderer.isRangeInRenderedViewport(startIndex, endIndex);
    };
    InfiniteCache2.prototype.removeBlockFromCache = function(blockToRemove) {
      if (!blockToRemove) {
        return;
      }
      this.destroyBlock(blockToRemove);
    };
    InfiniteCache2.prototype.checkRowCount = function(block, lastRow) {
      if (typeof lastRow === "number" && lastRow >= 0) {
        this.rowCount = lastRow;
        this.lastRowIndexKnown = true;
      } else if (!this.lastRowIndexKnown) {
        var lastRowIndex = (block.getId() + 1) * this.params.blockSize;
        var lastRowIndexPlusOverflow = lastRowIndex + this.params.overflowSize;
        if (this.rowCount < lastRowIndexPlusOverflow) {
          this.rowCount = lastRowIndexPlusOverflow;
        }
      }
    };
    InfiniteCache2.prototype.setRowCount = function(rowCount, lastRowIndexKnown) {
      this.rowCount = rowCount;
      if (_.exists(lastRowIndexKnown)) {
        this.lastRowIndexKnown = lastRowIndexKnown;
      }
      if (!this.lastRowIndexKnown) {
        if (this.rowCount % this.params.blockSize === 0) {
          this.rowCount++;
        }
      }
      this.onCacheUpdated();
    };
    InfiniteCache2.prototype.forEachNodeDeep = function(callback) {
      var _this = this;
      var sequence = new NumberSequence();
      this.getBlocksInOrder().forEach(function(block) {
        return block.forEachNode(callback, sequence, _this.rowCount);
      });
    };
    InfiniteCache2.prototype.getBlocksInOrder = function() {
      var blockComparator = function(a, b) {
        return a.getId() - b.getId();
      };
      var blocks = _.getAllValuesInObject(this.blocks).sort(blockComparator);
      return blocks;
    };
    InfiniteCache2.prototype.destroyBlock = function(block) {
      delete this.blocks[block.getId()];
      this.destroyBean(block);
      this.blockCount--;
      this.params.rowNodeBlockLoader.removeBlock(block);
    };
    InfiniteCache2.prototype.onCacheUpdated = function() {
      if (this.isAlive()) {
        this.destroyAllBlocksPastVirtualRowCount();
        var event_1 = {
          type: Events.EVENT_STORE_UPDATED
        };
        this.eventService.dispatchEvent(event_1);
      }
    };
    InfiniteCache2.prototype.destroyAllBlocksPastVirtualRowCount = function() {
      var _this = this;
      var blocksToDestroy = [];
      this.getBlocksInOrder().forEach(function(block) {
        var startRow = block.getId() * _this.params.blockSize;
        if (startRow >= _this.rowCount) {
          blocksToDestroy.push(block);
        }
      });
      if (blocksToDestroy.length > 0) {
        blocksToDestroy.forEach(function(block) {
          return _this.destroyBlock(block);
        });
      }
    };
    InfiniteCache2.prototype.purgeCache = function() {
      var _this = this;
      this.getBlocksInOrder().forEach(function(block) {
        return _this.removeBlockFromCache(block);
      });
      this.lastRowIndexKnown = false;
      if (this.rowCount === 0) {
        this.rowCount = this.params.initialRowCount;
      }
      this.onCacheUpdated();
    };
    InfiniteCache2.prototype.getRowNodesInRange = function(firstInRange, lastInRange) {
      var _this = this;
      var result = [];
      var lastBlockId = -1;
      var inActiveRange = false;
      var numberSequence = new NumberSequence();
      if (_.missing(firstInRange)) {
        inActiveRange = true;
      }
      var foundGapInSelection = false;
      this.getBlocksInOrder().forEach(function(block) {
        if (foundGapInSelection) {
          return;
        }
        if (inActiveRange && lastBlockId + 1 !== block.getId()) {
          foundGapInSelection = true;
          return;
        }
        lastBlockId = block.getId();
        block.forEachNode(function(rowNode) {
          var hitFirstOrLast = rowNode === firstInRange || rowNode === lastInRange;
          if (inActiveRange || hitFirstOrLast) {
            result.push(rowNode);
          }
          if (hitFirstOrLast) {
            inActiveRange = !inActiveRange;
          }
        }, numberSequence, _this.rowCount);
      });
      var invalidRange = foundGapInSelection || inActiveRange;
      return invalidRange ? [] : result;
    };
    InfiniteCache2.MAX_EMPTY_BLOCKS_TO_KEEP = 2;
    __decorate$2s([
      Autowired("rowRenderer")
    ], InfiniteCache2.prototype, "rowRenderer", void 0);
    __decorate$2s([
      Autowired("focusService")
    ], InfiniteCache2.prototype, "focusService", void 0);
    __decorate$2s([
      __param$a(0, Qualifier("loggerFactory"))
    ], InfiniteCache2.prototype, "setBeans", null);
    __decorate$2s([
      PreDestroy
    ], InfiniteCache2.prototype, "destroyAllBlocks", null);
    return InfiniteCache2;
  }(BeanStub);
  var __extends$2M = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2t = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var InfiniteRowModel = function(_super) {
    __extends$2M(InfiniteRowModel2, _super);
    function InfiniteRowModel2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    InfiniteRowModel2.prototype.getRowBounds = function(index) {
      return {
        rowHeight: this.rowHeight,
        rowTop: this.rowHeight * index
      };
    };
    InfiniteRowModel2.prototype.ensureRowHeightsValid = function(startPixel, endPixel, startLimitIndex, endLimitIndex) {
      return false;
    };
    InfiniteRowModel2.prototype.init = function() {
      var _this = this;
      if (!this.gridOptionsWrapper.isRowModelInfinite()) {
        return;
      }
      this.rowHeight = this.gridOptionsWrapper.getRowHeightAsNumber();
      this.addEventListeners();
      this.addDestroyFunc(function() {
        return _this.destroyCache();
      });
      this.verifyProps();
    };
    InfiniteRowModel2.prototype.verifyProps = function() {
      if (this.gridOptionsWrapper.getDefaultGroupOrderComparator() != null) {
        var message_1 = "AG Grid: defaultGroupOrderComparator cannot be used with Infinite Row Model. If using Infinite Row Model, then sorting is done on the server side, nothing to do with the client.";
        _.doOnce(function() {
          return console.warn(message_1);
        }, "IRM.DefaultGroupOrderComparator");
      }
    };
    InfiniteRowModel2.prototype.start = function() {
      this.setDatasource(this.gridOptionsWrapper.getDatasource());
    };
    InfiniteRowModel2.prototype.destroyDatasource = function() {
      if (this.datasource) {
        this.getContext().destroyBean(this.datasource);
        this.rowRenderer.datasourceChanged();
        this.datasource = null;
      }
    };
    InfiniteRowModel2.prototype.addEventListeners = function() {
      this.addManagedListener(this.eventService, Events.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_SORT_CHANGED, this.onSortChanged.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_NEW_COLUMNS_LOADED, this.onColumnEverything.bind(this));
      this.addManagedListener(this.eventService, Events.EVENT_STORE_UPDATED, this.onCacheUpdated.bind(this));
    };
    InfiniteRowModel2.prototype.onFilterChanged = function() {
      this.reset();
    };
    InfiniteRowModel2.prototype.onSortChanged = function() {
      this.reset();
    };
    InfiniteRowModel2.prototype.onColumnEverything = function() {
      var resetRequired;
      if (this.cacheParams) {
        resetRequired = this.isSortModelDifferent();
      } else {
        resetRequired = true;
      }
      if (resetRequired) {
        this.reset();
      }
    };
    InfiniteRowModel2.prototype.isSortModelDifferent = function() {
      return !_.jsonEquals(this.cacheParams.sortModel, this.sortController.getSortModel());
    };
    InfiniteRowModel2.prototype.getType = function() {
      return Constants.ROW_MODEL_TYPE_INFINITE;
    };
    InfiniteRowModel2.prototype.setDatasource = function(datasource) {
      this.destroyDatasource();
      this.datasource = datasource;
      if (datasource) {
        this.reset();
      }
    };
    InfiniteRowModel2.prototype.isEmpty = function() {
      return !this.infiniteCache;
    };
    InfiniteRowModel2.prototype.isRowsToRender = function() {
      return !!this.infiniteCache;
    };
    InfiniteRowModel2.prototype.getNodesInRangeForSelection = function(firstInRange, lastInRange) {
      return this.infiniteCache ? this.infiniteCache.getRowNodesInRange(firstInRange, lastInRange) : [];
    };
    InfiniteRowModel2.prototype.reset = function() {
      if (!this.datasource) {
        return;
      }
      var userGeneratingIds = _.exists(this.gridOptionsWrapper.getRowNodeIdFunc());
      if (!userGeneratingIds) {
        this.selectionService.reset();
      }
      this.resetCache();
      var event = this.createModelUpdatedEvent();
      this.eventService.dispatchEvent(event);
    };
    InfiniteRowModel2.prototype.createModelUpdatedEvent = function() {
      return {
        type: Events.EVENT_MODEL_UPDATED,
        api: this.gridApi,
        columnApi: this.columnApi,
        newPage: false,
        newData: false,
        keepRenderedRows: true,
        animate: false
      };
    };
    InfiniteRowModel2.prototype.resetCache = function() {
      this.destroyCache();
      var maxConcurrentRequests = this.gridOptionsWrapper.getMaxConcurrentDatasourceRequests();
      this.cacheParams = {
        datasource: this.datasource,
        filterModel: this.filterManager.getFilterModel(),
        sortModel: this.sortController.getSortModel(),
        rowNodeBlockLoader: this.rowNodeBlockLoader,
        maxConcurrentRequests: this.defaultIfInvalid(maxConcurrentRequests, 2),
        initialRowCount: this.defaultIfInvalid(this.gridOptionsWrapper.getInfiniteInitialRowCount(), 1),
        maxBlocksInCache: this.gridOptionsWrapper.getMaxBlocksInCache(),
        rowHeight: this.gridOptionsWrapper.getRowHeightAsNumber(),
        overflowSize: this.defaultIfInvalid(this.gridOptionsWrapper.getCacheOverflowSize(), 1),
        blockSize: this.defaultIfInvalid(this.gridOptionsWrapper.getCacheBlockSize(), 100),
        lastAccessedSequence: new NumberSequence()
      };
      this.infiniteCache = this.createBean(new InfiniteCache(this.cacheParams));
    };
    InfiniteRowModel2.prototype.defaultIfInvalid = function(value, defaultValue) {
      return value > 0 ? value : defaultValue;
    };
    InfiniteRowModel2.prototype.destroyCache = function() {
      if (this.infiniteCache) {
        this.infiniteCache = this.destroyBean(this.infiniteCache);
      }
    };
    InfiniteRowModel2.prototype.onCacheUpdated = function() {
      var event = this.createModelUpdatedEvent();
      this.eventService.dispatchEvent(event);
    };
    InfiniteRowModel2.prototype.getRow = function(rowIndex) {
      if (!this.infiniteCache) {
        return void 0;
      }
      if (rowIndex >= this.infiniteCache.getRowCount()) {
        return void 0;
      }
      return this.infiniteCache.getRow(rowIndex);
    };
    InfiniteRowModel2.prototype.getRowNode = function(id) {
      var result = void 0;
      this.forEachNode(function(rowNode) {
        if (rowNode.id === id) {
          result = rowNode;
        }
      });
      return result;
    };
    InfiniteRowModel2.prototype.forEachNode = function(callback) {
      if (this.infiniteCache) {
        this.infiniteCache.forEachNodeDeep(callback);
      }
    };
    InfiniteRowModel2.prototype.getTopLevelRowCount = function() {
      return this.getRowCount();
    };
    InfiniteRowModel2.prototype.getTopLevelRowDisplayedIndex = function(topLevelIndex) {
      return topLevelIndex;
    };
    InfiniteRowModel2.prototype.getRowIndexAtPixel = function(pixel) {
      if (this.rowHeight !== 0) {
        var rowIndexForPixel = Math.floor(pixel / this.rowHeight);
        var lastRowIndex = this.getRowCount() - 1;
        if (rowIndexForPixel > lastRowIndex) {
          return lastRowIndex;
        } else {
          return rowIndexForPixel;
        }
      } else {
        return 0;
      }
    };
    InfiniteRowModel2.prototype.getRowCount = function() {
      return this.infiniteCache ? this.infiniteCache.getRowCount() : 0;
    };
    InfiniteRowModel2.prototype.isRowPresent = function(rowNode) {
      var foundRowNode = this.getRowNode(rowNode.id);
      return !!foundRowNode;
    };
    InfiniteRowModel2.prototype.refreshCache = function() {
      if (this.infiniteCache) {
        this.infiniteCache.refreshCache();
      }
    };
    InfiniteRowModel2.prototype.purgeCache = function() {
      if (this.infiniteCache) {
        this.infiniteCache.purgeCache();
      }
    };
    InfiniteRowModel2.prototype.isLastRowIndexKnown = function() {
      if (this.infiniteCache) {
        return this.infiniteCache.isLastRowIndexKnown();
      } else {
        return false;
      }
    };
    InfiniteRowModel2.prototype.setRowCount = function(rowCount, lastRowIndexKnown) {
      if (this.infiniteCache) {
        this.infiniteCache.setRowCount(rowCount, lastRowIndexKnown);
      }
    };
    __decorate$2t([
      Autowired("filterManager")
    ], InfiniteRowModel2.prototype, "filterManager", void 0);
    __decorate$2t([
      Autowired("sortController")
    ], InfiniteRowModel2.prototype, "sortController", void 0);
    __decorate$2t([
      Autowired("selectionService")
    ], InfiniteRowModel2.prototype, "selectionService", void 0);
    __decorate$2t([
      Autowired("gridApi")
    ], InfiniteRowModel2.prototype, "gridApi", void 0);
    __decorate$2t([
      Autowired("columnApi")
    ], InfiniteRowModel2.prototype, "columnApi", void 0);
    __decorate$2t([
      Autowired("rowRenderer")
    ], InfiniteRowModel2.prototype, "rowRenderer", void 0);
    __decorate$2t([
      Autowired("rowNodeBlockLoader")
    ], InfiniteRowModel2.prototype, "rowNodeBlockLoader", void 0);
    __decorate$2t([
      PostConstruct
    ], InfiniteRowModel2.prototype, "init", null);
    __decorate$2t([
      PreDestroy
    ], InfiniteRowModel2.prototype, "destroyDatasource", null);
    InfiniteRowModel2 = __decorate$2t([
      Bean("rowModel")
    ], InfiniteRowModel2);
    return InfiniteRowModel2;
  }(BeanStub);
  var InfiniteRowModelModule = {
    moduleName: exports2.ModuleNames.InfiniteRowModelModule,
    rowModels: { infinite: InfiniteRowModel }
  };
  var BaseCreator = function() {
    function BaseCreator2() {
    }
    BaseCreator2.prototype.setBeans = function(beans) {
      this.beans = beans;
    };
    BaseCreator2.prototype.getFileName = function(fileName) {
      var extension = this.getDefaultFileExtension();
      if (fileName == null || !fileName.length) {
        fileName = this.getDefaultFileName();
      }
      return fileName.indexOf(".") === -1 ? fileName + "." + extension : fileName;
    };
    BaseCreator2.prototype.getMergedParamsAndData = function(userParams) {
      var mergedParams = this.mergeDefaultParams(userParams);
      var data = this.beans.gridSerializer.serialize(this.createSerializingSession(mergedParams), mergedParams);
      return { mergedParams, data };
    };
    BaseCreator2.prototype.mergeDefaultParams = function(userParams) {
      var baseParams = this.getDefaultExportParams();
      var params2 = {};
      _.assign(params2, baseParams);
      _.assign(params2, userParams);
      return params2;
    };
    return BaseCreator2;
  }();
  var BaseGridSerializingSession = function() {
    function BaseGridSerializingSession2(config2) {
      this.groupColumns = [];
      var columnModel = config2.columnModel, valueService = config2.valueService, gridOptionsWrapper = config2.gridOptionsWrapper, processCellCallback = config2.processCellCallback, processHeaderCallback = config2.processHeaderCallback, processGroupHeaderCallback = config2.processGroupHeaderCallback, processRowGroupCallback = config2.processRowGroupCallback;
      this.columnModel = columnModel;
      this.valueService = valueService;
      this.gridOptionsWrapper = gridOptionsWrapper;
      this.processCellCallback = processCellCallback;
      this.processHeaderCallback = processHeaderCallback;
      this.processGroupHeaderCallback = processGroupHeaderCallback;
      this.processRowGroupCallback = processRowGroupCallback;
    }
    BaseGridSerializingSession2.prototype.prepare = function(columnsToExport) {
      this.groupColumns = _.filter(columnsToExport, function(col) {
        return !!col.getColDef().showRowGroup;
      });
    };
    BaseGridSerializingSession2.prototype.extractHeaderValue = function(column) {
      var value = this.getHeaderName(this.processHeaderCallback, column);
      return value != null ? value : "";
    };
    BaseGridSerializingSession2.prototype.extractRowCellValue = function(column, index, accumulatedRowIndex, type, node) {
      var groupIndex = this.gridOptionsWrapper.isGroupMultiAutoColumn() ? node.rowGroupIndex : 0;
      var renderGroupSummaryCell = node && node.group && (index === groupIndex && this.groupColumns.indexOf(column) !== -1 || index === 0 && this.gridOptionsWrapper.isGroupUseEntireRow(this.columnModel.isPivotMode()));
      var valueForCell;
      if (renderGroupSummaryCell) {
        valueForCell = this.createValueForGroupNode(node);
      } else {
        valueForCell = this.valueService.getValue(column, node);
      }
      var value = this.processCell(accumulatedRowIndex, node, column, valueForCell, this.processCellCallback, type);
      return value != null ? value : "";
    };
    BaseGridSerializingSession2.prototype.getHeaderName = function(callback, column) {
      if (callback) {
        return callback({
          column,
          api: this.gridOptionsWrapper.getApi(),
          columnApi: this.gridOptionsWrapper.getColumnApi(),
          context: this.gridOptionsWrapper.getContext()
        });
      }
      return this.columnModel.getDisplayNameForColumn(column, "csv", true);
    };
    BaseGridSerializingSession2.prototype.createValueForGroupNode = function(node) {
      if (this.processRowGroupCallback) {
        return this.processRowGroupCallback({
          node,
          api: this.gridOptionsWrapper.getApi(),
          columnApi: this.gridOptionsWrapper.getColumnApi(),
          context: this.gridOptionsWrapper.getContext()
        });
      }
      var keys3 = [node.key];
      if (!this.gridOptionsWrapper.isGroupMultiAutoColumn()) {
        while (node.parent) {
          node = node.parent;
          keys3.push(node.key);
        }
      }
      return keys3.reverse().join(" -> ");
    };
    BaseGridSerializingSession2.prototype.processCell = function(accumulatedRowIndex, rowNode, column, value, processCellCallback, type) {
      if (processCellCallback) {
        return processCellCallback({
          accumulatedRowIndex,
          column,
          node: rowNode,
          value,
          api: this.gridOptionsWrapper.getApi(),
          columnApi: this.gridOptionsWrapper.getColumnApi(),
          context: this.gridOptionsWrapper.getContext(),
          type
        });
      }
      return value != null ? value : "";
    };
    return BaseGridSerializingSession2;
  }();
  var Downloader = function() {
    function Downloader2() {
    }
    Downloader2.download = function(fileName, content) {
      var win = document.defaultView || window;
      if (!win) {
        console.warn("AG Grid: There is no `window` associated with the current `document`");
        return;
      }
      if (win.navigator.msSaveOrOpenBlob) {
        win.navigator.msSaveOrOpenBlob(content, fileName);
      } else {
        var element2 = document.createElement("a");
        var url_1 = win.URL.createObjectURL(content);
        element2.setAttribute("href", url_1);
        element2.setAttribute("download", fileName);
        element2.style.display = "none";
        document.body.appendChild(element2);
        element2.dispatchEvent(new MouseEvent("click", {
          bubbles: false,
          cancelable: true,
          view: win
        }));
        document.body.removeChild(element2);
        win.setTimeout(function() {
          win.URL.revokeObjectURL(url_1);
        }, 0);
      }
    };
    return Downloader2;
  }();
  var __extends$2N = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var LINE_SEPARATOR = "\r\n";
  var CsvSerializingSession = function(_super) {
    __extends$2N(CsvSerializingSession2, _super);
    function CsvSerializingSession2(config2) {
      var _this = _super.call(this, config2) || this;
      _this.isFirstLine = true;
      _this.result = "";
      var suppressQuotes = config2.suppressQuotes, columnSeparator = config2.columnSeparator;
      _this.suppressQuotes = suppressQuotes;
      _this.columnSeparator = columnSeparator;
      return _this;
    }
    CsvSerializingSession2.prototype.addCustomContent = function(content) {
      var _this = this;
      if (!content) {
        return;
      }
      if (typeof content === "string") {
        if (!/^\s*\n/.test(content)) {
          this.beginNewLine();
        }
        content = content.replace(/\r?\n/g, LINE_SEPARATOR);
        this.result += content;
      } else {
        content.forEach(function(row) {
          _this.beginNewLine();
          row.forEach(function(cell, index) {
            if (index !== 0) {
              _this.result += _this.columnSeparator;
            }
            _this.result += _this.putInQuotes(cell.data.value || "");
            if (cell.mergeAcross) {
              _this.appendEmptyCells(cell.mergeAcross);
            }
          });
        });
      }
    };
    CsvSerializingSession2.prototype.onNewHeaderGroupingRow = function() {
      this.beginNewLine();
      return {
        onColumn: this.onNewHeaderGroupingRowColumn.bind(this)
      };
    };
    CsvSerializingSession2.prototype.onNewHeaderGroupingRowColumn = function(header, index, span) {
      if (index != 0) {
        this.result += this.columnSeparator;
      }
      this.result += this.putInQuotes(header);
      this.appendEmptyCells(span);
    };
    CsvSerializingSession2.prototype.appendEmptyCells = function(count) {
      for (var i2 = 1; i2 <= count; i2++) {
        this.result += this.columnSeparator + this.putInQuotes("");
      }
    };
    CsvSerializingSession2.prototype.onNewHeaderRow = function() {
      this.beginNewLine();
      return {
        onColumn: this.onNewHeaderRowColumn.bind(this)
      };
    };
    CsvSerializingSession2.prototype.onNewHeaderRowColumn = function(column, index) {
      if (index != 0) {
        this.result += this.columnSeparator;
      }
      this.result += this.putInQuotes(this.extractHeaderValue(column));
    };
    CsvSerializingSession2.prototype.onNewBodyRow = function() {
      this.beginNewLine();
      return {
        onColumn: this.onNewBodyRowColumn.bind(this)
      };
    };
    CsvSerializingSession2.prototype.onNewBodyRowColumn = function(column, index, node) {
      if (index != 0) {
        this.result += this.columnSeparator;
      }
      this.result += this.putInQuotes(this.extractRowCellValue(column, index, index, Constants.EXPORT_TYPE_CSV, node));
    };
    CsvSerializingSession2.prototype.putInQuotes = function(value) {
      if (this.suppressQuotes) {
        return value;
      }
      if (value === null || value === void 0) {
        return '""';
      }
      var stringValue;
      if (typeof value === "string") {
        stringValue = value;
      } else if (typeof value.toString === "function") {
        stringValue = value.toString();
      } else {
        console.warn("unknown value type during csv conversion");
        stringValue = "";
      }
      var valueEscaped = stringValue.replace(/"/g, '""');
      return '"' + valueEscaped + '"';
    };
    CsvSerializingSession2.prototype.parse = function() {
      return this.result;
    };
    CsvSerializingSession2.prototype.beginNewLine = function() {
      if (!this.isFirstLine) {
        this.result += LINE_SEPARATOR;
      }
      this.isFirstLine = false;
    };
    return CsvSerializingSession2;
  }(BaseGridSerializingSession);
  var __extends$2O = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2u = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  var CsvCreator = function(_super) {
    __extends$2O(CsvCreator2, _super);
    function CsvCreator2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    CsvCreator2.prototype.postConstruct = function() {
      this.setBeans({
        gridSerializer: this.gridSerializer,
        gridOptionsWrapper: this.gridOptionsWrapper
      });
    };
    CsvCreator2.prototype.getDefaultExportParams = function() {
      return this.gridOptionsWrapper.getDefaultExportParams("csv");
    };
    CsvCreator2.prototype.export = function(userParams) {
      if (this.isExportSuppressed()) {
        console.warn("ag-grid: Export cancelled. Export is not allowed as per your configuration.");
        return "";
      }
      var _a = this.getMergedParamsAndData(userParams), mergedParams = _a.mergedParams, data = _a.data;
      var packagedFile = new Blob(["\uFEFF", data], {
        type: window.navigator.msSaveOrOpenBlob ? this.getMimeType() : "octet/stream"
      });
      Downloader.download(this.getFileName(mergedParams.fileName), packagedFile);
      return data;
    };
    CsvCreator2.prototype.exportDataAsCsv = function(params2) {
      return this.export(params2);
    };
    CsvCreator2.prototype.getDataAsCsv = function(params2) {
      return this.getMergedParamsAndData(params2).data;
    };
    CsvCreator2.prototype.getMimeType = function() {
      return "text/csv;charset=utf-8;";
    };
    CsvCreator2.prototype.getDefaultFileName = function() {
      return "export.csv";
    };
    CsvCreator2.prototype.getDefaultFileExtension = function() {
      return "csv";
    };
    CsvCreator2.prototype.createSerializingSession = function(params2) {
      var _a = this, columnModel = _a.columnModel, valueService = _a.valueService, gridOptionsWrapper = _a.gridOptionsWrapper;
      var _b = params2, processCellCallback = _b.processCellCallback, processHeaderCallback = _b.processHeaderCallback, processGroupHeaderCallback = _b.processGroupHeaderCallback, processRowGroupCallback = _b.processRowGroupCallback, suppressQuotes = _b.suppressQuotes, columnSeparator = _b.columnSeparator;
      return new CsvSerializingSession({
        columnModel,
        valueService,
        gridOptionsWrapper,
        processCellCallback: processCellCallback || void 0,
        processHeaderCallback: processHeaderCallback || void 0,
        processGroupHeaderCallback: processGroupHeaderCallback || void 0,
        processRowGroupCallback: processRowGroupCallback || void 0,
        suppressQuotes: suppressQuotes || false,
        columnSeparator: columnSeparator || ","
      });
    };
    CsvCreator2.prototype.isExportSuppressed = function() {
      return this.gridOptionsWrapper.isSuppressCsvExport();
    };
    __decorate$2u([
      Autowired("columnModel")
    ], CsvCreator2.prototype, "columnModel", void 0);
    __decorate$2u([
      Autowired("valueService")
    ], CsvCreator2.prototype, "valueService", void 0);
    __decorate$2u([
      Autowired("gridSerializer")
    ], CsvCreator2.prototype, "gridSerializer", void 0);
    __decorate$2u([
      Autowired("gridOptionsWrapper")
    ], CsvCreator2.prototype, "gridOptionsWrapper", void 0);
    __decorate$2u([
      PostConstruct
    ], CsvCreator2.prototype, "postConstruct", null);
    CsvCreator2 = __decorate$2u([
      Bean("csvCreator")
    ], CsvCreator2);
    return CsvCreator2;
  }(BaseCreator);
  var __extends$2P = function() {
    var extendStatics = function(d, b) {
      extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
        d2.__proto__ = b2;
      } || function(d2, b2) {
        for (var p2 in b2)
          if (b2.hasOwnProperty(p2))
            d2[p2] = b2[p2];
      };
      return extendStatics(d, b);
    };
    return function(d, b) {
      extendStatics(d, b);
      function __() {
        this.constructor = d;
      }
      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
  }();
  var __decorate$2v = function(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
      r = Reflect.decorate(decorators, target, key, desc);
    else
      for (var i2 = decorators.length - 1; i2 >= 0; i2--)
        if (d = decorators[i2])
          r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
  };
  (function(RowType2) {
    RowType2[RowType2["HEADER_GROUPING"] = 0] = "HEADER_GROUPING";
    RowType2[RowType2["HEADER"] = 1] = "HEADER";
    RowType2[RowType2["BODY"] = 2] = "BODY";
  })(exports2.RowType || (exports2.RowType = {}));
  var GridSerializer = function(_super) {
    __extends$2P(GridSerializer2, _super);
    function GridSerializer2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    GridSerializer2.prototype.serialize = function(gridSerializingSession, params2) {
      if (params2 === void 0) {
        params2 = {};
      }
      var columnsToExport = this.getColumnsToExport(params2.allColumns, params2.columnKeys);
      var serializeChain = _.compose(this.prepareSession(columnsToExport), this.prependContent(params2), this.exportColumnGroups(params2, columnsToExport), this.exportHeaders(params2, columnsToExport), this.processPinnedTopRows(params2, columnsToExport), this.processRows(params2, columnsToExport), this.processPinnedBottomRows(params2, columnsToExport), this.appendContent(params2));
      return serializeChain(gridSerializingSession).parse();
    };
    GridSerializer2.prototype.processRow = function(gridSerializingSession, params2, columnsToExport, node) {
      var rowSkipper = params2.shouldRowBeSkipped || function() {
        return false;
      };
      var gridOptionsWrapper = this.gridOptionsWrapper;
      var context = gridOptionsWrapper.getContext();
      var api2 = gridOptionsWrapper.getApi();
      var columnApi = gridOptionsWrapper.getColumnApi();
      var skipSingleChildrenGroup = gridOptionsWrapper.isGroupRemoveSingleChildren();
      var hideOpenParents = gridOptionsWrapper.isGroupHideOpenParents();
      var skipLowestSingleChildrenGroup = gridOptionsWrapper.isGroupRemoveLowestSingleChildren();
      var isLeafNode = this.columnModel.isPivotMode() ? node.leafGroup : !node.group;
      var skipRowGroups = params2.skipGroups || params2.skipRowGroups;
      var shouldSkipLowestGroup = skipLowestSingleChildrenGroup && node.leafGroup;
      var shouldSkipCurrentGroup = node.allChildrenCount === 1 && (skipSingleChildrenGroup || shouldSkipLowestGroup);
      if (skipRowGroups && params2.skipGroups) {
        _.doOnce(function() {
          return console.warn("AG Grid: Since v25.2 `skipGroups` has been renamed to `skipRowGroups`.");
        }, "gridSerializer-skipGroups");
      }
      if (!isLeafNode && (params2.skipRowGroups || shouldSkipCurrentGroup || hideOpenParents) || params2.onlySelected && !node.isSelected() || params2.skipPinnedTop && node.rowPinned === "top" || params2.skipPinnedBottom && node.rowPinned === "bottom") {
        return;
      }
      var nodeIsRootNode = node.level === -1;
      if (nodeIsRootNode && !node.leafGroup) {
        return;
      }
      var shouldRowBeSkipped = rowSkipper({ node, api: api2, context });
      if (shouldRowBeSkipped) {
        return;
      }
      var rowAccumulator = gridSerializingSession.onNewBodyRow();
      columnsToExport.forEach(function(column, index) {
        rowAccumulator.onColumn(column, index, node);
      });
      if (params2.getCustomContentBelowRow) {
        var content = params2.getCustomContentBelowRow({ node, api: api2, columnApi, context });
        if (content) {
          gridSerializingSession.addCustomContent(content);
        }
      }
    };
    GridSerializer2.prototype.appendContent = function(params2) {
      return function(gridSerializingSession) {
        var appendContent = params2.customFooter || params2.appendContent;
        if (appendContent) {
          if (params2.customFooter) {
            _.doOnce(function() {
              return console.warn("AG Grid: Since version 25.2.0 the `customFooter` param has been deprecated. Use `appendContent` instead.");
            }, "gridSerializer-customFooter");
          }
          gridSerializingSession.addCustomContent(appendContent);
        }
        return gridSerializingSession;
      };
    };
    GridSerializer2.prototype.prependContent = function(params2) {
      return function(gridSerializingSession) {
        var prependContent = params2.customHeader || params2.prependContent;
        if (prependContent) {
          if (params2.customHeader) {
            _.doOnce(function() {
              return console.warn("AG Grid: Since version 25.2.0 the `customHeader` param has been deprecated. Use `prependContent` instead.");
            }, "gridSerializer-customHeader");
          }
          gridSerializingSession.addCustomContent(prependContent);
        }
        return gridSerializingSession;
      };
    };
    GridSerializer2.prototype.prepareSession = function(columnsToExport) {
      return function(gridSerializingSession) {
        gridSerializingSession.prepare(columnsToExport);
        return gridSerializingSession;
      };
    };
    GridSerializer2.prototype.exportColumnGroups = function(params2, columnsToExport) {
      var _this = this;
      return function(gridSerializingSession) {
        if (!params2.skipColumnGroupHeaders) {
          var groupInstanceIdCreator = new GroupInstanceIdCreator();
          var displayedGroups = _this.displayedGroupCreator.createDisplayedGroups(columnsToExport, _this.columnModel.getGridBalancedTree(), groupInstanceIdCreator, null);
          _this.recursivelyAddHeaderGroups(displayedGroups, gridSerializingSession, params2.processGroupHeaderCallback);
        } else if (params2.columnGroups) {
          _.doOnce(function() {
            return console.warn("AG Grid: Since v25.2 the `columnGroups` param has deprecated, and groups are exported by default.");
          }, "gridSerializer-columnGroups");
        }
        return gridSerializingSession;
      };
    };
    GridSerializer2.prototype.exportHeaders = function(params2, columnsToExport) {
      return function(gridSerializingSession) {
        if (!params2.skipHeader && !params2.skipColumnHeaders) {
          var gridRowIterator_1 = gridSerializingSession.onNewHeaderRow();
          columnsToExport.forEach(function(column, index) {
            gridRowIterator_1.onColumn(column, index, void 0);
          });
        } else if (params2.skipHeader) {
          _.doOnce(function() {
            return console.warn("AG Grid: Since v25.2 the `skipHeader` param has been renamed to `skipColumnHeaders`.");
          }, "gridSerializer-skipHeader");
        }
        return gridSerializingSession;
      };
    };
    GridSerializer2.prototype.processPinnedTopRows = function(params2, columnsToExport) {
      var _this = this;
      return function(gridSerializingSession) {
        var processRow = _this.processRow.bind(_this, gridSerializingSession, params2, columnsToExport);
        _this.pinnedRowModel.forEachPinnedTopRow(processRow);
        return gridSerializingSession;
      };
    };
    GridSerializer2.prototype.processRows = function(params2, columnsToExport) {
      var _this = this;
      return function(gridSerializingSession) {
        var rowModel = _this.rowModel;
        var rowModelType = rowModel.getType();
        var usingCsrm = rowModelType === Constants.ROW_MODEL_TYPE_CLIENT_SIDE;
        var usingSsrm = rowModelType === Constants.ROW_MODEL_TYPE_SERVER_SIDE;
        var onlySelectedNonStandardModel = !usingCsrm && params2.onlySelected;
        var processRow = _this.processRow.bind(_this, gridSerializingSession, params2, columnsToExport);
        if (_this.columnModel.isPivotMode()) {
          if (usingCsrm) {
            rowModel.forEachPivotNode(processRow);
          } else {
            rowModel.forEachNode(processRow);
          }
        } else {
          if (params2.onlySelectedAllPages || onlySelectedNonStandardModel) {
            var selectedNodes = _this.selectionService.getSelectedNodes();
            selectedNodes.forEach(processRow);
          } else {
            if (usingCsrm) {
              rowModel.forEachNodeAfterFilterAndSort(processRow);
            } else if (usingSsrm) {
              rowModel.forEachNodeAfterFilterAndSort(processRow);
            } else {
              rowModel.forEachNode(processRow);
            }
          }
        }
        return gridSerializingSession;
      };
    };
    GridSerializer2.prototype.processPinnedBottomRows = function(params2, columnsToExport) {
      var _this = this;
      return function(gridSerializingSession) {
        var processRow = _this.processRow.bind(_this, gridSerializingSession, params2, columnsToExport);
        _this.pinnedRowModel.forEachPinnedBottomRow(processRow);
        return gridSerializingSession;
      };
    };
    GridSerializer2.prototype.getColumnsToExport = function(allColumns, columnKeys) {
      if (allColumns === void 0) {
        allColumns = false;
      }
      var isPivotMode = this.columnModel.isPivotMode();
      if (columnKeys && columnKeys.length) {
        return this.columnModel.getGridColumns(columnKeys);
      }
      if (allColumns && !isPivotMode) {
        var columns = this.gridOptionsWrapper.isTreeData() ? this.columnModel.getGridColumns([Constants.GROUP_AUTO_COLUMN_ID]) : [];
        return columns.concat(this.columnModel.getAllPrimaryColumns() || []);
      }
      return this.columnModel.getAllDisplayedColumns();
    };
    GridSerializer2.prototype.recursivelyAddHeaderGroups = function(displayedGroups, gridSerializingSession, processGroupHeaderCallback) {
      var directChildrenHeaderGroups = [];
      displayedGroups.forEach(function(columnGroupChild) {
        var columnGroup = columnGroupChild;
        if (!columnGroup.getChildren) {
          return;
        }
        columnGroup.getChildren().forEach(function(it) {
          return directChildrenHeaderGroups.push(it);
        });
      });
      if (displayedGroups.length > 0 && displayedGroups[0] instanceof ColumnGroup) {
        this.doAddHeaderHeader(gridSerializingSession, displayedGroups, processGroupHeaderCallback);
      }
      if (directChildrenHeaderGroups && directChildrenHeaderGroups.length > 0) {
        this.recursivelyAddHeaderGroups(directChildrenHeaderGroups, gridSerializingSession, processGroupHeaderCallback);
      }
    };
    GridSerializer2.prototype.doAddHeaderHeader = function(gridSerializingSession, displayedGroups, processGroupHeaderCallback) {
      var _this = this;
      var gridRowIterator = gridSerializingSession.onNewHeaderGroupingRow();
      var columnIndex = 0;
      displayedGroups.forEach(function(columnGroupChild) {
        var columnGroup = columnGroupChild;
        var name;
        if (processGroupHeaderCallback) {
          name = processGroupHeaderCallback({
            columnGroup,
            api: _this.gridOptionsWrapper.getApi(),
            columnApi: _this.gridOptionsWrapper.getColumnApi(),
            context: _this.gridOptionsWrapper.getContext()
          });
        } else {
          name = _this.columnModel.getDisplayNameForColumnGroup(columnGroup, "header");
        }
        gridRowIterator.onColumn(name || "", columnIndex++, columnGroup.getLeafColumns().length - 1);
      });
    };
    __decorate$2v([
      Autowired("displayedGroupCreator")
    ], GridSerializer2.prototype, "displayedGroupCreator", void 0);
    __decorate$2v([
      Autowired("columnModel")
    ], GridSerializer2.prototype, "columnModel", void 0);
    __decorate$2v([
      Autowired("rowModel")
    ], GridSerializer2.prototype, "rowModel", void 0);
    __decorate$2v([
      Autowired("pinnedRowModel")
    ], GridSerializer2.prototype, "pinnedRowModel", void 0);
    __decorate$2v([
      Autowired("selectionService")
    ], GridSerializer2.prototype, "selectionService", void 0);
    GridSerializer2 = __decorate$2v([
      Bean("gridSerializer")
    ], GridSerializer2);
    return GridSerializer2;
  }(BeanStub);
  var CsvExportModule = {
    moduleName: exports2.ModuleNames.CsvExportModule,
    beans: [CsvCreator, GridSerializer]
  };
  var LINE_SEPARATOR$1 = "\r\n";
  var XmlFactory = function() {
    function XmlFactory2() {
    }
    XmlFactory2.createHeader = function(headerElement) {
      if (headerElement === void 0) {
        headerElement = {};
      }
      var headerStart = "<?";
      var headerEnd = "?>";
      var keys3 = ["version"];
      if (!headerElement.version) {
        headerElement.version = "1.0";
      }
      if (headerElement.encoding) {
        keys3.push("encoding");
      }
      if (headerElement.standalone) {
        keys3.push("standalone");
      }
      var att = keys3.map(function(key) {
        return key + '="' + headerElement[key] + '"';
      }).join(" ");
      return headerStart + "xml " + att + " " + headerEnd;
    };
    XmlFactory2.createXml = function(xmlElement, booleanTransformer) {
      var _this = this;
      var props = "";
      if (xmlElement.properties) {
        if (xmlElement.properties.prefixedAttributes) {
          xmlElement.properties.prefixedAttributes.forEach(function(prefixedSet) {
            Object.keys(prefixedSet.map).forEach(function(key) {
              props += _this.returnAttributeIfPopulated(prefixedSet.prefix + key, prefixedSet.map[key], booleanTransformer);
            });
          });
        }
        if (xmlElement.properties.rawMap) {
          Object.keys(xmlElement.properties.rawMap).forEach(function(key) {
            props += _this.returnAttributeIfPopulated(key, xmlElement.properties.rawMap[key], booleanTransformer);
          });
        }
      }
      var result = "<" + xmlElement.name + props;
      if (!xmlElement.children && xmlElement.textNode == null) {
        return result + "/>" + LINE_SEPARATOR$1;
      }
      if (xmlElement.textNode != null) {
        return result + ">" + xmlElement.textNode + "</" + xmlElement.name + ">" + LINE_SEPARATOR$1;
      }
      result += ">" + LINE_SEPARATOR$1;
      if (xmlElement.children) {
        xmlElement.children.forEach(function(it) {
          result += _this.createXml(it, booleanTransformer);
        });
      }
      return result + "</" + xmlElement.name + ">" + LINE_SEPARATOR$1;
    };
    XmlFactory2.returnAttributeIfPopulated = function(key, value, booleanTransformer) {
      if (!value && value !== "" && value !== 0) {
        return "";
      }
      var xmlValue = value;
      if (typeof value === "boolean") {
        if (booleanTransformer) {
          xmlValue = booleanTransformer(value);
        }
      }
      return " " + key + '="' + xmlValue + '"';
    };
    return XmlFactory2;
  }();
  var crcTable = new Uint32Array([
    0,
    1996959894,
    3993919788,
    2567524794,
    124634137,
    1886057615,
    3915621685,
    2657392035,
    249268274,
    2044508324,
    3772115230,
    2547177864,
    162941995,
    2125561021,
    3887607047,
    2428444049,
    498536548,
    1789927666,
    4089016648,
    2227061214,
    450548861,
    1843258603,
    4107580753,
    2211677639,
    325883990,
    1684777152,
    4251122042,
    2321926636,
    335633487,
    1661365465,
    4195302755,
    2366115317,
    997073096,
    1281953886,
    3579855332,
    2724688242,
    1006888145,
    1258607687,
    3524101629,
    2768942443,
    901097722,
    1119000684,
    3686517206,
    2898065728,
    853044451,
    1172266101,
    3705015759,
    2882616665,
    651767980,
    1373503546,
    3369554304,
    3218104598,
    565507253,
    1454621731,
    3485111705,
    3099436303,
    671266974,
    1594198024,
    3322730930,
    2970347812,
    795835527,
    1483230225,
    3244367275,
    3060149565,
    1994146192,
    31158534,
    2563907772,
    4023717930,
    1907459465,
    112637215,
    2680153253,
    3904427059,
    2013776290,
    251722036,
    2517215374,
    3775830040,
    2137656763,
    141376813,
    2439277719,
    3865271297,
    1802195444,
    476864866,
    2238001368,
    4066508878,
    1812370925,
    453092731,
    2181625025,
    4111451223,
    1706088902,
    314042704,
    2344532202,
    4240017532,
    1658658271,
    366619977,
    2362670323,
    4224994405,
    1303535960,
    984961486,
    2747007092,
    3569037538,
    1256170817,
    1037604311,
    2765210733,
    3554079995,
    1131014506,
    879679996,
    2909243462,
    3663771856,
    1141124467,
    855842277,
    2852801631,
    3708648649,
    1342533948,
    654459306,
    3188396048,
    3373015174,
    1466479909,
    544179635,
    3110523913,
    3462522015,
    1591671054,
    702138776,
    2966460450,
    3352799412,
    1504918807,
    783551873,
    3082640443,
    3233442989,
    3988292384,
    2596254646,
    62317068,
    1957810842,
    3939845945,
    2647816111,
    81470997,
    1943803523,
    3814918930,
    2489596804,
    225274430,
    2053790376,
    3826175755,
    2466906013,
    167816743,
    2097651377,
    4027552580,
    2265490386,
    503444072,
    1762050814,
    4150417245,
    2154129355,
    426522225,
    1852507879,
    4275313526,
    2312317920,
    282753626,
    1742555852,
    4189708143,
    2394877945,
    397917763,
    1622183637,
    3604390888,
    2714866558,
    953729732,
    1340076626,
    3518719985,
    2797360999,
    1068828381,
    1219638859,
    3624741850,
    2936675148,
    906185462,
    1090812512,
    3747672003,
    2825379669,
    829329135,
    1181335161,
    3412177804,
    3160834842,
    628085408,
    1382605366,
    3423369109,
    3138078467,
    570562233,
    1426400815,
    3317316542,
    2998733608,
    733239954,
    1555261956,
    3268935591,
    3050360625,
    752459403,
    1541320221,
    2607071920,
    3965973030,
    1969922972,
    40735498,
    2617837225,
    3943577151,
    1913087877,
    83908371,
    2512341634,
    3803740692,
    2075208622,
    213261112,
    2463272603,
    3855990285,
    2094854071,
    198958881,
    2262029012,
    4057260610,
    1759359992,
    534414190,
    2176718541,
    4139329115,
    1873836001,
    414664567,
    2282248934,
    4279200368,
    1711684554,
    285281116,
    2405801727,
    4167216745,
    1634467795,
    376229701,
    2685067896,
    3608007406,
    1308918612,
    956543938,
    2808555105,
    3495958263,
    1231636301,
    1047427035,
    2932959818,
    3654703836,
    1088359270,
    936918e3,
    2847714899,
    3736837829,
    1202900863,
    817233897,
    3183342108,
    3401237130,
    1404277552,
    615818150,
    3134207493,
    3453421203,
    1423857449,
    601450431,
    3009837614,
    3294710456,
    1567103746,
    711928724,
    3020668471,
    3272380065,
    1510334235,
    755167117
  ]);
  var ZipContainer = function() {
    function ZipContainer2() {
    }
    ZipContainer2.addFolders = function(paths) {
      paths.forEach(this.addFolder.bind(this));
    };
    ZipContainer2.addFolder = function(path) {
      this.folders.push({
        path,
        created: new Date(),
        isBase64: false
      });
    };
    ZipContainer2.addFile = function(path, content, isBase64) {
      if (isBase64 === void 0) {
        isBase64 = false;
      }
      this.files.push({
        path,
        created: new Date(),
        content,
        isBase64
      });
    };
    ZipContainer2.getContent = function(mimeType) {
      if (mimeType === void 0) {
        mimeType = "application/zip";
      }
      var textOutput = this.buildFileStream();
      var uInt8Output = this.buildUint8Array(textOutput);
      this.clearStream();
      return new Blob([uInt8Output], { type: mimeType });
    };
    ZipContainer2.clearStream = function() {
      this.folders = [];
      this.files = [];
    };
    ZipContainer2.buildFileStream = function(fData) {
      if (fData === void 0) {
        fData = "";
      }
      var totalFiles = this.folders.concat(this.files);
      var len2 = totalFiles.length;
      var foData = "";
      var lL = 0;
      var cL = 0;
      for (var _i = 0, totalFiles_1 = totalFiles; _i < totalFiles_1.length; _i++) {
        var currentFile = totalFiles_1[_i];
        var _a = this.getHeader(currentFile, lL), fileHeader = _a.fileHeader, folderHeader = _a.folderHeader, content = _a.content;
        lL += fileHeader.length + content.length;
        cL += folderHeader.length;
        fData += fileHeader + content;
        foData += folderHeader;
      }
      var foEnd = this.buildFolderEnd(len2, cL, lL);
      return fData + foData + foEnd;
    };
    ZipContainer2.getHeader = function(currentFile, offset) {
      var content = currentFile.content, path = currentFile.path, created = currentFile.created, isBase64 = currentFile.isBase64;
      var utf8_encode2 = _.utf8_encode, decToHex2 = _.decToHex;
      var utfPath = utf8_encode2(path);
      var isUTF8 = utfPath !== path;
      var time = this.convertTime(created);
      var dt = this.convertDate(created);
      var extraFields = "";
      if (isUTF8) {
        var uExtraFieldPath = decToHex2(1, 1) + decToHex2(this.getFromCrc32Table(utfPath), 4) + utfPath;
        extraFields = "up" + decToHex2(uExtraFieldPath.length, 2) + uExtraFieldPath;
      }
      var _a = !content ? { size: 0, content: "" } : this.getConvertedContent(content, isBase64), size = _a.size, convertedContent = _a.content;
      var header = "\n\0" + (isUTF8 ? "\0\b" : "\0\0") + "\0\0" + decToHex2(time, 2) + decToHex2(dt, 2) + decToHex2(size ? this.getFromCrc32Table(convertedContent) : 0, 4) + decToHex2(size, 4) + decToHex2(size, 4) + decToHex2(utfPath.length, 2) + decToHex2(extraFields.length, 2);
      var fileHeader = "PK" + header + utfPath + extraFields;
      var folderHeader = "PK\0" + header + "\0\0\0\0\0\0" + (content ? "\0\0\0\0" : "\0\0\0") + decToHex2(offset, 4) + utfPath + extraFields;
      return { fileHeader, folderHeader, content: convertedContent || "" };
    };
    ZipContainer2.getConvertedContent = function(content, isBase64) {
      if (isBase64 === void 0) {
        isBase64 = false;
      }
      if (isBase64) {
        content = content.split(";base64,")[1];
      }
      content = isBase64 ? atob(content) : content;
      return {
        size: content.length,
        content
      };
    };
    ZipContainer2.buildFolderEnd = function(tLen, cLen, lLen) {
      var decToHex2 = _.decToHex;
      return "PK\0\0\0\0" + decToHex2(tLen, 2) + decToHex2(tLen, 2) + decToHex2(cLen, 4) + decToHex2(lLen, 4) + "\0\0";
    };
    ZipContainer2.buildUint8Array = function(content) {
      var uint8 = new Uint8Array(content.length);
      for (var i2 = 0; i2 < uint8.length; i2++) {
        uint8[i2] = content.charCodeAt(i2);
      }
      return uint8;
    };
    ZipContainer2.getFromCrc32Table = function(content) {
      if (!content.length) {
        return 0;
      }
      var size = content.length;
      var iterable = new Uint8Array(size);
      for (var i2 = 0; i2 < size; i2++) {
        iterable[i2] = content.charCodeAt(i2);
      }
      var crc = 0 ^ -1;
      var j = 0;
      var k = 0;
      var l = 0;
      for (var i2 = 0; i2 < size; i2++) {
        j = iterable[i2];
        k = (crc ^ j) & 255;
        l = crcTable[k];
        crc = crc >>> 8 ^ l;
      }
      return crc ^ -1;
    };
    ZipContainer2.convertTime = function(date) {
      var time = date.getHours();
      time <<= 6;
      time = time | date.getMinutes();
      time <<= 5;
      time = time | date.getSeconds() / 2;
      return time;
    };
    ZipContainer2.convertDate = function(date) {
      var dt = date.getFullYear() - 1980;
      dt <<= 4;
      dt = dt | date.getMonth() + 1;
      dt <<= 5;
      dt = dt | date.getDate();
      return dt;
    };
    ZipContainer2.folders = [];
    ZipContainer2.files = [];
    return ZipContainer2;
  }();
  ModuleRegistry.register(ClientSideRowModelModule, false);
  ModuleRegistry.register(InfiniteRowModelModule, false);
  ModuleRegistry.register(CsvExportModule, false);
  exports2.AbstractHeaderCellCtrl = AbstractHeaderCellCtrl;
  exports2.AgAbstractField = AgAbstractField;
  exports2.AgAngleSelect = AgAngleSelect;
  exports2.AgCheckbox = AgCheckbox;
  exports2.AgColorPicker = AgColorPicker;
  exports2.AgDialog = AgDialog;
  exports2.AgGroupComponent = AgGroupComponent;
  exports2.AgInputNumberField = AgInputNumberField;
  exports2.AgInputRange = AgInputRange;
  exports2.AgInputTextArea = AgInputTextArea;
  exports2.AgInputTextField = AgInputTextField;
  exports2.AgPanel = AgPanel;
  exports2.AgPromise = AgPromise;
  exports2.AgRadioButton = AgRadioButton;
  exports2.AgSelect = AgSelect;
  exports2.AgSlider = AgSlider;
  exports2.AgStackComponentsRegistry = AgStackComponentsRegistry;
  exports2.AgToggleButton = AgToggleButton;
  exports2.AlignedGridsService = AlignedGridsService;
  exports2.AnimateShowChangeCellRenderer = AnimateShowChangeCellRenderer;
  exports2.AnimateSlideCellRenderer = AnimateSlideCellRenderer;
  exports2.AnimationFrameService = AnimationFrameService;
  exports2.AutoScrollService = AutoScrollService;
  exports2.AutoWidthCalculator = AutoWidthCalculator;
  exports2.Autowired = Autowired;
  exports2.BaseComponentWrapper = BaseComponentWrapper;
  exports2.BaseCreator = BaseCreator;
  exports2.BaseGridSerializingSession = BaseGridSerializingSession;
  exports2.Bean = Bean;
  exports2.BeanStub = BeanStub;
  exports2.Beans = Beans;
  exports2.BodyDropPivotTarget = BodyDropPivotTarget;
  exports2.BodyDropTarget = BodyDropTarget;
  exports2.CellComp = CellComp;
  exports2.CellCtrl = CellCtrl;
  exports2.CellNavigationService = CellNavigationService;
  exports2.CellPositionUtils = CellPositionUtils;
  exports2.ChangedPath = ChangedPath;
  exports2.CheckboxSelectionComponent = CheckboxSelectionComponent;
  exports2.ColDefUtil = ColDefUtil;
  exports2.Color = Color;
  exports2.Column = Column;
  exports2.ColumnApi = ColumnApi;
  exports2.ColumnFactory = ColumnFactory;
  exports2.ColumnGroup = ColumnGroup;
  exports2.ColumnKeyCreator = ColumnKeyCreator;
  exports2.ColumnModel = ColumnModel;
  exports2.ColumnUtils = ColumnUtils;
  exports2.Component = Component;
  exports2.ComponentUtil = ComponentUtil;
  exports2.Constants = Constants;
  exports2.Context = Context;
  exports2.CssClassApplier = CssClassApplier;
  exports2.CsvCreator = CsvCreator;
  exports2.CsvExportModule = CsvExportModule;
  exports2.CtrlsService = CtrlsService;
  exports2.CustomTooltipFeature = CustomTooltipFeature;
  exports2.DateFilter = DateFilter;
  exports2.DisplayedGroupCreator = DisplayedGroupCreator;
  exports2.Downloader = Downloader;
  exports2.DragAndDropService = DragAndDropService;
  exports2.DragService = DragService;
  exports2.Environment = Environment;
  exports2.EventService = EventService;
  exports2.Events = Events;
  exports2.ExpressionService = ExpressionService;
  exports2.FilterManager = FilterManager;
  exports2.FloatingFilterMapper = FloatingFilterMapper;
  exports2.FocusService = FocusService;
  exports2.Grid = Grid;
  exports2.GridApi = GridApi;
  exports2.GridBodyComp = GridBodyComp;
  exports2.GridBodyCtrl = GridBodyCtrl;
  exports2.GridComp = GridComp;
  exports2.GridCoreCreator = GridCoreCreator;
  exports2.GridCtrl = GridCtrl;
  exports2.GridHeaderComp = GridHeaderComp;
  exports2.GridHeaderCtrl = GridHeaderCtrl;
  exports2.GridOptionsWrapper = GridOptionsWrapper;
  exports2.GridSerializer = GridSerializer;
  exports2.GroupCellRenderer = GroupCellRenderer;
  exports2.GroupCellRendererCtrl = GroupCellRendererCtrl;
  exports2.GroupInstanceIdCreator = GroupInstanceIdCreator;
  exports2.HeaderCellCtrl = HeaderCellCtrl;
  exports2.HeaderFilterCellComp = HeaderFilterCellComp;
  exports2.HeaderFilterCellCtrl = HeaderFilterCellCtrl;
  exports2.HeaderGroupCellCtrl = HeaderGroupCellCtrl;
  exports2.HeaderNavigationService = HeaderNavigationService;
  exports2.HeaderPositionUtils = HeaderPositionUtils;
  exports2.HeaderRowComp = HeaderRowComp;
  exports2.HeaderRowContainerComp = HeaderRowContainerComp;
  exports2.HeaderRowContainerCtrl = HeaderRowContainerCtrl;
  exports2.HeaderRowCtrl = HeaderRowCtrl;
  exports2.HorizontalResizeService = HorizontalResizeService;
  exports2.KeyCode = KeyCode;
  exports2.LargeTextCellEditor = LargeTextCellEditor;
  exports2.Logger = Logger;
  exports2.LoggerFactory = LoggerFactory;
  exports2.ManagedFocusFeature = ManagedFocusFeature;
  exports2.ModuleRegistry = ModuleRegistry;
  exports2.MouseEventService = MouseEventService;
  exports2.MoveColumnFeature = MoveColumnFeature;
  exports2.NavigationService = NavigationService;
  exports2.NumberFilter = NumberFilter;
  exports2.NumberSequence = NumberSequence;
  exports2.Optional = Optional;
  exports2.PaginationProxy = PaginationProxy;
  exports2.PinnedRowModel = PinnedRowModel;
  exports2.PopupComponent = PopupComponent;
  exports2.PopupEditorWrapper = PopupEditorWrapper;
  exports2.PopupSelectCellEditor = PopupSelectCellEditor;
  exports2.PopupService = PopupService;
  exports2.PopupTextCellEditor = PopupTextCellEditor;
  exports2.PositionableFeature = PositionableFeature;
  exports2.PostConstruct = PostConstruct;
  exports2.PreConstruct = PreConstruct;
  exports2.PreDestroy = PreDestroy;
  exports2.PropertyKeys = PropertyKeys;
  exports2.ProvidedColumnGroup = ProvidedColumnGroup;
  exports2.ProvidedFilter = ProvidedFilter;
  exports2.Qualifier = Qualifier;
  exports2.QuerySelector = QuerySelector;
  exports2.RefSelector = RefSelector;
  exports2.ResizeObserverService = ResizeObserverService;
  exports2.RowContainerComp = RowContainerComp;
  exports2.RowContainerCtrl = RowContainerCtrl;
  exports2.RowCtrl = RowCtrl;
  exports2.RowNode = RowNode;
  exports2.RowNodeBlock = RowNodeBlock;
  exports2.RowNodeBlockLoader = RowNodeBlockLoader;
  exports2.RowNodeSorter = RowNodeSorter;
  exports2.RowPositionUtils = RowPositionUtils;
  exports2.RowRenderer = RowRenderer;
  exports2.ScalarFilter = ScalarFilter;
  exports2.ScrollVisibleService = ScrollVisibleService;
  exports2.SelectCellEditor = SelectCellEditor;
  exports2.SelectableService = SelectableService;
  exports2.SelectionService = SelectionService;
  exports2.SetLeftFeature = SetLeftFeature;
  exports2.SimpleFilter = SimpleFilter;
  exports2.SortController = SortController;
  exports2.StandardMenuFactory = StandardMenuFactory;
  exports2.StylingService = StylingService;
  exports2.TabGuardComp = TabGuardComp;
  exports2.TabGuardCtrl = TabGuardCtrl;
  exports2.TabbedLayout = TabbedLayout;
  exports2.TemplateService = TemplateService;
  exports2.TextCellEditor = TextCellEditor;
  exports2.TextFilter = TextFilter;
  exports2.TextFloatingFilter = TextFloatingFilter;
  exports2.Timer = Timer;
  exports2.TouchListener = TouchListener;
  exports2.UserComponentFactory = UserComponentFactory;
  exports2.UserComponentRegistry = UserComponentRegistry;
  exports2.ValueCache = ValueCache;
  exports2.ValueFormatterService = ValueFormatterService;
  exports2.ValueService = ValueService;
  exports2.VanillaFrameworkOverrides = VanillaFrameworkOverrides;
  exports2.VirtualList = VirtualList;
  exports2.XmlFactory = XmlFactory;
  exports2.ZipContainer = ZipContainer;
  exports2._ = _;
  exports2.defaultGroupComparator = defaultGroupComparator;
  exports2.initialiseAgGridWithAngular1 = initialiseAgGridWithAngular1;
  exports2.initialiseAgGridWithWebComponents = initialiseAgGridWithWebComponents;
  exports2.simpleHttpRequest = simpleHttpRequest;
  exports2.stringToArray = stringToArray;
})(agGridCommunity_cjs);
class CheckboxFilter {
  constructor() {
    __publicField(this, "valueGetter");
    __publicField(this, "showChecked");
    __publicField(this, "gui");
    __publicField(this, "selectBoxes");
    __publicField(this, "eFilterText");
  }
  init(params2) {
    this.valueGetter = params2.valueGetter;
    this.showChecked = { selected: true, notSelected: true };
    this.setupGui(params2);
  }
  setupGui(params2) {
    this.gui = document.createElement("div");
    this.gui.innerHTML = `
        <style>
        .optionclass{
            justify-content: flex-start;
            display: flex;
            align-items: center;
        }
        .optionclass input{
            margin:4px;
        }
        </style>
        <div style="padding: 4px; width: 100px;">
        <div style="font-weight: bold;margin-bottom:10px"> Selected Filter </div>
        <div style="display:grid">
            <div class="optionclass">
                <input type="checkbox"
                       id="selected"
                       checked="checked" />Selected
            </div>
            <div class="optionclass">
                <input type="checkbox"
                       id="notSelected"
                       checked="checked" />Unselected
            </div>
        </div>
    </div>`;
    const listener = (event) => {
      let { checked, id } = event.target;
      this.showChecked[id] = checked;
      console.log(this.showChecked);
      params2.filterChangedCallback();
    };
    this.selectBoxes = [
      this.gui.querySelector("#selected"),
      this.gui.querySelector("#notSelected")
    ];
    for (let s = 0; s < this.selectBoxes.length; s++) {
      this.selectBoxes[s].addEventListener("change", listener);
    }
  }
  getGui() {
    return this.gui;
  }
  doesFilterPass({ node, data }) {
    const nodeSelected = node.isSelected();
    return this.showChecked.selected && nodeSelected || this.showChecked.notSelected && !nodeSelected || this.showChecked.selected && this.showChecked.notSelected;
  }
  isFilterActive() {
    return true;
  }
  getModel() {
    return this.showChecked;
  }
  setModel(model) {
    this.eFilterText.value = model.value;
  }
}
var agGrid = "";
var agThemeBalham = "";
var agThemeBalhamDark = "";
var Grid_svelte_svelte_type_style_lang = "";
const { document: document_1 } = globals;
function create_fragment$7(ctx) {
  let style;
  let t1;
  let div;
  let div_class_value;
  let div_transition;
  let current;
  return {
    c() {
      style = element("style");
      style.textContent = "/* width */\n    ::-webkit-scrollbar {\n      width: 10px;\n    }\n    /* Track */\n    ::-webkit-scrollbar-track {\n      background: #f1f1f1;\n    }\n    /* Handle */\n    ::-webkit-scrollbar-thumb {\n      background: #888;\n    }\n    /* Handle on hover */\n    ::-webkit-scrollbar-thumb:hover {\n      background: #555;\n    }";
      t1 = space();
      div = element("div");
      attr(style, "class", "svelte-1oexzky");
      attr(div, "id", ctx[0]);
      attr(div, "style", ctx[1]);
      attr(div, "class", div_class_value = "" + (null_to_empty(ctx[2]) + " svelte-1oexzky"));
    },
    m(target, anchor) {
      append(document_1.head, style);
      insert(target, t1, anchor);
      insert(target, div, anchor);
      current = true;
    },
    p(ctx2, [dirty]) {
      if (!current || dirty & 1) {
        attr(div, "id", ctx2[0]);
      }
      if (!current || dirty & 2) {
        attr(div, "style", ctx2[1]);
      }
      if (!current || dirty & 4 && div_class_value !== (div_class_value = "" + (null_to_empty(ctx2[2]) + " svelte-1oexzky"))) {
        attr(div, "class", div_class_value);
      }
    },
    i(local) {
      if (current)
        return;
      add_render_callback(() => {
        if (!div_transition)
          div_transition = create_bidirectional_transition(div, fly, { y: 200, duration: 200 }, true);
        div_transition.run(1);
      });
      current = true;
    },
    o(local) {
      if (!div_transition)
        div_transition = create_bidirectional_transition(div, fly, { y: 200, duration: 200 }, false);
      div_transition.run(0);
      current = false;
    },
    d(detaching) {
      detach(style);
      if (detaching)
        detach(t1);
      if (detaching)
        detach(div);
      if (detaching && div_transition)
        div_transition.end();
    }
  };
}
function instance$4($$self, $$props, $$invalidate) {
  let { data = [{}] } = $$props;
  let { name = "new-table" } = $$props;
  let { cssString } = $$props;
  let { classStringOptions = ["ag-theme-balham", "ag-theme-balham-dark"] } = $$props;
  let { classString = classStringOptions[1] } = $$props;
  let { grid } = $$props;
  let { columnDefs = null } = $$props;
  let { pagination = true } = $$props;
  let { paginationPageSize = 10 } = $$props;
  let { defaultColDef = { sortable: true, filter: true } } = $$props;
  let gridFitTimeout;
  const gridFit = (timeout = 100) => {
    clearTimeout(gridFitTimeout);
    gridFitTimeout = setTimeout(() => {
      var _a, _b;
      grid.gridOptions.columnApi.autoSizeAllColumns();
      if (((_a = grid.gridOptions.api.columnController) == null ? void 0 : _a.scrollWidth) >= ((_b = grid.gridOptions.api.columnController) == null ? void 0 : _b.bodyWidth)) {
        grid.gridOptions.api.sizeColumnsToFit();
      }
    }, 100);
  };
  onMount(async () => {
    let objectKeys2 = Object.keys(data[0]).map((r) => {
      return {
        headerName: r.charAt(0).toUpperCase() + r.slice(1),
        field: r
      };
    });
    const gridOptions = {
      onToolPanelVisibleChanged: () => gridFit(),
      onGridSizeChanged: () => {
        gridFit();
      },
      onDisplayedColumnsChanged: () => gridFit(),
      onColumnVisible: () => gridFit(),
      onColumnEverythingChanged: () => {
        gridFit();
      },
      onFilterChanged(...args) {
      },
      onFilterModified() {
      },
      onSelectionChanged(args) {
      },
      onRowSelected(_a) {
        var args = __objRest(_a, []);
      },
      pagination,
      paginationPageSize,
      rowSelection: "multiple",
      components: { checkboxFilter: CheckboxFilter },
      defaultColDef,
      columnDefs: columnDefs != null ? columnDefs : [
        {
          headerName: "",
          checkboxSelection: true,
          width: 50,
          filter: "checkboxFilter",
          valueFormatter: (v2) => "",
          comparator: (valueA, valueB, nodeA, nodeB, isInverted) => {
            return isInverted ? nodeA.isSelected() > nodeB.isSelected() : nodeA.isSelected() < nodeB.isSelected();
          },
          field: "selected"
        },
        ...objectKeys2
      ],
      rowData: data,
      sideBar: {
        position: "left",
        toolPanels: [
          {
            id: "columns",
            labelDefault: "Columns",
            labelKey: "columns",
            iconKey: "columns",
            toolPanel: "agColumnsToolPanel",
            toolPanelParams: {
              suppressValues: true,
              suppressPivots: true,
              suppressPivotMode: true,
              suppressRowGroups: false
            }
          },
          {
            id: "filters",
            labelDefault: "Filters",
            labelKey: "filters",
            iconKey: "filter",
            toolPanel: "agFiltersToolPanel"
          }
        ],
        defaultToolPanel: ""
      }
    };
    let eGridDiv = document.getElementById(name);
    $$invalidate(3, grid = new agGridCommunity_cjs.Grid(eGridDiv, gridOptions));
    gridFit(0);
  });
  $$self.$$set = ($$props2) => {
    if ("data" in $$props2)
      $$invalidate(4, data = $$props2.data);
    if ("name" in $$props2)
      $$invalidate(0, name = $$props2.name);
    if ("cssString" in $$props2)
      $$invalidate(1, cssString = $$props2.cssString);
    if ("classStringOptions" in $$props2)
      $$invalidate(5, classStringOptions = $$props2.classStringOptions);
    if ("classString" in $$props2)
      $$invalidate(2, classString = $$props2.classString);
    if ("grid" in $$props2)
      $$invalidate(3, grid = $$props2.grid);
    if ("columnDefs" in $$props2)
      $$invalidate(6, columnDefs = $$props2.columnDefs);
    if ("pagination" in $$props2)
      $$invalidate(7, pagination = $$props2.pagination);
    if ("paginationPageSize" in $$props2)
      $$invalidate(8, paginationPageSize = $$props2.paginationPageSize);
    if ("defaultColDef" in $$props2)
      $$invalidate(9, defaultColDef = $$props2.defaultColDef);
  };
  return [
    name,
    cssString,
    classString,
    grid,
    data,
    classStringOptions,
    columnDefs,
    pagination,
    paginationPageSize,
    defaultColDef
  ];
}
class Grid_1 extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$4, create_fragment$7, safe_not_equal, {
      data: 4,
      name: 0,
      cssString: 1,
      classStringOptions: 5,
      classString: 2,
      grid: 3,
      columnDefs: 6,
      pagination: 7,
      paginationPageSize: 8,
      defaultColDef: 9
    });
  }
}
const pkBuffer = writable(null);
const keyPair = writable(null);
var readableBrowser = { exports: {} };
var _registry = {};
var events = { exports: {} };
var R = typeof Reflect === "object" ? Reflect : null;
var ReflectApply = R && typeof R.apply === "function" ? R.apply : function ReflectApply2(target, receiver, args) {
  return Function.prototype.apply.call(target, receiver, args);
};
var ReflectOwnKeys;
if (R && typeof R.ownKeys === "function") {
  ReflectOwnKeys = R.ownKeys;
} else if (Object.getOwnPropertySymbols) {
  ReflectOwnKeys = function ReflectOwnKeys2(target) {
    return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));
  };
} else {
  ReflectOwnKeys = function ReflectOwnKeys2(target) {
    return Object.getOwnPropertyNames(target);
  };
}
function ProcessEmitWarning(warning) {
  if (console && console.warn)
    console.warn(warning);
}
var NumberIsNaN = Number.isNaN || function NumberIsNaN2(value) {
  return value !== value;
};
function EventEmitter() {
  EventEmitter.init.call(this);
}
events.exports = EventEmitter;
events.exports.once = once$2;
EventEmitter.EventEmitter = EventEmitter;
EventEmitter.prototype._events = void 0;
EventEmitter.prototype._eventsCount = 0;
EventEmitter.prototype._maxListeners = void 0;
var defaultMaxListeners = 10;
function checkListener(listener) {
  if (typeof listener !== "function") {
    throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof listener);
  }
}
Object.defineProperty(EventEmitter, "defaultMaxListeners", {
  enumerable: true,
  get: function() {
    return defaultMaxListeners;
  },
  set: function(arg) {
    if (typeof arg !== "number" || arg < 0 || NumberIsNaN(arg)) {
      throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + arg + ".");
    }
    defaultMaxListeners = arg;
  }
});
EventEmitter.init = function() {
  if (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) {
    this._events = Object.create(null);
    this._eventsCount = 0;
  }
  this._maxListeners = this._maxListeners || void 0;
};
EventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {
  if (typeof n !== "number" || n < 0 || NumberIsNaN(n)) {
    throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + n + ".");
  }
  this._maxListeners = n;
  return this;
};
function _getMaxListeners(that) {
  if (that._maxListeners === void 0)
    return EventEmitter.defaultMaxListeners;
  return that._maxListeners;
}
EventEmitter.prototype.getMaxListeners = function getMaxListeners() {
  return _getMaxListeners(this);
};
EventEmitter.prototype.emit = function emit(type) {
  var args = [];
  for (var i2 = 1; i2 < arguments.length; i2++)
    args.push(arguments[i2]);
  var doError = type === "error";
  var events2 = this._events;
  if (events2 !== void 0)
    doError = doError && events2.error === void 0;
  else if (!doError)
    return false;
  if (doError) {
    var er;
    if (args.length > 0)
      er = args[0];
    if (er instanceof Error) {
      throw er;
    }
    var err = new Error("Unhandled error." + (er ? " (" + er.message + ")" : ""));
    err.context = er;
    throw err;
  }
  var handler = events2[type];
  if (handler === void 0)
    return false;
  if (typeof handler === "function") {
    ReflectApply(handler, this, args);
  } else {
    var len2 = handler.length;
    var listeners2 = arrayClone(handler, len2);
    for (var i2 = 0; i2 < len2; ++i2)
      ReflectApply(listeners2[i2], this, args);
  }
  return true;
};
function _addListener(target, type, listener, prepend) {
  var m;
  var events2;
  var existing;
  checkListener(listener);
  events2 = target._events;
  if (events2 === void 0) {
    events2 = target._events = Object.create(null);
    target._eventsCount = 0;
  } else {
    if (events2.newListener !== void 0) {
      target.emit("newListener", type, listener.listener ? listener.listener : listener);
      events2 = target._events;
    }
    existing = events2[type];
  }
  if (existing === void 0) {
    existing = events2[type] = listener;
    ++target._eventsCount;
  } else {
    if (typeof existing === "function") {
      existing = events2[type] = prepend ? [listener, existing] : [existing, listener];
    } else if (prepend) {
      existing.unshift(listener);
    } else {
      existing.push(listener);
    }
    m = _getMaxListeners(target);
    if (m > 0 && existing.length > m && !existing.warned) {
      existing.warned = true;
      var w = new Error("Possible EventEmitter memory leak detected. " + existing.length + " " + String(type) + " listeners added. Use emitter.setMaxListeners() to increase limit");
      w.name = "MaxListenersExceededWarning";
      w.emitter = target;
      w.type = type;
      w.count = existing.length;
      ProcessEmitWarning(w);
    }
  }
  return target;
}
EventEmitter.prototype.addListener = function addListener(type, listener) {
  return _addListener(this, type, listener, false);
};
EventEmitter.prototype.on = EventEmitter.prototype.addListener;
EventEmitter.prototype.prependListener = function prependListener2(type, listener) {
  return _addListener(this, type, listener, true);
};
function onceWrapper() {
  if (!this.fired) {
    this.target.removeListener(this.type, this.wrapFn);
    this.fired = true;
    if (arguments.length === 0)
      return this.listener.call(this.target);
    return this.listener.apply(this.target, arguments);
  }
}
function _onceWrap(target, type, listener) {
  var state2 = { fired: false, wrapFn: void 0, target, type, listener };
  var wrapped = onceWrapper.bind(state2);
  wrapped.listener = listener;
  state2.wrapFn = wrapped;
  return wrapped;
}
EventEmitter.prototype.once = function once2(type, listener) {
  checkListener(listener);
  this.on(type, _onceWrap(this, type, listener));
  return this;
};
EventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {
  checkListener(listener);
  this.prependListener(type, _onceWrap(this, type, listener));
  return this;
};
EventEmitter.prototype.removeListener = function removeListener(type, listener) {
  var list, events2, position, i2, originalListener;
  checkListener(listener);
  events2 = this._events;
  if (events2 === void 0)
    return this;
  list = events2[type];
  if (list === void 0)
    return this;
  if (list === listener || list.listener === listener) {
    if (--this._eventsCount === 0)
      this._events = Object.create(null);
    else {
      delete events2[type];
      if (events2.removeListener)
        this.emit("removeListener", type, list.listener || listener);
    }
  } else if (typeof list !== "function") {
    position = -1;
    for (i2 = list.length - 1; i2 >= 0; i2--) {
      if (list[i2] === listener || list[i2].listener === listener) {
        originalListener = list[i2].listener;
        position = i2;
        break;
      }
    }
    if (position < 0)
      return this;
    if (position === 0)
      list.shift();
    else {
      spliceOne(list, position);
    }
    if (list.length === 1)
      events2[type] = list[0];
    if (events2.removeListener !== void 0)
      this.emit("removeListener", type, originalListener || listener);
  }
  return this;
};
EventEmitter.prototype.off = EventEmitter.prototype.removeListener;
EventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {
  var listeners2, events2, i2;
  events2 = this._events;
  if (events2 === void 0)
    return this;
  if (events2.removeListener === void 0) {
    if (arguments.length === 0) {
      this._events = Object.create(null);
      this._eventsCount = 0;
    } else if (events2[type] !== void 0) {
      if (--this._eventsCount === 0)
        this._events = Object.create(null);
      else
        delete events2[type];
    }
    return this;
  }
  if (arguments.length === 0) {
    var keys2 = Object.keys(events2);
    var key;
    for (i2 = 0; i2 < keys2.length; ++i2) {
      key = keys2[i2];
      if (key === "removeListener")
        continue;
      this.removeAllListeners(key);
    }
    this.removeAllListeners("removeListener");
    this._events = Object.create(null);
    this._eventsCount = 0;
    return this;
  }
  listeners2 = events2[type];
  if (typeof listeners2 === "function") {
    this.removeListener(type, listeners2);
  } else if (listeners2 !== void 0) {
    for (i2 = listeners2.length - 1; i2 >= 0; i2--) {
      this.removeListener(type, listeners2[i2]);
    }
  }
  return this;
};
function _listeners(target, type, unwrap) {
  var events2 = target._events;
  if (events2 === void 0)
    return [];
  var evlistener = events2[type];
  if (evlistener === void 0)
    return [];
  if (typeof evlistener === "function")
    return unwrap ? [evlistener.listener || evlistener] : [evlistener];
  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);
}
EventEmitter.prototype.listeners = function listeners(type) {
  return _listeners(this, type, true);
};
EventEmitter.prototype.rawListeners = function rawListeners(type) {
  return _listeners(this, type, false);
};
EventEmitter.listenerCount = function(emitter, type) {
  if (typeof emitter.listenerCount === "function") {
    return emitter.listenerCount(type);
  } else {
    return listenerCount.call(emitter, type);
  }
};
EventEmitter.prototype.listenerCount = listenerCount;
function listenerCount(type) {
  var events2 = this._events;
  if (events2 !== void 0) {
    var evlistener = events2[type];
    if (typeof evlistener === "function") {
      return 1;
    } else if (evlistener !== void 0) {
      return evlistener.length;
    }
  }
  return 0;
}
EventEmitter.prototype.eventNames = function eventNames() {
  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];
};
function arrayClone(arr, n) {
  var copy = new Array(n);
  for (var i2 = 0; i2 < n; ++i2)
    copy[i2] = arr[i2];
  return copy;
}
function spliceOne(list, index) {
  for (; index + 1 < list.length; index++)
    list[index] = list[index + 1];
  list.pop();
}
function unwrapListeners(arr) {
  var ret = new Array(arr.length);
  for (var i2 = 0; i2 < ret.length; ++i2) {
    ret[i2] = arr[i2].listener || arr[i2];
  }
  return ret;
}
function once$2(emitter, name) {
  return new Promise(function(resolve, reject) {
    function errorListener(err) {
      emitter.removeListener(name, resolver);
      reject(err);
    }
    function resolver() {
      if (typeof emitter.removeListener === "function") {
        emitter.removeListener("error", errorListener);
      }
      resolve([].slice.call(arguments));
    }
    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });
    if (name !== "error") {
      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });
    }
  });
}
function addErrorHandlerIfEventEmitter(emitter, handler, flags) {
  if (typeof emitter.on === "function") {
    eventTargetAgnosticAddListener(emitter, "error", handler, flags);
  }
}
function eventTargetAgnosticAddListener(emitter, name, listener, flags) {
  if (typeof emitter.on === "function") {
    if (flags.once) {
      emitter.once(name, listener);
    } else {
      emitter.on(name, listener);
    }
  } else if (typeof emitter.addEventListener === "function") {
    emitter.addEventListener(name, function wrapListener(arg) {
      if (flags.once) {
        emitter.removeEventListener(name, wrapListener);
      }
      listener(arg);
    });
  } else {
    throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof emitter);
  }
}
var streamBrowser = events.exports.EventEmitter;
var __viteBrowserExternal = {};
var __viteBrowserExternal$1 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": __viteBrowserExternal
});
var require$$4 = /* @__PURE__ */ getAugmentedNamespace(__viteBrowserExternal$1);
function ownKeys(object, enumerableOnly) {
  var keys2 = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly)
      symbols = symbols.filter(function(sym) {
        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
      });
    keys2.push.apply(keys2, symbols);
  }
  return keys2;
}
function _objectSpread(target) {
  for (var i2 = 1; i2 < arguments.length; i2++) {
    var source = arguments[i2] != null ? arguments[i2] : {};
    if (i2 % 2) {
      ownKeys(Object(source), true).forEach(function(key) {
        _defineProperty$1(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function(key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
function _defineProperty$1(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, { value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _classCallCheck(instance2, Constructor) {
  if (!(instance2 instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
function _defineProperties(target, props) {
  for (var i2 = 0; i2 < props.length; i2++) {
    var descriptor = props[i2];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor)
      descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}
function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps)
    _defineProperties(Constructor.prototype, protoProps);
  if (staticProps)
    _defineProperties(Constructor, staticProps);
  return Constructor;
}
var _require$2 = buffer, Buffer$4 = _require$2.Buffer;
var _require2 = require$$4, inspect = _require2.inspect;
var custom = inspect && inspect.custom || "inspect";
function copyBuffer(src, target, offset) {
  Buffer$4.prototype.copy.call(src, target, offset);
}
var buffer_list = /* @__PURE__ */ function() {
  function BufferList2() {
    _classCallCheck(this, BufferList2);
    this.head = null;
    this.tail = null;
    this.length = 0;
  }
  _createClass(BufferList2, [{
    key: "push",
    value: function push2(v2) {
      var entry = {
        data: v2,
        next: null
      };
      if (this.length > 0)
        this.tail.next = entry;
      else
        this.head = entry;
      this.tail = entry;
      ++this.length;
    }
  }, {
    key: "unshift",
    value: function unshift(v2) {
      var entry = {
        data: v2,
        next: this.head
      };
      if (this.length === 0)
        this.tail = entry;
      this.head = entry;
      ++this.length;
    }
  }, {
    key: "shift",
    value: function shift() {
      if (this.length === 0)
        return;
      var ret = this.head.data;
      if (this.length === 1)
        this.head = this.tail = null;
      else
        this.head = this.head.next;
      --this.length;
      return ret;
    }
  }, {
    key: "clear",
    value: function clear() {
      this.head = this.tail = null;
      this.length = 0;
    }
  }, {
    key: "join",
    value: function join(s) {
      if (this.length === 0)
        return "";
      var p2 = this.head;
      var ret = "" + p2.data;
      while (p2 = p2.next) {
        ret += s + p2.data;
      }
      return ret;
    }
  }, {
    key: "concat",
    value: function concat(n) {
      if (this.length === 0)
        return Buffer$4.alloc(0);
      var ret = Buffer$4.allocUnsafe(n >>> 0);
      var p2 = this.head;
      var i2 = 0;
      while (p2) {
        copyBuffer(p2.data, ret, i2);
        i2 += p2.data.length;
        p2 = p2.next;
      }
      return ret;
    }
  }, {
    key: "consume",
    value: function consume(n, hasStrings) {
      var ret;
      if (n < this.head.data.length) {
        ret = this.head.data.slice(0, n);
        this.head.data = this.head.data.slice(n);
      } else if (n === this.head.data.length) {
        ret = this.shift();
      } else {
        ret = hasStrings ? this._getString(n) : this._getBuffer(n);
      }
      return ret;
    }
  }, {
    key: "first",
    value: function first() {
      return this.head.data;
    }
  }, {
    key: "_getString",
    value: function _getString(n) {
      var p2 = this.head;
      var c = 1;
      var ret = p2.data;
      n -= ret.length;
      while (p2 = p2.next) {
        var str = p2.data;
        var nb = n > str.length ? str.length : n;
        if (nb === str.length)
          ret += str;
        else
          ret += str.slice(0, n);
        n -= nb;
        if (n === 0) {
          if (nb === str.length) {
            ++c;
            if (p2.next)
              this.head = p2.next;
            else
              this.head = this.tail = null;
          } else {
            this.head = p2;
            p2.data = str.slice(nb);
          }
          break;
        }
        ++c;
      }
      this.length -= c;
      return ret;
    }
  }, {
    key: "_getBuffer",
    value: function _getBuffer(n) {
      var ret = Buffer$4.allocUnsafe(n);
      var p2 = this.head;
      var c = 1;
      p2.data.copy(ret);
      n -= p2.data.length;
      while (p2 = p2.next) {
        var buf = p2.data;
        var nb = n > buf.length ? buf.length : n;
        buf.copy(ret, ret.length - n, 0, nb);
        n -= nb;
        if (n === 0) {
          if (nb === buf.length) {
            ++c;
            if (p2.next)
              this.head = p2.next;
            else
              this.head = this.tail = null;
          } else {
            this.head = p2;
            p2.data = buf.slice(nb);
          }
          break;
        }
        ++c;
      }
      this.length -= c;
      return ret;
    }
  }, {
    key: custom,
    value: function value(_, options) {
      return inspect(this, _objectSpread({}, options, {
        depth: 0,
        customInspect: false
      }));
    }
  }]);
  return BufferList2;
}();
function destroy(err, cb) {
  var _this = this;
  var readableDestroyed = this._readableState && this._readableState.destroyed;
  var writableDestroyed = this._writableState && this._writableState.destroyed;
  if (readableDestroyed || writableDestroyed) {
    if (cb) {
      cb(err);
    } else if (err) {
      if (!this._writableState) {
        process.nextTick(emitErrorNT, this, err);
      } else if (!this._writableState.errorEmitted) {
        this._writableState.errorEmitted = true;
        process.nextTick(emitErrorNT, this, err);
      }
    }
    return this;
  }
  if (this._readableState) {
    this._readableState.destroyed = true;
  }
  if (this._writableState) {
    this._writableState.destroyed = true;
  }
  this._destroy(err || null, function(err2) {
    if (!cb && err2) {
      if (!_this._writableState) {
        process.nextTick(emitErrorAndCloseNT, _this, err2);
      } else if (!_this._writableState.errorEmitted) {
        _this._writableState.errorEmitted = true;
        process.nextTick(emitErrorAndCloseNT, _this, err2);
      } else {
        process.nextTick(emitCloseNT, _this);
      }
    } else if (cb) {
      process.nextTick(emitCloseNT, _this);
      cb(err2);
    } else {
      process.nextTick(emitCloseNT, _this);
    }
  });
  return this;
}
function emitErrorAndCloseNT(self2, err) {
  emitErrorNT(self2, err);
  emitCloseNT(self2);
}
function emitCloseNT(self2) {
  if (self2._writableState && !self2._writableState.emitClose)
    return;
  if (self2._readableState && !self2._readableState.emitClose)
    return;
  self2.emit("close");
}
function undestroy() {
  if (this._readableState) {
    this._readableState.destroyed = false;
    this._readableState.reading = false;
    this._readableState.ended = false;
    this._readableState.endEmitted = false;
  }
  if (this._writableState) {
    this._writableState.destroyed = false;
    this._writableState.ended = false;
    this._writableState.ending = false;
    this._writableState.finalCalled = false;
    this._writableState.prefinished = false;
    this._writableState.finished = false;
    this._writableState.errorEmitted = false;
  }
}
function emitErrorNT(self2, err) {
  self2.emit("error", err);
}
function errorOrDestroy$2(stream, err) {
  var rState = stream._readableState;
  var wState = stream._writableState;
  if (rState && rState.autoDestroy || wState && wState.autoDestroy)
    stream.destroy(err);
  else
    stream.emit("error", err);
}
var destroy_1 = {
  destroy,
  undestroy,
  errorOrDestroy: errorOrDestroy$2
};
var errorsBrowser = {};
function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  subClass.__proto__ = superClass;
}
var codes = {};
function createErrorType(code2, message, Base) {
  if (!Base) {
    Base = Error;
  }
  function getMessage(arg1, arg2, arg3) {
    if (typeof message === "string") {
      return message;
    } else {
      return message(arg1, arg2, arg3);
    }
  }
  var NodeError = /* @__PURE__ */ function(_Base) {
    _inheritsLoose(NodeError2, _Base);
    function NodeError2(arg1, arg2, arg3) {
      return _Base.call(this, getMessage(arg1, arg2, arg3)) || this;
    }
    return NodeError2;
  }(Base);
  NodeError.prototype.name = Base.name;
  NodeError.prototype.code = code2;
  codes[code2] = NodeError;
}
function oneOf(expected, thing) {
  if (Array.isArray(expected)) {
    var len2 = expected.length;
    expected = expected.map(function(i2) {
      return String(i2);
    });
    if (len2 > 2) {
      return "one of ".concat(thing, " ").concat(expected.slice(0, len2 - 1).join(", "), ", or ") + expected[len2 - 1];
    } else if (len2 === 2) {
      return "one of ".concat(thing, " ").concat(expected[0], " or ").concat(expected[1]);
    } else {
      return "of ".concat(thing, " ").concat(expected[0]);
    }
  } else {
    return "of ".concat(thing, " ").concat(String(expected));
  }
}
function startsWith(str, search, pos) {
  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;
}
function endsWith(str, search, this_len) {
  if (this_len === void 0 || this_len > str.length) {
    this_len = str.length;
  }
  return str.substring(this_len - search.length, this_len) === search;
}
function includes(str, search, start2) {
  if (typeof start2 !== "number") {
    start2 = 0;
  }
  if (start2 + search.length > str.length) {
    return false;
  } else {
    return str.indexOf(search, start2) !== -1;
  }
}
createErrorType("ERR_INVALID_OPT_VALUE", function(name, value) {
  return 'The value "' + value + '" is invalid for option "' + name + '"';
}, TypeError);
createErrorType("ERR_INVALID_ARG_TYPE", function(name, expected, actual) {
  var determiner;
  if (typeof expected === "string" && startsWith(expected, "not ")) {
    determiner = "must not be";
    expected = expected.replace(/^not /, "");
  } else {
    determiner = "must be";
  }
  var msg;
  if (endsWith(name, " argument")) {
    msg = "The ".concat(name, " ").concat(determiner, " ").concat(oneOf(expected, "type"));
  } else {
    var type = includes(name, ".") ? "property" : "argument";
    msg = 'The "'.concat(name, '" ').concat(type, " ").concat(determiner, " ").concat(oneOf(expected, "type"));
  }
  msg += ". Received type ".concat(typeof actual);
  return msg;
}, TypeError);
createErrorType("ERR_STREAM_PUSH_AFTER_EOF", "stream.push() after EOF");
createErrorType("ERR_METHOD_NOT_IMPLEMENTED", function(name) {
  return "The " + name + " method is not implemented";
});
createErrorType("ERR_STREAM_PREMATURE_CLOSE", "Premature close");
createErrorType("ERR_STREAM_DESTROYED", function(name) {
  return "Cannot call " + name + " after a stream was destroyed";
});
createErrorType("ERR_MULTIPLE_CALLBACK", "Callback called multiple times");
createErrorType("ERR_STREAM_CANNOT_PIPE", "Cannot pipe, not readable");
createErrorType("ERR_STREAM_WRITE_AFTER_END", "write after end");
createErrorType("ERR_STREAM_NULL_VALUES", "May not write null values to stream", TypeError);
createErrorType("ERR_UNKNOWN_ENCODING", function(arg) {
  return "Unknown encoding: " + arg;
}, TypeError);
createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT", "stream.unshift() after end event");
errorsBrowser.codes = codes;
var ERR_INVALID_OPT_VALUE = errorsBrowser.codes.ERR_INVALID_OPT_VALUE;
function highWaterMarkFrom(options, isDuplex, duplexKey) {
  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null;
}
function getHighWaterMark$2(state2, options, duplexKey, isDuplex) {
  var hwm = highWaterMarkFrom(options, isDuplex, duplexKey);
  if (hwm != null) {
    if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {
      var name = isDuplex ? duplexKey : "highWaterMark";
      throw new ERR_INVALID_OPT_VALUE(name, hwm);
    }
    return Math.floor(hwm);
  }
  return state2.objectMode ? 16 : 16 * 1024;
}
var state = {
  getHighWaterMark: getHighWaterMark$2
};
var inherits_browser = { exports: {} };
if (typeof Object.create === "function") {
  inherits_browser.exports = function inherits(ctor, superCtor) {
    if (superCtor) {
      ctor.super_ = superCtor;
      ctor.prototype = Object.create(superCtor.prototype, {
        constructor: {
          value: ctor,
          enumerable: false,
          writable: true,
          configurable: true
        }
      });
    }
  };
} else {
  inherits_browser.exports = function inherits(ctor, superCtor) {
    if (superCtor) {
      ctor.super_ = superCtor;
      var TempCtor = function() {
      };
      TempCtor.prototype = superCtor.prototype;
      ctor.prototype = new TempCtor();
      ctor.prototype.constructor = ctor;
    }
  };
}
var string_decoder = {};
var safeBuffer = { exports: {} };
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
(function(module2, exports2) {
  var buffer$1 = buffer;
  var Buffer2 = buffer$1.Buffer;
  function copyProps(src, dst) {
    for (var key in src) {
      dst[key] = src[key];
    }
  }
  if (Buffer2.from && Buffer2.alloc && Buffer2.allocUnsafe && Buffer2.allocUnsafeSlow) {
    module2.exports = buffer$1;
  } else {
    copyProps(buffer$1, exports2);
    exports2.Buffer = SafeBuffer;
  }
  function SafeBuffer(arg, encodingOrOffset, length) {
    return Buffer2(arg, encodingOrOffset, length);
  }
  SafeBuffer.prototype = Object.create(Buffer2.prototype);
  copyProps(Buffer2, SafeBuffer);
  SafeBuffer.from = function(arg, encodingOrOffset, length) {
    if (typeof arg === "number") {
      throw new TypeError("Argument must not be a number");
    }
    return Buffer2(arg, encodingOrOffset, length);
  };
  SafeBuffer.alloc = function(size, fill, encoding) {
    if (typeof size !== "number") {
      throw new TypeError("Argument must be a number");
    }
    var buf = Buffer2(size);
    if (fill !== void 0) {
      if (typeof encoding === "string") {
        buf.fill(fill, encoding);
      } else {
        buf.fill(fill);
      }
    } else {
      buf.fill(0);
    }
    return buf;
  };
  SafeBuffer.allocUnsafe = function(size) {
    if (typeof size !== "number") {
      throw new TypeError("Argument must be a number");
    }
    return Buffer2(size);
  };
  SafeBuffer.allocUnsafeSlow = function(size) {
    if (typeof size !== "number") {
      throw new TypeError("Argument must be a number");
    }
    return buffer$1.SlowBuffer(size);
  };
})(safeBuffer, safeBuffer.exports);
var Buffer$3 = safeBuffer.exports.Buffer;
var isEncoding = Buffer$3.isEncoding || function(encoding) {
  encoding = "" + encoding;
  switch (encoding && encoding.toLowerCase()) {
    case "hex":
    case "utf8":
    case "utf-8":
    case "ascii":
    case "binary":
    case "base64":
    case "ucs2":
    case "ucs-2":
    case "utf16le":
    case "utf-16le":
    case "raw":
      return true;
    default:
      return false;
  }
};
function _normalizeEncoding(enc) {
  if (!enc)
    return "utf8";
  var retried;
  while (true) {
    switch (enc) {
      case "utf8":
      case "utf-8":
        return "utf8";
      case "ucs2":
      case "ucs-2":
      case "utf16le":
      case "utf-16le":
        return "utf16le";
      case "latin1":
      case "binary":
        return "latin1";
      case "base64":
      case "ascii":
      case "hex":
        return enc;
      default:
        if (retried)
          return;
        enc = ("" + enc).toLowerCase();
        retried = true;
    }
  }
}
function normalizeEncoding(enc) {
  var nenc = _normalizeEncoding(enc);
  if (typeof nenc !== "string" && (Buffer$3.isEncoding === isEncoding || !isEncoding(enc)))
    throw new Error("Unknown encoding: " + enc);
  return nenc || enc;
}
string_decoder.StringDecoder = StringDecoder$1;
function StringDecoder$1(encoding) {
  this.encoding = normalizeEncoding(encoding);
  var nb;
  switch (this.encoding) {
    case "utf16le":
      this.text = utf16Text;
      this.end = utf16End;
      nb = 4;
      break;
    case "utf8":
      this.fillLast = utf8FillLast;
      nb = 4;
      break;
    case "base64":
      this.text = base64Text;
      this.end = base64End;
      nb = 3;
      break;
    default:
      this.write = simpleWrite;
      this.end = simpleEnd;
      return;
  }
  this.lastNeed = 0;
  this.lastTotal = 0;
  this.lastChar = Buffer$3.allocUnsafe(nb);
}
StringDecoder$1.prototype.write = function(buf) {
  if (buf.length === 0)
    return "";
  var r;
  var i2;
  if (this.lastNeed) {
    r = this.fillLast(buf);
    if (r === void 0)
      return "";
    i2 = this.lastNeed;
    this.lastNeed = 0;
  } else {
    i2 = 0;
  }
  if (i2 < buf.length)
    return r ? r + this.text(buf, i2) : this.text(buf, i2);
  return r || "";
};
StringDecoder$1.prototype.end = utf8End;
StringDecoder$1.prototype.text = utf8Text;
StringDecoder$1.prototype.fillLast = function(buf) {
  if (this.lastNeed <= buf.length) {
    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);
    return this.lastChar.toString(this.encoding, 0, this.lastTotal);
  }
  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);
  this.lastNeed -= buf.length;
};
function utf8CheckByte(byte) {
  if (byte <= 127)
    return 0;
  else if (byte >> 5 === 6)
    return 2;
  else if (byte >> 4 === 14)
    return 3;
  else if (byte >> 3 === 30)
    return 4;
  return byte >> 6 === 2 ? -1 : -2;
}
function utf8CheckIncomplete(self2, buf, i2) {
  var j = buf.length - 1;
  if (j < i2)
    return 0;
  var nb = utf8CheckByte(buf[j]);
  if (nb >= 0) {
    if (nb > 0)
      self2.lastNeed = nb - 1;
    return nb;
  }
  if (--j < i2 || nb === -2)
    return 0;
  nb = utf8CheckByte(buf[j]);
  if (nb >= 0) {
    if (nb > 0)
      self2.lastNeed = nb - 2;
    return nb;
  }
  if (--j < i2 || nb === -2)
    return 0;
  nb = utf8CheckByte(buf[j]);
  if (nb >= 0) {
    if (nb > 0) {
      if (nb === 2)
        nb = 0;
      else
        self2.lastNeed = nb - 3;
    }
    return nb;
  }
  return 0;
}
function utf8CheckExtraBytes(self2, buf, p2) {
  if ((buf[0] & 192) !== 128) {
    self2.lastNeed = 0;
    return "\uFFFD";
  }
  if (self2.lastNeed > 1 && buf.length > 1) {
    if ((buf[1] & 192) !== 128) {
      self2.lastNeed = 1;
      return "\uFFFD";
    }
    if (self2.lastNeed > 2 && buf.length > 2) {
      if ((buf[2] & 192) !== 128) {
        self2.lastNeed = 2;
        return "\uFFFD";
      }
    }
  }
}
function utf8FillLast(buf) {
  var p2 = this.lastTotal - this.lastNeed;
  var r = utf8CheckExtraBytes(this, buf);
  if (r !== void 0)
    return r;
  if (this.lastNeed <= buf.length) {
    buf.copy(this.lastChar, p2, 0, this.lastNeed);
    return this.lastChar.toString(this.encoding, 0, this.lastTotal);
  }
  buf.copy(this.lastChar, p2, 0, buf.length);
  this.lastNeed -= buf.length;
}
function utf8Text(buf, i2) {
  var total = utf8CheckIncomplete(this, buf, i2);
  if (!this.lastNeed)
    return buf.toString("utf8", i2);
  this.lastTotal = total;
  var end = buf.length - (total - this.lastNeed);
  buf.copy(this.lastChar, 0, end);
  return buf.toString("utf8", i2, end);
}
function utf8End(buf) {
  var r = buf && buf.length ? this.write(buf) : "";
  if (this.lastNeed)
    return r + "\uFFFD";
  return r;
}
function utf16Text(buf, i2) {
  if ((buf.length - i2) % 2 === 0) {
    var r = buf.toString("utf16le", i2);
    if (r) {
      var c = r.charCodeAt(r.length - 1);
      if (c >= 55296 && c <= 56319) {
        this.lastNeed = 2;
        this.lastTotal = 4;
        this.lastChar[0] = buf[buf.length - 2];
        this.lastChar[1] = buf[buf.length - 1];
        return r.slice(0, -1);
      }
    }
    return r;
  }
  this.lastNeed = 1;
  this.lastTotal = 2;
  this.lastChar[0] = buf[buf.length - 1];
  return buf.toString("utf16le", i2, buf.length - 1);
}
function utf16End(buf) {
  var r = buf && buf.length ? this.write(buf) : "";
  if (this.lastNeed) {
    var end = this.lastTotal - this.lastNeed;
    return r + this.lastChar.toString("utf16le", 0, end);
  }
  return r;
}
function base64Text(buf, i2) {
  var n = (buf.length - i2) % 3;
  if (n === 0)
    return buf.toString("base64", i2);
  this.lastNeed = 3 - n;
  this.lastTotal = 3;
  if (n === 1) {
    this.lastChar[0] = buf[buf.length - 1];
  } else {
    this.lastChar[0] = buf[buf.length - 2];
    this.lastChar[1] = buf[buf.length - 1];
  }
  return buf.toString("base64", i2, buf.length - n);
}
function base64End(buf) {
  var r = buf && buf.length ? this.write(buf) : "";
  if (this.lastNeed)
    return r + this.lastChar.toString("base64", 0, 3 - this.lastNeed);
  return r;
}
function simpleWrite(buf) {
  return buf.toString(this.encoding);
}
function simpleEnd(buf) {
  return buf && buf.length ? this.write(buf) : "";
}
var ERR_STREAM_PREMATURE_CLOSE = errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;
function once$1(callback) {
  var called = false;
  return function() {
    if (called)
      return;
    called = true;
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    callback.apply(this, args);
  };
}
function noop$1() {
}
function isRequest$1(stream) {
  return stream.setHeader && typeof stream.abort === "function";
}
function eos$1(stream, opts, callback) {
  if (typeof opts === "function")
    return eos$1(stream, null, opts);
  if (!opts)
    opts = {};
  callback = once$1(callback || noop$1);
  var readable2 = opts.readable || opts.readable !== false && stream.readable;
  var writable2 = opts.writable || opts.writable !== false && stream.writable;
  var onlegacyfinish = function onlegacyfinish2() {
    if (!stream.writable)
      onfinish();
  };
  var writableEnded = stream._writableState && stream._writableState.finished;
  var onfinish = function onfinish2() {
    writable2 = false;
    writableEnded = true;
    if (!readable2)
      callback.call(stream);
  };
  var readableEnded = stream._readableState && stream._readableState.endEmitted;
  var onend2 = function onend3() {
    readable2 = false;
    readableEnded = true;
    if (!writable2)
      callback.call(stream);
  };
  var onerror = function onerror2(err) {
    callback.call(stream, err);
  };
  var onclose = function onclose2() {
    var err;
    if (readable2 && !readableEnded) {
      if (!stream._readableState || !stream._readableState.ended)
        err = new ERR_STREAM_PREMATURE_CLOSE();
      return callback.call(stream, err);
    }
    if (writable2 && !writableEnded) {
      if (!stream._writableState || !stream._writableState.ended)
        err = new ERR_STREAM_PREMATURE_CLOSE();
      return callback.call(stream, err);
    }
  };
  var onrequest = function onrequest2() {
    stream.req.on("finish", onfinish);
  };
  if (isRequest$1(stream)) {
    stream.on("complete", onfinish);
    stream.on("abort", onclose);
    if (stream.req)
      onrequest();
    else
      stream.on("request", onrequest);
  } else if (writable2 && !stream._writableState) {
    stream.on("end", onlegacyfinish);
    stream.on("close", onlegacyfinish);
  }
  stream.on("end", onend2);
  stream.on("finish", onfinish);
  if (opts.error !== false)
    stream.on("error", onerror);
  stream.on("close", onclose);
  return function() {
    stream.removeListener("complete", onfinish);
    stream.removeListener("abort", onclose);
    stream.removeListener("request", onrequest);
    if (stream.req)
      stream.req.removeListener("finish", onfinish);
    stream.removeListener("end", onlegacyfinish);
    stream.removeListener("close", onlegacyfinish);
    stream.removeListener("finish", onfinish);
    stream.removeListener("end", onend2);
    stream.removeListener("error", onerror);
    stream.removeListener("close", onclose);
  };
}
var endOfStream = eos$1;
var _Object$setPrototypeO;
function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, { value, enumerable: true, configurable: true, writable: true });
  } else {
    obj[key] = value;
  }
  return obj;
}
var finished = endOfStream;
var kLastResolve = Symbol("lastResolve");
var kLastReject = Symbol("lastReject");
var kError = Symbol("error");
var kEnded = Symbol("ended");
var kLastPromise = Symbol("lastPromise");
var kHandlePromise = Symbol("handlePromise");
var kStream = Symbol("stream");
function createIterResult(value, done2) {
  return {
    value,
    done: done2
  };
}
function readAndResolve(iter) {
  var resolve = iter[kLastResolve];
  if (resolve !== null) {
    var data = iter[kStream].read();
    if (data !== null) {
      iter[kLastPromise] = null;
      iter[kLastResolve] = null;
      iter[kLastReject] = null;
      resolve(createIterResult(data, false));
    }
  }
}
function onReadable(iter) {
  process.nextTick(readAndResolve, iter);
}
function wrapForNext(lastPromise, iter) {
  return function(resolve, reject) {
    lastPromise.then(function() {
      if (iter[kEnded]) {
        resolve(createIterResult(void 0, true));
        return;
      }
      iter[kHandlePromise](resolve, reject);
    }, reject);
  };
}
var AsyncIteratorPrototype = Object.getPrototypeOf(function() {
});
var ReadableStreamAsyncIteratorPrototype = Object.setPrototypeOf((_Object$setPrototypeO = {
  get stream() {
    return this[kStream];
  },
  next: function next() {
    var _this = this;
    var error = this[kError];
    if (error !== null) {
      return Promise.reject(error);
    }
    if (this[kEnded]) {
      return Promise.resolve(createIterResult(void 0, true));
    }
    if (this[kStream].destroyed) {
      return new Promise(function(resolve, reject) {
        process.nextTick(function() {
          if (_this[kError]) {
            reject(_this[kError]);
          } else {
            resolve(createIterResult(void 0, true));
          }
        });
      });
    }
    var lastPromise = this[kLastPromise];
    var promise2;
    if (lastPromise) {
      promise2 = new Promise(wrapForNext(lastPromise, this));
    } else {
      var data = this[kStream].read();
      if (data !== null) {
        return Promise.resolve(createIterResult(data, false));
      }
      promise2 = new Promise(this[kHandlePromise]);
    }
    this[kLastPromise] = promise2;
    return promise2;
  }
}, _defineProperty(_Object$setPrototypeO, Symbol.asyncIterator, function() {
  return this;
}), _defineProperty(_Object$setPrototypeO, "return", function _return() {
  var _this2 = this;
  return new Promise(function(resolve, reject) {
    _this2[kStream].destroy(null, function(err) {
      if (err) {
        reject(err);
        return;
      }
      resolve(createIterResult(void 0, true));
    });
  });
}), _Object$setPrototypeO), AsyncIteratorPrototype);
var createReadableStreamAsyncIterator$1 = function createReadableStreamAsyncIterator2(stream) {
  var _Object$create;
  var iterator = Object.create(ReadableStreamAsyncIteratorPrototype, (_Object$create = {}, _defineProperty(_Object$create, kStream, {
    value: stream,
    writable: true
  }), _defineProperty(_Object$create, kLastResolve, {
    value: null,
    writable: true
  }), _defineProperty(_Object$create, kLastReject, {
    value: null,
    writable: true
  }), _defineProperty(_Object$create, kError, {
    value: null,
    writable: true
  }), _defineProperty(_Object$create, kEnded, {
    value: stream._readableState.endEmitted,
    writable: true
  }), _defineProperty(_Object$create, kHandlePromise, {
    value: function value(resolve, reject) {
      var data = iterator[kStream].read();
      if (data) {
        iterator[kLastPromise] = null;
        iterator[kLastResolve] = null;
        iterator[kLastReject] = null;
        resolve(createIterResult(data, false));
      } else {
        iterator[kLastResolve] = resolve;
        iterator[kLastReject] = reject;
      }
    },
    writable: true
  }), _Object$create));
  iterator[kLastPromise] = null;
  finished(stream, function(err) {
    if (err && err.code !== "ERR_STREAM_PREMATURE_CLOSE") {
      var reject = iterator[kLastReject];
      if (reject !== null) {
        iterator[kLastPromise] = null;
        iterator[kLastResolve] = null;
        iterator[kLastReject] = null;
        reject(err);
      }
      iterator[kError] = err;
      return;
    }
    var resolve = iterator[kLastResolve];
    if (resolve !== null) {
      iterator[kLastPromise] = null;
      iterator[kLastResolve] = null;
      iterator[kLastReject] = null;
      resolve(createIterResult(void 0, true));
    }
    iterator[kEnded] = true;
  });
  stream.on("readable", onReadable.bind(null, iterator));
  return iterator;
};
var async_iterator = createReadableStreamAsyncIterator$1;
var fromBrowser = function() {
  throw new Error("Readable.from is not available in the browser");
};
const Registry$4 = _registry;
Registry$4.Readable = Readable;
Readable.ReadableState = ReadableState;
events.exports.EventEmitter;
var EElistenerCount = function EElistenerCount2(emitter, type) {
  return emitter.listeners(type).length;
};
var Stream$1 = streamBrowser;
var Buffer$2 = buffer.Buffer;
var OurUint8Array$1 = globalThis.Uint8Array || function() {
};
function _uint8ArrayToBuffer$1(chunk) {
  return Buffer$2.from(chunk);
}
function _isUint8Array$1(obj) {
  return Buffer$2.isBuffer(obj) || obj instanceof OurUint8Array$1;
}
var debugUtil = require$$4;
var debug;
if (debugUtil && debugUtil.debuglog) {
  debug = debugUtil.debuglog("stream");
} else {
  debug = function debug2() {
  };
}
var BufferList = buffer_list;
var destroyImpl$1 = destroy_1;
var _require$1 = state, getHighWaterMark$1 = _require$1.getHighWaterMark;
var _require$codes$3 = errorsBrowser.codes, ERR_INVALID_ARG_TYPE$1 = _require$codes$3.ERR_INVALID_ARG_TYPE, ERR_STREAM_PUSH_AFTER_EOF = _require$codes$3.ERR_STREAM_PUSH_AFTER_EOF, ERR_METHOD_NOT_IMPLEMENTED$2 = _require$codes$3.ERR_METHOD_NOT_IMPLEMENTED, ERR_STREAM_UNSHIFT_AFTER_END_EVENT = _require$codes$3.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;
var StringDecoder;
var createReadableStreamAsyncIterator;
var from;
inherits_browser.exports(Readable, Stream$1);
var errorOrDestroy$1 = destroyImpl$1.errorOrDestroy;
var kProxyEvents = ["error", "close", "destroy", "pause", "resume"];
function prependListener(emitter, event, fn) {
  if (typeof emitter.prependListener === "function")
    return emitter.prependListener(event, fn);
  if (!emitter._events || !emitter._events[event])
    emitter.on(event, fn);
  else if (Array.isArray(emitter._events[event]))
    emitter._events[event].unshift(fn);
  else
    emitter._events[event] = [fn, emitter._events[event]];
}
function ReadableState(options, stream, isDuplex) {
  options = options || {};
  if (typeof isDuplex !== "boolean")
    isDuplex = stream instanceof Registry$4.Duplex;
  this.objectMode = !!options.objectMode;
  if (isDuplex)
    this.objectMode = this.objectMode || !!options.readableObjectMode;
  this.highWaterMark = getHighWaterMark$1(this, options, "readableHighWaterMark", isDuplex);
  this.buffer = new BufferList();
  this.length = 0;
  this.pipes = null;
  this.pipesCount = 0;
  this.flowing = null;
  this.ended = false;
  this.endEmitted = false;
  this.reading = false;
  this.sync = true;
  this.needReadable = false;
  this.emittedReadable = false;
  this.readableListening = false;
  this.resumeScheduled = false;
  this.paused = true;
  this.emitClose = options.emitClose !== false;
  this.autoDestroy = !!options.autoDestroy;
  this.destroyed = false;
  this.defaultEncoding = options.defaultEncoding || "utf8";
  this.awaitDrain = 0;
  this.readingMore = false;
  this.decoder = null;
  this.encoding = null;
  if (options.encoding) {
    if (!StringDecoder)
      StringDecoder = string_decoder.StringDecoder;
    this.decoder = new StringDecoder(options.encoding);
    this.encoding = options.encoding;
  }
}
function Readable(options) {
  if (!(this instanceof Readable))
    return new Readable(options);
  var isDuplex = this instanceof Registry$4.Duplex;
  this._readableState = new ReadableState(options, this, isDuplex);
  this.readable = true;
  if (options) {
    if (typeof options.read === "function")
      this._read = options.read;
    if (typeof options.destroy === "function")
      this._destroy = options.destroy;
  }
  Stream$1.call(this);
}
Object.defineProperty(Readable.prototype, "destroyed", {
  enumerable: false,
  get: function get() {
    if (this._readableState === void 0) {
      return false;
    }
    return this._readableState.destroyed;
  },
  set: function set(value) {
    if (!this._readableState) {
      return;
    }
    this._readableState.destroyed = value;
  }
});
Readable.prototype.destroy = destroyImpl$1.destroy;
Readable.prototype._undestroy = destroyImpl$1.undestroy;
Readable.prototype._destroy = function(err, cb) {
  cb(err);
};
Readable.prototype.push = function(chunk, encoding) {
  var state2 = this._readableState;
  var skipChunkCheck;
  if (!state2.objectMode) {
    if (typeof chunk === "string") {
      encoding = encoding || state2.defaultEncoding;
      if (encoding !== state2.encoding) {
        chunk = Buffer$2.from(chunk, encoding);
        encoding = "";
      }
      skipChunkCheck = true;
    }
  } else {
    skipChunkCheck = true;
  }
  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);
};
Readable.prototype.unshift = function(chunk) {
  return readableAddChunk(this, chunk, null, true, false);
};
function readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {
  debug("readableAddChunk", chunk);
  var state2 = stream._readableState;
  if (chunk === null) {
    state2.reading = false;
    onEofChunk(stream, state2);
  } else {
    var er;
    if (!skipChunkCheck)
      er = chunkInvalid(state2, chunk);
    if (er) {
      errorOrDestroy$1(stream, er);
    } else if (state2.objectMode || chunk && chunk.length > 0) {
      if (typeof chunk !== "string" && !state2.objectMode && Object.getPrototypeOf(chunk) !== Buffer$2.prototype) {
        chunk = _uint8ArrayToBuffer$1(chunk);
      }
      if (addToFront) {
        if (state2.endEmitted)
          errorOrDestroy$1(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());
        else
          addChunk(stream, state2, chunk, true);
      } else if (state2.ended) {
        errorOrDestroy$1(stream, new ERR_STREAM_PUSH_AFTER_EOF());
      } else if (state2.destroyed) {
        return false;
      } else {
        state2.reading = false;
        if (state2.decoder && !encoding) {
          chunk = state2.decoder.write(chunk);
          if (state2.objectMode || chunk.length !== 0)
            addChunk(stream, state2, chunk, false);
          else
            maybeReadMore(stream, state2);
        } else {
          addChunk(stream, state2, chunk, false);
        }
      }
    } else if (!addToFront) {
      state2.reading = false;
      maybeReadMore(stream, state2);
    }
  }
  return !state2.ended && (state2.length < state2.highWaterMark || state2.length === 0);
}
function addChunk(stream, state2, chunk, addToFront) {
  if (state2.flowing && state2.length === 0 && !state2.sync) {
    state2.awaitDrain = 0;
    stream.emit("data", chunk);
  } else {
    state2.length += state2.objectMode ? 1 : chunk.length;
    if (addToFront)
      state2.buffer.unshift(chunk);
    else
      state2.buffer.push(chunk);
    if (state2.needReadable)
      emitReadable(stream);
  }
  maybeReadMore(stream, state2);
}
function chunkInvalid(state2, chunk) {
  var er;
  if (!_isUint8Array$1(chunk) && typeof chunk !== "string" && chunk !== void 0 && !state2.objectMode) {
    er = new ERR_INVALID_ARG_TYPE$1("chunk", ["string", "Buffer", "Uint8Array"], chunk);
  }
  return er;
}
Readable.prototype.isPaused = function() {
  return this._readableState.flowing === false;
};
Readable.prototype.setEncoding = function(enc) {
  if (!StringDecoder)
    StringDecoder = string_decoder.StringDecoder;
  var decoder = new StringDecoder(enc);
  this._readableState.decoder = decoder;
  this._readableState.encoding = this._readableState.decoder.encoding;
  var p2 = this._readableState.buffer.head;
  var content = "";
  while (p2 !== null) {
    content += decoder.write(p2.data);
    p2 = p2.next;
  }
  this._readableState.buffer.clear();
  if (content !== "")
    this._readableState.buffer.push(content);
  this._readableState.length = content.length;
  return this;
};
var MAX_HWM = 1073741824;
function computeNewHighWaterMark(n) {
  if (n >= MAX_HWM) {
    n = MAX_HWM;
  } else {
    n--;
    n |= n >>> 1;
    n |= n >>> 2;
    n |= n >>> 4;
    n |= n >>> 8;
    n |= n >>> 16;
    n++;
  }
  return n;
}
function howMuchToRead(n, state2) {
  if (n <= 0 || state2.length === 0 && state2.ended)
    return 0;
  if (state2.objectMode)
    return 1;
  if (n !== n) {
    if (state2.flowing && state2.length)
      return state2.buffer.head.data.length;
    else
      return state2.length;
  }
  if (n > state2.highWaterMark)
    state2.highWaterMark = computeNewHighWaterMark(n);
  if (n <= state2.length)
    return n;
  if (!state2.ended) {
    state2.needReadable = true;
    return 0;
  }
  return state2.length;
}
Readable.prototype.read = function(n) {
  debug("read", n);
  n = parseInt(n, 10);
  var state2 = this._readableState;
  var nOrig = n;
  if (n !== 0)
    state2.emittedReadable = false;
  if (n === 0 && state2.needReadable && ((state2.highWaterMark !== 0 ? state2.length >= state2.highWaterMark : state2.length > 0) || state2.ended)) {
    debug("read: emitReadable", state2.length, state2.ended);
    if (state2.length === 0 && state2.ended)
      endReadable(this);
    else
      emitReadable(this);
    return null;
  }
  n = howMuchToRead(n, state2);
  if (n === 0 && state2.ended) {
    if (state2.length === 0)
      endReadable(this);
    return null;
  }
  var doRead = state2.needReadable;
  debug("need readable", doRead);
  if (state2.length === 0 || state2.length - n < state2.highWaterMark) {
    doRead = true;
    debug("length less than watermark", doRead);
  }
  if (state2.ended || state2.reading) {
    doRead = false;
    debug("reading or ended", doRead);
  } else if (doRead) {
    debug("do read");
    state2.reading = true;
    state2.sync = true;
    if (state2.length === 0)
      state2.needReadable = true;
    this._read(state2.highWaterMark);
    state2.sync = false;
    if (!state2.reading)
      n = howMuchToRead(nOrig, state2);
  }
  var ret;
  if (n > 0)
    ret = fromList(n, state2);
  else
    ret = null;
  if (ret === null) {
    state2.needReadable = state2.length <= state2.highWaterMark;
    n = 0;
  } else {
    state2.length -= n;
    state2.awaitDrain = 0;
  }
  if (state2.length === 0) {
    if (!state2.ended)
      state2.needReadable = true;
    if (nOrig !== n && state2.ended)
      endReadable(this);
  }
  if (ret !== null)
    this.emit("data", ret);
  return ret;
};
function onEofChunk(stream, state2) {
  debug("onEofChunk");
  if (state2.ended)
    return;
  if (state2.decoder) {
    var chunk = state2.decoder.end();
    if (chunk && chunk.length) {
      state2.buffer.push(chunk);
      state2.length += state2.objectMode ? 1 : chunk.length;
    }
  }
  state2.ended = true;
  if (state2.sync) {
    emitReadable(stream);
  } else {
    state2.needReadable = false;
    if (!state2.emittedReadable) {
      state2.emittedReadable = true;
      emitReadable_(stream);
    }
  }
}
function emitReadable(stream) {
  var state2 = stream._readableState;
  debug("emitReadable", state2.needReadable, state2.emittedReadable);
  state2.needReadable = false;
  if (!state2.emittedReadable) {
    debug("emitReadable", state2.flowing);
    state2.emittedReadable = true;
    process.nextTick(emitReadable_, stream);
  }
}
function emitReadable_(stream) {
  var state2 = stream._readableState;
  debug("emitReadable_", state2.destroyed, state2.length, state2.ended);
  if (!state2.destroyed && (state2.length || state2.ended)) {
    stream.emit("readable");
    state2.emittedReadable = false;
  }
  state2.needReadable = !state2.flowing && !state2.ended && state2.length <= state2.highWaterMark;
  flow(stream);
}
function maybeReadMore(stream, state2) {
  if (!state2.readingMore) {
    state2.readingMore = true;
    process.nextTick(maybeReadMore_, stream, state2);
  }
}
function maybeReadMore_(stream, state2) {
  while (!state2.reading && !state2.ended && (state2.length < state2.highWaterMark || state2.flowing && state2.length === 0)) {
    var len2 = state2.length;
    debug("maybeReadMore read 0");
    stream.read(0);
    if (len2 === state2.length)
      break;
  }
  state2.readingMore = false;
}
Readable.prototype._read = function(n) {
  errorOrDestroy$1(this, new ERR_METHOD_NOT_IMPLEMENTED$2("_read()"));
};
Readable.prototype.pipe = function(dest, pipeOpts) {
  var src = this;
  var state2 = this._readableState;
  switch (state2.pipesCount) {
    case 0:
      state2.pipes = dest;
      break;
    case 1:
      state2.pipes = [state2.pipes, dest];
      break;
    default:
      state2.pipes.push(dest);
      break;
  }
  state2.pipesCount += 1;
  debug("pipe count=%d opts=%j", state2.pipesCount, pipeOpts);
  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;
  var endFn = doEnd ? onend2 : unpipe;
  if (state2.endEmitted)
    process.nextTick(endFn);
  else
    src.once("end", endFn);
  dest.on("unpipe", onunpipe);
  function onunpipe(readable2, unpipeInfo) {
    debug("onunpipe");
    if (readable2 === src) {
      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {
        unpipeInfo.hasUnpiped = true;
        cleanup();
      }
    }
  }
  function onend2() {
    debug("onend");
    dest.end();
  }
  var ondrain = pipeOnDrain(src);
  dest.on("drain", ondrain);
  var cleanedUp = false;
  function cleanup() {
    debug("cleanup");
    dest.removeListener("close", onclose);
    dest.removeListener("finish", onfinish);
    dest.removeListener("drain", ondrain);
    dest.removeListener("error", onerror);
    dest.removeListener("unpipe", onunpipe);
    src.removeListener("end", onend2);
    src.removeListener("end", unpipe);
    src.removeListener("data", ondata);
    cleanedUp = true;
    if (state2.awaitDrain && (!dest._writableState || dest._writableState.needDrain))
      ondrain();
  }
  src.on("data", ondata);
  function ondata(chunk) {
    debug("ondata");
    var ret = dest.write(chunk);
    debug("dest.write", ret);
    if (ret === false) {
      if ((state2.pipesCount === 1 && state2.pipes === dest || state2.pipesCount > 1 && indexOf(state2.pipes, dest) !== -1) && !cleanedUp) {
        debug("false write response, pause", state2.awaitDrain);
        state2.awaitDrain++;
      }
      src.pause();
    }
  }
  function onerror(er) {
    debug("onerror", er);
    unpipe();
    dest.removeListener("error", onerror);
    if (EElistenerCount(dest, "error") === 0)
      errorOrDestroy$1(dest, er);
  }
  prependListener(dest, "error", onerror);
  function onclose() {
    dest.removeListener("finish", onfinish);
    unpipe();
  }
  dest.once("close", onclose);
  function onfinish() {
    debug("onfinish");
    dest.removeListener("close", onclose);
    unpipe();
  }
  dest.once("finish", onfinish);
  function unpipe() {
    debug("unpipe");
    src.unpipe(dest);
  }
  dest.emit("pipe", src);
  if (!state2.flowing) {
    debug("pipe resume");
    src.resume();
  }
  return dest;
};
function pipeOnDrain(src) {
  return function pipeOnDrainFunctionResult() {
    var state2 = src._readableState;
    debug("pipeOnDrain", state2.awaitDrain);
    if (state2.awaitDrain)
      state2.awaitDrain--;
    if (state2.awaitDrain === 0 && EElistenerCount(src, "data")) {
      state2.flowing = true;
      flow(src);
    }
  };
}
Readable.prototype.unpipe = function(dest) {
  var state2 = this._readableState;
  var unpipeInfo = {
    hasUnpiped: false
  };
  if (state2.pipesCount === 0)
    return this;
  if (state2.pipesCount === 1) {
    if (dest && dest !== state2.pipes)
      return this;
    if (!dest)
      dest = state2.pipes;
    state2.pipes = null;
    state2.pipesCount = 0;
    state2.flowing = false;
    if (dest)
      dest.emit("unpipe", this, unpipeInfo);
    return this;
  }
  if (!dest) {
    var dests = state2.pipes;
    var len2 = state2.pipesCount;
    state2.pipes = null;
    state2.pipesCount = 0;
    state2.flowing = false;
    for (var i2 = 0; i2 < len2; i2++) {
      dests[i2].emit("unpipe", this, {
        hasUnpiped: false
      });
    }
    return this;
  }
  var index = indexOf(state2.pipes, dest);
  if (index === -1)
    return this;
  state2.pipes.splice(index, 1);
  state2.pipesCount -= 1;
  if (state2.pipesCount === 1)
    state2.pipes = state2.pipes[0];
  dest.emit("unpipe", this, unpipeInfo);
  return this;
};
Readable.prototype.on = function(ev, fn) {
  var res = Stream$1.prototype.on.call(this, ev, fn);
  var state2 = this._readableState;
  if (ev === "data") {
    state2.readableListening = this.listenerCount("readable") > 0;
    if (state2.flowing !== false)
      this.resume();
  } else if (ev === "readable") {
    if (!state2.endEmitted && !state2.readableListening) {
      state2.readableListening = state2.needReadable = true;
      state2.flowing = false;
      state2.emittedReadable = false;
      debug("on readable", state2.length, state2.reading);
      if (state2.length) {
        emitReadable(this);
      } else if (!state2.reading) {
        process.nextTick(nReadingNextTick, this);
      }
    }
  }
  return res;
};
Readable.prototype.addListener = Readable.prototype.on;
Readable.prototype.removeListener = function(ev, fn) {
  var res = Stream$1.prototype.removeListener.call(this, ev, fn);
  if (ev === "readable") {
    process.nextTick(updateReadableListening, this);
  }
  return res;
};
Readable.prototype.removeAllListeners = function(ev) {
  var res = Stream$1.prototype.removeAllListeners.apply(this, arguments);
  if (ev === "readable" || ev === void 0) {
    process.nextTick(updateReadableListening, this);
  }
  return res;
};
function updateReadableListening(self2) {
  var state2 = self2._readableState;
  state2.readableListening = self2.listenerCount("readable") > 0;
  if (state2.resumeScheduled && !state2.paused) {
    state2.flowing = true;
  } else if (self2.listenerCount("data") > 0) {
    self2.resume();
  }
}
function nReadingNextTick(self2) {
  debug("readable nexttick read 0");
  self2.read(0);
}
Readable.prototype.resume = function() {
  var state2 = this._readableState;
  if (!state2.flowing) {
    debug("resume");
    state2.flowing = !state2.readableListening;
    resume(this, state2);
  }
  state2.paused = false;
  return this;
};
function resume(stream, state2) {
  if (!state2.resumeScheduled) {
    state2.resumeScheduled = true;
    process.nextTick(resume_, stream, state2);
  }
}
function resume_(stream, state2) {
  debug("resume", state2.reading);
  if (!state2.reading) {
    stream.read(0);
  }
  state2.resumeScheduled = false;
  stream.emit("resume");
  flow(stream);
  if (state2.flowing && !state2.reading)
    stream.read(0);
}
Readable.prototype.pause = function() {
  debug("call pause flowing=%j", this._readableState.flowing);
  if (this._readableState.flowing !== false) {
    debug("pause");
    this._readableState.flowing = false;
    this.emit("pause");
  }
  this._readableState.paused = true;
  return this;
};
function flow(stream) {
  var state2 = stream._readableState;
  debug("flow", state2.flowing);
  while (state2.flowing && stream.read() !== null) {
  }
}
Readable.prototype.wrap = function(stream) {
  var _this = this;
  var state2 = this._readableState;
  var paused = false;
  stream.on("end", function() {
    debug("wrapped end");
    if (state2.decoder && !state2.ended) {
      var chunk = state2.decoder.end();
      if (chunk && chunk.length)
        _this.push(chunk);
    }
    _this.push(null);
  });
  stream.on("data", function(chunk) {
    debug("wrapped data");
    if (state2.decoder)
      chunk = state2.decoder.write(chunk);
    if (state2.objectMode && (chunk === null || chunk === void 0))
      return;
    else if (!state2.objectMode && (!chunk || !chunk.length))
      return;
    var ret = _this.push(chunk);
    if (!ret) {
      paused = true;
      stream.pause();
    }
  });
  for (var i2 in stream) {
    if (this[i2] === void 0 && typeof stream[i2] === "function") {
      this[i2] = function methodWrap(method2) {
        return function methodWrapReturnFunction() {
          return stream[method2].apply(stream, arguments);
        };
      }(i2);
    }
  }
  for (var n = 0; n < kProxyEvents.length; n++) {
    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));
  }
  this._read = function(n2) {
    debug("wrapped _read", n2);
    if (paused) {
      paused = false;
      stream.resume();
    }
  };
  return this;
};
if (typeof Symbol === "function") {
  Readable.prototype[Symbol.asyncIterator] = function() {
    if (createReadableStreamAsyncIterator === void 0) {
      createReadableStreamAsyncIterator = async_iterator;
    }
    return createReadableStreamAsyncIterator(this);
  };
}
Object.defineProperty(Readable.prototype, "readableHighWaterMark", {
  enumerable: false,
  get: function get2() {
    return this._readableState.highWaterMark;
  }
});
Object.defineProperty(Readable.prototype, "readableBuffer", {
  enumerable: false,
  get: function get3() {
    return this._readableState && this._readableState.buffer;
  }
});
Object.defineProperty(Readable.prototype, "readableFlowing", {
  enumerable: false,
  get: function get4() {
    return this._readableState.flowing;
  },
  set: function set2(state2) {
    if (this._readableState) {
      this._readableState.flowing = state2;
    }
  }
});
Readable._fromList = fromList;
Object.defineProperty(Readable.prototype, "readableLength", {
  enumerable: false,
  get: function get5() {
    return this._readableState.length;
  }
});
function fromList(n, state2) {
  if (state2.length === 0)
    return null;
  var ret;
  if (state2.objectMode)
    ret = state2.buffer.shift();
  else if (!n || n >= state2.length) {
    if (state2.decoder)
      ret = state2.buffer.join("");
    else if (state2.buffer.length === 1)
      ret = state2.buffer.first();
    else
      ret = state2.buffer.concat(state2.length);
    state2.buffer.clear();
  } else {
    ret = state2.buffer.consume(n, state2.decoder);
  }
  return ret;
}
function endReadable(stream) {
  var state2 = stream._readableState;
  debug("endReadable", state2.endEmitted);
  if (!state2.endEmitted) {
    state2.ended = true;
    process.nextTick(endReadableNT, state2, stream);
  }
}
function endReadableNT(state2, stream) {
  debug("endReadableNT", state2.endEmitted, state2.length);
  if (!state2.endEmitted && state2.length === 0) {
    state2.endEmitted = true;
    stream.readable = false;
    stream.emit("end");
    if (state2.autoDestroy) {
      var wState = stream._writableState;
      if (!wState || wState.autoDestroy && wState.finished) {
        stream.destroy();
      }
    }
  }
}
if (typeof Symbol === "function") {
  Readable.from = function(iterable, opts) {
    if (from === void 0) {
      from = fromBrowser;
    }
    return from(Readable, iterable, opts);
  };
}
function indexOf(xs, x) {
  for (var i2 = 0, l = xs.length; i2 < l; i2++) {
    if (xs[i2] === x)
      return i2;
  }
  return -1;
}
var browser = deprecate;
function deprecate(fn, msg) {
  if (config("noDeprecation")) {
    return fn;
  }
  var warned = false;
  function deprecated() {
    if (!warned) {
      if (config("throwDeprecation")) {
        throw new Error(msg);
      } else if (config("traceDeprecation")) {
        console.trace(msg);
      } else {
        console.warn(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }
  return deprecated;
}
function config(name) {
  try {
    if (!globalThis.localStorage)
      return false;
  } catch (_) {
    return false;
  }
  var val = globalThis.localStorage[name];
  if (val == null)
    return false;
  return String(val).toLowerCase() === "true";
}
const Registry$3 = _registry;
Registry$3.Writable = Writable;
function CorkedRequest(state2) {
  var _this = this;
  this.next = null;
  this.entry = null;
  this.finish = function() {
    onCorkedFinish(_this, state2);
  };
}
Writable.WritableState = WritableState;
var internalUtil = {
  deprecate: browser
};
var Stream = streamBrowser;
var Buffer$1 = buffer.Buffer;
var OurUint8Array = globalThis.Uint8Array || function() {
};
function _uint8ArrayToBuffer(chunk) {
  return Buffer$1.from(chunk);
}
function _isUint8Array(obj) {
  return Buffer$1.isBuffer(obj) || obj instanceof OurUint8Array;
}
var destroyImpl = destroy_1;
var _require = state, getHighWaterMark = _require.getHighWaterMark;
var _require$codes$2 = errorsBrowser.codes, ERR_INVALID_ARG_TYPE = _require$codes$2.ERR_INVALID_ARG_TYPE, ERR_METHOD_NOT_IMPLEMENTED$1 = _require$codes$2.ERR_METHOD_NOT_IMPLEMENTED, ERR_MULTIPLE_CALLBACK$1 = _require$codes$2.ERR_MULTIPLE_CALLBACK, ERR_STREAM_CANNOT_PIPE = _require$codes$2.ERR_STREAM_CANNOT_PIPE, ERR_STREAM_DESTROYED$1 = _require$codes$2.ERR_STREAM_DESTROYED, ERR_STREAM_NULL_VALUES = _require$codes$2.ERR_STREAM_NULL_VALUES, ERR_STREAM_WRITE_AFTER_END = _require$codes$2.ERR_STREAM_WRITE_AFTER_END, ERR_UNKNOWN_ENCODING = _require$codes$2.ERR_UNKNOWN_ENCODING;
var errorOrDestroy = destroyImpl.errorOrDestroy;
inherits_browser.exports(Writable, Stream);
function nop() {
}
function WritableState(options, stream, isDuplex) {
  options = options || {};
  if (typeof isDuplex !== "boolean")
    isDuplex = stream instanceof Registry$3.Duplex;
  this.objectMode = !!options.objectMode;
  if (isDuplex)
    this.objectMode = this.objectMode || !!options.writableObjectMode;
  this.highWaterMark = getHighWaterMark(this, options, "writableHighWaterMark", isDuplex);
  this.finalCalled = false;
  this.needDrain = false;
  this.ending = false;
  this.ended = false;
  this.finished = false;
  this.destroyed = false;
  var noDecode = options.decodeStrings === false;
  this.decodeStrings = !noDecode;
  this.defaultEncoding = options.defaultEncoding || "utf8";
  this.length = 0;
  this.writing = false;
  this.corked = 0;
  this.sync = true;
  this.bufferProcessing = false;
  this.onwrite = function(er) {
    onwrite(stream, er);
  };
  this.writecb = null;
  this.writelen = 0;
  this.bufferedRequest = null;
  this.lastBufferedRequest = null;
  this.pendingcb = 0;
  this.prefinished = false;
  this.errorEmitted = false;
  this.emitClose = options.emitClose !== false;
  this.autoDestroy = !!options.autoDestroy;
  this.bufferedRequestCount = 0;
  this.corkedRequestsFree = new CorkedRequest(this);
}
WritableState.prototype.getBuffer = function getBuffer() {
  var current = this.bufferedRequest;
  var out = [];
  while (current) {
    out.push(current);
    current = current.next;
  }
  return out;
};
(function() {
  try {
    Object.defineProperty(WritableState.prototype, "buffer", {
      get: internalUtil.deprecate(function writableStateBufferGetter() {
        return this.getBuffer();
      }, "_writableState.buffer is deprecated. Use _writableState.getBuffer instead.", "DEP0003")
    });
  } catch (_) {
  }
})();
var realHasInstance;
if (typeof Symbol === "function" && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === "function") {
  realHasInstance = Function.prototype[Symbol.hasInstance];
  Object.defineProperty(Writable, Symbol.hasInstance, {
    value: function value(object) {
      if (realHasInstance.call(this, object))
        return true;
      if (this !== Writable)
        return false;
      return object && object._writableState instanceof WritableState;
    }
  });
} else {
  realHasInstance = function realHasInstance2(object) {
    return object instanceof this;
  };
}
function Writable(options) {
  var isDuplex = this instanceof Registry$3.Duplex;
  if (!isDuplex && !realHasInstance.call(Writable, this))
    return new Writable(options);
  this._writableState = new WritableState(options, this, isDuplex);
  this.writable = true;
  if (options) {
    if (typeof options.write === "function")
      this._write = options.write;
    if (typeof options.writev === "function")
      this._writev = options.writev;
    if (typeof options.destroy === "function")
      this._destroy = options.destroy;
    if (typeof options.final === "function")
      this._final = options.final;
  }
  Stream.call(this);
}
Writable.prototype.pipe = function() {
  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE());
};
function writeAfterEnd(stream, cb) {
  var er = new ERR_STREAM_WRITE_AFTER_END();
  errorOrDestroy(stream, er);
  process.nextTick(cb, er);
}
function validChunk(stream, state2, chunk, cb) {
  var er;
  if (chunk === null) {
    er = new ERR_STREAM_NULL_VALUES();
  } else if (typeof chunk !== "string" && !state2.objectMode) {
    er = new ERR_INVALID_ARG_TYPE("chunk", ["string", "Buffer"], chunk);
  }
  if (er) {
    errorOrDestroy(stream, er);
    process.nextTick(cb, er);
    return false;
  }
  return true;
}
Writable.prototype.write = function(chunk, encoding, cb) {
  var state2 = this._writableState;
  var ret = false;
  var isBuf = !state2.objectMode && _isUint8Array(chunk);
  if (isBuf && !Buffer$1.isBuffer(chunk)) {
    chunk = _uint8ArrayToBuffer(chunk);
  }
  if (typeof encoding === "function") {
    cb = encoding;
    encoding = null;
  }
  if (isBuf)
    encoding = "buffer";
  else if (!encoding)
    encoding = state2.defaultEncoding;
  if (typeof cb !== "function")
    cb = nop;
  if (state2.ending)
    writeAfterEnd(this, cb);
  else if (isBuf || validChunk(this, state2, chunk, cb)) {
    state2.pendingcb++;
    ret = writeOrBuffer(this, state2, isBuf, chunk, encoding, cb);
  }
  return ret;
};
Writable.prototype.cork = function() {
  this._writableState.corked++;
};
Writable.prototype.uncork = function() {
  var state2 = this._writableState;
  if (state2.corked) {
    state2.corked--;
    if (!state2.writing && !state2.corked && !state2.bufferProcessing && state2.bufferedRequest)
      clearBuffer(this, state2);
  }
};
Writable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {
  if (typeof encoding === "string")
    encoding = encoding.toLowerCase();
  if (!(["hex", "utf8", "utf-8", "ascii", "binary", "base64", "ucs2", "ucs-2", "utf16le", "utf-16le", "raw"].indexOf((encoding + "").toLowerCase()) > -1))
    throw new ERR_UNKNOWN_ENCODING(encoding);
  this._writableState.defaultEncoding = encoding;
  return this;
};
Object.defineProperty(Writable.prototype, "writableBuffer", {
  enumerable: false,
  get: function get6() {
    return this._writableState && this._writableState.getBuffer();
  }
});
function decodeChunk(state2, chunk, encoding) {
  if (!state2.objectMode && state2.decodeStrings !== false && typeof chunk === "string") {
    chunk = Buffer$1.from(chunk, encoding);
  }
  return chunk;
}
Object.defineProperty(Writable.prototype, "writableHighWaterMark", {
  enumerable: false,
  get: function get7() {
    return this._writableState.highWaterMark;
  }
});
function writeOrBuffer(stream, state2, isBuf, chunk, encoding, cb) {
  if (!isBuf) {
    var newChunk = decodeChunk(state2, chunk, encoding);
    if (chunk !== newChunk) {
      isBuf = true;
      encoding = "buffer";
      chunk = newChunk;
    }
  }
  var len2 = state2.objectMode ? 1 : chunk.length;
  state2.length += len2;
  var ret = state2.length < state2.highWaterMark;
  if (!ret)
    state2.needDrain = true;
  if (state2.writing || state2.corked) {
    var last = state2.lastBufferedRequest;
    state2.lastBufferedRequest = {
      chunk,
      encoding,
      isBuf,
      callback: cb,
      next: null
    };
    if (last) {
      last.next = state2.lastBufferedRequest;
    } else {
      state2.bufferedRequest = state2.lastBufferedRequest;
    }
    state2.bufferedRequestCount += 1;
  } else {
    doWrite(stream, state2, false, len2, chunk, encoding, cb);
  }
  return ret;
}
function doWrite(stream, state2, writev, len2, chunk, encoding, cb) {
  state2.writelen = len2;
  state2.writecb = cb;
  state2.writing = true;
  state2.sync = true;
  if (state2.destroyed)
    state2.onwrite(new ERR_STREAM_DESTROYED$1("write"));
  else if (writev)
    stream._writev(chunk, state2.onwrite);
  else
    stream._write(chunk, encoding, state2.onwrite);
  state2.sync = false;
}
function onwriteError(stream, state2, sync, er, cb) {
  --state2.pendingcb;
  if (sync) {
    process.nextTick(cb, er);
    process.nextTick(finishMaybe, stream, state2);
    stream._writableState.errorEmitted = true;
    errorOrDestroy(stream, er);
  } else {
    cb(er);
    stream._writableState.errorEmitted = true;
    errorOrDestroy(stream, er);
    finishMaybe(stream, state2);
  }
}
function onwriteStateUpdate(state2) {
  state2.writing = false;
  state2.writecb = null;
  state2.length -= state2.writelen;
  state2.writelen = 0;
}
function onwrite(stream, er) {
  var state2 = stream._writableState;
  var sync = state2.sync;
  var cb = state2.writecb;
  if (typeof cb !== "function")
    throw new ERR_MULTIPLE_CALLBACK$1();
  onwriteStateUpdate(state2);
  if (er)
    onwriteError(stream, state2, sync, er, cb);
  else {
    var finished2 = needFinish(state2) || stream.destroyed;
    if (!finished2 && !state2.corked && !state2.bufferProcessing && state2.bufferedRequest) {
      clearBuffer(stream, state2);
    }
    if (sync) {
      process.nextTick(afterWrite, stream, state2, finished2, cb);
    } else {
      afterWrite(stream, state2, finished2, cb);
    }
  }
}
function afterWrite(stream, state2, finished2, cb) {
  if (!finished2)
    onwriteDrain(stream, state2);
  state2.pendingcb--;
  cb();
  finishMaybe(stream, state2);
}
function onwriteDrain(stream, state2) {
  if (state2.length === 0 && state2.needDrain) {
    state2.needDrain = false;
    stream.emit("drain");
  }
}
function clearBuffer(stream, state2) {
  state2.bufferProcessing = true;
  var entry = state2.bufferedRequest;
  if (stream._writev && entry && entry.next) {
    var l = state2.bufferedRequestCount;
    var buffer2 = new Array(l);
    var holder = state2.corkedRequestsFree;
    holder.entry = entry;
    var count = 0;
    var allBuffers = true;
    while (entry) {
      buffer2[count] = entry;
      if (!entry.isBuf)
        allBuffers = false;
      entry = entry.next;
      count += 1;
    }
    buffer2.allBuffers = allBuffers;
    doWrite(stream, state2, true, state2.length, buffer2, "", holder.finish);
    state2.pendingcb++;
    state2.lastBufferedRequest = null;
    if (holder.next) {
      state2.corkedRequestsFree = holder.next;
      holder.next = null;
    } else {
      state2.corkedRequestsFree = new CorkedRequest(state2);
    }
    state2.bufferedRequestCount = 0;
  } else {
    while (entry) {
      var chunk = entry.chunk;
      var encoding = entry.encoding;
      var cb = entry.callback;
      var len2 = state2.objectMode ? 1 : chunk.length;
      doWrite(stream, state2, false, len2, chunk, encoding, cb);
      entry = entry.next;
      state2.bufferedRequestCount--;
      if (state2.writing) {
        break;
      }
    }
    if (entry === null)
      state2.lastBufferedRequest = null;
  }
  state2.bufferedRequest = entry;
  state2.bufferProcessing = false;
}
Writable.prototype._write = function(chunk, encoding, cb) {
  cb(new ERR_METHOD_NOT_IMPLEMENTED$1("_write()"));
};
Writable.prototype._writev = null;
Writable.prototype.end = function(chunk, encoding, cb) {
  var state2 = this._writableState;
  if (typeof chunk === "function") {
    cb = chunk;
    chunk = null;
    encoding = null;
  } else if (typeof encoding === "function") {
    cb = encoding;
    encoding = null;
  }
  if (chunk !== null && chunk !== void 0)
    this.write(chunk, encoding);
  if (state2.corked) {
    state2.corked = 1;
    this.uncork();
  }
  if (!state2.ending)
    endWritable(this, state2, cb);
  return this;
};
Object.defineProperty(Writable.prototype, "writableLength", {
  enumerable: false,
  get: function get8() {
    return this._writableState.length;
  }
});
function needFinish(state2) {
  return state2.ending && state2.length === 0 && state2.bufferedRequest === null && !state2.finished && !state2.writing;
}
function callFinal(stream, state2) {
  stream._final(function(err) {
    state2.pendingcb--;
    if (err) {
      errorOrDestroy(stream, err);
    }
    state2.prefinished = true;
    stream.emit("prefinish");
    finishMaybe(stream, state2);
  });
}
function prefinish$1(stream, state2) {
  if (!state2.prefinished && !state2.finalCalled) {
    if (typeof stream._final === "function" && !state2.destroyed) {
      state2.pendingcb++;
      state2.finalCalled = true;
      process.nextTick(callFinal, stream, state2);
    } else {
      state2.prefinished = true;
      stream.emit("prefinish");
    }
  }
}
function finishMaybe(stream, state2) {
  var need = needFinish(state2);
  if (need) {
    prefinish$1(stream, state2);
    if (state2.pendingcb === 0) {
      state2.finished = true;
      stream.emit("finish");
      if (state2.autoDestroy) {
        var rState = stream._readableState;
        if (!rState || rState.autoDestroy && rState.endEmitted) {
          stream.destroy();
        }
      }
    }
  }
  return need;
}
function endWritable(stream, state2, cb) {
  state2.ending = true;
  finishMaybe(stream, state2);
  if (cb) {
    if (state2.finished)
      process.nextTick(cb);
    else
      stream.once("finish", cb);
  }
  state2.ended = true;
  stream.writable = false;
}
function onCorkedFinish(corkReq, state2, err) {
  var entry = corkReq.entry;
  corkReq.entry = null;
  while (entry) {
    var cb = entry.callback;
    state2.pendingcb--;
    cb(err);
    entry = entry.next;
  }
  state2.corkedRequestsFree.next = corkReq;
}
Object.defineProperty(Writable.prototype, "destroyed", {
  enumerable: false,
  get: function get9() {
    if (this._writableState === void 0) {
      return false;
    }
    return this._writableState.destroyed;
  },
  set: function set3(value) {
    if (!this._writableState) {
      return;
    }
    this._writableState.destroyed = value;
  }
});
Writable.prototype.destroy = destroyImpl.destroy;
Writable.prototype._undestroy = destroyImpl.undestroy;
Writable.prototype._destroy = function(err, cb) {
  cb(err);
};
var objectKeys = Object.keys || function(obj) {
  var keys2 = [];
  for (var key in obj) {
    keys2.push(key);
  }
  return keys2;
};
const Registry$2 = _registry;
Registry$2.Duplex = Duplex;
inherits_browser.exports(Duplex, Registry$2.Readable);
{
  var keys = objectKeys(Registry$2.Writable.prototype);
  for (var v = 0; v < keys.length; v++) {
    var method = keys[v];
    if (!Duplex.prototype[method])
      Duplex.prototype[method] = Registry$2.Writable.prototype[method];
  }
}
function Duplex(options) {
  if (!(this instanceof Duplex))
    return new Duplex(options);
  Registry$2.Readable.call(this, options);
  Registry$2.Writable.call(this, options);
  this.allowHalfOpen = true;
  if (options) {
    if (options.readable === false)
      this.readable = false;
    if (options.writable === false)
      this.writable = false;
    if (options.allowHalfOpen === false) {
      this.allowHalfOpen = false;
      this.once("end", onend);
    }
  }
}
Object.defineProperty(Duplex.prototype, "writableHighWaterMark", {
  enumerable: false,
  get: function get10() {
    return this._writableState.highWaterMark;
  }
});
Object.defineProperty(Duplex.prototype, "writableBuffer", {
  enumerable: false,
  get: function get11() {
    return this._writableState && this._writableState.getBuffer();
  }
});
Object.defineProperty(Duplex.prototype, "writableLength", {
  enumerable: false,
  get: function get12() {
    return this._writableState.length;
  }
});
function onend() {
  if (this._writableState.ended)
    return;
  process.nextTick(onEndNT, this);
}
function onEndNT(self2) {
  self2.end();
}
Object.defineProperty(Duplex.prototype, "destroyed", {
  enumerable: false,
  get: function get13() {
    if (this._readableState === void 0 || this._writableState === void 0) {
      return false;
    }
    return this._readableState.destroyed && this._writableState.destroyed;
  },
  set: function set4(value) {
    if (this._readableState === void 0 || this._writableState === void 0) {
      return;
    }
    this._readableState.destroyed = value;
    this._writableState.destroyed = value;
  }
});
const Registry$1 = _registry;
Registry$1.Transform = Transform$3;
var _require$codes$1 = errorsBrowser.codes, ERR_METHOD_NOT_IMPLEMENTED = _require$codes$1.ERR_METHOD_NOT_IMPLEMENTED, ERR_MULTIPLE_CALLBACK = _require$codes$1.ERR_MULTIPLE_CALLBACK, ERR_TRANSFORM_ALREADY_TRANSFORMING = _require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING, ERR_TRANSFORM_WITH_LENGTH_0 = _require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0;
inherits_browser.exports(Transform$3, Registry$1.Duplex);
function afterTransform(er, data) {
  var ts = this._transformState;
  ts.transforming = false;
  var cb = ts.writecb;
  if (cb === null) {
    return this.emit("error", new ERR_MULTIPLE_CALLBACK());
  }
  ts.writechunk = null;
  ts.writecb = null;
  if (data != null)
    this.push(data);
  cb(er);
  var rs = this._readableState;
  rs.reading = false;
  if (rs.needReadable || rs.length < rs.highWaterMark) {
    this._read(rs.highWaterMark);
  }
}
function Transform$3(options) {
  if (!(this instanceof Transform$3))
    return new Transform$3(options);
  Registry$1.Duplex.call(this, options);
  this._transformState = {
    afterTransform: afterTransform.bind(this),
    needTransform: false,
    transforming: false,
    writecb: null,
    writechunk: null,
    writeencoding: null
  };
  this._readableState.needReadable = true;
  this._readableState.sync = false;
  if (options) {
    if (typeof options.transform === "function")
      this._transform = options.transform;
    if (typeof options.flush === "function")
      this._flush = options.flush;
  }
  this.on("prefinish", prefinish);
}
function prefinish() {
  var _this = this;
  if (typeof this._flush === "function" && !this._readableState.destroyed) {
    this._flush(function(er, data) {
      done(_this, er, data);
    });
  } else {
    done(this, null, null);
  }
}
Transform$3.prototype.push = function(chunk, encoding) {
  this._transformState.needTransform = false;
  return Registry$1.Duplex.prototype.push.call(this, chunk, encoding);
};
Transform$3.prototype._transform = function(chunk, encoding, cb) {
  cb(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"));
};
Transform$3.prototype._write = function(chunk, encoding, cb) {
  var ts = this._transformState;
  ts.writecb = cb;
  ts.writechunk = chunk;
  ts.writeencoding = encoding;
  if (!ts.transforming) {
    var rs = this._readableState;
    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark)
      this._read(rs.highWaterMark);
  }
};
Transform$3.prototype._read = function(n) {
  var ts = this._transformState;
  if (ts.writechunk !== null && !ts.transforming) {
    ts.transforming = true;
    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);
  } else {
    ts.needTransform = true;
  }
};
Transform$3.prototype._destroy = function(err, cb) {
  Registry$1.Duplex.prototype._destroy.call(this, err, function(err2) {
    cb(err2);
  });
};
function done(stream, er, data) {
  if (er)
    return stream.emit("error", er);
  if (data != null)
    stream.push(data);
  if (stream._writableState.length)
    throw new ERR_TRANSFORM_WITH_LENGTH_0();
  if (stream._transformState.transforming)
    throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();
  return stream.push(null);
}
const Registry = _registry;
Registry.PassThrough = PassThrough;
inherits_browser.exports(PassThrough, Registry.Transform);
function PassThrough(options) {
  if (!(this instanceof PassThrough))
    return new PassThrough(options);
  Transform.call(this, options);
}
PassThrough.prototype._transform = function(chunk, encoding, cb) {
  cb(null, chunk);
};
var eos;
function once(callback) {
  var called = false;
  return function() {
    if (called)
      return;
    called = true;
    callback.apply(void 0, arguments);
  };
}
var _require$codes = errorsBrowser.codes, ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS, ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;
function noop(err) {
  if (err)
    throw err;
}
function isRequest(stream) {
  return stream.setHeader && typeof stream.abort === "function";
}
function destroyer(stream, reading, writing, callback) {
  callback = once(callback);
  var closed = false;
  stream.on("close", function() {
    closed = true;
  });
  if (eos === void 0)
    eos = endOfStream;
  eos(stream, {
    readable: reading,
    writable: writing
  }, function(err) {
    if (err)
      return callback(err);
    closed = true;
    callback();
  });
  var destroyed = false;
  return function(err) {
    if (closed)
      return;
    if (destroyed)
      return;
    destroyed = true;
    if (isRequest(stream))
      return stream.abort();
    if (typeof stream.destroy === "function")
      return stream.destroy();
    callback(err || new ERR_STREAM_DESTROYED("pipe"));
  };
}
function call(fn) {
  fn();
}
function pipe(from2, to) {
  return from2.pipe(to);
}
function popCallback(streams) {
  if (!streams.length)
    return noop;
  if (typeof streams[streams.length - 1] !== "function")
    return noop;
  return streams.pop();
}
function pipeline() {
  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {
    streams[_key] = arguments[_key];
  }
  var callback = popCallback(streams);
  if (Array.isArray(streams[0]))
    streams = streams[0];
  if (streams.length < 2) {
    throw new ERR_MISSING_ARGS("streams");
  }
  var error;
  var destroys = streams.map(function(stream, i2) {
    var reading = i2 < streams.length - 1;
    var writing = i2 > 0;
    return destroyer(stream, reading, writing, function(err) {
      if (!error)
        error = err;
      if (err)
        destroys.forEach(call);
      if (reading)
        return;
      destroys.forEach(call);
      callback(error);
    });
  });
  return streams.reduce(pipe);
}
var pipeline_1 = pipeline;
(function(module2, exports2) {
  const Registry2 = _registry;
  exports2 = module2.exports = Registry2.Readable;
  exports2.Stream = Registry2.Readable;
  exports2.Readable = Registry2.Readable;
  exports2.Writable = Registry2.Writable;
  exports2.Duplex = Registry2.Duplex;
  exports2.Transform = Registry2.Transform;
  exports2.PassThrough = Registry2.PassThrough;
  exports2.finished = endOfStream;
  exports2.pipeline = pipeline_1;
})(readableBrowser, readableBrowser.exports);
const { Transform: Transform$2 } = readableBrowser.exports;
var keccak$2 = (KeccakState) => class Keccak2 extends Transform$2 {
  constructor(rate, capacity, delimitedSuffix, hashBitLength, options) {
    super(options);
    this._rate = rate;
    this._capacity = capacity;
    this._delimitedSuffix = delimitedSuffix;
    this._hashBitLength = hashBitLength;
    this._options = options;
    this._state = new KeccakState();
    this._state.initialize(rate, capacity);
    this._finalized = false;
  }
  _transform(chunk, encoding, callback) {
    let error = null;
    try {
      this.update(chunk, encoding);
    } catch (err) {
      error = err;
    }
    callback(error);
  }
  _flush(callback) {
    let error = null;
    try {
      this.push(this.digest());
    } catch (err) {
      error = err;
    }
    callback(error);
  }
  update(data, encoding) {
    if (!Buffer.isBuffer(data) && typeof data !== "string")
      throw new TypeError("Data must be a string or a buffer");
    if (this._finalized)
      throw new Error("Digest already called");
    if (!Buffer.isBuffer(data))
      data = Buffer.from(data, encoding);
    this._state.absorb(data);
    return this;
  }
  digest(encoding) {
    if (this._finalized)
      throw new Error("Digest already called");
    this._finalized = true;
    if (this._delimitedSuffix)
      this._state.absorbLastFewBits(this._delimitedSuffix);
    let digest = this._state.squeeze(this._hashBitLength / 8);
    if (encoding !== void 0)
      digest = digest.toString(encoding);
    this._resetState();
    return digest;
  }
  _resetState() {
    this._state.initialize(this._rate, this._capacity);
    return this;
  }
  _clone() {
    const clone = new Keccak2(this._rate, this._capacity, this._delimitedSuffix, this._hashBitLength, this._options);
    this._state.copy(clone._state);
    clone._finalized = this._finalized;
    return clone;
  }
};
const { Transform: Transform$1 } = readableBrowser.exports;
var shake = (KeccakState) => class Shake extends Transform$1 {
  constructor(rate, capacity, delimitedSuffix, options) {
    super(options);
    this._rate = rate;
    this._capacity = capacity;
    this._delimitedSuffix = delimitedSuffix;
    this._options = options;
    this._state = new KeccakState();
    this._state.initialize(rate, capacity);
    this._finalized = false;
  }
  _transform(chunk, encoding, callback) {
    let error = null;
    try {
      this.update(chunk, encoding);
    } catch (err) {
      error = err;
    }
    callback(error);
  }
  _flush() {
  }
  _read(size) {
    this.push(this.squeeze(size));
  }
  update(data, encoding) {
    if (!Buffer.isBuffer(data) && typeof data !== "string")
      throw new TypeError("Data must be a string or a buffer");
    if (this._finalized)
      throw new Error("Squeeze already called");
    if (!Buffer.isBuffer(data))
      data = Buffer.from(data, encoding);
    this._state.absorb(data);
    return this;
  }
  squeeze(dataByteLength, encoding) {
    if (!this._finalized) {
      this._finalized = true;
      this._state.absorbLastFewBits(this._delimitedSuffix);
    }
    let data = this._state.squeeze(dataByteLength);
    if (encoding !== void 0)
      data = data.toString(encoding);
    return data;
  }
  _resetState() {
    this._state.initialize(this._rate, this._capacity);
    return this;
  }
  _clone() {
    const clone = new Shake(this._rate, this._capacity, this._delimitedSuffix, this._options);
    this._state.copy(clone._state);
    clone._finalized = this._finalized;
    return clone;
  }
};
const createKeccak = keccak$2;
const createShake = shake;
var api = function(KeccakState) {
  const Keccak2 = createKeccak(KeccakState);
  const Shake = createShake(KeccakState);
  return function(algorithm, options) {
    const hash2 = typeof algorithm === "string" ? algorithm.toLowerCase() : algorithm;
    switch (hash2) {
      case "keccak224":
        return new Keccak2(1152, 448, null, 224, options);
      case "keccak256":
        return new Keccak2(1088, 512, null, 256, options);
      case "keccak384":
        return new Keccak2(832, 768, null, 384, options);
      case "keccak512":
        return new Keccak2(576, 1024, null, 512, options);
      case "sha3-224":
        return new Keccak2(1152, 448, 6, 224, options);
      case "sha3-256":
        return new Keccak2(1088, 512, 6, 256, options);
      case "sha3-384":
        return new Keccak2(832, 768, 6, 384, options);
      case "sha3-512":
        return new Keccak2(576, 1024, 6, 512, options);
      case "shake128":
        return new Shake(1344, 256, 31, options);
      case "shake256":
        return new Shake(1088, 512, 31, options);
      default:
        throw new Error("Invald algorithm: " + algorithm);
    }
  };
};
var keccakStateUnroll = {};
const P1600_ROUND_CONSTANTS = [1, 0, 32898, 0, 32906, 2147483648, 2147516416, 2147483648, 32907, 0, 2147483649, 0, 2147516545, 2147483648, 32777, 2147483648, 138, 0, 136, 0, 2147516425, 0, 2147483658, 0, 2147516555, 0, 139, 2147483648, 32905, 2147483648, 32771, 2147483648, 32770, 2147483648, 128, 2147483648, 32778, 0, 2147483658, 2147483648, 2147516545, 2147483648, 32896, 2147483648, 2147483649, 0, 2147516424, 2147483648];
keccakStateUnroll.p1600 = function(s) {
  for (let round = 0; round < 24; ++round) {
    const lo0 = s[0] ^ s[10] ^ s[20] ^ s[30] ^ s[40];
    const hi0 = s[1] ^ s[11] ^ s[21] ^ s[31] ^ s[41];
    const lo1 = s[2] ^ s[12] ^ s[22] ^ s[32] ^ s[42];
    const hi1 = s[3] ^ s[13] ^ s[23] ^ s[33] ^ s[43];
    const lo2 = s[4] ^ s[14] ^ s[24] ^ s[34] ^ s[44];
    const hi2 = s[5] ^ s[15] ^ s[25] ^ s[35] ^ s[45];
    const lo3 = s[6] ^ s[16] ^ s[26] ^ s[36] ^ s[46];
    const hi3 = s[7] ^ s[17] ^ s[27] ^ s[37] ^ s[47];
    const lo4 = s[8] ^ s[18] ^ s[28] ^ s[38] ^ s[48];
    const hi4 = s[9] ^ s[19] ^ s[29] ^ s[39] ^ s[49];
    let lo = lo4 ^ (lo1 << 1 | hi1 >>> 31);
    let hi = hi4 ^ (hi1 << 1 | lo1 >>> 31);
    const t1slo0 = s[0] ^ lo;
    const t1shi0 = s[1] ^ hi;
    const t1slo5 = s[10] ^ lo;
    const t1shi5 = s[11] ^ hi;
    const t1slo10 = s[20] ^ lo;
    const t1shi10 = s[21] ^ hi;
    const t1slo15 = s[30] ^ lo;
    const t1shi15 = s[31] ^ hi;
    const t1slo20 = s[40] ^ lo;
    const t1shi20 = s[41] ^ hi;
    lo = lo0 ^ (lo2 << 1 | hi2 >>> 31);
    hi = hi0 ^ (hi2 << 1 | lo2 >>> 31);
    const t1slo1 = s[2] ^ lo;
    const t1shi1 = s[3] ^ hi;
    const t1slo6 = s[12] ^ lo;
    const t1shi6 = s[13] ^ hi;
    const t1slo11 = s[22] ^ lo;
    const t1shi11 = s[23] ^ hi;
    const t1slo16 = s[32] ^ lo;
    const t1shi16 = s[33] ^ hi;
    const t1slo21 = s[42] ^ lo;
    const t1shi21 = s[43] ^ hi;
    lo = lo1 ^ (lo3 << 1 | hi3 >>> 31);
    hi = hi1 ^ (hi3 << 1 | lo3 >>> 31);
    const t1slo2 = s[4] ^ lo;
    const t1shi2 = s[5] ^ hi;
    const t1slo7 = s[14] ^ lo;
    const t1shi7 = s[15] ^ hi;
    const t1slo12 = s[24] ^ lo;
    const t1shi12 = s[25] ^ hi;
    const t1slo17 = s[34] ^ lo;
    const t1shi17 = s[35] ^ hi;
    const t1slo22 = s[44] ^ lo;
    const t1shi22 = s[45] ^ hi;
    lo = lo2 ^ (lo4 << 1 | hi4 >>> 31);
    hi = hi2 ^ (hi4 << 1 | lo4 >>> 31);
    const t1slo3 = s[6] ^ lo;
    const t1shi3 = s[7] ^ hi;
    const t1slo8 = s[16] ^ lo;
    const t1shi8 = s[17] ^ hi;
    const t1slo13 = s[26] ^ lo;
    const t1shi13 = s[27] ^ hi;
    const t1slo18 = s[36] ^ lo;
    const t1shi18 = s[37] ^ hi;
    const t1slo23 = s[46] ^ lo;
    const t1shi23 = s[47] ^ hi;
    lo = lo3 ^ (lo0 << 1 | hi0 >>> 31);
    hi = hi3 ^ (hi0 << 1 | lo0 >>> 31);
    const t1slo4 = s[8] ^ lo;
    const t1shi4 = s[9] ^ hi;
    const t1slo9 = s[18] ^ lo;
    const t1shi9 = s[19] ^ hi;
    const t1slo14 = s[28] ^ lo;
    const t1shi14 = s[29] ^ hi;
    const t1slo19 = s[38] ^ lo;
    const t1shi19 = s[39] ^ hi;
    const t1slo24 = s[48] ^ lo;
    const t1shi24 = s[49] ^ hi;
    const t2slo0 = t1slo0;
    const t2shi0 = t1shi0;
    const t2slo16 = t1shi5 << 4 | t1slo5 >>> 28;
    const t2shi16 = t1slo5 << 4 | t1shi5 >>> 28;
    const t2slo7 = t1slo10 << 3 | t1shi10 >>> 29;
    const t2shi7 = t1shi10 << 3 | t1slo10 >>> 29;
    const t2slo23 = t1shi15 << 9 | t1slo15 >>> 23;
    const t2shi23 = t1slo15 << 9 | t1shi15 >>> 23;
    const t2slo14 = t1slo20 << 18 | t1shi20 >>> 14;
    const t2shi14 = t1shi20 << 18 | t1slo20 >>> 14;
    const t2slo10 = t1slo1 << 1 | t1shi1 >>> 31;
    const t2shi10 = t1shi1 << 1 | t1slo1 >>> 31;
    const t2slo1 = t1shi6 << 12 | t1slo6 >>> 20;
    const t2shi1 = t1slo6 << 12 | t1shi6 >>> 20;
    const t2slo17 = t1slo11 << 10 | t1shi11 >>> 22;
    const t2shi17 = t1shi11 << 10 | t1slo11 >>> 22;
    const t2slo8 = t1shi16 << 13 | t1slo16 >>> 19;
    const t2shi8 = t1slo16 << 13 | t1shi16 >>> 19;
    const t2slo24 = t1slo21 << 2 | t1shi21 >>> 30;
    const t2shi24 = t1shi21 << 2 | t1slo21 >>> 30;
    const t2slo20 = t1shi2 << 30 | t1slo2 >>> 2;
    const t2shi20 = t1slo2 << 30 | t1shi2 >>> 2;
    const t2slo11 = t1slo7 << 6 | t1shi7 >>> 26;
    const t2shi11 = t1shi7 << 6 | t1slo7 >>> 26;
    const t2slo2 = t1shi12 << 11 | t1slo12 >>> 21;
    const t2shi2 = t1slo12 << 11 | t1shi12 >>> 21;
    const t2slo18 = t1slo17 << 15 | t1shi17 >>> 17;
    const t2shi18 = t1shi17 << 15 | t1slo17 >>> 17;
    const t2slo9 = t1shi22 << 29 | t1slo22 >>> 3;
    const t2shi9 = t1slo22 << 29 | t1shi22 >>> 3;
    const t2slo5 = t1slo3 << 28 | t1shi3 >>> 4;
    const t2shi5 = t1shi3 << 28 | t1slo3 >>> 4;
    const t2slo21 = t1shi8 << 23 | t1slo8 >>> 9;
    const t2shi21 = t1slo8 << 23 | t1shi8 >>> 9;
    const t2slo12 = t1slo13 << 25 | t1shi13 >>> 7;
    const t2shi12 = t1shi13 << 25 | t1slo13 >>> 7;
    const t2slo3 = t1slo18 << 21 | t1shi18 >>> 11;
    const t2shi3 = t1shi18 << 21 | t1slo18 >>> 11;
    const t2slo19 = t1shi23 << 24 | t1slo23 >>> 8;
    const t2shi19 = t1slo23 << 24 | t1shi23 >>> 8;
    const t2slo15 = t1slo4 << 27 | t1shi4 >>> 5;
    const t2shi15 = t1shi4 << 27 | t1slo4 >>> 5;
    const t2slo6 = t1slo9 << 20 | t1shi9 >>> 12;
    const t2shi6 = t1shi9 << 20 | t1slo9 >>> 12;
    const t2slo22 = t1shi14 << 7 | t1slo14 >>> 25;
    const t2shi22 = t1slo14 << 7 | t1shi14 >>> 25;
    const t2slo13 = t1slo19 << 8 | t1shi19 >>> 24;
    const t2shi13 = t1shi19 << 8 | t1slo19 >>> 24;
    const t2slo4 = t1slo24 << 14 | t1shi24 >>> 18;
    const t2shi4 = t1shi24 << 14 | t1slo24 >>> 18;
    s[0] = t2slo0 ^ ~t2slo1 & t2slo2;
    s[1] = t2shi0 ^ ~t2shi1 & t2shi2;
    s[10] = t2slo5 ^ ~t2slo6 & t2slo7;
    s[11] = t2shi5 ^ ~t2shi6 & t2shi7;
    s[20] = t2slo10 ^ ~t2slo11 & t2slo12;
    s[21] = t2shi10 ^ ~t2shi11 & t2shi12;
    s[30] = t2slo15 ^ ~t2slo16 & t2slo17;
    s[31] = t2shi15 ^ ~t2shi16 & t2shi17;
    s[40] = t2slo20 ^ ~t2slo21 & t2slo22;
    s[41] = t2shi20 ^ ~t2shi21 & t2shi22;
    s[2] = t2slo1 ^ ~t2slo2 & t2slo3;
    s[3] = t2shi1 ^ ~t2shi2 & t2shi3;
    s[12] = t2slo6 ^ ~t2slo7 & t2slo8;
    s[13] = t2shi6 ^ ~t2shi7 & t2shi8;
    s[22] = t2slo11 ^ ~t2slo12 & t2slo13;
    s[23] = t2shi11 ^ ~t2shi12 & t2shi13;
    s[32] = t2slo16 ^ ~t2slo17 & t2slo18;
    s[33] = t2shi16 ^ ~t2shi17 & t2shi18;
    s[42] = t2slo21 ^ ~t2slo22 & t2slo23;
    s[43] = t2shi21 ^ ~t2shi22 & t2shi23;
    s[4] = t2slo2 ^ ~t2slo3 & t2slo4;
    s[5] = t2shi2 ^ ~t2shi3 & t2shi4;
    s[14] = t2slo7 ^ ~t2slo8 & t2slo9;
    s[15] = t2shi7 ^ ~t2shi8 & t2shi9;
    s[24] = t2slo12 ^ ~t2slo13 & t2slo14;
    s[25] = t2shi12 ^ ~t2shi13 & t2shi14;
    s[34] = t2slo17 ^ ~t2slo18 & t2slo19;
    s[35] = t2shi17 ^ ~t2shi18 & t2shi19;
    s[44] = t2slo22 ^ ~t2slo23 & t2slo24;
    s[45] = t2shi22 ^ ~t2shi23 & t2shi24;
    s[6] = t2slo3 ^ ~t2slo4 & t2slo0;
    s[7] = t2shi3 ^ ~t2shi4 & t2shi0;
    s[16] = t2slo8 ^ ~t2slo9 & t2slo5;
    s[17] = t2shi8 ^ ~t2shi9 & t2shi5;
    s[26] = t2slo13 ^ ~t2slo14 & t2slo10;
    s[27] = t2shi13 ^ ~t2shi14 & t2shi10;
    s[36] = t2slo18 ^ ~t2slo19 & t2slo15;
    s[37] = t2shi18 ^ ~t2shi19 & t2shi15;
    s[46] = t2slo23 ^ ~t2slo24 & t2slo20;
    s[47] = t2shi23 ^ ~t2shi24 & t2shi20;
    s[8] = t2slo4 ^ ~t2slo0 & t2slo1;
    s[9] = t2shi4 ^ ~t2shi0 & t2shi1;
    s[18] = t2slo9 ^ ~t2slo5 & t2slo6;
    s[19] = t2shi9 ^ ~t2shi5 & t2shi6;
    s[28] = t2slo14 ^ ~t2slo10 & t2slo11;
    s[29] = t2shi14 ^ ~t2shi10 & t2shi11;
    s[38] = t2slo19 ^ ~t2slo15 & t2slo16;
    s[39] = t2shi19 ^ ~t2shi15 & t2shi16;
    s[48] = t2slo24 ^ ~t2slo20 & t2slo21;
    s[49] = t2shi24 ^ ~t2shi20 & t2shi21;
    s[0] ^= P1600_ROUND_CONSTANTS[round * 2];
    s[1] ^= P1600_ROUND_CONSTANTS[round * 2 + 1];
  }
};
const keccakState = keccakStateUnroll;
function Keccak() {
  this.state = [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0
  ];
  this.blockSize = null;
  this.count = 0;
  this.squeezing = false;
}
Keccak.prototype.initialize = function(rate, capacity) {
  for (let i2 = 0; i2 < 50; ++i2)
    this.state[i2] = 0;
  this.blockSize = rate / 8;
  this.count = 0;
  this.squeezing = false;
};
Keccak.prototype.absorb = function(data) {
  for (let i2 = 0; i2 < data.length; ++i2) {
    this.state[~~(this.count / 4)] ^= data[i2] << 8 * (this.count % 4);
    this.count += 1;
    if (this.count === this.blockSize) {
      keccakState.p1600(this.state);
      this.count = 0;
    }
  }
};
Keccak.prototype.absorbLastFewBits = function(bits) {
  this.state[~~(this.count / 4)] ^= bits << 8 * (this.count % 4);
  if ((bits & 128) !== 0 && this.count === this.blockSize - 1)
    keccakState.p1600(this.state);
  this.state[~~((this.blockSize - 1) / 4)] ^= 128 << 8 * ((this.blockSize - 1) % 4);
  keccakState.p1600(this.state);
  this.count = 0;
  this.squeezing = true;
};
Keccak.prototype.squeeze = function(length) {
  if (!this.squeezing)
    this.absorbLastFewBits(1);
  const output = Buffer.alloc(length);
  for (let i2 = 0; i2 < length; ++i2) {
    output[i2] = this.state[~~(this.count / 4)] >>> 8 * (this.count % 4) & 255;
    this.count += 1;
    if (this.count === this.blockSize) {
      keccakState.p1600(this.state);
      this.count = 0;
    }
  }
  return output;
};
Keccak.prototype.copy = function(dest) {
  for (let i2 = 0; i2 < 50; ++i2)
    dest.state[i2] = this.state[i2];
  dest.blockSize = this.blockSize;
  dest.count = this.count;
  dest.squeezing = this.squeezing;
};
var keccak$1 = Keccak;
var js = api(keccak$1);
const keccak = js;
function toChecksumAddress(address, chainId = null) {
  if (typeof address !== "string") {
    return "";
  }
  if (!/^(0x)?[0-9a-f]{40}$/i.test(address)) {
    throw new Error(`Given address "${address}" is not a valid Ethereum address.`);
  }
  const stripAddress = stripHexPrefix(address).toLowerCase();
  const prefix = chainId != null ? chainId.toString() + "0x" : "";
  const keccakHash = keccak("keccak256").update(prefix + stripAddress).digest("hex");
  let checksumAddress = "0x";
  for (let i2 = 0; i2 < stripAddress.length; i2++) {
    checksumAddress += parseInt(keccakHash[i2], 16) >= 8 ? stripAddress[i2].toUpperCase() : stripAddress[i2];
  }
  return checksumAddress;
}
function checkAddressChecksum(address, chainId = null) {
  const stripAddress = stripHexPrefix(address).toLowerCase();
  const prefix = chainId != null ? chainId.toString() + "0x" : "";
  const keccakHash = keccak("keccak256").update(prefix + stripAddress).digest("hex");
  for (let i2 = 0; i2 < stripAddress.length; i2++) {
    let output = parseInt(keccakHash[i2], 16) >= 8 ? stripAddress[i2].toUpperCase() : stripAddress[i2];
    if (stripHexPrefix(address)[i2] !== output) {
      return false;
    }
  }
  return true;
}
function stripHexPrefix(value) {
  return value.slice(0, 2) === "0x" ? value.slice(2) : value;
}
var ethereumChecksumAddress = {
  toChecksumAddress,
  checkAddressChecksum
};
function create_fragment$6(ctx) {
  let div;
  let t1;
  let h10;
  let t2;
  let a0;
  let t3;
  let a0_href_value;
  let t4;
  let h11;
  let t5;
  let a1;
  let t6;
  let a1_href_value;
  let t7;
  let h12;
  let t8;
  let a2;
  let t9;
  let a2_href_value;
  let t10;
  let button;
  let mounted;
  let dispose;
  return {
    c() {
      div = element("div");
      div.textContent = "ADDRESS";
      t1 = space();
      h10 = element("h1");
      t2 = text("BTC:\n  ");
      a0 = element("a");
      t3 = text(ctx[0]);
      t4 = space();
      h11 = element("h1");
      t5 = text("BTC (SegWit):\n  ");
      a1 = element("a");
      t6 = text(ctx[1]);
      t7 = space();
      h12 = element("h1");
      t8 = text("ETH:\n  ");
      a2 = element("a");
      t9 = text(ctx[2]);
      t10 = space();
      button = element("button");
      button.textContent = "Clear";
      attr(div, "class", "text-2xl mb-10");
      attr(a0, "class", "text-blue-600");
      attr(a0, "href", a0_href_value = "https://www.blockchain.com/btc/address/" + ctx[0]);
      attr(h10, "class", "mb-5");
      attr(a1, "class", "text-blue-600");
      attr(a1, "href", a1_href_value = "https://www.blockchain.com/btc/address/" + ctx[1]);
      attr(h11, "class", "mb-5");
      attr(a2, "class", "text-blue-600");
      attr(a2, "href", a2_href_value = "https://etherscan.io/address/" + ctx[2]);
      attr(h12, "class", "mb-5");
      attr(button, "class", "bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded mt-10");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      insert(target, t1, anchor);
      insert(target, h10, anchor);
      append(h10, t2);
      append(h10, a0);
      append(a0, t3);
      insert(target, t4, anchor);
      insert(target, h11, anchor);
      append(h11, t5);
      append(h11, a1);
      append(a1, t6);
      insert(target, t7, anchor);
      insert(target, h12, anchor);
      append(h12, t8);
      append(h12, a2);
      append(a2, t9);
      insert(target, t10, anchor);
      insert(target, button, anchor);
      if (!mounted) {
        dispose = listen(button, "click", ctx[4]);
        mounted = true;
      }
    },
    p(ctx2, [dirty]) {
      if (dirty & 1)
        set_data(t3, ctx2[0]);
      if (dirty & 1 && a0_href_value !== (a0_href_value = "https://www.blockchain.com/btc/address/" + ctx2[0])) {
        attr(a0, "href", a0_href_value);
      }
      if (dirty & 2)
        set_data(t6, ctx2[1]);
      if (dirty & 2 && a1_href_value !== (a1_href_value = "https://www.blockchain.com/btc/address/" + ctx2[1])) {
        attr(a1, "href", a1_href_value);
      }
      if (dirty & 4)
        set_data(t9, ctx2[2]);
      if (dirty & 4 && a2_href_value !== (a2_href_value = "https://etherscan.io/address/" + ctx2[2])) {
        attr(a2, "href", a2_href_value);
      }
    },
    i: noop$2,
    o: noop$2,
    d(detaching) {
      if (detaching)
        detach(div);
      if (detaching)
        detach(t1);
      if (detaching)
        detach(h10);
      if (detaching)
        detach(t4);
      if (detaching)
        detach(h11);
      if (detaching)
        detach(t7);
      if (detaching)
        detach(h12);
      if (detaching)
        detach(t10);
      if (detaching)
        detach(button);
      mounted = false;
      dispose();
    }
  };
}
function instance$3($$self, $$props, $$invalidate) {
  let $keyPair;
  let $pkBuffer;
  component_subscribe($$self, keyPair, ($$value) => $$invalidate(5, $keyPair = $$value));
  component_subscribe($$self, pkBuffer, ($$value) => $$invalidate(3, $pkBuffer = $$value));
  let { payments } = globalThis.bitcoinjs;
  let btcAddress, btcSegWitAddress, ethAddress;
  keyPair.subscribe((kP) => {
    let keyObj = { pubkey: $keyPair.publicKey };
    const { address } = payments.p2pkh(keyObj);
    $$invalidate(0, btcAddress = address);
    const { address: swaddress } = payments.p2wpkh(keyObj);
    $$invalidate(1, btcSegWitAddress = swaddress);
    let keccakHex = js("keccak256").update(buffer.Buffer.from($keyPair.publicKey.slice(2), "hex")).digest("hex");
    $$invalidate(2, ethAddress = ethereumChecksumAddress.toChecksumAddress(`${keccakHex.substring(keccakHex.length - 40, keccakHex.length).toUpperCase()}`));
  });
  const click_handler = (e) => {
    set_store_value(pkBuffer, $pkBuffer = null, $pkBuffer);
  };
  return [btcAddress, btcSegWitAddress, ethAddress, $pkBuffer, click_handler];
}
class ProfilePage extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$3, create_fragment$6, safe_not_equal, {});
  }
}
const encodedJs$1 = "KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICBmdW5jdGlvbiBnZXRBdWdtZW50ZWROYW1lc3BhY2UobikgewogICAgaWYgKG4uX19lc01vZHVsZSkKICAgICAgcmV0dXJuIG47CiAgICB2YXIgYSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwogICAgT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbihrKSB7CiAgICAgIHZhciBkID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLCBrKTsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsIGssIGQuZ2V0ID8gZCA6IHsKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gbltrXTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgICByZXR1cm4gYTsKICB9CiAgdmFyIGJyb3dzZXIkMSA9IHt9OwogIHZhciBzYWZlQnVmZmVyID0geyBleHBvcnRzOiB7fSB9OwogIHZhciBidWZmZXIgPSB7fTsKICB2YXIgYmFzZTY0SnMgPSB7fTsKICBiYXNlNjRKcy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aDsKICBiYXNlNjRKcy50b0J5dGVBcnJheSA9IHRvQnl0ZUFycmF5OwogIGJhc2U2NEpzLmZyb21CeXRlQXJyYXkgPSBmcm9tQnl0ZUFycmF5OwogIHZhciBsb29rdXAgPSBbXTsKICB2YXIgcmV2TG9va3VwID0gW107CiAgdmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAidW5kZWZpbmVkIiA/IFVpbnQ4QXJyYXkgOiBBcnJheTsKICB2YXIgY29kZSA9ICJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIjsKICBmb3IgKHZhciBpID0gMCwgbGVuID0gY29kZS5sZW5ndGg7IGkgPCBsZW47ICsraSkgewogICAgbG9va3VwW2ldID0gY29kZVtpXTsKICAgIHJldkxvb2t1cFtjb2RlLmNoYXJDb2RlQXQoaSldID0gaTsKICB9CiAgcmV2TG9va3VwWyItIi5jaGFyQ29kZUF0KDApXSA9IDYyOwogIHJldkxvb2t1cFsiXyIuY2hhckNvZGVBdCgwKV0gPSA2MzsKICBmdW5jdGlvbiBnZXRMZW5zKGI2NCkgewogICAgdmFyIGxlbjIgPSBiNjQubGVuZ3RoOwogICAgaWYgKGxlbjIgJSA0ID4gMCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQiKTsKICAgIH0KICAgIHZhciB2YWxpZExlbiA9IGI2NC5pbmRleE9mKCI9Iik7CiAgICBpZiAodmFsaWRMZW4gPT09IC0xKQogICAgICB2YWxpZExlbiA9IGxlbjI7CiAgICB2YXIgcGxhY2VIb2xkZXJzTGVuID0gdmFsaWRMZW4gPT09IGxlbjIgPyAwIDogNCAtIHZhbGlkTGVuICUgNDsKICAgIHJldHVybiBbdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbl07CiAgfQogIGZ1bmN0aW9uIGJ5dGVMZW5ndGgoYjY0KSB7CiAgICB2YXIgbGVucyA9IGdldExlbnMoYjY0KTsKICAgIHZhciB2YWxpZExlbiA9IGxlbnNbMF07CiAgICB2YXIgcGxhY2VIb2xkZXJzTGVuID0gbGVuc1sxXTsKICAgIHJldHVybiAodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQgLSBwbGFjZUhvbGRlcnNMZW47CiAgfQogIGZ1bmN0aW9uIF9ieXRlTGVuZ3RoKGI2NCwgdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbikgewogICAgcmV0dXJuICh2YWxpZExlbiArIHBsYWNlSG9sZGVyc0xlbikgKiAzIC8gNCAtIHBsYWNlSG9sZGVyc0xlbjsKICB9CiAgZnVuY3Rpb24gdG9CeXRlQXJyYXkoYjY0KSB7CiAgICB2YXIgdG1wOwogICAgdmFyIGxlbnMgPSBnZXRMZW5zKGI2NCk7CiAgICB2YXIgdmFsaWRMZW4gPSBsZW5zWzBdOwogICAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV07CiAgICB2YXIgYXJyID0gbmV3IEFycihfYnl0ZUxlbmd0aChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pKTsKICAgIHZhciBjdXJCeXRlID0gMDsKICAgIHZhciBsZW4yID0gcGxhY2VIb2xkZXJzTGVuID4gMCA/IHZhbGlkTGVuIC0gNCA6IHZhbGlkTGVuOwogICAgdmFyIGkyOwogICAgZm9yIChpMiA9IDA7IGkyIDwgbGVuMjsgaTIgKz0gNCkgewogICAgICB0bXAgPSByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaTIpXSA8PCAxOCB8IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpMiArIDEpXSA8PCAxMiB8IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpMiArIDIpXSA8PCA2IHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkyICsgMyldOwogICAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCA+PiAxNiAmIDI1NTsKICAgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgPj4gOCAmIDI1NTsKICAgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAyNTU7CiAgICB9CiAgICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAyKSB7CiAgICAgIHRtcCA9IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpMildIDw8IDIgfCByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaTIgKyAxKV0gPj4gNDsKICAgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAyNTU7CiAgICB9CiAgICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAxKSB7CiAgICAgIHRtcCA9IHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpMildIDw8IDEwIHwgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkyICsgMSldIDw8IDQgfCByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaTIgKyAyKV0gPj4gMjsKICAgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgPj4gOCAmIDI1NTsKICAgICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAyNTU7CiAgICB9CiAgICByZXR1cm4gYXJyOwogIH0KICBmdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQobnVtKSB7CiAgICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDYzXSArIGxvb2t1cFtudW0gPj4gMTIgJiA2M10gKyBsb29rdXBbbnVtID4+IDYgJiA2M10gKyBsb29rdXBbbnVtICYgNjNdOwogIH0KICBmdW5jdGlvbiBlbmNvZGVDaHVuayh1aW50OCwgc3RhcnQsIGVuZCkgewogICAgdmFyIHRtcDsKICAgIHZhciBvdXRwdXQgPSBbXTsKICAgIGZvciAodmFyIGkyID0gc3RhcnQ7IGkyIDwgZW5kOyBpMiArPSAzKSB7CiAgICAgIHRtcCA9ICh1aW50OFtpMl0gPDwgMTYgJiAxNjcxMTY4MCkgKyAodWludDhbaTIgKyAxXSA8PCA4ICYgNjUyODApICsgKHVpbnQ4W2kyICsgMl0gJiAyNTUpOwogICAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSk7CiAgICB9CiAgICByZXR1cm4gb3V0cHV0LmpvaW4oIiIpOwogIH0KICBmdW5jdGlvbiBmcm9tQnl0ZUFycmF5KHVpbnQ4KSB7CiAgICB2YXIgdG1wOwogICAgdmFyIGxlbjIgPSB1aW50OC5sZW5ndGg7CiAgICB2YXIgZXh0cmFCeXRlcyA9IGxlbjIgJSAzOwogICAgdmFyIHBhcnRzID0gW107CiAgICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MzsKICAgIGZvciAodmFyIGkyID0gMCwgbGVuMjIgPSBsZW4yIC0gZXh0cmFCeXRlczsgaTIgPCBsZW4yMjsgaTIgKz0gbWF4Q2h1bmtMZW5ndGgpIHsKICAgICAgcGFydHMucHVzaChlbmNvZGVDaHVuayh1aW50OCwgaTIsIGkyICsgbWF4Q2h1bmtMZW5ndGggPiBsZW4yMiA/IGxlbjIyIDogaTIgKyBtYXhDaHVua0xlbmd0aCkpOwogICAgfQogICAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHsKICAgICAgdG1wID0gdWludDhbbGVuMiAtIDFdOwogICAgICBwYXJ0cy5wdXNoKGxvb2t1cFt0bXAgPj4gMl0gKyBsb29rdXBbdG1wIDw8IDQgJiA2M10gKyAiPT0iKTsKICAgIH0gZWxzZSBpZiAoZXh0cmFCeXRlcyA9PT0gMikgewogICAgICB0bXAgPSAodWludDhbbGVuMiAtIDJdIDw8IDgpICsgdWludDhbbGVuMiAtIDFdOwogICAgICBwYXJ0cy5wdXNoKGxvb2t1cFt0bXAgPj4gMTBdICsgbG9va3VwW3RtcCA+PiA0ICYgNjNdICsgbG9va3VwW3RtcCA8PCAyICYgNjNdICsgIj0iKTsKICAgIH0KICAgIHJldHVybiBwYXJ0cy5qb2luKCIiKTsKICB9CiAgdmFyIGllZWU3NTQgPSB7fTsKICAvKiEgaWVlZTc1NC4gQlNELTMtQ2xhdXNlIExpY2Vuc2UuIEZlcm9zcyBBYm91a2hhZGlqZWggPGh0dHBzOi8vZmVyb3NzLm9yZy9vcGVuc291cmNlPiAqLwogIGllZWU3NTQucmVhZCA9IGZ1bmN0aW9uKGJ1ZmZlcjIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7CiAgICB2YXIgZSwgbTsKICAgIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxOwogICAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDE7CiAgICB2YXIgZUJpYXMgPSBlTWF4ID4+IDE7CiAgICB2YXIgbkJpdHMgPSAtNzsKICAgIHZhciBpMiA9IGlzTEUgPyBuQnl0ZXMgLSAxIDogMDsKICAgIHZhciBkID0gaXNMRSA/IC0xIDogMTsKICAgIHZhciBzID0gYnVmZmVyMltvZmZzZXQgKyBpMl07CiAgICBpMiArPSBkOwogICAgZSA9IHMgJiAoMSA8PCAtbkJpdHMpIC0gMTsKICAgIHMgPj49IC1uQml0czsKICAgIG5CaXRzICs9IGVMZW47CiAgICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gZSAqIDI1NiArIGJ1ZmZlcjJbb2Zmc2V0ICsgaTJdLCBpMiArPSBkLCBuQml0cyAtPSA4KSB7CiAgICB9CiAgICBtID0gZSAmICgxIDw8IC1uQml0cykgLSAxOwogICAgZSA+Pj0gLW5CaXRzOwogICAgbkJpdHMgKz0gbUxlbjsKICAgIGZvciAoOyBuQml0cyA+IDA7IG0gPSBtICogMjU2ICsgYnVmZmVyMltvZmZzZXQgKyBpMl0sIGkyICs9IGQsIG5CaXRzIC09IDgpIHsKICAgIH0KICAgIGlmIChlID09PSAwKSB7CiAgICAgIGUgPSAxIC0gZUJpYXM7CiAgICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHsKICAgICAgcmV0dXJuIG0gPyBOYU4gOiAocyA/IC0xIDogMSkgKiBJbmZpbml0eTsKICAgIH0gZWxzZSB7CiAgICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbik7CiAgICAgIGUgPSBlIC0gZUJpYXM7CiAgICB9CiAgICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKTsKICB9OwogIGllZWU3NTQud3JpdGUgPSBmdW5jdGlvbihidWZmZXIyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHsKICAgIHZhciBlLCBtLCBjOwogICAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDE7CiAgICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMTsKICAgIHZhciBlQmlhcyA9IGVNYXggPj4gMTsKICAgIHZhciBydCA9IG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwOwogICAgdmFyIGkyID0gaXNMRSA/IDAgOiBuQnl0ZXMgLSAxOwogICAgdmFyIGQgPSBpc0xFID8gMSA6IC0xOwogICAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgdmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCA/IDEgOiAwOwogICAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSk7CiAgICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkgewogICAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDA7CiAgICAgIGUgPSBlTWF4OwogICAgfSBlbHNlIHsKICAgICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpOwogICAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7CiAgICAgICAgZS0tOwogICAgICAgIGMgKj0gMjsKICAgICAgfQogICAgICBpZiAoZSArIGVCaWFzID49IDEpIHsKICAgICAgICB2YWx1ZSArPSBydCAvIGM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpOwogICAgICB9CiAgICAgIGlmICh2YWx1ZSAqIGMgPj0gMikgewogICAgICAgIGUrKzsKICAgICAgICBjIC89IDI7CiAgICAgIH0KICAgICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7CiAgICAgICAgbSA9IDA7CiAgICAgICAgZSA9IGVNYXg7CiAgICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHsKICAgICAgICBtID0gKHZhbHVlICogYyAtIDEpICogTWF0aC5wb3coMiwgbUxlbik7CiAgICAgICAgZSA9IGUgKyBlQmlhczsKICAgICAgfSBlbHNlIHsKICAgICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbik7CiAgICAgICAgZSA9IDA7CiAgICAgIH0KICAgIH0KICAgIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcjJbb2Zmc2V0ICsgaTJdID0gbSAmIDI1NSwgaTIgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkgewogICAgfQogICAgZSA9IGUgPDwgbUxlbiB8IG07CiAgICBlTGVuICs9IG1MZW47CiAgICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcjJbb2Zmc2V0ICsgaTJdID0gZSAmIDI1NSwgaTIgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkgewogICAgfQogICAgYnVmZmVyMltvZmZzZXQgKyBpMiAtIGRdIHw9IHMgKiAxMjg7CiAgfTsKICAvKiEKICAgKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci4KICAgKgogICAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmc+CiAgICogQGxpY2Vuc2UgIE1JVAogICAqLwogIChmdW5jdGlvbihleHBvcnRzKSB7CiAgICBjb25zdCBiYXNlNjQgPSBiYXNlNjRKczsKICAgIGNvbnN0IGllZWU3NTQkMSA9IGllZWU3NTQ7CiAgICBjb25zdCBjdXN0b21JbnNwZWN0U3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sWyJmb3IiXSA9PT0gImZ1bmN0aW9uIiA/IFN5bWJvbFsiZm9yIl0oIm5vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tIikgOiBudWxsOwogICAgZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXIyOwogICAgZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlcjsKICAgIGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MDsKICAgIGNvbnN0IEtfTUFYX0xFTkdUSCA9IDIxNDc0ODM2NDc7CiAgICBleHBvcnRzLmtNYXhMZW5ndGggPSBLX01BWF9MRU5HVEg7CiAgICBCdWZmZXIyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSB0eXBlZEFycmF5U3VwcG9ydCgpOwogICAgaWYgKCFCdWZmZXIyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICJ1bmRlZmluZWQiICYmIHR5cGVvZiBjb25zb2xlLmVycm9yID09PSAiZnVuY3Rpb24iKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoIlRoaXMgYnJvd3NlciBsYWNrcyB0eXBlZCBhcnJheSAoVWludDhBcnJheSkgc3VwcG9ydCB3aGljaCBpcyByZXF1aXJlZCBieSBgYnVmZmVyYCB2NS54LiBVc2UgYGJ1ZmZlcmAgdjQueCBpZiB5b3UgcmVxdWlyZSBvbGQgYnJvd3NlciBzdXBwb3J0LiIpOwogICAgfQogICAgZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSk7CiAgICAgICAgY29uc3QgcHJvdG8gPSB7IGZvbzogZnVuY3Rpb24oKSB7CiAgICAgICAgICByZXR1cm4gNDI7CiAgICAgICAgfSB9OwogICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihwcm90bywgVWludDhBcnJheS5wcm90b3R5cGUpOwogICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihhcnIsIHByb3RvKTsKICAgICAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MjsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlcjIucHJvdG90eXBlLCAicGFyZW50IiwgewogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgIGlmICghQnVmZmVyMi5pc0J1ZmZlcih0aGlzKSkKICAgICAgICAgIHJldHVybiB2b2lkIDA7CiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyOwogICAgICB9CiAgICB9KTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIyLnByb3RvdHlwZSwgIm9mZnNldCIsIHsKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICBpZiAoIUJ1ZmZlcjIuaXNCdWZmZXIodGhpcykpCiAgICAgICAgICByZXR1cm4gdm9pZCAwOwogICAgICAgIHJldHVybiB0aGlzLmJ5dGVPZmZzZXQ7CiAgICAgIH0KICAgIH0pOwogICAgZnVuY3Rpb24gY3JlYXRlQnVmZmVyKGxlbmd0aCkgewogICAgICBpZiAobGVuZ3RoID4gS19NQVhfTEVOR1RIKSB7CiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSAiJyArIGxlbmd0aCArICciIGlzIGludmFsaWQgZm9yIG9wdGlvbiAic2l6ZSInKTsKICAgICAgfQogICAgICBjb25zdCBidWYgPSBuZXcgVWludDhBcnJheShsZW5ndGgpOwogICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoYnVmLCBCdWZmZXIyLnByb3RvdHlwZSk7CiAgICAgIHJldHVybiBidWY7CiAgICB9CiAgICBmdW5jdGlvbiBCdWZmZXIyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7CiAgICAgIGlmICh0eXBlb2YgYXJnID09PSAibnVtYmVyIikgewogICAgICAgIGlmICh0eXBlb2YgZW5jb2RpbmdPck9mZnNldCA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSAic3RyaW5nIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nLiBSZWNlaXZlZCB0eXBlIG51bWJlcicpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYWxsb2NVbnNhZmUoYXJnKTsKICAgICAgfQogICAgICByZXR1cm4gZnJvbTIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpOwogICAgfQogICAgQnVmZmVyMi5wb29sU2l6ZSA9IDgxOTI7CiAgICBmdW5jdGlvbiBmcm9tMih2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7CiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICJzdHJpbmciKSB7CiAgICAgICAgcmV0dXJuIGZyb21TdHJpbmcodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpOwogICAgICB9CiAgICAgIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcodmFsdWUpKSB7CiAgICAgICAgcmV0dXJuIGZyb21BcnJheVZpZXcodmFsdWUpOwogICAgICB9CiAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgb3IgQXJyYXktbGlrZSBPYmplY3QuIFJlY2VpdmVkIHR5cGUgIiArIHR5cGVvZiB2YWx1ZSk7CiAgICAgIH0KICAgICAgaWYgKGlzSW5zdGFuY2UodmFsdWUsIEFycmF5QnVmZmVyKSB8fCB2YWx1ZSAmJiBpc0luc3RhbmNlKHZhbHVlLmJ1ZmZlciwgQXJyYXlCdWZmZXIpKSB7CiAgICAgICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKTsKICAgICAgfQogICAgICBpZiAodHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyICE9PSAidW5kZWZpbmVkIiAmJiAoaXNJbnN0YW5jZSh2YWx1ZSwgU2hhcmVkQXJyYXlCdWZmZXIpIHx8IHZhbHVlICYmIGlzSW5zdGFuY2UodmFsdWUuYnVmZmVyLCBTaGFyZWRBcnJheUJ1ZmZlcikpKSB7CiAgICAgICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKTsKICAgICAgfQogICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAibnVtYmVyIikgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSAidmFsdWUiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG9mIHR5cGUgbnVtYmVyLiBSZWNlaXZlZCB0eXBlIG51bWJlcicpOwogICAgICB9CiAgICAgIGNvbnN0IHZhbHVlT2YgPSB2YWx1ZS52YWx1ZU9mICYmIHZhbHVlLnZhbHVlT2YoKTsKICAgICAgaWYgKHZhbHVlT2YgIT0gbnVsbCAmJiB2YWx1ZU9mICE9PSB2YWx1ZSkgewogICAgICAgIHJldHVybiBCdWZmZXIyLmZyb20odmFsdWVPZiwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKTsKICAgICAgfQogICAgICBjb25zdCBiID0gZnJvbU9iamVjdCh2YWx1ZSk7CiAgICAgIGlmIChiKQogICAgICAgIHJldHVybiBiOwogICAgICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgU3ltYm9sLnRvUHJpbWl0aXZlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlW1N5bWJvbC50b1ByaW1pdGl2ZV0gPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICByZXR1cm4gQnVmZmVyMi5mcm9tKHZhbHVlW1N5bWJvbC50b1ByaW1pdGl2ZV0oInN0cmluZyIpLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpOwogICAgICB9CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIEFycmF5LWxpa2UgT2JqZWN0LiBSZWNlaXZlZCB0eXBlICIgKyB0eXBlb2YgdmFsdWUpOwogICAgfQogICAgQnVmZmVyMi5mcm9tID0gZnVuY3Rpb24odmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkgewogICAgICByZXR1cm4gZnJvbTIodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCk7CiAgICB9OwogICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKEJ1ZmZlcjIucHJvdG90eXBlLCBVaW50OEFycmF5LnByb3RvdHlwZSk7CiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoQnVmZmVyMiwgVWludDhBcnJheSk7CiAgICBmdW5jdGlvbiBhc3NlcnRTaXplKHNpemUpIHsKICAgICAgaWYgKHR5cGVvZiBzaXplICE9PSAibnVtYmVyIikgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJzaXplIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgbnVtYmVyJyk7CiAgICAgIH0gZWxzZSBpZiAoc2l6ZSA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlICInICsgc2l6ZSArICciIGlzIGludmFsaWQgZm9yIG9wdGlvbiAic2l6ZSInKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gYWxsb2Moc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHsKICAgICAgYXNzZXJ0U2l6ZShzaXplKTsKICAgICAgaWYgKHNpemUgPD0gMCkgewogICAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSk7CiAgICAgIH0KICAgICAgaWYgKGZpbGwgIT09IHZvaWQgMCkgewogICAgICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICJzdHJpbmciID8gY3JlYXRlQnVmZmVyKHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpIDogY3JlYXRlQnVmZmVyKHNpemUpLmZpbGwoZmlsbCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcihzaXplKTsKICAgIH0KICAgIEJ1ZmZlcjIuYWxsb2MgPSBmdW5jdGlvbihzaXplLCBmaWxsLCBlbmNvZGluZykgewogICAgICByZXR1cm4gYWxsb2Moc2l6ZSwgZmlsbCwgZW5jb2RpbmcpOwogICAgfTsKICAgIGZ1bmN0aW9uIGFsbG9jVW5zYWZlKHNpemUpIHsKICAgICAgYXNzZXJ0U2l6ZShzaXplKTsKICAgICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcihzaXplIDwgMCA/IDAgOiBjaGVja2VkKHNpemUpIHwgMCk7CiAgICB9CiAgICBCdWZmZXIyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24oc2l6ZSkgewogICAgICByZXR1cm4gYWxsb2NVbnNhZmUoc2l6ZSk7CiAgICB9OwogICAgQnVmZmVyMi5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbihzaXplKSB7CiAgICAgIHJldHVybiBhbGxvY1Vuc2FmZShzaXplKTsKICAgIH07CiAgICBmdW5jdGlvbiBmcm9tU3RyaW5nKHN0cmluZywgZW5jb2RpbmcpIHsKICAgICAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gInN0cmluZyIgfHwgZW5jb2RpbmcgPT09ICIiKSB7CiAgICAgICAgZW5jb2RpbmcgPSAidXRmOCI7CiAgICAgIH0KICAgICAgaWYgKCFCdWZmZXIyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIiArIGVuY29kaW5nKTsKICAgICAgfQogICAgICBjb25zdCBsZW5ndGggPSBieXRlTGVuZ3RoMihzdHJpbmcsIGVuY29kaW5nKSB8IDA7CiAgICAgIGxldCBidWYgPSBjcmVhdGVCdWZmZXIobGVuZ3RoKTsKICAgICAgY29uc3QgYWN0dWFsID0gYnVmLndyaXRlKHN0cmluZywgZW5jb2RpbmcpOwogICAgICBpZiAoYWN0dWFsICE9PSBsZW5ndGgpIHsKICAgICAgICBidWYgPSBidWYuc2xpY2UoMCwgYWN0dWFsKTsKICAgICAgfQogICAgICByZXR1cm4gYnVmOwogICAgfQogICAgZnVuY3Rpb24gZnJvbUFycmF5TGlrZShhcnJheSkgewogICAgICBjb25zdCBsZW5ndGggPSBhcnJheS5sZW5ndGggPCAwID8gMCA6IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDA7CiAgICAgIGNvbnN0IGJ1ZiA9IGNyZWF0ZUJ1ZmZlcihsZW5ndGgpOwogICAgICBmb3IgKGxldCBpMiA9IDA7IGkyIDwgbGVuZ3RoOyBpMiArPSAxKSB7CiAgICAgICAgYnVmW2kyXSA9IGFycmF5W2kyXSAmIDI1NTsKICAgICAgfQogICAgICByZXR1cm4gYnVmOwogICAgfQogICAgZnVuY3Rpb24gZnJvbUFycmF5VmlldyhhcnJheVZpZXcpIHsKICAgICAgaWYgKGlzSW5zdGFuY2UoYXJyYXlWaWV3LCBVaW50OEFycmF5KSkgewogICAgICAgIGNvbnN0IGNvcHkgPSBuZXcgVWludDhBcnJheShhcnJheVZpZXcpOwogICAgICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIoY29weS5idWZmZXIsIGNvcHkuYnl0ZU9mZnNldCwgY29weS5ieXRlTGVuZ3RoKTsKICAgICAgfQogICAgICByZXR1cm4gZnJvbUFycmF5TGlrZShhcnJheVZpZXcpOwogICAgfQogICAgZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyKGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpIHsKICAgICAgaWYgKGJ5dGVPZmZzZXQgPCAwIHx8IGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0KSB7CiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyJvZmZzZXQiIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcycpOwogICAgICB9CiAgICAgIGlmIChhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCArIChsZW5ndGggfHwgMCkpIHsKICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignImxlbmd0aCIgaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzJyk7CiAgICAgIH0KICAgICAgbGV0IGJ1ZjsKICAgICAgaWYgKGJ5dGVPZmZzZXQgPT09IHZvaWQgMCAmJiBsZW5ndGggPT09IHZvaWQgMCkgewogICAgICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGFycmF5KTsKICAgICAgfSBlbHNlIGlmIChsZW5ndGggPT09IHZvaWQgMCkgewogICAgICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBidWYgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKTsKICAgICAgfQogICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YoYnVmLCBCdWZmZXIyLnByb3RvdHlwZSk7CiAgICAgIHJldHVybiBidWY7CiAgICB9CiAgICBmdW5jdGlvbiBmcm9tT2JqZWN0KG9iaikgewogICAgICBpZiAoQnVmZmVyMi5pc0J1ZmZlcihvYmopKSB7CiAgICAgICAgY29uc3QgbGVuMiA9IGNoZWNrZWQob2JqLmxlbmd0aCkgfCAwOwogICAgICAgIGNvbnN0IGJ1ZiA9IGNyZWF0ZUJ1ZmZlcihsZW4yKTsKICAgICAgICBpZiAoYnVmLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIGJ1ZjsKICAgICAgICB9CiAgICAgICAgb2JqLmNvcHkoYnVmLCAwLCAwLCBsZW4yKTsKICAgICAgICByZXR1cm4gYnVmOwogICAgICB9CiAgICAgIGlmIChvYmoubGVuZ3RoICE9PSB2b2lkIDApIHsKICAgICAgICBpZiAodHlwZW9mIG9iai5sZW5ndGggIT09ICJudW1iZXIiIHx8IG51bWJlcklzTmFOKG9iai5sZW5ndGgpKSB7CiAgICAgICAgICByZXR1cm4gY3JlYXRlQnVmZmVyKDApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZnJvbUFycmF5TGlrZShvYmopOwogICAgICB9CiAgICAgIGlmIChvYmoudHlwZSA9PT0gIkJ1ZmZlciIgJiYgQXJyYXkuaXNBcnJheShvYmouZGF0YSkpIHsKICAgICAgICByZXR1cm4gZnJvbUFycmF5TGlrZShvYmouZGF0YSk7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGNoZWNrZWQobGVuZ3RoKSB7CiAgICAgIGlmIChsZW5ndGggPj0gS19NQVhfTEVOR1RIKSB7CiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkF0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gc2l6ZTogMHgiICsgS19NQVhfTEVOR1RILnRvU3RyaW5nKDE2KSArICIgYnl0ZXMiKTsKICAgICAgfQogICAgICByZXR1cm4gbGVuZ3RoIHwgMDsKICAgIH0KICAgIGZ1bmN0aW9uIFNsb3dCdWZmZXIobGVuZ3RoKSB7CiAgICAgIGlmICgrbGVuZ3RoICE9IGxlbmd0aCkgewogICAgICAgIGxlbmd0aCA9IDA7CiAgICAgIH0KICAgICAgcmV0dXJuIEJ1ZmZlcjIuYWxsb2MoK2xlbmd0aCk7CiAgICB9CiAgICBCdWZmZXIyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIoYikgewogICAgICByZXR1cm4gYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyID09PSB0cnVlICYmIGIgIT09IEJ1ZmZlcjIucHJvdG90eXBlOwogICAgfTsKICAgIEJ1ZmZlcjIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUoYSwgYikgewogICAgICBpZiAoaXNJbnN0YW5jZShhLCBVaW50OEFycmF5KSkKICAgICAgICBhID0gQnVmZmVyMi5mcm9tKGEsIGEub2Zmc2V0LCBhLmJ5dGVMZW5ndGgpOwogICAgICBpZiAoaXNJbnN0YW5jZShiLCBVaW50OEFycmF5KSkKICAgICAgICBiID0gQnVmZmVyMi5mcm9tKGIsIGIub2Zmc2V0LCBiLmJ5dGVMZW5ndGgpOwogICAgICBpZiAoIUJ1ZmZlcjIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlcjIuaXNCdWZmZXIoYikpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgImJ1ZjEiLCAiYnVmMiIgYXJndW1lbnRzIG11c3QgYmUgb25lIG9mIHR5cGUgQnVmZmVyIG9yIFVpbnQ4QXJyYXknKTsKICAgICAgfQogICAgICBpZiAoYSA9PT0gYikKICAgICAgICByZXR1cm4gMDsKICAgICAgbGV0IHggPSBhLmxlbmd0aDsKICAgICAgbGV0IHkgPSBiLmxlbmd0aDsKICAgICAgZm9yIChsZXQgaTIgPSAwLCBsZW4yID0gTWF0aC5taW4oeCwgeSk7IGkyIDwgbGVuMjsgKytpMikgewogICAgICAgIGlmIChhW2kyXSAhPT0gYltpMl0pIHsKICAgICAgICAgIHggPSBhW2kyXTsKICAgICAgICAgIHkgPSBiW2kyXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoeCA8IHkpCiAgICAgICAgcmV0dXJuIC0xOwogICAgICBpZiAoeSA8IHgpCiAgICAgICAgcmV0dXJuIDE7CiAgICAgIHJldHVybiAwOwogICAgfTsKICAgIEJ1ZmZlcjIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcyKGVuY29kaW5nKSB7CiAgICAgIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgY2FzZSAiaGV4IjoKICAgICAgICBjYXNlICJ1dGY4IjoKICAgICAgICBjYXNlICJ1dGYtOCI6CiAgICAgICAgY2FzZSAiYXNjaWkiOgogICAgICAgIGNhc2UgImxhdGluMSI6CiAgICAgICAgY2FzZSAiYmluYXJ5IjoKICAgICAgICBjYXNlICJiYXNlNjQiOgogICAgICAgIGNhc2UgInVjczIiOgogICAgICAgIGNhc2UgInVjcy0yIjoKICAgICAgICBjYXNlICJ1dGYxNmxlIjoKICAgICAgICBjYXNlICJ1dGYtMTZsZSI6CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9OwogICAgQnVmZmVyMi5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQobGlzdCwgbGVuZ3RoKSB7CiAgICAgIGlmICghQXJyYXkuaXNBcnJheShsaXN0KSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJsaXN0IiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKTsKICAgICAgfQogICAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gQnVmZmVyMi5hbGxvYygwKTsKICAgICAgfQogICAgICBsZXQgaTI7CiAgICAgIGlmIChsZW5ndGggPT09IHZvaWQgMCkgewogICAgICAgIGxlbmd0aCA9IDA7CiAgICAgICAgZm9yIChpMiA9IDA7IGkyIDwgbGlzdC5sZW5ndGg7ICsraTIpIHsKICAgICAgICAgIGxlbmd0aCArPSBsaXN0W2kyXS5sZW5ndGg7CiAgICAgICAgfQogICAgICB9CiAgICAgIGNvbnN0IGJ1ZmZlcjIgPSBCdWZmZXIyLmFsbG9jVW5zYWZlKGxlbmd0aCk7CiAgICAgIGxldCBwb3MgPSAwOwogICAgICBmb3IgKGkyID0gMDsgaTIgPCBsaXN0Lmxlbmd0aDsgKytpMikgewogICAgICAgIGxldCBidWYgPSBsaXN0W2kyXTsKICAgICAgICBpZiAoaXNJbnN0YW5jZShidWYsIFVpbnQ4QXJyYXkpKSB7CiAgICAgICAgICBpZiAocG9zICsgYnVmLmxlbmd0aCA+IGJ1ZmZlcjIubGVuZ3RoKSB7CiAgICAgICAgICAgIGlmICghQnVmZmVyMi5pc0J1ZmZlcihidWYpKQogICAgICAgICAgICAgIGJ1ZiA9IEJ1ZmZlcjIuZnJvbShidWYpOwogICAgICAgICAgICBidWYuY29weShidWZmZXIyLCBwb3MpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoYnVmZmVyMiwgYnVmLCBwb3MpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAoIUJ1ZmZlcjIuaXNCdWZmZXIoYnVmKSkgewogICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3QiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBidWYuY29weShidWZmZXIyLCBwb3MpOwogICAgICAgIH0KICAgICAgICBwb3MgKz0gYnVmLmxlbmd0aDsKICAgICAgfQogICAgICByZXR1cm4gYnVmZmVyMjsKICAgIH07CiAgICBmdW5jdGlvbiBieXRlTGVuZ3RoMihzdHJpbmcsIGVuY29kaW5nKSB7CiAgICAgIGlmIChCdWZmZXIyLmlzQnVmZmVyKHN0cmluZykpIHsKICAgICAgICByZXR1cm4gc3RyaW5nLmxlbmd0aDsKICAgICAgfQogICAgICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KHN0cmluZykgfHwgaXNJbnN0YW5jZShzdHJpbmcsIEFycmF5QnVmZmVyKSkgewogICAgICAgIHJldHVybiBzdHJpbmcuYnl0ZUxlbmd0aDsKICAgICAgfQogICAgICBpZiAodHlwZW9mIHN0cmluZyAhPT0gInN0cmluZyIpIHsKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgInN0cmluZyIgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgb3IgQXJyYXlCdWZmZXIuIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBzdHJpbmcpOwogICAgICB9CiAgICAgIGNvbnN0IGxlbjIgPSBzdHJpbmcubGVuZ3RoOwogICAgICBjb25zdCBtdXN0TWF0Y2ggPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gPT09IHRydWU7CiAgICAgIGlmICghbXVzdE1hdGNoICYmIGxlbjIgPT09IDApCiAgICAgICAgcmV0dXJuIDA7CiAgICAgIGxldCBsb3dlcmVkQ2FzZSA9IGZhbHNlOwogICAgICBmb3IgKDsgOyApIHsKICAgICAgICBzd2l0Y2ggKGVuY29kaW5nKSB7CiAgICAgICAgICBjYXNlICJhc2NpaSI6CiAgICAgICAgICBjYXNlICJsYXRpbjEiOgogICAgICAgICAgY2FzZSAiYmluYXJ5IjoKICAgICAgICAgICAgcmV0dXJuIGxlbjI7CiAgICAgICAgICBjYXNlICJ1dGY4IjoKICAgICAgICAgIGNhc2UgInV0Zi04IjoKICAgICAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoOwogICAgICAgICAgY2FzZSAidWNzMiI6CiAgICAgICAgICBjYXNlICJ1Y3MtMiI6CiAgICAgICAgICBjYXNlICJ1dGYxNmxlIjoKICAgICAgICAgIGNhc2UgInV0Zi0xNmxlIjoKICAgICAgICAgICAgcmV0dXJuIGxlbjIgKiAyOwogICAgICAgICAgY2FzZSAiaGV4IjoKICAgICAgICAgICAgcmV0dXJuIGxlbjIgPj4+IDE7CiAgICAgICAgICBjYXNlICJiYXNlNjQiOgogICAgICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aDsKICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgewogICAgICAgICAgICAgIHJldHVybiBtdXN0TWF0Y2ggPyAtMSA6IHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVuY29kaW5nID0gKCIiICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIEJ1ZmZlcjIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGgyOwogICAgZnVuY3Rpb24gc2xvd1RvU3RyaW5nKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7CiAgICAgIGxldCBsb3dlcmVkQ2FzZSA9IGZhbHNlOwogICAgICBpZiAoc3RhcnQgPT09IHZvaWQgMCB8fCBzdGFydCA8IDApIHsKICAgICAgICBzdGFydCA9IDA7CiAgICAgIH0KICAgICAgaWYgKHN0YXJ0ID4gdGhpcy5sZW5ndGgpIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgICAgaWYgKGVuZCA9PT0gdm9pZCAwIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB7CiAgICAgICAgZW5kID0gdGhpcy5sZW5ndGg7CiAgICAgIH0KICAgICAgaWYgKGVuZCA8PSAwKSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CiAgICAgIGVuZCA+Pj49IDA7CiAgICAgIHN0YXJ0ID4+Pj0gMDsKICAgICAgaWYgKGVuZCA8PSBzdGFydCkgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQogICAgICBpZiAoIWVuY29kaW5nKQogICAgICAgIGVuY29kaW5nID0gInV0ZjgiOwogICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgIHN3aXRjaCAoZW5jb2RpbmcpIHsKICAgICAgICAgIGNhc2UgImhleCI6CiAgICAgICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKTsKICAgICAgICAgIGNhc2UgInV0ZjgiOgogICAgICAgICAgY2FzZSAidXRmLTgiOgogICAgICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpOwogICAgICAgICAgY2FzZSAiYXNjaWkiOgogICAgICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKTsKICAgICAgICAgIGNhc2UgImxhdGluMSI6CiAgICAgICAgICBjYXNlICJiaW5hcnkiOgogICAgICAgICAgICByZXR1cm4gbGF0aW4xU2xpY2UodGhpcywgc3RhcnQsIGVuZCk7CiAgICAgICAgICBjYXNlICJiYXNlNjQiOgogICAgICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZCk7CiAgICAgICAgICBjYXNlICJ1Y3MyIjoKICAgICAgICAgIGNhc2UgInVjcy0yIjoKICAgICAgICAgIGNhc2UgInV0ZjE2bGUiOgogICAgICAgICAgY2FzZSAidXRmLTE2bGUiOgogICAgICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgaWYgKGxvd2VyZWRDYXNlKQogICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIgKyBlbmNvZGluZyk7CiAgICAgICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgIiIpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIEJ1ZmZlcjIucHJvdG90eXBlLl9pc0J1ZmZlciA9IHRydWU7CiAgICBmdW5jdGlvbiBzd2FwKGIsIG4sIG0pIHsKICAgICAgY29uc3QgaTIgPSBiW25dOwogICAgICBiW25dID0gYlttXTsKICAgICAgYlttXSA9IGkyOwogICAgfQogICAgQnVmZmVyMi5wcm90b3R5cGUuc3dhcDE2ID0gZnVuY3Rpb24gc3dhcDE2KCkgewogICAgICBjb25zdCBsZW4yID0gdGhpcy5sZW5ndGg7CiAgICAgIGlmIChsZW4yICUgMiAhPT0gMCkgewogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cyIpOwogICAgICB9CiAgICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCBsZW4yOyBpMiArPSAyKSB7CiAgICAgICAgc3dhcCh0aGlzLCBpMiwgaTIgKyAxKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpczsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5zd2FwMzIgPSBmdW5jdGlvbiBzd2FwMzIoKSB7CiAgICAgIGNvbnN0IGxlbjIgPSB0aGlzLmxlbmd0aDsKICAgICAgaWYgKGxlbjIgJSA0ICE9PSAwKSB7CiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzIik7CiAgICAgIH0KICAgICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IGxlbjI7IGkyICs9IDQpIHsKICAgICAgICBzd2FwKHRoaXMsIGkyLCBpMiArIDMpOwogICAgICAgIHN3YXAodGhpcywgaTIgKyAxLCBpMiArIDIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnN3YXA2NCA9IGZ1bmN0aW9uIHN3YXA2NCgpIHsKICAgICAgY29uc3QgbGVuMiA9IHRoaXMubGVuZ3RoOwogICAgICBpZiAobGVuMiAlIDggIT09IDApIHsKICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMiKTsKICAgICAgfQogICAgICBmb3IgKGxldCBpMiA9IDA7IGkyIDwgbGVuMjsgaTIgKz0gOCkgewogICAgICAgIHN3YXAodGhpcywgaTIsIGkyICsgNyk7CiAgICAgICAgc3dhcCh0aGlzLCBpMiArIDEsIGkyICsgNik7CiAgICAgICAgc3dhcCh0aGlzLCBpMiArIDIsIGkyICsgNSk7CiAgICAgICAgc3dhcCh0aGlzLCBpMiArIDMsIGkyICsgNCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHsKICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5sZW5ndGg7CiAgICAgIGlmIChsZW5ndGggPT09IDApCiAgICAgICAgcmV0dXJuICIiOwogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkKICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aCk7CiAgICAgIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS50b0xvY2FsZVN0cmluZyA9IEJ1ZmZlcjIucHJvdG90eXBlLnRvU3RyaW5nOwogICAgQnVmZmVyMi5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzKGIpIHsKICAgICAgaWYgKCFCdWZmZXIyLmlzQnVmZmVyKGIpKQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIiKTsKICAgICAgaWYgKHRoaXMgPT09IGIpCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIHJldHVybiBCdWZmZXIyLmNvbXBhcmUodGhpcywgYikgPT09IDA7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QyKCkgewogICAgICBsZXQgc3RyID0gIiI7CiAgICAgIGNvbnN0IG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVM7CiAgICAgIHN0ciA9IHRoaXMudG9TdHJpbmcoImhleCIsIDAsIG1heCkucmVwbGFjZSgvKC57Mn0pL2csICIkMSAiKS50cmltKCk7CiAgICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkKICAgICAgICBzdHIgKz0gIiAuLi4gIjsKICAgICAgcmV0dXJuICI8QnVmZmVyICIgKyBzdHIgKyAiPiI7CiAgICB9OwogICAgaWYgKGN1c3RvbUluc3BlY3RTeW1ib2wpIHsKICAgICAgQnVmZmVyMi5wcm90b3R5cGVbY3VzdG9tSW5zcGVjdFN5bWJvbF0gPSBCdWZmZXIyLnByb3RvdHlwZS5pbnNwZWN0OwogICAgfQogICAgQnVmZmVyMi5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUodGFyZ2V0LCBzdGFydCwgZW5kLCB0aGlzU3RhcnQsIHRoaXNFbmQpIHsKICAgICAgaWYgKGlzSW5zdGFuY2UodGFyZ2V0LCBVaW50OEFycmF5KSkgewogICAgICAgIHRhcmdldCA9IEJ1ZmZlcjIuZnJvbSh0YXJnZXQsIHRhcmdldC5vZmZzZXQsIHRhcmdldC5ieXRlTGVuZ3RoKTsKICAgICAgfQogICAgICBpZiAoIUJ1ZmZlcjIuaXNCdWZmZXIodGFyZ2V0KSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSAidGFyZ2V0IiBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIEJ1ZmZlciBvciBVaW50OEFycmF5LiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgdGFyZ2V0KTsKICAgICAgfQogICAgICBpZiAoc3RhcnQgPT09IHZvaWQgMCkgewogICAgICAgIHN0YXJ0ID0gMDsKICAgICAgfQogICAgICBpZiAoZW5kID09PSB2b2lkIDApIHsKICAgICAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMDsKICAgICAgfQogICAgICBpZiAodGhpc1N0YXJ0ID09PSB2b2lkIDApIHsKICAgICAgICB0aGlzU3RhcnQgPSAwOwogICAgICB9CiAgICAgIGlmICh0aGlzRW5kID09PSB2b2lkIDApIHsKICAgICAgICB0aGlzRW5kID0gdGhpcy5sZW5ndGg7CiAgICAgIH0KICAgICAgaWYgKHN0YXJ0IDwgMCB8fCBlbmQgPiB0YXJnZXQubGVuZ3RoIHx8IHRoaXNTdGFydCA8IDAgfHwgdGhpc0VuZCA+IHRoaXMubGVuZ3RoKSB7CiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoIm91dCBvZiByYW5nZSBpbmRleCIpOwogICAgICB9CiAgICAgIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfQogICAgICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQpIHsKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0KICAgICAgaWYgKHN0YXJ0ID49IGVuZCkgewogICAgICAgIHJldHVybiAxOwogICAgICB9CiAgICAgIHN0YXJ0ID4+Pj0gMDsKICAgICAgZW5kID4+Pj0gMDsKICAgICAgdGhpc1N0YXJ0ID4+Pj0gMDsKICAgICAgdGhpc0VuZCA+Pj49IDA7CiAgICAgIGlmICh0aGlzID09PSB0YXJnZXQpCiAgICAgICAgcmV0dXJuIDA7CiAgICAgIGxldCB4ID0gdGhpc0VuZCAtIHRoaXNTdGFydDsKICAgICAgbGV0IHkgPSBlbmQgLSBzdGFydDsKICAgICAgY29uc3QgbGVuMiA9IE1hdGgubWluKHgsIHkpOwogICAgICBjb25zdCB0aGlzQ29weSA9IHRoaXMuc2xpY2UodGhpc1N0YXJ0LCB0aGlzRW5kKTsKICAgICAgY29uc3QgdGFyZ2V0Q29weSA9IHRhcmdldC5zbGljZShzdGFydCwgZW5kKTsKICAgICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IGxlbjI7ICsraTIpIHsKICAgICAgICBpZiAodGhpc0NvcHlbaTJdICE9PSB0YXJnZXRDb3B5W2kyXSkgewogICAgICAgICAgeCA9IHRoaXNDb3B5W2kyXTsKICAgICAgICAgIHkgPSB0YXJnZXRDb3B5W2kyXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoeCA8IHkpCiAgICAgICAgcmV0dXJuIC0xOwogICAgICBpZiAoeSA8IHgpCiAgICAgICAgcmV0dXJuIDE7CiAgICAgIHJldHVybiAwOwogICAgfTsKICAgIGZ1bmN0aW9uIGJpZGlyZWN0aW9uYWxJbmRleE9mKGJ1ZmZlcjIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikgewogICAgICBpZiAoYnVmZmVyMi5sZW5ndGggPT09IDApCiAgICAgICAgcmV0dXJuIC0xOwogICAgICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICJzdHJpbmciKSB7CiAgICAgICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0OwogICAgICAgIGJ5dGVPZmZzZXQgPSAwOwogICAgICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPiAyMTQ3NDgzNjQ3KSB7CiAgICAgICAgYnl0ZU9mZnNldCA9IDIxNDc0ODM2NDc7CiAgICAgIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0yMTQ3NDgzNjQ4KSB7CiAgICAgICAgYnl0ZU9mZnNldCA9IC0yMTQ3NDgzNjQ4OwogICAgICB9CiAgICAgIGJ5dGVPZmZzZXQgPSArYnl0ZU9mZnNldDsKICAgICAgaWYgKG51bWJlcklzTmFOKGJ5dGVPZmZzZXQpKSB7CiAgICAgICAgYnl0ZU9mZnNldCA9IGRpciA/IDAgOiBidWZmZXIyLmxlbmd0aCAtIDE7CiAgICAgIH0KICAgICAgaWYgKGJ5dGVPZmZzZXQgPCAwKQogICAgICAgIGJ5dGVPZmZzZXQgPSBidWZmZXIyLmxlbmd0aCArIGJ5dGVPZmZzZXQ7CiAgICAgIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlcjIubGVuZ3RoKSB7CiAgICAgICAgaWYgKGRpcikKICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICBlbHNlCiAgICAgICAgICBieXRlT2Zmc2V0ID0gYnVmZmVyMi5sZW5ndGggLSAxOwogICAgICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7CiAgICAgICAgaWYgKGRpcikKICAgICAgICAgIGJ5dGVPZmZzZXQgPSAwOwogICAgICAgIGVsc2UKICAgICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAgICBpZiAodHlwZW9mIHZhbCA9PT0gInN0cmluZyIpIHsKICAgICAgICB2YWwgPSBCdWZmZXIyLmZyb20odmFsLCBlbmNvZGluZyk7CiAgICAgIH0KICAgICAgaWYgKEJ1ZmZlcjIuaXNCdWZmZXIodmFsKSkgewogICAgICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyMiwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAibnVtYmVyIikgewogICAgICAgIHZhbCA9IHZhbCAmIDI1NTsKICAgICAgICBpZiAodHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgIGlmIChkaXIpIHsKICAgICAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChidWZmZXIyLCB2YWwsIGJ5dGVPZmZzZXQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoYnVmZmVyMiwgdmFsLCBieXRlT2Zmc2V0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIyLCBbdmFsXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcik7CiAgICAgIH0KICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigidmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyIik7CiAgICB9CiAgICBmdW5jdGlvbiBhcnJheUluZGV4T2YoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHsKICAgICAgbGV0IGluZGV4U2l6ZSA9IDE7CiAgICAgIGxldCBhcnJMZW5ndGggPSBhcnIubGVuZ3RoOwogICAgICBsZXQgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aDsKICAgICAgaWYgKGVuY29kaW5nICE9PSB2b2lkIDApIHsKICAgICAgICBlbmNvZGluZyA9IFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKTsKICAgICAgICBpZiAoZW5jb2RpbmcgPT09ICJ1Y3MyIiB8fCBlbmNvZGluZyA9PT0gInVjcy0yIiB8fCBlbmNvZGluZyA9PT0gInV0ZjE2bGUiIHx8IGVuY29kaW5nID09PSAidXRmLTE2bGUiKSB7CiAgICAgICAgICBpZiAoYXJyLmxlbmd0aCA8IDIgfHwgdmFsLmxlbmd0aCA8IDIpIHsKICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgfQogICAgICAgICAgaW5kZXhTaXplID0gMjsKICAgICAgICAgIGFyckxlbmd0aCAvPSAyOwogICAgICAgICAgdmFsTGVuZ3RoIC89IDI7CiAgICAgICAgICBieXRlT2Zmc2V0IC89IDI7CiAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHJlYWQoYnVmLCBpMykgewogICAgICAgIGlmIChpbmRleFNpemUgPT09IDEpIHsKICAgICAgICAgIHJldHVybiBidWZbaTNdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gYnVmLnJlYWRVSW50MTZCRShpMyAqIGluZGV4U2l6ZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGxldCBpMjsKICAgICAgaWYgKGRpcikgewogICAgICAgIGxldCBmb3VuZEluZGV4ID0gLTE7CiAgICAgICAgZm9yIChpMiA9IGJ5dGVPZmZzZXQ7IGkyIDwgYXJyTGVuZ3RoOyBpMisrKSB7CiAgICAgICAgICBpZiAocmVhZChhcnIsIGkyKSA9PT0gcmVhZCh2YWwsIGZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkyIC0gZm91bmRJbmRleCkpIHsKICAgICAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKQogICAgICAgICAgICAgIGZvdW5kSW5kZXggPSBpMjsKICAgICAgICAgICAgaWYgKGkyIC0gZm91bmRJbmRleCArIDEgPT09IHZhbExlbmd0aCkKICAgICAgICAgICAgICByZXR1cm4gZm91bmRJbmRleCAqIGluZGV4U2l6ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChmb3VuZEluZGV4ICE9PSAtMSkKICAgICAgICAgICAgICBpMiAtPSBpMiAtIGZvdW5kSW5kZXg7CiAgICAgICAgICAgIGZvdW5kSW5kZXggPSAtMTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGJ5dGVPZmZzZXQgKyB2YWxMZW5ndGggPiBhcnJMZW5ndGgpCiAgICAgICAgICBieXRlT2Zmc2V0ID0gYXJyTGVuZ3RoIC0gdmFsTGVuZ3RoOwogICAgICAgIGZvciAoaTIgPSBieXRlT2Zmc2V0OyBpMiA+PSAwOyBpMi0tKSB7CiAgICAgICAgICBsZXQgZm91bmQgPSB0cnVlOwogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB2YWxMZW5ndGg7IGorKykgewogICAgICAgICAgICBpZiAocmVhZChhcnIsIGkyICsgaikgIT09IHJlYWQodmFsLCBqKSkgewogICAgICAgICAgICAgIGZvdW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChmb3VuZCkKICAgICAgICAgICAgcmV0dXJuIGkyOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gLTE7CiAgICB9CiAgICBCdWZmZXIyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzMih2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7CiAgICAgIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mMih2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7CiAgICAgIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKTsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uIGxhc3RJbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHsKICAgICAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKTsKICAgIH07CiAgICBmdW5jdGlvbiBoZXhXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICAgICAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMDsKICAgICAgY29uc3QgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldDsKICAgICAgaWYgKCFsZW5ndGgpIHsKICAgICAgICBsZW5ndGggPSByZW1haW5pbmc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aCk7CiAgICAgICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykgewogICAgICAgICAgbGVuZ3RoID0gcmVtYWluaW5nOwogICAgICAgIH0KICAgICAgfQogICAgICBjb25zdCBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoOwogICAgICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikgewogICAgICAgIGxlbmd0aCA9IHN0ckxlbiAvIDI7CiAgICAgIH0KICAgICAgbGV0IGkyOwogICAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW5ndGg7ICsraTIpIHsKICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkyICogMiwgMiksIDE2KTsKICAgICAgICBpZiAobnVtYmVySXNOYU4ocGFyc2VkKSkKICAgICAgICAgIHJldHVybiBpMjsKICAgICAgICBidWZbb2Zmc2V0ICsgaTJdID0gcGFyc2VkOwogICAgICB9CiAgICAgIHJldHVybiBpMjsKICAgIH0KICAgIGZ1bmN0aW9uIHV0ZjhXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICAgICAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aCk7CiAgICB9CiAgICBmdW5jdGlvbiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkgewogICAgICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aCk7CiAgICB9CiAgICBmdW5jdGlvbiBiYXNlNjRXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICAgICAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKTsKICAgIH0KICAgIGZ1bmN0aW9uIHVjczJXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHsKICAgICAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aCk7CiAgICB9CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7CiAgICAgIGlmIChvZmZzZXQgPT09IHZvaWQgMCkgewogICAgICAgIGVuY29kaW5nID0gInV0ZjgiOwogICAgICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoOwogICAgICAgIG9mZnNldCA9IDA7CiAgICAgIH0gZWxzZSBpZiAobGVuZ3RoID09PSB2b2lkIDAgJiYgdHlwZW9mIG9mZnNldCA9PT0gInN0cmluZyIpIHsKICAgICAgICBlbmNvZGluZyA9IG9mZnNldDsKICAgICAgICBsZW5ndGggPSB0aGlzLmxlbmd0aDsKICAgICAgICBvZmZzZXQgPSAwOwogICAgICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHsKICAgICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHsKICAgICAgICAgIGxlbmd0aCA9IGxlbmd0aCA+Pj4gMDsKICAgICAgICAgIGlmIChlbmNvZGluZyA9PT0gdm9pZCAwKQogICAgICAgICAgICBlbmNvZGluZyA9ICJ1dGY4IjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZW5jb2RpbmcgPSBsZW5ndGg7CiAgICAgICAgICBsZW5ndGggPSB2b2lkIDA7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQiKTsKICAgICAgfQogICAgICBjb25zdCByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldDsKICAgICAgaWYgKGxlbmd0aCA9PT0gdm9pZCAwIHx8IGxlbmd0aCA+IHJlbWFpbmluZykKICAgICAgICBsZW5ndGggPSByZW1haW5pbmc7CiAgICAgIGlmIChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkgewogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcyIpOwogICAgICB9CiAgICAgIGlmICghZW5jb2RpbmcpCiAgICAgICAgZW5jb2RpbmcgPSAidXRmOCI7CiAgICAgIGxldCBsb3dlcmVkQ2FzZSA9IGZhbHNlOwogICAgICBmb3IgKDsgOyApIHsKICAgICAgICBzd2l0Y2ggKGVuY29kaW5nKSB7CiAgICAgICAgICBjYXNlICJoZXgiOgogICAgICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCk7CiAgICAgICAgICBjYXNlICJ1dGY4IjoKICAgICAgICAgIGNhc2UgInV0Zi04IjoKICAgICAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKTsKICAgICAgICAgIGNhc2UgImFzY2lpIjoKICAgICAgICAgIGNhc2UgImxhdGluMSI6CiAgICAgICAgICBjYXNlICJiaW5hcnkiOgogICAgICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKTsKICAgICAgICAgIGNhc2UgImJhc2U2NCI6CiAgICAgICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKTsKICAgICAgICAgIGNhc2UgInVjczIiOgogICAgICAgICAgY2FzZSAidWNzLTIiOgogICAgICAgICAgY2FzZSAidXRmMTZsZSI6CiAgICAgICAgICBjYXNlICJ1dGYtMTZsZSI6CiAgICAgICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCk7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBpZiAobG93ZXJlZENhc2UpCiAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIiArIGVuY29kaW5nKTsKICAgICAgICAgICAgZW5jb2RpbmcgPSAoIiIgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0eXBlOiAiQnVmZmVyIiwKICAgICAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMCkKICAgICAgfTsKICAgIH07CiAgICBmdW5jdGlvbiBiYXNlNjRTbGljZShidWYsIHN0YXJ0LCBlbmQpIHsKICAgICAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkgewogICAgICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiB1dGY4U2xpY2UoYnVmLCBzdGFydCwgZW5kKSB7CiAgICAgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCk7CiAgICAgIGNvbnN0IHJlcyA9IFtdOwogICAgICBsZXQgaTIgPSBzdGFydDsKICAgICAgd2hpbGUgKGkyIDwgZW5kKSB7CiAgICAgICAgY29uc3QgZmlyc3RCeXRlID0gYnVmW2kyXTsKICAgICAgICBsZXQgY29kZVBvaW50ID0gbnVsbDsKICAgICAgICBsZXQgYnl0ZXNQZXJTZXF1ZW5jZSA9IGZpcnN0Qnl0ZSA+IDIzOSA/IDQgOiBmaXJzdEJ5dGUgPiAyMjMgPyAzIDogZmlyc3RCeXRlID4gMTkxID8gMiA6IDE7CiAgICAgICAgaWYgKGkyICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHsKICAgICAgICAgIGxldCBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnQ7CiAgICAgICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAxMjgpIHsKICAgICAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kyICsgMV07CiAgICAgICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMTkyKSA9PT0gMTI4KSB7CiAgICAgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDMxKSA8PCA2IHwgc2Vjb25kQnl0ZSAmIDYzOwogICAgICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAxMjcpIHsKICAgICAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kyICsgMV07CiAgICAgICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kyICsgMl07CiAgICAgICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMTkyKSA9PT0gMTI4ICYmICh0aGlyZEJ5dGUgJiAxOTIpID09PSAxMjgpIHsKICAgICAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMTUpIDw8IDEyIHwgKHNlY29uZEJ5dGUgJiA2MykgPDwgNiB8IHRoaXJkQnl0ZSAmIDYzOwogICAgICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAyMDQ3ICYmICh0ZW1wQ29kZVBvaW50IDwgNTUyOTYgfHwgdGVtcENvZGVQb2ludCA+IDU3MzQzKSkgewogICAgICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaTIgKyAxXTsKICAgICAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaTIgKyAyXTsKICAgICAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kyICsgM107CiAgICAgICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMTkyKSA9PT0gMTI4ICYmICh0aGlyZEJ5dGUgJiAxOTIpID09PSAxMjggJiYgKGZvdXJ0aEJ5dGUgJiAxOTIpID09PSAxMjgpIHsKICAgICAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMTUpIDw8IDE4IHwgKHNlY29uZEJ5dGUgJiA2MykgPDwgMTIgfCAodGhpcmRCeXRlICYgNjMpIDw8IDYgfCBmb3VydGhCeXRlICYgNjM7CiAgICAgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDY1NTM1ICYmIHRlbXBDb2RlUG9pbnQgPCAxMTE0MTEyKSB7CiAgICAgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7CiAgICAgICAgICBjb2RlUG9pbnQgPSA2NTUzMzsKICAgICAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxOwogICAgICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gNjU1MzUpIHsKICAgICAgICAgIGNvZGVQb2ludCAtPSA2NTUzNjsKICAgICAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAxMDIzIHwgNTUyOTYpOwogICAgICAgICAgY29kZVBvaW50ID0gNTYzMjAgfCBjb2RlUG9pbnQgJiAxMDIzOwogICAgICAgIH0KICAgICAgICByZXMucHVzaChjb2RlUG9pbnQpOwogICAgICAgIGkyICs9IGJ5dGVzUGVyU2VxdWVuY2U7CiAgICAgIH0KICAgICAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpOwogICAgfQogICAgY29uc3QgTUFYX0FSR1VNRU5UU19MRU5HVEggPSA0MDk2OwogICAgZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5KGNvZGVQb2ludHMpIHsKICAgICAgY29uc3QgbGVuMiA9IGNvZGVQb2ludHMubGVuZ3RoOwogICAgICBpZiAobGVuMiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkgewogICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY29kZVBvaW50cyk7CiAgICAgIH0KICAgICAgbGV0IHJlcyA9ICIiOwogICAgICBsZXQgaTIgPSAwOwogICAgICB3aGlsZSAoaTIgPCBsZW4yKSB7CiAgICAgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzLnNsaWNlKGkyLCBpMiArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkpOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9CiAgICBmdW5jdGlvbiBhc2NpaVNsaWNlKGJ1Ziwgc3RhcnQsIGVuZCkgewogICAgICBsZXQgcmV0ID0gIiI7CiAgICAgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCk7CiAgICAgIGZvciAobGV0IGkyID0gc3RhcnQ7IGkyIDwgZW5kOyArK2kyKSB7CiAgICAgICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2kyXSAmIDEyNyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJldDsKICAgIH0KICAgIGZ1bmN0aW9uIGxhdGluMVNsaWNlKGJ1Ziwgc3RhcnQsIGVuZCkgewogICAgICBsZXQgcmV0ID0gIiI7CiAgICAgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZCk7CiAgICAgIGZvciAobGV0IGkyID0gc3RhcnQ7IGkyIDwgZW5kOyArK2kyKSB7CiAgICAgICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2kyXSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJldDsKICAgIH0KICAgIGZ1bmN0aW9uIGhleFNsaWNlKGJ1Ziwgc3RhcnQsIGVuZCkgewogICAgICBjb25zdCBsZW4yID0gYnVmLmxlbmd0aDsKICAgICAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApCiAgICAgICAgc3RhcnQgPSAwOwogICAgICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbjIpCiAgICAgICAgZW5kID0gbGVuMjsKICAgICAgbGV0IG91dCA9ICIiOwogICAgICBmb3IgKGxldCBpMiA9IHN0YXJ0OyBpMiA8IGVuZDsgKytpMikgewogICAgICAgIG91dCArPSBoZXhTbGljZUxvb2t1cFRhYmxlW2J1ZltpMl1dOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgICBmdW5jdGlvbiB1dGYxNmxlU2xpY2UoYnVmLCBzdGFydCwgZW5kKSB7CiAgICAgIGNvbnN0IGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpOwogICAgICBsZXQgcmVzID0gIiI7CiAgICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCBieXRlcy5sZW5ndGggLSAxOyBpMiArPSAyKSB7CiAgICAgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaTJdICsgYnl0ZXNbaTIgKyAxXSAqIDI1Nik7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlczsKICAgIH0KICAgIEJ1ZmZlcjIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2Uoc3RhcnQsIGVuZCkgewogICAgICBjb25zdCBsZW4yID0gdGhpcy5sZW5ndGg7CiAgICAgIHN0YXJ0ID0gfn5zdGFydDsKICAgICAgZW5kID0gZW5kID09PSB2b2lkIDAgPyBsZW4yIDogfn5lbmQ7CiAgICAgIGlmIChzdGFydCA8IDApIHsKICAgICAgICBzdGFydCArPSBsZW4yOwogICAgICAgIGlmIChzdGFydCA8IDApCiAgICAgICAgICBzdGFydCA9IDA7CiAgICAgIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4yKSB7CiAgICAgICAgc3RhcnQgPSBsZW4yOwogICAgICB9CiAgICAgIGlmIChlbmQgPCAwKSB7CiAgICAgICAgZW5kICs9IGxlbjI7CiAgICAgICAgaWYgKGVuZCA8IDApCiAgICAgICAgICBlbmQgPSAwOwogICAgICB9IGVsc2UgaWYgKGVuZCA+IGxlbjIpIHsKICAgICAgICBlbmQgPSBsZW4yOwogICAgICB9CiAgICAgIGlmIChlbmQgPCBzdGFydCkKICAgICAgICBlbmQgPSBzdGFydDsKICAgICAgY29uc3QgbmV3QnVmID0gdGhpcy5zdWJhcnJheShzdGFydCwgZW5kKTsKICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG5ld0J1ZiwgQnVmZmVyMi5wcm90b3R5cGUpOwogICAgICByZXR1cm4gbmV3QnVmOwogICAgfTsKICAgIGZ1bmN0aW9uIGNoZWNrT2Zmc2V0KG9mZnNldCwgZXh0LCBsZW5ndGgpIHsKICAgICAgaWYgKG9mZnNldCAlIDEgIT09IDAgfHwgb2Zmc2V0IDwgMCkKICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigib2Zmc2V0IGlzIG5vdCB1aW50Iik7CiAgICAgIGlmIChvZmZzZXQgKyBleHQgPiBsZW5ndGgpCiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoIlRyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgiKTsKICAgIH0KICAgIEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRVaW50TEUgPSBCdWZmZXIyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRShvZmZzZXQsIGJ5dGVMZW5ndGgzLCBub0Fzc2VydCkgewogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGJ5dGVMZW5ndGgzID0gYnl0ZUxlbmd0aDMgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoMywgdGhpcy5sZW5ndGgpOwogICAgICBsZXQgdmFsID0gdGhpc1tvZmZzZXRdOwogICAgICBsZXQgbXVsID0gMTsKICAgICAgbGV0IGkyID0gMDsKICAgICAgd2hpbGUgKCsraTIgPCBieXRlTGVuZ3RoMyAmJiAobXVsICo9IDI1NikpIHsKICAgICAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpMl0gKiBtdWw7CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbDsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5yZWFkVWludEJFID0gQnVmZmVyMi5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUob2Zmc2V0LCBieXRlTGVuZ3RoMywgbm9Bc3NlcnQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBieXRlTGVuZ3RoMyA9IGJ5dGVMZW5ndGgzID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KSB7CiAgICAgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoMywgdGhpcy5sZW5ndGgpOwogICAgICB9CiAgICAgIGxldCB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aDNdOwogICAgICBsZXQgbXVsID0gMTsKICAgICAgd2hpbGUgKGJ5dGVMZW5ndGgzID4gMCAmJiAobXVsICo9IDI1NikpIHsKICAgICAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGgzXSAqIG11bDsKICAgICAgfQogICAgICByZXR1cm4gdmFsOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRVaW50OCA9IEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OChvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKTsKICAgICAgcmV0dXJuIHRoaXNbb2Zmc2V0XTsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5yZWFkVWludDE2TEUgPSBCdWZmZXIyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUob2Zmc2V0LCBub0Fzc2VydCkgewogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aCk7CiAgICAgIHJldHVybiB0aGlzW29mZnNldF0gfCB0aGlzW29mZnNldCArIDFdIDw8IDg7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZFVpbnQxNkJFID0gQnVmZmVyMi5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpOwogICAgICByZXR1cm4gdGhpc1tvZmZzZXRdIDw8IDggfCB0aGlzW29mZnNldCArIDFdOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRVaW50MzJMRSA9IEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRShvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKICAgICAgcmV0dXJuICh0aGlzW29mZnNldF0gfCB0aGlzW29mZnNldCArIDFdIDw8IDggfCB0aGlzW29mZnNldCArIDJdIDw8IDE2KSArIHRoaXNbb2Zmc2V0ICsgM10gKiAxNjc3NzIxNjsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5yZWFkVWludDMyQkUgPSBCdWZmZXIyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUob2Zmc2V0LCBub0Fzc2VydCkgewogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCk7CiAgICAgIHJldHVybiB0aGlzW29mZnNldF0gKiAxNjc3NzIxNiArICh0aGlzW29mZnNldCArIDFdIDw8IDE2IHwgdGhpc1tvZmZzZXQgKyAyXSA8PCA4IHwgdGhpc1tvZmZzZXQgKyAzXSk7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZEJpZ1VJbnQ2NExFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHJlYWRCaWdVSW50NjRMRShvZmZzZXQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICB2YWxpZGF0ZU51bWJlcihvZmZzZXQsICJvZmZzZXQiKTsKICAgICAgY29uc3QgZmlyc3QgPSB0aGlzW29mZnNldF07CiAgICAgIGNvbnN0IGxhc3QgPSB0aGlzW29mZnNldCArIDddOwogICAgICBpZiAoZmlyc3QgPT09IHZvaWQgMCB8fCBsYXN0ID09PSB2b2lkIDApIHsKICAgICAgICBib3VuZHNFcnJvcihvZmZzZXQsIHRoaXMubGVuZ3RoIC0gOCk7CiAgICAgIH0KICAgICAgY29uc3QgbG8gPSBmaXJzdCArIHRoaXNbKytvZmZzZXRdICogMiAqKiA4ICsgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICsgdGhpc1srK29mZnNldF0gKiAyICoqIDI0OwogICAgICBjb25zdCBoaSA9IHRoaXNbKytvZmZzZXRdICsgdGhpc1srK29mZnNldF0gKiAyICoqIDggKyB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgKyBsYXN0ICogMiAqKiAyNDsKICAgICAgcmV0dXJuIEJpZ0ludChsbykgKyAoQmlnSW50KGhpKSA8PCBCaWdJbnQoMzIpKTsKICAgIH0pOwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZEJpZ1VJbnQ2NEJFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHJlYWRCaWdVSW50NjRCRShvZmZzZXQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICB2YWxpZGF0ZU51bWJlcihvZmZzZXQsICJvZmZzZXQiKTsKICAgICAgY29uc3QgZmlyc3QgPSB0aGlzW29mZnNldF07CiAgICAgIGNvbnN0IGxhc3QgPSB0aGlzW29mZnNldCArIDddOwogICAgICBpZiAoZmlyc3QgPT09IHZvaWQgMCB8fCBsYXN0ID09PSB2b2lkIDApIHsKICAgICAgICBib3VuZHNFcnJvcihvZmZzZXQsIHRoaXMubGVuZ3RoIC0gOCk7CiAgICAgIH0KICAgICAgY29uc3QgaGkgPSBmaXJzdCAqIDIgKiogMjQgKyB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgKyB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArIHRoaXNbKytvZmZzZXRdOwogICAgICBjb25zdCBsbyA9IHRoaXNbKytvZmZzZXRdICogMiAqKiAyNCArIHRoaXNbKytvZmZzZXRdICogMiAqKiAxNiArIHRoaXNbKytvZmZzZXRdICogMiAqKiA4ICsgbGFzdDsKICAgICAgcmV0dXJuIChCaWdJbnQoaGkpIDw8IEJpZ0ludCgzMikpICsgQmlnSW50KGxvKTsKICAgIH0pOwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFKG9mZnNldCwgYnl0ZUxlbmd0aDMsIG5vQXNzZXJ0KSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgYnl0ZUxlbmd0aDMgPSBieXRlTGVuZ3RoMyA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgzLCB0aGlzLmxlbmd0aCk7CiAgICAgIGxldCB2YWwgPSB0aGlzW29mZnNldF07CiAgICAgIGxldCBtdWwgPSAxOwogICAgICBsZXQgaTIgPSAwOwogICAgICB3aGlsZSAoKytpMiA8IGJ5dGVMZW5ndGgzICYmIChtdWwgKj0gMjU2KSkgewogICAgICAgIHZhbCArPSB0aGlzW29mZnNldCArIGkyXSAqIG11bDsKICAgICAgfQogICAgICBtdWwgKj0gMTI4OwogICAgICBpZiAodmFsID49IG11bCkKICAgICAgICB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgzKTsKICAgICAgcmV0dXJuIHZhbDsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5yZWFkSW50QkUgPSBmdW5jdGlvbiByZWFkSW50QkUob2Zmc2V0LCBieXRlTGVuZ3RoMywgbm9Bc3NlcnQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBieXRlTGVuZ3RoMyA9IGJ5dGVMZW5ndGgzID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aDMsIHRoaXMubGVuZ3RoKTsKICAgICAgbGV0IGkyID0gYnl0ZUxlbmd0aDM7CiAgICAgIGxldCBtdWwgPSAxOwogICAgICBsZXQgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWkyXTsKICAgICAgd2hpbGUgKGkyID4gMCAmJiAobXVsICo9IDI1NikpIHsKICAgICAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWkyXSAqIG11bDsKICAgICAgfQogICAgICBtdWwgKj0gMTI4OwogICAgICBpZiAodmFsID49IG11bCkKICAgICAgICB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgzKTsKICAgICAgcmV0dXJuIHZhbDsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4KG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpOwogICAgICBpZiAoISh0aGlzW29mZnNldF0gJiAxMjgpKQogICAgICAgIHJldHVybiB0aGlzW29mZnNldF07CiAgICAgIHJldHVybiAoMjU1IC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMTsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpOwogICAgICBjb25zdCB2YWwgPSB0aGlzW29mZnNldF0gfCB0aGlzW29mZnNldCArIDFdIDw8IDg7CiAgICAgIHJldHVybiB2YWwgJiAzMjc2OCA/IHZhbCB8IDQyOTQ5MDE3NjAgOiB2YWw7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRShvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKTsKICAgICAgY29uc3QgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8IHRoaXNbb2Zmc2V0XSA8PCA4OwogICAgICByZXR1cm4gdmFsICYgMzI3NjggPyB2YWwgfCA0Mjk0OTAxNzYwIDogdmFsOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUob2Zmc2V0LCBub0Fzc2VydCkgewogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aCk7CiAgICAgIHJldHVybiB0aGlzW29mZnNldF0gfCB0aGlzW29mZnNldCArIDFdIDw8IDggfCB0aGlzW29mZnNldCArIDJdIDw8IDE2IHwgdGhpc1tvZmZzZXQgKyAzXSA8PCAyNDsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkJFKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpOwogICAgICByZXR1cm4gdGhpc1tvZmZzZXRdIDw8IDI0IHwgdGhpc1tvZmZzZXQgKyAxXSA8PCAxNiB8IHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCB8IHRoaXNbb2Zmc2V0ICsgM107CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZEJpZ0ludDY0TEUgPSBkZWZpbmVCaWdJbnRNZXRob2QoZnVuY3Rpb24gcmVhZEJpZ0ludDY0TEUob2Zmc2V0KSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAib2Zmc2V0Iik7CiAgICAgIGNvbnN0IGZpcnN0ID0gdGhpc1tvZmZzZXRdOwogICAgICBjb25zdCBsYXN0ID0gdGhpc1tvZmZzZXQgKyA3XTsKICAgICAgaWYgKGZpcnN0ID09PSB2b2lkIDAgfHwgbGFzdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgYm91bmRzRXJyb3Iob2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDgpOwogICAgICB9CiAgICAgIGNvbnN0IHZhbCA9IHRoaXNbb2Zmc2V0ICsgNF0gKyB0aGlzW29mZnNldCArIDVdICogMiAqKiA4ICsgdGhpc1tvZmZzZXQgKyA2XSAqIDIgKiogMTYgKyAobGFzdCA8PCAyNCk7CiAgICAgIHJldHVybiAoQmlnSW50KHZhbCkgPDwgQmlnSW50KDMyKSkgKyBCaWdJbnQoZmlyc3QgKyB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArIHRoaXNbKytvZmZzZXRdICogMiAqKiAxNiArIHRoaXNbKytvZmZzZXRdICogMiAqKiAyNCk7CiAgICB9KTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLnJlYWRCaWdJbnQ2NEJFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHJlYWRCaWdJbnQ2NEJFKG9mZnNldCkgewogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIHZhbGlkYXRlTnVtYmVyKG9mZnNldCwgIm9mZnNldCIpOwogICAgICBjb25zdCBmaXJzdCA9IHRoaXNbb2Zmc2V0XTsKICAgICAgY29uc3QgbGFzdCA9IHRoaXNbb2Zmc2V0ICsgN107CiAgICAgIGlmIChmaXJzdCA9PT0gdm9pZCAwIHx8IGxhc3QgPT09IHZvaWQgMCkgewogICAgICAgIGJvdW5kc0Vycm9yKG9mZnNldCwgdGhpcy5sZW5ndGggLSA4KTsKICAgICAgfQogICAgICBjb25zdCB2YWwgPSAoZmlyc3QgPDwgMjQpICsgdGhpc1srK29mZnNldF0gKiAyICoqIDE2ICsgdGhpc1srK29mZnNldF0gKiAyICoqIDggKyB0aGlzWysrb2Zmc2V0XTsKICAgICAgcmV0dXJuIChCaWdJbnQodmFsKSA8PCBCaWdJbnQoMzIpKSArIEJpZ0ludCh0aGlzWysrb2Zmc2V0XSAqIDIgKiogMjQgKyB0aGlzWysrb2Zmc2V0XSAqIDIgKiogMTYgKyB0aGlzWysrb2Zmc2V0XSAqIDIgKiogOCArIGxhc3QpOwogICAgfSk7CiAgICBCdWZmZXIyLnByb3RvdHlwZS5yZWFkRmxvYXRMRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdExFKG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpOwogICAgICByZXR1cm4gaWVlZTc1NCQxLnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCAyMywgNCk7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRShvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKTsKICAgICAgcmV0dXJuIGllZWU3NTQkMS5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KTsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUob2Zmc2V0LCBub0Fzc2VydCkgewogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aCk7CiAgICAgIHJldHVybiBpZWVlNzU0JDEucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KTsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS5yZWFkRG91YmxlQkUgPSBmdW5jdGlvbiByZWFkRG91YmxlQkUob2Zmc2V0LCBub0Fzc2VydCkgewogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aCk7CiAgICAgIHJldHVybiBpZWVlNzU0JDEucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCA1MiwgOCk7CiAgICB9OwogICAgZnVuY3Rpb24gY2hlY2tJbnQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7CiAgICAgIGlmICghQnVmZmVyMi5pc0J1ZmZlcihidWYpKQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJyJidWZmZXIiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKTsKICAgICAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKQogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCcidmFsdWUiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKTsKICAgICAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpCiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4IG91dCBvZiByYW5nZSIpOwogICAgfQogICAgQnVmZmVyMi5wcm90b3R5cGUud3JpdGVVaW50TEUgPSBCdWZmZXIyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgzLCBub0Fzc2VydCkgewogICAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBieXRlTGVuZ3RoMyA9IGJ5dGVMZW5ndGgzID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KSB7CiAgICAgICAgY29uc3QgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aDMpIC0gMTsKICAgICAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoMywgbWF4Qnl0ZXMsIDApOwogICAgICB9CiAgICAgIGxldCBtdWwgPSAxOwogICAgICBsZXQgaTIgPSAwOwogICAgICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDI1NTsKICAgICAgd2hpbGUgKCsraTIgPCBieXRlTGVuZ3RoMyAmJiAobXVsICo9IDI1NikpIHsKICAgICAgICB0aGlzW29mZnNldCArIGkyXSA9IHZhbHVlIC8gbXVsICYgMjU1OwogICAgICB9CiAgICAgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoMzsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZVVpbnRCRSA9IEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aDMsIG5vQXNzZXJ0KSB7CiAgICAgIHZhbHVlID0gK3ZhbHVlOwogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGJ5dGVMZW5ndGgzID0gYnl0ZUxlbmd0aDMgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpIHsKICAgICAgICBjb25zdCBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoMykgLSAxOwogICAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgzLCBtYXhCeXRlcywgMCk7CiAgICAgIH0KICAgICAgbGV0IGkyID0gYnl0ZUxlbmd0aDMgLSAxOwogICAgICBsZXQgbXVsID0gMTsKICAgICAgdGhpc1tvZmZzZXQgKyBpMl0gPSB2YWx1ZSAmIDI1NTsKICAgICAgd2hpbGUgKC0taTIgPj0gMCAmJiAobXVsICo9IDI1NikpIHsKICAgICAgICB0aGlzW29mZnNldCArIGkyXSA9IHZhbHVlIC8gbXVsICYgMjU1OwogICAgICB9CiAgICAgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoMzsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZVVpbnQ4ID0gQnVmZmVyMi5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDgodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgdmFsdWUgPSArdmFsdWU7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAyNTUsIDApOwogICAgICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDI1NTsKICAgICAgcmV0dXJuIG9mZnNldCArIDE7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUud3JpdGVVaW50MTZMRSA9IEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIHZhbHVlID0gK3ZhbHVlOwogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgNjU1MzUsIDApOwogICAgICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDI1NTsKICAgICAgdGhpc1tvZmZzZXQgKyAxXSA9IHZhbHVlID4+PiA4OwogICAgICByZXR1cm4gb2Zmc2V0ICsgMjsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZVVpbnQxNkJFID0gQnVmZmVyMi5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgdmFsdWUgPSArdmFsdWU7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCA2NTUzNSwgMCk7CiAgICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlID4+PiA4OwogICAgICB0aGlzW29mZnNldCArIDFdID0gdmFsdWUgJiAyNTU7CiAgICAgIHJldHVybiBvZmZzZXQgKyAyOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlVWludDMyTEUgPSBCdWZmZXIyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJMRSh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDQyOTQ5NjcyOTUsIDApOwogICAgICB0aGlzW29mZnNldCArIDNdID0gdmFsdWUgPj4+IDI0OwogICAgICB0aGlzW29mZnNldCArIDJdID0gdmFsdWUgPj4+IDE2OwogICAgICB0aGlzW29mZnNldCArIDFdID0gdmFsdWUgPj4+IDg7CiAgICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMjU1OwogICAgICByZXR1cm4gb2Zmc2V0ICsgNDsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZVVpbnQzMkJFID0gQnVmZmVyMi5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgdmFsdWUgPSArdmFsdWU7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCA0Mjk0OTY3Mjk1LCAwKTsKICAgICAgdGhpc1tvZmZzZXRdID0gdmFsdWUgPj4+IDI0OwogICAgICB0aGlzW29mZnNldCArIDFdID0gdmFsdWUgPj4+IDE2OwogICAgICB0aGlzW29mZnNldCArIDJdID0gdmFsdWUgPj4+IDg7CiAgICAgIHRoaXNbb2Zmc2V0ICsgM10gPSB2YWx1ZSAmIDI1NTsKICAgICAgcmV0dXJuIG9mZnNldCArIDQ7CiAgICB9OwogICAgZnVuY3Rpb24gd3J0QmlnVUludDY0TEUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBtaW4sIG1heCkgewogICAgICBjaGVja0ludEJJKHZhbHVlLCBtaW4sIG1heCwgYnVmLCBvZmZzZXQsIDcpOwogICAgICBsZXQgbG8gPSBOdW1iZXIodmFsdWUgJiBCaWdJbnQoNDI5NDk2NzI5NSkpOwogICAgICBidWZbb2Zmc2V0KytdID0gbG87CiAgICAgIGxvID0gbG8gPj4gODsKICAgICAgYnVmW29mZnNldCsrXSA9IGxvOwogICAgICBsbyA9IGxvID4+IDg7CiAgICAgIGJ1ZltvZmZzZXQrK10gPSBsbzsKICAgICAgbG8gPSBsbyA+PiA4OwogICAgICBidWZbb2Zmc2V0KytdID0gbG87CiAgICAgIGxldCBoaSA9IE51bWJlcih2YWx1ZSA+PiBCaWdJbnQoMzIpICYgQmlnSW50KDQyOTQ5NjcyOTUpKTsKICAgICAgYnVmW29mZnNldCsrXSA9IGhpOwogICAgICBoaSA9IGhpID4+IDg7CiAgICAgIGJ1ZltvZmZzZXQrK10gPSBoaTsKICAgICAgaGkgPSBoaSA+PiA4OwogICAgICBidWZbb2Zmc2V0KytdID0gaGk7CiAgICAgIGhpID0gaGkgPj4gODsKICAgICAgYnVmW29mZnNldCsrXSA9IGhpOwogICAgICByZXR1cm4gb2Zmc2V0OwogICAgfQogICAgZnVuY3Rpb24gd3J0QmlnVUludDY0QkUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBtaW4sIG1heCkgewogICAgICBjaGVja0ludEJJKHZhbHVlLCBtaW4sIG1heCwgYnVmLCBvZmZzZXQsIDcpOwogICAgICBsZXQgbG8gPSBOdW1iZXIodmFsdWUgJiBCaWdJbnQoNDI5NDk2NzI5NSkpOwogICAgICBidWZbb2Zmc2V0ICsgN10gPSBsbzsKICAgICAgbG8gPSBsbyA+PiA4OwogICAgICBidWZbb2Zmc2V0ICsgNl0gPSBsbzsKICAgICAgbG8gPSBsbyA+PiA4OwogICAgICBidWZbb2Zmc2V0ICsgNV0gPSBsbzsKICAgICAgbG8gPSBsbyA+PiA4OwogICAgICBidWZbb2Zmc2V0ICsgNF0gPSBsbzsKICAgICAgbGV0IGhpID0gTnVtYmVyKHZhbHVlID4+IEJpZ0ludCgzMikgJiBCaWdJbnQoNDI5NDk2NzI5NSkpOwogICAgICBidWZbb2Zmc2V0ICsgM10gPSBoaTsKICAgICAgaGkgPSBoaSA+PiA4OwogICAgICBidWZbb2Zmc2V0ICsgMl0gPSBoaTsKICAgICAgaGkgPSBoaSA+PiA4OwogICAgICBidWZbb2Zmc2V0ICsgMV0gPSBoaTsKICAgICAgaGkgPSBoaSA+PiA4OwogICAgICBidWZbb2Zmc2V0XSA9IGhpOwogICAgICByZXR1cm4gb2Zmc2V0ICsgODsKICAgIH0KICAgIEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlQmlnVUludDY0TEUgPSBkZWZpbmVCaWdJbnRNZXRob2QoZnVuY3Rpb24gd3JpdGVCaWdVSW50NjRMRSh2YWx1ZSwgb2Zmc2V0ID0gMCkgewogICAgICByZXR1cm4gd3J0QmlnVUludDY0TEUodGhpcywgdmFsdWUsIG9mZnNldCwgQmlnSW50KDApLCBCaWdJbnQoIjB4ZmZmZmZmZmZmZmZmZmZmZiIpKTsKICAgIH0pOwogICAgQnVmZmVyMi5wcm90b3R5cGUud3JpdGVCaWdVSW50NjRCRSA9IGRlZmluZUJpZ0ludE1ldGhvZChmdW5jdGlvbiB3cml0ZUJpZ1VJbnQ2NEJFKHZhbHVlLCBvZmZzZXQgPSAwKSB7CiAgICAgIHJldHVybiB3cnRCaWdVSW50NjRCRSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBCaWdJbnQoMCksIEJpZ0ludCgiMHhmZmZmZmZmZmZmZmZmZmZmIikpOwogICAgfSk7CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoMywgbm9Bc3NlcnQpIHsKICAgICAgdmFsdWUgPSArdmFsdWU7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkgewogICAgICAgIGNvbnN0IGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgzIC0gMSk7CiAgICAgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aDMsIGxpbWl0IC0gMSwgLWxpbWl0KTsKICAgICAgfQogICAgICBsZXQgaTIgPSAwOwogICAgICBsZXQgbXVsID0gMTsKICAgICAgbGV0IHN1YiA9IDA7CiAgICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMjU1OwogICAgICB3aGlsZSAoKytpMiA8IGJ5dGVMZW5ndGgzICYmIChtdWwgKj0gMjU2KSkgewogICAgICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaTIgLSAxXSAhPT0gMCkgewogICAgICAgICAgc3ViID0gMTsKICAgICAgICB9CiAgICAgICAgdGhpc1tvZmZzZXQgKyBpMl0gPSAodmFsdWUgLyBtdWwgPj4gMCkgLSBzdWIgJiAyNTU7CiAgICAgIH0KICAgICAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgzOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgzLCBub0Fzc2VydCkgewogICAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KSB7CiAgICAgICAgY29uc3QgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aDMgLSAxKTsKICAgICAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoMywgbGltaXQgLSAxLCAtbGltaXQpOwogICAgICB9CiAgICAgIGxldCBpMiA9IGJ5dGVMZW5ndGgzIC0gMTsKICAgICAgbGV0IG11bCA9IDE7CiAgICAgIGxldCBzdWIgPSAwOwogICAgICB0aGlzW29mZnNldCArIGkyXSA9IHZhbHVlICYgMjU1OwogICAgICB3aGlsZSAoLS1pMiA+PSAwICYmIChtdWwgKj0gMjU2KSkgewogICAgICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaTIgKyAxXSAhPT0gMCkgewogICAgICAgICAgc3ViID0gMTsKICAgICAgICB9CiAgICAgICAgdGhpc1tvZmZzZXQgKyBpMl0gPSAodmFsdWUgLyBtdWwgPj4gMCkgLSBzdWIgJiAyNTU7CiAgICAgIH0KICAgICAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGgzOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDEyNywgLTEyOCk7CiAgICAgIGlmICh2YWx1ZSA8IDApCiAgICAgICAgdmFsdWUgPSAyNTUgKyB2YWx1ZSArIDE7CiAgICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMjU1OwogICAgICByZXR1cm4gb2Zmc2V0ICsgMTsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgdmFsdWUgPSArdmFsdWU7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkKICAgICAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAzMjc2NywgLTMyNzY4KTsKICAgICAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAyNTU7CiAgICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSB2YWx1ZSA+Pj4gODsKICAgICAgcmV0dXJuIG9mZnNldCArIDI7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUud3JpdGVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkJFKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIHZhbHVlID0gK3ZhbHVlOwogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMzI3NjcsIC0zMjc2OCk7CiAgICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlID4+PiA4OwogICAgICB0aGlzW29mZnNldCArIDFdID0gdmFsdWUgJiAyNTU7CiAgICAgIHJldHVybiBvZmZzZXQgKyAyOwogICAgfTsKICAgIEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkgewogICAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KQogICAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDIxNDc0ODM2NDcsIC0yMTQ3NDgzNjQ4KTsKICAgICAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAyNTU7CiAgICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSB2YWx1ZSA+Pj4gODsKICAgICAgdGhpc1tvZmZzZXQgKyAyXSA9IHZhbHVlID4+PiAxNjsKICAgICAgdGhpc1tvZmZzZXQgKyAzXSA9IHZhbHVlID4+PiAyNDsKICAgICAgcmV0dXJuIG9mZnNldCArIDQ7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIHZhbHVlID0gK3ZhbHVlOwogICAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDA7CiAgICAgIGlmICghbm9Bc3NlcnQpCiAgICAgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMjE0NzQ4MzY0NywgLTIxNDc0ODM2NDgpOwogICAgICBpZiAodmFsdWUgPCAwKQogICAgICAgIHZhbHVlID0gNDI5NDk2NzI5NSArIHZhbHVlICsgMTsKICAgICAgdGhpc1tvZmZzZXRdID0gdmFsdWUgPj4+IDI0OwogICAgICB0aGlzW29mZnNldCArIDFdID0gdmFsdWUgPj4+IDE2OwogICAgICB0aGlzW29mZnNldCArIDJdID0gdmFsdWUgPj4+IDg7CiAgICAgIHRoaXNbb2Zmc2V0ICsgM10gPSB2YWx1ZSAmIDI1NTsKICAgICAgcmV0dXJuIG9mZnNldCArIDQ7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUud3JpdGVCaWdJbnQ2NExFID0gZGVmaW5lQmlnSW50TWV0aG9kKGZ1bmN0aW9uIHdyaXRlQmlnSW50NjRMRSh2YWx1ZSwgb2Zmc2V0ID0gMCkgewogICAgICByZXR1cm4gd3J0QmlnVUludDY0TEUodGhpcywgdmFsdWUsIG9mZnNldCwgLUJpZ0ludCgiMHg4MDAwMDAwMDAwMDAwMDAwIiksIEJpZ0ludCgiMHg3ZmZmZmZmZmZmZmZmZmZmIikpOwogICAgfSk7CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZUJpZ0ludDY0QkUgPSBkZWZpbmVCaWdJbnRNZXRob2QoZnVuY3Rpb24gd3JpdGVCaWdJbnQ2NEJFKHZhbHVlLCBvZmZzZXQgPSAwKSB7CiAgICAgIHJldHVybiB3cnRCaWdVSW50NjRCRSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAtQmlnSW50KCIweDgwMDAwMDAwMDAwMDAwMDAiKSwgQmlnSW50KCIweDdmZmZmZmZmZmZmZmZmZmYiKSk7CiAgICB9KTsKICAgIGZ1bmN0aW9uIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHsKICAgICAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpCiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4IG91dCBvZiByYW5nZSIpOwogICAgICBpZiAob2Zmc2V0IDwgMCkKICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIik7CiAgICB9CiAgICBmdW5jdGlvbiB3cml0ZUZsb2F0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkgewogICAgICB2YWx1ZSA9ICt2YWx1ZTsKICAgICAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwOwogICAgICBpZiAoIW5vQXNzZXJ0KSB7CiAgICAgICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCk7CiAgICAgIH0KICAgICAgaWVlZTc1NCQxLndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNCk7CiAgICAgIHJldHVybiBvZmZzZXQgKyA0OwogICAgfQogICAgQnVmZmVyMi5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KTsKICAgIH07CiAgICBCdWZmZXIyLnByb3RvdHlwZS53cml0ZUZsb2F0QkUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0QkUodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KTsKICAgIH07CiAgICBmdW5jdGlvbiB3cml0ZURvdWJsZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHsKICAgICAgdmFsdWUgPSArdmFsdWU7CiAgICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMDsKICAgICAgaWYgKCFub0Fzc2VydCkgewogICAgICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgpOwogICAgICB9CiAgICAgIGllZWU3NTQkMS53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpOwogICAgICByZXR1cm4gb2Zmc2V0ICsgODsKICAgIH0KICAgIEJ1ZmZlcjIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7CiAgICAgIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydCk7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHsKICAgICAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydCk7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkgewogICAgICBpZiAoIUJ1ZmZlcjIuaXNCdWZmZXIodGFyZ2V0KSkKICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJhcmd1bWVudCBzaG91bGQgYmUgYSBCdWZmZXIiKTsKICAgICAgaWYgKCFzdGFydCkKICAgICAgICBzdGFydCA9IDA7CiAgICAgIGlmICghZW5kICYmIGVuZCAhPT0gMCkKICAgICAgICBlbmQgPSB0aGlzLmxlbmd0aDsKICAgICAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpCiAgICAgICAgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoOwogICAgICBpZiAoIXRhcmdldFN0YXJ0KQogICAgICAgIHRhcmdldFN0YXJ0ID0gMDsKICAgICAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpCiAgICAgICAgZW5kID0gc3RhcnQ7CiAgICAgIGlmIChlbmQgPT09IHN0YXJ0KQogICAgICAgIHJldHVybiAwOwogICAgICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkKICAgICAgICByZXR1cm4gMDsKICAgICAgaWYgKHRhcmdldFN0YXJ0IDwgMCkgewogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJ0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzIik7CiAgICAgIH0KICAgICAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkKICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW5kZXggb3V0IG9mIHJhbmdlIik7CiAgICAgIGlmIChlbmQgPCAwKQogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJzb3VyY2VFbmQgb3V0IG9mIGJvdW5kcyIpOwogICAgICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpCiAgICAgICAgZW5kID0gdGhpcy5sZW5ndGg7CiAgICAgIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkgewogICAgICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0OwogICAgICB9CiAgICAgIGNvbnN0IGxlbjIgPSBlbmQgLSBzdGFydDsKICAgICAgaWYgKHRoaXMgPT09IHRhcmdldCAmJiB0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuY29weVdpdGhpbiA9PT0gImZ1bmN0aW9uIikgewogICAgICAgIHRoaXMuY29weVdpdGhpbih0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwodGFyZ2V0LCB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpLCB0YXJnZXRTdGFydCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGxlbjI7CiAgICB9OwogICAgQnVmZmVyMi5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwodmFsLCBzdGFydCwgZW5kLCBlbmNvZGluZykgewogICAgICBpZiAodHlwZW9mIHZhbCA9PT0gInN0cmluZyIpIHsKICAgICAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAic3RyaW5nIikgewogICAgICAgICAgZW5jb2RpbmcgPSBzdGFydDsKICAgICAgICAgIHN0YXJ0ID0gMDsKICAgICAgICAgIGVuZCA9IHRoaXMubGVuZ3RoOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIGVuY29kaW5nID0gZW5kOwogICAgICAgICAgZW5kID0gdGhpcy5sZW5ndGg7CiAgICAgICAgfQogICAgICAgIGlmIChlbmNvZGluZyAhPT0gdm9pZCAwICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gInN0cmluZyIpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoImVuY29kaW5nIG11c3QgYmUgYSBzdHJpbmciKTsKICAgICAgICB9CiAgICAgICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gInN0cmluZyIgJiYgIUJ1ZmZlcjIuaXNFbmNvZGluZyhlbmNvZGluZykpIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIgKyBlbmNvZGluZyk7CiAgICAgICAgfQogICAgICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICBjb25zdCBjb2RlMiA9IHZhbC5jaGFyQ29kZUF0KDApOwogICAgICAgICAgaWYgKGVuY29kaW5nID09PSAidXRmOCIgJiYgY29kZTIgPCAxMjggfHwgZW5jb2RpbmcgPT09ICJsYXRpbjEiKSB7CiAgICAgICAgICAgIHZhbCA9IGNvZGUyOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAibnVtYmVyIikgewogICAgICAgIHZhbCA9IHZhbCAmIDI1NTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAiYm9vbGVhbiIpIHsKICAgICAgICB2YWwgPSBOdW1iZXIodmFsKTsKICAgICAgfQogICAgICBpZiAoc3RhcnQgPCAwIHx8IHRoaXMubGVuZ3RoIDwgc3RhcnQgfHwgdGhpcy5sZW5ndGggPCBlbmQpIHsKICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiT3V0IG9mIHJhbmdlIGluZGV4Iik7CiAgICAgIH0KICAgICAgaWYgKGVuZCA8PSBzdGFydCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CiAgICAgIHN0YXJ0ID0gc3RhcnQgPj4+IDA7CiAgICAgIGVuZCA9IGVuZCA9PT0gdm9pZCAwID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDA7CiAgICAgIGlmICghdmFsKQogICAgICAgIHZhbCA9IDA7CiAgICAgIGxldCBpMjsKICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICJudW1iZXIiKSB7CiAgICAgICAgZm9yIChpMiA9IHN0YXJ0OyBpMiA8IGVuZDsgKytpMikgewogICAgICAgICAgdGhpc1tpMl0gPSB2YWw7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGJ5dGVzID0gQnVmZmVyMi5pc0J1ZmZlcih2YWwpID8gdmFsIDogQnVmZmVyMi5mcm9tKHZhbCwgZW5jb2RpbmcpOwogICAgICAgIGNvbnN0IGxlbjIgPSBieXRlcy5sZW5ndGg7CiAgICAgICAgaWYgKGxlbjIgPT09IDApIHsKICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSB2YWx1ZSAiJyArIHZhbCArICciIGlzIGludmFsaWQgZm9yIGFyZ3VtZW50ICJ2YWx1ZSInKTsKICAgICAgICB9CiAgICAgICAgZm9yIChpMiA9IDA7IGkyIDwgZW5kIC0gc3RhcnQ7ICsraTIpIHsKICAgICAgICAgIHRoaXNbaTIgKyBzdGFydF0gPSBieXRlc1tpMiAlIGxlbjJdOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdGhpczsKICAgIH07CiAgICBjb25zdCBlcnJvcnMgPSB7fTsKICAgIGZ1bmN0aW9uIEUoc3ltLCBnZXRNZXNzYWdlLCBCYXNlKSB7CiAgICAgIGVycm9yc1tzeW1dID0gY2xhc3MgTm9kZUVycm9yIGV4dGVuZHMgQmFzZSB7CiAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICBzdXBlcigpOwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICJtZXNzYWdlIiwgewogICAgICAgICAgICB2YWx1ZTogZ2V0TWVzc2FnZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLAogICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMubmFtZSA9IGAke3RoaXMubmFtZX0gWyR7c3ltfV1gOwogICAgICAgICAgdGhpcy5zdGFjazsKICAgICAgICAgIGRlbGV0ZSB0aGlzLm5hbWU7CiAgICAgICAgfQogICAgICAgIGdldCBjb2RlKCkgewogICAgICAgICAgcmV0dXJuIHN5bTsKICAgICAgICB9CiAgICAgICAgc2V0IGNvZGUodmFsdWUpIHsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY29kZSIsIHsKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgd3JpdGFibGU6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB0b1N0cmluZygpIHsKICAgICAgICAgIHJldHVybiBgJHt0aGlzLm5hbWV9IFske3N5bX1dOiAke3RoaXMubWVzc2FnZX1gOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KICAgIEUoIkVSUl9CVUZGRVJfT1VUX09GX0JPVU5EUyIsIGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgaWYgKG5hbWUpIHsKICAgICAgICByZXR1cm4gYCR7bmFtZX0gaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzYDsKICAgICAgfQogICAgICByZXR1cm4gIkF0dGVtcHQgdG8gYWNjZXNzIG1lbW9yeSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMiOwogICAgfSwgUmFuZ2VFcnJvcik7CiAgICBFKCJFUlJfSU5WQUxJRF9BUkdfVFlQRSIsIGZ1bmN0aW9uKG5hbWUsIGFjdHVhbCkgewogICAgICByZXR1cm4gYFRoZSAiJHtuYW1lfSIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIG51bWJlci4gUmVjZWl2ZWQgdHlwZSAke3R5cGVvZiBhY3R1YWx9YDsKICAgIH0sIFR5cGVFcnJvcik7CiAgICBFKCJFUlJfT1VUX09GX1JBTkdFIiwgZnVuY3Rpb24oc3RyLCByYW5nZSwgaW5wdXQpIHsKICAgICAgbGV0IG1zZyA9IGBUaGUgdmFsdWUgb2YgIiR7c3RyfSIgaXMgb3V0IG9mIHJhbmdlLmA7CiAgICAgIGxldCByZWNlaXZlZCA9IGlucHV0OwogICAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihpbnB1dCkgJiYgTWF0aC5hYnMoaW5wdXQpID4gMiAqKiAzMikgewogICAgICAgIHJlY2VpdmVkID0gYWRkTnVtZXJpY2FsU2VwYXJhdG9yKFN0cmluZyhpbnB1dCkpOwogICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gImJpZ2ludCIpIHsKICAgICAgICByZWNlaXZlZCA9IFN0cmluZyhpbnB1dCk7CiAgICAgICAgaWYgKGlucHV0ID4gQmlnSW50KDIpICoqIEJpZ0ludCgzMikgfHwgaW5wdXQgPCAtKEJpZ0ludCgyKSAqKiBCaWdJbnQoMzIpKSkgewogICAgICAgICAgcmVjZWl2ZWQgPSBhZGROdW1lcmljYWxTZXBhcmF0b3IocmVjZWl2ZWQpOwogICAgICAgIH0KICAgICAgICByZWNlaXZlZCArPSAibiI7CiAgICAgIH0KICAgICAgbXNnICs9IGAgSXQgbXVzdCBiZSAke3JhbmdlfS4gUmVjZWl2ZWQgJHtyZWNlaXZlZH1gOwogICAgICByZXR1cm4gbXNnOwogICAgfSwgUmFuZ2VFcnJvcik7CiAgICBmdW5jdGlvbiBhZGROdW1lcmljYWxTZXBhcmF0b3IodmFsKSB7CiAgICAgIGxldCByZXMgPSAiIjsKICAgICAgbGV0IGkyID0gdmFsLmxlbmd0aDsKICAgICAgY29uc3Qgc3RhcnQgPSB2YWxbMF0gPT09ICItIiA/IDEgOiAwOwogICAgICBmb3IgKDsgaTIgPj0gc3RhcnQgKyA0OyBpMiAtPSAzKSB7CiAgICAgICAgcmVzID0gYF8ke3ZhbC5zbGljZShpMiAtIDMsIGkyKX0ke3Jlc31gOwogICAgICB9CiAgICAgIHJldHVybiBgJHt2YWwuc2xpY2UoMCwgaTIpfSR7cmVzfWA7CiAgICB9CiAgICBmdW5jdGlvbiBjaGVja0JvdW5kcyhidWYsIG9mZnNldCwgYnl0ZUxlbmd0aDMpIHsKICAgICAgdmFsaWRhdGVOdW1iZXIob2Zmc2V0LCAib2Zmc2V0Iik7CiAgICAgIGlmIChidWZbb2Zmc2V0XSA9PT0gdm9pZCAwIHx8IGJ1ZltvZmZzZXQgKyBieXRlTGVuZ3RoM10gPT09IHZvaWQgMCkgewogICAgICAgIGJvdW5kc0Vycm9yKG9mZnNldCwgYnVmLmxlbmd0aCAtIChieXRlTGVuZ3RoMyArIDEpKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gY2hlY2tJbnRCSSh2YWx1ZSwgbWluLCBtYXgsIGJ1Ziwgb2Zmc2V0LCBieXRlTGVuZ3RoMykgewogICAgICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHsKICAgICAgICBjb25zdCBuID0gdHlwZW9mIG1pbiA9PT0gImJpZ2ludCIgPyAibiIgOiAiIjsKICAgICAgICBsZXQgcmFuZ2U7CiAgICAgICAgaWYgKGJ5dGVMZW5ndGgzID4gMykgewogICAgICAgICAgaWYgKG1pbiA9PT0gMCB8fCBtaW4gPT09IEJpZ0ludCgwKSkgewogICAgICAgICAgICByYW5nZSA9IGA+PSAwJHtufSBhbmQgPCAyJHtufSAqKiAkeyhieXRlTGVuZ3RoMyArIDEpICogOH0ke259YDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJhbmdlID0gYD49IC0oMiR7bn0gKiogJHsoYnl0ZUxlbmd0aDMgKyAxKSAqIDggLSAxfSR7bn0pIGFuZCA8IDIgKiogJHsoYnl0ZUxlbmd0aDMgKyAxKSAqIDggLSAxfSR7bn1gOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByYW5nZSA9IGA+PSAke21pbn0ke259IGFuZCA8PSAke21heH0ke259YDsKICAgICAgICB9CiAgICAgICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfT1VUX09GX1JBTkdFKCJ2YWx1ZSIsIHJhbmdlLCB2YWx1ZSk7CiAgICAgIH0KICAgICAgY2hlY2tCb3VuZHMoYnVmLCBvZmZzZXQsIGJ5dGVMZW5ndGgzKTsKICAgIH0KICAgIGZ1bmN0aW9uIHZhbGlkYXRlTnVtYmVyKHZhbHVlLCBuYW1lKSB7CiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICJudW1iZXIiKSB7CiAgICAgICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfSU5WQUxJRF9BUkdfVFlQRShuYW1lLCAibnVtYmVyIiwgdmFsdWUpOwogICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBib3VuZHNFcnJvcih2YWx1ZSwgbGVuZ3RoLCB0eXBlKSB7CiAgICAgIGlmIChNYXRoLmZsb29yKHZhbHVlKSAhPT0gdmFsdWUpIHsKICAgICAgICB2YWxpZGF0ZU51bWJlcih2YWx1ZSwgdHlwZSk7CiAgICAgICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfT1VUX09GX1JBTkdFKHR5cGUgfHwgIm9mZnNldCIsICJhbiBpbnRlZ2VyIiwgdmFsdWUpOwogICAgICB9CiAgICAgIGlmIChsZW5ndGggPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IGVycm9ycy5FUlJfQlVGRkVSX09VVF9PRl9CT1VORFMoKTsKICAgICAgfQogICAgICB0aHJvdyBuZXcgZXJyb3JzLkVSUl9PVVRfT0ZfUkFOR0UodHlwZSB8fCAib2Zmc2V0IiwgYD49ICR7dHlwZSA/IDEgOiAwfSBhbmQgPD0gJHtsZW5ndGh9YCwgdmFsdWUpOwogICAgfQogICAgY29uc3QgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rLzAtOUEtWmEtei1fXS9nOwogICAgZnVuY3Rpb24gYmFzZTY0Y2xlYW4oc3RyKSB7CiAgICAgIHN0ciA9IHN0ci5zcGxpdCgiPSIpWzBdOwogICAgICBzdHIgPSBzdHIudHJpbSgpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICIiKTsKICAgICAgaWYgKHN0ci5sZW5ndGggPCAyKQogICAgICAgIHJldHVybiAiIjsKICAgICAgd2hpbGUgKHN0ci5sZW5ndGggJSA0ICE9PSAwKSB7CiAgICAgICAgc3RyID0gc3RyICsgIj0iOwogICAgICB9CiAgICAgIHJldHVybiBzdHI7CiAgICB9CiAgICBmdW5jdGlvbiB1dGY4VG9CeXRlcyhzdHJpbmcsIHVuaXRzKSB7CiAgICAgIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHk7CiAgICAgIGxldCBjb2RlUG9pbnQ7CiAgICAgIGNvbnN0IGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7CiAgICAgIGxldCBsZWFkU3Vycm9nYXRlID0gbnVsbDsKICAgICAgY29uc3QgYnl0ZXMgPSBbXTsKICAgICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IGxlbmd0aDsgKytpMikgewogICAgICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkyKTsKICAgICAgICBpZiAoY29kZVBvaW50ID4gNTUyOTUgJiYgY29kZVBvaW50IDwgNTczNDQpIHsKICAgICAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkgewogICAgICAgICAgICBpZiAoY29kZVBvaW50ID4gNTYzMTkpIHsKICAgICAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpCiAgICAgICAgICAgICAgICBieXRlcy5wdXNoKDIzOSwgMTkxLCAxODkpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9IGVsc2UgaWYgKGkyICsgMSA9PT0gbGVuZ3RoKSB7CiAgICAgICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKQogICAgICAgICAgICAgICAgYnl0ZXMucHVzaCgyMzksIDE5MSwgMTg5KTsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50OwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjb2RlUG9pbnQgPCA1NjMyMCkgewogICAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpCiAgICAgICAgICAgICAgYnl0ZXMucHVzaCgyMzksIDE5MSwgMTg5KTsKICAgICAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludDsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDU1Mjk2IDw8IDEwIHwgY29kZVBvaW50IC0gNTYzMjApICsgNjU1MzY7CiAgICAgICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7CiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpCiAgICAgICAgICAgIGJ5dGVzLnB1c2goMjM5LCAxOTEsIDE4OSk7CiAgICAgICAgfQogICAgICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsOwogICAgICAgIGlmIChjb2RlUG9pbnQgPCAxMjgpIHsKICAgICAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KTsKICAgICAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDIwNDgpIHsKICAgICAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKQogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50ID4+IDYgfCAxOTIsIGNvZGVQb2ludCAmIDYzIHwgMTI4KTsKICAgICAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDY1NTM2KSB7CiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBieXRlcy5wdXNoKGNvZGVQb2ludCA+PiAxMiB8IDIyNCwgY29kZVBvaW50ID4+IDYgJiA2MyB8IDEyOCwgY29kZVBvaW50ICYgNjMgfCAxMjgpOwogICAgICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMTExNDExMikgewogICAgICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQgPj4gMTggfCAyNDAsIGNvZGVQb2ludCA+PiAxMiAmIDYzIHwgMTI4LCBjb2RlUG9pbnQgPj4gNiAmIDYzIHwgMTI4LCBjb2RlUG9pbnQgJiA2MyB8IDEyOCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiSW52YWxpZCBjb2RlIHBvaW50Iik7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBieXRlczsKICAgIH0KICAgIGZ1bmN0aW9uIGFzY2lpVG9CeXRlcyhzdHIpIHsKICAgICAgY29uc3QgYnl0ZUFycmF5ID0gW107CiAgICAgIGZvciAobGV0IGkyID0gMDsgaTIgPCBzdHIubGVuZ3RoOyArK2kyKSB7CiAgICAgICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaTIpICYgMjU1KTsKICAgICAgfQogICAgICByZXR1cm4gYnl0ZUFycmF5OwogICAgfQogICAgZnVuY3Rpb24gdXRmMTZsZVRvQnl0ZXMoc3RyLCB1bml0cykgewogICAgICBsZXQgYywgaGksIGxvOwogICAgICBjb25zdCBieXRlQXJyYXkgPSBbXTsKICAgICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IHN0ci5sZW5ndGg7ICsraTIpIHsKICAgICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkKICAgICAgICAgIGJyZWFrOwogICAgICAgIGMgPSBzdHIuY2hhckNvZGVBdChpMik7CiAgICAgICAgaGkgPSBjID4+IDg7CiAgICAgICAgbG8gPSBjICUgMjU2OwogICAgICAgIGJ5dGVBcnJheS5wdXNoKGxvKTsKICAgICAgICBieXRlQXJyYXkucHVzaChoaSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGJ5dGVBcnJheTsKICAgIH0KICAgIGZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMoc3RyKSB7CiAgICAgIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSk7CiAgICB9CiAgICBmdW5jdGlvbiBibGl0QnVmZmVyKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkgewogICAgICBsZXQgaTI7CiAgICAgIGZvciAoaTIgPSAwOyBpMiA8IGxlbmd0aDsgKytpMikgewogICAgICAgIGlmIChpMiArIG9mZnNldCA+PSBkc3QubGVuZ3RoIHx8IGkyID49IHNyYy5sZW5ndGgpCiAgICAgICAgICBicmVhazsKICAgICAgICBkc3RbaTIgKyBvZmZzZXRdID0gc3JjW2kyXTsKICAgICAgfQogICAgICByZXR1cm4gaTI7CiAgICB9CiAgICBmdW5jdGlvbiBpc0luc3RhbmNlKG9iaiwgdHlwZSkgewogICAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgdHlwZSB8fCBvYmogIT0gbnVsbCAmJiBvYmouY29uc3RydWN0b3IgIT0gbnVsbCAmJiBvYmouY29uc3RydWN0b3IubmFtZSAhPSBudWxsICYmIG9iai5jb25zdHJ1Y3Rvci5uYW1lID09PSB0eXBlLm5hbWU7CiAgICB9CiAgICBmdW5jdGlvbiBudW1iZXJJc05hTihvYmopIHsKICAgICAgcmV0dXJuIG9iaiAhPT0gb2JqOwogICAgfQogICAgY29uc3QgaGV4U2xpY2VMb29rdXBUYWJsZSA9IGZ1bmN0aW9uKCkgewogICAgICBjb25zdCBhbHBoYWJldCA9ICIwMTIzNDU2Nzg5YWJjZGVmIjsKICAgICAgY29uc3QgdGFibGUgPSBuZXcgQXJyYXkoMjU2KTsKICAgICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IDE2OyArK2kyKSB7CiAgICAgICAgY29uc3QgaTE2ID0gaTIgKiAxNjsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDE2OyArK2opIHsKICAgICAgICAgIHRhYmxlW2kxNiArIGpdID0gYWxwaGFiZXRbaTJdICsgYWxwaGFiZXRbal07CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0YWJsZTsKICAgIH0oKTsKICAgIGZ1bmN0aW9uIGRlZmluZUJpZ0ludE1ldGhvZChmbikgewogICAgICByZXR1cm4gdHlwZW9mIEJpZ0ludCA9PT0gInVuZGVmaW5lZCIgPyBCdWZmZXJCaWdJbnROb3REZWZpbmVkIDogZm47CiAgICB9CiAgICBmdW5jdGlvbiBCdWZmZXJCaWdJbnROb3REZWZpbmVkKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIkJpZ0ludCBub3Qgc3VwcG9ydGVkIik7CiAgICB9CiAgfSkoYnVmZmVyKTsKICAvKiEgc2FmZS1idWZmZXIuIE1JVCBMaWNlbnNlLiBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmcvb3BlbnNvdXJjZT4gKi8KICAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CiAgICB2YXIgYnVmZmVyJDEgPSBidWZmZXI7CiAgICB2YXIgQnVmZmVyMiA9IGJ1ZmZlciQxLkJ1ZmZlcjsKICAgIGZ1bmN0aW9uIGNvcHlQcm9wcyhzcmMsIGRzdCkgewogICAgICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7CiAgICAgICAgZHN0W2tleV0gPSBzcmNba2V5XTsKICAgICAgfQogICAgfQogICAgaWYgKEJ1ZmZlcjIuZnJvbSAmJiBCdWZmZXIyLmFsbG9jICYmIEJ1ZmZlcjIuYWxsb2NVbnNhZmUgJiYgQnVmZmVyMi5hbGxvY1Vuc2FmZVNsb3cpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBidWZmZXIkMTsKICAgIH0gZWxzZSB7CiAgICAgIGNvcHlQcm9wcyhidWZmZXIkMSwgZXhwb3J0cyk7CiAgICAgIGV4cG9ydHMuQnVmZmVyID0gU2FmZUJ1ZmZlcjsKICAgIH0KICAgIGZ1bmN0aW9uIFNhZmVCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHsKICAgICAgcmV0dXJuIEJ1ZmZlcjIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpOwogICAgfQogICAgU2FmZUJ1ZmZlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEJ1ZmZlcjIucHJvdG90eXBlKTsKICAgIGNvcHlQcm9wcyhCdWZmZXIyLCBTYWZlQnVmZmVyKTsKICAgIFNhZmVCdWZmZXIuZnJvbSA9IGZ1bmN0aW9uKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7CiAgICAgIGlmICh0eXBlb2YgYXJnID09PSAibnVtYmVyIikgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyIik7CiAgICAgIH0KICAgICAgcmV0dXJuIEJ1ZmZlcjIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpOwogICAgfTsKICAgIFNhZmVCdWZmZXIuYWxsb2MgPSBmdW5jdGlvbihzaXplLCBmaWxsLCBlbmNvZGluZykgewogICAgICBpZiAodHlwZW9mIHNpemUgIT09ICJudW1iZXIiKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlciIpOwogICAgICB9CiAgICAgIHZhciBidWYgPSBCdWZmZXIyKHNpemUpOwogICAgICBpZiAoZmlsbCAhPT0gdm9pZCAwKSB7CiAgICAgICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIGJ1Zi5maWxsKGZpbGwsIGVuY29kaW5nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYnVmLmZpbGwoZmlsbCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGJ1Zi5maWxsKDApOwogICAgICB9CiAgICAgIHJldHVybiBidWY7CiAgICB9OwogICAgU2FmZUJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uKHNpemUpIHsKICAgICAgaWYgKHR5cGVvZiBzaXplICE9PSAibnVtYmVyIikgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXIiKTsKICAgICAgfQogICAgICByZXR1cm4gQnVmZmVyMihzaXplKTsKICAgIH07CiAgICBTYWZlQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uKHNpemUpIHsKICAgICAgaWYgKHR5cGVvZiBzaXplICE9PSAibnVtYmVyIikgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXIiKTsKICAgICAgfQogICAgICByZXR1cm4gYnVmZmVyJDEuU2xvd0J1ZmZlcihzaXplKTsKICAgIH07CiAgfSkoc2FmZUJ1ZmZlciwgc2FmZUJ1ZmZlci5leHBvcnRzKTsKICB2YXIgTUFYX0FMTE9DID0gTWF0aC5wb3coMiwgMzApIC0gMTsKICB2YXIgcHJlY29uZGl0aW9uID0gZnVuY3Rpb24oaXRlcmF0aW9ucywga2V5bGVuKSB7CiAgICBpZiAodHlwZW9mIGl0ZXJhdGlvbnMgIT09ICJudW1iZXIiKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkl0ZXJhdGlvbnMgbm90IGEgbnVtYmVyIik7CiAgICB9CiAgICBpZiAoaXRlcmF0aW9ucyA8IDApIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQmFkIGl0ZXJhdGlvbnMiKTsKICAgIH0KICAgIGlmICh0eXBlb2Yga2V5bGVuICE9PSAibnVtYmVyIikgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJLZXkgbGVuZ3RoIG5vdCBhIG51bWJlciIpOwogICAgfQogICAgaWYgKGtleWxlbiA8IDAgfHwga2V5bGVuID4gTUFYX0FMTE9DIHx8IGtleWxlbiAhPT0ga2V5bGVuKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkJhZCBrZXkgbGVuZ3RoIik7CiAgICB9CiAgfTsKICB2YXIgZGVmYXVsdEVuY29kaW5nJDI7CiAgaWYgKGdsb2JhbFRoaXMucHJvY2VzcyAmJiBnbG9iYWxUaGlzLnByb2Nlc3MuYnJvd3NlcikgewogICAgZGVmYXVsdEVuY29kaW5nJDIgPSAidXRmLTgiOwogIH0gZWxzZSBpZiAoZ2xvYmFsVGhpcy5wcm9jZXNzICYmIGdsb2JhbFRoaXMucHJvY2Vzcy52ZXJzaW9uKSB7CiAgICB2YXIgcFZlcnNpb25NYWpvciA9IHBhcnNlSW50KHByb2Nlc3MudmVyc2lvbi5zcGxpdCgiLiIpWzBdLnNsaWNlKDEpLCAxMCk7CiAgICBkZWZhdWx0RW5jb2RpbmckMiA9IHBWZXJzaW9uTWFqb3IgPj0gNiA/ICJ1dGYtOCIgOiAiYmluYXJ5IjsKICB9IGVsc2UgewogICAgZGVmYXVsdEVuY29kaW5nJDIgPSAidXRmLTgiOwogIH0KICB2YXIgZGVmYXVsdEVuY29kaW5nXzEgPSBkZWZhdWx0RW5jb2RpbmckMjsKICB2YXIgaW5oZXJpdHNfYnJvd3NlciA9IHsgZXhwb3J0czoge30gfTsKICBpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICJmdW5jdGlvbiIpIHsKICAgIGluaGVyaXRzX2Jyb3dzZXIuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzMihjdG9yLCBzdXBlckN0b3IpIHsKICAgICAgaWYgKHN1cGVyQ3RvcikgewogICAgICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yOwogICAgICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7CiAgICAgICAgICBjb25zdHJ1Y3RvcjogewogICAgICAgICAgICB2YWx1ZTogY3RvciwKICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLAogICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfTsKICB9IGVsc2UgewogICAgaW5oZXJpdHNfYnJvd3Nlci5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMyKGN0b3IsIHN1cGVyQ3RvcikgewogICAgICBpZiAoc3VwZXJDdG9yKSB7CiAgICAgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3I7CiAgICAgICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24oKSB7CiAgICAgICAgfTsKICAgICAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlOwogICAgICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKCk7CiAgICAgICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yOwogICAgICB9CiAgICB9OwogIH0KICB2YXIgcmVhZGFibGVCcm93c2VyID0geyBleHBvcnRzOiB7fSB9OwogIHZhciBfcmVnaXN0cnkgPSB7fTsKICB2YXIgZXZlbnRzID0geyBleHBvcnRzOiB7fSB9OwogIHZhciBSID0gdHlwZW9mIFJlZmxlY3QgPT09ICJvYmplY3QiID8gUmVmbGVjdCA6IG51bGw7CiAgdmFyIFJlZmxlY3RBcHBseSA9IFIgJiYgdHlwZW9mIFIuYXBwbHkgPT09ICJmdW5jdGlvbiIgPyBSLmFwcGx5IDogZnVuY3Rpb24gUmVmbGVjdEFwcGx5Mih0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKSB7CiAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwodGFyZ2V0LCByZWNlaXZlciwgYXJncyk7CiAgfTsKICB2YXIgUmVmbGVjdE93bktleXM7CiAgaWYgKFIgJiYgdHlwZW9mIFIub3duS2V5cyA9PT0gImZ1bmN0aW9uIikgewogICAgUmVmbGVjdE93bktleXMgPSBSLm93bktleXM7CiAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzMih0YXJnZXQpIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRhcmdldCkuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSk7CiAgICB9OwogIH0gZWxzZSB7CiAgICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzMih0YXJnZXQpIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRhcmdldCk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBQcm9jZXNzRW1pdFdhcm5pbmcod2FybmluZykgewogICAgaWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuKQogICAgICBjb25zb2xlLndhcm4od2FybmluZyk7CiAgfQogIHZhciBOdW1iZXJJc05hTiA9IE51bWJlci5pc05hTiB8fCBmdW5jdGlvbiBOdW1iZXJJc05hTjIodmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7CiAgfTsKICBmdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7CiAgICBFdmVudEVtaXR0ZXIuaW5pdC5jYWxsKHRoaXMpOwogIH0KICBldmVudHMuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjsKICBldmVudHMuZXhwb3J0cy5vbmNlID0gb25jZSQyOwogIEV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7CiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdm9pZCAwOwogIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50c0NvdW50ID0gMDsKICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB2b2lkIDA7CiAgdmFyIGRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDsKICBmdW5jdGlvbiBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKSB7CiAgICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAiZnVuY3Rpb24iKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSAibGlzdGVuZXIiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTsKICAgIH0KICB9CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50RW1pdHRlciwgImRlZmF1bHRNYXhMaXN0ZW5lcnMiLCB7CiAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIGRlZmF1bHRNYXhMaXN0ZW5lcnM7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbihhcmcpIHsKICAgICAgaWYgKHR5cGVvZiBhcmcgIT09ICJudW1iZXIiIHx8IGFyZyA8IDAgfHwgTnVtYmVySXNOYU4oYXJnKSkgewogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgImRlZmF1bHRNYXhMaXN0ZW5lcnMiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBhcmcgKyAiLiIpOwogICAgICB9CiAgICAgIGRlZmF1bHRNYXhMaXN0ZW5lcnMgPSBhcmc7CiAgICB9CiAgfSk7CiAgRXZlbnRFbWl0dGVyLmluaXQgPSBmdW5jdGlvbigpIHsKICAgIGlmICh0aGlzLl9ldmVudHMgPT09IHZvaWQgMCB8fCB0aGlzLl9ldmVudHMgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fZXZlbnRzKSB7CiAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDsKICAgIH0KICAgIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB2b2lkIDA7CiAgfTsKICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIHNldE1heExpc3RlbmVycyhuKSB7CiAgICBpZiAodHlwZW9mIG4gIT09ICJudW1iZXIiIHx8IG4gPCAwIHx8IE51bWJlcklzTmFOKG4pKSB7CiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgIm4iIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBuICsgIi4iKTsKICAgIH0KICAgIHRoaXMuX21heExpc3RlbmVycyA9IG47CiAgICByZXR1cm4gdGhpczsKICB9OwogIGZ1bmN0aW9uIF9nZXRNYXhMaXN0ZW5lcnModGhhdCkgewogICAgaWYgKHRoYXQuX21heExpc3RlbmVycyA9PT0gdm9pZCAwKQogICAgICByZXR1cm4gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7CiAgICByZXR1cm4gdGhhdC5fbWF4TGlzdGVuZXJzOwogIH0KICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmdldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIGdldE1heExpc3RlbmVycygpIHsKICAgIHJldHVybiBfZ2V0TWF4TGlzdGVuZXJzKHRoaXMpOwogIH07CiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlKSB7CiAgICB2YXIgYXJncyA9IFtdOwogICAgZm9yICh2YXIgaTIgPSAxOyBpMiA8IGFyZ3VtZW50cy5sZW5ndGg7IGkyKyspCiAgICAgIGFyZ3MucHVzaChhcmd1bWVudHNbaTJdKTsKICAgIHZhciBkb0Vycm9yID0gdHlwZSA9PT0gImVycm9yIjsKICAgIHZhciBldmVudHMyID0gdGhpcy5fZXZlbnRzOwogICAgaWYgKGV2ZW50czIgIT09IHZvaWQgMCkKICAgICAgZG9FcnJvciA9IGRvRXJyb3IgJiYgZXZlbnRzMi5lcnJvciA9PT0gdm9pZCAwOwogICAgZWxzZSBpZiAoIWRvRXJyb3IpCiAgICAgIHJldHVybiBmYWxzZTsKICAgIGlmIChkb0Vycm9yKSB7CiAgICAgIHZhciBlcjsKICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCkKICAgICAgICBlciA9IGFyZ3NbMF07CiAgICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7CiAgICAgICAgdGhyb3cgZXI7CiAgICAgIH0KICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcigiVW5oYW5kbGVkIGVycm9yLiIgKyAoZXIgPyAiICgiICsgZXIubWVzc2FnZSArICIpIiA6ICIiKSk7CiAgICAgIGVyci5jb250ZXh0ID0gZXI7CiAgICAgIHRocm93IGVycjsKICAgIH0KICAgIHZhciBoYW5kbGVyID0gZXZlbnRzMlt0eXBlXTsKICAgIGlmIChoYW5kbGVyID09PSB2b2lkIDApCiAgICAgIHJldHVybiBmYWxzZTsKICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gImZ1bmN0aW9uIikgewogICAgICBSZWZsZWN0QXBwbHkoaGFuZGxlciwgdGhpcywgYXJncyk7CiAgICB9IGVsc2UgewogICAgICB2YXIgbGVuMiA9IGhhbmRsZXIubGVuZ3RoOwogICAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4yKTsKICAgICAgZm9yICh2YXIgaTIgPSAwOyBpMiA8IGxlbjI7ICsraTIpCiAgICAgICAgUmVmbGVjdEFwcGx5KGxpc3RlbmVyc1tpMl0sIHRoaXMsIGFyZ3MpOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfTsKICBmdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkgewogICAgdmFyIG07CiAgICB2YXIgZXZlbnRzMjsKICAgIHZhciBleGlzdGluZzsKICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpOwogICAgZXZlbnRzMiA9IHRhcmdldC5fZXZlbnRzOwogICAgaWYgKGV2ZW50czIgPT09IHZvaWQgMCkgewogICAgICBldmVudHMyID0gdGFyZ2V0Ll9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgICB0YXJnZXQuX2V2ZW50c0NvdW50ID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChldmVudHMyLm5ld0xpc3RlbmVyICE9PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQuZW1pdCgibmV3TGlzdGVuZXIiLCB0eXBlLCBsaXN0ZW5lci5saXN0ZW5lciA/IGxpc3RlbmVyLmxpc3RlbmVyIDogbGlzdGVuZXIpOwogICAgICAgIGV2ZW50czIgPSB0YXJnZXQuX2V2ZW50czsKICAgICAgfQogICAgICBleGlzdGluZyA9IGV2ZW50czJbdHlwZV07CiAgICB9CiAgICBpZiAoZXhpc3RpbmcgPT09IHZvaWQgMCkgewogICAgICBleGlzdGluZyA9IGV2ZW50czJbdHlwZV0gPSBsaXN0ZW5lcjsKICAgICAgKyt0YXJnZXQuX2V2ZW50c0NvdW50OwogICAgfSBlbHNlIHsKICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gImZ1bmN0aW9uIikgewogICAgICAgIGV4aXN0aW5nID0gZXZlbnRzMlt0eXBlXSA9IHByZXBlbmQgPyBbbGlzdGVuZXIsIGV4aXN0aW5nXSA6IFtleGlzdGluZywgbGlzdGVuZXJdOwogICAgICB9IGVsc2UgaWYgKHByZXBlbmQpIHsKICAgICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBleGlzdGluZy5wdXNoKGxpc3RlbmVyKTsKICAgICAgfQogICAgICBtID0gX2dldE1heExpc3RlbmVycyh0YXJnZXQpOwogICAgICBpZiAobSA+IDAgJiYgZXhpc3RpbmcubGVuZ3RoID4gbSAmJiAhZXhpc3Rpbmcud2FybmVkKSB7CiAgICAgICAgZXhpc3Rpbmcud2FybmVkID0gdHJ1ZTsKICAgICAgICB2YXIgdyA9IG5ldyBFcnJvcigiUG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAiICsgZXhpc3RpbmcubGVuZ3RoICsgIiAiICsgU3RyaW5nKHR5cGUpICsgIiBsaXN0ZW5lcnMgYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0Iik7CiAgICAgICAgdy5uYW1lID0gIk1heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyI7CiAgICAgICAgdy5lbWl0dGVyID0gdGFyZ2V0OwogICAgICAgIHcudHlwZSA9IHR5cGU7CiAgICAgICAgdy5jb3VudCA9IGV4aXN0aW5nLmxlbmd0aDsKICAgICAgICBQcm9jZXNzRW1pdFdhcm5pbmcodyk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0YXJnZXQ7CiAgfQogIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UpOwogIH07CiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7CiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5wcmVwZW5kTGlzdGVuZXIgPSBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIyKHR5cGUsIGxpc3RlbmVyKSB7CiAgICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCB0cnVlKTsKICB9OwogIGZ1bmN0aW9uIG9uY2VXcmFwcGVyKCkgewogICAgaWYgKCF0aGlzLmZpcmVkKSB7CiAgICAgIHRoaXMudGFyZ2V0LnJlbW92ZUxpc3RlbmVyKHRoaXMudHlwZSwgdGhpcy53cmFwRm4pOwogICAgICB0aGlzLmZpcmVkID0gdHJ1ZTsKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApCiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuY2FsbCh0aGlzLnRhcmdldCk7CiAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmFwcGx5KHRoaXMudGFyZ2V0LCBhcmd1bWVudHMpOwogICAgfQogIH0KICBmdW5jdGlvbiBfb25jZVdyYXAodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcikgewogICAgdmFyIHN0YXRlMiA9IHsgZmlyZWQ6IGZhbHNlLCB3cmFwRm46IHZvaWQgMCwgdGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciB9OwogICAgdmFyIHdyYXBwZWQgPSBvbmNlV3JhcHBlci5iaW5kKHN0YXRlMik7CiAgICB3cmFwcGVkLmxpc3RlbmVyID0gbGlzdGVuZXI7CiAgICBzdGF0ZTIud3JhcEZuID0gd3JhcHBlZDsKICAgIHJldHVybiB3cmFwcGVkOwogIH0KICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlMih0eXBlLCBsaXN0ZW5lcikgewogICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7CiAgICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBmdW5jdGlvbiBwcmVwZW5kT25jZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7CiAgICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTsKICAgIHRoaXMucHJlcGVuZExpc3RlbmVyKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHsKICAgIHZhciBsaXN0LCBldmVudHMyLCBwb3NpdGlvbiwgaTIsIG9yaWdpbmFsTGlzdGVuZXI7CiAgICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTsKICAgIGV2ZW50czIgPSB0aGlzLl9ldmVudHM7CiAgICBpZiAoZXZlbnRzMiA9PT0gdm9pZCAwKQogICAgICByZXR1cm4gdGhpczsKICAgIGxpc3QgPSBldmVudHMyW3R5cGVdOwogICAgaWYgKGxpc3QgPT09IHZvaWQgMCkKICAgICAgcmV0dXJuIHRoaXM7CiAgICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHsKICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApCiAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgZWxzZSB7CiAgICAgICAgZGVsZXRlIGV2ZW50czJbdHlwZV07CiAgICAgICAgaWYgKGV2ZW50czIucmVtb3ZlTGlzdGVuZXIpCiAgICAgICAgICB0aGlzLmVtaXQoInJlbW92ZUxpc3RlbmVyIiwgdHlwZSwgbGlzdC5saXN0ZW5lciB8fCBsaXN0ZW5lcik7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpc3QgIT09ICJmdW5jdGlvbiIpIHsKICAgICAgcG9zaXRpb24gPSAtMTsKICAgICAgZm9yIChpMiA9IGxpc3QubGVuZ3RoIC0gMTsgaTIgPj0gMDsgaTItLSkgewogICAgICAgIGlmIChsaXN0W2kyXSA9PT0gbGlzdGVuZXIgfHwgbGlzdFtpMl0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7CiAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpMl0ubGlzdGVuZXI7CiAgICAgICAgICBwb3NpdGlvbiA9IGkyOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChwb3NpdGlvbiA8IDApCiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIGlmIChwb3NpdGlvbiA9PT0gMCkKICAgICAgICBsaXN0LnNoaWZ0KCk7CiAgICAgIGVsc2UgewogICAgICAgIHNwbGljZU9uZShsaXN0LCBwb3NpdGlvbik7CiAgICAgIH0KICAgICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKQogICAgICAgIGV2ZW50czJbdHlwZV0gPSBsaXN0WzBdOwogICAgICBpZiAoZXZlbnRzMi5yZW1vdmVMaXN0ZW5lciAhPT0gdm9pZCAwKQogICAgICAgIHRoaXMuZW1pdCgicmVtb3ZlTGlzdGVuZXIiLCB0eXBlLCBvcmlnaW5hbExpc3RlbmVyIHx8IGxpc3RlbmVyKTsKICAgIH0KICAgIHJldHVybiB0aGlzOwogIH07CiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyOwogIEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24gcmVtb3ZlQWxsTGlzdGVuZXJzKHR5cGUpIHsKICAgIHZhciBsaXN0ZW5lcnMsIGV2ZW50czIsIGkyOwogICAgZXZlbnRzMiA9IHRoaXMuX2V2ZW50czsKICAgIGlmIChldmVudHMyID09PSB2b2lkIDApCiAgICAgIHJldHVybiB0aGlzOwogICAgaWYgKGV2ZW50czIucmVtb3ZlTGlzdGVuZXIgPT09IHZvaWQgMCkgewogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwOwogICAgICB9IGVsc2UgaWYgKGV2ZW50czJbdHlwZV0gIT09IHZvaWQgMCkgewogICAgICAgIGlmICgtLXRoaXMuX2V2ZW50c0NvdW50ID09PSAwKQogICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgICBlbHNlCiAgICAgICAgICBkZWxldGUgZXZlbnRzMlt0eXBlXTsKICAgICAgfQogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7CiAgICAgIHZhciBrZXlzMiA9IE9iamVjdC5rZXlzKGV2ZW50czIpOwogICAgICB2YXIga2V5OwogICAgICBmb3IgKGkyID0gMDsgaTIgPCBrZXlzMi5sZW5ndGg7ICsraTIpIHsKICAgICAgICBrZXkgPSBrZXlzMltpMl07CiAgICAgICAgaWYgKGtleSA9PT0gInJlbW92ZUxpc3RlbmVyIikKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7CiAgICAgIH0KICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoInJlbW92ZUxpc3RlbmVyIik7CiAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICBsaXN0ZW5lcnMgPSBldmVudHMyW3R5cGVdOwogICAgaWYgKHR5cGVvZiBsaXN0ZW5lcnMgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpOwogICAgfSBlbHNlIGlmIChsaXN0ZW5lcnMgIT09IHZvaWQgMCkgewogICAgICBmb3IgKGkyID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkyID49IDA7IGkyLS0pIHsKICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tpMl0pOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9OwogIGZ1bmN0aW9uIF9saXN0ZW5lcnModGFyZ2V0LCB0eXBlLCB1bndyYXApIHsKICAgIHZhciBldmVudHMyID0gdGFyZ2V0Ll9ldmVudHM7CiAgICBpZiAoZXZlbnRzMiA9PT0gdm9pZCAwKQogICAgICByZXR1cm4gW107CiAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50czJbdHlwZV07CiAgICBpZiAoZXZsaXN0ZW5lciA9PT0gdm9pZCAwKQogICAgICByZXR1cm4gW107CiAgICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICJmdW5jdGlvbiIpCiAgICAgIHJldHVybiB1bndyYXAgPyBbZXZsaXN0ZW5lci5saXN0ZW5lciB8fCBldmxpc3RlbmVyXSA6IFtldmxpc3RlbmVyXTsKICAgIHJldHVybiB1bndyYXAgPyB1bndyYXBMaXN0ZW5lcnMoZXZsaXN0ZW5lcikgOiBhcnJheUNsb25lKGV2bGlzdGVuZXIsIGV2bGlzdGVuZXIubGVuZ3RoKTsKICB9CiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiBsaXN0ZW5lcnModHlwZSkgewogICAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgdHJ1ZSk7CiAgfTsKICBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJhd0xpc3RlbmVycyA9IGZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKSB7CiAgICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCBmYWxzZSk7CiAgfTsKICBFdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHsKICAgIGlmICh0eXBlb2YgZW1pdHRlci5saXN0ZW5lckNvdW50ID09PSAiZnVuY3Rpb24iKSB7CiAgICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbGlzdGVuZXJDb3VudC5jYWxsKGVtaXR0ZXIsIHR5cGUpOwogICAgfQogIH07CiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gbGlzdGVuZXJDb3VudDsKICBmdW5jdGlvbiBsaXN0ZW5lckNvdW50KHR5cGUpIHsKICAgIHZhciBldmVudHMyID0gdGhpcy5fZXZlbnRzOwogICAgaWYgKGV2ZW50czIgIT09IHZvaWQgMCkgewogICAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50czJbdHlwZV07CiAgICAgIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gImZ1bmN0aW9uIikgewogICAgICAgIHJldHVybiAxOwogICAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIgIT09IHZvaWQgMCkgewogICAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDsKICAgICAgfQogICAgfQogICAgcmV0dXJuIDA7CiAgfQogIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZXZlbnROYW1lcyA9IGZ1bmN0aW9uIGV2ZW50TmFtZXMoKSB7CiAgICByZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQgPiAwID8gUmVmbGVjdE93bktleXModGhpcy5fZXZlbnRzKSA6IFtdOwogIH07CiAgZnVuY3Rpb24gYXJyYXlDbG9uZShhcnIsIG4pIHsKICAgIHZhciBjb3B5ID0gbmV3IEFycmF5KG4pOwogICAgZm9yICh2YXIgaTIgPSAwOyBpMiA8IG47ICsraTIpCiAgICAgIGNvcHlbaTJdID0gYXJyW2kyXTsKICAgIHJldHVybiBjb3B5OwogIH0KICBmdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHsKICAgIGZvciAoOyBpbmRleCArIDEgPCBsaXN0Lmxlbmd0aDsgaW5kZXgrKykKICAgICAgbGlzdFtpbmRleF0gPSBsaXN0W2luZGV4ICsgMV07CiAgICBsaXN0LnBvcCgpOwogIH0KICBmdW5jdGlvbiB1bndyYXBMaXN0ZW5lcnMoYXJyKSB7CiAgICB2YXIgcmV0ID0gbmV3IEFycmF5KGFyci5sZW5ndGgpOwogICAgZm9yICh2YXIgaTIgPSAwOyBpMiA8IHJldC5sZW5ndGg7ICsraTIpIHsKICAgICAgcmV0W2kyXSA9IGFycltpMl0ubGlzdGVuZXIgfHwgYXJyW2kyXTsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfQogIGZ1bmN0aW9uIG9uY2UkMihlbWl0dGVyLCBuYW1lKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGZ1bmN0aW9uIGVycm9yTGlzdGVuZXIoZXJyKSB7CiAgICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihuYW1lLCByZXNvbHZlcik7CiAgICAgICAgcmVqZWN0KGVycik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gcmVzb2x2ZXIoKSB7CiAgICAgICAgaWYgKHR5cGVvZiBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCJlcnJvciIsIGVycm9yTGlzdGVuZXIpOwogICAgICAgIH0KICAgICAgICByZXNvbHZlKFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7CiAgICAgIH0KICAgICAgZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsIG5hbWUsIHJlc29sdmVyLCB7IG9uY2U6IHRydWUgfSk7CiAgICAgIGlmIChuYW1lICE9PSAiZXJyb3IiKSB7CiAgICAgICAgYWRkRXJyb3JIYW5kbGVySWZFdmVudEVtaXR0ZXIoZW1pdHRlciwgZXJyb3JMaXN0ZW5lciwgeyBvbmNlOiB0cnVlIH0pOwogICAgICB9CiAgICB9KTsKICB9CiAgZnVuY3Rpb24gYWRkRXJyb3JIYW5kbGVySWZFdmVudEVtaXR0ZXIoZW1pdHRlciwgaGFuZGxlciwgZmxhZ3MpIHsKICAgIGlmICh0eXBlb2YgZW1pdHRlci5vbiA9PT0gImZ1bmN0aW9uIikgewogICAgICBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgImVycm9yIiwgaGFuZGxlciwgZmxhZ3MpOwogICAgfQogIH0KICBmdW5jdGlvbiBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgbmFtZSwgbGlzdGVuZXIsIGZsYWdzKSB7CiAgICBpZiAodHlwZW9mIGVtaXR0ZXIub24gPT09ICJmdW5jdGlvbiIpIHsKICAgICAgaWYgKGZsYWdzLm9uY2UpIHsKICAgICAgICBlbWl0dGVyLm9uY2UobmFtZSwgbGlzdGVuZXIpOwogICAgICB9IGVsc2UgewogICAgICAgIGVtaXR0ZXIub24obmFtZSwgbGlzdGVuZXIpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGZ1bmN0aW9uIHdyYXBMaXN0ZW5lcihhcmcpIHsKICAgICAgICBpZiAoZmxhZ3Mub25jZSkgewogICAgICAgICAgZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIHdyYXBMaXN0ZW5lcik7CiAgICAgICAgfQogICAgICAgIGxpc3RlbmVyKGFyZyk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlICJlbWl0dGVyIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRXZlbnRFbWl0dGVyLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgZW1pdHRlcik7CiAgICB9CiAgfQogIHZhciBzdHJlYW1Ccm93c2VyID0gZXZlbnRzLmV4cG9ydHMuRXZlbnRFbWl0dGVyOwogIHZhciBfX3ZpdGVCcm93c2VyRXh0ZXJuYWwgPSB7fTsKICB2YXIgX192aXRlQnJvd3NlckV4dGVybmFsJDEgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmZyZWV6ZSh7CiAgICBfX3Byb3RvX186IG51bGwsCiAgICAiZGVmYXVsdCI6IF9fdml0ZUJyb3dzZXJFeHRlcm5hbAogIH0pOwogIHZhciByZXF1aXJlJCQ0ID0gLyogQF9fUFVSRV9fICovIGdldEF1Z21lbnRlZE5hbWVzcGFjZShfX3ZpdGVCcm93c2VyRXh0ZXJuYWwkMSk7CiAgZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgICB2YXIga2V5czIgPSBPYmplY3Qua2V5cyhvYmplY3QpOwogICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICAgIGlmIChlbnVtZXJhYmxlT25seSkKICAgICAgICBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24oc3ltKSB7CiAgICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsKICAgICAgICB9KTsKICAgICAga2V5czIucHVzaC5hcHBseShrZXlzMiwgc3ltYm9scyk7CiAgICB9CiAgICByZXR1cm4ga2V5czI7CiAgfQogIGZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7CiAgICBmb3IgKHZhciBpMiA9IDE7IGkyIDwgYXJndW1lbnRzLmxlbmd0aDsgaTIrKykgewogICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2kyXSAhPSBudWxsID8gYXJndW1lbnRzW2kyXSA6IHt9OwogICAgICBpZiAoaTIgJSAyKSB7CiAgICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsKICAgICAgICAgIF9kZWZpbmVQcm9wZXJ0eSQxKHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgICB9IGVsc2UgewogICAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHRhcmdldDsKICB9CiAgZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5JDEob2JqLCBrZXksIHZhbHVlKSB7CiAgICBpZiAoa2V5IGluIG9iaikgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7CiAgICB9IGVsc2UgewogICAgICBvYmpba2V5XSA9IHZhbHVlOwogICAgfQogICAgcmV0dXJuIG9iajsKICB9CiAgZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgICB9CiAgfQogIGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICAgIGZvciAodmFyIGkyID0gMDsgaTIgPCBwcm9wcy5sZW5ndGg7IGkyKyspIHsKICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpMl07CiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOwogICAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKQogICAgICAgIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOwogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgICB9CiAgfQogIGZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICAgIGlmIChwcm90b1Byb3BzKQogICAgICBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogICAgaWYgKHN0YXRpY1Byb3BzKQogICAgICBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogICAgcmV0dXJuIENvbnN0cnVjdG9yOwogIH0KICB2YXIgX3JlcXVpcmUkMiA9IGJ1ZmZlciwgQnVmZmVyJGcgPSBfcmVxdWlyZSQyLkJ1ZmZlcjsKICB2YXIgX3JlcXVpcmUyID0gcmVxdWlyZSQkNCwgaW5zcGVjdCA9IF9yZXF1aXJlMi5pbnNwZWN0OwogIHZhciBjdXN0b20gPSBpbnNwZWN0ICYmIGluc3BlY3QuY3VzdG9tIHx8ICJpbnNwZWN0IjsKICBmdW5jdGlvbiBjb3B5QnVmZmVyKHNyYywgdGFyZ2V0LCBvZmZzZXQpIHsKICAgIEJ1ZmZlciRnLnByb3RvdHlwZS5jb3B5LmNhbGwoc3JjLCB0YXJnZXQsIG9mZnNldCk7CiAgfQogIHZhciBidWZmZXJfbGlzdCA9IC8qIEBfX1BVUkVfXyAqLyBmdW5jdGlvbigpIHsKICAgIGZ1bmN0aW9uIEJ1ZmZlckxpc3QyKCkgewogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQnVmZmVyTGlzdDIpOwogICAgICB0aGlzLmhlYWQgPSBudWxsOwogICAgICB0aGlzLnRhaWwgPSBudWxsOwogICAgICB0aGlzLmxlbmd0aCA9IDA7CiAgICB9CiAgICBfY3JlYXRlQ2xhc3MoQnVmZmVyTGlzdDIsIFt7CiAgICAgIGtleTogInB1c2giLAogICAgICB2YWx1ZTogZnVuY3Rpb24gcHVzaCh2MikgewogICAgICAgIHZhciBlbnRyeSA9IHsKICAgICAgICAgIGRhdGE6IHYyLAogICAgICAgICAgbmV4dDogbnVsbAogICAgICAgIH07CiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID4gMCkKICAgICAgICAgIHRoaXMudGFpbC5uZXh0ID0gZW50cnk7CiAgICAgICAgZWxzZQogICAgICAgICAgdGhpcy5oZWFkID0gZW50cnk7CiAgICAgICAgdGhpcy50YWlsID0gZW50cnk7CiAgICAgICAgKyt0aGlzLmxlbmd0aDsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJ1bnNoaWZ0IiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVuc2hpZnQodjIpIHsKICAgICAgICB2YXIgZW50cnkgPSB7CiAgICAgICAgICBkYXRhOiB2MiwKICAgICAgICAgIG5leHQ6IHRoaXMuaGVhZAogICAgICAgIH07CiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKQogICAgICAgICAgdGhpcy50YWlsID0gZW50cnk7CiAgICAgICAgdGhpcy5oZWFkID0gZW50cnk7CiAgICAgICAgKyt0aGlzLmxlbmd0aDsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJzaGlmdCIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzaGlmdCgpIHsKICAgICAgICBpZiAodGhpcy5sZW5ndGggPT09IDApCiAgICAgICAgICByZXR1cm47CiAgICAgICAgdmFyIHJldCA9IHRoaXMuaGVhZC5kYXRhOwogICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMSkKICAgICAgICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7CiAgICAgICAgZWxzZQogICAgICAgICAgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5leHQ7CiAgICAgICAgLS10aGlzLmxlbmd0aDsKICAgICAgICByZXR1cm4gcmV0OwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogImNsZWFyIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkgewogICAgICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7CiAgICAgICAgdGhpcy5sZW5ndGggPSAwOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogImpvaW4iLAogICAgICB2YWx1ZTogZnVuY3Rpb24gam9pbihzKSB7CiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKQogICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIHZhciBwID0gdGhpcy5oZWFkOwogICAgICAgIHZhciByZXQgPSAiIiArIHAuZGF0YTsKICAgICAgICB3aGlsZSAocCA9IHAubmV4dCkgewogICAgICAgICAgcmV0ICs9IHMgKyBwLmRhdGE7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXQ7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAiY29uY2F0IiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbmNhdChuKSB7CiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKQogICAgICAgICAgcmV0dXJuIEJ1ZmZlciRnLmFsbG9jKDApOwogICAgICAgIHZhciByZXQgPSBCdWZmZXIkZy5hbGxvY1Vuc2FmZShuID4+PiAwKTsKICAgICAgICB2YXIgcCA9IHRoaXMuaGVhZDsKICAgICAgICB2YXIgaTIgPSAwOwogICAgICAgIHdoaWxlIChwKSB7CiAgICAgICAgICBjb3B5QnVmZmVyKHAuZGF0YSwgcmV0LCBpMik7CiAgICAgICAgICBpMiArPSBwLmRhdGEubGVuZ3RoOwogICAgICAgICAgcCA9IHAubmV4dDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJldDsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJjb25zdW1lIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbnN1bWUobiwgaGFzU3RyaW5ncykgewogICAgICAgIHZhciByZXQ7CiAgICAgICAgaWYgKG4gPCB0aGlzLmhlYWQuZGF0YS5sZW5ndGgpIHsKICAgICAgICAgIHJldCA9IHRoaXMuaGVhZC5kYXRhLnNsaWNlKDAsIG4pOwogICAgICAgICAgdGhpcy5oZWFkLmRhdGEgPSB0aGlzLmhlYWQuZGF0YS5zbGljZShuKTsKICAgICAgICB9IGVsc2UgaWYgKG4gPT09IHRoaXMuaGVhZC5kYXRhLmxlbmd0aCkgewogICAgICAgICAgcmV0ID0gdGhpcy5zaGlmdCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXQgPSBoYXNTdHJpbmdzID8gdGhpcy5fZ2V0U3RyaW5nKG4pIDogdGhpcy5fZ2V0QnVmZmVyKG4pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmV0OwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogImZpcnN0IiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpcnN0KCkgewogICAgICAgIHJldHVybiB0aGlzLmhlYWQuZGF0YTsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJfZ2V0U3RyaW5nIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRTdHJpbmcobikgewogICAgICAgIHZhciBwID0gdGhpcy5oZWFkOwogICAgICAgIHZhciBjID0gMTsKICAgICAgICB2YXIgcmV0ID0gcC5kYXRhOwogICAgICAgIG4gLT0gcmV0Lmxlbmd0aDsKICAgICAgICB3aGlsZSAocCA9IHAubmV4dCkgewogICAgICAgICAgdmFyIHN0ciA9IHAuZGF0YTsKICAgICAgICAgIHZhciBuYiA9IG4gPiBzdHIubGVuZ3RoID8gc3RyLmxlbmd0aCA6IG47CiAgICAgICAgICBpZiAobmIgPT09IHN0ci5sZW5ndGgpCiAgICAgICAgICAgIHJldCArPSBzdHI7CiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHJldCArPSBzdHIuc2xpY2UoMCwgbik7CiAgICAgICAgICBuIC09IG5iOwogICAgICAgICAgaWYgKG4gPT09IDApIHsKICAgICAgICAgICAgaWYgKG5iID09PSBzdHIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgKytjOwogICAgICAgICAgICAgIGlmIChwLm5leHQpCiAgICAgICAgICAgICAgICB0aGlzLmhlYWQgPSBwLm5leHQ7CiAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLmhlYWQgPSBwOwogICAgICAgICAgICAgIHAuZGF0YSA9IHN0ci5zbGljZShuYik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICArK2M7CiAgICAgICAgfQogICAgICAgIHRoaXMubGVuZ3RoIC09IGM7CiAgICAgICAgcmV0dXJuIHJldDsKICAgICAgfQogICAgfSwgewogICAgICBrZXk6ICJfZ2V0QnVmZmVyIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRCdWZmZXIobikgewogICAgICAgIHZhciByZXQgPSBCdWZmZXIkZy5hbGxvY1Vuc2FmZShuKTsKICAgICAgICB2YXIgcCA9IHRoaXMuaGVhZDsKICAgICAgICB2YXIgYyA9IDE7CiAgICAgICAgcC5kYXRhLmNvcHkocmV0KTsKICAgICAgICBuIC09IHAuZGF0YS5sZW5ndGg7CiAgICAgICAgd2hpbGUgKHAgPSBwLm5leHQpIHsKICAgICAgICAgIHZhciBidWYgPSBwLmRhdGE7CiAgICAgICAgICB2YXIgbmIgPSBuID4gYnVmLmxlbmd0aCA/IGJ1Zi5sZW5ndGggOiBuOwogICAgICAgICAgYnVmLmNvcHkocmV0LCByZXQubGVuZ3RoIC0gbiwgMCwgbmIpOwogICAgICAgICAgbiAtPSBuYjsKICAgICAgICAgIGlmIChuID09PSAwKSB7CiAgICAgICAgICAgIGlmIChuYiA9PT0gYnVmLmxlbmd0aCkgewogICAgICAgICAgICAgICsrYzsKICAgICAgICAgICAgICBpZiAocC5uZXh0KQogICAgICAgICAgICAgICAgdGhpcy5oZWFkID0gcC5uZXh0OwogICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5oZWFkID0gcDsKICAgICAgICAgICAgICBwLmRhdGEgPSBidWYuc2xpY2UobmIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgKytjOwogICAgICAgIH0KICAgICAgICB0aGlzLmxlbmd0aCAtPSBjOwogICAgICAgIHJldHVybiByZXQ7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiBjdXN0b20sCiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZShfLCBvcHRpb25zKSB7CiAgICAgICAgcmV0dXJuIGluc3BlY3QodGhpcywgX29iamVjdFNwcmVhZCh7fSwgb3B0aW9ucywgewogICAgICAgICAgZGVwdGg6IDAsCiAgICAgICAgICBjdXN0b21JbnNwZWN0OiBmYWxzZQogICAgICAgIH0pKTsKICAgICAgfQogICAgfV0pOwogICAgcmV0dXJuIEJ1ZmZlckxpc3QyOwogIH0oKTsKICBmdW5jdGlvbiBkZXN0cm95KGVyciwgY2IpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB2YXIgcmVhZGFibGVEZXN0cm95ZWQgPSB0aGlzLl9yZWFkYWJsZVN0YXRlICYmIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkOwogICAgdmFyIHdyaXRhYmxlRGVzdHJveWVkID0gdGhpcy5fd3JpdGFibGVTdGF0ZSAmJiB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZDsKICAgIGlmIChyZWFkYWJsZURlc3Ryb3llZCB8fCB3cml0YWJsZURlc3Ryb3llZCkgewogICAgICBpZiAoY2IpIHsKICAgICAgICBjYihlcnIpOwogICAgICB9IGVsc2UgaWYgKGVycikgewogICAgICAgIGlmICghdGhpcy5fd3JpdGFibGVTdGF0ZSkgewogICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0RXJyb3JOVCwgdGhpcywgZXJyKTsKICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCkgewogICAgICAgICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlOwogICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0RXJyb3JOVCwgdGhpcywgZXJyKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSkgewogICAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IHRydWU7CiAgICB9CiAgICBpZiAodGhpcy5fd3JpdGFibGVTdGF0ZSkgewogICAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IHRydWU7CiAgICB9CiAgICB0aGlzLl9kZXN0cm95KGVyciB8fCBudWxsLCBmdW5jdGlvbihlcnIyKSB7CiAgICAgIGlmICghY2IgJiYgZXJyMikgewogICAgICAgIGlmICghX3RoaXMuX3dyaXRhYmxlU3RhdGUpIHsKICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdEVycm9yQW5kQ2xvc2VOVCwgX3RoaXMsIGVycjIpOwogICAgICAgIH0gZWxzZSBpZiAoIV90aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCkgewogICAgICAgICAgX3RoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTsKICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdEVycm9yQW5kQ2xvc2VOVCwgX3RoaXMsIGVycjIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGVtaXRDbG9zZU5ULCBfdGhpcyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKGNiKSB7CiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0Q2xvc2VOVCwgX3RoaXMpOwogICAgICAgIGNiKGVycjIpOwogICAgICB9IGVsc2UgewogICAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlTlQsIF90aGlzKTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gdGhpczsKICB9CiAgZnVuY3Rpb24gZW1pdEVycm9yQW5kQ2xvc2VOVChzZWxmLCBlcnIpIHsKICAgIGVtaXRFcnJvck5UKHNlbGYsIGVycik7CiAgICBlbWl0Q2xvc2VOVChzZWxmKTsKICB9CiAgZnVuY3Rpb24gZW1pdENsb3NlTlQoc2VsZikgewogICAgaWYgKHNlbGYuX3dyaXRhYmxlU3RhdGUgJiYgIXNlbGYuX3dyaXRhYmxlU3RhdGUuZW1pdENsb3NlKQogICAgICByZXR1cm47CiAgICBpZiAoc2VsZi5fcmVhZGFibGVTdGF0ZSAmJiAhc2VsZi5fcmVhZGFibGVTdGF0ZS5lbWl0Q2xvc2UpCiAgICAgIHJldHVybjsKICAgIHNlbGYuZW1pdCgiY2xvc2UiKTsKICB9CiAgZnVuY3Rpb24gdW5kZXN0cm95KCkgewogICAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUpIHsKICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgPSBmYWxzZTsKICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5yZWFkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5kZWQgPSBmYWxzZTsKICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkID0gZmFsc2U7CiAgICB9CiAgICBpZiAodGhpcy5fd3JpdGFibGVTdGF0ZSkgewogICAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IGZhbHNlOwogICAgICB0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkID0gZmFsc2U7CiAgICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZmluYWxDYWxsZWQgPSBmYWxzZTsKICAgICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5wcmVmaW5pc2hlZCA9IGZhbHNlOwogICAgICB0aGlzLl93cml0YWJsZVN0YXRlLmZpbmlzaGVkID0gZmFsc2U7CiAgICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gZmFsc2U7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGVtaXRFcnJvck5UKHNlbGYsIGVycikgewogICAgc2VsZi5lbWl0KCJlcnJvciIsIGVycik7CiAgfQogIGZ1bmN0aW9uIGVycm9yT3JEZXN0cm95JDIoc3RyZWFtLCBlcnIpIHsKICAgIHZhciByU3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CiAgICB2YXIgd1N0YXRlID0gc3RyZWFtLl93cml0YWJsZVN0YXRlOwogICAgaWYgKHJTdGF0ZSAmJiByU3RhdGUuYXV0b0Rlc3Ryb3kgfHwgd1N0YXRlICYmIHdTdGF0ZS5hdXRvRGVzdHJveSkKICAgICAgc3RyZWFtLmRlc3Ryb3koZXJyKTsKICAgIGVsc2UKICAgICAgc3RyZWFtLmVtaXQoImVycm9yIiwgZXJyKTsKICB9CiAgdmFyIGRlc3Ryb3lfMSA9IHsKICAgIGRlc3Ryb3ksCiAgICB1bmRlc3Ryb3ksCiAgICBlcnJvck9yRGVzdHJveTogZXJyb3JPckRlc3Ryb3kkMgogIH07CiAgdmFyIGVycm9yc0Jyb3dzZXIgPSB7fTsKICBmdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgewogICAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7CiAgICBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzczsKICAgIHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7CiAgfQogIHZhciBjb2RlcyA9IHt9OwogIGZ1bmN0aW9uIGNyZWF0ZUVycm9yVHlwZShjb2RlMiwgbWVzc2FnZSwgQmFzZSkgewogICAgaWYgKCFCYXNlKSB7CiAgICAgIEJhc2UgPSBFcnJvcjsKICAgIH0KICAgIGZ1bmN0aW9uIGdldE1lc3NhZ2UoYXJnMSwgYXJnMiwgYXJnMykgewogICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09ICJzdHJpbmciKSB7CiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG1lc3NhZ2UoYXJnMSwgYXJnMiwgYXJnMyk7CiAgICAgIH0KICAgIH0KICAgIHZhciBOb2RlRXJyb3IgPSAvKiBAX19QVVJFX18gKi8gZnVuY3Rpb24oX0Jhc2UpIHsKICAgICAgX2luaGVyaXRzTG9vc2UoTm9kZUVycm9yMiwgX0Jhc2UpOwogICAgICBmdW5jdGlvbiBOb2RlRXJyb3IyKGFyZzEsIGFyZzIsIGFyZzMpIHsKICAgICAgICByZXR1cm4gX0Jhc2UuY2FsbCh0aGlzLCBnZXRNZXNzYWdlKGFyZzEsIGFyZzIsIGFyZzMpKSB8fCB0aGlzOwogICAgICB9CiAgICAgIHJldHVybiBOb2RlRXJyb3IyOwogICAgfShCYXNlKTsKICAgIE5vZGVFcnJvci5wcm90b3R5cGUubmFtZSA9IEJhc2UubmFtZTsKICAgIE5vZGVFcnJvci5wcm90b3R5cGUuY29kZSA9IGNvZGUyOwogICAgY29kZXNbY29kZTJdID0gTm9kZUVycm9yOwogIH0KICBmdW5jdGlvbiBvbmVPZihleHBlY3RlZCwgdGhpbmcpIHsKICAgIGlmIChBcnJheS5pc0FycmF5KGV4cGVjdGVkKSkgewogICAgICB2YXIgbGVuMiA9IGV4cGVjdGVkLmxlbmd0aDsKICAgICAgZXhwZWN0ZWQgPSBleHBlY3RlZC5tYXAoZnVuY3Rpb24oaTIpIHsKICAgICAgICByZXR1cm4gU3RyaW5nKGkyKTsKICAgICAgfSk7CiAgICAgIGlmIChsZW4yID4gMikgewogICAgICAgIHJldHVybiAib25lIG9mICIuY29uY2F0KHRoaW5nLCAiICIpLmNvbmNhdChleHBlY3RlZC5zbGljZSgwLCBsZW4yIC0gMSkuam9pbigiLCAiKSwgIiwgb3IgIikgKyBleHBlY3RlZFtsZW4yIC0gMV07CiAgICAgIH0gZWxzZSBpZiAobGVuMiA9PT0gMikgewogICAgICAgIHJldHVybiAib25lIG9mICIuY29uY2F0KHRoaW5nLCAiICIpLmNvbmNhdChleHBlY3RlZFswXSwgIiBvciAiKS5jb25jYXQoZXhwZWN0ZWRbMV0pOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAib2YgIi5jb25jYXQodGhpbmcsICIgIikuY29uY2F0KGV4cGVjdGVkWzBdKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICJvZiAiLmNvbmNhdCh0aGluZywgIiAiKS5jb25jYXQoU3RyaW5nKGV4cGVjdGVkKSk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIHN0YXJ0c1dpdGgoc3RyLCBzZWFyY2gsIHBvcykgewogICAgcmV0dXJuIHN0ci5zdWJzdHIoIXBvcyB8fCBwb3MgPCAwID8gMCA6ICtwb3MsIHNlYXJjaC5sZW5ndGgpID09PSBzZWFyY2g7CiAgfQogIGZ1bmN0aW9uIGVuZHNXaXRoKHN0ciwgc2VhcmNoLCB0aGlzX2xlbikgewogICAgaWYgKHRoaXNfbGVuID09PSB2b2lkIDAgfHwgdGhpc19sZW4gPiBzdHIubGVuZ3RoKSB7CiAgICAgIHRoaXNfbGVuID0gc3RyLmxlbmd0aDsKICAgIH0KICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKHRoaXNfbGVuIC0gc2VhcmNoLmxlbmd0aCwgdGhpc19sZW4pID09PSBzZWFyY2g7CiAgfQogIGZ1bmN0aW9uIGluY2x1ZGVzKHN0ciwgc2VhcmNoLCBzdGFydCkgewogICAgaWYgKHR5cGVvZiBzdGFydCAhPT0gIm51bWJlciIpIHsKICAgICAgc3RhcnQgPSAwOwogICAgfQogICAgaWYgKHN0YXJ0ICsgc2VhcmNoLmxlbmd0aCA+IHN0ci5sZW5ndGgpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHN0ci5pbmRleE9mKHNlYXJjaCwgc3RhcnQpICE9PSAtMTsKICAgIH0KICB9CiAgY3JlYXRlRXJyb3JUeXBlKCJFUlJfSU5WQUxJRF9PUFRfVkFMVUUiLCBmdW5jdGlvbihuYW1lLCB2YWx1ZSkgewogICAgcmV0dXJuICdUaGUgdmFsdWUgIicgKyB2YWx1ZSArICciIGlzIGludmFsaWQgZm9yIG9wdGlvbiAiJyArIG5hbWUgKyAnIic7CiAgfSwgVHlwZUVycm9yKTsKICBjcmVhdGVFcnJvclR5cGUoIkVSUl9JTlZBTElEX0FSR19UWVBFIiwgZnVuY3Rpb24obmFtZSwgZXhwZWN0ZWQsIGFjdHVhbCkgewogICAgdmFyIGRldGVybWluZXI7CiAgICBpZiAodHlwZW9mIGV4cGVjdGVkID09PSAic3RyaW5nIiAmJiBzdGFydHNXaXRoKGV4cGVjdGVkLCAibm90ICIpKSB7CiAgICAgIGRldGVybWluZXIgPSAibXVzdCBub3QgYmUiOwogICAgICBleHBlY3RlZCA9IGV4cGVjdGVkLnJlcGxhY2UoL15ub3QgLywgIiIpOwogICAgfSBlbHNlIHsKICAgICAgZGV0ZXJtaW5lciA9ICJtdXN0IGJlIjsKICAgIH0KICAgIHZhciBtc2c7CiAgICBpZiAoZW5kc1dpdGgobmFtZSwgIiBhcmd1bWVudCIpKSB7CiAgICAgIG1zZyA9ICJUaGUgIi5jb25jYXQobmFtZSwgIiAiKS5jb25jYXQoZGV0ZXJtaW5lciwgIiAiKS5jb25jYXQob25lT2YoZXhwZWN0ZWQsICJ0eXBlIikpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIHR5cGUgPSBpbmNsdWRlcyhuYW1lLCAiLiIpID8gInByb3BlcnR5IiA6ICJhcmd1bWVudCI7CiAgICAgIG1zZyA9ICdUaGUgIicuY29uY2F0KG5hbWUsICciICcpLmNvbmNhdCh0eXBlLCAiICIpLmNvbmNhdChkZXRlcm1pbmVyLCAiICIpLmNvbmNhdChvbmVPZihleHBlY3RlZCwgInR5cGUiKSk7CiAgICB9CiAgICBtc2cgKz0gIi4gUmVjZWl2ZWQgdHlwZSAiLmNvbmNhdCh0eXBlb2YgYWN0dWFsKTsKICAgIHJldHVybiBtc2c7CiAgfSwgVHlwZUVycm9yKTsKICBjcmVhdGVFcnJvclR5cGUoIkVSUl9TVFJFQU1fUFVTSF9BRlRFUl9FT0YiLCAic3RyZWFtLnB1c2goKSBhZnRlciBFT0YiKTsKICBjcmVhdGVFcnJvclR5cGUoIkVSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVEIiwgZnVuY3Rpb24obmFtZSkgewogICAgcmV0dXJuICJUaGUgIiArIG5hbWUgKyAiIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQiOwogIH0pOwogIGNyZWF0ZUVycm9yVHlwZSgiRVJSX1NUUkVBTV9QUkVNQVRVUkVfQ0xPU0UiLCAiUHJlbWF0dXJlIGNsb3NlIik7CiAgY3JlYXRlRXJyb3JUeXBlKCJFUlJfU1RSRUFNX0RFU1RST1lFRCIsIGZ1bmN0aW9uKG5hbWUpIHsKICAgIHJldHVybiAiQ2Fubm90IGNhbGwgIiArIG5hbWUgKyAiIGFmdGVyIGEgc3RyZWFtIHdhcyBkZXN0cm95ZWQiOwogIH0pOwogIGNyZWF0ZUVycm9yVHlwZSgiRVJSX01VTFRJUExFX0NBTExCQUNLIiwgIkNhbGxiYWNrIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyIpOwogIGNyZWF0ZUVycm9yVHlwZSgiRVJSX1NUUkVBTV9DQU5OT1RfUElQRSIsICJDYW5ub3QgcGlwZSwgbm90IHJlYWRhYmxlIik7CiAgY3JlYXRlRXJyb3JUeXBlKCJFUlJfU1RSRUFNX1dSSVRFX0FGVEVSX0VORCIsICJ3cml0ZSBhZnRlciBlbmQiKTsKICBjcmVhdGVFcnJvclR5cGUoIkVSUl9TVFJFQU1fTlVMTF9WQUxVRVMiLCAiTWF5IG5vdCB3cml0ZSBudWxsIHZhbHVlcyB0byBzdHJlYW0iLCBUeXBlRXJyb3IpOwogIGNyZWF0ZUVycm9yVHlwZSgiRVJSX1VOS05PV05fRU5DT0RJTkciLCBmdW5jdGlvbihhcmcpIHsKICAgIHJldHVybiAiVW5rbm93biBlbmNvZGluZzogIiArIGFyZzsKICB9LCBUeXBlRXJyb3IpOwogIGNyZWF0ZUVycm9yVHlwZSgiRVJSX1NUUkVBTV9VTlNISUZUX0FGVEVSX0VORF9FVkVOVCIsICJzdHJlYW0udW5zaGlmdCgpIGFmdGVyIGVuZCBldmVudCIpOwogIGVycm9yc0Jyb3dzZXIuY29kZXMgPSBjb2RlczsKICB2YXIgRVJSX0lOVkFMSURfT1BUX1ZBTFVFID0gZXJyb3JzQnJvd3Nlci5jb2Rlcy5FUlJfSU5WQUxJRF9PUFRfVkFMVUU7CiAgZnVuY3Rpb24gaGlnaFdhdGVyTWFya0Zyb20ob3B0aW9ucywgaXNEdXBsZXgsIGR1cGxleEtleSkgewogICAgcmV0dXJuIG9wdGlvbnMuaGlnaFdhdGVyTWFyayAhPSBudWxsID8gb3B0aW9ucy5oaWdoV2F0ZXJNYXJrIDogaXNEdXBsZXggPyBvcHRpb25zW2R1cGxleEtleV0gOiBudWxsOwogIH0KICBmdW5jdGlvbiBnZXRIaWdoV2F0ZXJNYXJrJDIoc3RhdGUyLCBvcHRpb25zLCBkdXBsZXhLZXksIGlzRHVwbGV4KSB7CiAgICB2YXIgaHdtID0gaGlnaFdhdGVyTWFya0Zyb20ob3B0aW9ucywgaXNEdXBsZXgsIGR1cGxleEtleSk7CiAgICBpZiAoaHdtICE9IG51bGwpIHsKICAgICAgaWYgKCEoaXNGaW5pdGUoaHdtKSAmJiBNYXRoLmZsb29yKGh3bSkgPT09IGh3bSkgfHwgaHdtIDwgMCkgewogICAgICAgIHZhciBuYW1lID0gaXNEdXBsZXggPyBkdXBsZXhLZXkgOiAiaGlnaFdhdGVyTWFyayI7CiAgICAgICAgdGhyb3cgbmV3IEVSUl9JTlZBTElEX09QVF9WQUxVRShuYW1lLCBod20pOwogICAgICB9CiAgICAgIHJldHVybiBNYXRoLmZsb29yKGh3bSk7CiAgICB9CiAgICByZXR1cm4gc3RhdGUyLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDsKICB9CiAgdmFyIHN0YXRlID0gewogICAgZ2V0SGlnaFdhdGVyTWFyazogZ2V0SGlnaFdhdGVyTWFyayQyCiAgfTsKICB2YXIgc3RyaW5nX2RlY29kZXIgPSB7fTsKICB2YXIgQnVmZmVyJGYgPSBzYWZlQnVmZmVyLmV4cG9ydHMuQnVmZmVyOwogIHZhciBpc0VuY29kaW5nID0gQnVmZmVyJGYuaXNFbmNvZGluZyB8fCBmdW5jdGlvbihlbmNvZGluZykgewogICAgZW5jb2RpbmcgPSAiIiArIGVuY29kaW5nOwogICAgc3dpdGNoIChlbmNvZGluZyAmJiBlbmNvZGluZy50b0xvd2VyQ2FzZSgpKSB7CiAgICAgIGNhc2UgImhleCI6CiAgICAgIGNhc2UgInV0ZjgiOgogICAgICBjYXNlICJ1dGYtOCI6CiAgICAgIGNhc2UgImFzY2lpIjoKICAgICAgY2FzZSAiYmluYXJ5IjoKICAgICAgY2FzZSAiYmFzZTY0IjoKICAgICAgY2FzZSAidWNzMiI6CiAgICAgIGNhc2UgInVjcy0yIjoKICAgICAgY2FzZSAidXRmMTZsZSI6CiAgICAgIGNhc2UgInV0Zi0xNmxlIjoKICAgICAgY2FzZSAicmF3IjoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfTsKICBmdW5jdGlvbiBfbm9ybWFsaXplRW5jb2RpbmcoZW5jKSB7CiAgICBpZiAoIWVuYykKICAgICAgcmV0dXJuICJ1dGY4IjsKICAgIHZhciByZXRyaWVkOwogICAgd2hpbGUgKHRydWUpIHsKICAgICAgc3dpdGNoIChlbmMpIHsKICAgICAgICBjYXNlICJ1dGY4IjoKICAgICAgICBjYXNlICJ1dGYtOCI6CiAgICAgICAgICByZXR1cm4gInV0ZjgiOwogICAgICAgIGNhc2UgInVjczIiOgogICAgICAgIGNhc2UgInVjcy0yIjoKICAgICAgICBjYXNlICJ1dGYxNmxlIjoKICAgICAgICBjYXNlICJ1dGYtMTZsZSI6CiAgICAgICAgICByZXR1cm4gInV0ZjE2bGUiOwogICAgICAgIGNhc2UgImxhdGluMSI6CiAgICAgICAgY2FzZSAiYmluYXJ5IjoKICAgICAgICAgIHJldHVybiAibGF0aW4xIjsKICAgICAgICBjYXNlICJiYXNlNjQiOgogICAgICAgIGNhc2UgImFzY2lpIjoKICAgICAgICBjYXNlICJoZXgiOgogICAgICAgICAgcmV0dXJuIGVuYzsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgaWYgKHJldHJpZWQpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIGVuYyA9ICgiIiArIGVuYykudG9Mb3dlckNhc2UoKTsKICAgICAgICAgIHJldHJpZWQgPSB0cnVlOwogICAgICB9CiAgICB9CiAgfQogIGZ1bmN0aW9uIG5vcm1hbGl6ZUVuY29kaW5nKGVuYykgewogICAgdmFyIG5lbmMgPSBfbm9ybWFsaXplRW5jb2RpbmcoZW5jKTsKICAgIGlmICh0eXBlb2YgbmVuYyAhPT0gInN0cmluZyIgJiYgKEJ1ZmZlciRmLmlzRW5jb2RpbmcgPT09IGlzRW5jb2RpbmcgfHwgIWlzRW5jb2RpbmcoZW5jKSkpCiAgICAgIHRocm93IG5ldyBFcnJvcigiVW5rbm93biBlbmNvZGluZzogIiArIGVuYyk7CiAgICByZXR1cm4gbmVuYyB8fCBlbmM7CiAgfQogIHN0cmluZ19kZWNvZGVyLlN0cmluZ0RlY29kZXIgPSBTdHJpbmdEZWNvZGVyJDE7CiAgZnVuY3Rpb24gU3RyaW5nRGVjb2RlciQxKGVuY29kaW5nKSB7CiAgICB0aGlzLmVuY29kaW5nID0gbm9ybWFsaXplRW5jb2RpbmcoZW5jb2RpbmcpOwogICAgdmFyIG5iOwogICAgc3dpdGNoICh0aGlzLmVuY29kaW5nKSB7CiAgICAgIGNhc2UgInV0ZjE2bGUiOgogICAgICAgIHRoaXMudGV4dCA9IHV0ZjE2VGV4dDsKICAgICAgICB0aGlzLmVuZCA9IHV0ZjE2RW5kOwogICAgICAgIG5iID0gNDsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAidXRmOCI6CiAgICAgICAgdGhpcy5maWxsTGFzdCA9IHV0ZjhGaWxsTGFzdDsKICAgICAgICBuYiA9IDQ7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgImJhc2U2NCI6CiAgICAgICAgdGhpcy50ZXh0ID0gYmFzZTY0VGV4dDsKICAgICAgICB0aGlzLmVuZCA9IGJhc2U2NEVuZDsKICAgICAgICBuYiA9IDM7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgdGhpcy53cml0ZSA9IHNpbXBsZVdyaXRlOwogICAgICAgIHRoaXMuZW5kID0gc2ltcGxlRW5kOwogICAgICAgIHJldHVybjsKICAgIH0KICAgIHRoaXMubGFzdE5lZWQgPSAwOwogICAgdGhpcy5sYXN0VG90YWwgPSAwOwogICAgdGhpcy5sYXN0Q2hhciA9IEJ1ZmZlciRmLmFsbG9jVW5zYWZlKG5iKTsKICB9CiAgU3RyaW5nRGVjb2RlciQxLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uKGJ1ZikgewogICAgaWYgKGJ1Zi5sZW5ndGggPT09IDApCiAgICAgIHJldHVybiAiIjsKICAgIHZhciByOwogICAgdmFyIGkyOwogICAgaWYgKHRoaXMubGFzdE5lZWQpIHsKICAgICAgciA9IHRoaXMuZmlsbExhc3QoYnVmKTsKICAgICAgaWYgKHIgPT09IHZvaWQgMCkKICAgICAgICByZXR1cm4gIiI7CiAgICAgIGkyID0gdGhpcy5sYXN0TmVlZDsKICAgICAgdGhpcy5sYXN0TmVlZCA9IDA7CiAgICB9IGVsc2UgewogICAgICBpMiA9IDA7CiAgICB9CiAgICBpZiAoaTIgPCBidWYubGVuZ3RoKQogICAgICByZXR1cm4gciA/IHIgKyB0aGlzLnRleHQoYnVmLCBpMikgOiB0aGlzLnRleHQoYnVmLCBpMik7CiAgICByZXR1cm4gciB8fCAiIjsKICB9OwogIFN0cmluZ0RlY29kZXIkMS5wcm90b3R5cGUuZW5kID0gdXRmOEVuZDsKICBTdHJpbmdEZWNvZGVyJDEucHJvdG90eXBlLnRleHQgPSB1dGY4VGV4dDsKICBTdHJpbmdEZWNvZGVyJDEucHJvdG90eXBlLmZpbGxMYXN0ID0gZnVuY3Rpb24oYnVmKSB7CiAgICBpZiAodGhpcy5sYXN0TmVlZCA8PSBidWYubGVuZ3RoKSB7CiAgICAgIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZCwgMCwgdGhpcy5sYXN0TmVlZCk7CiAgICAgIHJldHVybiB0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsIDAsIHRoaXMubGFzdFRvdGFsKTsKICAgIH0KICAgIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZCwgMCwgYnVmLmxlbmd0aCk7CiAgICB0aGlzLmxhc3ROZWVkIC09IGJ1Zi5sZW5ndGg7CiAgfTsKICBmdW5jdGlvbiB1dGY4Q2hlY2tCeXRlKGJ5dGUpIHsKICAgIGlmIChieXRlIDw9IDEyNykKICAgICAgcmV0dXJuIDA7CiAgICBlbHNlIGlmIChieXRlID4+IDUgPT09IDYpCiAgICAgIHJldHVybiAyOwogICAgZWxzZSBpZiAoYnl0ZSA+PiA0ID09PSAxNCkKICAgICAgcmV0dXJuIDM7CiAgICBlbHNlIGlmIChieXRlID4+IDMgPT09IDMwKQogICAgICByZXR1cm4gNDsKICAgIHJldHVybiBieXRlID4+IDYgPT09IDIgPyAtMSA6IC0yOwogIH0KICBmdW5jdGlvbiB1dGY4Q2hlY2tJbmNvbXBsZXRlKHNlbGYsIGJ1ZiwgaTIpIHsKICAgIHZhciBqID0gYnVmLmxlbmd0aCAtIDE7CiAgICBpZiAoaiA8IGkyKQogICAgICByZXR1cm4gMDsKICAgIHZhciBuYiA9IHV0ZjhDaGVja0J5dGUoYnVmW2pdKTsKICAgIGlmIChuYiA+PSAwKSB7CiAgICAgIGlmIChuYiA+IDApCiAgICAgICAgc2VsZi5sYXN0TmVlZCA9IG5iIC0gMTsKICAgICAgcmV0dXJuIG5iOwogICAgfQogICAgaWYgKC0taiA8IGkyIHx8IG5iID09PSAtMikKICAgICAgcmV0dXJuIDA7CiAgICBuYiA9IHV0ZjhDaGVja0J5dGUoYnVmW2pdKTsKICAgIGlmIChuYiA+PSAwKSB7CiAgICAgIGlmIChuYiA+IDApCiAgICAgICAgc2VsZi5sYXN0TmVlZCA9IG5iIC0gMjsKICAgICAgcmV0dXJuIG5iOwogICAgfQogICAgaWYgKC0taiA8IGkyIHx8IG5iID09PSAtMikKICAgICAgcmV0dXJuIDA7CiAgICBuYiA9IHV0ZjhDaGVja0J5dGUoYnVmW2pdKTsKICAgIGlmIChuYiA+PSAwKSB7CiAgICAgIGlmIChuYiA+IDApIHsKICAgICAgICBpZiAobmIgPT09IDIpCiAgICAgICAgICBuYiA9IDA7CiAgICAgICAgZWxzZQogICAgICAgICAgc2VsZi5sYXN0TmVlZCA9IG5iIC0gMzsKICAgICAgfQogICAgICByZXR1cm4gbmI7CiAgICB9CiAgICByZXR1cm4gMDsKICB9CiAgZnVuY3Rpb24gdXRmOENoZWNrRXh0cmFCeXRlcyhzZWxmLCBidWYsIHApIHsKICAgIGlmICgoYnVmWzBdICYgMTkyKSAhPT0gMTI4KSB7CiAgICAgIHNlbGYubGFzdE5lZWQgPSAwOwogICAgICByZXR1cm4gIlx1RkZGRCI7CiAgICB9CiAgICBpZiAoc2VsZi5sYXN0TmVlZCA+IDEgJiYgYnVmLmxlbmd0aCA+IDEpIHsKICAgICAgaWYgKChidWZbMV0gJiAxOTIpICE9PSAxMjgpIHsKICAgICAgICBzZWxmLmxhc3ROZWVkID0gMTsKICAgICAgICByZXR1cm4gIlx1RkZGRCI7CiAgICAgIH0KICAgICAgaWYgKHNlbGYubGFzdE5lZWQgPiAyICYmIGJ1Zi5sZW5ndGggPiAyKSB7CiAgICAgICAgaWYgKChidWZbMl0gJiAxOTIpICE9PSAxMjgpIHsKICAgICAgICAgIHNlbGYubGFzdE5lZWQgPSAyOwogICAgICAgICAgcmV0dXJuICJcdUZGRkQiOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICBmdW5jdGlvbiB1dGY4RmlsbExhc3QoYnVmKSB7CiAgICB2YXIgcCA9IHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZDsKICAgIHZhciByID0gdXRmOENoZWNrRXh0cmFCeXRlcyh0aGlzLCBidWYpOwogICAgaWYgKHIgIT09IHZvaWQgMCkKICAgICAgcmV0dXJuIHI7CiAgICBpZiAodGhpcy5sYXN0TmVlZCA8PSBidWYubGVuZ3RoKSB7CiAgICAgIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHAsIDAsIHRoaXMubGFzdE5lZWQpOwogICAgICByZXR1cm4gdGhpcy5sYXN0Q2hhci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCB0aGlzLmxhc3RUb3RhbCk7CiAgICB9CiAgICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCBwLCAwLCBidWYubGVuZ3RoKTsKICAgIHRoaXMubGFzdE5lZWQgLT0gYnVmLmxlbmd0aDsKICB9CiAgZnVuY3Rpb24gdXRmOFRleHQoYnVmLCBpMikgewogICAgdmFyIHRvdGFsID0gdXRmOENoZWNrSW5jb21wbGV0ZSh0aGlzLCBidWYsIGkyKTsKICAgIGlmICghdGhpcy5sYXN0TmVlZCkKICAgICAgcmV0dXJuIGJ1Zi50b1N0cmluZygidXRmOCIsIGkyKTsKICAgIHRoaXMubGFzdFRvdGFsID0gdG90YWw7CiAgICB2YXIgZW5kID0gYnVmLmxlbmd0aCAtICh0b3RhbCAtIHRoaXMubGFzdE5lZWQpOwogICAgYnVmLmNvcHkodGhpcy5sYXN0Q2hhciwgMCwgZW5kKTsKICAgIHJldHVybiBidWYudG9TdHJpbmcoInV0ZjgiLCBpMiwgZW5kKTsKICB9CiAgZnVuY3Rpb24gdXRmOEVuZChidWYpIHsKICAgIHZhciByID0gYnVmICYmIGJ1Zi5sZW5ndGggPyB0aGlzLndyaXRlKGJ1ZikgOiAiIjsKICAgIGlmICh0aGlzLmxhc3ROZWVkKQogICAgICByZXR1cm4gciArICJcdUZGRkQiOwogICAgcmV0dXJuIHI7CiAgfQogIGZ1bmN0aW9uIHV0ZjE2VGV4dChidWYsIGkyKSB7CiAgICBpZiAoKGJ1Zi5sZW5ndGggLSBpMikgJSAyID09PSAwKSB7CiAgICAgIHZhciByID0gYnVmLnRvU3RyaW5nKCJ1dGYxNmxlIiwgaTIpOwogICAgICBpZiAocikgewogICAgICAgIHZhciBjID0gci5jaGFyQ29kZUF0KHIubGVuZ3RoIC0gMSk7CiAgICAgICAgaWYgKGMgPj0gNTUyOTYgJiYgYyA8PSA1NjMxOSkgewogICAgICAgICAgdGhpcy5sYXN0TmVlZCA9IDI7CiAgICAgICAgICB0aGlzLmxhc3RUb3RhbCA9IDQ7CiAgICAgICAgICB0aGlzLmxhc3RDaGFyWzBdID0gYnVmW2J1Zi5sZW5ndGggLSAyXTsKICAgICAgICAgIHRoaXMubGFzdENoYXJbMV0gPSBidWZbYnVmLmxlbmd0aCAtIDFdOwogICAgICAgICAgcmV0dXJuIHIuc2xpY2UoMCwgLTEpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcjsKICAgIH0KICAgIHRoaXMubGFzdE5lZWQgPSAxOwogICAgdGhpcy5sYXN0VG90YWwgPSAyOwogICAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07CiAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCJ1dGYxNmxlIiwgaTIsIGJ1Zi5sZW5ndGggLSAxKTsKICB9CiAgZnVuY3Rpb24gdXRmMTZFbmQoYnVmKSB7CiAgICB2YXIgciA9IGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogIiI7CiAgICBpZiAodGhpcy5sYXN0TmVlZCkgewogICAgICB2YXIgZW5kID0gdGhpcy5sYXN0VG90YWwgLSB0aGlzLmxhc3ROZWVkOwogICAgICByZXR1cm4gciArIHRoaXMubGFzdENoYXIudG9TdHJpbmcoInV0ZjE2bGUiLCAwLCBlbmQpOwogICAgfQogICAgcmV0dXJuIHI7CiAgfQogIGZ1bmN0aW9uIGJhc2U2NFRleHQoYnVmLCBpMikgewogICAgdmFyIG4gPSAoYnVmLmxlbmd0aCAtIGkyKSAlIDM7CiAgICBpZiAobiA9PT0gMCkKICAgICAgcmV0dXJuIGJ1Zi50b1N0cmluZygiYmFzZTY0IiwgaTIpOwogICAgdGhpcy5sYXN0TmVlZCA9IDMgLSBuOwogICAgdGhpcy5sYXN0VG90YWwgPSAzOwogICAgaWYgKG4gPT09IDEpIHsKICAgICAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07CiAgICB9IGVsc2UgewogICAgICB0aGlzLmxhc3RDaGFyWzBdID0gYnVmW2J1Zi5sZW5ndGggLSAyXTsKICAgICAgdGhpcy5sYXN0Q2hhclsxXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07CiAgICB9CiAgICByZXR1cm4gYnVmLnRvU3RyaW5nKCJiYXNlNjQiLCBpMiwgYnVmLmxlbmd0aCAtIG4pOwogIH0KICBmdW5jdGlvbiBiYXNlNjRFbmQoYnVmKSB7CiAgICB2YXIgciA9IGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogIiI7CiAgICBpZiAodGhpcy5sYXN0TmVlZCkKICAgICAgcmV0dXJuIHIgKyB0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKCJiYXNlNjQiLCAwLCAzIC0gdGhpcy5sYXN0TmVlZCk7CiAgICByZXR1cm4gcjsKICB9CiAgZnVuY3Rpb24gc2ltcGxlV3JpdGUoYnVmKSB7CiAgICByZXR1cm4gYnVmLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpOwogIH0KICBmdW5jdGlvbiBzaW1wbGVFbmQoYnVmKSB7CiAgICByZXR1cm4gYnVmICYmIGJ1Zi5sZW5ndGggPyB0aGlzLndyaXRlKGJ1ZikgOiAiIjsKICB9CiAgdmFyIEVSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFID0gZXJyb3JzQnJvd3Nlci5jb2Rlcy5FUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRTsKICBmdW5jdGlvbiBvbmNlJDEoY2FsbGJhY2spIHsKICAgIHZhciBjYWxsZWQgPSBmYWxzZTsKICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgaWYgKGNhbGxlZCkKICAgICAgICByZXR1cm47CiAgICAgIGNhbGxlZCA9IHRydWU7CiAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICAgIH0KICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJncyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBub29wJDEoKSB7CiAgfQogIGZ1bmN0aW9uIGlzUmVxdWVzdCQxKHN0cmVhbSkgewogICAgcmV0dXJuIHN0cmVhbS5zZXRIZWFkZXIgJiYgdHlwZW9mIHN0cmVhbS5hYm9ydCA9PT0gImZ1bmN0aW9uIjsKICB9CiAgZnVuY3Rpb24gZW9zJDEoc3RyZWFtLCBvcHRzLCBjYWxsYmFjaykgewogICAgaWYgKHR5cGVvZiBvcHRzID09PSAiZnVuY3Rpb24iKQogICAgICByZXR1cm4gZW9zJDEoc3RyZWFtLCBudWxsLCBvcHRzKTsKICAgIGlmICghb3B0cykKICAgICAgb3B0cyA9IHt9OwogICAgY2FsbGJhY2sgPSBvbmNlJDEoY2FsbGJhY2sgfHwgbm9vcCQxKTsKICAgIHZhciByZWFkYWJsZSA9IG9wdHMucmVhZGFibGUgfHwgb3B0cy5yZWFkYWJsZSAhPT0gZmFsc2UgJiYgc3RyZWFtLnJlYWRhYmxlOwogICAgdmFyIHdyaXRhYmxlID0gb3B0cy53cml0YWJsZSB8fCBvcHRzLndyaXRhYmxlICE9PSBmYWxzZSAmJiBzdHJlYW0ud3JpdGFibGU7CiAgICB2YXIgb25sZWdhY3lmaW5pc2ggPSBmdW5jdGlvbiBvbmxlZ2FjeWZpbmlzaDIoKSB7CiAgICAgIGlmICghc3RyZWFtLndyaXRhYmxlKQogICAgICAgIG9uZmluaXNoKCk7CiAgICB9OwogICAgdmFyIHdyaXRhYmxlRW5kZWQgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGUgJiYgc3RyZWFtLl93cml0YWJsZVN0YXRlLmZpbmlzaGVkOwogICAgdmFyIG9uZmluaXNoID0gZnVuY3Rpb24gb25maW5pc2gyKCkgewogICAgICB3cml0YWJsZSA9IGZhbHNlOwogICAgICB3cml0YWJsZUVuZGVkID0gdHJ1ZTsKICAgICAgaWYgKCFyZWFkYWJsZSkKICAgICAgICBjYWxsYmFjay5jYWxsKHN0cmVhbSk7CiAgICB9OwogICAgdmFyIHJlYWRhYmxlRW5kZWQgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGUgJiYgc3RyZWFtLl9yZWFkYWJsZVN0YXRlLmVuZEVtaXR0ZWQ7CiAgICB2YXIgb25lbmQyID0gZnVuY3Rpb24gb25lbmQzKCkgewogICAgICByZWFkYWJsZSA9IGZhbHNlOwogICAgICByZWFkYWJsZUVuZGVkID0gdHJ1ZTsKICAgICAgaWYgKCF3cml0YWJsZSkKICAgICAgICBjYWxsYmFjay5jYWxsKHN0cmVhbSk7CiAgICB9OwogICAgdmFyIG9uZXJyb3IgPSBmdW5jdGlvbiBvbmVycm9yMihlcnIpIHsKICAgICAgY2FsbGJhY2suY2FsbChzdHJlYW0sIGVycik7CiAgICB9OwogICAgdmFyIG9uY2xvc2UgPSBmdW5jdGlvbiBvbmNsb3NlMigpIHsKICAgICAgdmFyIGVycjsKICAgICAgaWYgKHJlYWRhYmxlICYmICFyZWFkYWJsZUVuZGVkKSB7CiAgICAgICAgaWYgKCFzdHJlYW0uX3JlYWRhYmxlU3RhdGUgfHwgIXN0cmVhbS5fcmVhZGFibGVTdGF0ZS5lbmRlZCkKICAgICAgICAgIGVyciA9IG5ldyBFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRSgpOwogICAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHN0cmVhbSwgZXJyKTsKICAgICAgfQogICAgICBpZiAod3JpdGFibGUgJiYgIXdyaXRhYmxlRW5kZWQpIHsKICAgICAgICBpZiAoIXN0cmVhbS5fd3JpdGFibGVTdGF0ZSB8fCAhc3RyZWFtLl93cml0YWJsZVN0YXRlLmVuZGVkKQogICAgICAgICAgZXJyID0gbmV3IEVSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFKCk7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwoc3RyZWFtLCBlcnIpOwogICAgICB9CiAgICB9OwogICAgdmFyIG9ucmVxdWVzdCA9IGZ1bmN0aW9uIG9ucmVxdWVzdDIoKSB7CiAgICAgIHN0cmVhbS5yZXEub24oImZpbmlzaCIsIG9uZmluaXNoKTsKICAgIH07CiAgICBpZiAoaXNSZXF1ZXN0JDEoc3RyZWFtKSkgewogICAgICBzdHJlYW0ub24oImNvbXBsZXRlIiwgb25maW5pc2gpOwogICAgICBzdHJlYW0ub24oImFib3J0Iiwgb25jbG9zZSk7CiAgICAgIGlmIChzdHJlYW0ucmVxKQogICAgICAgIG9ucmVxdWVzdCgpOwogICAgICBlbHNlCiAgICAgICAgc3RyZWFtLm9uKCJyZXF1ZXN0Iiwgb25yZXF1ZXN0KTsKICAgIH0gZWxzZSBpZiAod3JpdGFibGUgJiYgIXN0cmVhbS5fd3JpdGFibGVTdGF0ZSkgewogICAgICBzdHJlYW0ub24oImVuZCIsIG9ubGVnYWN5ZmluaXNoKTsKICAgICAgc3RyZWFtLm9uKCJjbG9zZSIsIG9ubGVnYWN5ZmluaXNoKTsKICAgIH0KICAgIHN0cmVhbS5vbigiZW5kIiwgb25lbmQyKTsKICAgIHN0cmVhbS5vbigiZmluaXNoIiwgb25maW5pc2gpOwogICAgaWYgKG9wdHMuZXJyb3IgIT09IGZhbHNlKQogICAgICBzdHJlYW0ub24oImVycm9yIiwgb25lcnJvcik7CiAgICBzdHJlYW0ub24oImNsb3NlIiwgb25jbG9zZSk7CiAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcigiY29tcGxldGUiLCBvbmZpbmlzaCk7CiAgICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcigiYWJvcnQiLCBvbmNsb3NlKTsKICAgICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCJyZXF1ZXN0Iiwgb25yZXF1ZXN0KTsKICAgICAgaWYgKHN0cmVhbS5yZXEpCiAgICAgICAgc3RyZWFtLnJlcS5yZW1vdmVMaXN0ZW5lcigiZmluaXNoIiwgb25maW5pc2gpOwogICAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoImVuZCIsIG9ubGVnYWN5ZmluaXNoKTsKICAgICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCJjbG9zZSIsIG9ubGVnYWN5ZmluaXNoKTsKICAgICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCJmaW5pc2giLCBvbmZpbmlzaCk7CiAgICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcigiZW5kIiwgb25lbmQyKTsKICAgICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCJlcnJvciIsIG9uZXJyb3IpOwogICAgICBzdHJlYW0ucmVtb3ZlTGlzdGVuZXIoImNsb3NlIiwgb25jbG9zZSk7CiAgICB9OwogIH0KICB2YXIgZW5kT2ZTdHJlYW0gPSBlb3MkMTsKICB2YXIgX09iamVjdCRzZXRQcm90b3R5cGVPOwogIGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICAgIGlmIChrZXkgaW4gb2JqKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG9ialtrZXldID0gdmFsdWU7CiAgICB9CiAgICByZXR1cm4gb2JqOwogIH0KICB2YXIgZmluaXNoZWQgPSBlbmRPZlN0cmVhbTsKICB2YXIga0xhc3RSZXNvbHZlID0gU3ltYm9sKCJsYXN0UmVzb2x2ZSIpOwogIHZhciBrTGFzdFJlamVjdCA9IFN5bWJvbCgibGFzdFJlamVjdCIpOwogIHZhciBrRXJyb3IgPSBTeW1ib2woImVycm9yIik7CiAgdmFyIGtFbmRlZCA9IFN5bWJvbCgiZW5kZWQiKTsKICB2YXIga0xhc3RQcm9taXNlID0gU3ltYm9sKCJsYXN0UHJvbWlzZSIpOwogIHZhciBrSGFuZGxlUHJvbWlzZSA9IFN5bWJvbCgiaGFuZGxlUHJvbWlzZSIpOwogIHZhciBrU3RyZWFtID0gU3ltYm9sKCJzdHJlYW0iKTsKICBmdW5jdGlvbiBjcmVhdGVJdGVyUmVzdWx0KHZhbHVlLCBkb25lMikgewogICAgcmV0dXJuIHsKICAgICAgdmFsdWUsCiAgICAgIGRvbmU6IGRvbmUyCiAgICB9OwogIH0KICBmdW5jdGlvbiByZWFkQW5kUmVzb2x2ZShpdGVyKSB7CiAgICB2YXIgcmVzb2x2ZSA9IGl0ZXJba0xhc3RSZXNvbHZlXTsKICAgIGlmIChyZXNvbHZlICE9PSBudWxsKSB7CiAgICAgIHZhciBkYXRhID0gaXRlcltrU3RyZWFtXS5yZWFkKCk7CiAgICAgIGlmIChkYXRhICE9PSBudWxsKSB7CiAgICAgICAgaXRlcltrTGFzdFByb21pc2VdID0gbnVsbDsKICAgICAgICBpdGVyW2tMYXN0UmVzb2x2ZV0gPSBudWxsOwogICAgICAgIGl0ZXJba0xhc3RSZWplY3RdID0gbnVsbDsKICAgICAgICByZXNvbHZlKGNyZWF0ZUl0ZXJSZXN1bHQoZGF0YSwgZmFsc2UpKTsKICAgICAgfQogICAgfQogIH0KICBmdW5jdGlvbiBvblJlYWRhYmxlKGl0ZXIpIHsKICAgIHByb2Nlc3MubmV4dFRpY2socmVhZEFuZFJlc29sdmUsIGl0ZXIpOwogIH0KICBmdW5jdGlvbiB3cmFwRm9yTmV4dChsYXN0UHJvbWlzZSwgaXRlcikgewogICAgcmV0dXJuIGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgewogICAgICBsYXN0UHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChpdGVyW2tFbmRlZF0pIHsKICAgICAgICAgIHJlc29sdmUoY3JlYXRlSXRlclJlc3VsdCh2b2lkIDAsIHRydWUpKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaXRlcltrSGFuZGxlUHJvbWlzZV0ocmVzb2x2ZSwgcmVqZWN0KTsKICAgICAgfSwgcmVqZWN0KTsKICAgIH07CiAgfQogIHZhciBBc3luY0l0ZXJhdG9yUHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGZ1bmN0aW9uKCkgewogIH0pOwogIHZhciBSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3JQcm90b3R5cGUgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YoKF9PYmplY3Qkc2V0UHJvdG90eXBlTyA9IHsKICAgIGdldCBzdHJlYW0oKSB7CiAgICAgIHJldHVybiB0aGlzW2tTdHJlYW1dOwogICAgfSwKICAgIG5leHQ6IGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBlcnJvciA9IHRoaXNba0Vycm9yXTsKICAgICAgaWYgKGVycm9yICE9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgfQogICAgICBpZiAodGhpc1trRW5kZWRdKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHZvaWQgMCwgdHJ1ZSkpOwogICAgICB9CiAgICAgIGlmICh0aGlzW2tTdHJlYW1dLmRlc3Ryb3llZCkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGlmIChfdGhpc1trRXJyb3JdKSB7CiAgICAgICAgICAgICAgcmVqZWN0KF90aGlzW2tFcnJvcl0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc29sdmUoY3JlYXRlSXRlclJlc3VsdCh2b2lkIDAsIHRydWUpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdmFyIGxhc3RQcm9taXNlID0gdGhpc1trTGFzdFByb21pc2VdOwogICAgICB2YXIgcHJvbWlzZTsKICAgICAgaWYgKGxhc3RQcm9taXNlKSB7CiAgICAgICAgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHdyYXBGb3JOZXh0KGxhc3RQcm9taXNlLCB0aGlzKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGRhdGEgPSB0aGlzW2tTdHJlYW1dLnJlYWQoKTsKICAgICAgICBpZiAoZGF0YSAhPT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KGRhdGEsIGZhbHNlKSk7CiAgICAgICAgfQogICAgICAgIHByb21pc2UgPSBuZXcgUHJvbWlzZSh0aGlzW2tIYW5kbGVQcm9taXNlXSk7CiAgICAgIH0KICAgICAgdGhpc1trTGFzdFByb21pc2VdID0gcHJvbWlzZTsKICAgICAgcmV0dXJuIHByb21pc2U7CiAgICB9CiAgfSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3Qkc2V0UHJvdG90eXBlTywgU3ltYm9sLmFzeW5jSXRlcmF0b3IsIGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXM7CiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfT2JqZWN0JHNldFByb3RvdHlwZU8sICJyZXR1cm4iLCBmdW5jdGlvbiBfcmV0dXJuKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF90aGlzMltrU3RyZWFtXS5kZXN0cm95KG51bGwsIGZ1bmN0aW9uKGVycikgewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICByZXNvbHZlKGNyZWF0ZUl0ZXJSZXN1bHQodm9pZCAwLCB0cnVlKSk7CiAgICAgIH0pOwogICAgfSk7CiAgfSksIF9PYmplY3Qkc2V0UHJvdG90eXBlTyksIEFzeW5jSXRlcmF0b3JQcm90b3R5cGUpOwogIHZhciBjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3IkMSA9IGZ1bmN0aW9uIGNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvcjIoc3RyZWFtKSB7CiAgICB2YXIgX09iamVjdCRjcmVhdGU7CiAgICB2YXIgaXRlcmF0b3IgPSBPYmplY3QuY3JlYXRlKFJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvclByb3RvdHlwZSwgKF9PYmplY3QkY3JlYXRlID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfT2JqZWN0JGNyZWF0ZSwga1N0cmVhbSwgewogICAgICB2YWx1ZTogc3RyZWFtLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSksIF9kZWZpbmVQcm9wZXJ0eShfT2JqZWN0JGNyZWF0ZSwga0xhc3RSZXNvbHZlLCB7CiAgICAgIHZhbHVlOiBudWxsLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSksIF9kZWZpbmVQcm9wZXJ0eShfT2JqZWN0JGNyZWF0ZSwga0xhc3RSZWplY3QsIHsKICAgICAgdmFsdWU6IG51bGwsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLCBrRXJyb3IsIHsKICAgICAgdmFsdWU6IG51bGwsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLCBrRW5kZWQsIHsKICAgICAgdmFsdWU6IHN0cmVhbS5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSksIF9kZWZpbmVQcm9wZXJ0eShfT2JqZWN0JGNyZWF0ZSwga0hhbmRsZVByb21pc2UsIHsKICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciBkYXRhID0gaXRlcmF0b3Jba1N0cmVhbV0ucmVhZCgpOwogICAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgICBpdGVyYXRvcltrTGFzdFByb21pc2VdID0gbnVsbDsKICAgICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVzb2x2ZV0gPSBudWxsOwogICAgICAgICAgaXRlcmF0b3Jba0xhc3RSZWplY3RdID0gbnVsbDsKICAgICAgICAgIHJlc29sdmUoY3JlYXRlSXRlclJlc3VsdChkYXRhLCBmYWxzZSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpdGVyYXRvcltrTGFzdFJlc29sdmVdID0gcmVzb2x2ZTsKICAgICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVqZWN0XSA9IHJlamVjdDsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KSwgX09iamVjdCRjcmVhdGUpKTsKICAgIGl0ZXJhdG9yW2tMYXN0UHJvbWlzZV0gPSBudWxsOwogICAgZmluaXNoZWQoc3RyZWFtLCBmdW5jdGlvbihlcnIpIHsKICAgICAgaWYgKGVyciAmJiBlcnIuY29kZSAhPT0gIkVSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFIikgewogICAgICAgIHZhciByZWplY3QgPSBpdGVyYXRvcltrTGFzdFJlamVjdF07CiAgICAgICAgaWYgKHJlamVjdCAhPT0gbnVsbCkgewogICAgICAgICAgaXRlcmF0b3Jba0xhc3RQcm9taXNlXSA9IG51bGw7CiAgICAgICAgICBpdGVyYXRvcltrTGFzdFJlc29sdmVdID0gbnVsbDsKICAgICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVqZWN0XSA9IG51bGw7CiAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICB9CiAgICAgICAgaXRlcmF0b3Jba0Vycm9yXSA9IGVycjsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIHJlc29sdmUgPSBpdGVyYXRvcltrTGFzdFJlc29sdmVdOwogICAgICBpZiAocmVzb2x2ZSAhPT0gbnVsbCkgewogICAgICAgIGl0ZXJhdG9yW2tMYXN0UHJvbWlzZV0gPSBudWxsOwogICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVzb2x2ZV0gPSBudWxsOwogICAgICAgIGl0ZXJhdG9yW2tMYXN0UmVqZWN0XSA9IG51bGw7CiAgICAgICAgcmVzb2x2ZShjcmVhdGVJdGVyUmVzdWx0KHZvaWQgMCwgdHJ1ZSkpOwogICAgICB9CiAgICAgIGl0ZXJhdG9yW2tFbmRlZF0gPSB0cnVlOwogICAgfSk7CiAgICBzdHJlYW0ub24oInJlYWRhYmxlIiwgb25SZWFkYWJsZS5iaW5kKG51bGwsIGl0ZXJhdG9yKSk7CiAgICByZXR1cm4gaXRlcmF0b3I7CiAgfTsKICB2YXIgYXN5bmNfaXRlcmF0b3IgPSBjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3IkMTsKICB2YXIgZnJvbUJyb3dzZXIgPSBmdW5jdGlvbigpIHsKICAgIHRocm93IG5ldyBFcnJvcigiUmVhZGFibGUuZnJvbSBpcyBub3QgYXZhaWxhYmxlIGluIHRoZSBicm93c2VyIik7CiAgfTsKICBjb25zdCBSZWdpc3RyeSQ0ID0gX3JlZ2lzdHJ5OwogIFJlZ2lzdHJ5JDQuUmVhZGFibGUgPSBSZWFkYWJsZTsKICBSZWFkYWJsZS5SZWFkYWJsZVN0YXRlID0gUmVhZGFibGVTdGF0ZTsKICBldmVudHMuZXhwb3J0cy5FdmVudEVtaXR0ZXI7CiAgdmFyIEVFbGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uIEVFbGlzdGVuZXJDb3VudDIoZW1pdHRlciwgdHlwZSkgewogICAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJzKHR5cGUpLmxlbmd0aDsKICB9OwogIHZhciBTdHJlYW0kMSA9IHN0cmVhbUJyb3dzZXI7CiAgdmFyIEJ1ZmZlciRlID0gYnVmZmVyLkJ1ZmZlcjsKICB2YXIgT3VyVWludDhBcnJheSQxID0gZ2xvYmFsVGhpcy5VaW50OEFycmF5IHx8IGZ1bmN0aW9uKCkgewogIH07CiAgZnVuY3Rpb24gX3VpbnQ4QXJyYXlUb0J1ZmZlciQxKGNodW5rKSB7CiAgICByZXR1cm4gQnVmZmVyJGUuZnJvbShjaHVuayk7CiAgfQogIGZ1bmN0aW9uIF9pc1VpbnQ4QXJyYXkkMShvYmopIHsKICAgIHJldHVybiBCdWZmZXIkZS5pc0J1ZmZlcihvYmopIHx8IG9iaiBpbnN0YW5jZW9mIE91clVpbnQ4QXJyYXkkMTsKICB9CiAgdmFyIGRlYnVnVXRpbCA9IHJlcXVpcmUkJDQ7CiAgdmFyIGRlYnVnOwogIGlmIChkZWJ1Z1V0aWwgJiYgZGVidWdVdGlsLmRlYnVnbG9nKSB7CiAgICBkZWJ1ZyA9IGRlYnVnVXRpbC5kZWJ1Z2xvZygic3RyZWFtIik7CiAgfSBlbHNlIHsKICAgIGRlYnVnID0gZnVuY3Rpb24gZGVidWcyKCkgewogICAgfTsKICB9CiAgdmFyIEJ1ZmZlckxpc3QgPSBidWZmZXJfbGlzdDsKICB2YXIgZGVzdHJveUltcGwkMSA9IGRlc3Ryb3lfMTsKICB2YXIgX3JlcXVpcmUkMSA9IHN0YXRlLCBnZXRIaWdoV2F0ZXJNYXJrJDEgPSBfcmVxdWlyZSQxLmdldEhpZ2hXYXRlck1hcms7CiAgdmFyIF9yZXF1aXJlJGNvZGVzJDMgPSBlcnJvcnNCcm93c2VyLmNvZGVzLCBFUlJfSU5WQUxJRF9BUkdfVFlQRSQxID0gX3JlcXVpcmUkY29kZXMkMy5FUlJfSU5WQUxJRF9BUkdfVFlQRSwgRVJSX1NUUkVBTV9QVVNIX0FGVEVSX0VPRiA9IF9yZXF1aXJlJGNvZGVzJDMuRVJSX1NUUkVBTV9QVVNIX0FGVEVSX0VPRiwgRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQkMiA9IF9yZXF1aXJlJGNvZGVzJDMuRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQsIEVSUl9TVFJFQU1fVU5TSElGVF9BRlRFUl9FTkRfRVZFTlQgPSBfcmVxdWlyZSRjb2RlcyQzLkVSUl9TVFJFQU1fVU5TSElGVF9BRlRFUl9FTkRfRVZFTlQ7CiAgdmFyIFN0cmluZ0RlY29kZXI7CiAgdmFyIGNyZWF0ZVJlYWRhYmxlU3RyZWFtQXN5bmNJdGVyYXRvcjsKICB2YXIgZnJvbTsKICBpbmhlcml0c19icm93c2VyLmV4cG9ydHMoUmVhZGFibGUsIFN0cmVhbSQxKTsKICB2YXIgZXJyb3JPckRlc3Ryb3kkMSA9IGRlc3Ryb3lJbXBsJDEuZXJyb3JPckRlc3Ryb3k7CiAgdmFyIGtQcm94eUV2ZW50cyA9IFsiZXJyb3IiLCAiY2xvc2UiLCAiZGVzdHJveSIsICJwYXVzZSIsICJyZXN1bWUiXTsKICBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIoZW1pdHRlciwgZXZlbnQsIGZuKSB7CiAgICBpZiAodHlwZW9mIGVtaXR0ZXIucHJlcGVuZExpc3RlbmVyID09PSAiZnVuY3Rpb24iKQogICAgICByZXR1cm4gZW1pdHRlci5wcmVwZW5kTGlzdGVuZXIoZXZlbnQsIGZuKTsKICAgIGlmICghZW1pdHRlci5fZXZlbnRzIHx8ICFlbWl0dGVyLl9ldmVudHNbZXZlbnRdKQogICAgICBlbWl0dGVyLm9uKGV2ZW50LCBmbik7CiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGVtaXR0ZXIuX2V2ZW50c1tldmVudF0pKQogICAgICBlbWl0dGVyLl9ldmVudHNbZXZlbnRdLnVuc2hpZnQoZm4pOwogICAgZWxzZQogICAgICBlbWl0dGVyLl9ldmVudHNbZXZlbnRdID0gW2ZuLCBlbWl0dGVyLl9ldmVudHNbZXZlbnRdXTsKICB9CiAgZnVuY3Rpb24gUmVhZGFibGVTdGF0ZShvcHRpb25zLCBzdHJlYW0sIGlzRHVwbGV4KSB7CiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgIGlmICh0eXBlb2YgaXNEdXBsZXggIT09ICJib29sZWFuIikKICAgICAgaXNEdXBsZXggPSBzdHJlYW0gaW5zdGFuY2VvZiBSZWdpc3RyeSQ0LkR1cGxleDsKICAgIHRoaXMub2JqZWN0TW9kZSA9ICEhb3B0aW9ucy5vYmplY3RNb2RlOwogICAgaWYgKGlzRHVwbGV4KQogICAgICB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLnJlYWRhYmxlT2JqZWN0TW9kZTsKICAgIHRoaXMuaGlnaFdhdGVyTWFyayA9IGdldEhpZ2hXYXRlck1hcmskMSh0aGlzLCBvcHRpb25zLCAicmVhZGFibGVIaWdoV2F0ZXJNYXJrIiwgaXNEdXBsZXgpOwogICAgdGhpcy5idWZmZXIgPSBuZXcgQnVmZmVyTGlzdCgpOwogICAgdGhpcy5sZW5ndGggPSAwOwogICAgdGhpcy5waXBlcyA9IG51bGw7CiAgICB0aGlzLnBpcGVzQ291bnQgPSAwOwogICAgdGhpcy5mbG93aW5nID0gbnVsbDsKICAgIHRoaXMuZW5kZWQgPSBmYWxzZTsKICAgIHRoaXMuZW5kRW1pdHRlZCA9IGZhbHNlOwogICAgdGhpcy5yZWFkaW5nID0gZmFsc2U7CiAgICB0aGlzLnN5bmMgPSB0cnVlOwogICAgdGhpcy5uZWVkUmVhZGFibGUgPSBmYWxzZTsKICAgIHRoaXMuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7CiAgICB0aGlzLnJlYWRhYmxlTGlzdGVuaW5nID0gZmFsc2U7CiAgICB0aGlzLnJlc3VtZVNjaGVkdWxlZCA9IGZhbHNlOwogICAgdGhpcy5wYXVzZWQgPSB0cnVlOwogICAgdGhpcy5lbWl0Q2xvc2UgPSBvcHRpb25zLmVtaXRDbG9zZSAhPT0gZmFsc2U7CiAgICB0aGlzLmF1dG9EZXN0cm95ID0gISFvcHRpb25zLmF1dG9EZXN0cm95OwogICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTsKICAgIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgInV0ZjgiOwogICAgdGhpcy5hd2FpdERyYWluID0gMDsKICAgIHRoaXMucmVhZGluZ01vcmUgPSBmYWxzZTsKICAgIHRoaXMuZGVjb2RlciA9IG51bGw7CiAgICB0aGlzLmVuY29kaW5nID0gbnVsbDsKICAgIGlmIChvcHRpb25zLmVuY29kaW5nKSB7CiAgICAgIGlmICghU3RyaW5nRGVjb2RlcikKICAgICAgICBTdHJpbmdEZWNvZGVyID0gc3RyaW5nX2RlY29kZXIuU3RyaW5nRGVjb2RlcjsKICAgICAgdGhpcy5kZWNvZGVyID0gbmV3IFN0cmluZ0RlY29kZXIob3B0aW9ucy5lbmNvZGluZyk7CiAgICAgIHRoaXMuZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nOwogICAgfQogIH0KICBmdW5jdGlvbiBSZWFkYWJsZShvcHRpb25zKSB7CiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVhZGFibGUpKQogICAgICByZXR1cm4gbmV3IFJlYWRhYmxlKG9wdGlvbnMpOwogICAgdmFyIGlzRHVwbGV4ID0gdGhpcyBpbnN0YW5jZW9mIFJlZ2lzdHJ5JDQuRHVwbGV4OwogICAgdGhpcy5fcmVhZGFibGVTdGF0ZSA9IG5ldyBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMsIGlzRHVwbGV4KTsKICAgIHRoaXMucmVhZGFibGUgPSB0cnVlOwogICAgaWYgKG9wdGlvbnMpIHsKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnJlYWQgPT09ICJmdW5jdGlvbiIpCiAgICAgICAgdGhpcy5fcmVhZCA9IG9wdGlvbnMucmVhZDsKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmRlc3Ryb3kgPT09ICJmdW5jdGlvbiIpCiAgICAgICAgdGhpcy5fZGVzdHJveSA9IG9wdGlvbnMuZGVzdHJveTsKICAgIH0KICAgIFN0cmVhbSQxLmNhbGwodGhpcyk7CiAgfQogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWFkYWJsZS5wcm90b3R5cGUsICJkZXN0cm95ZWQiLCB7CiAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZDsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICBpZiAoIXRoaXMuX3JlYWRhYmxlU3RhdGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTsKICAgIH0KICB9KTsKICBSZWFkYWJsZS5wcm90b3R5cGUuZGVzdHJveSA9IGRlc3Ryb3lJbXBsJDEuZGVzdHJveTsKICBSZWFkYWJsZS5wcm90b3R5cGUuX3VuZGVzdHJveSA9IGRlc3Ryb3lJbXBsJDEudW5kZXN0cm95OwogIFJlYWRhYmxlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uKGVyciwgY2IpIHsKICAgIGNiKGVycik7CiAgfTsKICBSZWFkYWJsZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZykgewogICAgdmFyIHN0YXRlMiA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgICB2YXIgc2tpcENodW5rQ2hlY2s7CiAgICBpZiAoIXN0YXRlMi5vYmplY3RNb2RlKSB7CiAgICAgIGlmICh0eXBlb2YgY2h1bmsgPT09ICJzdHJpbmciKSB7CiAgICAgICAgZW5jb2RpbmcgPSBlbmNvZGluZyB8fCBzdGF0ZTIuZGVmYXVsdEVuY29kaW5nOwogICAgICAgIGlmIChlbmNvZGluZyAhPT0gc3RhdGUyLmVuY29kaW5nKSB7CiAgICAgICAgICBjaHVuayA9IEJ1ZmZlciRlLmZyb20oY2h1bmssIGVuY29kaW5nKTsKICAgICAgICAgIGVuY29kaW5nID0gIiI7CiAgICAgICAgfQogICAgICAgIHNraXBDaHVua0NoZWNrID0gdHJ1ZTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgc2tpcENodW5rQ2hlY2sgPSB0cnVlOwogICAgfQogICAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgY2h1bmssIGVuY29kaW5nLCBmYWxzZSwgc2tpcENodW5rQ2hlY2spOwogIH07CiAgUmVhZGFibGUucHJvdG90eXBlLnVuc2hpZnQgPSBmdW5jdGlvbihjaHVuaykgewogICAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgY2h1bmssIG51bGwsIHRydWUsIGZhbHNlKTsKICB9OwogIGZ1bmN0aW9uIHJlYWRhYmxlQWRkQ2h1bmsoc3RyZWFtLCBjaHVuaywgZW5jb2RpbmcsIGFkZFRvRnJvbnQsIHNraXBDaHVua0NoZWNrKSB7CiAgICBkZWJ1ZygicmVhZGFibGVBZGRDaHVuayIsIGNodW5rKTsKICAgIHZhciBzdGF0ZTIgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CiAgICBpZiAoY2h1bmsgPT09IG51bGwpIHsKICAgICAgc3RhdGUyLnJlYWRpbmcgPSBmYWxzZTsKICAgICAgb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlMik7CiAgICB9IGVsc2UgewogICAgICB2YXIgZXI7CiAgICAgIGlmICghc2tpcENodW5rQ2hlY2spCiAgICAgICAgZXIgPSBjaHVua0ludmFsaWQoc3RhdGUyLCBjaHVuayk7CiAgICAgIGlmIChlcikgewogICAgICAgIGVycm9yT3JEZXN0cm95JDEoc3RyZWFtLCBlcik7CiAgICAgIH0gZWxzZSBpZiAoc3RhdGUyLm9iamVjdE1vZGUgfHwgY2h1bmsgJiYgY2h1bmsubGVuZ3RoID4gMCkgewogICAgICAgIGlmICh0eXBlb2YgY2h1bmsgIT09ICJzdHJpbmciICYmICFzdGF0ZTIub2JqZWN0TW9kZSAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY2h1bmspICE9PSBCdWZmZXIkZS5wcm90b3R5cGUpIHsKICAgICAgICAgIGNodW5rID0gX3VpbnQ4QXJyYXlUb0J1ZmZlciQxKGNodW5rKTsKICAgICAgICB9CiAgICAgICAgaWYgKGFkZFRvRnJvbnQpIHsKICAgICAgICAgIGlmIChzdGF0ZTIuZW5kRW1pdHRlZCkKICAgICAgICAgICAgZXJyb3JPckRlc3Ryb3kkMShzdHJlYW0sIG5ldyBFUlJfU1RSRUFNX1VOU0hJRlRfQUZURVJfRU5EX0VWRU5UKCkpOwogICAgICAgICAgZWxzZQogICAgICAgICAgICBhZGRDaHVuayhzdHJlYW0sIHN0YXRlMiwgY2h1bmssIHRydWUpOwogICAgICAgIH0gZWxzZSBpZiAoc3RhdGUyLmVuZGVkKSB7CiAgICAgICAgICBlcnJvck9yRGVzdHJveSQxKHN0cmVhbSwgbmV3IEVSUl9TVFJFQU1fUFVTSF9BRlRFUl9FT0YoKSk7CiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZTIuZGVzdHJveWVkKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0YXRlMi5yZWFkaW5nID0gZmFsc2U7CiAgICAgICAgICBpZiAoc3RhdGUyLmRlY29kZXIgJiYgIWVuY29kaW5nKSB7CiAgICAgICAgICAgIGNodW5rID0gc3RhdGUyLmRlY29kZXIud3JpdGUoY2h1bmspOwogICAgICAgICAgICBpZiAoc3RhdGUyLm9iamVjdE1vZGUgfHwgY2h1bmsubGVuZ3RoICE9PSAwKQogICAgICAgICAgICAgIGFkZENodW5rKHN0cmVhbSwgc3RhdGUyLCBjaHVuaywgZmFsc2UpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlMik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhZGRDaHVuayhzdHJlYW0sIHN0YXRlMiwgY2h1bmssIGZhbHNlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoIWFkZFRvRnJvbnQpIHsKICAgICAgICBzdGF0ZTIucmVhZGluZyA9IGZhbHNlOwogICAgICAgIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZTIpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gIXN0YXRlMi5lbmRlZCAmJiAoc3RhdGUyLmxlbmd0aCA8IHN0YXRlMi5oaWdoV2F0ZXJNYXJrIHx8IHN0YXRlMi5sZW5ndGggPT09IDApOwogIH0KICBmdW5jdGlvbiBhZGRDaHVuayhzdHJlYW0sIHN0YXRlMiwgY2h1bmssIGFkZFRvRnJvbnQpIHsKICAgIGlmIChzdGF0ZTIuZmxvd2luZyAmJiBzdGF0ZTIubGVuZ3RoID09PSAwICYmICFzdGF0ZTIuc3luYykgewogICAgICBzdGF0ZTIuYXdhaXREcmFpbiA9IDA7CiAgICAgIHN0cmVhbS5lbWl0KCJkYXRhIiwgY2h1bmspOwogICAgfSBlbHNlIHsKICAgICAgc3RhdGUyLmxlbmd0aCArPSBzdGF0ZTIub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7CiAgICAgIGlmIChhZGRUb0Zyb250KQogICAgICAgIHN0YXRlMi5idWZmZXIudW5zaGlmdChjaHVuayk7CiAgICAgIGVsc2UKICAgICAgICBzdGF0ZTIuYnVmZmVyLnB1c2goY2h1bmspOwogICAgICBpZiAoc3RhdGUyLm5lZWRSZWFkYWJsZSkKICAgICAgICBlbWl0UmVhZGFibGUoc3RyZWFtKTsKICAgIH0KICAgIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZTIpOwogIH0KICBmdW5jdGlvbiBjaHVua0ludmFsaWQoc3RhdGUyLCBjaHVuaykgewogICAgdmFyIGVyOwogICAgaWYgKCFfaXNVaW50OEFycmF5JDEoY2h1bmspICYmIHR5cGVvZiBjaHVuayAhPT0gInN0cmluZyIgJiYgY2h1bmsgIT09IHZvaWQgMCAmJiAhc3RhdGUyLm9iamVjdE1vZGUpIHsKICAgICAgZXIgPSBuZXcgRVJSX0lOVkFMSURfQVJHX1RZUEUkMSgiY2h1bmsiLCBbInN0cmluZyIsICJCdWZmZXIiLCAiVWludDhBcnJheSJdLCBjaHVuayk7CiAgICB9CiAgICByZXR1cm4gZXI7CiAgfQogIFJlYWRhYmxlLnByb3RvdHlwZS5pc1BhdXNlZCA9IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9PT0gZmFsc2U7CiAgfTsKICBSZWFkYWJsZS5wcm90b3R5cGUuc2V0RW5jb2RpbmcgPSBmdW5jdGlvbihlbmMpIHsKICAgIGlmICghU3RyaW5nRGVjb2RlcikKICAgICAgU3RyaW5nRGVjb2RlciA9IHN0cmluZ19kZWNvZGVyLlN0cmluZ0RlY29kZXI7CiAgICB2YXIgZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKGVuYyk7CiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIgPSBkZWNvZGVyOwogICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmNvZGluZyA9IHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVjb2Rlci5lbmNvZGluZzsKICAgIHZhciBwID0gdGhpcy5fcmVhZGFibGVTdGF0ZS5idWZmZXIuaGVhZDsKICAgIHZhciBjb250ZW50ID0gIiI7CiAgICB3aGlsZSAocCAhPT0gbnVsbCkgewogICAgICBjb250ZW50ICs9IGRlY29kZXIud3JpdGUocC5kYXRhKTsKICAgICAgcCA9IHAubmV4dDsKICAgIH0KICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyLmNsZWFyKCk7CiAgICBpZiAoY29udGVudCAhPT0gIiIpCiAgICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuYnVmZmVyLnB1c2goY29udGVudCk7CiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmxlbmd0aCA9IGNvbnRlbnQubGVuZ3RoOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKICB2YXIgTUFYX0hXTSA9IDEwNzM3NDE4MjQ7CiAgZnVuY3Rpb24gY29tcHV0ZU5ld0hpZ2hXYXRlck1hcmsobikgewogICAgaWYgKG4gPj0gTUFYX0hXTSkgewogICAgICBuID0gTUFYX0hXTTsKICAgIH0gZWxzZSB7CiAgICAgIG4tLTsKICAgICAgbiB8PSBuID4+PiAxOwogICAgICBuIHw9IG4gPj4+IDI7CiAgICAgIG4gfD0gbiA+Pj4gNDsKICAgICAgbiB8PSBuID4+PiA4OwogICAgICBuIHw9IG4gPj4+IDE2OwogICAgICBuKys7CiAgICB9CiAgICByZXR1cm4gbjsKICB9CiAgZnVuY3Rpb24gaG93TXVjaFRvUmVhZChuLCBzdGF0ZTIpIHsKICAgIGlmIChuIDw9IDAgfHwgc3RhdGUyLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZTIuZW5kZWQpCiAgICAgIHJldHVybiAwOwogICAgaWYgKHN0YXRlMi5vYmplY3RNb2RlKQogICAgICByZXR1cm4gMTsKICAgIGlmIChuICE9PSBuKSB7CiAgICAgIGlmIChzdGF0ZTIuZmxvd2luZyAmJiBzdGF0ZTIubGVuZ3RoKQogICAgICAgIHJldHVybiBzdGF0ZTIuYnVmZmVyLmhlYWQuZGF0YS5sZW5ndGg7CiAgICAgIGVsc2UKICAgICAgICByZXR1cm4gc3RhdGUyLmxlbmd0aDsKICAgIH0KICAgIGlmIChuID4gc3RhdGUyLmhpZ2hXYXRlck1hcmspCiAgICAgIHN0YXRlMi5oaWdoV2F0ZXJNYXJrID0gY29tcHV0ZU5ld0hpZ2hXYXRlck1hcmsobik7CiAgICBpZiAobiA8PSBzdGF0ZTIubGVuZ3RoKQogICAgICByZXR1cm4gbjsKICAgIGlmICghc3RhdGUyLmVuZGVkKSB7CiAgICAgIHN0YXRlMi5uZWVkUmVhZGFibGUgPSB0cnVlOwogICAgICByZXR1cm4gMDsKICAgIH0KICAgIHJldHVybiBzdGF0ZTIubGVuZ3RoOwogIH0KICBSZWFkYWJsZS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uKG4pIHsKICAgIGRlYnVnKCJyZWFkIiwgbik7CiAgICBuID0gcGFyc2VJbnQobiwgMTApOwogICAgdmFyIHN0YXRlMiA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgICB2YXIgbk9yaWcgPSBuOwogICAgaWYgKG4gIT09IDApCiAgICAgIHN0YXRlMi5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTsKICAgIGlmIChuID09PSAwICYmIHN0YXRlMi5uZWVkUmVhZGFibGUgJiYgKChzdGF0ZTIuaGlnaFdhdGVyTWFyayAhPT0gMCA/IHN0YXRlMi5sZW5ndGggPj0gc3RhdGUyLmhpZ2hXYXRlck1hcmsgOiBzdGF0ZTIubGVuZ3RoID4gMCkgfHwgc3RhdGUyLmVuZGVkKSkgewogICAgICBkZWJ1ZygicmVhZDogZW1pdFJlYWRhYmxlIiwgc3RhdGUyLmxlbmd0aCwgc3RhdGUyLmVuZGVkKTsKICAgICAgaWYgKHN0YXRlMi5sZW5ndGggPT09IDAgJiYgc3RhdGUyLmVuZGVkKQogICAgICAgIGVuZFJlYWRhYmxlKHRoaXMpOwogICAgICBlbHNlCiAgICAgICAgZW1pdFJlYWRhYmxlKHRoaXMpOwogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICAgIG4gPSBob3dNdWNoVG9SZWFkKG4sIHN0YXRlMik7CiAgICBpZiAobiA9PT0gMCAmJiBzdGF0ZTIuZW5kZWQpIHsKICAgICAgaWYgKHN0YXRlMi5sZW5ndGggPT09IDApCiAgICAgICAgZW5kUmVhZGFibGUodGhpcyk7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgdmFyIGRvUmVhZCA9IHN0YXRlMi5uZWVkUmVhZGFibGU7CiAgICBkZWJ1ZygibmVlZCByZWFkYWJsZSIsIGRvUmVhZCk7CiAgICBpZiAoc3RhdGUyLmxlbmd0aCA9PT0gMCB8fCBzdGF0ZTIubGVuZ3RoIC0gbiA8IHN0YXRlMi5oaWdoV2F0ZXJNYXJrKSB7CiAgICAgIGRvUmVhZCA9IHRydWU7CiAgICAgIGRlYnVnKCJsZW5ndGggbGVzcyB0aGFuIHdhdGVybWFyayIsIGRvUmVhZCk7CiAgICB9CiAgICBpZiAoc3RhdGUyLmVuZGVkIHx8IHN0YXRlMi5yZWFkaW5nKSB7CiAgICAgIGRvUmVhZCA9IGZhbHNlOwogICAgICBkZWJ1ZygicmVhZGluZyBvciBlbmRlZCIsIGRvUmVhZCk7CiAgICB9IGVsc2UgaWYgKGRvUmVhZCkgewogICAgICBkZWJ1ZygiZG8gcmVhZCIpOwogICAgICBzdGF0ZTIucmVhZGluZyA9IHRydWU7CiAgICAgIHN0YXRlMi5zeW5jID0gdHJ1ZTsKICAgICAgaWYgKHN0YXRlMi5sZW5ndGggPT09IDApCiAgICAgICAgc3RhdGUyLm5lZWRSZWFkYWJsZSA9IHRydWU7CiAgICAgIHRoaXMuX3JlYWQoc3RhdGUyLmhpZ2hXYXRlck1hcmspOwogICAgICBzdGF0ZTIuc3luYyA9IGZhbHNlOwogICAgICBpZiAoIXN0YXRlMi5yZWFkaW5nKQogICAgICAgIG4gPSBob3dNdWNoVG9SZWFkKG5PcmlnLCBzdGF0ZTIpOwogICAgfQogICAgdmFyIHJldDsKICAgIGlmIChuID4gMCkKICAgICAgcmV0ID0gZnJvbUxpc3Qobiwgc3RhdGUyKTsKICAgIGVsc2UKICAgICAgcmV0ID0gbnVsbDsKICAgIGlmIChyZXQgPT09IG51bGwpIHsKICAgICAgc3RhdGUyLm5lZWRSZWFkYWJsZSA9IHN0YXRlMi5sZW5ndGggPD0gc3RhdGUyLmhpZ2hXYXRlck1hcms7CiAgICAgIG4gPSAwOwogICAgfSBlbHNlIHsKICAgICAgc3RhdGUyLmxlbmd0aCAtPSBuOwogICAgICBzdGF0ZTIuYXdhaXREcmFpbiA9IDA7CiAgICB9CiAgICBpZiAoc3RhdGUyLmxlbmd0aCA9PT0gMCkgewogICAgICBpZiAoIXN0YXRlMi5lbmRlZCkKICAgICAgICBzdGF0ZTIubmVlZFJlYWRhYmxlID0gdHJ1ZTsKICAgICAgaWYgKG5PcmlnICE9PSBuICYmIHN0YXRlMi5lbmRlZCkKICAgICAgICBlbmRSZWFkYWJsZSh0aGlzKTsKICAgIH0KICAgIGlmIChyZXQgIT09IG51bGwpCiAgICAgIHRoaXMuZW1pdCgiZGF0YSIsIHJldCk7CiAgICByZXR1cm4gcmV0OwogIH07CiAgZnVuY3Rpb24gb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlMikgewogICAgZGVidWcoIm9uRW9mQ2h1bmsiKTsKICAgIGlmIChzdGF0ZTIuZW5kZWQpCiAgICAgIHJldHVybjsKICAgIGlmIChzdGF0ZTIuZGVjb2RlcikgewogICAgICB2YXIgY2h1bmsgPSBzdGF0ZTIuZGVjb2Rlci5lbmQoKTsKICAgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkgewogICAgICAgIHN0YXRlMi5idWZmZXIucHVzaChjaHVuayk7CiAgICAgICAgc3RhdGUyLmxlbmd0aCArPSBzdGF0ZTIub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7CiAgICAgIH0KICAgIH0KICAgIHN0YXRlMi5lbmRlZCA9IHRydWU7CiAgICBpZiAoc3RhdGUyLnN5bmMpIHsKICAgICAgZW1pdFJlYWRhYmxlKHN0cmVhbSk7CiAgICB9IGVsc2UgewogICAgICBzdGF0ZTIubmVlZFJlYWRhYmxlID0gZmFsc2U7CiAgICAgIGlmICghc3RhdGUyLmVtaXR0ZWRSZWFkYWJsZSkgewogICAgICAgIHN0YXRlMi5lbWl0dGVkUmVhZGFibGUgPSB0cnVlOwogICAgICAgIGVtaXRSZWFkYWJsZV8oc3RyZWFtKTsKICAgICAgfQogICAgfQogIH0KICBmdW5jdGlvbiBlbWl0UmVhZGFibGUoc3RyZWFtKSB7CiAgICB2YXIgc3RhdGUyID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlOwogICAgZGVidWcoImVtaXRSZWFkYWJsZSIsIHN0YXRlMi5uZWVkUmVhZGFibGUsIHN0YXRlMi5lbWl0dGVkUmVhZGFibGUpOwogICAgc3RhdGUyLm5lZWRSZWFkYWJsZSA9IGZhbHNlOwogICAgaWYgKCFzdGF0ZTIuZW1pdHRlZFJlYWRhYmxlKSB7CiAgICAgIGRlYnVnKCJlbWl0UmVhZGFibGUiLCBzdGF0ZTIuZmxvd2luZyk7CiAgICAgIHN0YXRlMi5lbWl0dGVkUmVhZGFibGUgPSB0cnVlOwogICAgICBwcm9jZXNzLm5leHRUaWNrKGVtaXRSZWFkYWJsZV8sIHN0cmVhbSk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGVtaXRSZWFkYWJsZV8oc3RyZWFtKSB7CiAgICB2YXIgc3RhdGUyID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlOwogICAgZGVidWcoImVtaXRSZWFkYWJsZV8iLCBzdGF0ZTIuZGVzdHJveWVkLCBzdGF0ZTIubGVuZ3RoLCBzdGF0ZTIuZW5kZWQpOwogICAgaWYgKCFzdGF0ZTIuZGVzdHJveWVkICYmIChzdGF0ZTIubGVuZ3RoIHx8IHN0YXRlMi5lbmRlZCkpIHsKICAgICAgc3RyZWFtLmVtaXQoInJlYWRhYmxlIik7CiAgICAgIHN0YXRlMi5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTsKICAgIH0KICAgIHN0YXRlMi5uZWVkUmVhZGFibGUgPSAhc3RhdGUyLmZsb3dpbmcgJiYgIXN0YXRlMi5lbmRlZCAmJiBzdGF0ZTIubGVuZ3RoIDw9IHN0YXRlMi5oaWdoV2F0ZXJNYXJrOwogICAgZmxvdyhzdHJlYW0pOwogIH0KICBmdW5jdGlvbiBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUyKSB7CiAgICBpZiAoIXN0YXRlMi5yZWFkaW5nTW9yZSkgewogICAgICBzdGF0ZTIucmVhZGluZ01vcmUgPSB0cnVlOwogICAgICBwcm9jZXNzLm5leHRUaWNrKG1heWJlUmVhZE1vcmVfLCBzdHJlYW0sIHN0YXRlMik7CiAgICB9CiAgfQogIGZ1bmN0aW9uIG1heWJlUmVhZE1vcmVfKHN0cmVhbSwgc3RhdGUyKSB7CiAgICB3aGlsZSAoIXN0YXRlMi5yZWFkaW5nICYmICFzdGF0ZTIuZW5kZWQgJiYgKHN0YXRlMi5sZW5ndGggPCBzdGF0ZTIuaGlnaFdhdGVyTWFyayB8fCBzdGF0ZTIuZmxvd2luZyAmJiBzdGF0ZTIubGVuZ3RoID09PSAwKSkgewogICAgICB2YXIgbGVuMiA9IHN0YXRlMi5sZW5ndGg7CiAgICAgIGRlYnVnKCJtYXliZVJlYWRNb3JlIHJlYWQgMCIpOwogICAgICBzdHJlYW0ucmVhZCgwKTsKICAgICAgaWYgKGxlbjIgPT09IHN0YXRlMi5sZW5ndGgpCiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBzdGF0ZTIucmVhZGluZ01vcmUgPSBmYWxzZTsKICB9CiAgUmVhZGFibGUucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24obikgewogICAgZXJyb3JPckRlc3Ryb3kkMSh0aGlzLCBuZXcgRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQkMigiX3JlYWQoKSIpKTsKICB9OwogIFJlYWRhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24oZGVzdCwgcGlwZU9wdHMpIHsKICAgIHZhciBzcmMgPSB0aGlzOwogICAgdmFyIHN0YXRlMiA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgICBzd2l0Y2ggKHN0YXRlMi5waXBlc0NvdW50KSB7CiAgICAgIGNhc2UgMDoKICAgICAgICBzdGF0ZTIucGlwZXMgPSBkZXN0OwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIDE6CiAgICAgICAgc3RhdGUyLnBpcGVzID0gW3N0YXRlMi5waXBlcywgZGVzdF07CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgc3RhdGUyLnBpcGVzLnB1c2goZGVzdCk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgICBzdGF0ZTIucGlwZXNDb3VudCArPSAxOwogICAgZGVidWcoInBpcGUgY291bnQ9JWQgb3B0cz0laiIsIHN0YXRlMi5waXBlc0NvdW50LCBwaXBlT3B0cyk7CiAgICB2YXIgZG9FbmQgPSAoIXBpcGVPcHRzIHx8IHBpcGVPcHRzLmVuZCAhPT0gZmFsc2UpICYmIGRlc3QgIT09IHByb2Nlc3Muc3Rkb3V0ICYmIGRlc3QgIT09IHByb2Nlc3Muc3RkZXJyOwogICAgdmFyIGVuZEZuID0gZG9FbmQgPyBvbmVuZDIgOiB1bnBpcGU7CiAgICBpZiAoc3RhdGUyLmVuZEVtaXR0ZWQpCiAgICAgIHByb2Nlc3MubmV4dFRpY2soZW5kRm4pOwogICAgZWxzZQogICAgICBzcmMub25jZSgiZW5kIiwgZW5kRm4pOwogICAgZGVzdC5vbigidW5waXBlIiwgb251bnBpcGUpOwogICAgZnVuY3Rpb24gb251bnBpcGUocmVhZGFibGUsIHVucGlwZUluZm8pIHsKICAgICAgZGVidWcoIm9udW5waXBlIik7CiAgICAgIGlmIChyZWFkYWJsZSA9PT0gc3JjKSB7CiAgICAgICAgaWYgKHVucGlwZUluZm8gJiYgdW5waXBlSW5mby5oYXNVbnBpcGVkID09PSBmYWxzZSkgewogICAgICAgICAgdW5waXBlSW5mby5oYXNVbnBpcGVkID0gdHJ1ZTsKICAgICAgICAgIGNsZWFudXAoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIG9uZW5kMigpIHsKICAgICAgZGVidWcoIm9uZW5kIik7CiAgICAgIGRlc3QuZW5kKCk7CiAgICB9CiAgICB2YXIgb25kcmFpbiA9IHBpcGVPbkRyYWluKHNyYyk7CiAgICBkZXN0Lm9uKCJkcmFpbiIsIG9uZHJhaW4pOwogICAgdmFyIGNsZWFuZWRVcCA9IGZhbHNlOwogICAgZnVuY3Rpb24gY2xlYW51cCgpIHsKICAgICAgZGVidWcoImNsZWFudXAiKTsKICAgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcigiY2xvc2UiLCBvbmNsb3NlKTsKICAgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcigiZmluaXNoIiwgb25maW5pc2gpOwogICAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCJkcmFpbiIsIG9uZHJhaW4pOwogICAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCJlcnJvciIsIG9uZXJyb3IpOwogICAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCJ1bnBpcGUiLCBvbnVucGlwZSk7CiAgICAgIHNyYy5yZW1vdmVMaXN0ZW5lcigiZW5kIiwgb25lbmQyKTsKICAgICAgc3JjLnJlbW92ZUxpc3RlbmVyKCJlbmQiLCB1bnBpcGUpOwogICAgICBzcmMucmVtb3ZlTGlzdGVuZXIoImRhdGEiLCBvbmRhdGEpOwogICAgICBjbGVhbmVkVXAgPSB0cnVlOwogICAgICBpZiAoc3RhdGUyLmF3YWl0RHJhaW4gJiYgKCFkZXN0Ll93cml0YWJsZVN0YXRlIHx8IGRlc3QuX3dyaXRhYmxlU3RhdGUubmVlZERyYWluKSkKICAgICAgICBvbmRyYWluKCk7CiAgICB9CiAgICBzcmMub24oImRhdGEiLCBvbmRhdGEpOwogICAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7CiAgICAgIGRlYnVnKCJvbmRhdGEiKTsKICAgICAgdmFyIHJldCA9IGRlc3Qud3JpdGUoY2h1bmspOwogICAgICBkZWJ1ZygiZGVzdC53cml0ZSIsIHJldCk7CiAgICAgIGlmIChyZXQgPT09IGZhbHNlKSB7CiAgICAgICAgaWYgKChzdGF0ZTIucGlwZXNDb3VudCA9PT0gMSAmJiBzdGF0ZTIucGlwZXMgPT09IGRlc3QgfHwgc3RhdGUyLnBpcGVzQ291bnQgPiAxICYmIGluZGV4T2Yoc3RhdGUyLnBpcGVzLCBkZXN0KSAhPT0gLTEpICYmICFjbGVhbmVkVXApIHsKICAgICAgICAgIGRlYnVnKCJmYWxzZSB3cml0ZSByZXNwb25zZSwgcGF1c2UiLCBzdGF0ZTIuYXdhaXREcmFpbik7CiAgICAgICAgICBzdGF0ZTIuYXdhaXREcmFpbisrOwogICAgICAgIH0KICAgICAgICBzcmMucGF1c2UoKTsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gb25lcnJvcihlcikgewogICAgICBkZWJ1Zygib25lcnJvciIsIGVyKTsKICAgICAgdW5waXBlKCk7CiAgICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoImVycm9yIiwgb25lcnJvcik7CiAgICAgIGlmIChFRWxpc3RlbmVyQ291bnQoZGVzdCwgImVycm9yIikgPT09IDApCiAgICAgICAgZXJyb3JPckRlc3Ryb3kkMShkZXN0LCBlcik7CiAgICB9CiAgICBwcmVwZW5kTGlzdGVuZXIoZGVzdCwgImVycm9yIiwgb25lcnJvcik7CiAgICBmdW5jdGlvbiBvbmNsb3NlKCkgewogICAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCJmaW5pc2giLCBvbmZpbmlzaCk7CiAgICAgIHVucGlwZSgpOwogICAgfQogICAgZGVzdC5vbmNlKCJjbG9zZSIsIG9uY2xvc2UpOwogICAgZnVuY3Rpb24gb25maW5pc2goKSB7CiAgICAgIGRlYnVnKCJvbmZpbmlzaCIpOwogICAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCJjbG9zZSIsIG9uY2xvc2UpOwogICAgICB1bnBpcGUoKTsKICAgIH0KICAgIGRlc3Qub25jZSgiZmluaXNoIiwgb25maW5pc2gpOwogICAgZnVuY3Rpb24gdW5waXBlKCkgewogICAgICBkZWJ1ZygidW5waXBlIik7CiAgICAgIHNyYy51bnBpcGUoZGVzdCk7CiAgICB9CiAgICBkZXN0LmVtaXQoInBpcGUiLCBzcmMpOwogICAgaWYgKCFzdGF0ZTIuZmxvd2luZykgewogICAgICBkZWJ1ZygicGlwZSByZXN1bWUiKTsKICAgICAgc3JjLnJlc3VtZSgpOwogICAgfQogICAgcmV0dXJuIGRlc3Q7CiAgfTsKICBmdW5jdGlvbiBwaXBlT25EcmFpbihzcmMpIHsKICAgIHJldHVybiBmdW5jdGlvbiBwaXBlT25EcmFpbkZ1bmN0aW9uUmVzdWx0KCkgewogICAgICB2YXIgc3RhdGUyID0gc3JjLl9yZWFkYWJsZVN0YXRlOwogICAgICBkZWJ1ZygicGlwZU9uRHJhaW4iLCBzdGF0ZTIuYXdhaXREcmFpbik7CiAgICAgIGlmIChzdGF0ZTIuYXdhaXREcmFpbikKICAgICAgICBzdGF0ZTIuYXdhaXREcmFpbi0tOwogICAgICBpZiAoc3RhdGUyLmF3YWl0RHJhaW4gPT09IDAgJiYgRUVsaXN0ZW5lckNvdW50KHNyYywgImRhdGEiKSkgewogICAgICAgIHN0YXRlMi5mbG93aW5nID0gdHJ1ZTsKICAgICAgICBmbG93KHNyYyk7CiAgICAgIH0KICAgIH07CiAgfQogIFJlYWRhYmxlLnByb3RvdHlwZS51bnBpcGUgPSBmdW5jdGlvbihkZXN0KSB7CiAgICB2YXIgc3RhdGUyID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKICAgIHZhciB1bnBpcGVJbmZvID0gewogICAgICBoYXNVbnBpcGVkOiBmYWxzZQogICAgfTsKICAgIGlmIChzdGF0ZTIucGlwZXNDb3VudCA9PT0gMCkKICAgICAgcmV0dXJuIHRoaXM7CiAgICBpZiAoc3RhdGUyLnBpcGVzQ291bnQgPT09IDEpIHsKICAgICAgaWYgKGRlc3QgJiYgZGVzdCAhPT0gc3RhdGUyLnBpcGVzKQogICAgICAgIHJldHVybiB0aGlzOwogICAgICBpZiAoIWRlc3QpCiAgICAgICAgZGVzdCA9IHN0YXRlMi5waXBlczsKICAgICAgc3RhdGUyLnBpcGVzID0gbnVsbDsKICAgICAgc3RhdGUyLnBpcGVzQ291bnQgPSAwOwogICAgICBzdGF0ZTIuZmxvd2luZyA9IGZhbHNlOwogICAgICBpZiAoZGVzdCkKICAgICAgICBkZXN0LmVtaXQoInVucGlwZSIsIHRoaXMsIHVucGlwZUluZm8pOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIGlmICghZGVzdCkgewogICAgICB2YXIgZGVzdHMgPSBzdGF0ZTIucGlwZXM7CiAgICAgIHZhciBsZW4yID0gc3RhdGUyLnBpcGVzQ291bnQ7CiAgICAgIHN0YXRlMi5waXBlcyA9IG51bGw7CiAgICAgIHN0YXRlMi5waXBlc0NvdW50ID0gMDsKICAgICAgc3RhdGUyLmZsb3dpbmcgPSBmYWxzZTsKICAgICAgZm9yICh2YXIgaTIgPSAwOyBpMiA8IGxlbjI7IGkyKyspIHsKICAgICAgICBkZXN0c1tpMl0uZW1pdCgidW5waXBlIiwgdGhpcywgewogICAgICAgICAgaGFzVW5waXBlZDogZmFsc2UKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIHZhciBpbmRleCA9IGluZGV4T2Yoc3RhdGUyLnBpcGVzLCBkZXN0KTsKICAgIGlmIChpbmRleCA9PT0gLTEpCiAgICAgIHJldHVybiB0aGlzOwogICAgc3RhdGUyLnBpcGVzLnNwbGljZShpbmRleCwgMSk7CiAgICBzdGF0ZTIucGlwZXNDb3VudCAtPSAxOwogICAgaWYgKHN0YXRlMi5waXBlc0NvdW50ID09PSAxKQogICAgICBzdGF0ZTIucGlwZXMgPSBzdGF0ZTIucGlwZXNbMF07CiAgICBkZXN0LmVtaXQoInVucGlwZSIsIHRoaXMsIHVucGlwZUluZm8pOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBSZWFkYWJsZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbihldiwgZm4pIHsKICAgIHZhciByZXMgPSBTdHJlYW0kMS5wcm90b3R5cGUub24uY2FsbCh0aGlzLCBldiwgZm4pOwogICAgdmFyIHN0YXRlMiA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgICBpZiAoZXYgPT09ICJkYXRhIikgewogICAgICBzdGF0ZTIucmVhZGFibGVMaXN0ZW5pbmcgPSB0aGlzLmxpc3RlbmVyQ291bnQoInJlYWRhYmxlIikgPiAwOwogICAgICBpZiAoc3RhdGUyLmZsb3dpbmcgIT09IGZhbHNlKQogICAgICAgIHRoaXMucmVzdW1lKCk7CiAgICB9IGVsc2UgaWYgKGV2ID09PSAicmVhZGFibGUiKSB7CiAgICAgIGlmICghc3RhdGUyLmVuZEVtaXR0ZWQgJiYgIXN0YXRlMi5yZWFkYWJsZUxpc3RlbmluZykgewogICAgICAgIHN0YXRlMi5yZWFkYWJsZUxpc3RlbmluZyA9IHN0YXRlMi5uZWVkUmVhZGFibGUgPSB0cnVlOwogICAgICAgIHN0YXRlMi5mbG93aW5nID0gZmFsc2U7CiAgICAgICAgc3RhdGUyLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlOwogICAgICAgIGRlYnVnKCJvbiByZWFkYWJsZSIsIHN0YXRlMi5sZW5ndGgsIHN0YXRlMi5yZWFkaW5nKTsKICAgICAgICBpZiAoc3RhdGUyLmxlbmd0aCkgewogICAgICAgICAgZW1pdFJlYWRhYmxlKHRoaXMpOwogICAgICAgIH0gZWxzZSBpZiAoIXN0YXRlMi5yZWFkaW5nKSB7CiAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKG5SZWFkaW5nTmV4dFRpY2ssIHRoaXMpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlczsKICB9OwogIFJlYWRhYmxlLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IFJlYWRhYmxlLnByb3RvdHlwZS5vbjsKICBSZWFkYWJsZS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbihldiwgZm4pIHsKICAgIHZhciByZXMgPSBTdHJlYW0kMS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIuY2FsbCh0aGlzLCBldiwgZm4pOwogICAgaWYgKGV2ID09PSAicmVhZGFibGUiKSB7CiAgICAgIHByb2Nlc3MubmV4dFRpY2sodXBkYXRlUmVhZGFibGVMaXN0ZW5pbmcsIHRoaXMpOwogICAgfQogICAgcmV0dXJuIHJlczsKICB9OwogIFJlYWRhYmxlLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbihldikgewogICAgdmFyIHJlcyA9IFN0cmVhbSQxLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIGlmIChldiA9PT0gInJlYWRhYmxlIiB8fCBldiA9PT0gdm9pZCAwKSB7CiAgICAgIHByb2Nlc3MubmV4dFRpY2sodXBkYXRlUmVhZGFibGVMaXN0ZW5pbmcsIHRoaXMpOwogICAgfQogICAgcmV0dXJuIHJlczsKICB9OwogIGZ1bmN0aW9uIHVwZGF0ZVJlYWRhYmxlTGlzdGVuaW5nKHNlbGYpIHsKICAgIHZhciBzdGF0ZTIgPSBzZWxmLl9yZWFkYWJsZVN0YXRlOwogICAgc3RhdGUyLnJlYWRhYmxlTGlzdGVuaW5nID0gc2VsZi5saXN0ZW5lckNvdW50KCJyZWFkYWJsZSIpID4gMDsKICAgIGlmIChzdGF0ZTIucmVzdW1lU2NoZWR1bGVkICYmICFzdGF0ZTIucGF1c2VkKSB7CiAgICAgIHN0YXRlMi5mbG93aW5nID0gdHJ1ZTsKICAgIH0gZWxzZSBpZiAoc2VsZi5saXN0ZW5lckNvdW50KCJkYXRhIikgPiAwKSB7CiAgICAgIHNlbGYucmVzdW1lKCk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIG5SZWFkaW5nTmV4dFRpY2soc2VsZikgewogICAgZGVidWcoInJlYWRhYmxlIG5leHR0aWNrIHJlYWQgMCIpOwogICAgc2VsZi5yZWFkKDApOwogIH0KICBSZWFkYWJsZS5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24oKSB7CiAgICB2YXIgc3RhdGUyID0gdGhpcy5fcmVhZGFibGVTdGF0ZTsKICAgIGlmICghc3RhdGUyLmZsb3dpbmcpIHsKICAgICAgZGVidWcoInJlc3VtZSIpOwogICAgICBzdGF0ZTIuZmxvd2luZyA9ICFzdGF0ZTIucmVhZGFibGVMaXN0ZW5pbmc7CiAgICAgIHJlc3VtZSh0aGlzLCBzdGF0ZTIpOwogICAgfQogICAgc3RhdGUyLnBhdXNlZCA9IGZhbHNlOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBmdW5jdGlvbiByZXN1bWUoc3RyZWFtLCBzdGF0ZTIpIHsKICAgIGlmICghc3RhdGUyLnJlc3VtZVNjaGVkdWxlZCkgewogICAgICBzdGF0ZTIucmVzdW1lU2NoZWR1bGVkID0gdHJ1ZTsKICAgICAgcHJvY2Vzcy5uZXh0VGljayhyZXN1bWVfLCBzdHJlYW0sIHN0YXRlMik7CiAgICB9CiAgfQogIGZ1bmN0aW9uIHJlc3VtZV8oc3RyZWFtLCBzdGF0ZTIpIHsKICAgIGRlYnVnKCJyZXN1bWUiLCBzdGF0ZTIucmVhZGluZyk7CiAgICBpZiAoIXN0YXRlMi5yZWFkaW5nKSB7CiAgICAgIHN0cmVhbS5yZWFkKDApOwogICAgfQogICAgc3RhdGUyLnJlc3VtZVNjaGVkdWxlZCA9IGZhbHNlOwogICAgc3RyZWFtLmVtaXQoInJlc3VtZSIpOwogICAgZmxvdyhzdHJlYW0pOwogICAgaWYgKHN0YXRlMi5mbG93aW5nICYmICFzdGF0ZTIucmVhZGluZykKICAgICAgc3RyZWFtLnJlYWQoMCk7CiAgfQogIFJlYWRhYmxlLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uKCkgewogICAgZGVidWcoImNhbGwgcGF1c2UgZmxvd2luZz0laiIsIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyk7CiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nICE9PSBmYWxzZSkgewogICAgICBkZWJ1ZygicGF1c2UiKTsKICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID0gZmFsc2U7CiAgICAgIHRoaXMuZW1pdCgicGF1c2UiKTsKICAgIH0KICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUucGF1c2VkID0gdHJ1ZTsKICAgIHJldHVybiB0aGlzOwogIH07CiAgZnVuY3Rpb24gZmxvdyhzdHJlYW0pIHsKICAgIHZhciBzdGF0ZTIgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7CiAgICBkZWJ1ZygiZmxvdyIsIHN0YXRlMi5mbG93aW5nKTsKICAgIHdoaWxlIChzdGF0ZTIuZmxvd2luZyAmJiBzdHJlYW0ucmVhZCgpICE9PSBudWxsKSB7CiAgICB9CiAgfQogIFJlYWRhYmxlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24oc3RyZWFtKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdmFyIHN0YXRlMiA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7CiAgICB2YXIgcGF1c2VkID0gZmFsc2U7CiAgICBzdHJlYW0ub24oImVuZCIsIGZ1bmN0aW9uKCkgewogICAgICBkZWJ1Zygid3JhcHBlZCBlbmQiKTsKICAgICAgaWYgKHN0YXRlMi5kZWNvZGVyICYmICFzdGF0ZTIuZW5kZWQpIHsKICAgICAgICB2YXIgY2h1bmsgPSBzdGF0ZTIuZGVjb2Rlci5lbmQoKTsKICAgICAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKQogICAgICAgICAgX3RoaXMucHVzaChjaHVuayk7CiAgICAgIH0KICAgICAgX3RoaXMucHVzaChudWxsKTsKICAgIH0pOwogICAgc3RyZWFtLm9uKCJkYXRhIiwgZnVuY3Rpb24oY2h1bmspIHsKICAgICAgZGVidWcoIndyYXBwZWQgZGF0YSIpOwogICAgICBpZiAoc3RhdGUyLmRlY29kZXIpCiAgICAgICAgY2h1bmsgPSBzdGF0ZTIuZGVjb2Rlci53cml0ZShjaHVuayk7CiAgICAgIGlmIChzdGF0ZTIub2JqZWN0TW9kZSAmJiAoY2h1bmsgPT09IG51bGwgfHwgY2h1bmsgPT09IHZvaWQgMCkpCiAgICAgICAgcmV0dXJuOwogICAgICBlbHNlIGlmICghc3RhdGUyLm9iamVjdE1vZGUgJiYgKCFjaHVuayB8fCAhY2h1bmsubGVuZ3RoKSkKICAgICAgICByZXR1cm47CiAgICAgIHZhciByZXQgPSBfdGhpcy5wdXNoKGNodW5rKTsKICAgICAgaWYgKCFyZXQpIHsKICAgICAgICBwYXVzZWQgPSB0cnVlOwogICAgICAgIHN0cmVhbS5wYXVzZSgpOwogICAgICB9CiAgICB9KTsKICAgIGZvciAodmFyIGkyIGluIHN0cmVhbSkgewogICAgICBpZiAodGhpc1tpMl0gPT09IHZvaWQgMCAmJiB0eXBlb2Ygc3RyZWFtW2kyXSA9PT0gImZ1bmN0aW9uIikgewogICAgICAgIHRoaXNbaTJdID0gZnVuY3Rpb24gbWV0aG9kV3JhcChtZXRob2QyKSB7CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gbWV0aG9kV3JhcFJldHVybkZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gc3RyZWFtW21ldGhvZDJdLmFwcGx5KHN0cmVhbSwgYXJndW1lbnRzKTsKICAgICAgICAgIH07CiAgICAgICAgfShpMik7CiAgICAgIH0KICAgIH0KICAgIGZvciAodmFyIG4gPSAwOyBuIDwga1Byb3h5RXZlbnRzLmxlbmd0aDsgbisrKSB7CiAgICAgIHN0cmVhbS5vbihrUHJveHlFdmVudHNbbl0sIHRoaXMuZW1pdC5iaW5kKHRoaXMsIGtQcm94eUV2ZW50c1tuXSkpOwogICAgfQogICAgdGhpcy5fcmVhZCA9IGZ1bmN0aW9uKG4yKSB7CiAgICAgIGRlYnVnKCJ3cmFwcGVkIF9yZWFkIiwgbjIpOwogICAgICBpZiAocGF1c2VkKSB7CiAgICAgICAgcGF1c2VkID0gZmFsc2U7CiAgICAgICAgc3RyZWFtLnJlc3VtZSgpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIikgewogICAgUmVhZGFibGUucHJvdG90eXBlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgewogICAgICBpZiAoY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yID09PSB2b2lkIDApIHsKICAgICAgICBjcmVhdGVSZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmF0b3IgPSBhc3luY19pdGVyYXRvcjsKICAgICAgfQogICAgICByZXR1cm4gY3JlYXRlUmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhdG9yKHRoaXMpOwogICAgfTsKICB9CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlLnByb3RvdHlwZSwgInJlYWRhYmxlSGlnaFdhdGVyTWFyayIsIHsKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmhpZ2hXYXRlck1hcms7CiAgICB9CiAgfSk7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlLnByb3RvdHlwZSwgInJlYWRhYmxlQnVmZmVyIiwgewogICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUgJiYgdGhpcy5fcmVhZGFibGVTdGF0ZS5idWZmZXI7CiAgICB9CiAgfSk7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlLnByb3RvdHlwZSwgInJlYWRhYmxlRmxvd2luZyIsIHsKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmc7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoc3RhdGUyKSB7CiAgICAgIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlKSB7CiAgICAgICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID0gc3RhdGUyOwogICAgICB9CiAgICB9CiAgfSk7CiAgUmVhZGFibGUuX2Zyb21MaXN0ID0gZnJvbUxpc3Q7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlLnByb3RvdHlwZSwgInJlYWRhYmxlTGVuZ3RoIiwgewogICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUubGVuZ3RoOwogICAgfQogIH0pOwogIGZ1bmN0aW9uIGZyb21MaXN0KG4sIHN0YXRlMikgewogICAgaWYgKHN0YXRlMi5sZW5ndGggPT09IDApCiAgICAgIHJldHVybiBudWxsOwogICAgdmFyIHJldDsKICAgIGlmIChzdGF0ZTIub2JqZWN0TW9kZSkKICAgICAgcmV0ID0gc3RhdGUyLmJ1ZmZlci5zaGlmdCgpOwogICAgZWxzZSBpZiAoIW4gfHwgbiA+PSBzdGF0ZTIubGVuZ3RoKSB7CiAgICAgIGlmIChzdGF0ZTIuZGVjb2RlcikKICAgICAgICByZXQgPSBzdGF0ZTIuYnVmZmVyLmpvaW4oIiIpOwogICAgICBlbHNlIGlmIChzdGF0ZTIuYnVmZmVyLmxlbmd0aCA9PT0gMSkKICAgICAgICByZXQgPSBzdGF0ZTIuYnVmZmVyLmZpcnN0KCk7CiAgICAgIGVsc2UKICAgICAgICByZXQgPSBzdGF0ZTIuYnVmZmVyLmNvbmNhdChzdGF0ZTIubGVuZ3RoKTsKICAgICAgc3RhdGUyLmJ1ZmZlci5jbGVhcigpOwogICAgfSBlbHNlIHsKICAgICAgcmV0ID0gc3RhdGUyLmJ1ZmZlci5jb25zdW1lKG4sIHN0YXRlMi5kZWNvZGVyKTsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfQogIGZ1bmN0aW9uIGVuZFJlYWRhYmxlKHN0cmVhbSkgewogICAgdmFyIHN0YXRlMiA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKICAgIGRlYnVnKCJlbmRSZWFkYWJsZSIsIHN0YXRlMi5lbmRFbWl0dGVkKTsKICAgIGlmICghc3RhdGUyLmVuZEVtaXR0ZWQpIHsKICAgICAgc3RhdGUyLmVuZGVkID0gdHJ1ZTsKICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbmRSZWFkYWJsZU5ULCBzdGF0ZTIsIHN0cmVhbSk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIGVuZFJlYWRhYmxlTlQoc3RhdGUyLCBzdHJlYW0pIHsKICAgIGRlYnVnKCJlbmRSZWFkYWJsZU5UIiwgc3RhdGUyLmVuZEVtaXR0ZWQsIHN0YXRlMi5sZW5ndGgpOwogICAgaWYgKCFzdGF0ZTIuZW5kRW1pdHRlZCAmJiBzdGF0ZTIubGVuZ3RoID09PSAwKSB7CiAgICAgIHN0YXRlMi5lbmRFbWl0dGVkID0gdHJ1ZTsKICAgICAgc3RyZWFtLnJlYWRhYmxlID0gZmFsc2U7CiAgICAgIHN0cmVhbS5lbWl0KCJlbmQiKTsKICAgICAgaWYgKHN0YXRlMi5hdXRvRGVzdHJveSkgewogICAgICAgIHZhciB3U3RhdGUgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7CiAgICAgICAgaWYgKCF3U3RhdGUgfHwgd1N0YXRlLmF1dG9EZXN0cm95ICYmIHdTdGF0ZS5maW5pc2hlZCkgewogICAgICAgICAgc3RyZWFtLmRlc3Ryb3koKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIpIHsKICAgIFJlYWRhYmxlLmZyb20gPSBmdW5jdGlvbihpdGVyYWJsZSwgb3B0cykgewogICAgICBpZiAoZnJvbSA9PT0gdm9pZCAwKSB7CiAgICAgICAgZnJvbSA9IGZyb21Ccm93c2VyOwogICAgICB9CiAgICAgIHJldHVybiBmcm9tKFJlYWRhYmxlLCBpdGVyYWJsZSwgb3B0cyk7CiAgICB9OwogIH0KICBmdW5jdGlvbiBpbmRleE9mKHhzLCB4KSB7CiAgICBmb3IgKHZhciBpMiA9IDAsIGwgPSB4cy5sZW5ndGg7IGkyIDwgbDsgaTIrKykgewogICAgICBpZiAoeHNbaTJdID09PSB4KQogICAgICAgIHJldHVybiBpMjsKICAgIH0KICAgIHJldHVybiAtMTsKICB9CiAgdmFyIGJyb3dzZXIgPSBkZXByZWNhdGU7CiAgZnVuY3Rpb24gZGVwcmVjYXRlKGZuLCBtc2cpIHsKICAgIGlmIChjb25maWcoIm5vRGVwcmVjYXRpb24iKSkgewogICAgICByZXR1cm4gZm47CiAgICB9CiAgICB2YXIgd2FybmVkID0gZmFsc2U7CiAgICBmdW5jdGlvbiBkZXByZWNhdGVkKCkgewogICAgICBpZiAoIXdhcm5lZCkgewogICAgICAgIGlmIChjb25maWcoInRocm93RGVwcmVjYXRpb24iKSkgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7CiAgICAgICAgfSBlbHNlIGlmIChjb25maWcoInRyYWNlRGVwcmVjYXRpb24iKSkgewogICAgICAgICAgY29uc29sZS50cmFjZShtc2cpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLndhcm4obXNnKTsKICAgICAgICB9CiAgICAgICAgd2FybmVkID0gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KICAgIHJldHVybiBkZXByZWNhdGVkOwogIH0KICBmdW5jdGlvbiBjb25maWcobmFtZSkgewogICAgdHJ5IHsKICAgICAgaWYgKCFnbG9iYWxUaGlzLmxvY2FsU3RvcmFnZSkKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9IGNhdGNoIChfKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHZhciB2YWwgPSBnbG9iYWxUaGlzLmxvY2FsU3RvcmFnZVtuYW1lXTsKICAgIGlmICh2YWwgPT0gbnVsbCkKICAgICAgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIFN0cmluZyh2YWwpLnRvTG93ZXJDYXNlKCkgPT09ICJ0cnVlIjsKICB9CiAgY29uc3QgUmVnaXN0cnkkMyA9IF9yZWdpc3RyeTsKICBSZWdpc3RyeSQzLldyaXRhYmxlID0gV3JpdGFibGU7CiAgZnVuY3Rpb24gQ29ya2VkUmVxdWVzdChzdGF0ZTIpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICB0aGlzLm5leHQgPSBudWxsOwogICAgdGhpcy5lbnRyeSA9IG51bGw7CiAgICB0aGlzLmZpbmlzaCA9IGZ1bmN0aW9uKCkgewogICAgICBvbkNvcmtlZEZpbmlzaChfdGhpcywgc3RhdGUyKTsKICAgIH07CiAgfQogIFdyaXRhYmxlLldyaXRhYmxlU3RhdGUgPSBXcml0YWJsZVN0YXRlOwogIHZhciBpbnRlcm5hbFV0aWwgPSB7CiAgICBkZXByZWNhdGU6IGJyb3dzZXIKICB9OwogIHZhciBTdHJlYW0gPSBzdHJlYW1Ccm93c2VyOwogIHZhciBCdWZmZXIkZCA9IGJ1ZmZlci5CdWZmZXI7CiAgdmFyIE91clVpbnQ4QXJyYXkgPSBnbG9iYWxUaGlzLlVpbnQ4QXJyYXkgfHwgZnVuY3Rpb24oKSB7CiAgfTsKICBmdW5jdGlvbiBfdWludDhBcnJheVRvQnVmZmVyKGNodW5rKSB7CiAgICByZXR1cm4gQnVmZmVyJGQuZnJvbShjaHVuayk7CiAgfQogIGZ1bmN0aW9uIF9pc1VpbnQ4QXJyYXkob2JqKSB7CiAgICByZXR1cm4gQnVmZmVyJGQuaXNCdWZmZXIob2JqKSB8fCBvYmogaW5zdGFuY2VvZiBPdXJVaW50OEFycmF5OwogIH0KICB2YXIgZGVzdHJveUltcGwgPSBkZXN0cm95XzE7CiAgdmFyIF9yZXF1aXJlID0gc3RhdGUsIGdldEhpZ2hXYXRlck1hcmsgPSBfcmVxdWlyZS5nZXRIaWdoV2F0ZXJNYXJrOwogIHZhciBfcmVxdWlyZSRjb2RlcyQyID0gZXJyb3JzQnJvd3Nlci5jb2RlcywgRVJSX0lOVkFMSURfQVJHX1RZUEUgPSBfcmVxdWlyZSRjb2RlcyQyLkVSUl9JTlZBTElEX0FSR19UWVBFLCBFUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCQxID0gX3JlcXVpcmUkY29kZXMkMi5FUlJfTUVUSE9EX05PVF9JTVBMRU1FTlRFRCwgRVJSX01VTFRJUExFX0NBTExCQUNLJDEgPSBfcmVxdWlyZSRjb2RlcyQyLkVSUl9NVUxUSVBMRV9DQUxMQkFDSywgRVJSX1NUUkVBTV9DQU5OT1RfUElQRSA9IF9yZXF1aXJlJGNvZGVzJDIuRVJSX1NUUkVBTV9DQU5OT1RfUElQRSwgRVJSX1NUUkVBTV9ERVNUUk9ZRUQkMSA9IF9yZXF1aXJlJGNvZGVzJDIuRVJSX1NUUkVBTV9ERVNUUk9ZRUQsIEVSUl9TVFJFQU1fTlVMTF9WQUxVRVMgPSBfcmVxdWlyZSRjb2RlcyQyLkVSUl9TVFJFQU1fTlVMTF9WQUxVRVMsIEVSUl9TVFJFQU1fV1JJVEVfQUZURVJfRU5EID0gX3JlcXVpcmUkY29kZXMkMi5FUlJfU1RSRUFNX1dSSVRFX0FGVEVSX0VORCwgRVJSX1VOS05PV05fRU5DT0RJTkcgPSBfcmVxdWlyZSRjb2RlcyQyLkVSUl9VTktOT1dOX0VOQ09ESU5HOwogIHZhciBlcnJvck9yRGVzdHJveSA9IGRlc3Ryb3lJbXBsLmVycm9yT3JEZXN0cm95OwogIGluaGVyaXRzX2Jyb3dzZXIuZXhwb3J0cyhXcml0YWJsZSwgU3RyZWFtKTsKICBmdW5jdGlvbiBub3AoKSB7CiAgfQogIGZ1bmN0aW9uIFdyaXRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtLCBpc0R1cGxleCkgewogICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CiAgICBpZiAodHlwZW9mIGlzRHVwbGV4ICE9PSAiYm9vbGVhbiIpCiAgICAgIGlzRHVwbGV4ID0gc3RyZWFtIGluc3RhbmNlb2YgUmVnaXN0cnkkMy5EdXBsZXg7CiAgICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTsKICAgIGlmIChpc0R1cGxleCkKICAgICAgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy53cml0YWJsZU9iamVjdE1vZGU7CiAgICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBnZXRIaWdoV2F0ZXJNYXJrKHRoaXMsIG9wdGlvbnMsICJ3cml0YWJsZUhpZ2hXYXRlck1hcmsiLCBpc0R1cGxleCk7CiAgICB0aGlzLmZpbmFsQ2FsbGVkID0gZmFsc2U7CiAgICB0aGlzLm5lZWREcmFpbiA9IGZhbHNlOwogICAgdGhpcy5lbmRpbmcgPSBmYWxzZTsKICAgIHRoaXMuZW5kZWQgPSBmYWxzZTsKICAgIHRoaXMuZmluaXNoZWQgPSBmYWxzZTsKICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7CiAgICB2YXIgbm9EZWNvZGUgPSBvcHRpb25zLmRlY29kZVN0cmluZ3MgPT09IGZhbHNlOwogICAgdGhpcy5kZWNvZGVTdHJpbmdzID0gIW5vRGVjb2RlOwogICAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAidXRmOCI7CiAgICB0aGlzLmxlbmd0aCA9IDA7CiAgICB0aGlzLndyaXRpbmcgPSBmYWxzZTsKICAgIHRoaXMuY29ya2VkID0gMDsKICAgIHRoaXMuc3luYyA9IHRydWU7CiAgICB0aGlzLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTsKICAgIHRoaXMub253cml0ZSA9IGZ1bmN0aW9uKGVyKSB7CiAgICAgIG9ud3JpdGUoc3RyZWFtLCBlcik7CiAgICB9OwogICAgdGhpcy53cml0ZWNiID0gbnVsbDsKICAgIHRoaXMud3JpdGVsZW4gPSAwOwogICAgdGhpcy5idWZmZXJlZFJlcXVlc3QgPSBudWxsOwogICAgdGhpcy5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDsKICAgIHRoaXMucGVuZGluZ2NiID0gMDsKICAgIHRoaXMucHJlZmluaXNoZWQgPSBmYWxzZTsKICAgIHRoaXMuZXJyb3JFbWl0dGVkID0gZmFsc2U7CiAgICB0aGlzLmVtaXRDbG9zZSA9IG9wdGlvbnMuZW1pdENsb3NlICE9PSBmYWxzZTsKICAgIHRoaXMuYXV0b0Rlc3Ryb3kgPSAhIW9wdGlvbnMuYXV0b0Rlc3Ryb3k7CiAgICB0aGlzLmJ1ZmZlcmVkUmVxdWVzdENvdW50ID0gMDsKICAgIHRoaXMuY29ya2VkUmVxdWVzdHNGcmVlID0gbmV3IENvcmtlZFJlcXVlc3QodGhpcyk7CiAgfQogIFdyaXRhYmxlU3RhdGUucHJvdG90eXBlLmdldEJ1ZmZlciA9IGZ1bmN0aW9uIGdldEJ1ZmZlcigpIHsKICAgIHZhciBjdXJyZW50ID0gdGhpcy5idWZmZXJlZFJlcXVlc3Q7CiAgICB2YXIgb3V0ID0gW107CiAgICB3aGlsZSAoY3VycmVudCkgewogICAgICBvdXQucHVzaChjdXJyZW50KTsKICAgICAgY3VycmVudCA9IGN1cnJlbnQubmV4dDsKICAgIH0KICAgIHJldHVybiBvdXQ7CiAgfTsKICAoZnVuY3Rpb24oKSB7CiAgICB0cnkgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGVTdGF0ZS5wcm90b3R5cGUsICJidWZmZXIiLCB7CiAgICAgICAgZ2V0OiBpbnRlcm5hbFV0aWwuZGVwcmVjYXRlKGZ1bmN0aW9uIHdyaXRhYmxlU3RhdGVCdWZmZXJHZXR0ZXIoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRCdWZmZXIoKTsKICAgICAgICB9LCAiX3dyaXRhYmxlU3RhdGUuYnVmZmVyIGlzIGRlcHJlY2F0ZWQuIFVzZSBfd3JpdGFibGVTdGF0ZS5nZXRCdWZmZXIgaW5zdGVhZC4iLCAiREVQMDAwMyIpCiAgICAgIH0pOwogICAgfSBjYXRjaCAoXykgewogICAgfQogIH0pKCk7CiAgdmFyIHJlYWxIYXNJbnN0YW5jZTsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaGFzSW5zdGFuY2UgJiYgdHlwZW9mIEZ1bmN0aW9uLnByb3RvdHlwZVtTeW1ib2wuaGFzSW5zdGFuY2VdID09PSAiZnVuY3Rpb24iKSB7CiAgICByZWFsSGFzSW5zdGFuY2UgPSBGdW5jdGlvbi5wcm90b3R5cGVbU3ltYm9sLmhhc0luc3RhbmNlXTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZSwgU3ltYm9sLmhhc0luc3RhbmNlLCB7CiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZShvYmplY3QpIHsKICAgICAgICBpZiAocmVhbEhhc0luc3RhbmNlLmNhbGwodGhpcywgb2JqZWN0KSkKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIGlmICh0aGlzICE9PSBXcml0YWJsZSkKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICByZXR1cm4gb2JqZWN0ICYmIG9iamVjdC5fd3JpdGFibGVTdGF0ZSBpbnN0YW5jZW9mIFdyaXRhYmxlU3RhdGU7CiAgICAgIH0KICAgIH0pOwogIH0gZWxzZSB7CiAgICByZWFsSGFzSW5zdGFuY2UgPSBmdW5jdGlvbiByZWFsSGFzSW5zdGFuY2UyKG9iamVjdCkgewogICAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgdGhpczsKICAgIH07CiAgfQogIGZ1bmN0aW9uIFdyaXRhYmxlKG9wdGlvbnMpIHsKICAgIHZhciBpc0R1cGxleCA9IHRoaXMgaW5zdGFuY2VvZiBSZWdpc3RyeSQzLkR1cGxleDsKICAgIGlmICghaXNEdXBsZXggJiYgIXJlYWxIYXNJbnN0YW5jZS5jYWxsKFdyaXRhYmxlLCB0aGlzKSkKICAgICAgcmV0dXJuIG5ldyBXcml0YWJsZShvcHRpb25zKTsKICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUgPSBuZXcgV3JpdGFibGVTdGF0ZShvcHRpb25zLCB0aGlzLCBpc0R1cGxleCk7CiAgICB0aGlzLndyaXRhYmxlID0gdHJ1ZTsKICAgIGlmIChvcHRpb25zKSB7CiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy53cml0ZSA9PT0gImZ1bmN0aW9uIikKICAgICAgICB0aGlzLl93cml0ZSA9IG9wdGlvbnMud3JpdGU7CiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy53cml0ZXYgPT09ICJmdW5jdGlvbiIpCiAgICAgICAgdGhpcy5fd3JpdGV2ID0gb3B0aW9ucy53cml0ZXY7CiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kZXN0cm95ID09PSAiZnVuY3Rpb24iKQogICAgICAgIHRoaXMuX2Rlc3Ryb3kgPSBvcHRpb25zLmRlc3Ryb3k7CiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5maW5hbCA9PT0gImZ1bmN0aW9uIikKICAgICAgICB0aGlzLl9maW5hbCA9IG9wdGlvbnMuZmluYWw7CiAgICB9CiAgICBTdHJlYW0uY2FsbCh0aGlzKTsKICB9CiAgV3JpdGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbigpIHsKICAgIGVycm9yT3JEZXN0cm95KHRoaXMsIG5ldyBFUlJfU1RSRUFNX0NBTk5PVF9QSVBFKCkpOwogIH07CiAgZnVuY3Rpb24gd3JpdGVBZnRlckVuZChzdHJlYW0sIGNiKSB7CiAgICB2YXIgZXIgPSBuZXcgRVJSX1NUUkVBTV9XUklURV9BRlRFUl9FTkQoKTsKICAgIGVycm9yT3JEZXN0cm95KHN0cmVhbSwgZXIpOwogICAgcHJvY2Vzcy5uZXh0VGljayhjYiwgZXIpOwogIH0KICBmdW5jdGlvbiB2YWxpZENodW5rKHN0cmVhbSwgc3RhdGUyLCBjaHVuaywgY2IpIHsKICAgIHZhciBlcjsKICAgIGlmIChjaHVuayA9PT0gbnVsbCkgewogICAgICBlciA9IG5ldyBFUlJfU1RSRUFNX05VTExfVkFMVUVTKCk7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjaHVuayAhPT0gInN0cmluZyIgJiYgIXN0YXRlMi5vYmplY3RNb2RlKSB7CiAgICAgIGVyID0gbmV3IEVSUl9JTlZBTElEX0FSR19UWVBFKCJjaHVuayIsIFsic3RyaW5nIiwgIkJ1ZmZlciJdLCBjaHVuayk7CiAgICB9CiAgICBpZiAoZXIpIHsKICAgICAgZXJyb3JPckRlc3Ryb3koc3RyZWFtLCBlcik7CiAgICAgIHByb2Nlc3MubmV4dFRpY2soY2IsIGVyKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQogIFdyaXRhYmxlLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHsKICAgIHZhciBzdGF0ZTIgPSB0aGlzLl93cml0YWJsZVN0YXRlOwogICAgdmFyIHJldCA9IGZhbHNlOwogICAgdmFyIGlzQnVmID0gIXN0YXRlMi5vYmplY3RNb2RlICYmIF9pc1VpbnQ4QXJyYXkoY2h1bmspOwogICAgaWYgKGlzQnVmICYmICFCdWZmZXIkZC5pc0J1ZmZlcihjaHVuaykpIHsKICAgICAgY2h1bmsgPSBfdWludDhBcnJheVRvQnVmZmVyKGNodW5rKTsKICAgIH0KICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgY2IgPSBlbmNvZGluZzsKICAgICAgZW5jb2RpbmcgPSBudWxsOwogICAgfQogICAgaWYgKGlzQnVmKQogICAgICBlbmNvZGluZyA9ICJidWZmZXIiOwogICAgZWxzZSBpZiAoIWVuY29kaW5nKQogICAgICBlbmNvZGluZyA9IHN0YXRlMi5kZWZhdWx0RW5jb2Rpbmc7CiAgICBpZiAodHlwZW9mIGNiICE9PSAiZnVuY3Rpb24iKQogICAgICBjYiA9IG5vcDsKICAgIGlmIChzdGF0ZTIuZW5kaW5nKQogICAgICB3cml0ZUFmdGVyRW5kKHRoaXMsIGNiKTsKICAgIGVsc2UgaWYgKGlzQnVmIHx8IHZhbGlkQ2h1bmsodGhpcywgc3RhdGUyLCBjaHVuaywgY2IpKSB7CiAgICAgIHN0YXRlMi5wZW5kaW5nY2IrKzsKICAgICAgcmV0ID0gd3JpdGVPckJ1ZmZlcih0aGlzLCBzdGF0ZTIsIGlzQnVmLCBjaHVuaywgZW5jb2RpbmcsIGNiKTsKICAgIH0KICAgIHJldHVybiByZXQ7CiAgfTsKICBXcml0YWJsZS5wcm90b3R5cGUuY29yayA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5jb3JrZWQrKzsKICB9OwogIFdyaXRhYmxlLnByb3RvdHlwZS51bmNvcmsgPSBmdW5jdGlvbigpIHsKICAgIHZhciBzdGF0ZTIgPSB0aGlzLl93cml0YWJsZVN0YXRlOwogICAgaWYgKHN0YXRlMi5jb3JrZWQpIHsKICAgICAgc3RhdGUyLmNvcmtlZC0tOwogICAgICBpZiAoIXN0YXRlMi53cml0aW5nICYmICFzdGF0ZTIuY29ya2VkICYmICFzdGF0ZTIuYnVmZmVyUHJvY2Vzc2luZyAmJiBzdGF0ZTIuYnVmZmVyZWRSZXF1ZXN0KQogICAgICAgIGNsZWFyQnVmZmVyKHRoaXMsIHN0YXRlMik7CiAgICB9CiAgfTsKICBXcml0YWJsZS5wcm90b3R5cGUuc2V0RGVmYXVsdEVuY29kaW5nID0gZnVuY3Rpb24gc2V0RGVmYXVsdEVuY29kaW5nKGVuY29kaW5nKSB7CiAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAic3RyaW5nIikKICAgICAgZW5jb2RpbmcgPSBlbmNvZGluZy50b0xvd2VyQ2FzZSgpOwogICAgaWYgKCEoWyJoZXgiLCAidXRmOCIsICJ1dGYtOCIsICJhc2NpaSIsICJiaW5hcnkiLCAiYmFzZTY0IiwgInVjczIiLCAidWNzLTIiLCAidXRmMTZsZSIsICJ1dGYtMTZsZSIsICJyYXciXS5pbmRleE9mKChlbmNvZGluZyArICIiKS50b0xvd2VyQ2FzZSgpKSA+IC0xKSkKICAgICAgdGhyb3cgbmV3IEVSUl9VTktOT1dOX0VOQ09ESU5HKGVuY29kaW5nKTsKICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVmYXVsdEVuY29kaW5nID0gZW5jb2Rpbmc7CiAgICByZXR1cm4gdGhpczsKICB9OwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZS5wcm90b3R5cGUsICJ3cml0YWJsZUJ1ZmZlciIsIHsKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZ2V0QnVmZmVyKCk7CiAgICB9CiAgfSk7CiAgZnVuY3Rpb24gZGVjb2RlQ2h1bmsoc3RhdGUyLCBjaHVuaywgZW5jb2RpbmcpIHsKICAgIGlmICghc3RhdGUyLm9iamVjdE1vZGUgJiYgc3RhdGUyLmRlY29kZVN0cmluZ3MgIT09IGZhbHNlICYmIHR5cGVvZiBjaHVuayA9PT0gInN0cmluZyIpIHsKICAgICAgY2h1bmsgPSBCdWZmZXIkZC5mcm9tKGNodW5rLCBlbmNvZGluZyk7CiAgICB9CiAgICByZXR1cm4gY2h1bms7CiAgfQogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZS5wcm90b3R5cGUsICJ3cml0YWJsZUhpZ2hXYXRlck1hcmsiLCB7CiAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrOwogICAgfQogIH0pOwogIGZ1bmN0aW9uIHdyaXRlT3JCdWZmZXIoc3RyZWFtLCBzdGF0ZTIsIGlzQnVmLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgICBpZiAoIWlzQnVmKSB7CiAgICAgIHZhciBuZXdDaHVuayA9IGRlY29kZUNodW5rKHN0YXRlMiwgY2h1bmssIGVuY29kaW5nKTsKICAgICAgaWYgKGNodW5rICE9PSBuZXdDaHVuaykgewogICAgICAgIGlzQnVmID0gdHJ1ZTsKICAgICAgICBlbmNvZGluZyA9ICJidWZmZXIiOwogICAgICAgIGNodW5rID0gbmV3Q2h1bms7CiAgICAgIH0KICAgIH0KICAgIHZhciBsZW4yID0gc3RhdGUyLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoOwogICAgc3RhdGUyLmxlbmd0aCArPSBsZW4yOwogICAgdmFyIHJldCA9IHN0YXRlMi5sZW5ndGggPCBzdGF0ZTIuaGlnaFdhdGVyTWFyazsKICAgIGlmICghcmV0KQogICAgICBzdGF0ZTIubmVlZERyYWluID0gdHJ1ZTsKICAgIGlmIChzdGF0ZTIud3JpdGluZyB8fCBzdGF0ZTIuY29ya2VkKSB7CiAgICAgIHZhciBsYXN0ID0gc3RhdGUyLmxhc3RCdWZmZXJlZFJlcXVlc3Q7CiAgICAgIHN0YXRlMi5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gewogICAgICAgIGNodW5rLAogICAgICAgIGVuY29kaW5nLAogICAgICAgIGlzQnVmLAogICAgICAgIGNhbGxiYWNrOiBjYiwKICAgICAgICBuZXh0OiBudWxsCiAgICAgIH07CiAgICAgIGlmIChsYXN0KSB7CiAgICAgICAgbGFzdC5uZXh0ID0gc3RhdGUyLmxhc3RCdWZmZXJlZFJlcXVlc3Q7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGUyLmJ1ZmZlcmVkUmVxdWVzdCA9IHN0YXRlMi5sYXN0QnVmZmVyZWRSZXF1ZXN0OwogICAgICB9CiAgICAgIHN0YXRlMi5idWZmZXJlZFJlcXVlc3RDb3VudCArPSAxOwogICAgfSBlbHNlIHsKICAgICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlMiwgZmFsc2UsIGxlbjIsIGNodW5rLCBlbmNvZGluZywgY2IpOwogICAgfQogICAgcmV0dXJuIHJldDsKICB9CiAgZnVuY3Rpb24gZG9Xcml0ZShzdHJlYW0sIHN0YXRlMiwgd3JpdGV2LCBsZW4yLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgICBzdGF0ZTIud3JpdGVsZW4gPSBsZW4yOwogICAgc3RhdGUyLndyaXRlY2IgPSBjYjsKICAgIHN0YXRlMi53cml0aW5nID0gdHJ1ZTsKICAgIHN0YXRlMi5zeW5jID0gdHJ1ZTsKICAgIGlmIChzdGF0ZTIuZGVzdHJveWVkKQogICAgICBzdGF0ZTIub253cml0ZShuZXcgRVJSX1NUUkVBTV9ERVNUUk9ZRUQkMSgid3JpdGUiKSk7CiAgICBlbHNlIGlmICh3cml0ZXYpCiAgICAgIHN0cmVhbS5fd3JpdGV2KGNodW5rLCBzdGF0ZTIub253cml0ZSk7CiAgICBlbHNlCiAgICAgIHN0cmVhbS5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBzdGF0ZTIub253cml0ZSk7CiAgICBzdGF0ZTIuc3luYyA9IGZhbHNlOwogIH0KICBmdW5jdGlvbiBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZTIsIHN5bmMyLCBlciwgY2IpIHsKICAgIC0tc3RhdGUyLnBlbmRpbmdjYjsKICAgIGlmIChzeW5jMikgewogICAgICBwcm9jZXNzLm5leHRUaWNrKGNiLCBlcik7CiAgICAgIHByb2Nlc3MubmV4dFRpY2soZmluaXNoTWF5YmUsIHN0cmVhbSwgc3RhdGUyKTsKICAgICAgc3RyZWFtLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7CiAgICAgIGVycm9yT3JEZXN0cm95KHN0cmVhbSwgZXIpOwogICAgfSBlbHNlIHsKICAgICAgY2IoZXIpOwogICAgICBzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTsKICAgICAgZXJyb3JPckRlc3Ryb3koc3RyZWFtLCBlcik7CiAgICAgIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUyKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gb253cml0ZVN0YXRlVXBkYXRlKHN0YXRlMikgewogICAgc3RhdGUyLndyaXRpbmcgPSBmYWxzZTsKICAgIHN0YXRlMi53cml0ZWNiID0gbnVsbDsKICAgIHN0YXRlMi5sZW5ndGggLT0gc3RhdGUyLndyaXRlbGVuOwogICAgc3RhdGUyLndyaXRlbGVuID0gMDsKICB9CiAgZnVuY3Rpb24gb253cml0ZShzdHJlYW0sIGVyKSB7CiAgICB2YXIgc3RhdGUyID0gc3RyZWFtLl93cml0YWJsZVN0YXRlOwogICAgdmFyIHN5bmMyID0gc3RhdGUyLnN5bmM7CiAgICB2YXIgY2IgPSBzdGF0ZTIud3JpdGVjYjsKICAgIGlmICh0eXBlb2YgY2IgIT09ICJmdW5jdGlvbiIpCiAgICAgIHRocm93IG5ldyBFUlJfTVVMVElQTEVfQ0FMTEJBQ0skMSgpOwogICAgb253cml0ZVN0YXRlVXBkYXRlKHN0YXRlMik7CiAgICBpZiAoZXIpCiAgICAgIG9ud3JpdGVFcnJvcihzdHJlYW0sIHN0YXRlMiwgc3luYzIsIGVyLCBjYik7CiAgICBlbHNlIHsKICAgICAgdmFyIGZpbmlzaGVkMiA9IG5lZWRGaW5pc2goc3RhdGUyKSB8fCBzdHJlYW0uZGVzdHJveWVkOwogICAgICBpZiAoIWZpbmlzaGVkMiAmJiAhc3RhdGUyLmNvcmtlZCAmJiAhc3RhdGUyLmJ1ZmZlclByb2Nlc3NpbmcgJiYgc3RhdGUyLmJ1ZmZlcmVkUmVxdWVzdCkgewogICAgICAgIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUyKTsKICAgICAgfQogICAgICBpZiAoc3luYzIpIHsKICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGFmdGVyV3JpdGUsIHN0cmVhbSwgc3RhdGUyLCBmaW5pc2hlZDIsIGNiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUyLCBmaW5pc2hlZDIsIGNiKTsKICAgICAgfQogICAgfQogIH0KICBmdW5jdGlvbiBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUyLCBmaW5pc2hlZDIsIGNiKSB7CiAgICBpZiAoIWZpbmlzaGVkMikKICAgICAgb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUyKTsKICAgIHN0YXRlMi5wZW5kaW5nY2ItLTsKICAgIGNiKCk7CiAgICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlMik7CiAgfQogIGZ1bmN0aW9uIG9ud3JpdGVEcmFpbihzdHJlYW0sIHN0YXRlMikgewogICAgaWYgKHN0YXRlMi5sZW5ndGggPT09IDAgJiYgc3RhdGUyLm5lZWREcmFpbikgewogICAgICBzdGF0ZTIubmVlZERyYWluID0gZmFsc2U7CiAgICAgIHN0cmVhbS5lbWl0KCJkcmFpbiIpOwogICAgfQogIH0KICBmdW5jdGlvbiBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlMikgewogICAgc3RhdGUyLmJ1ZmZlclByb2Nlc3NpbmcgPSB0cnVlOwogICAgdmFyIGVudHJ5ID0gc3RhdGUyLmJ1ZmZlcmVkUmVxdWVzdDsKICAgIGlmIChzdHJlYW0uX3dyaXRldiAmJiBlbnRyeSAmJiBlbnRyeS5uZXh0KSB7CiAgICAgIHZhciBsID0gc3RhdGUyLmJ1ZmZlcmVkUmVxdWVzdENvdW50OwogICAgICB2YXIgYnVmZmVyMiA9IG5ldyBBcnJheShsKTsKICAgICAgdmFyIGhvbGRlciA9IHN0YXRlMi5jb3JrZWRSZXF1ZXN0c0ZyZWU7CiAgICAgIGhvbGRlci5lbnRyeSA9IGVudHJ5OwogICAgICB2YXIgY291bnQgPSAwOwogICAgICB2YXIgYWxsQnVmZmVycyA9IHRydWU7CiAgICAgIHdoaWxlIChlbnRyeSkgewogICAgICAgIGJ1ZmZlcjJbY291bnRdID0gZW50cnk7CiAgICAgICAgaWYgKCFlbnRyeS5pc0J1ZikKICAgICAgICAgIGFsbEJ1ZmZlcnMgPSBmYWxzZTsKICAgICAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7CiAgICAgICAgY291bnQgKz0gMTsKICAgICAgfQogICAgICBidWZmZXIyLmFsbEJ1ZmZlcnMgPSBhbGxCdWZmZXJzOwogICAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUyLCB0cnVlLCBzdGF0ZTIubGVuZ3RoLCBidWZmZXIyLCAiIiwgaG9sZGVyLmZpbmlzaCk7CiAgICAgIHN0YXRlMi5wZW5kaW5nY2IrKzsKICAgICAgc3RhdGUyLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsOwogICAgICBpZiAoaG9sZGVyLm5leHQpIHsKICAgICAgICBzdGF0ZTIuY29ya2VkUmVxdWVzdHNGcmVlID0gaG9sZGVyLm5leHQ7CiAgICAgICAgaG9sZGVyLm5leHQgPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRlMi5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBuZXcgQ29ya2VkUmVxdWVzdChzdGF0ZTIpOwogICAgICB9CiAgICAgIHN0YXRlMi5idWZmZXJlZFJlcXVlc3RDb3VudCA9IDA7CiAgICB9IGVsc2UgewogICAgICB3aGlsZSAoZW50cnkpIHsKICAgICAgICB2YXIgY2h1bmsgPSBlbnRyeS5jaHVuazsKICAgICAgICB2YXIgZW5jb2RpbmcgPSBlbnRyeS5lbmNvZGluZzsKICAgICAgICB2YXIgY2IgPSBlbnRyeS5jYWxsYmFjazsKICAgICAgICB2YXIgbGVuMiA9IHN0YXRlMi5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDsKICAgICAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUyLCBmYWxzZSwgbGVuMiwgY2h1bmssIGVuY29kaW5nLCBjYik7CiAgICAgICAgZW50cnkgPSBlbnRyeS5uZXh0OwogICAgICAgIHN0YXRlMi5idWZmZXJlZFJlcXVlc3RDb3VudC0tOwogICAgICAgIGlmIChzdGF0ZTIud3JpdGluZykgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChlbnRyeSA9PT0gbnVsbCkKICAgICAgICBzdGF0ZTIubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7CiAgICB9CiAgICBzdGF0ZTIuYnVmZmVyZWRSZXF1ZXN0ID0gZW50cnk7CiAgICBzdGF0ZTIuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlOwogIH0KICBXcml0YWJsZS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikgewogICAgY2IobmV3IEVSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVEJDEoIl93cml0ZSgpIikpOwogIH07CiAgV3JpdGFibGUucHJvdG90eXBlLl93cml0ZXYgPSBudWxsOwogIFdyaXRhYmxlLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgICB2YXIgc3RhdGUyID0gdGhpcy5fd3JpdGFibGVTdGF0ZTsKICAgIGlmICh0eXBlb2YgY2h1bmsgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgY2IgPSBjaHVuazsKICAgICAgY2h1bmsgPSBudWxsOwogICAgICBlbmNvZGluZyA9IG51bGw7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gImZ1bmN0aW9uIikgewogICAgICBjYiA9IGVuY29kaW5nOwogICAgICBlbmNvZGluZyA9IG51bGw7CiAgICB9CiAgICBpZiAoY2h1bmsgIT09IG51bGwgJiYgY2h1bmsgIT09IHZvaWQgMCkKICAgICAgdGhpcy53cml0ZShjaHVuaywgZW5jb2RpbmcpOwogICAgaWYgKHN0YXRlMi5jb3JrZWQpIHsKICAgICAgc3RhdGUyLmNvcmtlZCA9IDE7CiAgICAgIHRoaXMudW5jb3JrKCk7CiAgICB9CiAgICBpZiAoIXN0YXRlMi5lbmRpbmcpCiAgICAgIGVuZFdyaXRhYmxlKHRoaXMsIHN0YXRlMiwgY2IpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGUucHJvdG90eXBlLCAid3JpdGFibGVMZW5ndGgiLCB7CiAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5sZW5ndGg7CiAgICB9CiAgfSk7CiAgZnVuY3Rpb24gbmVlZEZpbmlzaChzdGF0ZTIpIHsKICAgIHJldHVybiBzdGF0ZTIuZW5kaW5nICYmIHN0YXRlMi5sZW5ndGggPT09IDAgJiYgc3RhdGUyLmJ1ZmZlcmVkUmVxdWVzdCA9PT0gbnVsbCAmJiAhc3RhdGUyLmZpbmlzaGVkICYmICFzdGF0ZTIud3JpdGluZzsKICB9CiAgZnVuY3Rpb24gY2FsbEZpbmFsKHN0cmVhbSwgc3RhdGUyKSB7CiAgICBzdHJlYW0uX2ZpbmFsKGZ1bmN0aW9uKGVycikgewogICAgICBzdGF0ZTIucGVuZGluZ2NiLS07CiAgICAgIGlmIChlcnIpIHsKICAgICAgICBlcnJvck9yRGVzdHJveShzdHJlYW0sIGVycik7CiAgICAgIH0KICAgICAgc3RhdGUyLnByZWZpbmlzaGVkID0gdHJ1ZTsKICAgICAgc3RyZWFtLmVtaXQoInByZWZpbmlzaCIpOwogICAgICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlMik7CiAgICB9KTsKICB9CiAgZnVuY3Rpb24gcHJlZmluaXNoJDEoc3RyZWFtLCBzdGF0ZTIpIHsKICAgIGlmICghc3RhdGUyLnByZWZpbmlzaGVkICYmICFzdGF0ZTIuZmluYWxDYWxsZWQpIHsKICAgICAgaWYgKHR5cGVvZiBzdHJlYW0uX2ZpbmFsID09PSAiZnVuY3Rpb24iICYmICFzdGF0ZTIuZGVzdHJveWVkKSB7CiAgICAgICAgc3RhdGUyLnBlbmRpbmdjYisrOwogICAgICAgIHN0YXRlMi5maW5hbENhbGxlZCA9IHRydWU7CiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhjYWxsRmluYWwsIHN0cmVhbSwgc3RhdGUyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzdGF0ZTIucHJlZmluaXNoZWQgPSB0cnVlOwogICAgICAgIHN0cmVhbS5lbWl0KCJwcmVmaW5pc2giKTsKICAgICAgfQogICAgfQogIH0KICBmdW5jdGlvbiBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlMikgewogICAgdmFyIG5lZWQgPSBuZWVkRmluaXNoKHN0YXRlMik7CiAgICBpZiAobmVlZCkgewogICAgICBwcmVmaW5pc2gkMShzdHJlYW0sIHN0YXRlMik7CiAgICAgIGlmIChzdGF0ZTIucGVuZGluZ2NiID09PSAwKSB7CiAgICAgICAgc3RhdGUyLmZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICBzdHJlYW0uZW1pdCgiZmluaXNoIik7CiAgICAgICAgaWYgKHN0YXRlMi5hdXRvRGVzdHJveSkgewogICAgICAgICAgdmFyIHJTdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTsKICAgICAgICAgIGlmICghclN0YXRlIHx8IHJTdGF0ZS5hdXRvRGVzdHJveSAmJiByU3RhdGUuZW5kRW1pdHRlZCkgewogICAgICAgICAgICBzdHJlYW0uZGVzdHJveSgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIG5lZWQ7CiAgfQogIGZ1bmN0aW9uIGVuZFdyaXRhYmxlKHN0cmVhbSwgc3RhdGUyLCBjYikgewogICAgc3RhdGUyLmVuZGluZyA9IHRydWU7CiAgICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlMik7CiAgICBpZiAoY2IpIHsKICAgICAgaWYgKHN0YXRlMi5maW5pc2hlZCkKICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGNiKTsKICAgICAgZWxzZQogICAgICAgIHN0cmVhbS5vbmNlKCJmaW5pc2giLCBjYik7CiAgICB9CiAgICBzdGF0ZTIuZW5kZWQgPSB0cnVlOwogICAgc3RyZWFtLndyaXRhYmxlID0gZmFsc2U7CiAgfQogIGZ1bmN0aW9uIG9uQ29ya2VkRmluaXNoKGNvcmtSZXEsIHN0YXRlMiwgZXJyKSB7CiAgICB2YXIgZW50cnkgPSBjb3JrUmVxLmVudHJ5OwogICAgY29ya1JlcS5lbnRyeSA9IG51bGw7CiAgICB3aGlsZSAoZW50cnkpIHsKICAgICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7CiAgICAgIHN0YXRlMi5wZW5kaW5nY2ItLTsKICAgICAgY2IoZXJyKTsKICAgICAgZW50cnkgPSBlbnRyeS5uZXh0OwogICAgfQogICAgc3RhdGUyLmNvcmtlZFJlcXVlc3RzRnJlZS5uZXh0ID0gY29ya1JlcTsKICB9CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlLnByb3RvdHlwZSwgImRlc3Ryb3llZCIsIHsKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIGlmICh0aGlzLl93cml0YWJsZVN0YXRlID09PSB2b2lkIDApIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgIGlmICghdGhpcy5fd3JpdGFibGVTdGF0ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IHZhbHVlOwogICAgfQogIH0pOwogIFdyaXRhYmxlLnByb3RvdHlwZS5kZXN0cm95ID0gZGVzdHJveUltcGwuZGVzdHJveTsKICBXcml0YWJsZS5wcm90b3R5cGUuX3VuZGVzdHJveSA9IGRlc3Ryb3lJbXBsLnVuZGVzdHJveTsKICBXcml0YWJsZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbihlcnIsIGNiKSB7CiAgICBjYihlcnIpOwogIH07CiAgdmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbihvYmopIHsKICAgIHZhciBrZXlzMiA9IFtdOwogICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICBrZXlzMi5wdXNoKGtleSk7CiAgICB9CiAgICByZXR1cm4ga2V5czI7CiAgfTsKICBjb25zdCBSZWdpc3RyeSQyID0gX3JlZ2lzdHJ5OwogIFJlZ2lzdHJ5JDIuRHVwbGV4ID0gRHVwbGV4OwogIGluaGVyaXRzX2Jyb3dzZXIuZXhwb3J0cyhEdXBsZXgsIFJlZ2lzdHJ5JDIuUmVhZGFibGUpOwogIHsKICAgIHZhciBrZXlzID0gb2JqZWN0S2V5cyhSZWdpc3RyeSQyLldyaXRhYmxlLnByb3RvdHlwZSk7CiAgICBmb3IgKHZhciB2ID0gMDsgdiA8IGtleXMubGVuZ3RoOyB2KyspIHsKICAgICAgdmFyIG1ldGhvZCA9IGtleXNbdl07CiAgICAgIGlmICghRHVwbGV4LnByb3RvdHlwZVttZXRob2RdKQogICAgICAgIER1cGxleC5wcm90b3R5cGVbbWV0aG9kXSA9IFJlZ2lzdHJ5JDIuV3JpdGFibGUucHJvdG90eXBlW21ldGhvZF07CiAgICB9CiAgfQogIGZ1bmN0aW9uIER1cGxleChvcHRpb25zKSB7CiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkKICAgICAgcmV0dXJuIG5ldyBEdXBsZXgob3B0aW9ucyk7CiAgICBSZWdpc3RyeSQyLlJlYWRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7CiAgICBSZWdpc3RyeSQyLldyaXRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7CiAgICB0aGlzLmFsbG93SGFsZk9wZW4gPSB0cnVlOwogICAgaWYgKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMucmVhZGFibGUgPT09IGZhbHNlKQogICAgICAgIHRoaXMucmVhZGFibGUgPSBmYWxzZTsKICAgICAgaWYgKG9wdGlvbnMud3JpdGFibGUgPT09IGZhbHNlKQogICAgICAgIHRoaXMud3JpdGFibGUgPSBmYWxzZTsKICAgICAgaWYgKG9wdGlvbnMuYWxsb3dIYWxmT3BlbiA9PT0gZmFsc2UpIHsKICAgICAgICB0aGlzLmFsbG93SGFsZk9wZW4gPSBmYWxzZTsKICAgICAgICB0aGlzLm9uY2UoImVuZCIsIG9uZW5kKTsKICAgICAgfQogICAgfQogIH0KICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRHVwbGV4LnByb3RvdHlwZSwgIndyaXRhYmxlSGlnaFdhdGVyTWFyayIsIHsKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmhpZ2hXYXRlck1hcms7CiAgICB9CiAgfSk7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KER1cGxleC5wcm90b3R5cGUsICJ3cml0YWJsZUJ1ZmZlciIsIHsKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZ2V0QnVmZmVyKCk7CiAgICB9CiAgfSk7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KER1cGxleC5wcm90b3R5cGUsICJ3cml0YWJsZUxlbmd0aCIsIHsKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmxlbmd0aDsKICAgIH0KICB9KTsKICBmdW5jdGlvbiBvbmVuZCgpIHsKICAgIGlmICh0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkKQogICAgICByZXR1cm47CiAgICBwcm9jZXNzLm5leHRUaWNrKG9uRW5kTlQsIHRoaXMpOwogIH0KICBmdW5jdGlvbiBvbkVuZE5UKHNlbGYpIHsKICAgIHNlbGYuZW5kKCk7CiAgfQogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEdXBsZXgucHJvdG90eXBlLCAiZGVzdHJveWVkIiwgewogICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUgPT09IHZvaWQgMCB8fCB0aGlzLl93cml0YWJsZVN0YXRlID09PSB2b2lkIDApIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlID09PSB2b2lkIDAgfHwgdGhpcy5fd3JpdGFibGVTdGF0ZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkID0gdmFsdWU7CiAgICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkID0gdmFsdWU7CiAgICB9CiAgfSk7CiAgY29uc3QgUmVnaXN0cnkkMSA9IF9yZWdpc3RyeTsKICBSZWdpc3RyeSQxLlRyYW5zZm9ybSA9IFRyYW5zZm9ybSQyOwogIHZhciBfcmVxdWlyZSRjb2RlcyQxID0gZXJyb3JzQnJvd3Nlci5jb2RlcywgRVJSX01FVEhPRF9OT1RfSU1QTEVNRU5URUQgPSBfcmVxdWlyZSRjb2RlcyQxLkVSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVELCBFUlJfTVVMVElQTEVfQ0FMTEJBQ0sgPSBfcmVxdWlyZSRjb2RlcyQxLkVSUl9NVUxUSVBMRV9DQUxMQkFDSywgRVJSX1RSQU5TRk9STV9BTFJFQURZX1RSQU5TRk9STUlORyA9IF9yZXF1aXJlJGNvZGVzJDEuRVJSX1RSQU5TRk9STV9BTFJFQURZX1RSQU5TRk9STUlORywgRVJSX1RSQU5TRk9STV9XSVRIX0xFTkdUSF8wID0gX3JlcXVpcmUkY29kZXMkMS5FUlJfVFJBTlNGT1JNX1dJVEhfTEVOR1RIXzA7CiAgaW5oZXJpdHNfYnJvd3Nlci5leHBvcnRzKFRyYW5zZm9ybSQyLCBSZWdpc3RyeSQxLkR1cGxleCk7CiAgZnVuY3Rpb24gYWZ0ZXJUcmFuc2Zvcm0oZXIsIGRhdGEpIHsKICAgIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlOwogICAgdHMudHJhbnNmb3JtaW5nID0gZmFsc2U7CiAgICB2YXIgY2IgPSB0cy53cml0ZWNiOwogICAgaWYgKGNiID09PSBudWxsKSB7CiAgICAgIHJldHVybiB0aGlzLmVtaXQoImVycm9yIiwgbmV3IEVSUl9NVUxUSVBMRV9DQUxMQkFDSygpKTsKICAgIH0KICAgIHRzLndyaXRlY2h1bmsgPSBudWxsOwogICAgdHMud3JpdGVjYiA9IG51bGw7CiAgICBpZiAoZGF0YSAhPSBudWxsKQogICAgICB0aGlzLnB1c2goZGF0YSk7CiAgICBjYihlcik7CiAgICB2YXIgcnMgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwogICAgcnMucmVhZGluZyA9IGZhbHNlOwogICAgaWYgKHJzLm5lZWRSZWFkYWJsZSB8fCBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKSB7CiAgICAgIHRoaXMuX3JlYWQocnMuaGlnaFdhdGVyTWFyayk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIFRyYW5zZm9ybSQyKG9wdGlvbnMpIHsKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBUcmFuc2Zvcm0kMikpCiAgICAgIHJldHVybiBuZXcgVHJhbnNmb3JtJDIob3B0aW9ucyk7CiAgICBSZWdpc3RyeSQxLkR1cGxleC5jYWxsKHRoaXMsIG9wdGlvbnMpOwogICAgdGhpcy5fdHJhbnNmb3JtU3RhdGUgPSB7CiAgICAgIGFmdGVyVHJhbnNmb3JtOiBhZnRlclRyYW5zZm9ybS5iaW5kKHRoaXMpLAogICAgICBuZWVkVHJhbnNmb3JtOiBmYWxzZSwKICAgICAgdHJhbnNmb3JtaW5nOiBmYWxzZSwKICAgICAgd3JpdGVjYjogbnVsbCwKICAgICAgd3JpdGVjaHVuazogbnVsbCwKICAgICAgd3JpdGVlbmNvZGluZzogbnVsbAogICAgfTsKICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTsKICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuc3luYyA9IGZhbHNlOwogICAgaWYgKG9wdGlvbnMpIHsKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnRyYW5zZm9ybSA9PT0gImZ1bmN0aW9uIikKICAgICAgICB0aGlzLl90cmFuc2Zvcm0gPSBvcHRpb25zLnRyYW5zZm9ybTsKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmZsdXNoID09PSAiZnVuY3Rpb24iKQogICAgICAgIHRoaXMuX2ZsdXNoID0gb3B0aW9ucy5mbHVzaDsKICAgIH0KICAgIHRoaXMub24oInByZWZpbmlzaCIsIHByZWZpbmlzaCk7CiAgfQogIGZ1bmN0aW9uIHByZWZpbmlzaCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICBpZiAodHlwZW9mIHRoaXMuX2ZsdXNoID09PSAiZnVuY3Rpb24iICYmICF0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCkgewogICAgICB0aGlzLl9mbHVzaChmdW5jdGlvbihlciwgZGF0YSkgewogICAgICAgIGRvbmUoX3RoaXMsIGVyLCBkYXRhKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBkb25lKHRoaXMsIG51bGwsIG51bGwpOwogICAgfQogIH0KICBUcmFuc2Zvcm0kMi5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZykgewogICAgdGhpcy5fdHJhbnNmb3JtU3RhdGUubmVlZFRyYW5zZm9ybSA9IGZhbHNlOwogICAgcmV0dXJuIFJlZ2lzdHJ5JDEuRHVwbGV4LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgY2h1bmssIGVuY29kaW5nKTsKICB9OwogIFRyYW5zZm9ybSQyLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikgewogICAgY2IobmV3IEVSUl9NRVRIT0RfTk9UX0lNUExFTUVOVEVEKCJfdHJhbnNmb3JtKCkiKSk7CiAgfTsKICBUcmFuc2Zvcm0kMi5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikgewogICAgdmFyIHRzID0gdGhpcy5fdHJhbnNmb3JtU3RhdGU7CiAgICB0cy53cml0ZWNiID0gY2I7CiAgICB0cy53cml0ZWNodW5rID0gY2h1bms7CiAgICB0cy53cml0ZWVuY29kaW5nID0gZW5jb2Rpbmc7CiAgICBpZiAoIXRzLnRyYW5zZm9ybWluZykgewogICAgICB2YXIgcnMgPSB0aGlzLl9yZWFkYWJsZVN0YXRlOwogICAgICBpZiAodHMubmVlZFRyYW5zZm9ybSB8fCBycy5uZWVkUmVhZGFibGUgfHwgcnMubGVuZ3RoIDwgcnMuaGlnaFdhdGVyTWFyaykKICAgICAgICB0aGlzLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspOwogICAgfQogIH07CiAgVHJhbnNmb3JtJDIucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24obikgewogICAgdmFyIHRzID0gdGhpcy5fdHJhbnNmb3JtU3RhdGU7CiAgICBpZiAodHMud3JpdGVjaHVuayAhPT0gbnVsbCAmJiAhdHMudHJhbnNmb3JtaW5nKSB7CiAgICAgIHRzLnRyYW5zZm9ybWluZyA9IHRydWU7CiAgICAgIHRoaXMuX3RyYW5zZm9ybSh0cy53cml0ZWNodW5rLCB0cy53cml0ZWVuY29kaW5nLCB0cy5hZnRlclRyYW5zZm9ybSk7CiAgICB9IGVsc2UgewogICAgICB0cy5uZWVkVHJhbnNmb3JtID0gdHJ1ZTsKICAgIH0KICB9OwogIFRyYW5zZm9ybSQyLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uKGVyciwgY2IpIHsKICAgIFJlZ2lzdHJ5JDEuRHVwbGV4LnByb3RvdHlwZS5fZGVzdHJveS5jYWxsKHRoaXMsIGVyciwgZnVuY3Rpb24oZXJyMikgewogICAgICBjYihlcnIyKTsKICAgIH0pOwogIH07CiAgZnVuY3Rpb24gZG9uZShzdHJlYW0sIGVyLCBkYXRhKSB7CiAgICBpZiAoZXIpCiAgICAgIHJldHVybiBzdHJlYW0uZW1pdCgiZXJyb3IiLCBlcik7CiAgICBpZiAoZGF0YSAhPSBudWxsKQogICAgICBzdHJlYW0ucHVzaChkYXRhKTsKICAgIGlmIChzdHJlYW0uX3dyaXRhYmxlU3RhdGUubGVuZ3RoKQogICAgICB0aHJvdyBuZXcgRVJSX1RSQU5TRk9STV9XSVRIX0xFTkdUSF8wKCk7CiAgICBpZiAoc3RyZWFtLl90cmFuc2Zvcm1TdGF0ZS50cmFuc2Zvcm1pbmcpCiAgICAgIHRocm93IG5ldyBFUlJfVFJBTlNGT1JNX0FMUkVBRFlfVFJBTlNGT1JNSU5HKCk7CiAgICByZXR1cm4gc3RyZWFtLnB1c2gobnVsbCk7CiAgfQogIGNvbnN0IFJlZ2lzdHJ5ID0gX3JlZ2lzdHJ5OwogIFJlZ2lzdHJ5LlBhc3NUaHJvdWdoID0gUGFzc1Rocm91Z2g7CiAgaW5oZXJpdHNfYnJvd3Nlci5leHBvcnRzKFBhc3NUaHJvdWdoLCBSZWdpc3RyeS5UcmFuc2Zvcm0pOwogIGZ1bmN0aW9uIFBhc3NUaHJvdWdoKG9wdGlvbnMpIHsKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQYXNzVGhyb3VnaCkpCiAgICAgIHJldHVybiBuZXcgUGFzc1Rocm91Z2gob3B0aW9ucyk7CiAgICBUcmFuc2Zvcm0uY2FsbCh0aGlzLCBvcHRpb25zKTsKICB9CiAgUGFzc1Rocm91Z2gucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7CiAgICBjYihudWxsLCBjaHVuayk7CiAgfTsKICB2YXIgZW9zOwogIGZ1bmN0aW9uIG9uY2UoY2FsbGJhY2spIHsKICAgIHZhciBjYWxsZWQgPSBmYWxzZTsKICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgaWYgKGNhbGxlZCkKICAgICAgICByZXR1cm47CiAgICAgIGNhbGxlZCA9IHRydWU7CiAgICAgIGNhbGxiYWNrLmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKTsKICAgIH07CiAgfQogIHZhciBfcmVxdWlyZSRjb2RlcyA9IGVycm9yc0Jyb3dzZXIuY29kZXMsIEVSUl9NSVNTSU5HX0FSR1MgPSBfcmVxdWlyZSRjb2Rlcy5FUlJfTUlTU0lOR19BUkdTLCBFUlJfU1RSRUFNX0RFU1RST1lFRCA9IF9yZXF1aXJlJGNvZGVzLkVSUl9TVFJFQU1fREVTVFJPWUVEOwogIGZ1bmN0aW9uIG5vb3AoZXJyKSB7CiAgICBpZiAoZXJyKQogICAgICB0aHJvdyBlcnI7CiAgfQogIGZ1bmN0aW9uIGlzUmVxdWVzdChzdHJlYW0pIHsKICAgIHJldHVybiBzdHJlYW0uc2V0SGVhZGVyICYmIHR5cGVvZiBzdHJlYW0uYWJvcnQgPT09ICJmdW5jdGlvbiI7CiAgfQogIGZ1bmN0aW9uIGRlc3Ryb3llcihzdHJlYW0sIHJlYWRpbmcsIHdyaXRpbmcsIGNhbGxiYWNrKSB7CiAgICBjYWxsYmFjayA9IG9uY2UoY2FsbGJhY2spOwogICAgdmFyIGNsb3NlZCA9IGZhbHNlOwogICAgc3RyZWFtLm9uKCJjbG9zZSIsIGZ1bmN0aW9uKCkgewogICAgICBjbG9zZWQgPSB0cnVlOwogICAgfSk7CiAgICBpZiAoZW9zID09PSB2b2lkIDApCiAgICAgIGVvcyA9IGVuZE9mU3RyZWFtOwogICAgZW9zKHN0cmVhbSwgewogICAgICByZWFkYWJsZTogcmVhZGluZywKICAgICAgd3JpdGFibGU6IHdyaXRpbmcKICAgIH0sIGZ1bmN0aW9uKGVycikgewogICAgICBpZiAoZXJyKQogICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpOwogICAgICBjbG9zZWQgPSB0cnVlOwogICAgICBjYWxsYmFjaygpOwogICAgfSk7CiAgICB2YXIgZGVzdHJveWVkID0gZmFsc2U7CiAgICByZXR1cm4gZnVuY3Rpb24oZXJyKSB7CiAgICAgIGlmIChjbG9zZWQpCiAgICAgICAgcmV0dXJuOwogICAgICBpZiAoZGVzdHJveWVkKQogICAgICAgIHJldHVybjsKICAgICAgZGVzdHJveWVkID0gdHJ1ZTsKICAgICAgaWYgKGlzUmVxdWVzdChzdHJlYW0pKQogICAgICAgIHJldHVybiBzdHJlYW0uYWJvcnQoKTsKICAgICAgaWYgKHR5cGVvZiBzdHJlYW0uZGVzdHJveSA9PT0gImZ1bmN0aW9uIikKICAgICAgICByZXR1cm4gc3RyZWFtLmRlc3Ryb3koKTsKICAgICAgY2FsbGJhY2soZXJyIHx8IG5ldyBFUlJfU1RSRUFNX0RFU1RST1lFRCgicGlwZSIpKTsKICAgIH07CiAgfQogIGZ1bmN0aW9uIGNhbGwoZm4pIHsKICAgIGZuKCk7CiAgfQogIGZ1bmN0aW9uIHBpcGUoZnJvbTIsIHRvKSB7CiAgICByZXR1cm4gZnJvbTIucGlwZSh0byk7CiAgfQogIGZ1bmN0aW9uIHBvcENhbGxiYWNrKHN0cmVhbXMpIHsKICAgIGlmICghc3RyZWFtcy5sZW5ndGgpCiAgICAgIHJldHVybiBub29wOwogICAgaWYgKHR5cGVvZiBzdHJlYW1zW3N0cmVhbXMubGVuZ3RoIC0gMV0gIT09ICJmdW5jdGlvbiIpCiAgICAgIHJldHVybiBub29wOwogICAgcmV0dXJuIHN0cmVhbXMucG9wKCk7CiAgfQogIGZ1bmN0aW9uIHBpcGVsaW5lKCkgewogICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHN0cmVhbXMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIHN0cmVhbXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICB9CiAgICB2YXIgY2FsbGJhY2sgPSBwb3BDYWxsYmFjayhzdHJlYW1zKTsKICAgIGlmIChBcnJheS5pc0FycmF5KHN0cmVhbXNbMF0pKQogICAgICBzdHJlYW1zID0gc3RyZWFtc1swXTsKICAgIGlmIChzdHJlYW1zLmxlbmd0aCA8IDIpIHsKICAgICAgdGhyb3cgbmV3IEVSUl9NSVNTSU5HX0FSR1MoInN0cmVhbXMiKTsKICAgIH0KICAgIHZhciBlcnJvcjsKICAgIHZhciBkZXN0cm95cyA9IHN0cmVhbXMubWFwKGZ1bmN0aW9uKHN0cmVhbSwgaTIpIHsKICAgICAgdmFyIHJlYWRpbmcgPSBpMiA8IHN0cmVhbXMubGVuZ3RoIC0gMTsKICAgICAgdmFyIHdyaXRpbmcgPSBpMiA+IDA7CiAgICAgIHJldHVybiBkZXN0cm95ZXIoc3RyZWFtLCByZWFkaW5nLCB3cml0aW5nLCBmdW5jdGlvbihlcnIpIHsKICAgICAgICBpZiAoIWVycm9yKQogICAgICAgICAgZXJyb3IgPSBlcnI7CiAgICAgICAgaWYgKGVycikKICAgICAgICAgIGRlc3Ryb3lzLmZvckVhY2goY2FsbCk7CiAgICAgICAgaWYgKHJlYWRpbmcpCiAgICAgICAgICByZXR1cm47CiAgICAgICAgZGVzdHJveXMuZm9yRWFjaChjYWxsKTsKICAgICAgICBjYWxsYmFjayhlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgICByZXR1cm4gc3RyZWFtcy5yZWR1Y2UocGlwZSk7CiAgfQogIHZhciBwaXBlbGluZV8xID0gcGlwZWxpbmU7CiAgKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykgewogICAgY29uc3QgUmVnaXN0cnkyID0gX3JlZ2lzdHJ5OwogICAgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gUmVnaXN0cnkyLlJlYWRhYmxlOwogICAgZXhwb3J0cy5TdHJlYW0gPSBSZWdpc3RyeTIuUmVhZGFibGU7CiAgICBleHBvcnRzLlJlYWRhYmxlID0gUmVnaXN0cnkyLlJlYWRhYmxlOwogICAgZXhwb3J0cy5Xcml0YWJsZSA9IFJlZ2lzdHJ5Mi5Xcml0YWJsZTsKICAgIGV4cG9ydHMuRHVwbGV4ID0gUmVnaXN0cnkyLkR1cGxleDsKICAgIGV4cG9ydHMuVHJhbnNmb3JtID0gUmVnaXN0cnkyLlRyYW5zZm9ybTsKICAgIGV4cG9ydHMuUGFzc1Rocm91Z2ggPSBSZWdpc3RyeTIuUGFzc1Rocm91Z2g7CiAgICBleHBvcnRzLmZpbmlzaGVkID0gZW5kT2ZTdHJlYW07CiAgICBleHBvcnRzLnBpcGVsaW5lID0gcGlwZWxpbmVfMTsKICB9KShyZWFkYWJsZUJyb3dzZXIsIHJlYWRhYmxlQnJvd3Nlci5leHBvcnRzKTsKICB2YXIgQnVmZmVyJGMgPSBzYWZlQnVmZmVyLmV4cG9ydHMuQnVmZmVyOwogIHZhciBUcmFuc2Zvcm0kMSA9IHJlYWRhYmxlQnJvd3Nlci5leHBvcnRzLlRyYW5zZm9ybTsKICB2YXIgaW5oZXJpdHMkOCA9IGluaGVyaXRzX2Jyb3dzZXIuZXhwb3J0czsKICBmdW5jdGlvbiB0aHJvd0lmTm90U3RyaW5nT3JCdWZmZXIodmFsLCBwcmVmaXgpIHsKICAgIGlmICghQnVmZmVyJGMuaXNCdWZmZXIodmFsKSAmJiB0eXBlb2YgdmFsICE9PSAic3RyaW5nIikgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHByZWZpeCArICIgbXVzdCBiZSBhIHN0cmluZyBvciBhIGJ1ZmZlciIpOwogICAgfQogIH0KICBmdW5jdGlvbiBIYXNoQmFzZSQyKGJsb2NrU2l6ZSkgewogICAgVHJhbnNmb3JtJDEuY2FsbCh0aGlzKTsKICAgIHRoaXMuX2Jsb2NrID0gQnVmZmVyJGMuYWxsb2NVbnNhZmUoYmxvY2tTaXplKTsKICAgIHRoaXMuX2Jsb2NrU2l6ZSA9IGJsb2NrU2l6ZTsKICAgIHRoaXMuX2Jsb2NrT2Zmc2V0ID0gMDsKICAgIHRoaXMuX2xlbmd0aCA9IFswLCAwLCAwLCAwXTsKICAgIHRoaXMuX2ZpbmFsaXplZCA9IGZhbHNlOwogIH0KICBpbmhlcml0cyQ4KEhhc2hCYXNlJDIsIFRyYW5zZm9ybSQxKTsKICBIYXNoQmFzZSQyLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjaykgewogICAgdmFyIGVycm9yID0gbnVsbDsKICAgIHRyeSB7CiAgICAgIHRoaXMudXBkYXRlKGNodW5rLCBlbmNvZGluZyk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgZXJyb3IgPSBlcnI7CiAgICB9CiAgICBjYWxsYmFjayhlcnJvcik7CiAgfTsKICBIYXNoQmFzZSQyLnByb3RvdHlwZS5fZmx1c2ggPSBmdW5jdGlvbihjYWxsYmFjaykgewogICAgdmFyIGVycm9yID0gbnVsbDsKICAgIHRyeSB7CiAgICAgIHRoaXMucHVzaCh0aGlzLmRpZ2VzdCgpKTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICBlcnJvciA9IGVycjsKICAgIH0KICAgIGNhbGxiYWNrKGVycm9yKTsKICB9OwogIEhhc2hCYXNlJDIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKGRhdGEsIGVuY29kaW5nKSB7CiAgICB0aHJvd0lmTm90U3RyaW5nT3JCdWZmZXIoZGF0YSwgIkRhdGEiKTsKICAgIGlmICh0aGlzLl9maW5hbGl6ZWQpCiAgICAgIHRocm93IG5ldyBFcnJvcigiRGlnZXN0IGFscmVhZHkgY2FsbGVkIik7CiAgICBpZiAoIUJ1ZmZlciRjLmlzQnVmZmVyKGRhdGEpKQogICAgICBkYXRhID0gQnVmZmVyJGMuZnJvbShkYXRhLCBlbmNvZGluZyk7CiAgICB2YXIgYmxvY2sgPSB0aGlzLl9ibG9jazsKICAgIHZhciBvZmZzZXQgPSAwOwogICAgd2hpbGUgKHRoaXMuX2Jsb2NrT2Zmc2V0ICsgZGF0YS5sZW5ndGggLSBvZmZzZXQgPj0gdGhpcy5fYmxvY2tTaXplKSB7CiAgICAgIGZvciAodmFyIGkyID0gdGhpcy5fYmxvY2tPZmZzZXQ7IGkyIDwgdGhpcy5fYmxvY2tTaXplOyApCiAgICAgICAgYmxvY2tbaTIrK10gPSBkYXRhW29mZnNldCsrXTsKICAgICAgdGhpcy5fdXBkYXRlKCk7CiAgICAgIHRoaXMuX2Jsb2NrT2Zmc2V0ID0gMDsKICAgIH0KICAgIHdoaWxlIChvZmZzZXQgPCBkYXRhLmxlbmd0aCkKICAgICAgYmxvY2tbdGhpcy5fYmxvY2tPZmZzZXQrK10gPSBkYXRhW29mZnNldCsrXTsKICAgIGZvciAodmFyIGogPSAwLCBjYXJyeSA9IGRhdGEubGVuZ3RoICogODsgY2FycnkgPiAwOyArK2opIHsKICAgICAgdGhpcy5fbGVuZ3RoW2pdICs9IGNhcnJ5OwogICAgICBjYXJyeSA9IHRoaXMuX2xlbmd0aFtqXSAvIDQyOTQ5NjcyOTYgfCAwOwogICAgICBpZiAoY2FycnkgPiAwKQogICAgICAgIHRoaXMuX2xlbmd0aFtqXSAtPSA0Mjk0OTY3Mjk2ICogY2Fycnk7CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9OwogIEhhc2hCYXNlJDIucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbigpIHsKICAgIHRocm93IG5ldyBFcnJvcigiX3VwZGF0ZSBpcyBub3QgaW1wbGVtZW50ZWQiKTsKICB9OwogIEhhc2hCYXNlJDIucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uKGVuY29kaW5nKSB7CiAgICBpZiAodGhpcy5fZmluYWxpemVkKQogICAgICB0aHJvdyBuZXcgRXJyb3IoIkRpZ2VzdCBhbHJlYWR5IGNhbGxlZCIpOwogICAgdGhpcy5fZmluYWxpemVkID0gdHJ1ZTsKICAgIHZhciBkaWdlc3QgPSB0aGlzLl9kaWdlc3QoKTsKICAgIGlmIChlbmNvZGluZyAhPT0gdm9pZCAwKQogICAgICBkaWdlc3QgPSBkaWdlc3QudG9TdHJpbmcoZW5jb2RpbmcpOwogICAgdGhpcy5fYmxvY2suZmlsbCgwKTsKICAgIHRoaXMuX2Jsb2NrT2Zmc2V0ID0gMDsKICAgIGZvciAodmFyIGkyID0gMDsgaTIgPCA0OyArK2kyKQogICAgICB0aGlzLl9sZW5ndGhbaTJdID0gMDsKICAgIHJldHVybiBkaWdlc3Q7CiAgfTsKICBIYXNoQmFzZSQyLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24oKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIl9kaWdlc3QgaXMgbm90IGltcGxlbWVudGVkIik7CiAgfTsKICB2YXIgaGFzaEJhc2UgPSBIYXNoQmFzZSQyOwogIHZhciBpbmhlcml0cyQ3ID0gaW5oZXJpdHNfYnJvd3Nlci5leHBvcnRzOwogIHZhciBIYXNoQmFzZSQxID0gaGFzaEJhc2U7CiAgdmFyIEJ1ZmZlciRiID0gc2FmZUJ1ZmZlci5leHBvcnRzLkJ1ZmZlcjsKICB2YXIgQVJSQVkxNiQxID0gbmV3IEFycmF5KDE2KTsKICBmdW5jdGlvbiBNRDUkMSgpIHsKICAgIEhhc2hCYXNlJDEuY2FsbCh0aGlzLCA2NCk7CiAgICB0aGlzLl9hID0gMTczMjU4NDE5MzsKICAgIHRoaXMuX2IgPSA0MDIzMjMzNDE3OwogICAgdGhpcy5fYyA9IDI1NjIzODMxMDI7CiAgICB0aGlzLl9kID0gMjcxNzMzODc4OwogIH0KICBpbmhlcml0cyQ3KE1ENSQxLCBIYXNoQmFzZSQxKTsKICBNRDUkMS5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgdmFyIE0gPSBBUlJBWTE2JDE7CiAgICBmb3IgKHZhciBpMiA9IDA7IGkyIDwgMTY7ICsraTIpCiAgICAgIE1baTJdID0gdGhpcy5fYmxvY2sucmVhZEludDMyTEUoaTIgKiA0KTsKICAgIHZhciBhID0gdGhpcy5fYTsKICAgIHZhciBiID0gdGhpcy5fYjsKICAgIHZhciBjID0gdGhpcy5fYzsKICAgIHZhciBkID0gdGhpcy5fZDsKICAgIGEgPSBmbkYoYSwgYiwgYywgZCwgTVswXSwgMzYxNDA5MDM2MCwgNyk7CiAgICBkID0gZm5GKGQsIGEsIGIsIGMsIE1bMV0sIDM5MDU0MDI3MTAsIDEyKTsKICAgIGMgPSBmbkYoYywgZCwgYSwgYiwgTVsyXSwgNjA2MTA1ODE5LCAxNyk7CiAgICBiID0gZm5GKGIsIGMsIGQsIGEsIE1bM10sIDMyNTA0NDE5NjYsIDIyKTsKICAgIGEgPSBmbkYoYSwgYiwgYywgZCwgTVs0XSwgNDExODU0ODM5OSwgNyk7CiAgICBkID0gZm5GKGQsIGEsIGIsIGMsIE1bNV0sIDEyMDAwODA0MjYsIDEyKTsKICAgIGMgPSBmbkYoYywgZCwgYSwgYiwgTVs2XSwgMjgyMTczNTk1NSwgMTcpOwogICAgYiA9IGZuRihiLCBjLCBkLCBhLCBNWzddLCA0MjQ5MjYxMzEzLCAyMik7CiAgICBhID0gZm5GKGEsIGIsIGMsIGQsIE1bOF0sIDE3NzAwMzU0MTYsIDcpOwogICAgZCA9IGZuRihkLCBhLCBiLCBjLCBNWzldLCAyMzM2NTUyODc5LCAxMik7CiAgICBjID0gZm5GKGMsIGQsIGEsIGIsIE1bMTBdLCA0Mjk0OTI1MjMzLCAxNyk7CiAgICBiID0gZm5GKGIsIGMsIGQsIGEsIE1bMTFdLCAyMzA0NTYzMTM0LCAyMik7CiAgICBhID0gZm5GKGEsIGIsIGMsIGQsIE1bMTJdLCAxODA0NjAzNjgyLCA3KTsKICAgIGQgPSBmbkYoZCwgYSwgYiwgYywgTVsxM10sIDQyNTQ2MjYxOTUsIDEyKTsKICAgIGMgPSBmbkYoYywgZCwgYSwgYiwgTVsxNF0sIDI3OTI5NjUwMDYsIDE3KTsKICAgIGIgPSBmbkYoYiwgYywgZCwgYSwgTVsxNV0sIDEyMzY1MzUzMjksIDIyKTsKICAgIGEgPSBmbkcoYSwgYiwgYywgZCwgTVsxXSwgNDEyOTE3MDc4NiwgNSk7CiAgICBkID0gZm5HKGQsIGEsIGIsIGMsIE1bNl0sIDMyMjU0NjU2NjQsIDkpOwogICAgYyA9IGZuRyhjLCBkLCBhLCBiLCBNWzExXSwgNjQzNzE3NzEzLCAxNCk7CiAgICBiID0gZm5HKGIsIGMsIGQsIGEsIE1bMF0sIDM5MjEwNjk5OTQsIDIwKTsKICAgIGEgPSBmbkcoYSwgYiwgYywgZCwgTVs1XSwgMzU5MzQwODYwNSwgNSk7CiAgICBkID0gZm5HKGQsIGEsIGIsIGMsIE1bMTBdLCAzODAxNjA4MywgOSk7CiAgICBjID0gZm5HKGMsIGQsIGEsIGIsIE1bMTVdLCAzNjM0NDg4OTYxLCAxNCk7CiAgICBiID0gZm5HKGIsIGMsIGQsIGEsIE1bNF0sIDM4ODk0Mjk0NDgsIDIwKTsKICAgIGEgPSBmbkcoYSwgYiwgYywgZCwgTVs5XSwgNTY4NDQ2NDM4LCA1KTsKICAgIGQgPSBmbkcoZCwgYSwgYiwgYywgTVsxNF0sIDMyNzUxNjM2MDYsIDkpOwogICAgYyA9IGZuRyhjLCBkLCBhLCBiLCBNWzNdLCA0MTA3NjAzMzM1LCAxNCk7CiAgICBiID0gZm5HKGIsIGMsIGQsIGEsIE1bOF0sIDExNjM1MzE1MDEsIDIwKTsKICAgIGEgPSBmbkcoYSwgYiwgYywgZCwgTVsxM10sIDI4NTAyODU4MjksIDUpOwogICAgZCA9IGZuRyhkLCBhLCBiLCBjLCBNWzJdLCA0MjQzNTYzNTEyLCA5KTsKICAgIGMgPSBmbkcoYywgZCwgYSwgYiwgTVs3XSwgMTczNTMyODQ3MywgMTQpOwogICAgYiA9IGZuRyhiLCBjLCBkLCBhLCBNWzEyXSwgMjM2ODM1OTU2MiwgMjApOwogICAgYSA9IGZuSChhLCBiLCBjLCBkLCBNWzVdLCA0Mjk0NTg4NzM4LCA0KTsKICAgIGQgPSBmbkgoZCwgYSwgYiwgYywgTVs4XSwgMjI3MjM5MjgzMywgMTEpOwogICAgYyA9IGZuSChjLCBkLCBhLCBiLCBNWzExXSwgMTgzOTAzMDU2MiwgMTYpOwogICAgYiA9IGZuSChiLCBjLCBkLCBhLCBNWzE0XSwgNDI1OTY1Nzc0MCwgMjMpOwogICAgYSA9IGZuSChhLCBiLCBjLCBkLCBNWzFdLCAyNzYzOTc1MjM2LCA0KTsKICAgIGQgPSBmbkgoZCwgYSwgYiwgYywgTVs0XSwgMTI3Mjg5MzM1MywgMTEpOwogICAgYyA9IGZuSChjLCBkLCBhLCBiLCBNWzddLCA0MTM5NDY5NjY0LCAxNik7CiAgICBiID0gZm5IKGIsIGMsIGQsIGEsIE1bMTBdLCAzMjAwMjM2NjU2LCAyMyk7CiAgICBhID0gZm5IKGEsIGIsIGMsIGQsIE1bMTNdLCA2ODEyNzkxNzQsIDQpOwogICAgZCA9IGZuSChkLCBhLCBiLCBjLCBNWzBdLCAzOTM2NDMwMDc0LCAxMSk7CiAgICBjID0gZm5IKGMsIGQsIGEsIGIsIE1bM10sIDM1NzI0NDUzMTcsIDE2KTsKICAgIGIgPSBmbkgoYiwgYywgZCwgYSwgTVs2XSwgNzYwMjkxODksIDIzKTsKICAgIGEgPSBmbkgoYSwgYiwgYywgZCwgTVs5XSwgMzY1NDYwMjgwOSwgNCk7CiAgICBkID0gZm5IKGQsIGEsIGIsIGMsIE1bMTJdLCAzODczMTUxNDYxLCAxMSk7CiAgICBjID0gZm5IKGMsIGQsIGEsIGIsIE1bMTVdLCA1MzA3NDI1MjAsIDE2KTsKICAgIGIgPSBmbkgoYiwgYywgZCwgYSwgTVsyXSwgMzI5OTYyODY0NSwgMjMpOwogICAgYSA9IGZuSShhLCBiLCBjLCBkLCBNWzBdLCA0MDk2MzM2NDUyLCA2KTsKICAgIGQgPSBmbkkoZCwgYSwgYiwgYywgTVs3XSwgMTEyNjg5MTQxNSwgMTApOwogICAgYyA9IGZuSShjLCBkLCBhLCBiLCBNWzE0XSwgMjg3ODYxMjM5MSwgMTUpOwogICAgYiA9IGZuSShiLCBjLCBkLCBhLCBNWzVdLCA0MjM3NTMzMjQxLCAyMSk7CiAgICBhID0gZm5JKGEsIGIsIGMsIGQsIE1bMTJdLCAxNzAwNDg1NTcxLCA2KTsKICAgIGQgPSBmbkkoZCwgYSwgYiwgYywgTVszXSwgMjM5OTk4MDY5MCwgMTApOwogICAgYyA9IGZuSShjLCBkLCBhLCBiLCBNWzEwXSwgNDI5MzkxNTc3MywgMTUpOwogICAgYiA9IGZuSShiLCBjLCBkLCBhLCBNWzFdLCAyMjQwMDQ0NDk3LCAyMSk7CiAgICBhID0gZm5JKGEsIGIsIGMsIGQsIE1bOF0sIDE4NzMzMTMzNTksIDYpOwogICAgZCA9IGZuSShkLCBhLCBiLCBjLCBNWzE1XSwgNDI2NDM1NTU1MiwgMTApOwogICAgYyA9IGZuSShjLCBkLCBhLCBiLCBNWzZdLCAyNzM0NzY4OTE2LCAxNSk7CiAgICBiID0gZm5JKGIsIGMsIGQsIGEsIE1bMTNdLCAxMzA5MTUxNjQ5LCAyMSk7CiAgICBhID0gZm5JKGEsIGIsIGMsIGQsIE1bNF0sIDQxNDk0NDQyMjYsIDYpOwogICAgZCA9IGZuSShkLCBhLCBiLCBjLCBNWzExXSwgMzE3NDc1NjkxNywgMTApOwogICAgYyA9IGZuSShjLCBkLCBhLCBiLCBNWzJdLCA3MTg3ODcyNTksIDE1KTsKICAgIGIgPSBmbkkoYiwgYywgZCwgYSwgTVs5XSwgMzk1MTQ4MTc0NSwgMjEpOwogICAgdGhpcy5fYSA9IHRoaXMuX2EgKyBhIHwgMDsKICAgIHRoaXMuX2IgPSB0aGlzLl9iICsgYiB8IDA7CiAgICB0aGlzLl9jID0gdGhpcy5fYyArIGMgfCAwOwogICAgdGhpcy5fZCA9IHRoaXMuX2QgKyBkIHwgMDsKICB9OwogIE1ENSQxLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9ibG9ja1t0aGlzLl9ibG9ja09mZnNldCsrXSA9IDEyODsKICAgIGlmICh0aGlzLl9ibG9ja09mZnNldCA+IDU2KSB7CiAgICAgIHRoaXMuX2Jsb2NrLmZpbGwoMCwgdGhpcy5fYmxvY2tPZmZzZXQsIDY0KTsKICAgICAgdGhpcy5fdXBkYXRlKCk7CiAgICAgIHRoaXMuX2Jsb2NrT2Zmc2V0ID0gMDsKICAgIH0KICAgIHRoaXMuX2Jsb2NrLmZpbGwoMCwgdGhpcy5fYmxvY2tPZmZzZXQsIDU2KTsKICAgIHRoaXMuX2Jsb2NrLndyaXRlVUludDMyTEUodGhpcy5fbGVuZ3RoWzBdLCA1Nik7CiAgICB0aGlzLl9ibG9jay53cml0ZVVJbnQzMkxFKHRoaXMuX2xlbmd0aFsxXSwgNjApOwogICAgdGhpcy5fdXBkYXRlKCk7CiAgICB2YXIgYnVmZmVyMiA9IEJ1ZmZlciRiLmFsbG9jVW5zYWZlKDE2KTsKICAgIGJ1ZmZlcjIud3JpdGVJbnQzMkxFKHRoaXMuX2EsIDApOwogICAgYnVmZmVyMi53cml0ZUludDMyTEUodGhpcy5fYiwgNCk7CiAgICBidWZmZXIyLndyaXRlSW50MzJMRSh0aGlzLl9jLCA4KTsKICAgIGJ1ZmZlcjIud3JpdGVJbnQzMkxFKHRoaXMuX2QsIDEyKTsKICAgIHJldHVybiBidWZmZXIyOwogIH07CiAgZnVuY3Rpb24gcm90bCQxKHgsIG4pIHsKICAgIHJldHVybiB4IDw8IG4gfCB4ID4+PiAzMiAtIG47CiAgfQogIGZ1bmN0aW9uIGZuRihhLCBiLCBjLCBkLCBtLCBrLCBzKSB7CiAgICByZXR1cm4gcm90bCQxKGEgKyAoYiAmIGMgfCB+YiAmIGQpICsgbSArIGsgfCAwLCBzKSArIGIgfCAwOwogIH0KICBmdW5jdGlvbiBmbkcoYSwgYiwgYywgZCwgbSwgaywgcykgewogICAgcmV0dXJuIHJvdGwkMShhICsgKGIgJiBkIHwgYyAmIH5kKSArIG0gKyBrIHwgMCwgcykgKyBiIHwgMDsKICB9CiAgZnVuY3Rpb24gZm5IKGEsIGIsIGMsIGQsIG0sIGssIHMpIHsKICAgIHJldHVybiByb3RsJDEoYSArIChiIF4gYyBeIGQpICsgbSArIGsgfCAwLCBzKSArIGIgfCAwOwogIH0KICBmdW5jdGlvbiBmbkkoYSwgYiwgYywgZCwgbSwgaywgcykgewogICAgcmV0dXJuIHJvdGwkMShhICsgKGMgXiAoYiB8IH5kKSkgKyBtICsgayB8IDAsIHMpICsgYiB8IDA7CiAgfQogIHZhciBtZDVfanMgPSBNRDUkMTsKICB2YXIgTUQ1ID0gbWQ1X2pzOwogIHZhciBtZDUkMSA9IGZ1bmN0aW9uKGJ1ZmZlcjIpIHsKICAgIHJldHVybiBuZXcgTUQ1KCkudXBkYXRlKGJ1ZmZlcjIpLmRpZ2VzdCgpOwogIH07CiAgdmFyIEJ1ZmZlciRhID0gYnVmZmVyLkJ1ZmZlcjsKICB2YXIgaW5oZXJpdHMkNiA9IGluaGVyaXRzX2Jyb3dzZXIuZXhwb3J0czsKICB2YXIgSGFzaEJhc2UgPSBoYXNoQmFzZTsKICB2YXIgQVJSQVkxNiA9IG5ldyBBcnJheSgxNik7CiAgdmFyIHpsID0gWwogICAgMCwKICAgIDEsCiAgICAyLAogICAgMywKICAgIDQsCiAgICA1LAogICAgNiwKICAgIDcsCiAgICA4LAogICAgOSwKICAgIDEwLAogICAgMTEsCiAgICAxMiwKICAgIDEzLAogICAgMTQsCiAgICAxNSwKICAgIDcsCiAgICA0LAogICAgMTMsCiAgICAxLAogICAgMTAsCiAgICA2LAogICAgMTUsCiAgICAzLAogICAgMTIsCiAgICAwLAogICAgOSwKICAgIDUsCiAgICAyLAogICAgMTQsCiAgICAxMSwKICAgIDgsCiAgICAzLAogICAgMTAsCiAgICAxNCwKICAgIDQsCiAgICA5LAogICAgMTUsCiAgICA4LAogICAgMSwKICAgIDIsCiAgICA3LAogICAgMCwKICAgIDYsCiAgICAxMywKICAgIDExLAogICAgNSwKICAgIDEyLAogICAgMSwKICAgIDksCiAgICAxMSwKICAgIDEwLAogICAgMCwKICAgIDgsCiAgICAxMiwKICAgIDQsCiAgICAxMywKICAgIDMsCiAgICA3LAogICAgMTUsCiAgICAxNCwKICAgIDUsCiAgICA2LAogICAgMiwKICAgIDQsCiAgICAwLAogICAgNSwKICAgIDksCiAgICA3LAogICAgMTIsCiAgICAyLAogICAgMTAsCiAgICAxNCwKICAgIDEsCiAgICAzLAogICAgOCwKICAgIDExLAogICAgNiwKICAgIDE1LAogICAgMTMKICBdOwogIHZhciB6ciA9IFsKICAgIDUsCiAgICAxNCwKICAgIDcsCiAgICAwLAogICAgOSwKICAgIDIsCiAgICAxMSwKICAgIDQsCiAgICAxMywKICAgIDYsCiAgICAxNSwKICAgIDgsCiAgICAxLAogICAgMTAsCiAgICAzLAogICAgMTIsCiAgICA2LAogICAgMTEsCiAgICAzLAogICAgNywKICAgIDAsCiAgICAxMywKICAgIDUsCiAgICAxMCwKICAgIDE0LAogICAgMTUsCiAgICA4LAogICAgMTIsCiAgICA0LAogICAgOSwKICAgIDEsCiAgICAyLAogICAgMTUsCiAgICA1LAogICAgMSwKICAgIDMsCiAgICA3LAogICAgMTQsCiAgICA2LAogICAgOSwKICAgIDExLAogICAgOCwKICAgIDEyLAogICAgMiwKICAgIDEwLAogICAgMCwKICAgIDQsCiAgICAxMywKICAgIDgsCiAgICA2LAogICAgNCwKICAgIDEsCiAgICAzLAogICAgMTEsCiAgICAxNSwKICAgIDAsCiAgICA1LAogICAgMTIsCiAgICAyLAogICAgMTMsCiAgICA5LAogICAgNywKICAgIDEwLAogICAgMTQsCiAgICAxMiwKICAgIDE1LAogICAgMTAsCiAgICA0LAogICAgMSwKICAgIDUsCiAgICA4LAogICAgNywKICAgIDYsCiAgICAyLAogICAgMTMsCiAgICAxNCwKICAgIDAsCiAgICAzLAogICAgOSwKICAgIDExCiAgXTsKICB2YXIgc2wgPSBbCiAgICAxMSwKICAgIDE0LAogICAgMTUsCiAgICAxMiwKICAgIDUsCiAgICA4LAogICAgNywKICAgIDksCiAgICAxMSwKICAgIDEzLAogICAgMTQsCiAgICAxNSwKICAgIDYsCiAgICA3LAogICAgOSwKICAgIDgsCiAgICA3LAogICAgNiwKICAgIDgsCiAgICAxMywKICAgIDExLAogICAgOSwKICAgIDcsCiAgICAxNSwKICAgIDcsCiAgICAxMiwKICAgIDE1LAogICAgOSwKICAgIDExLAogICAgNywKICAgIDEzLAogICAgMTIsCiAgICAxMSwKICAgIDEzLAogICAgNiwKICAgIDcsCiAgICAxNCwKICAgIDksCiAgICAxMywKICAgIDE1LAogICAgMTQsCiAgICA4LAogICAgMTMsCiAgICA2LAogICAgNSwKICAgIDEyLAogICAgNywKICAgIDUsCiAgICAxMSwKICAgIDEyLAogICAgMTQsCiAgICAxNSwKICAgIDE0LAogICAgMTUsCiAgICA5LAogICAgOCwKICAgIDksCiAgICAxNCwKICAgIDUsCiAgICA2LAogICAgOCwKICAgIDYsCiAgICA1LAogICAgMTIsCiAgICA5LAogICAgMTUsCiAgICA1LAogICAgMTEsCiAgICA2LAogICAgOCwKICAgIDEzLAogICAgMTIsCiAgICA1LAogICAgMTIsCiAgICAxMywKICAgIDE0LAogICAgMTEsCiAgICA4LAogICAgNSwKICAgIDYKICBdOwogIHZhciBzciA9IFsKICAgIDgsCiAgICA5LAogICAgOSwKICAgIDExLAogICAgMTMsCiAgICAxNSwKICAgIDE1LAogICAgNSwKICAgIDcsCiAgICA3LAogICAgOCwKICAgIDExLAogICAgMTQsCiAgICAxNCwKICAgIDEyLAogICAgNiwKICAgIDksCiAgICAxMywKICAgIDE1LAogICAgNywKICAgIDEyLAogICAgOCwKICAgIDksCiAgICAxMSwKICAgIDcsCiAgICA3LAogICAgMTIsCiAgICA3LAogICAgNiwKICAgIDE1LAogICAgMTMsCiAgICAxMSwKICAgIDksCiAgICA3LAogICAgMTUsCiAgICAxMSwKICAgIDgsCiAgICA2LAogICAgNiwKICAgIDE0LAogICAgMTIsCiAgICAxMywKICAgIDUsCiAgICAxNCwKICAgIDEzLAogICAgMTMsCiAgICA3LAogICAgNSwKICAgIDE1LAogICAgNSwKICAgIDgsCiAgICAxMSwKICAgIDE0LAogICAgMTQsCiAgICA2LAogICAgMTQsCiAgICA2LAogICAgOSwKICAgIDEyLAogICAgOSwKICAgIDEyLAogICAgNSwKICAgIDE1LAogICAgOCwKICAgIDgsCiAgICA1LAogICAgMTIsCiAgICA5LAogICAgMTIsCiAgICA1LAogICAgMTQsCiAgICA2LAogICAgOCwKICAgIDEzLAogICAgNiwKICAgIDUsCiAgICAxNSwKICAgIDEzLAogICAgMTEsCiAgICAxMQogIF07CiAgdmFyIGhsID0gWzAsIDE1MTg1MDAyNDksIDE4NTk3NzUzOTMsIDI0MDA5NTk3MDgsIDI4NDA4NTM4MzhdOwogIHZhciBociA9IFsxMzUyODI5OTI2LCAxNTQ4NjAzNjg0LCAxODM2MDcyNjkxLCAyMDUzOTk0MjE3LCAwXTsKICBmdW5jdGlvbiBSSVBFTUQxNjAkMSgpIHsKICAgIEhhc2hCYXNlLmNhbGwodGhpcywgNjQpOwogICAgdGhpcy5fYSA9IDE3MzI1ODQxOTM7CiAgICB0aGlzLl9iID0gNDAyMzIzMzQxNzsKICAgIHRoaXMuX2MgPSAyNTYyMzgzMTAyOwogICAgdGhpcy5fZCA9IDI3MTczMzg3ODsKICAgIHRoaXMuX2UgPSAzMjg1Mzc3NTIwOwogIH0KICBpbmhlcml0cyQ2KFJJUEVNRDE2MCQxLCBIYXNoQmFzZSk7CiAgUklQRU1EMTYwJDEucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbigpIHsKICAgIHZhciB3b3JkcyA9IEFSUkFZMTY7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8IDE2OyArK2opCiAgICAgIHdvcmRzW2pdID0gdGhpcy5fYmxvY2sucmVhZEludDMyTEUoaiAqIDQpOwogICAgdmFyIGFsID0gdGhpcy5fYSB8IDA7CiAgICB2YXIgYmwgPSB0aGlzLl9iIHwgMDsKICAgIHZhciBjbCA9IHRoaXMuX2MgfCAwOwogICAgdmFyIGRsID0gdGhpcy5fZCB8IDA7CiAgICB2YXIgZWwgPSB0aGlzLl9lIHwgMDsKICAgIHZhciBhciA9IHRoaXMuX2EgfCAwOwogICAgdmFyIGJyID0gdGhpcy5fYiB8IDA7CiAgICB2YXIgY3IgPSB0aGlzLl9jIHwgMDsKICAgIHZhciBkciA9IHRoaXMuX2QgfCAwOwogICAgdmFyIGVyID0gdGhpcy5fZSB8IDA7CiAgICBmb3IgKHZhciBpMiA9IDA7IGkyIDwgODA7IGkyICs9IDEpIHsKICAgICAgdmFyIHRsOwogICAgICB2YXIgdHI7CiAgICAgIGlmIChpMiA8IDE2KSB7CiAgICAgICAgdGwgPSBmbjEoYWwsIGJsLCBjbCwgZGwsIGVsLCB3b3Jkc1t6bFtpMl1dLCBobFswXSwgc2xbaTJdKTsKICAgICAgICB0ciA9IGZuNShhciwgYnIsIGNyLCBkciwgZXIsIHdvcmRzW3pyW2kyXV0sIGhyWzBdLCBzcltpMl0pOwogICAgICB9IGVsc2UgaWYgKGkyIDwgMzIpIHsKICAgICAgICB0bCA9IGZuMihhbCwgYmwsIGNsLCBkbCwgZWwsIHdvcmRzW3psW2kyXV0sIGhsWzFdLCBzbFtpMl0pOwogICAgICAgIHRyID0gZm40KGFyLCBiciwgY3IsIGRyLCBlciwgd29yZHNbenJbaTJdXSwgaHJbMV0sIHNyW2kyXSk7CiAgICAgIH0gZWxzZSBpZiAoaTIgPCA0OCkgewogICAgICAgIHRsID0gZm4zKGFsLCBibCwgY2wsIGRsLCBlbCwgd29yZHNbemxbaTJdXSwgaGxbMl0sIHNsW2kyXSk7CiAgICAgICAgdHIgPSBmbjMoYXIsIGJyLCBjciwgZHIsIGVyLCB3b3Jkc1t6cltpMl1dLCBoclsyXSwgc3JbaTJdKTsKICAgICAgfSBlbHNlIGlmIChpMiA8IDY0KSB7CiAgICAgICAgdGwgPSBmbjQoYWwsIGJsLCBjbCwgZGwsIGVsLCB3b3Jkc1t6bFtpMl1dLCBobFszXSwgc2xbaTJdKTsKICAgICAgICB0ciA9IGZuMihhciwgYnIsIGNyLCBkciwgZXIsIHdvcmRzW3pyW2kyXV0sIGhyWzNdLCBzcltpMl0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRsID0gZm41KGFsLCBibCwgY2wsIGRsLCBlbCwgd29yZHNbemxbaTJdXSwgaGxbNF0sIHNsW2kyXSk7CiAgICAgICAgdHIgPSBmbjEoYXIsIGJyLCBjciwgZHIsIGVyLCB3b3Jkc1t6cltpMl1dLCBocls0XSwgc3JbaTJdKTsKICAgICAgfQogICAgICBhbCA9IGVsOwogICAgICBlbCA9IGRsOwogICAgICBkbCA9IHJvdGwoY2wsIDEwKTsKICAgICAgY2wgPSBibDsKICAgICAgYmwgPSB0bDsKICAgICAgYXIgPSBlcjsKICAgICAgZXIgPSBkcjsKICAgICAgZHIgPSByb3RsKGNyLCAxMCk7CiAgICAgIGNyID0gYnI7CiAgICAgIGJyID0gdHI7CiAgICB9CiAgICB2YXIgdCA9IHRoaXMuX2IgKyBjbCArIGRyIHwgMDsKICAgIHRoaXMuX2IgPSB0aGlzLl9jICsgZGwgKyBlciB8IDA7CiAgICB0aGlzLl9jID0gdGhpcy5fZCArIGVsICsgYXIgfCAwOwogICAgdGhpcy5fZCA9IHRoaXMuX2UgKyBhbCArIGJyIHwgMDsKICAgIHRoaXMuX2UgPSB0aGlzLl9hICsgYmwgKyBjciB8IDA7CiAgICB0aGlzLl9hID0gdDsKICB9OwogIFJJUEVNRDE2MCQxLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9ibG9ja1t0aGlzLl9ibG9ja09mZnNldCsrXSA9IDEyODsKICAgIGlmICh0aGlzLl9ibG9ja09mZnNldCA+IDU2KSB7CiAgICAgIHRoaXMuX2Jsb2NrLmZpbGwoMCwgdGhpcy5fYmxvY2tPZmZzZXQsIDY0KTsKICAgICAgdGhpcy5fdXBkYXRlKCk7CiAgICAgIHRoaXMuX2Jsb2NrT2Zmc2V0ID0gMDsKICAgIH0KICAgIHRoaXMuX2Jsb2NrLmZpbGwoMCwgdGhpcy5fYmxvY2tPZmZzZXQsIDU2KTsKICAgIHRoaXMuX2Jsb2NrLndyaXRlVUludDMyTEUodGhpcy5fbGVuZ3RoWzBdLCA1Nik7CiAgICB0aGlzLl9ibG9jay53cml0ZVVJbnQzMkxFKHRoaXMuX2xlbmd0aFsxXSwgNjApOwogICAgdGhpcy5fdXBkYXRlKCk7CiAgICB2YXIgYnVmZmVyMiA9IEJ1ZmZlciRhLmFsbG9jID8gQnVmZmVyJGEuYWxsb2MoMjApIDogbmV3IEJ1ZmZlciRhKDIwKTsKICAgIGJ1ZmZlcjIud3JpdGVJbnQzMkxFKHRoaXMuX2EsIDApOwogICAgYnVmZmVyMi53cml0ZUludDMyTEUodGhpcy5fYiwgNCk7CiAgICBidWZmZXIyLndyaXRlSW50MzJMRSh0aGlzLl9jLCA4KTsKICAgIGJ1ZmZlcjIud3JpdGVJbnQzMkxFKHRoaXMuX2QsIDEyKTsKICAgIGJ1ZmZlcjIud3JpdGVJbnQzMkxFKHRoaXMuX2UsIDE2KTsKICAgIHJldHVybiBidWZmZXIyOwogIH07CiAgZnVuY3Rpb24gcm90bCh4LCBuKSB7CiAgICByZXR1cm4geCA8PCBuIHwgeCA+Pj4gMzIgLSBuOwogIH0KICBmdW5jdGlvbiBmbjEoYSwgYiwgYywgZCwgZSwgbSwgaywgcykgewogICAgcmV0dXJuIHJvdGwoYSArIChiIF4gYyBeIGQpICsgbSArIGsgfCAwLCBzKSArIGUgfCAwOwogIH0KICBmdW5jdGlvbiBmbjIoYSwgYiwgYywgZCwgZSwgbSwgaywgcykgewogICAgcmV0dXJuIHJvdGwoYSArIChiICYgYyB8IH5iICYgZCkgKyBtICsgayB8IDAsIHMpICsgZSB8IDA7CiAgfQogIGZ1bmN0aW9uIGZuMyhhLCBiLCBjLCBkLCBlLCBtLCBrLCBzKSB7CiAgICByZXR1cm4gcm90bChhICsgKChiIHwgfmMpIF4gZCkgKyBtICsgayB8IDAsIHMpICsgZSB8IDA7CiAgfQogIGZ1bmN0aW9uIGZuNChhLCBiLCBjLCBkLCBlLCBtLCBrLCBzKSB7CiAgICByZXR1cm4gcm90bChhICsgKGIgJiBkIHwgYyAmIH5kKSArIG0gKyBrIHwgMCwgcykgKyBlIHwgMDsKICB9CiAgZnVuY3Rpb24gZm41KGEsIGIsIGMsIGQsIGUsIG0sIGssIHMpIHsKICAgIHJldHVybiByb3RsKGEgKyAoYiBeIChjIHwgfmQpKSArIG0gKyBrIHwgMCwgcykgKyBlIHwgMDsKICB9CiAgdmFyIHJpcGVtZDE2MCA9IFJJUEVNRDE2MCQxOwogIHZhciBzaGFfanMgPSB7IGV4cG9ydHM6IHt9IH07CiAgdmFyIEJ1ZmZlciQ5ID0gc2FmZUJ1ZmZlci5leHBvcnRzLkJ1ZmZlcjsKICBmdW5jdGlvbiBIYXNoJDYoYmxvY2tTaXplLCBmaW5hbFNpemUpIHsKICAgIHRoaXMuX2Jsb2NrID0gQnVmZmVyJDkuYWxsb2MoYmxvY2tTaXplKTsKICAgIHRoaXMuX2ZpbmFsU2l6ZSA9IGZpbmFsU2l6ZTsKICAgIHRoaXMuX2Jsb2NrU2l6ZSA9IGJsb2NrU2l6ZTsKICAgIHRoaXMuX2xlbiA9IDA7CiAgfQogIEhhc2gkNi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oZGF0YSwgZW5jKSB7CiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICJzdHJpbmciKSB7CiAgICAgIGVuYyA9IGVuYyB8fCAidXRmOCI7CiAgICAgIGRhdGEgPSBCdWZmZXIkOS5mcm9tKGRhdGEsIGVuYyk7CiAgICB9CiAgICB2YXIgYmxvY2sgPSB0aGlzLl9ibG9jazsKICAgIHZhciBibG9ja1NpemUgPSB0aGlzLl9ibG9ja1NpemU7CiAgICB2YXIgbGVuZ3RoID0gZGF0YS5sZW5ndGg7CiAgICB2YXIgYWNjdW0gPSB0aGlzLl9sZW47CiAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBsZW5ndGg7ICkgewogICAgICB2YXIgYXNzaWduZWQgPSBhY2N1bSAlIGJsb2NrU2l6ZTsKICAgICAgdmFyIHJlbWFpbmRlciA9IE1hdGgubWluKGxlbmd0aCAtIG9mZnNldCwgYmxvY2tTaXplIC0gYXNzaWduZWQpOwogICAgICBmb3IgKHZhciBpMiA9IDA7IGkyIDwgcmVtYWluZGVyOyBpMisrKSB7CiAgICAgICAgYmxvY2tbYXNzaWduZWQgKyBpMl0gPSBkYXRhW29mZnNldCArIGkyXTsKICAgICAgfQogICAgICBhY2N1bSArPSByZW1haW5kZXI7CiAgICAgIG9mZnNldCArPSByZW1haW5kZXI7CiAgICAgIGlmIChhY2N1bSAlIGJsb2NrU2l6ZSA9PT0gMCkgewogICAgICAgIHRoaXMuX3VwZGF0ZShibG9jayk7CiAgICAgIH0KICAgIH0KICAgIHRoaXMuX2xlbiArPSBsZW5ndGg7CiAgICByZXR1cm4gdGhpczsKICB9OwogIEhhc2gkNi5wcm90b3R5cGUuZGlnZXN0ID0gZnVuY3Rpb24oZW5jKSB7CiAgICB2YXIgcmVtID0gdGhpcy5fbGVuICUgdGhpcy5fYmxvY2tTaXplOwogICAgdGhpcy5fYmxvY2tbcmVtXSA9IDEyODsKICAgIHRoaXMuX2Jsb2NrLmZpbGwoMCwgcmVtICsgMSk7CiAgICBpZiAocmVtID49IHRoaXMuX2ZpbmFsU2l6ZSkgewogICAgICB0aGlzLl91cGRhdGUodGhpcy5fYmxvY2spOwogICAgICB0aGlzLl9ibG9jay5maWxsKDApOwogICAgfQogICAgdmFyIGJpdHMgPSB0aGlzLl9sZW4gKiA4OwogICAgaWYgKGJpdHMgPD0gNDI5NDk2NzI5NSkgewogICAgICB0aGlzLl9ibG9jay53cml0ZVVJbnQzMkJFKGJpdHMsIHRoaXMuX2Jsb2NrU2l6ZSAtIDQpOwogICAgfSBlbHNlIHsKICAgICAgdmFyIGxvd0JpdHMgPSAoYml0cyAmIDQyOTQ5NjcyOTUpID4+PiAwOwogICAgICB2YXIgaGlnaEJpdHMgPSAoYml0cyAtIGxvd0JpdHMpIC8gNDI5NDk2NzI5NjsKICAgICAgdGhpcy5fYmxvY2sud3JpdGVVSW50MzJCRShoaWdoQml0cywgdGhpcy5fYmxvY2tTaXplIC0gOCk7CiAgICAgIHRoaXMuX2Jsb2NrLndyaXRlVUludDMyQkUobG93Qml0cywgdGhpcy5fYmxvY2tTaXplIC0gNCk7CiAgICB9CiAgICB0aGlzLl91cGRhdGUodGhpcy5fYmxvY2spOwogICAgdmFyIGhhc2gyID0gdGhpcy5faGFzaCgpOwogICAgcmV0dXJuIGVuYyA/IGhhc2gyLnRvU3RyaW5nKGVuYykgOiBoYXNoMjsKICB9OwogIEhhc2gkNi5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgdGhyb3cgbmV3IEVycm9yKCJfdXBkYXRlIG11c3QgYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2xhc3MiKTsKICB9OwogIHZhciBoYXNoID0gSGFzaCQ2OwogIHZhciBpbmhlcml0cyQ1ID0gaW5oZXJpdHNfYnJvd3Nlci5leHBvcnRzOwogIHZhciBIYXNoJDUgPSBoYXNoOwogIHZhciBCdWZmZXIkOCA9IHNhZmVCdWZmZXIuZXhwb3J0cy5CdWZmZXI7CiAgdmFyIEskMyA9IFsKICAgIDE1MTg1MDAyNDksCiAgICAxODU5Nzc1MzkzLAogICAgMjQwMDk1OTcwOCB8IDAsCiAgICAzMzk1NDY5NzgyIHwgMAogIF07CiAgdmFyIFckNSA9IG5ldyBBcnJheSg4MCk7CiAgZnVuY3Rpb24gU2hhKCkgewogICAgdGhpcy5pbml0KCk7CiAgICB0aGlzLl93ID0gVyQ1OwogICAgSGFzaCQ1LmNhbGwodGhpcywgNjQsIDU2KTsKICB9CiAgaW5oZXJpdHMkNShTaGEsIEhhc2gkNSk7CiAgU2hhLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9hID0gMTczMjU4NDE5MzsKICAgIHRoaXMuX2IgPSA0MDIzMjMzNDE3OwogICAgdGhpcy5fYyA9IDI1NjIzODMxMDI7CiAgICB0aGlzLl9kID0gMjcxNzMzODc4OwogICAgdGhpcy5fZSA9IDMyODUzNzc1MjA7CiAgICByZXR1cm4gdGhpczsKICB9OwogIGZ1bmN0aW9uIHJvdGw1JDEobnVtKSB7CiAgICByZXR1cm4gbnVtIDw8IDUgfCBudW0gPj4+IDI3OwogIH0KICBmdW5jdGlvbiByb3RsMzAkMShudW0pIHsKICAgIHJldHVybiBudW0gPDwgMzAgfCBudW0gPj4+IDI7CiAgfQogIGZ1bmN0aW9uIGZ0JDEocywgYiwgYywgZCkgewogICAgaWYgKHMgPT09IDApCiAgICAgIHJldHVybiBiICYgYyB8IH5iICYgZDsKICAgIGlmIChzID09PSAyKQogICAgICByZXR1cm4gYiAmIGMgfCBiICYgZCB8IGMgJiBkOwogICAgcmV0dXJuIGIgXiBjIF4gZDsKICB9CiAgU2hhLnByb3RvdHlwZS5fdXBkYXRlID0gZnVuY3Rpb24oTSkgewogICAgdmFyIFcyID0gdGhpcy5fdzsKICAgIHZhciBhID0gdGhpcy5fYSB8IDA7CiAgICB2YXIgYiA9IHRoaXMuX2IgfCAwOwogICAgdmFyIGMgPSB0aGlzLl9jIHwgMDsKICAgIHZhciBkID0gdGhpcy5fZCB8IDA7CiAgICB2YXIgZSA9IHRoaXMuX2UgfCAwOwogICAgZm9yICh2YXIgaTIgPSAwOyBpMiA8IDE2OyArK2kyKQogICAgICBXMltpMl0gPSBNLnJlYWRJbnQzMkJFKGkyICogNCk7CiAgICBmb3IgKDsgaTIgPCA4MDsgKytpMikKICAgICAgVzJbaTJdID0gVzJbaTIgLSAzXSBeIFcyW2kyIC0gOF0gXiBXMltpMiAtIDE0XSBeIFcyW2kyIC0gMTZdOwogICAgZm9yICh2YXIgaiA9IDA7IGogPCA4MDsgKytqKSB7CiAgICAgIHZhciBzID0gfn4oaiAvIDIwKTsKICAgICAgdmFyIHQgPSByb3RsNSQxKGEpICsgZnQkMShzLCBiLCBjLCBkKSArIGUgKyBXMltqXSArIEskM1tzXSB8IDA7CiAgICAgIGUgPSBkOwogICAgICBkID0gYzsKICAgICAgYyA9IHJvdGwzMCQxKGIpOwogICAgICBiID0gYTsKICAgICAgYSA9IHQ7CiAgICB9CiAgICB0aGlzLl9hID0gYSArIHRoaXMuX2EgfCAwOwogICAgdGhpcy5fYiA9IGIgKyB0aGlzLl9iIHwgMDsKICAgIHRoaXMuX2MgPSBjICsgdGhpcy5fYyB8IDA7CiAgICB0aGlzLl9kID0gZCArIHRoaXMuX2QgfCAwOwogICAgdGhpcy5fZSA9IGUgKyB0aGlzLl9lIHwgMDsKICB9OwogIFNoYS5wcm90b3R5cGUuX2hhc2ggPSBmdW5jdGlvbigpIHsKICAgIHZhciBIID0gQnVmZmVyJDguYWxsb2NVbnNhZmUoMjApOwogICAgSC53cml0ZUludDMyQkUodGhpcy5fYSB8IDAsIDApOwogICAgSC53cml0ZUludDMyQkUodGhpcy5fYiB8IDAsIDQpOwogICAgSC53cml0ZUludDMyQkUodGhpcy5fYyB8IDAsIDgpOwogICAgSC53cml0ZUludDMyQkUodGhpcy5fZCB8IDAsIDEyKTsKICAgIEgud3JpdGVJbnQzMkJFKHRoaXMuX2UgfCAwLCAxNik7CiAgICByZXR1cm4gSDsKICB9OwogIHZhciBzaGEkMSA9IFNoYTsKICB2YXIgaW5oZXJpdHMkNCA9IGluaGVyaXRzX2Jyb3dzZXIuZXhwb3J0czsKICB2YXIgSGFzaCQ0ID0gaGFzaDsKICB2YXIgQnVmZmVyJDcgPSBzYWZlQnVmZmVyLmV4cG9ydHMuQnVmZmVyOwogIHZhciBLJDIgPSBbCiAgICAxNTE4NTAwMjQ5LAogICAgMTg1OTc3NTM5MywKICAgIDI0MDA5NTk3MDggfCAwLAogICAgMzM5NTQ2OTc4MiB8IDAKICBdOwogIHZhciBXJDQgPSBuZXcgQXJyYXkoODApOwogIGZ1bmN0aW9uIFNoYTEoKSB7CiAgICB0aGlzLmluaXQoKTsKICAgIHRoaXMuX3cgPSBXJDQ7CiAgICBIYXNoJDQuY2FsbCh0aGlzLCA2NCwgNTYpOwogIH0KICBpbmhlcml0cyQ0KFNoYTEsIEhhc2gkNCk7CiAgU2hhMS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy5fYSA9IDE3MzI1ODQxOTM7CiAgICB0aGlzLl9iID0gNDAyMzIzMzQxNzsKICAgIHRoaXMuX2MgPSAyNTYyMzgzMTAyOwogICAgdGhpcy5fZCA9IDI3MTczMzg3ODsKICAgIHRoaXMuX2UgPSAzMjg1Mzc3NTIwOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBmdW5jdGlvbiByb3RsMShudW0pIHsKICAgIHJldHVybiBudW0gPDwgMSB8IG51bSA+Pj4gMzE7CiAgfQogIGZ1bmN0aW9uIHJvdGw1KG51bSkgewogICAgcmV0dXJuIG51bSA8PCA1IHwgbnVtID4+PiAyNzsKICB9CiAgZnVuY3Rpb24gcm90bDMwKG51bSkgewogICAgcmV0dXJuIG51bSA8PCAzMCB8IG51bSA+Pj4gMjsKICB9CiAgZnVuY3Rpb24gZnQocywgYiwgYywgZCkgewogICAgaWYgKHMgPT09IDApCiAgICAgIHJldHVybiBiICYgYyB8IH5iICYgZDsKICAgIGlmIChzID09PSAyKQogICAgICByZXR1cm4gYiAmIGMgfCBiICYgZCB8IGMgJiBkOwogICAgcmV0dXJuIGIgXiBjIF4gZDsKICB9CiAgU2hhMS5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uKE0pIHsKICAgIHZhciBXMiA9IHRoaXMuX3c7CiAgICB2YXIgYSA9IHRoaXMuX2EgfCAwOwogICAgdmFyIGIgPSB0aGlzLl9iIHwgMDsKICAgIHZhciBjID0gdGhpcy5fYyB8IDA7CiAgICB2YXIgZCA9IHRoaXMuX2QgfCAwOwogICAgdmFyIGUgPSB0aGlzLl9lIHwgMDsKICAgIGZvciAodmFyIGkyID0gMDsgaTIgPCAxNjsgKytpMikKICAgICAgVzJbaTJdID0gTS5yZWFkSW50MzJCRShpMiAqIDQpOwogICAgZm9yICg7IGkyIDwgODA7ICsraTIpCiAgICAgIFcyW2kyXSA9IHJvdGwxKFcyW2kyIC0gM10gXiBXMltpMiAtIDhdIF4gVzJbaTIgLSAxNF0gXiBXMltpMiAtIDE2XSk7CiAgICBmb3IgKHZhciBqID0gMDsgaiA8IDgwOyArK2opIHsKICAgICAgdmFyIHMgPSB+fihqIC8gMjApOwogICAgICB2YXIgdCA9IHJvdGw1KGEpICsgZnQocywgYiwgYywgZCkgKyBlICsgVzJbal0gKyBLJDJbc10gfCAwOwogICAgICBlID0gZDsKICAgICAgZCA9IGM7CiAgICAgIGMgPSByb3RsMzAoYik7CiAgICAgIGIgPSBhOwogICAgICBhID0gdDsKICAgIH0KICAgIHRoaXMuX2EgPSBhICsgdGhpcy5fYSB8IDA7CiAgICB0aGlzLl9iID0gYiArIHRoaXMuX2IgfCAwOwogICAgdGhpcy5fYyA9IGMgKyB0aGlzLl9jIHwgMDsKICAgIHRoaXMuX2QgPSBkICsgdGhpcy5fZCB8IDA7CiAgICB0aGlzLl9lID0gZSArIHRoaXMuX2UgfCAwOwogIH07CiAgU2hhMS5wcm90b3R5cGUuX2hhc2ggPSBmdW5jdGlvbigpIHsKICAgIHZhciBIID0gQnVmZmVyJDcuYWxsb2NVbnNhZmUoMjApOwogICAgSC53cml0ZUludDMyQkUodGhpcy5fYSB8IDAsIDApOwogICAgSC53cml0ZUludDMyQkUodGhpcy5fYiB8IDAsIDQpOwogICAgSC53cml0ZUludDMyQkUodGhpcy5fYyB8IDAsIDgpOwogICAgSC53cml0ZUludDMyQkUodGhpcy5fZCB8IDAsIDEyKTsKICAgIEgud3JpdGVJbnQzMkJFKHRoaXMuX2UgfCAwLCAxNik7CiAgICByZXR1cm4gSDsKICB9OwogIHZhciBzaGExID0gU2hhMTsKICB2YXIgaW5oZXJpdHMkMyA9IGluaGVyaXRzX2Jyb3dzZXIuZXhwb3J0czsKICB2YXIgSGFzaCQzID0gaGFzaDsKICB2YXIgQnVmZmVyJDYgPSBzYWZlQnVmZmVyLmV4cG9ydHMuQnVmZmVyOwogIHZhciBLJDEgPSBbCiAgICAxMTE2MzUyNDA4LAogICAgMTg5OTQ0NzQ0MSwKICAgIDMwNDkzMjM0NzEsCiAgICAzOTIxMDA5NTczLAogICAgOTYxOTg3MTYzLAogICAgMTUwODk3MDk5MywKICAgIDI0NTM2MzU3NDgsCiAgICAyODcwNzYzMjIxLAogICAgMzYyNDM4MTA4MCwKICAgIDMxMDU5ODQwMSwKICAgIDYwNzIyNTI3OCwKICAgIDE0MjY4ODE5ODcsCiAgICAxOTI1MDc4Mzg4LAogICAgMjE2MjA3ODIwNiwKICAgIDI2MTQ4ODgxMDMsCiAgICAzMjQ4MjIyNTgwLAogICAgMzgzNTM5MDQwMSwKICAgIDQwMjIyMjQ3NzQsCiAgICAyNjQzNDcwNzgsCiAgICA2MDQ4MDc2MjgsCiAgICA3NzAyNTU5ODMsCiAgICAxMjQ5MTUwMTIyLAogICAgMTU1NTA4MTY5MiwKICAgIDE5OTYwNjQ5ODYsCiAgICAyNTU0MjIwODgyLAogICAgMjgyMTgzNDM0OSwKICAgIDI5NTI5OTY4MDgsCiAgICAzMjEwMzEzNjcxLAogICAgMzMzNjU3MTg5MSwKICAgIDM1ODQ1Mjg3MTEsCiAgICAxMTM5MjY5OTMsCiAgICAzMzgyNDE4OTUsCiAgICA2NjYzMDcyMDUsCiAgICA3NzM1Mjk5MTIsCiAgICAxMjk0NzU3MzcyLAogICAgMTM5NjE4MjI5MSwKICAgIDE2OTUxODM3MDAsCiAgICAxOTg2NjYxMDUxLAogICAgMjE3NzAyNjM1MCwKICAgIDI0NTY5NTYwMzcsCiAgICAyNzMwNDg1OTIxLAogICAgMjgyMDMwMjQxMSwKICAgIDMyNTk3MzA4MDAsCiAgICAzMzQ1NzY0NzcxLAogICAgMzUxNjA2NTgxNywKICAgIDM2MDAzNTI4MDQsCiAgICA0MDk0NTcxOTA5LAogICAgMjc1NDIzMzQ0LAogICAgNDMwMjI3NzM0LAogICAgNTA2OTQ4NjE2LAogICAgNjU5MDYwNTU2LAogICAgODgzOTk3ODc3LAogICAgOTU4MTM5NTcxLAogICAgMTMyMjgyMjIxOCwKICAgIDE1MzcwMDIwNjMsCiAgICAxNzQ3ODczNzc5LAogICAgMTk1NTU2MjIyMiwKICAgIDIwMjQxMDQ4MTUsCiAgICAyMjI3NzMwNDUyLAogICAgMjM2MTg1MjQyNCwKICAgIDI0Mjg0MzY0NzQsCiAgICAyNzU2NzM0MTg3LAogICAgMzIwNDAzMTQ3OSwKICAgIDMzMjkzMjUyOTgKICBdOwogIHZhciBXJDMgPSBuZXcgQXJyYXkoNjQpOwogIGZ1bmN0aW9uIFNoYTI1NiQxKCkgewogICAgdGhpcy5pbml0KCk7CiAgICB0aGlzLl93ID0gVyQzOwogICAgSGFzaCQzLmNhbGwodGhpcywgNjQsIDU2KTsKICB9CiAgaW5oZXJpdHMkMyhTaGEyNTYkMSwgSGFzaCQzKTsKICBTaGEyNTYkMS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkgewogICAgdGhpcy5fYSA9IDE3NzkwMzM3MDM7CiAgICB0aGlzLl9iID0gMzE0NDEzNDI3NzsKICAgIHRoaXMuX2MgPSAxMDEzOTA0MjQyOwogICAgdGhpcy5fZCA9IDI3NzM0ODA3NjI7CiAgICB0aGlzLl9lID0gMTM1OTg5MzExOTsKICAgIHRoaXMuX2YgPSAyNjAwODIyOTI0OwogICAgdGhpcy5fZyA9IDUyODczNDYzNTsKICAgIHRoaXMuX2ggPSAxNTQxNDU5MjI1OwogICAgcmV0dXJuIHRoaXM7CiAgfTsKICBmdW5jdGlvbiBjaCh4LCB5LCB6KSB7CiAgICByZXR1cm4geiBeIHggJiAoeSBeIHopOwogIH0KICBmdW5jdGlvbiBtYWokMSh4LCB5LCB6KSB7CiAgICByZXR1cm4geCAmIHkgfCB6ICYgKHggfCB5KTsKICB9CiAgZnVuY3Rpb24gc2lnbWEwJDEoeCkgewogICAgcmV0dXJuICh4ID4+PiAyIHwgeCA8PCAzMCkgXiAoeCA+Pj4gMTMgfCB4IDw8IDE5KSBeICh4ID4+PiAyMiB8IHggPDwgMTApOwogIH0KICBmdW5jdGlvbiBzaWdtYTEkMSh4KSB7CiAgICByZXR1cm4gKHggPj4+IDYgfCB4IDw8IDI2KSBeICh4ID4+PiAxMSB8IHggPDwgMjEpIF4gKHggPj4+IDI1IHwgeCA8PCA3KTsKICB9CiAgZnVuY3Rpb24gZ2FtbWEwKHgpIHsKICAgIHJldHVybiAoeCA+Pj4gNyB8IHggPDwgMjUpIF4gKHggPj4+IDE4IHwgeCA8PCAxNCkgXiB4ID4+PiAzOwogIH0KICBmdW5jdGlvbiBnYW1tYTEoeCkgewogICAgcmV0dXJuICh4ID4+PiAxNyB8IHggPDwgMTUpIF4gKHggPj4+IDE5IHwgeCA8PCAxMykgXiB4ID4+PiAxMDsKICB9CiAgU2hhMjU2JDEucHJvdG90eXBlLl91cGRhdGUgPSBmdW5jdGlvbihNKSB7CiAgICB2YXIgVzIgPSB0aGlzLl93OwogICAgdmFyIGEgPSB0aGlzLl9hIHwgMDsKICAgIHZhciBiID0gdGhpcy5fYiB8IDA7CiAgICB2YXIgYyA9IHRoaXMuX2MgfCAwOwogICAgdmFyIGQgPSB0aGlzLl9kIHwgMDsKICAgIHZhciBlID0gdGhpcy5fZSB8IDA7CiAgICB2YXIgZiA9IHRoaXMuX2YgfCAwOwogICAgdmFyIGcgPSB0aGlzLl9nIHwgMDsKICAgIHZhciBoID0gdGhpcy5faCB8IDA7CiAgICBmb3IgKHZhciBpMiA9IDA7IGkyIDwgMTY7ICsraTIpCiAgICAgIFcyW2kyXSA9IE0ucmVhZEludDMyQkUoaTIgKiA0KTsKICAgIGZvciAoOyBpMiA8IDY0OyArK2kyKQogICAgICBXMltpMl0gPSBnYW1tYTEoVzJbaTIgLSAyXSkgKyBXMltpMiAtIDddICsgZ2FtbWEwKFcyW2kyIC0gMTVdKSArIFcyW2kyIC0gMTZdIHwgMDsKICAgIGZvciAodmFyIGogPSAwOyBqIDwgNjQ7ICsraikgewogICAgICB2YXIgVDEgPSBoICsgc2lnbWExJDEoZSkgKyBjaChlLCBmLCBnKSArIEskMVtqXSArIFcyW2pdIHwgMDsKICAgICAgdmFyIFQyID0gc2lnbWEwJDEoYSkgKyBtYWokMShhLCBiLCBjKSB8IDA7CiAgICAgIGggPSBnOwogICAgICBnID0gZjsKICAgICAgZiA9IGU7CiAgICAgIGUgPSBkICsgVDEgfCAwOwogICAgICBkID0gYzsKICAgICAgYyA9IGI7CiAgICAgIGIgPSBhOwogICAgICBhID0gVDEgKyBUMiB8IDA7CiAgICB9CiAgICB0aGlzLl9hID0gYSArIHRoaXMuX2EgfCAwOwogICAgdGhpcy5fYiA9IGIgKyB0aGlzLl9iIHwgMDsKICAgIHRoaXMuX2MgPSBjICsgdGhpcy5fYyB8IDA7CiAgICB0aGlzLl9kID0gZCArIHRoaXMuX2QgfCAwOwogICAgdGhpcy5fZSA9IGUgKyB0aGlzLl9lIHwgMDsKICAgIHRoaXMuX2YgPSBmICsgdGhpcy5fZiB8IDA7CiAgICB0aGlzLl9nID0gZyArIHRoaXMuX2cgfCAwOwogICAgdGhpcy5faCA9IGggKyB0aGlzLl9oIHwgMDsKICB9OwogIFNoYTI1NiQxLnByb3RvdHlwZS5faGFzaCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIEggPSBCdWZmZXIkNi5hbGxvY1Vuc2FmZSgzMik7CiAgICBILndyaXRlSW50MzJCRSh0aGlzLl9hLCAwKTsKICAgIEgud3JpdGVJbnQzMkJFKHRoaXMuX2IsIDQpOwogICAgSC53cml0ZUludDMyQkUodGhpcy5fYywgOCk7CiAgICBILndyaXRlSW50MzJCRSh0aGlzLl9kLCAxMik7CiAgICBILndyaXRlSW50MzJCRSh0aGlzLl9lLCAxNik7CiAgICBILndyaXRlSW50MzJCRSh0aGlzLl9mLCAyMCk7CiAgICBILndyaXRlSW50MzJCRSh0aGlzLl9nLCAyNCk7CiAgICBILndyaXRlSW50MzJCRSh0aGlzLl9oLCAyOCk7CiAgICByZXR1cm4gSDsKICB9OwogIHZhciBzaGEyNTYgPSBTaGEyNTYkMTsKICB2YXIgaW5oZXJpdHMkMiA9IGluaGVyaXRzX2Jyb3dzZXIuZXhwb3J0czsKICB2YXIgU2hhMjU2ID0gc2hhMjU2OwogIHZhciBIYXNoJDIgPSBoYXNoOwogIHZhciBCdWZmZXIkNSA9IHNhZmVCdWZmZXIuZXhwb3J0cy5CdWZmZXI7CiAgdmFyIFckMiA9IG5ldyBBcnJheSg2NCk7CiAgZnVuY3Rpb24gU2hhMjI0KCkgewogICAgdGhpcy5pbml0KCk7CiAgICB0aGlzLl93ID0gVyQyOwogICAgSGFzaCQyLmNhbGwodGhpcywgNjQsIDU2KTsKICB9CiAgaW5oZXJpdHMkMihTaGEyMjQsIFNoYTI1Nik7CiAgU2hhMjI0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9hID0gMzIzODM3MTAzMjsKICAgIHRoaXMuX2IgPSA5MTQxNTA2NjM7CiAgICB0aGlzLl9jID0gODEyNzAyOTk5OwogICAgdGhpcy5fZCA9IDQxNDQ5MTI2OTc7CiAgICB0aGlzLl9lID0gNDI5MDc3NTg1NzsKICAgIHRoaXMuX2YgPSAxNzUwNjAzMDI1OwogICAgdGhpcy5fZyA9IDE2OTQwNzY4Mzk7CiAgICB0aGlzLl9oID0gMzIwNDA3NTQyODsKICAgIHJldHVybiB0aGlzOwogIH07CiAgU2hhMjI0LnByb3RvdHlwZS5faGFzaCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIEggPSBCdWZmZXIkNS5hbGxvY1Vuc2FmZSgyOCk7CiAgICBILndyaXRlSW50MzJCRSh0aGlzLl9hLCAwKTsKICAgIEgud3JpdGVJbnQzMkJFKHRoaXMuX2IsIDQpOwogICAgSC53cml0ZUludDMyQkUodGhpcy5fYywgOCk7CiAgICBILndyaXRlSW50MzJCRSh0aGlzLl9kLCAxMik7CiAgICBILndyaXRlSW50MzJCRSh0aGlzLl9lLCAxNik7CiAgICBILndyaXRlSW50MzJCRSh0aGlzLl9mLCAyMCk7CiAgICBILndyaXRlSW50MzJCRSh0aGlzLl9nLCAyNCk7CiAgICByZXR1cm4gSDsKICB9OwogIHZhciBzaGEyMjQgPSBTaGEyMjQ7CiAgdmFyIGluaGVyaXRzJDEgPSBpbmhlcml0c19icm93c2VyLmV4cG9ydHM7CiAgdmFyIEhhc2gkMSA9IGhhc2g7CiAgdmFyIEJ1ZmZlciQ0ID0gc2FmZUJ1ZmZlci5leHBvcnRzLkJ1ZmZlcjsKICB2YXIgSyA9IFsKICAgIDExMTYzNTI0MDgsCiAgICAzNjA5NzY3NDU4LAogICAgMTg5OTQ0NzQ0MSwKICAgIDYwMjg5MTcyNSwKICAgIDMwNDkzMjM0NzEsCiAgICAzOTY0NDg0Mzk5LAogICAgMzkyMTAwOTU3MywKICAgIDIxNzMyOTU1NDgsCiAgICA5NjE5ODcxNjMsCiAgICA0MDgxNjI4NDcyLAogICAgMTUwODk3MDk5MywKICAgIDMwNTM4MzQyNjUsCiAgICAyNDUzNjM1NzQ4LAogICAgMjkzNzY3MTU3OSwKICAgIDI4NzA3NjMyMjEsCiAgICAzNjY0NjA5NTYwLAogICAgMzYyNDM4MTA4MCwKICAgIDI3MzQ4ODMzOTQsCiAgICAzMTA1OTg0MDEsCiAgICAxMTY0OTk2NTQyLAogICAgNjA3MjI1Mjc4LAogICAgMTMyMzYxMDc2NCwKICAgIDE0MjY4ODE5ODcsCiAgICAzNTkwMzA0OTk0LAogICAgMTkyNTA3ODM4OCwKICAgIDQwNjgxODIzODMsCiAgICAyMTYyMDc4MjA2LAogICAgOTkxMzM2MTEzLAogICAgMjYxNDg4ODEwMywKICAgIDYzMzgwMzMxNywKICAgIDMyNDgyMjI1ODAsCiAgICAzNDc5Nzc0ODY4LAogICAgMzgzNTM5MDQwMSwKICAgIDI2NjY2MTM0NTgsCiAgICA0MDIyMjI0Nzc0LAogICAgOTQ0NzExMTM5LAogICAgMjY0MzQ3MDc4LAogICAgMjM0MTI2Mjc3MywKICAgIDYwNDgwNzYyOCwKICAgIDIwMDc4MDA5MzMsCiAgICA3NzAyNTU5ODMsCiAgICAxNDk1OTkwOTAxLAogICAgMTI0OTE1MDEyMiwKICAgIDE4NTY0MzEyMzUsCiAgICAxNTU1MDgxNjkyLAogICAgMzE3NTIxODEzMiwKICAgIDE5OTYwNjQ5ODYsCiAgICAyMTk4OTUwODM3LAogICAgMjU1NDIyMDg4MiwKICAgIDM5OTk3MTkzMzksCiAgICAyODIxODM0MzQ5LAogICAgNzY2Nzg0MDE2LAogICAgMjk1Mjk5NjgwOCwKICAgIDI1NjY1OTQ4NzksCiAgICAzMjEwMzEzNjcxLAogICAgMzIwMzMzNzk1NiwKICAgIDMzMzY1NzE4OTEsCiAgICAxMDM0NDU3MDI2LAogICAgMzU4NDUyODcxMSwKICAgIDI0NjY5NDg5MDEsCiAgICAxMTM5MjY5OTMsCiAgICAzNzU4MzI2MzgzLAogICAgMzM4MjQxODk1LAogICAgMTY4NzE3OTM2LAogICAgNjY2MzA3MjA1LAogICAgMTE4ODE3OTk2NCwKICAgIDc3MzUyOTkxMiwKICAgIDE1NDYwNDU3MzQsCiAgICAxMjk0NzU3MzcyLAogICAgMTUyMjgwNTQ4NSwKICAgIDEzOTYxODIyOTEsCiAgICAyNjQzODMzODIzLAogICAgMTY5NTE4MzcwMCwKICAgIDIzNDM1MjczOTAsCiAgICAxOTg2NjYxMDUxLAogICAgMTAxNDQ3NzQ4MCwKICAgIDIxNzcwMjYzNTAsCiAgICAxMjA2NzU5MTQyLAogICAgMjQ1Njk1NjAzNywKICAgIDM0NDA3NzYyNywKICAgIDI3MzA0ODU5MjEsCiAgICAxMjkwODYzNDYwLAogICAgMjgyMDMwMjQxMSwKICAgIDMxNTg0NTQyNzMsCiAgICAzMjU5NzMwODAwLAogICAgMzUwNTk1MjY1NywKICAgIDMzNDU3NjQ3NzEsCiAgICAxMDYyMTcwMDgsCiAgICAzNTE2MDY1ODE3LAogICAgMzYwNjAwODM0NCwKICAgIDM2MDAzNTI4MDQsCiAgICAxNDMyNzI1Nzc2LAogICAgNDA5NDU3MTkwOSwKICAgIDE0NjcwMzE1OTQsCiAgICAyNzU0MjMzNDQsCiAgICA4NTExNjk3MjAsCiAgICA0MzAyMjc3MzQsCiAgICAzMTAwODIzNzUyLAogICAgNTA2OTQ4NjE2LAogICAgMTM2MzI1ODE5NSwKICAgIDY1OTA2MDU1NiwKICAgIDM3NTA2ODU1OTMsCiAgICA4ODM5OTc4NzcsCiAgICAzNzg1MDUwMjgwLAogICAgOTU4MTM5NTcxLAogICAgMzMxODMwNzQyNywKICAgIDEzMjI4MjIyMTgsCiAgICAzODEyNzIzNDAzLAogICAgMTUzNzAwMjA2MywKICAgIDIwMDMwMzQ5OTUsCiAgICAxNzQ3ODczNzc5LAogICAgMzYwMjAzNjg5OSwKICAgIDE5NTU1NjIyMjIsCiAgICAxNTc1OTkwMDEyLAogICAgMjAyNDEwNDgxNSwKICAgIDExMjU1OTI5MjgsCiAgICAyMjI3NzMwNDUyLAogICAgMjcxNjkwNDMwNiwKICAgIDIzNjE4NTI0MjQsCiAgICA0NDI3NzYwNDQsCiAgICAyNDI4NDM2NDc0LAogICAgNTkzNjk4MzQ0LAogICAgMjc1NjczNDE4NywKICAgIDM3MzMxMTAyNDksCiAgICAzMjA0MDMxNDc5LAogICAgMjk5OTM1MTU3MywKICAgIDMzMjkzMjUyOTgsCiAgICAzODE1OTIwNDI3LAogICAgMzM5MTU2OTYxNCwKICAgIDM5MjgzODM5MDAsCiAgICAzNTE1MjY3MjcxLAogICAgNTY2MjgwNzExLAogICAgMzk0MDE4NzYwNiwKICAgIDM0NTQwNjk1MzQsCiAgICA0MTE4NjMwMjcxLAogICAgNDAwMDIzOTk5MiwKICAgIDExNjQxODQ3NCwKICAgIDE5MTQxMzg1NTQsCiAgICAxNzQyOTI0MjEsCiAgICAyNzMxMDU1MjcwLAogICAgMjg5MzgwMzU2LAogICAgMzIwMzk5MzAwNiwKICAgIDQ2MDM5MzI2OSwKICAgIDMyMDYyMDMxNSwKICAgIDY4NTQ3MTczMywKICAgIDU4NzQ5NjgzNiwKICAgIDg1MjE0Mjk3MSwKICAgIDEwODY3OTI4NTEsCiAgICAxMDE3MDM2Mjk4LAogICAgMzY1NTQzMTAwLAogICAgMTEyNjAwMDU4MCwKICAgIDI2MTgyOTc2NzYsCiAgICAxMjg4MDMzNDcwLAogICAgMzQwOTg1NTE1OCwKICAgIDE1MDE1MDU5NDgsCiAgICA0MjM0NTA5ODY2LAogICAgMTYwNzE2NzkxNSwKICAgIDk4NzE2NzQ2OCwKICAgIDE4MTY0MDIzMTYsCiAgICAxMjQ2MTg5NTkxCiAgXTsKICB2YXIgVyQxID0gbmV3IEFycmF5KDE2MCk7CiAgZnVuY3Rpb24gU2hhNTEyKCkgewogICAgdGhpcy5pbml0KCk7CiAgICB0aGlzLl93ID0gVyQxOwogICAgSGFzaCQxLmNhbGwodGhpcywgMTI4LCAxMTIpOwogIH0KICBpbmhlcml0cyQxKFNoYTUxMiwgSGFzaCQxKTsKICBTaGE1MTIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHsKICAgIHRoaXMuX2FoID0gMTc3OTAzMzcwMzsKICAgIHRoaXMuX2JoID0gMzE0NDEzNDI3NzsKICAgIHRoaXMuX2NoID0gMTAxMzkwNDI0MjsKICAgIHRoaXMuX2RoID0gMjc3MzQ4MDc2MjsKICAgIHRoaXMuX2VoID0gMTM1OTg5MzExOTsKICAgIHRoaXMuX2ZoID0gMjYwMDgyMjkyNDsKICAgIHRoaXMuX2doID0gNTI4NzM0NjM1OwogICAgdGhpcy5faGggPSAxNTQxNDU5MjI1OwogICAgdGhpcy5fYWwgPSA0MDg5MjM1NzIwOwogICAgdGhpcy5fYmwgPSAyMjI3ODczNTk1OwogICAgdGhpcy5fY2wgPSA0MjcxMTc1NzIzOwogICAgdGhpcy5fZGwgPSAxNTk1NzUwMTI5OwogICAgdGhpcy5fZWwgPSAyOTE3NTY1MTM3OwogICAgdGhpcy5fZmwgPSA3MjU1MTExOTk7CiAgICB0aGlzLl9nbCA9IDQyMTUzODk1NDc7CiAgICB0aGlzLl9obCA9IDMyNzAzMzIwOTsKICAgIHJldHVybiB0aGlzOwogIH07CiAgZnVuY3Rpb24gQ2goeCwgeSwgeikgewogICAgcmV0dXJuIHogXiB4ICYgKHkgXiB6KTsKICB9CiAgZnVuY3Rpb24gbWFqKHgsIHksIHopIHsKICAgIHJldHVybiB4ICYgeSB8IHogJiAoeCB8IHkpOwogIH0KICBmdW5jdGlvbiBzaWdtYTAoeCwgeGwpIHsKICAgIHJldHVybiAoeCA+Pj4gMjggfCB4bCA8PCA0KSBeICh4bCA+Pj4gMiB8IHggPDwgMzApIF4gKHhsID4+PiA3IHwgeCA8PCAyNSk7CiAgfQogIGZ1bmN0aW9uIHNpZ21hMSh4LCB4bCkgewogICAgcmV0dXJuICh4ID4+PiAxNCB8IHhsIDw8IDE4KSBeICh4ID4+PiAxOCB8IHhsIDw8IDE0KSBeICh4bCA+Pj4gOSB8IHggPDwgMjMpOwogIH0KICBmdW5jdGlvbiBHYW1tYTAoeCwgeGwpIHsKICAgIHJldHVybiAoeCA+Pj4gMSB8IHhsIDw8IDMxKSBeICh4ID4+PiA4IHwgeGwgPDwgMjQpIF4geCA+Pj4gNzsKICB9CiAgZnVuY3Rpb24gR2FtbWEwbCh4LCB4bCkgewogICAgcmV0dXJuICh4ID4+PiAxIHwgeGwgPDwgMzEpIF4gKHggPj4+IDggfCB4bCA8PCAyNCkgXiAoeCA+Pj4gNyB8IHhsIDw8IDI1KTsKICB9CiAgZnVuY3Rpb24gR2FtbWExKHgsIHhsKSB7CiAgICByZXR1cm4gKHggPj4+IDE5IHwgeGwgPDwgMTMpIF4gKHhsID4+PiAyOSB8IHggPDwgMykgXiB4ID4+PiA2OwogIH0KICBmdW5jdGlvbiBHYW1tYTFsKHgsIHhsKSB7CiAgICByZXR1cm4gKHggPj4+IDE5IHwgeGwgPDwgMTMpIF4gKHhsID4+PiAyOSB8IHggPDwgMykgXiAoeCA+Pj4gNiB8IHhsIDw8IDI2KTsKICB9CiAgZnVuY3Rpb24gZ2V0Q2FycnkoYSwgYikgewogICAgcmV0dXJuIGEgPj4+IDAgPCBiID4+PiAwID8gMSA6IDA7CiAgfQogIFNoYTUxMi5wcm90b3R5cGUuX3VwZGF0ZSA9IGZ1bmN0aW9uKE0pIHsKICAgIHZhciBXMiA9IHRoaXMuX3c7CiAgICB2YXIgYWggPSB0aGlzLl9haCB8IDA7CiAgICB2YXIgYmggPSB0aGlzLl9iaCB8IDA7CiAgICB2YXIgY2gyID0gdGhpcy5fY2ggfCAwOwogICAgdmFyIGRoID0gdGhpcy5fZGggfCAwOwogICAgdmFyIGVoID0gdGhpcy5fZWggfCAwOwogICAgdmFyIGZoID0gdGhpcy5fZmggfCAwOwogICAgdmFyIGdoID0gdGhpcy5fZ2ggfCAwOwogICAgdmFyIGhoID0gdGhpcy5faGggfCAwOwogICAgdmFyIGFsID0gdGhpcy5fYWwgfCAwOwogICAgdmFyIGJsID0gdGhpcy5fYmwgfCAwOwogICAgdmFyIGNsID0gdGhpcy5fY2wgfCAwOwogICAgdmFyIGRsID0gdGhpcy5fZGwgfCAwOwogICAgdmFyIGVsID0gdGhpcy5fZWwgfCAwOwogICAgdmFyIGZsID0gdGhpcy5fZmwgfCAwOwogICAgdmFyIGdsID0gdGhpcy5fZ2wgfCAwOwogICAgdmFyIGhsMiA9IHRoaXMuX2hsIHwgMDsKICAgIGZvciAodmFyIGkyID0gMDsgaTIgPCAzMjsgaTIgKz0gMikgewogICAgICBXMltpMl0gPSBNLnJlYWRJbnQzMkJFKGkyICogNCk7CiAgICAgIFcyW2kyICsgMV0gPSBNLnJlYWRJbnQzMkJFKGkyICogNCArIDQpOwogICAgfQogICAgZm9yICg7IGkyIDwgMTYwOyBpMiArPSAyKSB7CiAgICAgIHZhciB4aCA9IFcyW2kyIC0gMTUgKiAyXTsKICAgICAgdmFyIHhsID0gVzJbaTIgLSAxNSAqIDIgKyAxXTsKICAgICAgdmFyIGdhbW1hMDIgPSBHYW1tYTAoeGgsIHhsKTsKICAgICAgdmFyIGdhbW1hMGwgPSBHYW1tYTBsKHhsLCB4aCk7CiAgICAgIHhoID0gVzJbaTIgLSAyICogMl07CiAgICAgIHhsID0gVzJbaTIgLSAyICogMiArIDFdOwogICAgICB2YXIgZ2FtbWExMiA9IEdhbW1hMSh4aCwgeGwpOwogICAgICB2YXIgZ2FtbWExbCA9IEdhbW1hMWwoeGwsIHhoKTsKICAgICAgdmFyIFdpN2ggPSBXMltpMiAtIDcgKiAyXTsKICAgICAgdmFyIFdpN2wgPSBXMltpMiAtIDcgKiAyICsgMV07CiAgICAgIHZhciBXaTE2aCA9IFcyW2kyIC0gMTYgKiAyXTsKICAgICAgdmFyIFdpMTZsID0gVzJbaTIgLSAxNiAqIDIgKyAxXTsKICAgICAgdmFyIFdpbCA9IGdhbW1hMGwgKyBXaTdsIHwgMDsKICAgICAgdmFyIFdpaCA9IGdhbW1hMDIgKyBXaTdoICsgZ2V0Q2FycnkoV2lsLCBnYW1tYTBsKSB8IDA7CiAgICAgIFdpbCA9IFdpbCArIGdhbW1hMWwgfCAwOwogICAgICBXaWggPSBXaWggKyBnYW1tYTEyICsgZ2V0Q2FycnkoV2lsLCBnYW1tYTFsKSB8IDA7CiAgICAgIFdpbCA9IFdpbCArIFdpMTZsIHwgMDsKICAgICAgV2loID0gV2loICsgV2kxNmggKyBnZXRDYXJyeShXaWwsIFdpMTZsKSB8IDA7CiAgICAgIFcyW2kyXSA9IFdpaDsKICAgICAgVzJbaTIgKyAxXSA9IFdpbDsKICAgIH0KICAgIGZvciAodmFyIGogPSAwOyBqIDwgMTYwOyBqICs9IDIpIHsKICAgICAgV2loID0gVzJbal07CiAgICAgIFdpbCA9IFcyW2ogKyAxXTsKICAgICAgdmFyIG1hamggPSBtYWooYWgsIGJoLCBjaDIpOwogICAgICB2YXIgbWFqbCA9IG1haihhbCwgYmwsIGNsKTsKICAgICAgdmFyIHNpZ21hMGggPSBzaWdtYTAoYWgsIGFsKTsKICAgICAgdmFyIHNpZ21hMGwgPSBzaWdtYTAoYWwsIGFoKTsKICAgICAgdmFyIHNpZ21hMWggPSBzaWdtYTEoZWgsIGVsKTsKICAgICAgdmFyIHNpZ21hMWwgPSBzaWdtYTEoZWwsIGVoKTsKICAgICAgdmFyIEtpaCA9IEtbal07CiAgICAgIHZhciBLaWwgPSBLW2ogKyAxXTsKICAgICAgdmFyIGNoaCA9IENoKGVoLCBmaCwgZ2gpOwogICAgICB2YXIgY2hsID0gQ2goZWwsIGZsLCBnbCk7CiAgICAgIHZhciB0MWwgPSBobDIgKyBzaWdtYTFsIHwgMDsKICAgICAgdmFyIHQxaCA9IGhoICsgc2lnbWExaCArIGdldENhcnJ5KHQxbCwgaGwyKSB8IDA7CiAgICAgIHQxbCA9IHQxbCArIGNobCB8IDA7CiAgICAgIHQxaCA9IHQxaCArIGNoaCArIGdldENhcnJ5KHQxbCwgY2hsKSB8IDA7CiAgICAgIHQxbCA9IHQxbCArIEtpbCB8IDA7CiAgICAgIHQxaCA9IHQxaCArIEtpaCArIGdldENhcnJ5KHQxbCwgS2lsKSB8IDA7CiAgICAgIHQxbCA9IHQxbCArIFdpbCB8IDA7CiAgICAgIHQxaCA9IHQxaCArIFdpaCArIGdldENhcnJ5KHQxbCwgV2lsKSB8IDA7CiAgICAgIHZhciB0MmwgPSBzaWdtYTBsICsgbWFqbCB8IDA7CiAgICAgIHZhciB0MmggPSBzaWdtYTBoICsgbWFqaCArIGdldENhcnJ5KHQybCwgc2lnbWEwbCkgfCAwOwogICAgICBoaCA9IGdoOwogICAgICBobDIgPSBnbDsKICAgICAgZ2ggPSBmaDsKICAgICAgZ2wgPSBmbDsKICAgICAgZmggPSBlaDsKICAgICAgZmwgPSBlbDsKICAgICAgZWwgPSBkbCArIHQxbCB8IDA7CiAgICAgIGVoID0gZGggKyB0MWggKyBnZXRDYXJyeShlbCwgZGwpIHwgMDsKICAgICAgZGggPSBjaDI7CiAgICAgIGRsID0gY2w7CiAgICAgIGNoMiA9IGJoOwogICAgICBjbCA9IGJsOwogICAgICBiaCA9IGFoOwogICAgICBibCA9IGFsOwogICAgICBhbCA9IHQxbCArIHQybCB8IDA7CiAgICAgIGFoID0gdDFoICsgdDJoICsgZ2V0Q2FycnkoYWwsIHQxbCkgfCAwOwogICAgfQogICAgdGhpcy5fYWwgPSB0aGlzLl9hbCArIGFsIHwgMDsKICAgIHRoaXMuX2JsID0gdGhpcy5fYmwgKyBibCB8IDA7CiAgICB0aGlzLl9jbCA9IHRoaXMuX2NsICsgY2wgfCAwOwogICAgdGhpcy5fZGwgPSB0aGlzLl9kbCArIGRsIHwgMDsKICAgIHRoaXMuX2VsID0gdGhpcy5fZWwgKyBlbCB8IDA7CiAgICB0aGlzLl9mbCA9IHRoaXMuX2ZsICsgZmwgfCAwOwogICAgdGhpcy5fZ2wgPSB0aGlzLl9nbCArIGdsIHwgMDsKICAgIHRoaXMuX2hsID0gdGhpcy5faGwgKyBobDIgfCAwOwogICAgdGhpcy5fYWggPSB0aGlzLl9haCArIGFoICsgZ2V0Q2FycnkodGhpcy5fYWwsIGFsKSB8IDA7CiAgICB0aGlzLl9iaCA9IHRoaXMuX2JoICsgYmggKyBnZXRDYXJyeSh0aGlzLl9ibCwgYmwpIHwgMDsKICAgIHRoaXMuX2NoID0gdGhpcy5fY2ggKyBjaDIgKyBnZXRDYXJyeSh0aGlzLl9jbCwgY2wpIHwgMDsKICAgIHRoaXMuX2RoID0gdGhpcy5fZGggKyBkaCArIGdldENhcnJ5KHRoaXMuX2RsLCBkbCkgfCAwOwogICAgdGhpcy5fZWggPSB0aGlzLl9laCArIGVoICsgZ2V0Q2FycnkodGhpcy5fZWwsIGVsKSB8IDA7CiAgICB0aGlzLl9maCA9IHRoaXMuX2ZoICsgZmggKyBnZXRDYXJyeSh0aGlzLl9mbCwgZmwpIHwgMDsKICAgIHRoaXMuX2doID0gdGhpcy5fZ2ggKyBnaCArIGdldENhcnJ5KHRoaXMuX2dsLCBnbCkgfCAwOwogICAgdGhpcy5faGggPSB0aGlzLl9oaCArIGhoICsgZ2V0Q2FycnkodGhpcy5faGwsIGhsMikgfCAwOwogIH07CiAgU2hhNTEyLnByb3RvdHlwZS5faGFzaCA9IGZ1bmN0aW9uKCkgewogICAgdmFyIEggPSBCdWZmZXIkNC5hbGxvY1Vuc2FmZSg2NCk7CiAgICBmdW5jdGlvbiB3cml0ZUludDY0QkUoaCwgbCwgb2Zmc2V0KSB7CiAgICAgIEgud3JpdGVJbnQzMkJFKGgsIG9mZnNldCk7CiAgICAgIEgud3JpdGVJbnQzMkJFKGwsIG9mZnNldCArIDQpOwogICAgfQogICAgd3JpdGVJbnQ2NEJFKHRoaXMuX2FoLCB0aGlzLl9hbCwgMCk7CiAgICB3cml0ZUludDY0QkUodGhpcy5fYmgsIHRoaXMuX2JsLCA4KTsKICAgIHdyaXRlSW50NjRCRSh0aGlzLl9jaCwgdGhpcy5fY2wsIDE2KTsKICAgIHdyaXRlSW50NjRCRSh0aGlzLl9kaCwgdGhpcy5fZGwsIDI0KTsKICAgIHdyaXRlSW50NjRCRSh0aGlzLl9laCwgdGhpcy5fZWwsIDMyKTsKICAgIHdyaXRlSW50NjRCRSh0aGlzLl9maCwgdGhpcy5fZmwsIDQwKTsKICAgIHdyaXRlSW50NjRCRSh0aGlzLl9naCwgdGhpcy5fZ2wsIDQ4KTsKICAgIHdyaXRlSW50NjRCRSh0aGlzLl9oaCwgdGhpcy5faGwsIDU2KTsKICAgIHJldHVybiBIOwogIH07CiAgdmFyIHNoYTUxMiA9IFNoYTUxMjsKICB2YXIgaW5oZXJpdHMgPSBpbmhlcml0c19icm93c2VyLmV4cG9ydHM7CiAgdmFyIFNIQTUxMiA9IHNoYTUxMjsKICB2YXIgSGFzaCA9IGhhc2g7CiAgdmFyIEJ1ZmZlciQzID0gc2FmZUJ1ZmZlci5leHBvcnRzLkJ1ZmZlcjsKICB2YXIgVyA9IG5ldyBBcnJheSgxNjApOwogIGZ1bmN0aW9uIFNoYTM4NCgpIHsKICAgIHRoaXMuaW5pdCgpOwogICAgdGhpcy5fdyA9IFc7CiAgICBIYXNoLmNhbGwodGhpcywgMTI4LCAxMTIpOwogIH0KICBpbmhlcml0cyhTaGEzODQsIFNIQTUxMik7CiAgU2hhMzg0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7CiAgICB0aGlzLl9haCA9IDM0MTgwNzAzNjU7CiAgICB0aGlzLl9iaCA9IDE2NTQyNzAyNTA7CiAgICB0aGlzLl9jaCA9IDI0Mzg1MjkzNzA7CiAgICB0aGlzLl9kaCA9IDM1NTQ2MjM2MDsKICAgIHRoaXMuX2VoID0gMTczMTQwNTQxNTsKICAgIHRoaXMuX2ZoID0gMjM5NDE4MDIzMTsKICAgIHRoaXMuX2doID0gMzY3NTAwODUyNTsKICAgIHRoaXMuX2hoID0gMTIwMzA2MjgxMzsKICAgIHRoaXMuX2FsID0gMzIzODM3MTAzMjsKICAgIHRoaXMuX2JsID0gOTE0MTUwNjYzOwogICAgdGhpcy5fY2wgPSA4MTI3MDI5OTk7CiAgICB0aGlzLl9kbCA9IDQxNDQ5MTI2OTc7CiAgICB0aGlzLl9lbCA9IDQyOTA3NzU4NTc7CiAgICB0aGlzLl9mbCA9IDE3NTA2MDMwMjU7CiAgICB0aGlzLl9nbCA9IDE2OTQwNzY4Mzk7CiAgICB0aGlzLl9obCA9IDMyMDQwNzU0Mjg7CiAgICByZXR1cm4gdGhpczsKICB9OwogIFNoYTM4NC5wcm90b3R5cGUuX2hhc2ggPSBmdW5jdGlvbigpIHsKICAgIHZhciBIID0gQnVmZmVyJDMuYWxsb2NVbnNhZmUoNDgpOwogICAgZnVuY3Rpb24gd3JpdGVJbnQ2NEJFKGgsIGwsIG9mZnNldCkgewogICAgICBILndyaXRlSW50MzJCRShoLCBvZmZzZXQpOwogICAgICBILndyaXRlSW50MzJCRShsLCBvZmZzZXQgKyA0KTsKICAgIH0KICAgIHdyaXRlSW50NjRCRSh0aGlzLl9haCwgdGhpcy5fYWwsIDApOwogICAgd3JpdGVJbnQ2NEJFKHRoaXMuX2JoLCB0aGlzLl9ibCwgOCk7CiAgICB3cml0ZUludDY0QkUodGhpcy5fY2gsIHRoaXMuX2NsLCAxNik7CiAgICB3cml0ZUludDY0QkUodGhpcy5fZGgsIHRoaXMuX2RsLCAyNCk7CiAgICB3cml0ZUludDY0QkUodGhpcy5fZWgsIHRoaXMuX2VsLCAzMik7CiAgICB3cml0ZUludDY0QkUodGhpcy5fZmgsIHRoaXMuX2ZsLCA0MCk7CiAgICByZXR1cm4gSDsKICB9OwogIHZhciBzaGEzODQgPSBTaGEzODQ7CiAgdmFyIGV4cG9ydHMkMSA9IHNoYV9qcy5leHBvcnRzID0gZnVuY3Rpb24gU0hBKGFsZ29yaXRobSkgewogICAgYWxnb3JpdGhtID0gYWxnb3JpdGhtLnRvTG93ZXJDYXNlKCk7CiAgICB2YXIgQWxnb3JpdGhtID0gZXhwb3J0cyQxW2FsZ29yaXRobV07CiAgICBpZiAoIUFsZ29yaXRobSkKICAgICAgdGhyb3cgbmV3IEVycm9yKGFsZ29yaXRobSArICIgaXMgbm90IHN1cHBvcnRlZCAod2UgYWNjZXB0IHB1bGwgcmVxdWVzdHMpIik7CiAgICByZXR1cm4gbmV3IEFsZ29yaXRobSgpOwogIH07CiAgZXhwb3J0cyQxLnNoYSA9IHNoYSQxOwogIGV4cG9ydHMkMS5zaGExID0gc2hhMTsKICBleHBvcnRzJDEuc2hhMjI0ID0gc2hhMjI0OwogIGV4cG9ydHMkMS5zaGEyNTYgPSBzaGEyNTY7CiAgZXhwb3J0cyQxLnNoYTM4NCA9IHNoYTM4NDsKICBleHBvcnRzJDEuc2hhNTEyID0gc2hhNTEyOwogIHZhciBCdWZmZXIkMiA9IHNhZmVCdWZmZXIuZXhwb3J0cy5CdWZmZXI7CiAgdmFyIHRvQnVmZmVyJDIgPSBmdW5jdGlvbih0aGluZywgZW5jb2RpbmcsIG5hbWUpIHsKICAgIGlmIChCdWZmZXIkMi5pc0J1ZmZlcih0aGluZykpIHsKICAgICAgcmV0dXJuIHRoaW5nOwogICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpbmcgPT09ICJzdHJpbmciKSB7CiAgICAgIHJldHVybiBCdWZmZXIkMi5mcm9tKHRoaW5nLCBlbmNvZGluZyk7CiAgICB9IGVsc2UgaWYgKEFycmF5QnVmZmVyLmlzVmlldyh0aGluZykpIHsKICAgICAgcmV0dXJuIEJ1ZmZlciQyLmZyb20odGhpbmcuYnVmZmVyKTsKICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IobmFtZSArICIgbXVzdCBiZSBhIHN0cmluZywgYSBCdWZmZXIsIGEgdHlwZWQgYXJyYXkgb3IgYSBEYXRhVmlldyIpOwogICAgfQogIH07CiAgdmFyIG1kNSA9IG1kNSQxOwogIHZhciBSSVBFTUQxNjAgPSByaXBlbWQxNjA7CiAgdmFyIHNoYSA9IHNoYV9qcy5leHBvcnRzOwogIHZhciBCdWZmZXIkMSA9IHNhZmVCdWZmZXIuZXhwb3J0cy5CdWZmZXI7CiAgdmFyIGNoZWNrUGFyYW1ldGVycyQxID0gcHJlY29uZGl0aW9uOwogIHZhciBkZWZhdWx0RW5jb2RpbmckMSA9IGRlZmF1bHRFbmNvZGluZ18xOwogIHZhciB0b0J1ZmZlciQxID0gdG9CdWZmZXIkMjsKICB2YXIgWkVST1MgPSBCdWZmZXIkMS5hbGxvYygxMjgpOwogIHZhciBzaXplcyA9IHsKICAgIG1kNTogMTYsCiAgICBzaGExOiAyMCwKICAgIHNoYTIyNDogMjgsCiAgICBzaGEyNTY6IDMyLAogICAgc2hhMzg0OiA0OCwKICAgIHNoYTUxMjogNjQsCiAgICBybWQxNjA6IDIwLAogICAgcmlwZW1kMTYwOiAyMAogIH07CiAgZnVuY3Rpb24gSG1hYyhhbGcsIGtleSwgc2FsdExlbikgewogICAgdmFyIGhhc2gyID0gZ2V0RGlnZXN0KGFsZyk7CiAgICB2YXIgYmxvY2tzaXplID0gYWxnID09PSAic2hhNTEyIiB8fCBhbGcgPT09ICJzaGEzODQiID8gMTI4IDogNjQ7CiAgICBpZiAoa2V5Lmxlbmd0aCA+IGJsb2Nrc2l6ZSkgewogICAgICBrZXkgPSBoYXNoMihrZXkpOwogICAgfSBlbHNlIGlmIChrZXkubGVuZ3RoIDwgYmxvY2tzaXplKSB7CiAgICAgIGtleSA9IEJ1ZmZlciQxLmNvbmNhdChba2V5LCBaRVJPU10sIGJsb2Nrc2l6ZSk7CiAgICB9CiAgICB2YXIgaXBhZCA9IEJ1ZmZlciQxLmFsbG9jVW5zYWZlKGJsb2Nrc2l6ZSArIHNpemVzW2FsZ10pOwogICAgdmFyIG9wYWQgPSBCdWZmZXIkMS5hbGxvY1Vuc2FmZShibG9ja3NpemUgKyBzaXplc1thbGddKTsKICAgIGZvciAodmFyIGkyID0gMDsgaTIgPCBibG9ja3NpemU7IGkyKyspIHsKICAgICAgaXBhZFtpMl0gPSBrZXlbaTJdIF4gNTQ7CiAgICAgIG9wYWRbaTJdID0ga2V5W2kyXSBeIDkyOwogICAgfQogICAgdmFyIGlwYWQxID0gQnVmZmVyJDEuYWxsb2NVbnNhZmUoYmxvY2tzaXplICsgc2FsdExlbiArIDQpOwogICAgaXBhZC5jb3B5KGlwYWQxLCAwLCAwLCBibG9ja3NpemUpOwogICAgdGhpcy5pcGFkMSA9IGlwYWQxOwogICAgdGhpcy5pcGFkMiA9IGlwYWQ7CiAgICB0aGlzLm9wYWQgPSBvcGFkOwogICAgdGhpcy5hbGcgPSBhbGc7CiAgICB0aGlzLmJsb2Nrc2l6ZSA9IGJsb2Nrc2l6ZTsKICAgIHRoaXMuaGFzaCA9IGhhc2gyOwogICAgdGhpcy5zaXplID0gc2l6ZXNbYWxnXTsKICB9CiAgSG1hYy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oZGF0YSwgaXBhZCkgewogICAgZGF0YS5jb3B5KGlwYWQsIHRoaXMuYmxvY2tzaXplKTsKICAgIHZhciBoID0gdGhpcy5oYXNoKGlwYWQpOwogICAgaC5jb3B5KHRoaXMub3BhZCwgdGhpcy5ibG9ja3NpemUpOwogICAgcmV0dXJuIHRoaXMuaGFzaCh0aGlzLm9wYWQpOwogIH07CiAgZnVuY3Rpb24gZ2V0RGlnZXN0KGFsZykgewogICAgZnVuY3Rpb24gc2hhRnVuYyhkYXRhKSB7CiAgICAgIHJldHVybiBzaGEoYWxnKS51cGRhdGUoZGF0YSkuZGlnZXN0KCk7CiAgICB9CiAgICBmdW5jdGlvbiBybWQxNjBGdW5jKGRhdGEpIHsKICAgICAgcmV0dXJuIG5ldyBSSVBFTUQxNjAoKS51cGRhdGUoZGF0YSkuZGlnZXN0KCk7CiAgICB9CiAgICBpZiAoYWxnID09PSAicm1kMTYwIiB8fCBhbGcgPT09ICJyaXBlbWQxNjAiKQogICAgICByZXR1cm4gcm1kMTYwRnVuYzsKICAgIGlmIChhbGcgPT09ICJtZDUiKQogICAgICByZXR1cm4gbWQ1OwogICAgcmV0dXJuIHNoYUZ1bmM7CiAgfQogIGZ1bmN0aW9uIHBia2RmMihwYXNzd29yZCwgc2FsdCwgaXRlcmF0aW9ucywga2V5bGVuLCBkaWdlc3QpIHsKICAgIGNoZWNrUGFyYW1ldGVycyQxKGl0ZXJhdGlvbnMsIGtleWxlbik7CiAgICBwYXNzd29yZCA9IHRvQnVmZmVyJDEocGFzc3dvcmQsIGRlZmF1bHRFbmNvZGluZyQxLCAiUGFzc3dvcmQiKTsKICAgIHNhbHQgPSB0b0J1ZmZlciQxKHNhbHQsIGRlZmF1bHRFbmNvZGluZyQxLCAiU2FsdCIpOwogICAgZGlnZXN0ID0gZGlnZXN0IHx8ICJzaGExIjsKICAgIHZhciBobWFjID0gbmV3IEhtYWMoZGlnZXN0LCBwYXNzd29yZCwgc2FsdC5sZW5ndGgpOwogICAgdmFyIERLID0gQnVmZmVyJDEuYWxsb2NVbnNhZmUoa2V5bGVuKTsKICAgIHZhciBibG9jazEgPSBCdWZmZXIkMS5hbGxvY1Vuc2FmZShzYWx0Lmxlbmd0aCArIDQpOwogICAgc2FsdC5jb3B5KGJsb2NrMSwgMCwgMCwgc2FsdC5sZW5ndGgpOwogICAgdmFyIGRlc3RQb3MgPSAwOwogICAgdmFyIGhMZW4gPSBzaXplc1tkaWdlc3RdOwogICAgdmFyIGwgPSBNYXRoLmNlaWwoa2V5bGVuIC8gaExlbik7CiAgICBmb3IgKHZhciBpMiA9IDE7IGkyIDw9IGw7IGkyKyspIHsKICAgICAgYmxvY2sxLndyaXRlVUludDMyQkUoaTIsIHNhbHQubGVuZ3RoKTsKICAgICAgdmFyIFQgPSBobWFjLnJ1bihibG9jazEsIGhtYWMuaXBhZDEpOwogICAgICB2YXIgVSA9IFQ7CiAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgaXRlcmF0aW9uczsgaisrKSB7CiAgICAgICAgVSA9IGhtYWMucnVuKFUsIGhtYWMuaXBhZDIpOwogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgaExlbjsgaysrKQogICAgICAgICAgVFtrXSBePSBVW2tdOwogICAgICB9CiAgICAgIFQuY29weShESywgZGVzdFBvcyk7CiAgICAgIGRlc3RQb3MgKz0gaExlbjsKICAgIH0KICAgIHJldHVybiBESzsKICB9CiAgdmFyIHN5bmNCcm93c2VyID0gcGJrZGYyOwogIHZhciBCdWZmZXIgPSBzYWZlQnVmZmVyLmV4cG9ydHMuQnVmZmVyOwogIHZhciBjaGVja1BhcmFtZXRlcnMgPSBwcmVjb25kaXRpb247CiAgdmFyIGRlZmF1bHRFbmNvZGluZyA9IGRlZmF1bHRFbmNvZGluZ18xOwogIHZhciBzeW5jID0gc3luY0Jyb3dzZXI7CiAgdmFyIHRvQnVmZmVyID0gdG9CdWZmZXIkMjsKICB2YXIgWkVST19CVUY7CiAgdmFyIHN1YnRsZSA9IGdsb2JhbFRoaXMuY3J5cHRvICYmIGdsb2JhbFRoaXMuY3J5cHRvLnN1YnRsZTsKICB2YXIgdG9Ccm93c2VyID0gewogICAgc2hhOiAiU0hBLTEiLAogICAgInNoYS0xIjogIlNIQS0xIiwKICAgIHNoYTE6ICJTSEEtMSIsCiAgICBzaGEyNTY6ICJTSEEtMjU2IiwKICAgICJzaGEtMjU2IjogIlNIQS0yNTYiLAogICAgc2hhMzg0OiAiU0hBLTM4NCIsCiAgICAic2hhLTM4NCI6ICJTSEEtMzg0IiwKICAgICJzaGEtNTEyIjogIlNIQS01MTIiLAogICAgc2hhNTEyOiAiU0hBLTUxMiIKICB9OwogIHZhciBjaGVja3MgPSBbXTsKICBmdW5jdGlvbiBjaGVja05hdGl2ZShhbGdvKSB7CiAgICBpZiAoZ2xvYmFsVGhpcy5wcm9jZXNzICYmICFnbG9iYWxUaGlzLnByb2Nlc3MuYnJvd3NlcikgewogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTsKICAgIH0KICAgIGlmICghc3VidGxlIHx8ICFzdWJ0bGUuaW1wb3J0S2V5IHx8ICFzdWJ0bGUuZGVyaXZlQml0cykgewogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTsKICAgIH0KICAgIGlmIChjaGVja3NbYWxnb10gIT09IHZvaWQgMCkgewogICAgICByZXR1cm4gY2hlY2tzW2FsZ29dOwogICAgfQogICAgWkVST19CVUYgPSBaRVJPX0JVRiB8fCBCdWZmZXIuYWxsb2MoOCk7CiAgICB2YXIgcHJvbSA9IGJyb3dzZXJQYmtkZjIoWkVST19CVUYsIFpFUk9fQlVGLCAxMCwgMTI4LCBhbGdvKS50aGVuKGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9KTsKICAgIGNoZWNrc1thbGdvXSA9IHByb207CiAgICByZXR1cm4gcHJvbTsKICB9CiAgdmFyIG5leHRUaWNrOwogIGZ1bmN0aW9uIGdldE5leHRUaWNrKCkgewogICAgaWYgKG5leHRUaWNrKSB7CiAgICAgIHJldHVybiBuZXh0VGljazsKICAgIH0KICAgIGlmIChnbG9iYWxUaGlzLnByb2Nlc3MgJiYgZ2xvYmFsVGhpcy5wcm9jZXNzLm5leHRUaWNrKSB7CiAgICAgIG5leHRUaWNrID0gZ2xvYmFsVGhpcy5wcm9jZXNzLm5leHRUaWNrOwogICAgfSBlbHNlIGlmIChnbG9iYWxUaGlzLnF1ZXVlTWljcm90YXNrKSB7CiAgICAgIG5leHRUaWNrID0gZ2xvYmFsVGhpcy5xdWV1ZU1pY3JvdGFzazsKICAgIH0gZWxzZSBpZiAoZ2xvYmFsVGhpcy5zZXRJbW1lZGlhdGUpIHsKICAgICAgbmV4dFRpY2sgPSBnbG9iYWxUaGlzLnNldEltbWVkaWF0ZTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHRUaWNrID0gZ2xvYmFsVGhpcy5zZXRUaW1lb3V0OwogICAgfQogICAgcmV0dXJuIG5leHRUaWNrOwogIH0KICBmdW5jdGlvbiBicm93c2VyUGJrZGYyKHBhc3N3b3JkLCBzYWx0LCBpdGVyYXRpb25zLCBsZW5ndGgsIGFsZ28pIHsKICAgIHJldHVybiBzdWJ0bGUuaW1wb3J0S2V5KCJyYXciLCBwYXNzd29yZCwgeyBuYW1lOiAiUEJLREYyIiB9LCBmYWxzZSwgWyJkZXJpdmVCaXRzIl0pLnRoZW4oZnVuY3Rpb24oa2V5KSB7CiAgICAgIHJldHVybiBzdWJ0bGUuZGVyaXZlQml0cyh7CiAgICAgICAgbmFtZTogIlBCS0RGMiIsCiAgICAgICAgc2FsdCwKICAgICAgICBpdGVyYXRpb25zLAogICAgICAgIGhhc2g6IHsKICAgICAgICAgIG5hbWU6IGFsZ28KICAgICAgICB9CiAgICAgIH0sIGtleSwgbGVuZ3RoIDw8IDMpOwogICAgfSkudGhlbihmdW5jdGlvbihyZXMpIHsKICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHJlcyk7CiAgICB9KTsKICB9CiAgZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UocHJvbWlzZSwgY2FsbGJhY2spIHsKICAgIHByb21pc2UudGhlbihmdW5jdGlvbihvdXQpIHsKICAgICAgZ2V0TmV4dFRpY2soKShmdW5jdGlvbigpIHsKICAgICAgICBjYWxsYmFjayhudWxsLCBvdXQpOwogICAgICB9KTsKICAgIH0sIGZ1bmN0aW9uKGUpIHsKICAgICAgZ2V0TmV4dFRpY2soKShmdW5jdGlvbigpIHsKICAgICAgICBjYWxsYmFjayhlKTsKICAgICAgfSk7CiAgICB9KTsKICB9CiAgdmFyIGFzeW5jID0gZnVuY3Rpb24ocGFzc3dvcmQsIHNhbHQsIGl0ZXJhdGlvbnMsIGtleWxlbiwgZGlnZXN0LCBjYWxsYmFjaykgewogICAgaWYgKHR5cGVvZiBkaWdlc3QgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgY2FsbGJhY2sgPSBkaWdlc3Q7CiAgICAgIGRpZ2VzdCA9IHZvaWQgMDsKICAgIH0KICAgIGRpZ2VzdCA9IGRpZ2VzdCB8fCAic2hhMSI7CiAgICB2YXIgYWxnbyA9IHRvQnJvd3NlcltkaWdlc3QudG9Mb3dlckNhc2UoKV07CiAgICBpZiAoIWFsZ28gfHwgdHlwZW9mIGdsb2JhbFRoaXMuUHJvbWlzZSAhPT0gImZ1bmN0aW9uIikgewogICAgICBnZXROZXh0VGljaygpKGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBvdXQ7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIG91dCA9IHN5bmMocGFzc3dvcmQsIHNhbHQsIGl0ZXJhdGlvbnMsIGtleWxlbiwgZGlnZXN0KTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZSk7CiAgICAgICAgfQogICAgICAgIGNhbGxiYWNrKG51bGwsIG91dCk7CiAgICAgIH0pOwogICAgICByZXR1cm47CiAgICB9CiAgICBjaGVja1BhcmFtZXRlcnMoaXRlcmF0aW9ucywga2V5bGVuKTsKICAgIHBhc3N3b3JkID0gdG9CdWZmZXIocGFzc3dvcmQsIGRlZmF1bHRFbmNvZGluZywgIlBhc3N3b3JkIik7CiAgICBzYWx0ID0gdG9CdWZmZXIoc2FsdCwgZGVmYXVsdEVuY29kaW5nLCAiU2FsdCIpOwogICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gImZ1bmN0aW9uIikKICAgICAgdGhyb3cgbmV3IEVycm9yKCJObyBjYWxsYmFjayBwcm92aWRlZCB0byBwYmtkZjIiKTsKICAgIHJlc29sdmVQcm9taXNlKGNoZWNrTmF0aXZlKGFsZ28pLnRoZW4oZnVuY3Rpb24ocmVzcCkgewogICAgICBpZiAocmVzcCkKICAgICAgICByZXR1cm4gYnJvd3NlclBia2RmMihwYXNzd29yZCwgc2FsdCwgaXRlcmF0aW9ucywga2V5bGVuLCBhbGdvKTsKICAgICAgcmV0dXJuIHN5bmMocGFzc3dvcmQsIHNhbHQsIGl0ZXJhdGlvbnMsIGtleWxlbiwgZGlnZXN0KTsKICAgIH0pLCBjYWxsYmFjayk7CiAgfTsKICBicm93c2VyJDEucGJrZGYyID0gYXN5bmM7CiAgYnJvd3NlciQxLnBia2RmMlN5bmMgPSBzeW5jQnJvd3NlcjsKICBnbG9iYWxUaGlzLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCAoZSkgPT4gewogICAgbGV0IHsgdXNlcm5hbWUsIHBhc3N3b3JkLCBwaW4gfSA9IGUuZGF0YTsKICAgIGxldCBkZXJpdmVkS2V5ID0gYnJvd3NlciQxLnBia2RmMlN5bmModXNlcm5hbWUsIHBhc3N3b3JkLCBwYXJzZUludChwaW4pLCAzMiwgInNoYTI1NiIpOwogICAgZ2xvYmFsVGhpcy5wb3N0TWVzc2FnZShkZXJpdmVkS2V5KTsKICB9KTsKfSkoKTsK";
const blob$1 = typeof window !== "undefined" && window.Blob && new Blob([atob(encodedJs$1)], { type: "text/javascript;charset=utf-8" });
function WorkerWrapper$1() {
  const objURL = blob$1 && (window.URL || window.webkitURL).createObjectURL(blob$1);
  try {
    return objURL ? new Worker(objURL) : new Worker("data:application/javascript;base64," + encodedJs$1, { type: "module" });
  } finally {
    objURL && (window.URL || window.webkitURL).revokeObjectURL(objURL);
  }
}
const encodedJs = "KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gInVuZGVmaW5lZCIgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHt9OwogIHZhciBhcmdvbjJCdW5kbGVkX21pbiA9IHsgZXhwb3J0czoge30gfTsKICAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7CiAgICAhZnVuY3Rpb24oQSwgSSkgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IEkoKTsKICAgIH0oY29tbW9uanNHbG9iYWwsIGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gKCgpID0+IHsKICAgICAgICB2YXIgQSwgSSwgZyA9IHsgNzczOiAoQTIsIEkyLCBnMikgPT4gewogICAgICAgICAgdmFyIEIyLCBRMiA9IHR5cGVvZiBzZWxmICE9ICJ1bmRlZmluZWQiICYmIHNlbGYuTW9kdWxlICE9PSB2b2lkIDAgPyBzZWxmLk1vZHVsZSA6IHt9LCBDID0ge307CiAgICAgICAgICBmb3IgKEIyIGluIFEyKQogICAgICAgICAgICBRMi5oYXNPd25Qcm9wZXJ0eShCMikgJiYgKENbQjJdID0gUTJbQjJdKTsKICAgICAgICAgIHZhciBFLCBpLCBvLCBEOwogICAgICAgICAgRSA9IHR5cGVvZiB3aW5kb3cgPT0gIm9iamVjdCIsIGkgPSB0eXBlb2YgaW1wb3J0U2NyaXB0cyA9PSAiZnVuY3Rpb24iLCBvID0gdHlwZW9mIHByb2Nlc3MgPT0gIm9iamVjdCIgJiYgdHlwZW9mIHByb2Nlc3MudmVyc2lvbnMgPT0gIm9iamVjdCIgJiYgdHlwZW9mIHByb2Nlc3MudmVyc2lvbnMubm9kZSA9PSAic3RyaW5nIiwgRCA9ICFFICYmICFvICYmICFpOwogICAgICAgICAgdmFyIG4sIHQsIGEsIHIsIHMsIHkgPSAiIjsKICAgICAgICAgIG8gPyAoeSA9IGkgPyBnMig5NjcpLmRpcm5hbWUoeSkgKyAiLyIgOiAiLy8iLCBuID0gZnVuY3Rpb24oQTMsIEkzKSB7CiAgICAgICAgICAgIHJldHVybiByIHx8IChyID0gZzIoMTQ1KSksIHMgfHwgKHMgPSBnMig5NjcpKSwgQTMgPSBzLm5vcm1hbGl6ZShBMyksIHIucmVhZEZpbGVTeW5jKEEzLCBJMyA/IG51bGwgOiAidXRmOCIpOwogICAgICAgICAgfSwgYSA9IGZ1bmN0aW9uKEEzKSB7CiAgICAgICAgICAgIHZhciBJMyA9IG4oQTMsIHRydWUpOwogICAgICAgICAgICByZXR1cm4gSTMuYnVmZmVyIHx8IChJMyA9IG5ldyBVaW50OEFycmF5KEkzKSksIEcoSTMuYnVmZmVyKSwgSTM7CiAgICAgICAgICB9LCBwcm9jZXNzLmFyZ3YubGVuZ3RoID4gMSAmJiBwcm9jZXNzLmFyZ3ZbMV0ucmVwbGFjZSgvXFwvZywgIi8iKSwgcHJvY2Vzcy5hcmd2LnNsaWNlKDIpLCBBMi5leHBvcnRzID0gUTIsIHByb2Nlc3Mub24oInVuY2F1Z2h0RXhjZXB0aW9uIiwgZnVuY3Rpb24oQTMpIHsKICAgICAgICAgICAgaWYgKCEoQTMgaW5zdGFuY2VvZiBWKSkKICAgICAgICAgICAgICB0aHJvdyBBMzsKICAgICAgICAgIH0pLCBwcm9jZXNzLm9uKCJ1bmhhbmRsZWRSZWplY3Rpb24iLCB1KSwgUTIuaW5zcGVjdCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gIltFbXNjcmlwdGVuIE1vZHVsZSBvYmplY3RdIjsKICAgICAgICAgIH0pIDogRCA/ICh0eXBlb2YgcmVhZCAhPSAidW5kZWZpbmVkIiAmJiAobiA9IGZ1bmN0aW9uKEEzKSB7CiAgICAgICAgICAgIHJldHVybiByZWFkKEEzKTsKICAgICAgICAgIH0pLCBhID0gZnVuY3Rpb24oQTMpIHsKICAgICAgICAgICAgdmFyIEkzOwogICAgICAgICAgICByZXR1cm4gdHlwZW9mIHJlYWRidWZmZXIgPT0gImZ1bmN0aW9uIiA/IG5ldyBVaW50OEFycmF5KHJlYWRidWZmZXIoQTMpKSA6IChHKHR5cGVvZiAoSTMgPSByZWFkKEEzLCAiYmluYXJ5IikpID09ICJvYmplY3QiKSwgSTMpOwogICAgICAgICAgfSwgdHlwZW9mIHNjcmlwdEFyZ3MgIT0gInVuZGVmaW5lZCIgPyBzY3JpcHRBcmdzIDogYXJndW1lbnRzICE9PSB2b2lkIDAgJiYgYXJndW1lbnRzLCB0eXBlb2YgcHJpbnQgIT0gInVuZGVmaW5lZCIgJiYgKHR5cGVvZiBjb25zb2xlID09ICJ1bmRlZmluZWQiICYmIChjb25zb2xlID0ge30pLCBjb25zb2xlLmxvZyA9IHByaW50LCBjb25zb2xlLndhcm4gPSBjb25zb2xlLmVycm9yID0gdHlwZW9mIHByaW50RXJyICE9ICJ1bmRlZmluZWQiID8gcHJpbnRFcnIgOiBwcmludCkpIDogKEUgfHwgaSkgJiYgKGkgPyB5ID0gc2VsZi5sb2NhdGlvbi5ocmVmIDogdHlwZW9mIGRvY3VtZW50ICE9ICJ1bmRlZmluZWQiICYmIGRvY3VtZW50LmN1cnJlbnRTY3JpcHQgJiYgKHkgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYyksIHkgPSB5LmluZGV4T2YoImJsb2I6IikgIT09IDAgPyB5LnN1YnN0cigwLCB5Lmxhc3RJbmRleE9mKCIvIikgKyAxKSA6ICIiLCBuID0gZnVuY3Rpb24oQTMpIHsKICAgICAgICAgICAgdmFyIEkzID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgIHJldHVybiBJMy5vcGVuKCJHRVQiLCBBMywgZmFsc2UpLCBJMy5zZW5kKG51bGwpLCBJMy5yZXNwb25zZVRleHQ7CiAgICAgICAgICB9LCBpICYmIChhID0gZnVuY3Rpb24oQTMpIHsKICAgICAgICAgICAgdmFyIEkzID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgIHJldHVybiBJMy5vcGVuKCJHRVQiLCBBMywgZmFsc2UpLCBJMy5yZXNwb25zZVR5cGUgPSAiYXJyYXlidWZmZXIiLCBJMy5zZW5kKG51bGwpLCBuZXcgVWludDhBcnJheShJMy5yZXNwb25zZSk7CiAgICAgICAgICB9KSwgdCA9IGZ1bmN0aW9uKEEzLCBJMywgZzMpIHsKICAgICAgICAgICAgdmFyIEIzID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgIEIzLm9wZW4oIkdFVCIsIEEzLCB0cnVlKSwgQjMucmVzcG9uc2VUeXBlID0gImFycmF5YnVmZmVyIiwgQjMub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgQjMuc3RhdHVzID09IDIwMCB8fCBCMy5zdGF0dXMgPT0gMCAmJiBCMy5yZXNwb25zZSA/IEkzKEIzLnJlc3BvbnNlKSA6IGczKCk7CiAgICAgICAgICAgIH0sIEIzLm9uZXJyb3IgPSBnMywgQjMuc2VuZChudWxsKTsKICAgICAgICAgIH0pLCBRMi5wcmludCB8fCBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpOwogICAgICAgICAgdmFyIEYsIGMsIHcgPSBRMi5wcmludEVyciB8fCBjb25zb2xlLndhcm4uYmluZChjb25zb2xlKTsKICAgICAgICAgIGZvciAoQjIgaW4gQykKICAgICAgICAgICAgQy5oYXNPd25Qcm9wZXJ0eShCMikgJiYgKFEyW0IyXSA9IENbQjJdKTsKICAgICAgICAgIEMgPSBudWxsLCBRMi5hcmd1bWVudHMgJiYgUTIuYXJndW1lbnRzLCBRMi50aGlzUHJvZ3JhbSAmJiBRMi50aGlzUHJvZ3JhbSwgUTIucXVpdCAmJiBRMi5xdWl0LCBRMi53YXNtQmluYXJ5ICYmIChGID0gUTIud2FzbUJpbmFyeSksIFEyLm5vRXhpdFJ1bnRpbWUsIHR5cGVvZiBXZWJBc3NlbWJseSAhPSAib2JqZWN0IiAmJiB1KCJubyBuYXRpdmUgd2FzbSBzdXBwb3J0IGRldGVjdGVkIik7CiAgICAgICAgICB2YXIgaCA9IGZhbHNlOwogICAgICAgICAgZnVuY3Rpb24gRyhBMywgSTMpIHsKICAgICAgICAgICAgQTMgfHwgdSgiQXNzZXJ0aW9uIGZhaWxlZDogIiArIEkzKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBOLCBSLCBmID0gdHlwZW9mIFRleHREZWNvZGVyICE9ICJ1bmRlZmluZWQiID8gbmV3IFRleHREZWNvZGVyKCJ1dGY4IikgOiB2b2lkIDA7CiAgICAgICAgICBmdW5jdGlvbiBVKEEzKSB7CiAgICAgICAgICAgIE4gPSBBMywgUTIuSEVBUDggPSBuZXcgSW50OEFycmF5KEEzKSwgUTIuSEVBUDE2ID0gbmV3IEludDE2QXJyYXkoQTMpLCBRMi5IRUFQMzIgPSBuZXcgSW50MzJBcnJheShBMyksIFEyLkhFQVBVOCA9IFIgPSBuZXcgVWludDhBcnJheShBMyksIFEyLkhFQVBVMTYgPSBuZXcgVWludDE2QXJyYXkoQTMpLCBRMi5IRUFQVTMyID0gbmV3IFVpbnQzMkFycmF5KEEzKSwgUTIuSEVBUEYzMiA9IG5ldyBGbG9hdDMyQXJyYXkoQTMpLCBRMi5IRUFQRjY0ID0gbmV3IEZsb2F0NjRBcnJheShBMyk7CiAgICAgICAgICB9CiAgICAgICAgICBRMi5JTklUSUFMX01FTU9SWTsKICAgICAgICAgIHZhciBNLCBZID0gW10sIFMgPSBbXSwgSCA9IFtdLCBkID0gMCwgSiA9IG51bGw7CiAgICAgICAgICBmdW5jdGlvbiB1KEEzKSB7CiAgICAgICAgICAgIHRocm93IFEyLm9uQWJvcnQgJiYgUTIub25BYm9ydChBMyksIHcoQTMgKz0gIiIpLCBoID0gdHJ1ZSwgQTMgPSAiYWJvcnQoIiArIEEzICsgIikuIEJ1aWxkIHdpdGggLXMgQVNTRVJUSU9OUz0xIGZvciBtb3JlIGluZm8uIiwgbmV3IFdlYkFzc2VtYmx5LlJ1bnRpbWVFcnJvcihBMyk7CiAgICAgICAgICB9CiAgICAgICAgICBmdW5jdGlvbiBwKEEzKSB7CiAgICAgICAgICAgIHJldHVybiBBMy5zdGFydHNXaXRoKCJkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsIik7CiAgICAgICAgICB9CiAgICAgICAgICBmdW5jdGlvbiBMKEEzKSB7CiAgICAgICAgICAgIHJldHVybiBBMy5zdGFydHNXaXRoKCJmaWxlOi8vIik7CiAgICAgICAgICB9CiAgICAgICAgICBRMi5wcmVsb2FkZWRJbWFnZXMgPSB7fSwgUTIucHJlbG9hZGVkQXVkaW9zID0ge307CiAgICAgICAgICB2YXIgbCwgSyA9ICJhcmdvbjIud2FzbSI7CiAgICAgICAgICBmdW5jdGlvbiBxKEEzKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKEEzID09IEsgJiYgRikKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShGKTsKICAgICAgICAgICAgICBpZiAoYSkKICAgICAgICAgICAgICAgIHJldHVybiBhKEEzKTsKICAgICAgICAgICAgICB0aHJvdyAiYm90aCBhc3luYyBhbmQgc3luYyBmZXRjaGluZyBvZiB0aGUgd2FzbSBmYWlsZWQiOwogICAgICAgICAgICB9IGNhdGNoIChBNCkgewogICAgICAgICAgICAgIHUoQTQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBmdW5jdGlvbiBiKEEzKSB7CiAgICAgICAgICAgIGZvciAoOyBBMy5sZW5ndGggPiAwOyApIHsKICAgICAgICAgICAgICB2YXIgSTMgPSBBMy5zaGlmdCgpOwogICAgICAgICAgICAgIGlmICh0eXBlb2YgSTMgIT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICAgICAgdmFyIGczID0gSTMuZnVuYzsKICAgICAgICAgICAgICAgIHR5cGVvZiBnMyA9PSAibnVtYmVyIiA/IEkzLmFyZyA9PT0gdm9pZCAwID8gTS5nZXQoZzMpKCkgOiBNLmdldChnMykoSTMuYXJnKSA6IGczKEkzLmFyZyA9PT0gdm9pZCAwID8gbnVsbCA6IEkzLmFyZyk7CiAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICBJMyhRMik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGZ1bmN0aW9uIHgoQTMpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICByZXR1cm4gYy5ncm93KEEzIC0gTi5ieXRlTGVuZ3RoICsgNjU1MzUgPj4+IDE2KSwgVShjLmJ1ZmZlciksIDE7CiAgICAgICAgICAgIH0gY2F0Y2ggKEE0KSB7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHAoSykgfHwgKGwgPSBLLCBLID0gUTIubG9jYXRlRmlsZSA/IFEyLmxvY2F0ZUZpbGUobCwgeSkgOiB5ICsgbCk7CiAgICAgICAgICB2YXIgbSwgWCA9IHsgYTogZnVuY3Rpb24oQTMsIEkzLCBnMykgewogICAgICAgICAgICBSLmNvcHlXaXRoaW4oQTMsIEkzLCBJMyArIGczKTsKICAgICAgICAgIH0sIGI6IGZ1bmN0aW9uKEEzKSB7CiAgICAgICAgICAgIHZhciBJMywgZzMgPSBSLmxlbmd0aCwgQjMgPSAyMTQ3NDE4MTEyOwogICAgICAgICAgICBpZiAoKEEzID4+Pj0gMCkgPiBCMykKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIGZvciAodmFyIFEzID0gMTsgUTMgPD0gNDsgUTMgKj0gMikgewogICAgICAgICAgICAgIHZhciBDMiA9IGczICogKDEgKyAwLjIgLyBRMyk7CiAgICAgICAgICAgICAgaWYgKEMyID0gTWF0aC5taW4oQzIsIEEzICsgMTAwNjYzMjk2KSwgeChNYXRoLm1pbihCMywgKChJMyA9IE1hdGgubWF4KEEzLCBDMikpICUgNjU1MzYgPiAwICYmIChJMyArPSA2NTUzNiAtIEkzICUgNjU1MzYpLCBJMykpKSkKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0gfSwgVyA9IChmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIEEzID0geyBhOiBYIH07CiAgICAgICAgICAgIGZ1bmN0aW9uIEkzKEE0LCBJNCkgewogICAgICAgICAgICAgIHZhciBnNCwgQjQgPSBBNC5leHBvcnRzOwogICAgICAgICAgICAgIFEyLmFzbSA9IEI0LCBVKChjID0gUTIuYXNtLmMpLmJ1ZmZlciksIE0gPSBRMi5hc20uaywgZzQgPSBRMi5hc20uZCwgUy51bnNoaWZ0KGc0KSwgZnVuY3Rpb24oQTUpIHsKICAgICAgICAgICAgICAgIGlmIChkLS0sIFEyLm1vbml0b3JSdW5EZXBlbmRlbmNpZXMgJiYgUTIubW9uaXRvclJ1bkRlcGVuZGVuY2llcyhkKSwgZCA9PSAwICYmIEopIHsKICAgICAgICAgICAgICAgICAgdmFyIEk1ID0gSjsKICAgICAgICAgICAgICAgICAgSiA9IG51bGwsIEk1KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIGczKEE0KSB7CiAgICAgICAgICAgICAgSTMoQTQuaW5zdGFuY2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEIzKEk0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaWYgKCFGICYmIChFIHx8IGkpKSB7CiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZmV0Y2ggPT0gImZ1bmN0aW9uIiAmJiAhTChLKSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goSywgeyBjcmVkZW50aWFsczogInNhbWUtb3JpZ2luIiB9KS50aGVuKGZ1bmN0aW9uKEE0KSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoIUE0Lm9rKQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAiZmFpbGVkIHRvIGxvYWQgd2FzbSBiaW5hcnkgZmlsZSBhdCAnIiArIEsgKyAiJyI7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQTQuYXJyYXlCdWZmZXIoKTsKICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBxKEspOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBpZiAodCkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oQTQsIEk1KSB7CiAgICAgICAgICAgICAgICAgICAgICB0KEssIGZ1bmN0aW9uKEk2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEE0KG5ldyBVaW50OEFycmF5KEk2KSk7CiAgICAgICAgICAgICAgICAgICAgICB9LCBJNSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHEoSyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KCkudGhlbihmdW5jdGlvbihJNSkgewogICAgICAgICAgICAgICAgcmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKEk1LCBBMyk7CiAgICAgICAgICAgICAgfSkudGhlbihJNCwgZnVuY3Rpb24oQTQpIHsKICAgICAgICAgICAgICAgIHcoImZhaWxlZCB0byBhc3luY2hyb25vdXNseSBwcmVwYXJlIHdhc206ICIgKyBBNCksIHUoQTQpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChkKyssIFEyLm1vbml0b3JSdW5EZXBlbmRlbmNpZXMgJiYgUTIubW9uaXRvclJ1bkRlcGVuZGVuY2llcyhkKSwgUTIuaW5zdGFudGlhdGVXYXNtKQogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUTIuaW5zdGFudGlhdGVXYXNtKEEzLCBJMyk7CiAgICAgICAgICAgICAgfSBjYXRjaCAoQTQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB3KCJNb2R1bGUuaW5zdGFudGlhdGVXYXNtIGNhbGxiYWNrIGZhaWxlZCB3aXRoIGVycm9yOiAiICsgQTQpLCBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIEYgfHwgdHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nICE9ICJmdW5jdGlvbiIgfHwgcChLKSB8fCBMKEspIHx8IHR5cGVvZiBmZXRjaCAhPSAiZnVuY3Rpb24iID8gQjMoZzMpIDogZmV0Y2goSywgeyBjcmVkZW50aWFsczogInNhbWUtb3JpZ2luIiB9KS50aGVuKGZ1bmN0aW9uKEk0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKEk0LCBBMykudGhlbihnMywgZnVuY3Rpb24oQTQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB3KCJ3YXNtIHN0cmVhbWluZyBjb21waWxlIGZhaWxlZDogIiArIEE0KSwgdygiZmFsbGluZyBiYWNrIHRvIEFycmF5QnVmZmVyIGluc3RhbnRpYXRpb24iKSwgQjMoZzMpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0oKSwgUTIuX19fd2FzbV9jYWxsX2N0b3JzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiAoUTIuX19fd2FzbV9jYWxsX2N0b3JzID0gUTIuYXNtLmQpLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9LCBRMi5fYXJnb24yX2hhc2ggPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIChRMi5fYXJnb24yX2hhc2ggPSBRMi5hc20uZSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKICAgICAgICAgIH0sIFEyLl9tYWxsb2MgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIChXID0gUTIuX21hbGxvYyA9IFEyLmFzbS5mKS5hcHBseShudWxsLCBhcmd1bWVudHMpOwogICAgICAgICAgfSksIFQgPSAoUTIuX2ZyZWUgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIChRMi5fZnJlZSA9IFEyLmFzbS5nKS5hcHBseShudWxsLCBhcmd1bWVudHMpOwogICAgICAgICAgfSwgUTIuX2FyZ29uMl92ZXJpZnkgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIChRMi5fYXJnb24yX3ZlcmlmeSA9IFEyLmFzbS5oKS5hcHBseShudWxsLCBhcmd1bWVudHMpOwogICAgICAgICAgfSwgUTIuX2FyZ29uMl9lcnJvcl9tZXNzYWdlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiAoUTIuX2FyZ29uMl9lcnJvcl9tZXNzYWdlID0gUTIuYXNtLmkpLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9LCBRMi5fYXJnb24yX2VuY29kZWRsZW4gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIChRMi5fYXJnb24yX2VuY29kZWRsZW4gPSBRMi5hc20uaikuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKICAgICAgICAgIH0sIFEyLl9hcmdvbjJfaGFzaF9leHQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIChRMi5fYXJnb24yX2hhc2hfZXh0ID0gUTIuYXNtLmwpLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9LCBRMi5fYXJnb24yX3ZlcmlmeV9leHQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIChRMi5fYXJnb24yX3ZlcmlmeV9leHQgPSBRMi5hc20ubSkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKICAgICAgICAgIH0sIFEyLnN0YWNrQWxsb2MgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIChUID0gUTIuc3RhY2tBbGxvYyA9IFEyLmFzbS5uKS5hcHBseShudWxsLCBhcmd1bWVudHMpOwogICAgICAgICAgfSk7CiAgICAgICAgICBmdW5jdGlvbiBWKEEzKSB7CiAgICAgICAgICAgIHRoaXMubmFtZSA9ICJFeGl0U3RhdHVzIiwgdGhpcy5tZXNzYWdlID0gIlByb2dyYW0gdGVybWluYXRlZCB3aXRoIGV4aXQoIiArIEEzICsgIikiLCB0aGlzLnN0YXR1cyA9IEEzOwogICAgICAgICAgfQogICAgICAgICAgZnVuY3Rpb24gaihBMykgewogICAgICAgICAgICBmdW5jdGlvbiBJMygpIHsKICAgICAgICAgICAgICBtIHx8IChtID0gdHJ1ZSwgUTIuY2FsbGVkUnVuID0gdHJ1ZSwgaCB8fCAoYihTKSwgUTIub25SdW50aW1lSW5pdGlhbGl6ZWQgJiYgUTIub25SdW50aW1lSW5pdGlhbGl6ZWQoKSwgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpZiAoUTIucG9zdFJ1bikKICAgICAgICAgICAgICAgICAgZm9yICh0eXBlb2YgUTIucG9zdFJ1biA9PSAiZnVuY3Rpb24iICYmIChRMi5wb3N0UnVuID0gW1EyLnBvc3RSdW5dKTsgUTIucG9zdFJ1bi5sZW5ndGg7ICkKICAgICAgICAgICAgICAgICAgICBBNCA9IFEyLnBvc3RSdW4uc2hpZnQoKSwgSC51bnNoaWZ0KEE0KTsKICAgICAgICAgICAgICAgIHZhciBBNDsKICAgICAgICAgICAgICAgIGIoSCk7CiAgICAgICAgICAgICAgfSgpKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZCA+IDAgfHwgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIGlmIChRMi5wcmVSdW4pCiAgICAgICAgICAgICAgICBmb3IgKHR5cGVvZiBRMi5wcmVSdW4gPT0gImZ1bmN0aW9uIiAmJiAoUTIucHJlUnVuID0gW1EyLnByZVJ1bl0pOyBRMi5wcmVSdW4ubGVuZ3RoOyApCiAgICAgICAgICAgICAgICAgIEE0ID0gUTIucHJlUnVuLnNoaWZ0KCksIFkudW5zaGlmdChBNCk7CiAgICAgICAgICAgICAgdmFyIEE0OwogICAgICAgICAgICAgIGIoWSk7CiAgICAgICAgICAgIH0oKSwgZCA+IDAgfHwgKFEyLnNldFN0YXR1cyA/IChRMi5zZXRTdGF0dXMoIlJ1bm5pbmcuLi4iKSwgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgUTIuc2V0U3RhdHVzKCIiKTsKICAgICAgICAgICAgICB9LCAxKSwgSTMoKTsKICAgICAgICAgICAgfSwgMSkpIDogSTMoKSkpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKFEyLmFsbG9jYXRlID0gZnVuY3Rpb24oQTMsIEkzKSB7CiAgICAgICAgICAgIHZhciBnMzsKICAgICAgICAgICAgcmV0dXJuIGczID0gSTMgPT0gMSA/IFQoQTMubGVuZ3RoKSA6IFcoQTMubGVuZ3RoKSwgQTMuc3ViYXJyYXkgfHwgQTMuc2xpY2UgPyBSLnNldChBMywgZzMpIDogUi5zZXQobmV3IFVpbnQ4QXJyYXkoQTMpLCBnMyksIGczOwogICAgICAgICAgfSwgUTIuVVRGOFRvU3RyaW5nID0gZnVuY3Rpb24oQTMsIEkzKSB7CiAgICAgICAgICAgIHJldHVybiBBMyA/IGZ1bmN0aW9uKEE0LCBJNCwgZzMpIHsKICAgICAgICAgICAgICBmb3IgKHZhciBCMyA9IEk0ICsgZzMsIFEzID0gSTQ7IEE0W1EzXSAmJiAhKFEzID49IEIzKTsgKQogICAgICAgICAgICAgICAgKytRMzsKICAgICAgICAgICAgICBpZiAoUTMgLSBJNCA+IDE2ICYmIEE0LnN1YmFycmF5ICYmIGYpCiAgICAgICAgICAgICAgICByZXR1cm4gZi5kZWNvZGUoQTQuc3ViYXJyYXkoSTQsIFEzKSk7CiAgICAgICAgICAgICAgZm9yICh2YXIgQzIgPSAiIjsgSTQgPCBRMzsgKSB7CiAgICAgICAgICAgICAgICB2YXIgRTIgPSBBNFtJNCsrXTsKICAgICAgICAgICAgICAgIGlmICgxMjggJiBFMikgewogICAgICAgICAgICAgICAgICB2YXIgaTIgPSA2MyAmIEE0W0k0KytdOwogICAgICAgICAgICAgICAgICBpZiAoKDIyNCAmIEUyKSAhPSAxOTIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbzIgPSA2MyAmIEE0W0k0KytdOwogICAgICAgICAgICAgICAgICAgIGlmICgoRTIgPSAoMjQwICYgRTIpID09IDIyNCA/ICgxNSAmIEUyKSA8PCAxMiB8IGkyIDw8IDYgfCBvMiA6ICg3ICYgRTIpIDw8IDE4IHwgaTIgPDwgMTIgfCBvMiA8PCA2IHwgNjMgJiBBNFtJNCsrXSkgPCA2NTUzNikKICAgICAgICAgICAgICAgICAgICAgIEMyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoRTIpOwogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgdmFyIEQyID0gRTIgLSA2NTUzNjsKICAgICAgICAgICAgICAgICAgICAgIEMyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTYgfCBEMiA+PiAxMCwgNTYzMjAgfCAxMDIzICYgRDIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAgICAgQzIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoMzEgJiBFMikgPDwgNiB8IGkyKTsKICAgICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgICBDMiArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKEUyKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIEMyOwogICAgICAgICAgICB9KFIsIEEzLCBJMykgOiAiIjsKICAgICAgICAgIH0sIFEyLkFMTE9DX05PUk1BTCA9IDAsIEogPSBmdW5jdGlvbiBBMygpIHsKICAgICAgICAgICAgbSB8fCBqKCksIG0gfHwgKEogPSBBMyk7CiAgICAgICAgICB9LCBRMi5ydW4gPSBqLCBRMi5wcmVJbml0KQogICAgICAgICAgICBmb3IgKHR5cGVvZiBRMi5wcmVJbml0ID09ICJmdW5jdGlvbiIgJiYgKFEyLnByZUluaXQgPSBbUTIucHJlSW5pdF0pOyBRMi5wcmVJbml0Lmxlbmd0aCA+IDA7ICkKICAgICAgICAgICAgICBRMi5wcmVJbml0LnBvcCgpKCk7CiAgICAgICAgICBqKCksIEEyLmV4cG9ydHMgPSBRMiwgUTIudW5sb2FkUnVudGltZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB0eXBlb2Ygc2VsZiAhPSAidW5kZWZpbmVkIiAmJiBkZWxldGUgc2VsZi5Nb2R1bGUsIFEyID0gYyA9IE0gPSBOID0gUiA9IHZvaWQgMCwgZGVsZXRlIEEyLmV4cG9ydHM7CiAgICAgICAgICB9OwogICAgICAgIH0sIDYzMTogZnVuY3Rpb24oQTIsIEkyLCBnMikgewogICAgICAgICAgdmFyIEIyLCBRMjsKICAgICAgICAgIChRMiA9IHR5cGVvZiAoQjIgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgY29uc3QgQTMgPSB0eXBlb2Ygc2VsZiAhPSAidW5kZWZpbmVkIiA/IHNlbGYgOiB0aGlzLCBJMyA9IHsgQXJnb24yZDogMCwgQXJnb24yaTogMSwgQXJnb24yaWQ6IDIgfTsKICAgICAgICAgICAgZnVuY3Rpb24gQjMoSTQpIHsKICAgICAgICAgICAgICBpZiAoQjMuX3Byb21pc2UpCiAgICAgICAgICAgICAgICByZXR1cm4gQjMuX3Byb21pc2U7CiAgICAgICAgICAgICAgaWYgKEIzLl9tb2R1bGUpCiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKEIzLl9tb2R1bGUpOwogICAgICAgICAgICAgIGxldCBDMjsKICAgICAgICAgICAgICByZXR1cm4gQzIgPSBBMy5wcm9jZXNzICYmIEEzLnByb2Nlc3MudmVyc2lvbnMgJiYgQTMucHJvY2Vzcy52ZXJzaW9ucy5ub2RlID8gUTMoKS50aGVuKChBNCkgPT4gbmV3IFByb21pc2UoKEk1KSA9PiB7CiAgICAgICAgICAgICAgICBBNC5wb3N0UnVuID0gKCkgPT4gSTUoQTQpOwogICAgICAgICAgICAgIH0pKSA6IChBMy5sb2FkQXJnb24yV2FzbUJpbmFyeSA/IEEzLmxvYWRBcmdvbjJXYXNtQmluYXJ5KCkgOiBQcm9taXNlLnJlc29sdmUoZzIoNzIxKSkudGhlbigoQTQpID0+IGZ1bmN0aW9uKEE1KSB7CiAgICAgICAgICAgICAgICBjb25zdCBJNSA9IGF0b2IoQTUpLCBnMyA9IG5ldyBVaW50OEFycmF5KG5ldyBBcnJheUJ1ZmZlcihJNS5sZW5ndGgpKTsKICAgICAgICAgICAgICAgIGZvciAobGV0IEE2ID0gMDsgQTYgPCBJNS5sZW5ndGg7IEE2KyspCiAgICAgICAgICAgICAgICAgIGczW0E2XSA9IEk1LmNoYXJDb2RlQXQoQTYpOwogICAgICAgICAgICAgICAgcmV0dXJuIGczOwogICAgICAgICAgICAgIH0oQTQpKSkudGhlbigoZzMpID0+IGZ1bmN0aW9uKEk1LCBnNCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChCNCkgPT4gKEEzLk1vZHVsZSA9IHsgd2FzbUJpbmFyeTogSTUsIHdhc21NZW1vcnk6IGc0LCBwb3N0UnVuKCkgewogICAgICAgICAgICAgICAgICBCNChNb2R1bGUpOwogICAgICAgICAgICAgICAgfSB9LCBRMygpKSk7CiAgICAgICAgICAgICAgfShnMywgSTQgPyBmdW5jdGlvbihBNCkgewogICAgICAgICAgICAgICAgY29uc3QgSTUgPSAxMDI0LCBnNCA9IDY0ICogSTUsIEI0ID0gKDEwMjQgKiBJNSAqIDEwMjQgKiAyIC0gNjQgKiBJNSkgLyBnNCwgUTQgPSBNYXRoLm1pbihNYXRoLm1heChNYXRoLmNlaWwoQTQgKiBJNSAvIGc0KSwgMjU2KSArIDI1NiwgQjQpOwogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBXZWJBc3NlbWJseS5NZW1vcnkoeyBpbml0aWFsOiBRNCwgbWF4aW11bTogQjQgfSk7CiAgICAgICAgICAgICAgfShJNCkgOiB2b2lkIDApKSwgQjMuX3Byb21pc2UgPSBDMiwgQzIudGhlbigoQTQpID0+IChCMy5fbW9kdWxlID0gQTQsIGRlbGV0ZSBCMy5fcHJvbWlzZSwgQTQpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBRMygpIHsKICAgICAgICAgICAgICByZXR1cm4gQTMubG9hZEFyZ29uMldhc21Nb2R1bGUgPyBBMy5sb2FkQXJnb24yV2FzbU1vZHVsZSgpIDogUHJvbWlzZS5yZXNvbHZlKGcyKDc3MykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEMoQTQsIEk0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIEE0LmFsbG9jYXRlKEk0LCAiaTgiLCBBNC5BTExPQ19OT1JNQUwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEUoQTQsIEk0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIEMoQTQsIG5ldyBVaW50OEFycmF5KFsuLi5JNCwgMF0pKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBpKEE0KSB7CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBBNCAhPSAic3RyaW5nIikKICAgICAgICAgICAgICAgIHJldHVybiBBNDsKICAgICAgICAgICAgICBpZiAodHlwZW9mIFRleHRFbmNvZGVyID09ICJmdW5jdGlvbiIpCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKEE0KTsKICAgICAgICAgICAgICBpZiAodHlwZW9mIEJ1ZmZlciA9PSAiZnVuY3Rpb24iKQogICAgICAgICAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKEE0KTsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkRvbid0IGtub3cgaG93IHRvIGVuY29kZSBVVEY4Iik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHsgQXJnb25UeXBlOiBJMywgaGFzaDogZnVuY3Rpb24oQTQpIHsKICAgICAgICAgICAgICBjb25zdCBnMyA9IEE0Lm1lbSB8fCAxMDI0OwogICAgICAgICAgICAgIHJldHVybiBCMyhnMykudGhlbigoQjQpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IFE0ID0gQTQudGltZSB8fCAxLCBvID0gQTQucGFyYWxsZWxpc20gfHwgMSwgRCA9IGkoQTQucGFzcyksIGUgPSBFKEI0LCBEKSwgbiA9IEQubGVuZ3RoLCB0ID0gaShBNC5zYWx0KSwgYSA9IEUoQjQsIHQpLCByID0gdC5sZW5ndGgsIHMgPSBBNC50eXBlIHx8IEkzLkFyZ29uMmQsIHkgPSBCNC5hbGxvY2F0ZShuZXcgQXJyYXkoQTQuaGFzaExlbiB8fCAyNCksICJpOCIsIEI0LkFMTE9DX05PUk1BTCksIEYgPSBBNC5zZWNyZXQgPyBDKEI0LCBBNC5zZWNyZXQpIDogMCwgYyA9IEE0LnNlY3JldCA/IEE0LnNlY3JldC5ieXRlTGVuZ3RoIDogMCwgdyA9IEE0LmFkID8gQyhCNCwgQTQuYWQpIDogMCwgaCA9IEE0LmFkID8gQTQuYWQuYnl0ZUxlbmd0aCA6IDAsIEcgPSBBNC5oYXNoTGVuIHx8IDI0LCBOID0gQjQuX2FyZ29uMl9lbmNvZGVkbGVuKFE0LCBnMywgbywgciwgRywgcyksIFIgPSBCNC5hbGxvY2F0ZShuZXcgQXJyYXkoTiArIDEpLCAiaTgiLCBCNC5BTExPQ19OT1JNQUwpOwogICAgICAgICAgICAgICAgbGV0IGYsIFUsIE07CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBVID0gQjQuX2FyZ29uMl9oYXNoX2V4dChRNCwgZzMsIG8sIGUsIG4sIGEsIHIsIHksIEcsIFIsIE4sIHMsIEYsIGMsIHcsIGgsIDE5KTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEE1KSB7CiAgICAgICAgICAgICAgICAgIGYgPSBBNTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChVICE9PSAwIHx8IGYpIHsKICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBmIHx8IChmID0gQjQuVVRGOFRvU3RyaW5nKEI0Ll9hcmdvbjJfZXJyb3JfbWVzc2FnZShVKSkpOwogICAgICAgICAgICAgICAgICB9IGNhdGNoIChBNSkgewogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIE0gPSB7IG1lc3NhZ2U6IGYsIGNvZGU6IFUgfTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGxldCBBNSA9ICIiOwogICAgICAgICAgICAgICAgICBjb25zdCBJNCA9IG5ldyBVaW50OEFycmF5KEcpOwogICAgICAgICAgICAgICAgICBmb3IgKGxldCBnNCA9IDA7IGc0IDwgRzsgZzQrKykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IFE1ID0gQjQuSEVBUDhbeSArIGc0XTsKICAgICAgICAgICAgICAgICAgICBJNFtnNF0gPSBRNSwgQTUgKz0gKCIwIiArICgyNTUgJiBRNSkudG9TdHJpbmcoMTYpKS5zbGljZSgtMik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgTSA9IHsgaGFzaDogSTQsIGhhc2hIZXg6IEE1LCBlbmNvZGVkOiBCNC5VVEY4VG9TdHJpbmcoUikgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIEI0Ll9mcmVlKGUpLCBCNC5fZnJlZShhKSwgQjQuX2ZyZWUoeSksIEI0Ll9mcmVlKFIpLCB3ICYmIEI0Ll9mcmVlKHcpLCBGICYmIEI0Ll9mcmVlKEYpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoQTUpIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChmKQogICAgICAgICAgICAgICAgICB0aHJvdyBNOwogICAgICAgICAgICAgICAgcmV0dXJuIE07CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sIHZlcmlmeTogZnVuY3Rpb24oQTQpIHsKICAgICAgICAgICAgICByZXR1cm4gQjMoKS50aGVuKChnMykgPT4gewogICAgICAgICAgICAgICAgY29uc3QgQjQgPSBpKEE0LnBhc3MpLCBRNCA9IEUoZzMsIEI0KSwgbyA9IEI0Lmxlbmd0aCwgRCA9IEE0LnNlY3JldCA/IEMoZzMsIEE0LnNlY3JldCkgOiAwLCBlID0gQTQuc2VjcmV0ID8gQTQuc2VjcmV0LmJ5dGVMZW5ndGggOiAwLCBuID0gQTQuYWQgPyBDKGczLCBBNC5hZCkgOiAwLCB0ID0gQTQuYWQgPyBBNC5hZC5ieXRlTGVuZ3RoIDogMCwgYSA9IEUoZzMsIGkoQTQuZW5jb2RlZCkpOwogICAgICAgICAgICAgICAgbGV0IHIsIHMsIHksIEYgPSBBNC50eXBlOwogICAgICAgICAgICAgICAgaWYgKEYgPT09IHZvaWQgMCkgewogICAgICAgICAgICAgICAgICBsZXQgZzQgPSBBNC5lbmNvZGVkLnNwbGl0KCIkIilbMV07CiAgICAgICAgICAgICAgICAgIGc0ICYmIChnNCA9IGc0LnJlcGxhY2UoImEiLCAiQSIpLCBGID0gSTNbZzRdIHx8IEkzLkFyZ29uMmQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgcyA9IGczLl9hcmdvbjJfdmVyaWZ5X2V4dChhLCBRNCwgbywgRCwgZSwgbiwgdCwgRik7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChBNSkgewogICAgICAgICAgICAgICAgICByID0gQTU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocyB8fCByKSB7CiAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgciB8fCAociA9IGczLlVURjhUb1N0cmluZyhnMy5fYXJnb24yX2Vycm9yX21lc3NhZ2UocykpKTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoQTUpIHsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB5ID0geyBtZXNzYWdlOiByLCBjb2RlOiBzIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBnMy5fZnJlZShRNCksIGczLl9mcmVlKGEpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoQTUpIHsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChyKQogICAgICAgICAgICAgICAgICB0aHJvdyB5OwogICAgICAgICAgICAgICAgcmV0dXJuIHk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sIHVubG9hZFJ1bnRpbWU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgIEIzLl9tb2R1bGUgJiYgKEIzLl9tb2R1bGUudW5sb2FkUnVudGltZSgpLCBkZWxldGUgQjMuX3Byb21pc2UsIGRlbGV0ZSBCMy5fbW9kdWxlKTsKICAgICAgICAgICAgfSB9OwogICAgICAgICAgfSkgPT0gImZ1bmN0aW9uIiA/IEIyLmFwcGx5KEkyLCBbXSkgOiBCMikgPT09IHZvaWQgMCB8fCAoQTIuZXhwb3J0cyA9IFEyKTsKICAgICAgICB9LCA3MjE6IGZ1bmN0aW9uKEEyLCBJMikgewogICAgICAgICAgQTIuZXhwb3J0cyA9ICJBR0Z6YlFFQUFBQUJrd0VTWUFOL2YzOEJmMkFCZndGL1lBSi9md0JnQW45L0FYOWdBWDhBWUFSL2YzOS9BWDlnQTM5L2Z3QmdCSDkvZjM4QVlBSi9mZ0JnQW41L0FYNWdBbjUrQVg1Z0JYOS9mMzkvQUdBR2YzeC9mMzkvQVg5Z0FBQmdDSDkvZjM5L2YzOS9BWDlnRVg5L2YzOS9mMzkvZjM5L2YzOS9mMzkvQVg5Z0JuOS9mMzkvZndGL1lBMS9mMzkvZjM5L2YzOS9mMzkvQVg4Q0RRSUJZUUZoQUFBQllRRmlBQUVEUERzSkNnSUFBQUlFQVFFQUFRc0dBUUFIQUFJQkF3SUNBd0lJQlFFQ0F3RUhEUU1CQmdRR0FRRUZCUUVBQUFJRUFBQUlBUUFPRHdRUUFRVVJBd1FGQVhBQkF3TUZCd0VCZ0FMLy93RUdDUUYvQVVHUW84QUNDd2N4REFGakFnQUJaQUFoQVdVQU93Rm1BQWtCWndBSUFXZ0FPZ0ZwQURrQmFnQTRBV3NCQUFGc0FEWUJiUUExQVc0QU13a0lBUUJCQVFzQ0N6UUt3Yk1CT3dnQUlBQWdBYTJLQ3g0QUlBQWdBWHdnQUVJQmhrTCsvLy8vSDRNZ0FVTC8vLy8vRDROK2ZBc1hBRUh3SENnQ0FFVWdBRVZ5UlFSQUlBQWdBUkFkQ3d1REJBRURmeUFDUVlBRVR3UkFJQUFnQVNBQ0VBQWFJQUFQQ3lBQUlBSnFJUU1DUUNBQUlBRnpRUU54UlFSQUFrQWdBRUVEY1VVRVFDQUFJUUlNQVFzZ0FrRUJTQVJBSUFBaEFnd0JDeUFBSVFJRFFDQUNJQUV0QUFBNkFBQWdBVUVCYWlFQklBSkJBV29pQWtFRGNVVU5BU0FDSUFOSkRRQUxDd0pBSUFOQmZIRWlCRUhBQUVrTkFDQUNJQVJCUUdvaUJVc05BQU5BSUFJZ0FTZ0NBRFlDQUNBQ0lBRW9BZ1EyQWdRZ0FpQUJLQUlJTmdJSUlBSWdBU2dDRERZQ0RDQUNJQUVvQWhBMkFoQWdBaUFCS0FJVU5nSVVJQUlnQVNnQ0dEWUNHQ0FDSUFFb0FodzJBaHdnQWlBQktBSWdOZ0lnSUFJZ0FTZ0NKRFlDSkNBQ0lBRW9BaWcyQWlnZ0FpQUJLQUlzTmdJc0lBSWdBU2dDTURZQ01DQUNJQUVvQWpRMkFqUWdBaUFCS0FJNE5nSTRJQUlnQVNnQ1BEWUNQQ0FCUVVCcklRRWdBa0ZBYXlJQ0lBVk5EUUFMQ3lBQ0lBUlBEUUVEUUNBQ0lBRW9BZ0EyQWdBZ0FVRUVhaUVCSUFKQkJHb2lBaUFFU1EwQUN3d0JDeUFEUVFSSkJFQWdBQ0VDREFFTElBQWdBMEVFYXlJRVN3UkFJQUFoQWd3QkN5QUFJUUlEUUNBQ0lBRXRBQUE2QUFBZ0FpQUJMUUFCT2dBQklBSWdBUzBBQWpvQUFpQUNJQUV0QUFNNkFBTWdBVUVFYWlFQklBSkJCR29pQWlBRVRRMEFDd3NnQWlBRFNRUkFBMEFnQWlBQkxRQUFPZ0FBSUFGQkFXb2hBU0FDUVFGcUlnSWdBMGNOQUFzTElBQUx6d0VCQTM4Q1FDQUNSUTBBUVg4aEF5QUFSU0FCUlhJTkFDQUFLUU5RUWdCU0RRQUNRQ0FBS0FMZ0FTSURJQUpxUVlFQlNRMEFJQUJCNEFCcUlnVWdBMm9nQVVHQUFTQURheUlFRUFVYUlBQkNnQUVRR2lBQUlBVVFHVUVBSVFNZ0FFRUFOZ0xnQVNBQklBUnFJUUVnQWlBRWF5SUNRWUVCU1EwQUEwQWdBRUtBQVJBYUlBQWdBUkFaSUFGQmdBRnFJUUVnQWtHQUFXc2lBa0dBQVVzTkFBc2dBQ2dDNEFFaEF3c2dBQ0FEYWtIZ0FHb2dBU0FDRUFVYUlBQWdBQ2dDNEFFZ0FtbzJBdUFCUVFBaEF3c2dBd3NKQUNBQUlBRTJBQUFMcHd3QkIzOENRQ0FBUlEwQUlBQkJDR3NpQXlBQVFRUnJLQUlBSWdGQmVIRWlBR29oQlFKQUlBRkJBWEVOQUNBQlFRTnhSUTBCSUFNZ0F5Z0NBQ0lCYXlJRFFiQWZLQUlBU1EwQklBQWdBV29oQUNBRFFiUWZLQUlBUndSQUlBRkIvd0ZOQkVBZ0F5Z0NDQ0lDSUFGQkEzWWlCRUVEZEVISUgycEdHaUFDSUFNb0Fnd2lBVVlFUUVHZ0gwR2dIeWdDQUVGK0lBUjNjVFlDQUF3REN5QUNJQUUyQWd3Z0FTQUNOZ0lJREFJTElBTW9BaGdoQmdKQUlBTWdBeWdDRENJQlJ3UkFJQU1vQWdnaUFpQUJOZ0lNSUFFZ0FqWUNDQXdCQ3dKQUlBTkJGR29pQWlnQ0FDSUVEUUFnQTBFUWFpSUNLQUlBSWdRTkFFRUFJUUVNQVFzRFFDQUNJUWNnQkNJQlFSUnFJZ0lvQWdBaUJBMEFJQUZCRUdvaEFpQUJLQUlRSWdRTkFBc2dCMEVBTmdJQUN5QUdSUTBCQWtBZ0F5QURLQUljSWdKQkFuUkIwQ0ZxSWdRb0FnQkdCRUFnQkNBQk5nSUFJQUVOQVVHa0gwR2tIeWdDQUVGK0lBSjNjVFlDQUF3REN5QUdRUkJCRkNBR0tBSVFJQU5HRzJvZ0FUWUNBQ0FCUlEwQ0N5QUJJQVkyQWhnZ0F5Z0NFQ0lDQkVBZ0FTQUNOZ0lRSUFJZ0FUWUNHQXNnQXlnQ0ZDSUNSUTBCSUFFZ0FqWUNGQ0FDSUFFMkFoZ01BUXNnQlNnQ0JDSUJRUU54UVFOSERRQkJxQjhnQURZQ0FDQUZJQUZCZm5FMkFnUWdBeUFBUVFGeU5nSUVJQUFnQTJvZ0FEWUNBQThMSUFNZ0JVOE5BQ0FGS0FJRUlnRkJBWEZGRFFBQ1FDQUJRUUp4UlFSQUlBVkJ1QjhvQWdCR0JFQkJ1QjhnQXpZQ0FFR3NIMEdzSHlnQ0FDQUFhaUlBTmdJQUlBTWdBRUVCY2pZQ0JDQURRYlFmS0FJQVJ3MERRYWdmUVFBMkFnQkJ0QjlCQURZQ0FBOExJQVZCdEI4b0FnQkdCRUJCdEI4Z0F6WUNBRUdvSDBHb0h5Z0NBQ0FBYWlJQU5nSUFJQU1nQUVFQmNqWUNCQ0FBSUFOcUlBQTJBZ0FQQ3lBQlFYaHhJQUJxSVFBQ1FDQUJRZjhCVFFSQUlBVW9BZ2dpQWlBQlFRTjJJZ1JCQTNSQnlCOXFSaG9nQWlBRktBSU1JZ0ZHQkVCQm9COUJvQjhvQWdCQmZpQUVkM0UyQWdBTUFnc2dBaUFCTmdJTUlBRWdBallDQ0F3QkN5QUZLQUlZSVFZQ1FDQUZJQVVvQWd3aUFVY0VRQ0FGS0FJSUlnSkJzQjhvQWdCSkdpQUNJQUUyQWd3Z0FTQUNOZ0lJREFFTEFrQWdCVUVVYWlJQ0tBSUFJZ1FOQUNBRlFSQnFJZ0lvQWdBaUJBMEFRUUFoQVF3QkN3TkFJQUloQnlBRUlnRkJGR29pQWlnQ0FDSUVEUUFnQVVFUWFpRUNJQUVvQWhBaUJBMEFDeUFIUVFBMkFnQUxJQVpGRFFBQ1FDQUZJQVVvQWh3aUFrRUNkRUhRSVdvaUJDZ0NBRVlFUUNBRUlBRTJBZ0FnQVEwQlFhUWZRYVFmS0FJQVFYNGdBbmR4TmdJQURBSUxJQVpCRUVFVUlBWW9BaEFnQlVZYmFpQUJOZ0lBSUFGRkRRRUxJQUVnQmpZQ0dDQUZLQUlRSWdJRVFDQUJJQUkyQWhBZ0FpQUJOZ0lZQ3lBRktBSVVJZ0pGRFFBZ0FTQUNOZ0lVSUFJZ0FUWUNHQXNnQXlBQVFRRnlOZ0lFSUFBZ0Eyb2dBRFlDQUNBRFFiUWZLQUlBUncwQlFhZ2ZJQUEyQWdBUEN5QUZJQUZCZm5FMkFnUWdBeUFBUVFGeU5nSUVJQUFnQTJvZ0FEWUNBQXNnQUVIL0FVMEVRQ0FBUVFOMklnRkJBM1JCeUI5cUlRQUNmMEdnSHlnQ0FDSUNRUUVnQVhRaUFYRkZCRUJCb0I4Z0FTQUNjallDQUNBQURBRUxJQUFvQWdnTElRSWdBQ0FETmdJSUlBSWdBellDRENBRElBQTJBZ3dnQXlBQ05nSUlEd3RCSHlFQ0lBTkNBRGNDRUNBQVFmLy8vd2ROQkVBZ0FFRUlkaUlCSUFGQmdQNC9ha0VRZGtFSWNTSUJkQ0lDSUFKQmdPQWZha0VRZGtFRWNTSUNkQ0lFSUFSQmdJQVBha0VRZGtFQ2NTSUVkRUVQZGlBQklBSnlJQVJ5YXlJQlFRRjBJQUFnQVVFVmFuWkJBWEZ5UVJ4cUlRSUxJQU1nQWpZQ0hDQUNRUUowUWRBaGFpRUJBa0FDUUFKQVFhUWZLQUlBSWdSQkFTQUNkQ0lIY1VVRVFFR2tIeUFFSUFkeU5nSUFJQUVnQXpZQ0FDQURJQUUyQWhnTUFRc2dBRUVBUVJrZ0FrRUJkbXNnQWtFZlJodDBJUUlnQVNnQ0FDRUJBMEFnQVNJRUtBSUVRWGh4SUFCR0RRSWdBa0VkZGlFQklBSkJBWFFoQWlBRUlBRkJCSEZxSWdkQkVHb29BZ0FpQVEwQUN5QUhJQU0yQWhBZ0F5QUVOZ0lZQ3lBRElBTTJBZ3dnQXlBRE5nSUlEQUVMSUFRb0FnZ2lBQ0FETmdJTUlBUWdBellDQ0NBRFFRQTJBaGdnQXlBRU5nSU1JQU1nQURZQ0NBdEJ3QjlCd0I4b0FnQkJBV3NpQUVGL0lBQWJOZ0lBQ3d1VUxRRU1meU1BUVJCcklnd2tBQUpBQWtBQ1FBSkFBa0FDUUFKQUFrQUNRQUpBQWtBQ1FDQUFRZlFCVFFSQVFhQWZLQUlBSWdWQkVDQUFRUXRxUVhoeElBQkJDMGtiSWdoQkEzWWlBbllpQVVFRGNRUkFJQUZCZjNOQkFYRWdBbW9pQTBFRGRDSUJRZEFmYWlnQ0FDSUVRUWhxSVFBQ1FDQUVLQUlJSWdJZ0FVSElIMm9pQVVZRVFFR2dIeUFGUVg0Z0EzZHhOZ0lBREFFTElBSWdBVFlDRENBQklBSTJBZ2dMSUFRZ0EwRURkQ0lCUVFOeU5nSUVJQUVnQkdvaUFTQUJLQUlFUVFGeU5nSUVEQTBMSUFoQnFCOG9BZ0FpQ2swTkFTQUJCRUFDUUVFQ0lBSjBJZ0JCQUNBQWEzSWdBU0FDZEhFaUFFRUFJQUJyY1VFQmF5SUFJQUJCREhaQkVIRWlBbllpQVVFRmRrRUljU0lBSUFKeUlBRWdBSFlpQVVFQ2RrRUVjU0lBY2lBQklBQjJJZ0ZCQVhaQkFuRWlBSElnQVNBQWRpSUJRUUYyUVFGeElnQnlJQUVnQUhacUlnTkJBM1FpQUVIUUgyb29BZ0FpQkNnQ0NDSUJJQUJCeUI5cUlnQkdCRUJCb0I4Z0JVRitJQU4zY1NJRk5nSUFEQUVMSUFFZ0FEWUNEQ0FBSUFFMkFnZ0xJQVJCQ0dvaEFDQUVJQWhCQTNJMkFnUWdCQ0FJYWlJQ0lBTkJBM1FpQVNBSWF5SURRUUZ5TmdJRUlBRWdCR29nQXpZQ0FDQUtCRUFnQ2tFRGRpSUJRUU4wUWNnZmFpRUhRYlFmS0FJQUlRUUNmeUFGUVFFZ0FYUWlBWEZGQkVCQm9COGdBU0FGY2pZQ0FDQUhEQUVMSUFjb0FnZ0xJUUVnQnlBRU5nSUlJQUVnQkRZQ0RDQUVJQWMyQWd3Z0JDQUJOZ0lJQzBHMEh5QUNOZ0lBUWFnZklBTTJBZ0FNRFF0QnBCOG9BZ0FpQmtVTkFTQUdRUUFnQm10eFFRRnJJZ0FnQUVFTWRrRVFjU0lDZGlJQlFRVjJRUWh4SWdBZ0FuSWdBU0FBZGlJQlFRSjJRUVJ4SWdCeUlBRWdBSFlpQVVFQmRrRUNjU0lBY2lBQklBQjJJZ0ZCQVhaQkFYRWlBSElnQVNBQWRtcEJBblJCMENGcUtBSUFJZ0VvQWdSQmVIRWdDR3NoQXlBQklRSURRQUpBSUFJb0FoQWlBRVVFUUNBQ0tBSVVJZ0JGRFFFTElBQW9BZ1JCZUhFZ0NHc2lBaUFESUFJZ0Ewa2lBaHNoQXlBQUlBRWdBaHNoQVNBQUlRSU1BUXNMSUFFZ0NHb2lDU0FCVFEwQ0lBRW9BaGdoQ3lBQklBRW9BZ3dpQkVjRVFDQUJLQUlJSWdCQnNCOG9BZ0JKR2lBQUlBUTJBZ3dnQkNBQU5nSUlEQXdMSUFGQkZHb2lBaWdDQUNJQVJRUkFJQUVvQWhBaUFFVU5CQ0FCUVJCcUlRSUxBMEFnQWlFSElBQWlCRUVVYWlJQ0tBSUFJZ0FOQUNBRVFSQnFJUUlnQkNnQ0VDSUFEUUFMSUFkQkFEWUNBQXdMQzBGL0lRZ2dBRUcvZjBzTkFDQUFRUXRxSWdCQmVIRWhDRUdrSHlnQ0FDSUpSUTBBUVFBZ0NHc2hBd0pBQWtBQ1FBSi9RUUFnQ0VHQUFra05BQnBCSHlBSVFmLy8vd2RMRFFBYUlBQkJDSFlpQUNBQVFZRCtQMnBCRUhaQkNIRWlBblFpQUNBQVFZRGdIMnBCRUhaQkJIRWlBWFFpQUNBQVFZQ0FEMnBCRUhaQkFuRWlBSFJCRDNZZ0FTQUNjaUFBY21zaUFFRUJkQ0FJSUFCQkZXcDJRUUZ4Y2tFY2Fnc2lCVUVDZEVIUUlXb29BZ0FpQWtVRVFFRUFJUUFNQVF0QkFDRUFJQWhCQUVFWklBVkJBWFpySUFWQkgwWWJkQ0VCQTBBQ1FDQUNLQUlFUVhoeElBaHJJZ2NnQTA4TkFDQUNJUVFnQnlJRERRQkJBQ0VESUFJaEFBd0RDeUFBSUFJb0FoUWlCeUFISUFJZ0FVRWRka0VFY1dvb0FoQWlBa1liSUFBZ0J4c2hBQ0FCUVFGMElRRWdBZzBBQ3dzZ0FDQUVja1VFUUVFQUlRUkJBaUFGZENJQVFRQWdBR3R5SUFseElnQkZEUU1nQUVFQUlBQnJjVUVCYXlJQUlBQkJESFpCRUhFaUFuWWlBVUVGZGtFSWNTSUFJQUp5SUFFZ0FIWWlBVUVDZGtFRWNTSUFjaUFCSUFCMklnRkJBWFpCQW5FaUFISWdBU0FBZGlJQlFRRjJRUUZ4SWdCeUlBRWdBSFpxUVFKMFFkQWhhaWdDQUNFQUN5QUFSUTBCQ3dOQUlBQW9BZ1JCZUhFZ0NHc2lBU0FEU1NFQ0lBRWdBeUFDR3lFRElBQWdCQ0FDR3lFRUlBQW9BaEFpQVFSL0lBRUZJQUFvQWhRTElnQU5BQXNMSUFSRkRRQWdBMEdvSHlnQ0FDQUlhMDhOQUNBRUlBaHFJZ1lnQkUwTkFTQUVLQUlZSVFVZ0JDQUVLQUlNSWdGSEJFQWdCQ2dDQ0NJQVFiQWZLQUlBU1JvZ0FDQUJOZ0lNSUFFZ0FEWUNDQXdLQ3lBRVFSUnFJZ0lvQWdBaUFFVUVRQ0FFS0FJUUlnQkZEUVFnQkVFUWFpRUNDd05BSUFJaEJ5QUFJZ0ZCRkdvaUFpZ0NBQ0lBRFFBZ0FVRVFhaUVDSUFFb0FoQWlBQTBBQ3lBSFFRQTJBZ0FNQ1FzZ0NFR29IeWdDQUNJQ1RRUkFRYlFmS0FJQUlRTUNRQ0FDSUFocklnRkJFRThFUUVHb0h5QUJOZ0lBUWJRZklBTWdDR29pQURZQ0FDQUFJQUZCQVhJMkFnUWdBaUFEYWlBQk5nSUFJQU1nQ0VFRGNqWUNCQXdCQzBHMEgwRUFOZ0lBUWFnZlFRQTJBZ0FnQXlBQ1FRTnlOZ0lFSUFJZ0Eyb2lBQ0FBS0FJRVFRRnlOZ0lFQ3lBRFFRaHFJUUFNQ3dzZ0NFR3NIeWdDQUNJR1NRUkFRYXdmSUFZZ0NHc2lBVFlDQUVHNEgwRzRIeWdDQUNJQ0lBaHFJZ0EyQWdBZ0FDQUJRUUZ5TmdJRUlBSWdDRUVEY2pZQ0JDQUNRUWhxSVFBTUN3dEJBQ0VBSUFoQkwyb2lDUUovUWZnaUtBSUFCRUJCZ0NNb0FnQU1BUXRCaENOQ2Z6Y0NBRUg4SWtLQW9JQ0FnSUFFTndJQVFmZ2lJQXhCREdwQmNIRkIyS3JWcWdWek5nSUFRWXdqUVFBMkFnQkIzQ0pCQURZQ0FFR0FJQXNpQVdvaUJVRUFJQUZySWdkeElnSWdDRTBOQ2tIWUlpZ0NBQ0lFQkVCQjBDSW9BZ0FpQXlBQ2FpSUJJQU5OSUFFZ0JFdHlEUXNMUWR3aUxRQUFRUVJ4RFFVQ1FBSkFRYmdmS0FJQUlnTUVRRUhnSWlFQUEwQWdBeUFBS0FJQUlnRlBCRUFnQVNBQUtBSUVhaUFEU3cwREN5QUFLQUlJSWdBTkFBc0xRUUFRRENJQlFYOUdEUVlnQWlFRlFmd2lLQUlBSWdOQkFXc2lBQ0FCY1FSQUlBSWdBV3NnQUNBQmFrRUFJQU5yY1dvaEJRc2dCU0FJVFNBRlFmNy8vLzhIUzNJTkJrSFlJaWdDQUNJRUJFQkIwQ0lvQWdBaUF5QUZhaUlBSUFOTklBQWdCRXR5RFFjTElBVVFEQ0lBSUFGSERRRU1DQXNnQlNBR2F5QUhjU0lGUWY3Ly8vOEhTdzBGSUFVUURDSUJJQUFvQWdBZ0FDZ0NCR3BHRFFRZ0FTRUFDeUFBUVg5R0lBaEJNR29nQlUxeVJRUkFRWUFqS0FJQUlnRWdDU0FGYTJwQkFDQUJhM0VpQVVIKy8vLy9CMHNFUUNBQUlRRU1DQXNnQVJBTVFYOUhCRUFnQVNBRmFpRUZJQUFoQVF3SUMwRUFJQVZyRUF3YURBVUxJQUFpQVVGL1J3MEdEQVFMQUF0QkFDRUVEQWNMUVFBaEFRd0ZDeUFCUVg5SERRSUxRZHdpUWR3aUtBSUFRUVJ5TmdJQUN5QUNRZjcvLy84SFN3MEJJQUlRRENJQlFYOUdRUUFRRENJQVFYOUdjaUFBSUFGTmNnMEJJQUFnQVdzaUJTQUlRU2hxVFEwQkMwSFFJa0hRSWlnQ0FDQUZhaUlBTmdJQVFkUWlLQUlBSUFCSkJFQkIxQ0lnQURZQ0FBc0NRQUpBQWtCQnVCOG9BZ0FpQndSQVFlQWlJUUFEUUNBQklBQW9BZ0FpQXlBQUtBSUVJZ0pxUmcwQ0lBQW9BZ2dpQUEwQUN3d0NDMEd3SHlnQ0FDSUFRUUFnQUNBQlRSdEZCRUJCc0I4Z0FUWUNBQXRCQUNFQVFlUWlJQVUyQWdCQjRDSWdBVFlDQUVIQUgwRi9OZ0lBUWNRZlFmZ2lLQUlBTmdJQVFld2lRUUEyQWdBRFFDQUFRUU4wSWdOQjBCOXFJQU5CeUI5cUlnSTJBZ0FnQTBIVUgyb2dBallDQUNBQVFRRnFJZ0JCSUVjTkFBdEJyQjhnQlVFb2F5SURRWGdnQVd0QkIzRkJBQ0FCUVFocVFRZHhHeUlBYXlJQ05nSUFRYmdmSUFBZ0FXb2lBRFlDQUNBQUlBSkJBWEkyQWdRZ0FTQURha0VvTmdJRVFid2ZRWWdqS0FJQU5nSUFEQUlMSUFBdEFBeEJDSEVnQXlBSFMzSWdBU0FIVFhJTkFDQUFJQUlnQldvMkFnUkJ1QjhnQjBGNElBZHJRUWR4UVFBZ0IwRUlha0VIY1JzaUFHb2lBallDQUVHc0gwR3NIeWdDQUNBRmFpSUJJQUJySWdBMkFnQWdBaUFBUVFGeU5nSUVJQUVnQjJwQktEWUNCRUc4SDBHSUl5Z0NBRFlDQUF3QkMwR3dIeWdDQUNBQlN3UkFRYkFmSUFFMkFnQUxJQUVnQldvaEFrSGdJaUVBQWtBQ1FBSkFBa0FDUUFKQUEwQWdBaUFBS0FJQVJ3UkFJQUFvQWdnaUFBMEJEQUlMQ3lBQUxRQU1RUWh4UlEwQkMwSGdJaUVBQTBBZ0J5QUFLQUlBSWdKUEJFQWdBaUFBS0FJRWFpSUVJQWRMRFFNTElBQW9BZ2doQUF3QUN3QUxJQUFnQVRZQ0FDQUFJQUFvQWdRZ0JXbzJBZ1FnQVVGNElBRnJRUWR4UVFBZ0FVRUlha0VIY1J0cUlna2dDRUVEY2pZQ0JDQUNRWGdnQW10QkIzRkJBQ0FDUVFocVFRZHhHMm9pQlNBSUlBbHFJZ1pySVFJZ0JTQUhSZ1JBUWJnZklBWTJBZ0JCckI5QnJCOG9BZ0FnQW1vaUFEWUNBQ0FHSUFCQkFYSTJBZ1FNQXdzZ0JVRzBIeWdDQUVZRVFFRzBIeUFHTmdJQVFhZ2ZRYWdmS0FJQUlBSnFJZ0EyQWdBZ0JpQUFRUUZ5TmdJRUlBQWdCbW9nQURZQ0FBd0RDeUFGS0FJRUlnQkJBM0ZCQVVZRVFDQUFRWGh4SVFjQ1FDQUFRZjhCVFFSQUlBVW9BZ2dpQXlBQVFRTjJJZ0JCQTNSQnlCOXFSaG9nQXlBRktBSU1JZ0ZHQkVCQm9COUJvQjhvQWdCQmZpQUFkM0UyQWdBTUFnc2dBeUFCTmdJTUlBRWdBellDQ0F3QkN5QUZLQUlZSVFnQ1FDQUZJQVVvQWd3aUFVY0VRQ0FGS0FJSUlnQWdBVFlDRENBQklBQTJBZ2dNQVFzQ1FDQUZRUlJxSWdBb0FnQWlBdzBBSUFWQkVHb2lBQ2dDQUNJRERRQkJBQ0VCREFFTEEwQWdBQ0VFSUFNaUFVRVVhaUlBS0FJQUlnTU5BQ0FCUVJCcUlRQWdBU2dDRUNJRERRQUxJQVJCQURZQ0FBc2dDRVVOQUFKQUlBVWdCU2dDSENJRFFRSjBRZEFoYWlJQUtBSUFSZ1JBSUFBZ0FUWUNBQ0FCRFFGQnBCOUJwQjhvQWdCQmZpQURkM0UyQWdBTUFnc2dDRUVRUVJRZ0NDZ0NFQ0FGUmh0cUlBRTJBZ0FnQVVVTkFRc2dBU0FJTmdJWUlBVW9BaEFpQUFSQUlBRWdBRFlDRUNBQUlBRTJBaGdMSUFVb0FoUWlBRVVOQUNBQklBQTJBaFFnQUNBQk5nSVlDeUFGSUFkcUlRVWdBaUFIYWlFQ0N5QUZJQVVvQWdSQmZuRTJBZ1FnQmlBQ1FRRnlOZ0lFSUFJZ0Jtb2dBallDQUNBQ1FmOEJUUVJBSUFKQkEzWWlBRUVEZEVISUgyb2hBZ0ovUWFBZktBSUFJZ0ZCQVNBQWRDSUFjVVVFUUVHZ0h5QUFJQUZ5TmdJQUlBSU1BUXNnQWlnQ0NBc2hBQ0FDSUFZMkFnZ2dBQ0FHTmdJTUlBWWdBallDRENBR0lBQTJBZ2dNQXd0Qkh5RUFJQUpCLy8vL0IwMEVRQ0FDUVFoMklnQWdBRUdBL2o5cVFSQjJRUWh4SWdOMElnQWdBRUdBNEI5cVFSQjJRUVJ4SWdGMElnQWdBRUdBZ0E5cVFSQjJRUUp4SWdCMFFROTJJQUVnQTNJZ0FISnJJZ0JCQVhRZ0FpQUFRUlZxZGtFQmNYSkJIR29oQUFzZ0JpQUFOZ0ljSUFaQ0FEY0NFQ0FBUVFKMFFkQWhhaUVFQWtCQnBCOG9BZ0FpQTBFQklBQjBJZ0Z4UlFSQVFhUWZJQUVnQTNJMkFnQWdCQ0FHTmdJQUlBWWdCRFlDR0F3QkN5QUNRUUJCR1NBQVFRRjJheUFBUVI5R0czUWhBQ0FFS0FJQUlRRURRQ0FCSWdNb0FnUkJlSEVnQWtZTkF5QUFRUjEySVFFZ0FFRUJkQ0VBSUFNZ0FVRUVjV29pQkNnQ0VDSUJEUUFMSUFRZ0JqWUNFQ0FHSUFNMkFoZ0xJQVlnQmpZQ0RDQUdJQVkyQWdnTUFndEJyQjhnQlVFb2F5SURRWGdnQVd0QkIzRkJBQ0FCUVFocVFRZHhHeUlBYXlJQ05nSUFRYmdmSUFBZ0FXb2lBRFlDQUNBQUlBSkJBWEkyQWdRZ0FTQURha0VvTmdJRVFid2ZRWWdqS0FJQU5nSUFJQWNnQkVFbklBUnJRUWR4UVFBZ0JFRW5hMEVIY1J0cVFTOXJJZ0FnQUNBSFFSQnFTUnNpQWtFYk5nSUVJQUpCNkNJcEFnQTNBaEFnQWtIZ0lpa0NBRGNDQ0VIb0lpQUNRUWhxTmdJQVFlUWlJQVUyQWdCQjRDSWdBVFlDQUVIc0lrRUFOZ0lBSUFKQkdHb2hBQU5BSUFCQkJ6WUNCQ0FBUVFocUlRRWdBRUVFYWlFQUlBRWdCRWtOQUFzZ0FpQUhSZzBESUFJZ0FpZ0NCRUYrY1RZQ0JDQUhJQUlnQjJzaUJFRUJjallDQkNBQ0lBUTJBZ0FnQkVIL0FVMEVRQ0FFUVFOMklnQkJBM1JCeUI5cUlRSUNmMEdnSHlnQ0FDSUJRUUVnQUhRaUFIRkZCRUJCb0I4Z0FDQUJjallDQUNBQ0RBRUxJQUlvQWdnTElRQWdBaUFITmdJSUlBQWdCellDRENBSElBSTJBZ3dnQnlBQU5nSUlEQVFMUVI4aEFDQUhRZ0EzQWhBZ0JFSC8vLzhIVFFSQUlBUkJDSFlpQUNBQVFZRCtQMnBCRUhaQkNIRWlBblFpQUNBQVFZRGdIMnBCRUhaQkJIRWlBWFFpQUNBQVFZQ0FEMnBCRUhaQkFuRWlBSFJCRDNZZ0FTQUNjaUFBY21zaUFFRUJkQ0FFSUFCQkZXcDJRUUZ4Y2tFY2FpRUFDeUFISUFBMkFod2dBRUVDZEVIUUlXb2hBd0pBUWFRZktBSUFJZ0pCQVNBQWRDSUJjVVVFUUVHa0h5QUJJQUp5TmdJQUlBTWdCellDQUNBSElBTTJBaGdNQVFzZ0JFRUFRUmtnQUVFQmRtc2dBRUVmUmh0MElRQWdBeWdDQUNFQkEwQWdBU0lDS0FJRVFYaHhJQVJHRFFRZ0FFRWRkaUVCSUFCQkFYUWhBQ0FDSUFGQkJIRnFJZ01vQWhBaUFRMEFDeUFESUFjMkFoQWdCeUFDTmdJWUN5QUhJQWMyQWd3Z0J5QUhOZ0lJREFNTElBTW9BZ2dpQUNBR05nSU1JQU1nQmpZQ0NDQUdRUUEyQWhnZ0JpQUROZ0lNSUFZZ0FEWUNDQXNnQ1VFSWFpRUFEQVVMSUFJb0FnZ2lBQ0FITmdJTUlBSWdCellDQ0NBSFFRQTJBaGdnQnlBQ05nSU1JQWNnQURZQ0NBdEJyQjhvQWdBaUFDQUlUUTBBUWF3ZklBQWdDR3NpQVRZQ0FFRzRIMEc0SHlnQ0FDSUNJQWhxSWdBMkFnQWdBQ0FCUVFGeU5nSUVJQUlnQ0VFRGNqWUNCQ0FDUVFocUlRQU1Bd3RCM0I1Qk1EWUNBRUVBSVFBTUFnc0NRQ0FGUlEwQUFrQWdCQ2dDSENJQ1FRSjBRZEFoYWlJQUtBSUFJQVJHQkVBZ0FDQUJOZ0lBSUFFTkFVR2tIeUFKUVg0Z0FuZHhJZ2syQWdBTUFnc2dCVUVRUVJRZ0JTZ0NFQ0FFUmh0cUlBRTJBZ0FnQVVVTkFRc2dBU0FGTmdJWUlBUW9BaEFpQUFSQUlBRWdBRFlDRUNBQUlBRTJBaGdMSUFRb0FoUWlBRVVOQUNBQklBQTJBaFFnQUNBQk5nSVlDd0pBSUFOQkQwMEVRQ0FFSUFNZ0NHb2lBRUVEY2pZQ0JDQUFJQVJxSWdBZ0FDZ0NCRUVCY2pZQ0JBd0JDeUFFSUFoQkEzSTJBZ1FnQmlBRFFRRnlOZ0lFSUFNZ0Jtb2dBellDQUNBRFFmOEJUUVJBSUFOQkEzWWlBRUVEZEVISUgyb2hBZ0ovUWFBZktBSUFJZ0ZCQVNBQWRDSUFjVVVFUUVHZ0h5QUFJQUZ5TmdJQUlBSU1BUXNnQWlnQ0NBc2hBQ0FDSUFZMkFnZ2dBQ0FHTmdJTUlBWWdBallDRENBR0lBQTJBZ2dNQVF0Qkh5RUFJQU5CLy8vL0IwMEVRQ0FEUVFoMklnQWdBRUdBL2o5cVFSQjJRUWh4SWdKMElnQWdBRUdBNEI5cVFSQjJRUVJ4SWdGMElnQWdBRUdBZ0E5cVFSQjJRUUp4SWdCMFFROTJJQUVnQW5JZ0FISnJJZ0JCQVhRZ0F5QUFRUlZxZGtFQmNYSkJIR29oQUFzZ0JpQUFOZ0ljSUFaQ0FEY0NFQ0FBUVFKMFFkQWhhaUVDQWtBQ1FDQUpRUUVnQUhRaUFYRkZCRUJCcEI4Z0FTQUpjallDQUNBQ0lBWTJBZ0FnQmlBQ05nSVlEQUVMSUFOQkFFRVpJQUJCQVhacklBQkJIMFliZENFQUlBSW9BZ0FoQ0FOQUlBZ2lBU2dDQkVGNGNTQURSZzBDSUFCQkhYWWhBaUFBUVFGMElRQWdBU0FDUVFSeGFpSUNLQUlRSWdnTkFBc2dBaUFHTmdJUUlBWWdBVFlDR0FzZ0JpQUdOZ0lNSUFZZ0JqWUNDQXdCQ3lBQktBSUlJZ0FnQmpZQ0RDQUJJQVkyQWdnZ0JrRUFOZ0lZSUFZZ0FUWUNEQ0FHSUFBMkFnZ0xJQVJCQ0dvaEFBd0JDd0pBSUF0RkRRQUNRQ0FCS0FJY0lnSkJBblJCMENGcUlnQW9BZ0FnQVVZRVFDQUFJQVEyQWdBZ0JBMEJRYVFmSUFaQmZpQUNkM0UyQWdBTUFnc2dDMEVRUVJRZ0N5Z0NFQ0FCUmh0cUlBUTJBZ0FnQkVVTkFRc2dCQ0FMTmdJWUlBRW9BaEFpQUFSQUlBUWdBRFlDRUNBQUlBUTJBaGdMSUFFb0FoUWlBRVVOQUNBRUlBQTJBaFFnQUNBRU5nSVlDd0pBSUFOQkQwMEVRQ0FCSUFNZ0NHb2lBRUVEY2pZQ0JDQUFJQUZxSWdBZ0FDZ0NCRUVCY2pZQ0JBd0JDeUFCSUFoQkEzSTJBZ1FnQ1NBRFFRRnlOZ0lFSUFNZ0NXb2dBellDQUNBS0JFQWdDa0VEZGlJQVFRTjBRY2dmYWlFRVFiUWZLQUlBSVFJQ2YwRUJJQUIwSWdBZ0JYRkZCRUJCb0I4Z0FDQUZjallDQUNBRURBRUxJQVFvQWdnTElRQWdCQ0FDTmdJSUlBQWdBallDRENBQ0lBUTJBZ3dnQWlBQU5nSUlDMEcwSHlBSk5nSUFRYWdmSUFNMkFnQUxJQUZCQ0dvaEFBc2dERUVRYWlRQUlBQUxmd0VEZnlBQUlRRUNRQ0FBUVFOeEJFQURRQ0FCTFFBQVJRMENJQUZCQVdvaUFVRURjUTBBQ3dzRFFDQUJJZ0pCQkdvaEFTQUNLQUlBSWdOQmYzTWdBMEdCZ29RSWEzRkJnSUdDaEhoeFJRMEFDeUFEUWY4QmNVVUVRQ0FDSUFCckR3c0RRQ0FDTFFBQklRTWdBa0VCYWlJQklRSWdBdzBBQ3dzZ0FTQUFhd3Z5QWdJQ2Z3RitBa0FnQWtVTkFDQUFJQUpxSWdOQkFXc2dBVG9BQUNBQUlBRTZBQUFnQWtFRFNRMEFJQU5CQW1zZ0FUb0FBQ0FBSUFFNkFBRWdBMEVEYXlBQk9nQUFJQUFnQVRvQUFpQUNRUWRKRFFBZ0EwRUVheUFCT2dBQUlBQWdBVG9BQXlBQ1FRbEpEUUFnQUVFQUlBQnJRUU54SWdScUlnTWdBVUgvQVhGQmdZS0VDR3dpQVRZQ0FDQURJQUlnQkd0QmZIRWlCR29pQWtFRWF5QUJOZ0lBSUFSQkNVa05BQ0FESUFFMkFnZ2dBeUFCTmdJRUlBSkJDR3NnQVRZQ0FDQUNRUXhySUFFMkFnQWdCRUVaU1EwQUlBTWdBVFlDR0NBRElBRTJBaFFnQXlBQk5nSVFJQU1nQVRZQ0RDQUNRUkJySUFFMkFnQWdBa0VVYXlBQk5nSUFJQUpCR0dzZ0FUWUNBQ0FDUVJ4cklBRTJBZ0FnQkNBRFFRUnhRUmh5SWdScklnSkJJRWtOQUNBQnJVS0JnSUNBRUg0aEJTQURJQVJxSVFFRFFDQUJJQVUzQXhnZ0FTQUZOd01RSUFFZ0JUY0RDQ0FCSUFVM0F3QWdBVUVnYWlFQklBSkJJR3NpQWtFZlN3MEFDd3NnQUF0UEFRSi9RZGdlS0FJQUlnRWdBRUVEYWtGOGNTSUNhaUVBQWtBZ0FrRUFJQUFnQVUwYkRRQWdBRDhBUVJCMFN3UkFJQUFRQVVVTkFRdEIyQjRnQURZQ0FDQUJEd3RCM0I1Qk1EWUNBRUYvQzIwQkFYOGpBRUdBQW1zaUJTUUFJQVJCZ01BRWNTQUNJQU5NY2tVRVFDQUZJQUZCL3dGeElBSWdBMnNpQWtHQUFpQUNRWUFDU1NJQkd4QUxHaUFCUlFSQUEwQWdBQ0FGUVlBQ0VBNGdBa0dBQW1zaUFrSC9BVXNOQUFzTElBQWdCU0FDRUE0TElBVkJnQUpxSkFBTG5RSUJBMzhnQUMwQUFFRWdjVVVFUUFKQUlBRWhCQUpBSUFJZ0FDSUJLQUlRSWdBRWZ5QUFCUUovSUFFaUFDQUJMUUJLSWdOQkFXc2dBM0k2QUVvZ0FTZ0NBQ0lEUVFoeEJFQWdBQ0FEUVNCeU5nSUFRWDhNQVFzZ0FFSUFOd0lFSUFBZ0FDZ0NMQ0lETmdJY0lBQWdBellDRkNBQUlBTWdBQ2dDTUdvMkFoQkJBQXNOQVNBQktBSVFDeUFCS0FJVUlnVnJTd1JBSUFFZ0JDQUNJQUVvQWlRUkFBQWFEQUlMQW44Z0FTd0FTMEYvU2dSQUlBSWhBQU5BSUFJZ0FDSURSUTBDR2lBRUlBTkJBV3NpQUdvdEFBQkJDa2NOQUFzZ0FTQUVJQU1nQVNnQ0pCRUFBQ0FEU1EwQ0lBTWdCR29oQkNBQktBSVVJUVVnQWlBRGF3d0JDeUFDQ3lFQUlBVWdCQ0FBRUFVYUlBRWdBU2dDRkNBQWFqWUNGQXNMQ3dzS0FDQUFRVEJyUVFwSkMyTUJBbjhnQWtVRVFFRUFEd3NDZnlBQUxRQUFJZ01FUUFOQUFrQUNRQ0FCTFFBQUlnUkZEUUFnQWtFQmF5SUNSUTBBSUFNZ0JFWU5BUXNnQXd3REN5QUJRUUZxSVFFZ0FDMEFBU0VESUFCQkFXb2hBQ0FERFFBTEMwRUFDeUFCTFFBQWF3dWNEUUlRZmhCL0l3QkJnQkJySWhRa0FDQVVRWUFJYWlBQkVCY2dGRUdBQ0dvZ0FCQVdJQlFnRkVHQUNHb1FGeUFEQkVBZ0ZDQUNFQllMUVFBaEFFRUFJUUVEUUNBVVFZQUlhaUFCUVFkMElnTkJ3QUJ5YWlJVktRTUFJQlJCZ0FocUlBTkI0QUJ5YWlJV0tRTUFJQlJCZ0FocUlBTnFJaGNwQXdBZ0ZFR0FDR29nQTBFZ2Ntb2lHQ2tEQUNJSUVBTWlCSVZCSUJBQ0lnVVFBeUlHSUFpRlFSZ1FBaUVJSUFnZ0JpQUZJQVFnQ0JBRElnZUZRUkFRQWlJS0VBTWlFWVZCUHhBQ0lRZ2dGRUdBQ0dvZ0EwSElBSEpxSWhrcEF3QWdGRUdBQ0dvZ0EwSG9BSEpxSWhvcEF3QWdGRUdBQ0dvZ0EwRUljbW9pR3lrREFDQVVRWUFJYWlBRFFTaHlhaUljS1FNQUlnUVFBeUlGaFVFZ0VBSWlCaEFESWdzZ0JJVkJHQkFDSVFRZ0JDQUxJQVlnQlNBRUVBTWlDNFZCRUJBQ0loSVFBeUlUaFVFL0VBSWhCQ0FVUVlBSWFpQURRZEFBY21vaUhTa0RBQ0FVUVlBSWFpQURRZkFBY21vaUhpa0RBQ0FVUVlBSWFpQURRUkJ5YWlJZktRTUFJQlJCZ0FocUlBTkJNSEpxSWlBcEF3QWlCUkFESWdhRlFTQVFBaUlNRUFNaURTQUZoVUVZRUFJaEJTQUZJQTBnRENBR0lBVVFBeUlOaFVFUUVBSWlEQkFESWc2RlFUOFFBaUVGSUJSQmdBaHFJQU5CMkFCeWFpSWhLUU1BSUJSQmdBaHFJQU5CK0FCeWFpSWlLUU1BSUJSQmdBaHFJQU5CR0hKcUlpTXBBd0FnRkVHQUNHb2dBMEU0Y21vaUF5a0RBQ0lHRUFNaUQ0VkJJQkFDSWdrUUF5SVFJQWFGUVJnUUFpRUdJQVlnRUNBSklBOGdCaEFESWcrRlFSQVFBaUlKRUFNaUVJVkJQeEFDSVFZZ0Z5QUhJQVFRQXlJSElBUWdEaUFISUFtRlFTQVFBaUlIRUFNaURvVkJHQkFDSWdRUUF5SUpOd01BSUNJZ0J5QUpoVUVRRUFJaUJ6Y0RBQ0FkSUE0Z0J4QURJZ2MzQXdBZ0hDQUVJQWVGUVQ4UUFqY0RBQ0FiSUFzZ0JSQURJZ1FnQlNBUUlBUWdDb1ZCSUJBQ0lnUVFBeUlIaFVFWUVBSWlCUkFESWdvM0F3QWdGaUFFSUFxRlFSQVFBaUlFTndNQUlDRWdCeUFFRUFNaUJEY0RBQ0FnSUFRZ0JZVkJQeEFDTndNQUlCOGdEU0FHRUFNaUJDQUdJQkVnQkNBU2hVRWdFQUlpQkJBRElnV0ZRUmdRQWlJR0VBTWlCemNEQUNBYUlBUWdCNFZCRUJBQ0lnUTNBd0FnRlNBRklBUVFBeUlFTndNQUlBTWdCQ0FHaFVFL0VBSTNBd0FnSXlBUElBZ1FBeUlFSUFnZ0V5QUVJQXlGUVNBUUFpSUVFQU1pQllWQkdCQUNJZ2dRQXlJR053TUFJQjRnQkNBR2hVRVFFQUlpQkRjREFDQVpJQVVnQkJBRElnUTNBd0FnR0NBRUlBaUZRVDhRQWpjREFDQUJRUUZxSWdGQkNFY05BQXNEUUNBQVFRUjBJZ01nRkVHQUNHcHFJZ0VpRlVHQUJHb3BBd0FnQVNrRGdBWWdBU2tEQUNBQktRT0FBaUlJRUFNaUJJVkJJQkFDSWdVUUF5SUdJQWlGUVJnUUFpRUlJQWdnQmlBRklBUWdDQkFESWdlRlFSQVFBaUlLRUFNaUVZVkJQeEFDSVFnZ0FTa0RpQVFnQVNrRGlBWWdGRUdBQ0dvZ0EwRUljbW9pQXlrREFDQUJLUU9JQWlJRUVBTWlCWVZCSUJBQ0lnWVFBeUlMSUFTRlFSZ1FBaUVFSUFRZ0N5QUdJQVVnQkJBRElndUZRUkFRQWlJU0VBTWlFNFZCUHhBQ0lRUWdBU2tEZ0FVZ0FTa0RnQWNnQVNrRGdBRWdBU2tEZ0FNaUJSQURJZ2FGUVNBUUFpSU1FQU1pRFNBRmhVRVlFQUloQlNBRklBMGdEQ0FHSUFVUUF5SU5oVUVRRUFJaURCQURJZzZGUVQ4UUFpRUZJQUVwQTRnRklBRXBBNGdISUFFcEE0Z0JJQUVwQTRnRElnWVFBeUlQaFVFZ0VBSWlDUkFESWhBZ0JvVkJHQkFDSVFZZ0JpQVFJQWtnRHlBR0VBTWlENFZCRUJBQ0lna1FBeUlRaFVFL0VBSWhCaUFCSUFjZ0JCQURJZ2NnQkNBT0lBY2dDWVZCSUJBQ0lnY1FBeUlPaFVFWUVBSWlCQkFESWdrM0F3QWdBU0FISUFtRlFSQVFBaUlITndPSUJ5QUJJQTRnQnhBRElnYzNBNEFGSUFFZ0JDQUhoVUUvRUFJM0E0Z0NJQU1nQ3lBRkVBTWlCQ0FGSUJBZ0JDQUtoVUVnRUFJaUJCQURJZ2VGUVJnUUFpSUZFQU1pQ2pjREFDQUJJQVFnQ29WQkVCQUNJZ1EzQTRBR0lBRWdCeUFFRUFNaUJEY0RpQVVnQVNBRUlBV0ZRVDhRQWpjRGdBTWdBU0FOSUFZUUF5SUVJQVlnRVNBRUlCS0ZRU0FRQWlJRUVBTWlCWVZCR0JBQ0lnWVFBeUlITndPQUFTQUJJQVFnQjRWQkVCQUNJZ1EzQTRnR0lCVWdCU0FFRUFNaUJEY0RnQVFnQVNBRUlBYUZRVDhRQWpjRGlBTWdBU0FQSUFnUUF5SUVJQWdnRXlBRUlBeUZRU0FRQWlJRUVBTWlCWVZCR0JBQ0lnZ1FBeUlHTndPSUFTQUJJQVFnQm9WQkVCQUNJZ1EzQTRBSElBRWdCU0FFRUFNaUJEY0RpQVFnQVNBRUlBaUZRVDhRQWpjRGdBSWdBRUVCYWlJQVFRaEhEUUFMSUFJZ0ZCQVhJQUlnRkVHQUNHb1FGaUFVUVlBUWFpUUFDOE1CQVFOL0l3QkJRR29pQXlRQUlBTkJBRUhBQUJBTElRUkJmeUVEQWtBZ0FFVWdBVVZ5RFFBZ0FDZ0M1QUVnQWtzTkFDQUFLUU5RUWdCU0RRQWdBQ0FBTlFMZ0FSQWFJQUFRSlVFQUlRTWdBRUhnQUdvaUFpQUFLQUxnQVNJRmFrRUFRWUFCSUFWckVBc2FJQUFnQWhBWkEwQWdCQ0FEUVFOMElnVnFJQUFnQldvcEF3QVFNaUFEUVFGcUlnTkJDRWNOQUFzZ0FTQUVJQUFvQXVRQkVBVWFJQVJCd0FBUUJDQUNRWUFCRUFRZ0FFSEFBQkFFUVFBaEF3c2dCRUZBYXlRQUlBTUwxQU1CQm44akFFRVFheUlFSkFBZ0JDQUJOZ0lNSXdCQm9BRnJJZ01rQUNBRFFRaHFRWUFZUVpBQkVBVWFJQU1nQURZQ05DQURJQUEyQWh3Z0EwRitJQUJySWdKQi8vLy8vd2NnQWtILy8vLy9CMGtiSWdVMkFqZ2dBeUFBSUFWcUlnQTJBaVFnQXlBQU5nSVlJQU5CQ0dvaEFDTUFRZEFCYXlJQ0pBQWdBaUFCTmdMTUFTQUNRYUFCYWtFQVFTZ1FDeG9nQWlBQ0tBTE1BVFlDeUFFQ1FFRUFJQUpCeUFGcUlBSkIwQUJxSUFKQm9BRnFFQnRCQUVnTkFDQUFLQUpNUVFCT0lRWWdBQ2dDQUNFQklBQXNBRXBCQUV3RVFDQUFJQUZCWDNFMkFnQUxJQUZCSUhFaEJ3Si9JQUFvQWpBRVFDQUFJQUpCeUFGcUlBSkIwQUJxSUFKQm9BRnFFQnNNQVFzZ0FFSFFBRFlDTUNBQUlBSkIwQUJxTmdJUUlBQWdBallDSENBQUlBSTJBaFFnQUNnQ0xDRUJJQUFnQWpZQ0xDQUFJQUpCeUFGcUlBSkIwQUJxSUFKQm9BRnFFQnNnQVVVTkFCb2dBRUVBUVFBZ0FDZ0NKQkVBQUJvZ0FFRUFOZ0l3SUFBZ0FUWUNMQ0FBUVFBMkFod2dBRUVBTmdJUUlBQW9BaFFhSUFCQkFEWUNGRUVBQ3hvZ0FDQUFLQUlBSUFkeU5nSUFJQVpGRFFBTElBSkIwQUZxSkFBZ0JRUkFJQU1vQWh3aUFDQUFJQU1vQWhoR2EwRUFPZ0FBQ3lBRFFhQUJhaVFBSUFSQkVHb2tBQXMwQVFGL1FRRWhBUUpBSUFCQkNra05BRUVDSVFFRFFDQUFRZVFBU1EwQklBRkJBV29oQVNBQVFRcHVJUUFNQUFzQUN5QUJDNFVCQVFkL0FrQWdBQzBBQUNJR1FUQnJRZjhCY1VFSlN3MEFJQVloQWdOQUlBUWhCeUFEUVptejVzd0JTdzBCSUFKQi93RnhRVEJySWdJZ0EwRUtiQ0lFUVg5elN3MEJJQUlnQkdvaEF5QUFJQWRCQVdvaUJHb2lDQzBBQUNJQ1FUQnJRZjhCY1VFS1NRMEFDeUFHUVRCR1FRQWdCeHNOQUNBQklBTTJBZ0FnQ0NFRkN5QUZDekVCQTM4RFFDQUFJQUpCQTNRaUEyb2lCQ0FFS1FNQUlBRWdBMm9wQXdDRk53TUFJQUpCQVdvaUFrR0FBVWNOQUFzTERBQWdBQ0FCUVlBSUVBVWFDMTRCQW44akFFRkFhaUlDSkFCQmZ5RURBa0FnQUVVTkFDQUJRUUZyUWNBQVR3UkFJQUFRTnd3QkN5QUNRUUU2QUFNZ0FrR0FBanNBQVNBQ0lBRTZBQUFnQWtFRWNrRUFRVHdRQ3hvZ0FDQUNFRHdoQXdzZ0FrRkFheVFBSUFNTHBBb0NBMzhSZmlNQVFZQUNheUlESkFBRFFDQUNRUU4wSWdRZ0EwR0FBV3BxSUFFZ0JHb3BBQUEzQXdBZ0FrRUJhaUlDUVJCSERRQUxJQU1nQUVIQUFCQUZJUUVnQUNrRFdFTDV3dmlia2FPejhOc0FoU0VMSUFBcEExQkM2L3FHMnIrMTlzRWZoU0VNSUFBcEEwaENuOWo1MmNLUjJvS2JmNFVoRFNBQUtRTkFRdEdGbXUvNno1U0gwUUNGSVE1QzhlMzArS1duL2FlbGZ5RVBRcXZ3MC9TdjdyeTNQQ0VTUXJ2T3FxYlkwT3V6dTM4aEVFS0lrdk9kLzh6NWhPb0FJUVZCQUNFRElBRXBBemdoQmlBQktRTVlJUlFnQVNrRE1DRUhJQUVwQXhBaEZTQUJLUU1vSVFnZ0FTa0RDQ0VSSUFFcEF5QWhDU0FCS1FNQUlRb0RRQ0FKSUFVZ0RpQUJRWUFCYWlBRFFRWjBJZ0pCd0FocUtBSUFRUU4wYWlrREFDQUpJQXA4ZkNJS2hVRWdFQUlpRG53aUU0VkJHQkFDSVFVZ0JTQVRJQTRnQVVHQUFXb2dBa0hFQ0dvb0FnQkJBM1JxS1FNQUlBVWdDbng4SWdxRlFSQVFBaUlPZkNJVGhVRS9FQUloQ1NBSUlCQWdEU0FCUVlBQmFpQUNRY2dJYWlnQ0FFRURkR29wQXdBZ0NDQVJmSHdpRVlWQklCQUNJZzE4SWhDRlFSZ1FBaUVGSUFVZ0VDQU5JQUZCZ0FGcUlBSkJ6QWhxS0FJQVFRTjBhaWtEQUNBRklCRjhmQ0lSaFVFUUVBSWlEWHdpRUlWQlB4QUNJUVVnRWlBTUlBRkJnQUZxSUFKQjBBaHFLQUlBUVFOMGFpa0RBQ0FISUJWOGZDSUloVUVnRUFJaURId2lFaUFIaFVFWUVBSWhCeUFISUJJZ0RDQUJRWUFCYWlBQ1FkUUlhaWdDQUVFRGRHb3BBd0FnQnlBSWZId2lGWVZCRUJBQ0lneDhJZ2lGUVQ4UUFpRUhJQThnQ3lBQlFZQUJhaUFDUWRnSWFpZ0NBRUVEZEdvcEF3QWdCaUFVZkh3aUVvVkJJQkFDSWd0OElnOGdCb1ZCR0JBQ0lRWWdCaUFMSUFGQmdBRnFJQUpCM0FocUtBSUFRUU4wYWlrREFDQUdJQko4ZkNJVWhVRVFFQUlpQ3lBUGZDSVBoVUUvRUFJaEJpQUZJQWdnQ3lBQlFZQUJhaUFDUWVBSWFpZ0NBRUVEZEdvcEF3QWdCU0FLZkh3aUNvVkJJQkFDSWd0OElnaUZRUmdRQWlFRklBVWdDQ0FMSUFGQmdBRnFJQUpCNUFocUtBSUFRUU4wYWlrREFDQUZJQXA4ZkNJS2hVRVFFQUlpQzN3aUVvVkJQeEFDSVFnZ0J5QVBJQTRnQVVHQUFXb2dBa0hvQ0dvb0FnQkJBM1JxS1FNQUlBY2dFWHg4SWcrRlFTQVFBaUlPZkNJUmhVRVlFQUloQlNBRklCRWdEaUFCUVlBQmFpQUNRZXdJYWlnQ0FFRURkR29wQXdBZ0JTQVBmSHdpRVlWQkVCQUNJZzU4SWcrRlFUOFFBaUVISUFZZ0RTQUJRWUFCYWlBQ1FmQUlhaWdDQUVFRGRHb3BBd0FnQmlBVmZId2lCWVZCSUJBQ0lnMGdFM3dpRTRWQkdCQUNJUVlnQmlBVElBMGdBVUdBQVdvZ0FrSDBDR29vQWdCQkEzUnFLUU1BSUFVZ0JueDhJaFdGUVJBUUFpSU5mQ0lGaFVFL0VBSWhCaUFKSUJBZ0RDQUJRWUFCYWlBQ1FmZ0lhaWdDQUVFRGRHb3BBd0FnQ1NBVWZId2lFSVZCSUJBQ0lneDhJaE9GUVJnUUFpRUpJQWtnRXlBTUlBRkJnQUZxSUFKQi9BaHFLQUlBUVFOMGFpa0RBQ0FKSUJCOGZDSVVoVUVRRUFJaURId2lFSVZCUHhBQ0lRa2dBMEVCYWlJRFFReEhEUUFMSUFFZ0RqY0RZQ0FCSUFrM0F5QWdBU0FOTndOb0lBRWdDRGNES0NBQklCRTNBd2dnQVNBUU53TklJQUVnRERjRGNDQUJJQWMzQXpBZ0FTQVZOd01RSUFFZ0VqY0RVQ0FCSUFzM0EzZ2dBU0FHTndNNElBRWdGRGNER0NBQklBODNBMWdnQVNBRk53TkFJQUVnQ2pjREFDQUFJQW9nQUNrREFJVWdCWVUzQXdCQkFTRUNBMEFnQUNBQ1FRTjBJZ05xSWdRZ0FTQURhaUlES1FNQUlBUXBBd0NGSUFOQlFHc3BBd0NGTndNQUlBSkJBV29pQWtFSVJ3MEFDeUFCUVlBQ2FpUUFDeVlCQVg0Z0FDQUJJQUFwQTBBaUFYd2lBamNEUUNBQUlBQXBBMGdnQVNBQ1ZxMThOd05JQzZBVUFoQi9BbjRqQUVIUUFHc2lCaVFBSUFaQnlnNDJBa3dnQmtFM2FpRVRJQVpCT0dvaEVBTkFBa0FnRGtFQVNBMEFRZi8vLy84SElBNXJJQVJJQkVCQjNCNUJQVFlDQUVGL0lRNE1BUXNnQkNBT2FpRU9DeUFHS0FKTUlnY2hCQUpBQWtBQ1FBSkFBa0FDUUFKQUFrQWdCZ0ovQWtBZ0J5MEFBQ0lGQkVBRFFBSkFBa0FnQlVIL0FYRWlCVVVFUUNBRUlRVU1BUXNnQlVFbFJ3MEJJQVFoQlFOQUlBUXRBQUZCSlVjTkFTQUdJQVJCQW1vaUNEWUNUQ0FGUVFGcUlRVWdCQzBBQWlFTElBZ2hCQ0FMUVNWR0RRQUxDeUFGSUFkcklRUWdBQVJBSUFBZ0J5QUVFQTRMSUFRTkRTQUdLQUpNTEFBQkVBOGhCU0FHS0FKTUlRUWdCVVVOQXlBRUxRQUNRU1JIRFFNZ0JDd0FBVUV3YXlFUFFRRWhFU0FFUVFOcURBUUxJQVlnQkVFQmFpSUlOZ0pNSUFRdEFBRWhCU0FJSVFRTUFBc0FDeUFPSVF3Z0FBMElJQkZGRFFKQkFTRUVBMEFnQXlBRVFRSjBhaWdDQUNJQUJFQWdBaUFFUVFOMGFpQUFJQUVRSkVFQklRd2dCRUVCYWlJRVFRcEhEUUVNQ2dzTFFRRWhEQ0FFUVFwUERRZ0RRQ0FESUFSQkFuUnFLQUlBRFFnZ0JFRUJhaUlFUVFwSERRQUxEQWdMUVg4aER5QUVRUUZxQ3lJRU5nSk1RUUFoQ0FKQUlBUXNBQUFpRFVFZ2F5SUZRUjlMRFFCQkFTQUZkQ0lGUVluUkJIRkZEUUFEUUFKQUlBWWdCRUVCYWlJSU5nSk1JQVFzQUFFaURVRWdheUlFUVNCUERRQkJBU0FFZENJRVFZblJCSEZGRFFBZ0JDQUZjaUVGSUFnaEJBd0JDd3NnQ0NFRUlBVWhDQXNDUUNBTlFTcEdCRUFnQmdKL0FrQWdCQ3dBQVJBUFJRMEFJQVlvQWt3aUJDMEFBa0VrUncwQUlBUXNBQUZCQW5RZ0EycEJ3QUZyUVFvMkFnQWdCQ3dBQVVFRGRDQUNha0dBQTJzb0FnQWhDa0VCSVJFZ0JFRURhZ3dCQ3lBUkRRaEJBQ0VSUVFBaENpQUFCRUFnQVNBQktBSUFJZ1JCQkdvMkFnQWdCQ2dDQUNFS0N5QUdLQUpNUVFGcUN5SUVOZ0pNSUFwQmYwb05BVUVBSUFwcklRb2dDRUdBd0FCeUlRZ01BUXNnQmtITUFHb1FJeUlLUVFCSURRWWdCaWdDVENFRUMwRi9JUWtDUUNBRUxRQUFRUzVIRFFBZ0JDMEFBVUVxUmdSQUFrQWdCQ3dBQWhBUFJRMEFJQVlvQWt3aUJDMEFBMEVrUncwQUlBUXNBQUpCQW5RZ0EycEJ3QUZyUVFvMkFnQWdCQ3dBQWtFRGRDQUNha0dBQTJzb0FnQWhDU0FHSUFSQkJHb2lCRFlDVEF3Q0N5QVJEUWNnQUFSL0lBRWdBU2dDQUNJRVFRUnFOZ0lBSUFRb0FnQUZRUUFMSVFrZ0JpQUdLQUpNUVFKcUlnUTJBa3dNQVFzZ0JpQUVRUUZxTmdKTUlBWkJ6QUJxRUNNaENTQUdLQUpNSVFRTFFRQWhCUU5BSUFVaEVrRi9JUXdnQkN3QUFFSEJBR3RCT1VzTkJ5QUdJQVJCQVdvaURUWUNUQ0FFTEFBQUlRVWdEU0VFSUFVZ0VrRTZiR3BCenhocUxRQUFJZ1ZCQVd0QkNFa05BQXNnQlVFVFJnMENJQVZGRFFZZ0QwRUFUZ1JBSUFNZ0QwRUNkR29nQlRZQ0FDQUdJQUlnRDBFRGRHb3BBd0EzQTBBTUJBc2dBQTBCQzBFQUlRd01CUXNnQmtGQWF5QUZJQUVRSkNBR0tBSk1JUTBNQWdzZ0QwRi9TZzBEQzBFQUlRUWdBRVVOQkFzZ0NFSC8vM3R4SWdzZ0NDQUlRWURBQUhFYklRVkJBQ0VNUWNBT0lROGdFQ0VJQWtBQ1FBSkFBbjhDUUFKQUFrQUNRQUovQWtBQ1FBSkFBa0FDUUFKQUFrQWdEVUVCYXl3QUFDSUVRVjl4SUFRZ0JFRVBjVUVEUmhzZ0JDQVNHeUlFUWRnQWF3NGhCQklTRWhJU0VoSVNEaElQQmc0T0RoSUdFaElTRWdJRkF4SVNDUklCRWhJRUFBc0NRQ0FFUWNFQWF3NEhEaElMRWc0T0RnQUxJQVJCMHdCR0RRa01FUXNnQmlrRFFDRVVRY0FPREFVTFFRQWhCQUpBQWtBQ1FBSkFBa0FDUUFKQUlCSkIvd0Z4RGdnQUFRSURCQmNGQmhjTElBWW9Ba0FnRGpZQ0FBd1dDeUFHS0FKQUlBNDJBZ0FNRlFzZ0JpZ0NRQ0FPckRjREFBd1VDeUFHS0FKQUlBNDdBUUFNRXdzZ0JpZ0NRQ0FPT2dBQURCSUxJQVlvQWtBZ0RqWUNBQXdSQ3lBR0tBSkFJQTZzTndNQURCQUxJQWxCQ0NBSlFRaExHeUVKSUFWQkNISWhCVUg0QUNFRUN5QVFJUWNnQkVFZ2NTRUxJQVlwQTBBaUZGQkZCRUFEUUNBSFFRRnJJZ2NnRktkQkQzRkI0QnhxTFFBQUlBdHlPZ0FBSUJSQ0QxWWhEU0FVUWdTSUlSUWdEUTBBQ3dzZ0JVRUljVVVnQmlrRFFGQnlEUU1nQkVFRWRrSEFEbW9oRDBFQ0lRd01Bd3NnRUNFRUlBWXBBMEFpRkZCRkJFQURRQ0FFUVFGcklnUWdGS2RCQjNGQk1ISTZBQUFnRkVJSFZpRUhJQlJDQTRnaEZDQUhEUUFMQ3lBRUlRY2dCVUVJY1VVTkFpQUpJQkFnQjJzaUJFRUJhaUFFSUFsSUd5RUpEQUlMSUFZcEEwQWlGRUovVndSQUlBWkNBQ0FVZlNJVU53TkFRUUVoREVIQURnd0JDeUFGUVlBUWNRUkFRUUVoREVIQkRnd0JDMEhDRGtIQURpQUZRUUZ4SWd3YkN5RVBJQkFoQkFKQUlCUkNnSUNBZ0JCVUJFQWdGQ0VWREFFTEEwQWdCRUVCYXlJRUlCUWdGRUlLZ0NJVlFncCtmYWRCTUhJNkFBQWdGRUwvLy8vL253RldJUWNnRlNFVUlBY05BQXNMSUJXbklnY0VRQU5BSUFSQkFXc2lCQ0FISUFkQkNtNGlDMEVLYkd0Qk1ISTZBQUFnQjBFSlN5RU5JQXNoQnlBTkRRQUxDeUFFSVFjTElBVkIvLzk3Y1NBRklBbEJmMG9iSVFVZ0Jpa0RRQ0lVUWdCU0lBbHlSUVJBUVFBaENTQVFJUWNNQ2dzZ0NTQVVVQ0FRSUFkcmFpSUVJQVFnQ1VnYklRa01DUXNDZnlBSklnUkJBRWNoQ0FKQUFrQUNRQ0FHS0FKQUlnVkI0eFlnQlJzaUJ5SUZRUU54UlNBRVJYSU5BQU5BSUFVdEFBQkZEUUlnQkVFQmF5SUVRUUJISVFnZ0JVRUJhaUlGUVFOeFJRMEJJQVFOQUFzTElBaEZEUUVMQWtBZ0JTMEFBRVVnQkVFRVNYSU5BQU5BSUFVb0FnQWlDRUYvY3lBSVFZR0NoQWhyY1VHQWdZS0VlSEVOQVNBRlFRUnFJUVVnQkVFRWF5SUVRUU5MRFFBTEN5QUVSUTBBQTBBZ0JTQUZMUUFBUlEwQ0dpQUZRUUZxSVFVZ0JFRUJheUlFRFFBTEMwRUFDeUlFSUFjZ0NXb2dCQnNoQ0NBTElRVWdCQ0FIYXlBSklBUWJJUWtNQ0FzZ0NRUkFJQVlvQWtBTUFndEJBQ0VFSUFCQklDQUtRUUFnQlJBTkRBSUxJQVpCQURZQ0RDQUdJQVlwQTBBK0FnZ2dCaUFHUVFocU5nSkFRWDhoQ1NBR1FRaHFDeUVJUVFBaEJBSkFBMEFnQ0NnQ0FDSUhSUTBCSUFaQkJHb2dCeEFpSWdkQkFFZ2lDeUFISUFrZ0JHdExja1VFUUNBSVFRUnFJUWdnQ1NBRUlBZHFJZ1JMRFFFTUFnc0xRWDhoRENBTERRVUxJQUJCSUNBS0lBUWdCUkFOSUFSRkJFQkJBQ0VFREFFTFFRQWhDQ0FHS0FKQUlRMERRQ0FOS0FJQUlnZEZEUUVnQmtFRWFpQUhFQ0lpQnlBSWFpSUlJQVJLRFFFZ0FDQUdRUVJxSUFjUURpQU5RUVJxSVEwZ0JDQUlTdzBBQ3dzZ0FFRWdJQW9nQkNBRlFZREFBSE1RRFNBS0lBUWdCQ0FLU0JzaEJBd0ZDeUFBSUFZckEwQWdDaUFKSUFVZ0JFRUFFUXdBSVFRTUJBc2dCaUFHS1FOQVBBQTNRUUVoQ1NBVElRY2dDeUVGREFJTFFYOGhEQXNnQmtIUUFHb2tBQ0FNRHdzZ0FFRWdJQXdnQ0NBSGF5SUxJQWtnQ1NBTFNCc2lDV29pQ0NBS0lBZ2dDa29iSWdRZ0NDQUZFQTBnQUNBUElBd1FEaUFBUVRBZ0JDQUlJQVZCZ0lBRWN4QU5JQUJCTUNBSklBdEJBQkFOSUFBZ0J5QUxFQTRnQUVFZ0lBUWdDQ0FGUVlEQUFITVFEUXdBQ3dBTGt3SUJBbjhnQUVVRVFFRm5Ed3NnQUNnQ0FFVUVRRUYvRHdzQ1FBSi9RWDRnQUNnQ0JFRUVTUTBBR2lBQUtBSUlSUVJBUVc0Z0FDZ0NEQTBCR2dzZ0FDZ0NGQ0VCSUFBb0FoQkZEUUZCZWlBQlFRaEpEUUFhSUFBb0FoaEZCRUJCYkNBQUtBSWNEUUVhQ3lBQUtBSWdSUVJBUVdzZ0FDZ0NKQTBCR2d0QmNpQUFLQUlzSWdGQkNFa05BQnBCY1NBQlFZQ0FnQUZMRFFBYVFYSWdBU0FBS0FJd0lnSkJBM1JKRFFBYUlBQW9BaWhGQkVCQmRBOExJQUpGQkVCQmNBOExRVzhnQWtILy8vOEhTdzBBR2lBQUtBSTBJZ0ZGQkVCQlpBOExRV01nQVVILy8vOEhTdzBBR2lBQUtBSkFJUUVDUUNBQUtBSThCRUFnQVEwQlFXa1BDMEZvSUFFTkFSb0xRUUFMRHd0QmJVRjZJQUViQ3pnQkFYOGpBRUVRYXlJQ0pBQWdBaUFBTmdJTUlBSWdBVFlDQ0NBQ0tBSU1RUUFnQWlnQ0NFSDhGeWdDQUJFQUFCb2dBa0VRYWlRQUM0TVNBaE4vQW40akFFRXdheUlKSkFBQ1FDQUFFQndpQkEwQVFXWWhCQ0FCUVFKTERRQWdBQ2dDTENFRElBQW9BakFoQkNBQUtBSTRJUUlnQ1VFQU5nSUFJQWtnQWpZQ0JDQUFLQUlvSVFJZ0NTQUVOZ0lZSUFrZ0FqWUNDQ0FKSUFSQkEzUWlBaUFESUFJZ0Ewc2JJQVJCQW5RaUFtNGlBellDRUNBSklBTkJBblEyQWhRZ0NTQUNJQU5zTmdJTUlBQW9BalFoQXlBSklBRTJBaUFnQ1NBRE5nSWNJQU1nQkVzRVFDQUpJQVEyQWh3TEl3QkIwQUJySWdza0FFRm5JUVFDUUNBSklnRkZJQUFpQTBWeURRQWdBU0FETmdJb0lBTWhCU0FCS0FJTUlRWkJhaUVDQWtBZ0FTSUVSUTBBSUFhdFFncUdJaFZDSUlpbkRRQWdGYWNoQWdKQUlBVW9BandpQlFSQUlBUWdBaUFGRVFNQUdpQUVLQUlBSVFJTUFRc2dCQ0FDRUFraUFqWUNBQXRCQUVGcUlBSWJJUUlMSUFJaUJBMEFJQUVvQWlBaEJTTUFRWUFDYXlJQ0pBQWdBMFVnQ3lJRVJYSkZCRUFnQWtFUWFrSEFBQkFZR2lBQ1FReHFJQU1vQWpBUUJ5QUNRUkJxSUFKQkRHcEJCQkFHR2lBQ1FReHFJQU1vQWdRUUJ5QUNRUkJxSUFKQkRHcEJCQkFHR2lBQ1FReHFJQU1vQWl3UUJ5QUNRUkJxSUFKQkRHcEJCQkFHR2lBQ1FReHFJQU1vQWlnUUJ5QUNRUkJxSUFKQkRHcEJCQkFHR2lBQ1FReHFJQU1vQWpnUUJ5QUNRUkJxSUFKQkRHcEJCQkFHR2lBQ1FReHFJQVVRQnlBQ1FSQnFJQUpCREdwQkJCQUdHaUFDUVF4cUlBTW9BZ3dRQnlBQ1FSQnFJQUpCREdwQkJCQUdHZ0pBSUFNb0FnZ2lCVVVOQUNBQ1FSQnFJQVVnQXlnQ0RCQUdHaUFETFFCRVFRRnhSUTBBSUFNb0FnZ2dBeWdDREJBZElBTkJBRFlDREFzZ0FrRU1haUFES0FJVUVBY2dBa0VRYWlBQ1FReHFRUVFRQmhvZ0F5Z0NFQ0lGQkVBZ0FrRVFhaUFGSUFNb0FoUVFCaG9MSUFKQkRHb2dBeWdDSEJBSElBSkJFR29nQWtFTWFrRUVFQVlhQWtBZ0F5Z0NHQ0lGUlEwQUlBSkJFR29nQlNBREtBSWNFQVlhSUFNdEFFUkJBbkZGRFFBZ0F5Z0NHQ0FES0FJY0VCMGdBMEVBTmdJY0N5QUNRUXhxSUFNb0FpUVFCeUFDUVJCcUlBSkJER3BCQkJBR0dpQURLQUlnSWdVRVFDQUNRUkJxSUFVZ0F5Z0NKQkFHR2dzZ0FrRVFhaUFFUWNBQUVCSWFDeUFDUVlBQ2FpUUFJQXRCUUd0QkNCQUVRUUFoQWlNQVFZQUlheUlESkFBZ0FTZ0NHQVJBSUFSQnhBQnFJUVlnQkVGQWF5RUZBMEFnQlVFQUVBY2dCaUFDRUFjZ0EwR0FDQ0FFUWNnQUVDQWdBU2dDQUNBQktBSVVJQUpzUVFwMGFpQURFQzRnQlVFQkVBY2dBMEdBQ0NBRVFjZ0FFQ0FnQVNnQ0FDQUJLQUlVSUFKc1FRcDBha0dBQ0dvZ0F4QXVJQUpCQVdvaUFpQUJLQUlZU1EwQUN3c2dBMEdBQ0JBRUlBTkJnQWhxSkFBZ0MwSElBQkFFUVFBaEJBc2dDMEhRQUdva0FDQUVEUUJCWnlFRUFrQWdDVVVOQUNBQktBSVlSUTBBSXdCQklHc2lCU1FBSUFFaUN5Z0NDQVJBSUFzb0FoZ2hCQU5BSUFRaEEwRUFJUThEUUVFQUlSQkJBQ0VDSUFNRVFBTkFJQVVnRHpvQUdDQUZRUUEyQWh3Z0JTQUZLUU1ZTndNSUlBVWdFallDRUNBRklCQTJBaFFnQlNBRktRTVFOd01BSUFVaEJFRUFJUkVqQUVHQUdHc2lCeVFBQWtBZ0N5SURSUTBBQWtBQ1FBSkFBbjhDZndKQUFrQUNRQ0FES0FJZ1FRRnJEZ0lDQVFBTElBUW9BZ0FoQ0VFQURBTUxJQVFvQWdBTkEwRUFJQVF0QUFnaURFRUNTUTBCR2lBRUxRQUlJZ2hGUVFGMElRd01CUXNnQkMwQUNDRU1JQVFvQWdBTElRZ2dCeEF2SUFkQmdBaHFFQzhnQnlBSXJUY0RnQWdnQkRVQ0JDRVZJQWNnREsxQy93R0ROd09RQ0NBSElCVTNBNGdJSUFjZ0F6VUNERGNEbUFnZ0J5QUROUUlJTndPZ0NDQUhJQU0xQWlBM0E2Z0lRUUVMSVJFZ0NFVU5BUXNnQkMwQUNDRUlRUUFoREF3QkN5QUVMUUFJSWdoRlFRRjBJUXdnQ0NBUlJYSU5BQ0FIUVlBUWFpQUhRWUFJYWlBSEVDWkJBaUVNUVFBaENBc2dEQ0FES0FJUUlnWlBEUUJCZnlBREtBSVVJZ0pCQVdzZ0FpQUVLQUlFYkNBTWFpQUdJQWhCL3dGeGJHb2lDQ0FDY0JzZ0NHb2hCZ05BSUFoQkFXc2dCaUFJSUFKd1FRRkdHeUVPQW44Z0VRUkFJQXhCL3dCeElnSkZCRUFnQjBHQUVHb2dCMEdBQ0dvZ0J4QW1DeUFIUVlBUWFpQUNRUU4wYWd3QkN5QURLQUlBSUE1QkNuUnFDeUVDSUFNb0FoZ2hDaUFDS1FNQUlSVWdCQ0FNTmdJTUlBTWhCaUFWcHlFVUlCVkNJSWluSUFwd3JTSVZJQlVnQkRVQ0JDSVZJQVF0QUFnYklBUW9BZ0FiSWhZZ0ZWRWhDZ0orSUFRaUFpZ0NBRVVFUUNBQ0xRQUlJZzFGQkVBZ0FpZ0NERUVCYXlFS1FnQU1BZ3NnQmlnQ0VDQU5iQ0VOSUFJb0Fnd2hBaUFLQkVBZ0FpQU5ha0VCYXlFS1FnQU1BZ3NnRFNBQ1JXc2hDa0lBREFFTElBWW9BaEFoRFNBR0tBSVVJUk1DZnlBS0JFQWdBaWdDRENBVElBMUJmM05xYWd3QkN5QVRJQTFySUFJb0FneEZhd3NoQ2tJQUlBSXRBQWdpQWtFRFJnMEFHaUFOSUFKQkFXcHNyUXNoRlNBVklBcEJBV3V0ZkNBS3JTQVVyU0lWSUJWK1FpQ0lma0lnaUgwZ0JqVUNGSUtuSVFZZ0F5Z0NBQ0lDSUFNb0FoUWdGcWRzUVFwMGFpQUdRUXAwYWlFR0lBSWdDRUVLZEdvaENnSkFJQU1vQWdSQkVFWUVRQ0FDSUE1QkNuUnFJQVlnQ2tFQUVCRU1BUXNnQWlBT1FRcDBhaUVDSUFRb0FnQkZCRUFnQWlBR0lBcEJBQkFSREFFTElBSWdCaUFLUVFFUUVRc2dERUVCYWlJTUlBTW9BaEJQRFFFZ0NFRUJhaUVJSUE1QkFXb2hCaUFES0FJVUlRSU1BQXNBQ3lBSFFZQVlhaVFBSUFzb0FoZ2lCQ0VDSUJCQkFXb2lFQ0FFU1EwQUN3c2dBaUVESUE5QkFXb2lEMEVFUncwQUN5QVNRUUZxSWhJZ0N5Z0NDRWtOQUFzTElBVkJJR29rQUVFQUlRUUxJQVFOQUNNQVFZQVFheUlESkFBZ0FFVWdDVVZ5UlFSQUlBTkJnQWhxSUFFb0FnQWdBU2dDRkVFS2RHcEJnQWhyRUJjZ0FTZ0NHRUVDVHdSQVFRRWhCQU5BSUFOQmdBaHFJQUVvQWdBZ0FTZ0NGQ0lDSUFJZ0JHeHFRUXAwYWtHQUNHc1FGaUFFUVFGcUlnUWdBU2dDR0VrTkFBc0xJQU1pQWtHQUNHb2hDMEVBSVFRRFFDQUNJQVJCQTNRaUJXb2dCU0FMYWlrREFCQXlJQVJCQVdvaUJFR0FBVWNOQUFzZ0FDZ0NBQ0FBS0FJRUlBTkJnQWdRSUNBRFFZQUlha0dBQ0JBRUlBTkJnQWdRQkNBQktBSUFJZ1FnQVNnQ0RFRUtkQ0lCRUFRQ1FDQUFLQUpBSWdBRVFDQUVJQUVnQUJFQ0FBd0JDeUFFRUFnTEN5QURRWUFRYWlRQVFRQWhCQXNnQ1VFd2FpUUFJQVFMSndFQmZ3SkFBa0FDUUFKQUlBQU9Bd0FCQWdNTFFkQVREd3RCaXhFUEMwR2VFeUVCQ3lBQkM0OERBUUYvSXdCQmdBTnJJZ1FrQUNBRVFRQTJBb3dCSUFSQmpBRnFJQUVRQndKQUlBRkJ3QUJOQkVBZ0JFR1FBV29nQVJBWVFRQklEUUVnQkVHUUFXb2dCRUdNQVdwQkJCQUdRUUJJRFFFZ0JFR1FBV29nQWlBREVBWkJBRWdOQVNBRVFaQUJhaUFBSUFFUUVob01BUXNnQkVHUUFXcEJ3QUFRR0VFQVNBMEFJQVJCa0FGcUlBUkJqQUZxUVFRUUJrRUFTQTBBSUFSQmtBRnFJQUlnQXhBR1FRQklEUUFnQkVHUUFXb2dCRUZBYTBIQUFCQVNRUUJJRFFBZ0FDQUVLUU5BTndBQUlBQWdCQ2tEU0RjQUNDQUFJQVFwQTFnM0FCZ2dBQ0FFS1FOUU53QVFJQUJCSUdvaEFDQUJRU0JySWdKQndRQlBCRUFEUUNBRUlBUkJRR3RCd0FBUUJTSUJRVUJyUWNBQUlBRVFNVUVBU0EwQ0lBQWdBU2tEUURjQUFDQUFJQUVwQTBnM0FBZ2dBQ0FFS1FOWU53QVlJQUFnQkNrRFVEY0FFQ0FBUVNCcUlRQWdBa0VnYXlJQ1FjQUFTdzBBQ3dzZ0JDQUVRVUJyUWNBQUVBVWlBVUZBYXlBQ0lBRVFNVUVBU0EwQUlBQWdBVUZBYXlBQ0VBVWFDeUFFUVpBQmFrSHdBUkFFSUFSQmdBTnFKQUFMQXdBQkM1a0NBQ0FBUlFSQVFRQVBDd0ovQWtBZ0FBUi9JQUZCL3dCTkRRRUNRRUdnSGlnQ0FDZ0NBRVVFUUNBQlFZQi9jVUdBdndOR0RRTU1BUXNnQVVIL0QwMEVRQ0FBSUFGQlAzRkJnQUZ5T2dBQklBQWdBVUVHZGtIQUFYSTZBQUJCQWd3RUN5QUJRWUN3QTA5QkFDQUJRWUJBY1VHQXdBTkhHMFVFUUNBQUlBRkJQM0ZCZ0FGeU9nQUNJQUFnQVVFTWRrSGdBWEk2QUFBZ0FDQUJRUVoyUVQ5eFFZQUJjam9BQVVFRERBUUxJQUZCZ0lBRWEwSC8vejlOQkVBZ0FDQUJRVDl4UVlBQmNqb0FBeUFBSUFGQkVuWkI4QUZ5T2dBQUlBQWdBVUVHZGtFL2NVR0FBWEk2QUFJZ0FDQUJRUXgyUVQ5eFFZQUJjam9BQVVFRURBUUxDMEhjSGtFWk5nSUFRWDhGUVFFTERBRUxJQUFnQVRvQUFFRUJDd3RRQVFOL0FrQWdBQ2dDQUN3QUFCQVBSUVJBREFFTEEwQWdBQ2dDQUNJQ0xBQUFJUU1nQUNBQ1FRRnFOZ0lBSUFFZ0EycEJNR3NoQVNBQ0xBQUJFQTlGRFFFZ0FVRUtiQ0VCREFBTEFBc2dBUXU3QWdBQ1FDQUJRUlJMRFFBQ1FBSkFBa0FDUUFKQUFrQUNRQUpBQWtBQ1FDQUJRUWxyRGdvQUFRSURCQVVHQndnSkNnc2dBaUFDS0FJQUlnRkJCR28yQWdBZ0FDQUJLQUlBTmdJQUR3c2dBaUFDS0FJQUlnRkJCR28yQWdBZ0FDQUJOQUlBTndNQUR3c2dBaUFDS0FJQUlnRkJCR28yQWdBZ0FDQUJOUUlBTndNQUR3c2dBaUFDS0FJQVFRZHFRWGh4SWdGQkNHbzJBZ0FnQUNBQktRTUFOd01BRHdzZ0FpQUNLQUlBSWdGQkJHbzJBZ0FnQUNBQk1nRUFOd01BRHdzZ0FpQUNLQUlBSWdGQkJHbzJBZ0FnQUNBQk13RUFOd01BRHdzZ0FpQUNLQUlBSWdGQkJHbzJBZ0FnQUNBQk1BQUFOd01BRHdzZ0FpQUNLQUlBSWdGQkJHbzJBZ0FnQUNBQk1RQUFOd01BRHdzZ0FpQUNLQUlBUVFkcVFYaHhJZ0ZCQ0dvMkFnQWdBQ0FCS3dNQU9RTUFEd3NnQUNBQ1FRQVJBZ0FMQ3hrQUlBQXRBT2dCQkVBZ0FFSi9Od05ZQ3lBQVFuODNBMUFMSXdBZ0FTQUJLUU13UWdGOE53TXdJQUlnQVNBQVFRQVFFU0FDSUFBZ0FFRUFFQkVMT1FFQ2Z5QUFRUU51SWdKQkFuUWhBUUpBQWtBQ1FDQUNRUU5zUVg5eklBQnFEZ0lCQUFJTElBRkJBWEloQVFzZ0FVRUNhaUVCQ3lBQkMzb0JBbjhnQUVIQS93QnpRUUZxUVFoMlFYOXpRUzl4SUFCQndmOEFjMEVCYWtFSWRrRi9jMEVyY1NBQVFlYi9BMnBCQ0haQi93RnhJZ0VnQUVIQkFHcHhjbklnQUVITS93TnFRUWgySWdJZ0FFSEhBR3B4SUFGQi93RnpjWElnQUVIOEFXb2dBRUhDL3dOcVFRaDJjU0FDUVg5emNVSC9BWEZ5QzlZQkFRVi9RWDhoQkNBRFFRTnVJZ1pCQW5RaEJRSkFBa0FDUUNBR1FRTnNRWDl6SUFOcURnSUJBQUlMSUFWQkFYSWhCUXNnQlVFQ2FpRUZDeUFCSUFWTEJIOENRQ0FEUlEwQVFRQWhBVUVJSVFRRFFDQUJJQUl0QUFBaUNISWhCd05BSUFBaUFTQUhJQVFpQmtFR2F5SUVka0UvY1JBb09nQUFJQUZCQVdvaEFDQUVRUVZMRFFBTElBTkJBV3NpQXdSQUlBSkJBV29oQWlBSFFRaDBJUUVnQkVFSWFpRUVEQUVMQ3lBRVJRMEFJQUVnQ0VFTUlBWnJkRUUvY1JBb09nQUJJQUZCQW1vaEFBc2dBRUVBT2dBQUlBVUZJQVFMQzhvRUFRTi9Jd0JCNEFCcklnUWtBQ0FERUI4aEJTQUNFQndoQXdKQUFrQWdCVVVOQUNBRERRRWdBVUVDU1EwQUlBQkJKRHNBQUNBQlFRRnJJZ01nQlJBS0lnRk5EUUFnQUVFQmFpQUZJQUZCQVdvUUJTRUFJQU1nQVdzaUEwRUVTUTBBSUFBZ0FXb2lBVUdrN1BVQk5nQUFJQVFnQWlnQ09EWUNNQ0FFUVVCcklBUkJNR29RRXlBRFFRTnJJZ01nQkVGQWF4QUtJZ0JORFFBZ0FVRURhaUFFUVVCcklBQkJBV29RQlNFQklBTWdBR3NpQTBFRVNRMEFJQUFnQVdvaUFVR2sydlVCTmdBQUlBUWdBaWdDTERZQ0lDQUVRVUJySUFSQklHb1FFeUFEUVFOcklnTWdCRUZBYXhBS0lnQk5EUUFnQVVFRGFpQUVRVUJySUFCQkFXb1FCU0VCSUFNZ0FHc2lBMEVFU1EwQUlBQWdBV29pQVVHczZQVUJOZ0FBSUFRZ0FpZ0NLRFlDRUNBRVFVQnJJQVJCRUdvUUV5QURRUU5ySWdNZ0JFRkFheEFLSWdCTkRRQWdBVUVEYWlBRVFVQnJJQUJCQVdvUUJTRUJJQU1nQUdzaUEwRUVTUTBBSUFBZ0FXb2lBVUdzNFBVQk5nQUFJQVFnQWlnQ01EWUNBQ0FFUVVCcklBUVFFeUFEUVFOcklnTWdCRUZBYXhBS0lnQk5EUUFnQVVFRGFpQUVRVUJySUFCQkFXb1FCU0VCSUFNZ0FHc2lBMEVDU1EwQUlBQWdBV29pQUVFa093QUFJQUJCQVdvaUFDQURRUUZySWdZZ0FpZ0NFQ0FDS0FJVUVDa2lBVUYvUmlJRkRRQkJZU0VESUFaQkFDQUJJQVViYXlJR1FRSkpEUUVnQUNBQUlBRnFJQVViSWdCQkpEc0FBQ0FBUVFGcUlBWkJBV3NnQWlnQ0FDQUNLQUlFRUNraEFDQUVRZUFBYWlRQVFXRkJBQ0FBUVg5R0d3OExRV0VoQXdzZ0JFSGdBR29rQUNBREM3Z0JBUUYvUVFBZ0FFRUVhaUFBUWREL0EycEJDSFpCZjNOeFFUa2dBR3RCQ0haQmYzTnhRZjhCY1NBQVFjRUFheUlCSUFGQkNIWkJmM054UWRvQUlBQnJRUWgyUVg5emNVSC9BWEVnQUVHNUFXb2dBRUdmL3dOcVFRaDJRWDl6Y1VINkFDQUFhMEVJZGtGL2MzRkIvd0Z4SUFCQjBQOEFjMEVCYWtFSWRrRi9jMEUvY1NBQVFkVC9BSE5CQVdwQkNIWkJmM05CUG5GeWNuSnlJZ0ZyUVFoMlFYOXpJQUJCdnY4RGMwRUJha0VJZG5GQi93RnhJQUZ5QzY0QkFRUi9BbjhDZnlBQ0xBQUFFQ3NpQmtIL0FVWUVRRUYvREFFTEEwQWdCQ0FHYWlFRUFrQWdBMEVHYWlJR1FRaEpCRUFnQmlFRERBRUxJQUVvQWdBZ0JVMEVRRUVBRHdzZ0FDQUVJQU5CQW1zaUEzWTZBQUFnQUVFQmFpRUFJQVZCQVdvaEJRc2dBa0VCYWlJQ0xBQUFFQ3NpQmtIL0FVY0VRQ0FFUVFaMElRUU1BUXNMUVFBZ0EwRUVTdzBCR2tGL0lBTjBDeUVEUVFBZ0JDQURRWDl6Y1EwQUdpQUJJQVUyQWdBZ0Fnc0xyQU1CQlg4akFFRVFheUlESkFBZ0FDZ0NCQ0VHSUFBb0FoUWhCd0pBSUFJUUh5SUVSUVJBUVdZaEFnd0JDMEZnSVFJZ0FTMEFBQ0lGUVNSSERRQWdBVUVCYWlBQklBVkJKRVliSWdFZ0JDQUVFQW9pQkJBUUlnVU5BQ0FBUVJBMkFqZ2dBU0FCSUFScUlnRWdCUnNpQkVIZkZFRURFQkJGQkVBZ0JFRURhaUFEUVF4cUVCVWlBVVVOQVNBQUlBTW9BZ3cyQWpnTElBRkI2eFJCQXhBUURRQWdBVUVEYWlBRFFReHFFQlVpQVVVTkFDQUFJQU1vQWd3MkFpd2dBVUhqRkVFREVCQU5BQ0FCUVFOcUlBTkJER29RRlNJQlJRMEFJQUFnQXlnQ0REWUNLQ0FCUWVjVVFRTVFFQTBBSUFGQkEyb2dBMEVNYWhBVklnRkZEUUFnQUNBREtBSU1JZ1EyQWpBZ0FDQUVOZ0kwSUFFdEFBQkJKRWNOQUNBRElBYzJBZ3dnQUNnQ0VDQURRUXhxSUFGQkFXb1FMQ0lCUlEwQUlBQWdBeWdDRERZQ0ZDQUJMUUFBUVNSSERRQWdBeUFHTmdJTUlBQW9BZ0FnQTBFTWFpQUJRUUZxRUN3aUFVVU5BQ0FBSUFNb0FndzJBZ1FnQUVFQU5nSkVJQUJDQURjQ1BDQUFRZ0EzQWhnZ0FFSUFOd0lnSUFBUUhDSUNEUUJCWUVFQUlBRXRBQUFiSVFJTElBTkJFR29rQUNBQ0N5a0JBbjhEUUNBQUlBSkJBM1FpQTJvZ0FTQURhaWtBQURjREFDQUNRUUZxSWdKQmdBRkhEUUFMQ3d3QUlBQkJBRUdBQ0JBTEdndGxBUUovSUFBZ0FoQWVJZ0lFZnlBQ0JVRmRRUUFDZnlBQUtBSUFJUVJCQUNFQ0lBQW9BZ1FpQUFSL0EwQWdBeUFDSUFScUxRQUFJQUVnQW1vdEFBQnpjaUVESUFKQkFXb2lBaUFBUncwQUN5QURRUUZyUVFoMlFRRnhRUUZyQlVFQUN3c2JDd3RkQVFKL0l3QkI4QUZySWdNa0FFRi9JUVFDUUNBQ1JTQUFSU0FCUlhKeUlBRkJ3QUJMY2cwQUlBTWdBUkFZUVFCSURRQWdBeUFDUWNBQUVBWkJBRWdOQUNBRElBQWdBUkFTSVFRTElBTkI4QUVRQkNBRFFmQUJhaVFBSUFRTENRQWdBQ0FCTndBQUN4QUFJd0FnQUd0QmNIRWlBQ1FBSUFBTE13RUJmeUFBS0FJVUlnTWdBU0FDSUFBb0FoQWdBMnNpQVNBQklBSkxHeUlCRUFVYUlBQWdBQ2dDRkNBQmFqWUNGQ0FDQzlvQkFRUi9Jd0JCMEFCcklnZ2tBQUpBSUFCRkJFQkJZQ0VBREFFTElBZ2dBQkFLSWdrMkFnd2dDQ0FKTmdJY0lBZ2dDUkFKSWdvMkFoZ2dDQ0FKRUFraUN6WUNDRUVBSVFrQ1FBSkFJQXBGSUF0RmNnMEFJQWdnQWpZQ0ZDQUlJQUUyQWhBZ0NFRUlhaUFBSUFjUUxTSUFEUUVnQ0NnQ0NDRUpJQWdnQ0NnQ0RCQUpJZ0EyQWdnZ0FFVU5BQ0FJSUFZMkFpd2dDQ0FGTmdJb0lBZ2dCRFlDSkNBSUlBTTJBaUFnQ0VFSWFpQUpJQWNRTUNFQURBRUxRV29oQUFzZ0NDZ0NHQkFJSUFnb0FnZ1FDQ0FKRUFnTElBaEIwQUJxSkFBZ0FBdVFBZ0VEZnlNQVFkQUFheUlSSkFCQmZpRVRBa0FnQ0VFRVNRMEFJQWdRQ1NJU1JRUkFRV29oRXd3QkN5QVJRUUEyQWt3Z0VVSUFOd0pFSUJFZ0FqWUNQQ0FSSUFJMkFqZ2dFU0FCTmdJMElCRWdBRFlDTUNBUklBODJBaXdnRVNBT05nSW9JQkVnRFRZQ0pDQVJJQXcyQWlBZ0VTQUdOZ0ljSUJFZ0JUWUNHQ0FSSUFRMkFoUWdFU0FETmdJUUlCRWdDRFlDRENBUklCSTJBZ2dnRVNBUU5nSkFBa0FnRVVFSWFpQUxFQjRpRXdSQUlCSWdDQkFFREFFTElBY0VRQ0FISUJJZ0NCQUZHZ3NDUUNBSlJTQUtSWElOQUNBSklBb2dFVUVJYWlBTEVDcEZEUUFnRWlBSUVBUWdDU0FLRUFSQllTRVREQUVMSUJJZ0NCQUVRUUFoRXdzZ0VoQUlDeUFSUWRBQWFpUUFJQk1MRFFBZ0FFSHdBUkFFSUFBUUpRc3BBQ0FGRUI4UUNpQUFFQlJxSUFFUUZHb2dBaEFVYWlBREVDZHFJQVFRSjJwQkV4QVVha0VRYWdzZkFDQUFRU05xSWdCQkkwMEVRQ0FBUVFKMFFld1dhaWdDQUE4TFFZc1RDNzRCQVFSL0l3QkIwQUJySWdRa0FBSkFJQUJGQkVCQllDRUFEQUVMSUFRZ0FCQUtJZ1UyQWd3Z0JDQUZOZ0ljSUFRZ0JSQUpJZ1kyQWhnZ0JDQUZFQWtpQnpZQ0NFRUFJUVVDUUFKQUlBWkZJQWRGY2cwQUlBUWdBallDRkNBRUlBRTJBaEFnQkVFSWFpQUFJQU1RTFNJQURRRWdCQ2dDQ0NFRklBUWdCQ2dDREJBSklnQTJBZ2dnQUVVTkFDQUVRUWhxSUFVZ0F4QXdJUUFNQVF0QmFpRUFDeUFFS0FJWUVBZ2dCQ2dDQ0JBSUlBVVFDQXNnQkVIUUFHb2tBQ0FBQzRJQ0FRTi9Jd0JCMEFCcklnMGtBRUYrSVE4Q1FDQUlRUVJKRFFBZ0NCQUpJZzVGQkVCQmFpRVBEQUVMSUExQ0FEY0RLQ0FOUWdBM0F5QWdEU0FHTmdJY0lBMGdCVFlDR0NBTklBUTJBaFFnRFNBRE5nSVFJQTBnQ0RZQ0RDQU5JQTQyQWdnZ0RVRUFOZ0pNSUExQ0FEY0NSQ0FOSUFJMkFqd2dEU0FDTmdJNElBMGdBVFlDTkNBTklBQTJBakFnRFNBTU5nSkFBa0FnRFVFSWFpQUxFQjRpRHdSQUlBNGdDQkFFREFFTElBY0VRQ0FISUE0Z0NCQUZHZ3NDUUNBSlJTQUtSWElOQUNBSklBb2dEVUVJYWlBTEVDcEZEUUFnRGlBSUVBUWdDU0FLRUFSQllTRVBEQUVMSUE0Z0NCQUVRUUFoRHdzZ0RoQUlDeUFOUWRBQWFpUUFJQThMWWdFRGZ5QUJSU0FBUlhJRWYwRi9CU0FBUVVCclFRQkJzQUVRQ3hvZ0FFR0FDRUhBQUJBRkdnTkFJQUFnQWtFRGRDSURhaUlFSUFFZ0Eyb3BBQUFnQkNrREFJVTNBd0FnQWtFQmFpSUNRUWhIRFFBTElBQWdBUzBBQURZQzVBRkJBQXNMQy9JU0ZBQkJnQWdMdVFVSXlienpaK1lKYWp1bnlvU0ZybWU3Sy9pVS9uTHpianp4TmgxZk92VlBwZEdDNXExL1VnNVJIMncrSzR4b0JadHJ2VUg3cTltREgza2hmaE1aemVCYkFBQUFBQUVBQUFBQ0FBQUFBd0FBQUFRQUFBQUZBQUFBQmdBQUFBY0FBQUFJQUFBQUNRQUFBQW9BQUFBTEFBQUFEQUFBQUEwQUFBQU9BQUFBRHdBQUFBNEFBQUFLQUFBQUJBQUFBQWdBQUFBSkFBQUFEd0FBQUEwQUFBQUdBQUFBQVFBQUFBd0FBQUFBQUFBQUFnQUFBQXNBQUFBSEFBQUFCUUFBQUFNQUFBQUxBQUFBQ0FBQUFBd0FBQUFBQUFBQUJRQUFBQUlBQUFBUEFBQUFEUUFBQUFvQUFBQU9BQUFBQXdBQUFBWUFBQUFIQUFBQUFRQUFBQWtBQUFBRUFBQUFCd0FBQUFrQUFBQURBQUFBQVFBQUFBMEFBQUFNQUFBQUN3QUFBQTRBQUFBQ0FBQUFCZ0FBQUFVQUFBQUtBQUFBQkFBQUFBQUFBQUFQQUFBQUNBQUFBQWtBQUFBQUFBQUFCUUFBQUFjQUFBQUNBQUFBQkFBQUFBb0FBQUFQQUFBQURnQUFBQUVBQUFBTEFBQUFEQUFBQUFZQUFBQUlBQUFBQXdBQUFBMEFBQUFDQUFBQURBQUFBQVlBQUFBS0FBQUFBQUFBQUFzQUFBQUlBQUFBQXdBQUFBUUFBQUFOQUFBQUJ3QUFBQVVBQUFBUEFBQUFEZ0FBQUFFQUFBQUpBQUFBREFBQUFBVUFBQUFCQUFBQUR3QUFBQTRBQUFBTkFBQUFCQUFBQUFvQUFBQUFBQUFBQndBQUFBWUFBQUFEQUFBQUNRQUFBQUlBQUFBSUFBQUFDd0FBQUEwQUFBQUxBQUFBQndBQUFBNEFBQUFNQUFBQUFRQUFBQU1BQUFBSkFBQUFCUUFBQUFBQUFBQVBBQUFBQkFBQUFBZ0FBQUFHQUFBQUFnQUFBQW9BQUFBR0FBQUFEd0FBQUE0QUFBQUpBQUFBQ3dBQUFBTUFBQUFBQUFBQUNBQUFBQXdBQUFBQ0FBQUFEUUFBQUFjQUFBQUJBQUFBQkFBQUFBb0FBQUFGQUFBQUNnQUFBQUlBQUFBSUFBQUFCQUFBQUFjQUFBQUdBQUFBQVFBQUFBVUFBQUFQQUFBQUN3QUFBQWtBQUFBT0FBQUFBd0FBQUF3QUFBQU5BRUhFRFF1NUNnRUFBQUFDQUFBQUF3QUFBQVFBQUFBRkFBQUFCZ0FBQUFjQUFBQUlBQUFBQ1FBQUFBb0FBQUFMQUFBQURBQUFBQTBBQUFBT0FBQUFEd0FBQUE0QUFBQUtBQUFBQkFBQUFBZ0FBQUFKQUFBQUR3QUFBQTBBQUFBR0FBQUFBUUFBQUF3QUFBQUFBQUFBQWdBQUFBc0FBQUFIQUFBQUJRQUFBQU1BQUFBdEt5QWdJREJZTUhnQUpXeDFBRTkxZEhCMWRDQnBjeUIwYjI4Z2MyaHZjblFBVTJGc2RDQnBjeUIwYjI4Z2MyaHZjblFBVTJWamNtVjBJR2x6SUhSdmJ5QnphRzl5ZEFCUVlYTnpkMjl5WkNCcGN5QjBiMjhnYzJodmNuUUFRWE56YjJOcFlYUmxaQ0JrWVhSaElHbHpJSFJ2YnlCemFHOXlkQUJUYjIxbElHOW1JR1Z1WTI5a1pXUWdjR0Z5WVcxbGRHVnljeUJoY21VZ2RHOXZJR3h2Ym1jZ2IzSWdkRzl2SUhOb2IzSjBBRTFwYzNOcGJtY2dZWEpuZFcxbGJuUnpBRlJ2YnlCdFlXNTVJR3hoYm1WekFGUnZieUJtWlhjZ2JHRnVaWE1BVkc5dklHMWhibmtnZEdoeVpXRmtjd0JPYjNRZ1pXNXZkV2RvSUhSb2NtVmhaSE1BVFdWdGIzSjVJR0ZzYkc5allYUnBiMjRnWlhKeWIzSUFUV1Z0YjNKNUlHTnZjM1FnYVhNZ2RHOXZJSE50WVd4c0FGUnBiV1VnWTI5emRDQnBjeUIwYjI4Z2MyMWhiR3dBWVhKbmIyNHlhUUJCY21kdmJqSnBBRlJvWlNCd1lYTnpkMjl5WkNCa2IyVnpJRzV2ZENCdFlYUmphQ0IwYUdVZ2MzVndjR3hwWldRZ2FHRnphQUJQZFhSd2RYUWdjRzlwYm5SbGNpQnRhWE50WVhSamFBQlBkWFJ3ZFhRZ2FYTWdkRzl2SUd4dmJtY0FVMkZzZENCcGN5QjBiMjhnYkc5dVp3QlRaV055WlhRZ2FYTWdkRzl2SUd4dmJtY0FVR0Z6YzNkdmNtUWdhWE1nZEc5dklHeHZibWNBUVhOemIyTnBZWFJsWkNCa1lYUmhJR2x6SUhSdmJ5QnNiMjVuQUZSb2NtVmhaR2x1WnlCbVlXbHNkWEpsQUUxbGJXOXllU0JqYjNOMElHbHpJSFJ2YnlCc1lYSm5aUUJVYVcxbElHTnZjM1FnYVhNZ2RHOXZJR3hoY21kbEFGVnVhMjV2ZDI0Z1pYSnliM0lnWTI5a1pRQmhjbWR2YmpKcFpBQkJjbWR2YmpKcFpBQkZibU52WkdsdVp5Qm1ZV2xzWldRQVJHVmpiMlJwYm1jZ1ptRnBiR1ZrQUdGeVoyOXVNbVFBUVhKbmIyNHlaQUJCY21kdmJqSmZRMjl1ZEdWNGRDQmpiMjUwWlhoMElHbHpJRTVWVEV3QVQzVjBjSFYwSUhCdmFXNTBaWElnYVhNZ1RsVk1UQUJVYUdVZ1lXeHNiMk5oZEdVZ2JXVnRiM0o1SUdOaGJHeGlZV05ySUdseklFNVZURXdBVkdobElHWnlaV1VnYldWdGIzSjVJR05oYkd4aVlXTnJJR2x6SUU1VlRFd0FUMHNBSkhZOUFDeDBQUUFzY0QwQUpHMDlBRlJvWlhKbElHbHpJRzV2SUhOMVkyZ2dkbVZ5YzJsdmJpQnZaaUJCY21kdmJqSUFVMkZzZENCd2IybHVkR1Z5SUdseklFNVZURXdzSUdKMWRDQnpZV3gwSUd4bGJtZDBhQ0JwY3lCdWIzUWdNQUJUWldOeVpYUWdjRzlwYm5SbGNpQnBjeUJPVlV4TUxDQmlkWFFnYzJWamNtVjBJR3hsYm1kMGFDQnBjeUJ1YjNRZ01BQlFZWE56ZDI5eVpDQndiMmx1ZEdWeUlHbHpJRTVWVEV3c0lHSjFkQ0J3WVhOemQyOXlaQ0JzWlc1bmRHZ2dhWE1nYm05MElEQUFRWE56YjJOcFlYUmxaQ0JrWVhSaElIQnZhVzUwWlhJZ2FYTWdUbFZNVEN3Z1luVjBJR0ZrSUd4bGJtZDBhQ0JwY3lCdWIzUWdNQUFvYm5Wc2JDa0FBQUNiQ0FBQXV3Y0FBRWtKQUFEQUNRQUFzQWtBQVBBSEFBQWZDQUFBTUFnQUFNa0lBQUJ2Q2dBQTRBa0FBQllLQUFBN0NnQUFRd2dBQUNzTEFBREJDZ0FBa2dvQUFQUUtBQUFDQ0FBQUVRZ0FBRnNKQUFCYkNBQUFkQWtBQUhRSUFBQUZDUUFBZEFjQUFDMEpBQUNlQndBQTlBZ0FBR0lIQUFBWUNRQUFpQWNBQU9FSUFBQk9Cd0FBL3drQUFGd0tBQUFCQUVHa0dBc0JBZ0JCeXhnTEJmLy8vLy8vQUVHUUdRdEJFUUFLQUJFUkVRQUFBQUFGQUFBQUFBQUFDUUFBQUFBTEFBQUFBQUFBQUFBUkFBOEtFUkVSQXdvSEFBRUFDUXNMQUFBSkJnc0FBQXNBQmhFQUFBQVJFUkVBUWVFWkN5RUxBQUFBQUFBQUFBQVJBQW9LRVJFUkFBb0FBQUlBQ1FzQUFBQUpBQXNBQUFzQVFac2FDd0VNQUVHbkdnc1ZEQUFBQUFBTUFBQUFBQWtNQUFBQUFBQU1BQUFNQUVIVkdnc0JEZ0JCNFJvTEZRMEFBQUFFRFFBQUFBQUpEZ0FBQUFBQURnQUFEZ0JCanhzTEFSQUFRWnNiQ3g0UEFBQUFBQThBQUFBQUNSQUFBQUFBQUJBQUFCQUFBQklBQUFBU0VoSUFRZEliQ3c0U0FBQUFFaElTQUFBQUFBQUFDUUJCZ3h3TEFRc0FRWThjQ3hVS0FBQUFBQW9BQUFBQUNRc0FBQUFBQUFzQUFBc0FRYjBjQ3dFTUFFSEpIQXNuREFBQUFBQU1BQUFBQUFrTUFBQUFBQUFNQUFBTUFBQXdNVEl6TkRVMk56ZzVRVUpEUkVWR0FFSHdIQXNCQVFCQm9CNExBb2dQQUVIWUhnc0RrQkZRIjsKICAgICAgICB9LCAxNDU6ICgpID0+IHsKICAgICAgICB9LCA5Njc6ICgpID0+IHsKICAgICAgICB9IH0sIEIgPSB7fTsKICAgICAgICBmdW5jdGlvbiBRKEEyKSB7CiAgICAgICAgICB2YXIgSTIgPSBCW0EyXTsKICAgICAgICAgIGlmIChJMiAhPT0gdm9pZCAwKQogICAgICAgICAgICByZXR1cm4gSTIuZXhwb3J0czsKICAgICAgICAgIHZhciBDID0gQltBMl0gPSB7IGV4cG9ydHM6IHt9IH07CiAgICAgICAgICByZXR1cm4gZ1tBMl0uY2FsbChDLmV4cG9ydHMsIEMsIEMuZXhwb3J0cywgUSksIEMuZXhwb3J0czsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIEkgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgPyAoQTIpID0+IE9iamVjdC5nZXRQcm90b3R5cGVPZihBMikgOiAoQTIpID0+IEEyLl9fcHJvdG9fXywgUS50ID0gZnVuY3Rpb24oZzIsIEIyKSB7CiAgICAgICAgICBpZiAoMSAmIEIyICYmIChnMiA9IHRoaXMoZzIpKSwgOCAmIEIyKQogICAgICAgICAgICByZXR1cm4gZzI7CiAgICAgICAgICBpZiAodHlwZW9mIGcyID09ICJvYmplY3QiICYmIGcyKSB7CiAgICAgICAgICAgIGlmICg0ICYgQjIgJiYgZzIuX19lc01vZHVsZSkKICAgICAgICAgICAgICByZXR1cm4gZzI7CiAgICAgICAgICAgIGlmICgxNiAmIEIyICYmIHR5cGVvZiBnMi50aGVuID09ICJmdW5jdGlvbiIpCiAgICAgICAgICAgICAgcmV0dXJuIGcyOwogICAgICAgICAgfQogICAgICAgICAgdmFyIEMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgICAgICAgUS5yKEMpOwogICAgICAgICAgdmFyIEUgPSB7fTsKICAgICAgICAgIEEgPSBBIHx8IFtudWxsLCBJKHt9KSwgSShbXSksIEkoSSldOwogICAgICAgICAgZm9yICh2YXIgaSA9IDIgJiBCMiAmJiBnMjsgdHlwZW9mIGkgPT0gIm9iamVjdCIgJiYgIX5BLmluZGV4T2YoaSk7IGkgPSBJKGkpKQogICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhpKS5mb3JFYWNoKChBMikgPT4gRVtBMl0gPSAoKSA9PiBnMltBMl0pOwogICAgICAgICAgcmV0dXJuIEUuZGVmYXVsdCA9ICgpID0+IGcyLCBRLmQoQywgRSksIEM7CiAgICAgICAgfSwgUS5kID0gKEEyLCBJMikgPT4gewogICAgICAgICAgZm9yICh2YXIgZzIgaW4gSTIpCiAgICAgICAgICAgIFEubyhJMiwgZzIpICYmICFRLm8oQTIsIGcyKSAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkoQTIsIGcyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogSTJbZzJdIH0pOwogICAgICAgIH0sIFEubyA9IChBMiwgSTIpID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChBMiwgSTIpLCBRLnIgPSAoQTIpID0+IHsKICAgICAgICAgIHR5cGVvZiBTeW1ib2wgIT0gInVuZGVmaW5lZCIgJiYgU3ltYm9sLnRvU3RyaW5nVGFnICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBMiwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAiTW9kdWxlIiB9KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KEEyLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CiAgICAgICAgfSwgUSg2MzEpOwogICAgICB9KSgpOwogICAgfSk7CiAgfSkoYXJnb24yQnVuZGxlZF9taW4pOwogIGdsb2JhbFRoaXMuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIGFzeW5jIChlKSA9PiB7CiAgICBsZXQgeyB1c2VybmFtZSwgcGFzc3dvcmQsIHBpbiB9ID0gZS5kYXRhOwogICAgbGV0IGRlcml2ZWRLZXkgPSBhd2FpdCBhcmdvbjJCdW5kbGVkX21pbi5leHBvcnRzLmhhc2goewogICAgICBwYXNzOiB1c2VybmFtZSwKICAgICAgc2FsdDogcGFzc3dvcmQsCiAgICAgIHRpbWU6IHBhcnNlSW50KHBpbiksCiAgICAgIG1lbTogMTAyNCAqIDEwLAogICAgICBoYXNoTGVuOiAzMiwKICAgICAgdHlwZTogYXJnb24yQnVuZGxlZF9taW4uZXhwb3J0cy5BcmdvblR5cGUuQXJnb24yaWQKICAgIH0pOwogICAgZ2xvYmFsVGhpcy5wb3N0TWVzc2FnZShkZXJpdmVkS2V5KTsKICB9KTsKfSkoKTsK";
const blob = typeof window !== "undefined" && window.Blob && new Blob([atob(encodedJs)], { type: "text/javascript;charset=utf-8" });
function WorkerWrapper() {
  const objURL = blob && (window.URL || window.webkitURL).createObjectURL(blob);
  try {
    return objURL ? new Worker(objURL) : new Worker("data:application/javascript;base64," + encodedJs, { type: "module" });
  } finally {
    objURL && (window.URL || window.webkitURL).revokeObjectURL(objURL);
  }
}
function create_fragment$5(ctx) {
  let form;
  let div0;
  let label0;
  let t1;
  let input0;
  let t2;
  let div1;
  let label1;
  let t4;
  let input1;
  let t5;
  let div2;
  let label2;
  let t7;
  let input2;
  let t8;
  let button;
  let mounted;
  let dispose;
  return {
    c() {
      form = element("form");
      div0 = element("div");
      label0 = element("label");
      label0.textContent = "Email address";
      t1 = space();
      input0 = element("input");
      t2 = space();
      div1 = element("div");
      label1 = element("label");
      label1.textContent = "Password";
      t4 = space();
      input1 = element("input");
      t5 = space();
      div2 = element("div");
      label2 = element("label");
      label2.textContent = "PIN";
      t7 = space();
      input2 = element("input");
      t8 = space();
      button = element("button");
      button.textContent = "Sign in";
      attr(label0, "for", "userEmail");
      attr(label0, "class", "sr-only");
      attr(input0, "class", "border-solid border border-gray-400 rounded px-2 py-3");
      attr(input0, "type", "email");
      attr(input0, "id", "userEmail");
      attr(input0, "placeholder", "Email address");
      input0.required = true;
      attr(div0, "class", "mb-4");
      attr(label1, "for", "userEmail");
      attr(label1, "class", "sr-only");
      attr(input1, "class", "border-solid border border-gray-400 rounded px-2 py-3");
      attr(input1, "type", "password");
      attr(input1, "id", "userPass");
      attr(input1, "placeholder", "Password");
      attr(input1, "minlength", "16");
      attr(input1, "title", ctx[4]);
      input1.required = true;
      attr(div1, "class", "mb-4");
      attr(label2, "for", "PIN");
      attr(label2, "class", "sr-only");
      attr(input2, "class", "border-solid border border-gray-400 rounded px-2 py-3");
      attr(input2, "type", "password");
      attr(input2, "name", "pin");
      attr(input2, "pattern", String.raw`[0-9]{${ctx[5][0]},${ctx[5][1]}}`);
      attr(input2, "placeholder", "PIN (" + ctx[5][0] + "- " + ctx[5][1] + ")");
      attr(input2, "title", "");
      attr(input2, "minlength", ctx[5][0]);
      attr(input2, "maxlength", ctx[5][1]);
      attr(div2, "class", "mb-4");
      attr(button, "class", "bg-gray-500 hover:bg-gray-600 text-white font-bold w-full py-3");
      attr(button, "type", "submit");
      attr(form, "method", "post");
      attr(form, "class", "mt-8 mb-4");
    },
    m(target, anchor) {
      insert(target, form, anchor);
      append(form, div0);
      append(div0, label0);
      append(div0, t1);
      append(div0, input0);
      set_input_value(input0, ctx[1]);
      append(form, t2);
      append(form, div1);
      append(div1, label1);
      append(div1, t4);
      append(div1, input1);
      set_input_value(input1, ctx[2]);
      append(form, t5);
      append(form, div2);
      append(div2, label2);
      append(div2, t7);
      append(div2, input2);
      set_input_value(input2, ctx[3]);
      append(form, t8);
      append(form, button);
      if (!mounted) {
        dispose = [
          listen(input0, "input", ctx[8]),
          listen(input1, "input", ctx[9]),
          listen(input2, "input", ctx[10]),
          listen(input2, "invalid", ctx[11]),
          listen(form, "submit", ctx[7])
        ];
        mounted = true;
      }
    },
    p(ctx2, [dirty]) {
      if (dirty & 2 && input0.value !== ctx2[1]) {
        set_input_value(input0, ctx2[1]);
      }
      if (dirty & 4 && input1.value !== ctx2[2]) {
        set_input_value(input1, ctx2[2]);
      }
      if (dirty & 8 && input2.value !== ctx2[3]) {
        set_input_value(input2, ctx2[3]);
      }
    },
    i: noop$2,
    o: noop$2,
    d(detaching) {
      if (detaching)
        detach(form);
      mounted = false;
      run_all(dispose);
    }
  };
}
function instance$2($$self, $$props, $$invalidate) {
  let $pkBuffer, $$unsubscribe_pkBuffer = noop$2, $$subscribe_pkBuffer = () => ($$unsubscribe_pkBuffer(), $$unsubscribe_pkBuffer = subscribe(pkBuffer2, ($$value) => $$invalidate(12, $pkBuffer = $$value)), pkBuffer2);
  $$self.$$.on_destroy.push(() => $$unsubscribe_pkBuffer());
  let { pkBuffer: pkBuffer2 } = $$props;
  $$subscribe_pkBuffer();
  let username, password, pin, passwordRules = `At least 16 characters`, pinLength = [1, 15];
  const showPINError = (e) => {
    e.target.setCustomValidity(`PIN should be between ${pinLength[0]} and ${pinLength[1]} numerals`);
  };
  const handleOnSubmit = async (e) => {
    e.preventDefault();
    const pWorker = new WorkerWrapper$1();
    const aWorker = new WorkerWrapper();
    pWorker.postMessage({ username, password, pin: parseInt(pin) });
    pWorker.addEventListener("message", (e2) => {
      set_store_value(pkBuffer2, $pkBuffer = e2.data, $pkBuffer);
    });
    aWorker.postMessage({ username, password, pin: parseInt(pin) });
    aWorker.addEventListener("message", (e2) => {
      set_store_value(pkBuffer2, $pkBuffer = e2.data.hash, $pkBuffer);
    });
  };
  function input0_input_handler() {
    username = this.value;
    $$invalidate(1, username);
  }
  function input1_input_handler() {
    password = this.value;
    $$invalidate(2, password);
  }
  function input2_input_handler() {
    pin = this.value;
    $$invalidate(3, pin);
  }
  const invalid_handler = (e) => showPINError(e);
  $$self.$$set = ($$props2) => {
    if ("pkBuffer" in $$props2)
      $$subscribe_pkBuffer($$invalidate(0, pkBuffer2 = $$props2.pkBuffer));
  };
  return [
    pkBuffer2,
    username,
    password,
    pin,
    passwordRules,
    pinLength,
    showPINError,
    handleOnSubmit,
    input0_input_handler,
    input1_input_handler,
    input2_input_handler,
    invalid_handler
  ];
}
class UsernamePasswordPin extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$2, create_fragment$5, safe_not_equal, { pkBuffer: 0 });
  }
}
function create_else_block(ctx) {
  let div;
  let img;
  let img_src_value;
  let t;
  let usernamepasswordpin;
  let current;
  usernamepasswordpin = new UsernamePasswordPin({ props: { pkBuffer } });
  return {
    c() {
      div = element("div");
      img = element("img");
      t = space();
      create_component(usernamepasswordpin.$$.fragment);
      attr(img, "class", "rounded-full h-32 w-32");
      if (!src_url_equal(img.src, img_src_value = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAAAAAB3tzPbAAACOUlEQVR4Ae3aCQrrIBRG4e5/Tz+CBAlIkIAECUjoSt48z/GZeAvnrMCvc6/38XzxAAAAYC4AAAAAAAAAAAAAAAAAAAAAAAAAAAAMCAAAAAAAAAAAAAAAAPsagz4V4rq/FmCLTj/k4vYqgCN5/TKfjlcAJKff5pJ5QPH6Y77YBiz6a4thQJ30D03VKmB3+qfcbhOwO+l+waP/+VsEBgDV6USumgNMOtVkDbDoZIstQNHpiimA1+m8JUBSQ8kO4HBqyB1mAElNJTMAr6a8FcCmxjYjgKjGohGAU2POBmBXc7sJwKrmVhOAqOaiCUBQc8EEQO0JwPMB4ADASwhAe3yR8VPiP3/M8XOaPzQd/lLyp56xSuvnUGK0yHC313idCw6umNov+bhm5aK7fdWAZQ/WbdoXnlg5Y+mvfe2SxVdWj20FAAAAAAAAAAAAwFQAAJSS0hwmfVMIc0qlmAfsOQWvP+RDyrtNQM1L0D8WllxNAWqOXifzMVcbgG3xaswv22jAFp3a6zFteYw8fQ9DM6Amr275VG8GlFmdm8uNgDzpgqZ8EyB7XZTPNwDKpAubysWAOuvi5nolYHW6PLdeBjiCbikc1wCK0025cgUg68Zyf0DUrcXegKibi30Bq25v7QnYNKCtH+BwGpA7ugFmDWnuBSgaVOkECBpU6AOoGlbtAlg1rLULIGhYoQvAaViuC0AD6wE4Xh1QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADA194CuqC6onikxXwAAAAASUVORK5CYII="))
        attr(img, "src", img_src_value);
      attr(img, "alt", "user avatar");
      attr(div, "class", "bg-gray-200 rounded py-16 px-12 m-16 flex flex-col items-center justify-center");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      append(div, img);
      append(div, t);
      mount_component(usernamepasswordpin, div, null);
      current = true;
    },
    p: noop$2,
    i(local) {
      if (current)
        return;
      transition_in(usernamepasswordpin.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(usernamepasswordpin.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      destroy_component(usernamepasswordpin);
    }
  };
}
function create_if_block(ctx) {
  let profilepage;
  let current;
  profilepage = new ProfilePage({});
  return {
    c() {
      create_component(profilepage.$$.fragment);
    },
    m(target, anchor) {
      mount_component(profilepage, target, anchor);
      current = true;
    },
    p: noop$2,
    i(local) {
      if (current)
        return;
      transition_in(profilepage.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(profilepage.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      destroy_component(profilepage, detaching);
    }
  };
}
function create_fragment$4(ctx) {
  let div;
  let current_block_type_index;
  let if_block;
  let current;
  const if_block_creators = [create_if_block, create_else_block];
  const if_blocks = [];
  function select_block_type(ctx2, dirty) {
    if (ctx2[0])
      return 0;
    return 1;
  }
  current_block_type_index = select_block_type(ctx);
  if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
  return {
    c() {
      div = element("div");
      if_block.c();
      attr(div, "class", "bg-black-100");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      if_blocks[current_block_type_index].m(div, null);
      current = true;
    },
    p(ctx2, [dirty]) {
      let previous_block_index = current_block_type_index;
      current_block_type_index = select_block_type(ctx2);
      if (current_block_type_index === previous_block_index) {
        if_blocks[current_block_type_index].p(ctx2, dirty);
      } else {
        group_outros();
        transition_out(if_blocks[previous_block_index], 1, 1, () => {
          if_blocks[previous_block_index] = null;
        });
        check_outros();
        if_block = if_blocks[current_block_type_index];
        if (!if_block) {
          if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
          if_block.c();
        } else {
          if_block.p(ctx2, dirty);
        }
        transition_in(if_block, 1);
        if_block.m(div, null);
      }
    },
    i(local) {
      if (current)
        return;
      transition_in(if_block);
      current = true;
    },
    o(local) {
      transition_out(if_block);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      if_blocks[current_block_type_index].d();
    }
  };
}
function instance$1($$self, $$props, $$invalidate) {
  let $keyPair;
  let $pkBuffer;
  component_subscribe($$self, keyPair, ($$value) => $$invalidate(1, $keyPair = $$value));
  component_subscribe($$self, pkBuffer, ($$value) => $$invalidate(0, $pkBuffer = $$value));
  let { ECPair } = globalThis.bitcoinjs;
  pkBuffer.subscribe((pkB) => {
    if (pkB) {
      set_store_value(keyPair, $keyPair = ECPair.fromPrivateKey(buffer.Buffer.from(pkB)), $keyPair);
    }
  });
  return [$pkBuffer];
}
class UserProfile extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance$1, create_fragment$4, safe_not_equal, {});
  }
}
function create_fragment$3(ctx) {
  let div;
  return {
    c() {
      div = element("div");
      div.innerHTML = `<h1>Test</h1>`;
      attr(div, "class", "bg-black-100");
    },
    m(target, anchor) {
      insert(target, div, anchor);
    },
    p: noop$2,
    i: noop$2,
    o: noop$2,
    d(detaching) {
      if (detaching)
        detach(div);
    }
  };
}
class AddressBook extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, null, create_fragment$3, safe_not_equal, {});
  }
}
var database = { database: { width: 1536, height: 1792, paths: [{ d: "M768 768q237 0 443-43t325-127v170q0 69-103 128t-280 93.5-385 34.5-385-34.5-280-93.5-103-128v-170q119 84 325 127t443 43zM768 1536q237 0 443-43t325-127v170q0 69-103 128t-280 93.5-385 34.5-385-34.5-280-93.5-103-128v-170q119 84 325 127t443 43zM768 1152q237 0 443-43t325-127v170q0 69-103 128t-280 93.5-385 34.5-385-34.5-280-93.5-103-128v-170q119 84 325 127t443 43zM768 0q208 0 385 34.5t280 93.5 103 128v128q0 69-103 128t-280 93.5-385 34.5-385-34.5-280-93.5-103-128v-128q0-69 103-128t280-93.5 385-34.5z" }] } };
var addressBook = { "address-book": { width: 1664, height: 1792, paths: [{ d: "M1201 1238q0-57-5.5-107t-21-100.5-39.5-86-64-58-91-22.5q-6 4-33.5 20.5t-42.5 24.5-40.5 20-49 17-46.5 5-46.5-5-49-17-40.5-20-42.5-24.5-33.5-20.5q-51 0-91 22.5t-64 58-39.5 86-21 100.5-5.5 107q0 73 42 121.5t103 48.5h576q61 0 103-48.5t42-121.5zM1028 644q0-108-76.5-184t-183.5-76-183.5 76-76.5 184q0 107 76.5 183t183.5 76 183.5-76 76.5-183zM1664 1184v192q0 14-9 23t-23 9h-96v224q0 66-47 113t-113 47h-1216q-66 0-113-47t-47-113v-1472q0-66 47-113t113-47h1216q66 0 113 47t47 113v224h96q14 0 23 9t9 23v192q0 14-9 23t-23 9h-96v128h96q14 0 23 9t9 23v192q0 14-9 23t-23 9h-96v128h96q14 0 23 9t9 23z" }] } };
var idBadge = { "id-badge": { width: 1280, height: 1792, paths: [{ d: "M1024 1258q0 64-37 107t-91 43h-512q-54 0-91-43t-37-107 9-118 29.5-104 61-78.5 96.5-28.5q80 75 188 75t188-75q56 0 96.5 28.5t61 78.5 29.5 104 9 118zM870 739q0 94-67.5 160.5t-162.5 66.5-162.5-66.5-67.5-160.5 67.5-160.5 162.5-66.5 162.5 66.5 67.5 160.5zM1152 1632v-1376h-1024v1376q0 13 9.5 22.5t22.5 9.5h960q13 0 22.5-9.5t9.5-22.5zM1280 160v1472q0 66-47 113t-113 47h-960q-66 0-113-47t-47-113v-1472q0-66 47-113t113-47h352v96q0 14 9 23t23 9h192q14 0 23-9t9-23v-96h352q66 0 113 47t47 113z" }] } };
function create_fragment$2(ctx) {
  let router;
  let current;
  router = new Router({ props: { routes } });
  return {
    c() {
      create_component(router.$$.fragment);
    },
    m(target, anchor) {
      mount_component(router, target, anchor);
      current = true;
    },
    p: noop$2,
    i(local) {
      if (current)
        return;
      transition_in(router.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(router.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      destroy_component(router, detaching);
    }
  };
}
const routes = {
  "/userprofile": __spreadValues({
    icon: idBadge
  }, wrap({ component: UserProfile })),
  "/addressbook": __spreadValues({
    icon: addressBook
  }, wrap({
    component: AddressBook,
    props: { cssString: "height:100%" }
  })),
  "/database": __spreadValues({
    icon: database
  }, wrap({
    component: Grid_1,
    props: { cssString: "height:100%" }
  }))
};
class Routes extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, null, create_fragment$2, safe_not_equal, {});
  }
}
var Routes$1 = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  [Symbol.toStringTag]: "Module",
  "default": Routes,
  routes
});
function get_each_context(ctx, list, i2) {
  const child_ctx = ctx.slice();
  child_ctx[2] = list[i2];
  child_ctx[4] = i2;
  return child_ctx;
}
function create_each_block(ctx) {
  let div;
  let icon;
  let t;
  let current;
  let mounted;
  let dispose;
  icon = new Icon({
    props: {
      class: "w-max",
      scale: 2,
      data: ctx[2][1].icon
    }
  });
  function click_handler() {
    return ctx[1](ctx[2]);
  }
  return {
    c() {
      div = element("div");
      create_component(icon.$$.fragment);
      t = space();
      attr(div, "class", "h-12 w-12 flex justify-center align-center items-center text-white cursor-pointer");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      mount_component(icon, div, null);
      append(div, t);
      current = true;
      if (!mounted) {
        dispose = listen(div, "click", click_handler);
        mounted = true;
      }
    },
    p(new_ctx, dirty) {
      ctx = new_ctx;
    },
    i(local) {
      if (current)
        return;
      transition_in(icon.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(icon.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      destroy_component(icon);
      mounted = false;
      dispose();
    }
  };
}
function create_fragment$1(ctx) {
  let div;
  let current;
  let each_value = Object.entries(ctx[0]);
  let each_blocks = [];
  for (let i2 = 0; i2 < each_value.length; i2 += 1) {
    each_blocks[i2] = create_each_block(get_each_context(ctx, each_value, i2));
  }
  const out = (i2) => transition_out(each_blocks[i2], 1, 1, () => {
    each_blocks[i2] = null;
  });
  return {
    c() {
      div = element("div");
      for (let i2 = 0; i2 < each_blocks.length; i2 += 1) {
        each_blocks[i2].c();
      }
      attr(div, "class", "border-r-1h border-gray-600 flex flex-col pt-5 gap-5 justify-start bg-blue-900 w-12");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      for (let i2 = 0; i2 < each_blocks.length; i2 += 1) {
        each_blocks[i2].m(div, null);
      }
      current = true;
    },
    p(ctx2, [dirty]) {
      if (dirty & 1) {
        each_value = Object.entries(ctx2[0]);
        let i2;
        for (i2 = 0; i2 < each_value.length; i2 += 1) {
          const child_ctx = get_each_context(ctx2, each_value, i2);
          if (each_blocks[i2]) {
            each_blocks[i2].p(child_ctx, dirty);
            transition_in(each_blocks[i2], 1);
          } else {
            each_blocks[i2] = create_each_block(child_ctx);
            each_blocks[i2].c();
            transition_in(each_blocks[i2], 1);
            each_blocks[i2].m(div, null);
          }
        }
        group_outros();
        for (i2 = each_value.length; i2 < each_blocks.length; i2 += 1) {
          out(i2);
        }
        check_outros();
      }
    },
    i(local) {
      if (current)
        return;
      for (let i2 = 0; i2 < each_value.length; i2 += 1) {
        transition_in(each_blocks[i2]);
      }
      current = true;
    },
    o(local) {
      each_blocks = each_blocks.filter(Boolean);
      for (let i2 = 0; i2 < each_blocks.length; i2 += 1) {
        transition_out(each_blocks[i2]);
      }
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      destroy_each(each_blocks, detaching);
    }
  };
}
function instance($$self) {
  let { routes: routes2 } = Routes$1;
  const click_handler = (route) => push(route[0]);
  return [routes2, click_handler];
}
class SideNav extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, instance, create_fragment$1, safe_not_equal, {});
  }
}
var App_svelte_svelte_type_style_lang = "";
function create_fragment(ctx) {
  let div;
  let sidenav;
  let t;
  let main;
  let routes2;
  let current;
  sidenav = new SideNav({});
  routes2 = new Routes({});
  return {
    c() {
      div = element("div");
      create_component(sidenav.$$.fragment);
      t = space();
      main = element("main");
      create_component(routes2.$$.fragment);
      attr(div, "class", "container max-w-full w-full max-h-full h-full h-screen grid grid-top-row");
    },
    m(target, anchor) {
      insert(target, div, anchor);
      mount_component(sidenav, div, null);
      append(div, t);
      append(div, main);
      mount_component(routes2, main, null);
      current = true;
    },
    p: noop$2,
    i(local) {
      if (current)
        return;
      transition_in(sidenav.$$.fragment, local);
      transition_in(routes2.$$.fragment, local);
      current = true;
    },
    o(local) {
      transition_out(sidenav.$$.fragment, local);
      transition_out(routes2.$$.fragment, local);
      current = false;
    },
    d(detaching) {
      if (detaching)
        detach(div);
      destroy_component(sidenav);
      destroy_component(routes2);
    }
  };
}
class App extends SvelteComponent {
  constructor(options) {
    super();
    init(this, options, null, create_fragment, safe_not_equal, {});
  }
}
window["Buffer"] = buffer.Buffer;
new App({
  target: document.body,
  props: {}
});
